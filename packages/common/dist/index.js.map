{"version":3,"file":"index.js","sources":["../i18n/index.js","../component/ConfigCollapse.vue","../component/ConfigGroup.vue","../component/MultiTypeSelector.vue","../component/ConfigItem.vue","../component/ButtonGroup.vue","../component/SvgButton.vue","../component/PluginSetting.vue","../component/LinkButton.vue","../component/CloseIcon.vue","../component/PluginPanel.vue","../component/PluginRightMenu.vue","../component/ConfigRender.vue","../component/MetaForm.vue","../component/MetaListActions.vue","../component/MetaListTitle.vue","../../../node_modules/.pnpm/vue-draggable-next@2.2.1_sortablejs@1.15.6_vue@3.4.21/node_modules/vue-draggable-next/dist/vue-draggable-next.esm-bundler.js","../component/MaskModal.vue","../component/MetaListItem.vue","../component/MetaListItems.vue","../component/MetaModal.vue","../component/MetaChildItem.vue","../component/MetaModalItem.vue","../component/MetaPopover.vue","../component/VueMonaco.vue","../component/MetaCodeEditor.vue","../component/MetaDescription.vue","../component/VideoGuide.vue","../component/PublicIcon.vue","../component/MonacoEditor.vue","../component/BlockLinkField.vue","../../../node_modules/.pnpm/@vue+shared@3.4.29/node_modules/@vue/shared/dist/shared.esm-bundler.js","../component/BlockLinkEvent.vue","../component/BlockDescription.vue","../component/PluginBlockItemImg.vue","../component/SearchEmpty.vue","../component/SelectAll.vue","../component/PluginBlockList.vue","../component/LifeCycles.vue","../component/EmptyTip.vue","../component/BindI18n.vue","../component/BlockDeployDialog.vue","../component/MetaList.vue","../component/SplitPanes.vue","../component/Pane.vue","../component/I18nInput.vue","../component/CanvasDragItem.vue","../component/toolbar-built-in/ToolbarBaseIcon.vue","../component/toolbar-built-in/ToolbarBaseButton.vue","../component/ToolbarBase.vue","../component/Modal.tsx","../component/Notify.tsx","../component/index.ts","../composable/generateCode/index.ts","../composable/defaultGlobalService.ts","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/bind.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/utils.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/AxiosError.js","../../../node_modules/.pnpm/form-data@4.0.4/node_modules/form-data/lib/browser.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/env/classes/FormData.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/toFormData.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/buildURL.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/InterceptorManager.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/normalizeHeaderName.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/defaults/transitional.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/platform/browser/classes/FormData.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/platform/browser/index.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/platform/index.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/toURLEncodedForm.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/formDataToJSON.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/settle.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/cookies.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/isAbsoluteURL.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/combineURLs.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/buildFullPath.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/parseHeaders.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/isURLSameOrigin.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/cancel/CanceledError.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/parseProtocol.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/adapters/xhr.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/defaults/index.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/transformData.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/cancel/isCancel.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/dispatchRequest.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/mergeConfig.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/env/data.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/validator.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/core/Axios.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/cancel/CancelToken.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/spread.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/helpers/isAxiosError.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/lib/axios.js","../../../node_modules/.pnpm/axios@0.28.0/node_modules/axios/index.js","../composable/http/index.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/util.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/ZodError.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/locales/en.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/errors.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/parseUtil.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/errorUtil.js","../../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/types.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js","../../../node_modules/.pnpm/uri-js@4.4.1/node_modules/uri-js/dist/es5/uri.all.js","../../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/ucs2length.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/util.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/schema_obj.js","../../../node_modules/.pnpm/json-schema-traverse@0.4.1/node_modules/json-schema-traverse/index.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/resolve.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/error_classes.js","../../../node_modules/.pnpm/fast-json-stable-stringify@2.1.0/node_modules/fast-json-stable-stringify/index.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/validate.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/index.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/cache.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/formats.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/ref.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/allOf.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/anyOf.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/comment.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/const.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/contains.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/dependencies.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/enum.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/format.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/if.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/items.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/_limit.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/_limitItems.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/_limitLength.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/_limitProperties.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/multipleOf.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/not.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/oneOf.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/pattern.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/properties.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/propertyNames.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/required.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/uniqueItems.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/index.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/rules.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/data.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/compile/async.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/dotjs/custom.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/definition_schema.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/keyword.js","../../../node_modules/.pnpm/ajv@6.12.6/node_modules/ajv/lib/ajv.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/client/index.js","../../../node_modules/.pnpm/eventsource-parser@3.0.3/node_modules/eventsource-parser/dist/index.js","../../../node_modules/.pnpm/eventsource@3.0.7/node_modules/eventsource/dist/index.js","../../../node_modules/.pnpm/pkce-challenge@5.0.0/node_modules/pkce-challenge/dist/index.browser.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/auth.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/shared/auth-utils.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/server/auth/errors.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/client/auth.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/client/sse.js","../../../node_modules/.pnpm/eventsource-parser@3.0.3/node_modules/eventsource-parser/dist/stream.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/client/streamableHttp.js","../../../node_modules/.pnpm/@opentiny+next@0.2.1/node_modules/@opentiny/next/client.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/server/index.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/Options.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/Refs.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/errorMessages.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/getRelativePath.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/any.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/array.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/bigint.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/boolean.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/branded.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/catch.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/date.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/default.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/effects.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/enum.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/intersection.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/literal.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/string.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/record.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/map.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/nativeEnum.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/never.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/null.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/union.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/nullable.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/number.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/object.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/optional.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/pipeline.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/promise.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/set.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/tuple.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/undefined.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/unknown.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parsers/readonly.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/selectParser.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/parseDef.js","../../../node_modules/.pnpm/zod-to-json-schema@3.24.6_zod@3.25.76/node_modules/zod-to-json-schema/dist/esm/zodToJsonSchema.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/server/completable.js","../../../node_modules/.pnpm/@modelcontextprotocol+sdk@1.17.0/node_modules/@modelcontextprotocol/sdk/dist/esm/server/mcp.js","../composable/mcp/toolUtils.ts","../composable/mcp/index.ts"],"sourcesContent":["import i18n, { i18nKeyMaps } from '../js/i18n'\n\nimport enUs from './en-us.json'\nimport zhCn from './zh-cn.json'\n\nconst { mergeLocaleMessage } = i18n.global\n\nmergeLocaleMessage(i18nKeyMaps.enUS, enUs)\nmergeLocaleMessage(i18nKeyMaps.zhCN, zhCn)\n","<template>\n  <div id=\"typography-more\">\n    <tiny-collapse>\n      <tiny-collapse-item :title=\"title\" name=\"1\">\n        <slot></slot>\n      </tiny-collapse-item>\n    </tiny-collapse>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Collapse, CollapseItem } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyCollapse: Collapse,\n    TinyCollapseItem: CollapseItem\n  },\n  props: {\n    title: {\n      type: String,\n      default: '更多类型选项'\n    }\n  },\n  setup() {\n    return {}\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#typography-more {\n  .tiny-collapse {\n    :deep(.tiny-collapse-item) {\n      .tiny-collapse-item__header {\n        height: 24px;\n        line-height: 24px;\n        border: none;\n        justify-content: center;\n        transition: 0.3s;\n\n        &:hover {\n          color: var(--te-component-common-icon-color-primary);\n\n          svg {\n            color: var(--te-component-common-icon-color-primary);\n          }\n        }\n      }\n\n      .tiny-collapse-item__content {\n        padding: 0;\n      }\n    }\n  }\n}\n</style>\n","<script lang=\"jsx\">\nimport ConfigCollapse from './ConfigCollapse.vue'\n\nexport default {\n  props: {\n    group: Object,\n    index: Number,\n    design: Boolean,\n    emptyText: {\n      type: String,\n      default: '空'\n    }\n  },\n  render() {\n    const list = this.group.content || []\n    const { item } = this.$slots\n    const number = this.group.collapse?.number || list.length\n    const propNodes = list.map((data, propIndex) => item({ data, propIndex })) // 使用插槽构造vnode list\n\n    // 将vNodes拆分为默认显示与更多两部份分别渲染\n    const expandItems = propNodes.slice(0, number)\n    const collapseItems = propNodes.slice(number)\n\n    const expandNode = (\n      <div class=\"item-container\" data-group-index={this.index}>\n        {expandItems.length ? expandItems : <div class=\"empty\">{this.emptyText}</div>}\n      </div>\n    )\n\n    const collapseNode = collapseItems.length ? (\n      <ConfigCollapse>\n        <div class=\"item-container\" data-group-index={this.index}>\n          {collapseItems}\n        </div>\n      </ConfigCollapse>\n    ) : null\n\n    return (\n      <div style=\"width:100%\">\n        {expandNode} {collapseNode}\n      </div>\n    )\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.item-container {\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  .empty {\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    width: 100%;\n  }\n}\n</style>\n","<template>\n  <div class=\"container\">\n    <div class=\"container-title\">{{ label }}</div>\n    <div>\n      <tiny-radio-group v-model=\"state.type\" vertical @change=\"change\">\n        <div v-for=\"(item, index) in meta.type\" :key=\"item\" class=\"property-container\">\n          <div class=\"item-label\">\n            <tiny-radio :label=\"item\">\n              {{ TYPE_MAP[item] || item }}\n            </tiny-radio>\n          </div>\n          <slot name=\"prefix\"></slot>\n          <div class=\"component-wrap\">\n            <component\n              :is=\"getConfigurator(meta.widget.component?.[index])\"\n              v-bind=\"meta.widget.props\"\n              v-model=\"state.typesValue[index].modelValue\"\n              :meta=\"meta\"\n              @update:modelValue=\"handleChange(index, $event)\"\n            ></component>\n          </div>\n          <slot name=\"suffix\"></slot>\n        </div>\n      </tiny-radio-group>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive } from 'vue'\nimport { Tooltip, Popover, Radio, RadioGroup } from '@opentiny/vue'\nimport { getConfigurator } from '@opentiny/tiny-engine-meta-register'\n\nexport default {\n  name: 'MultiTypeSelector',\n  components: {\n    TinyTooltip: Tooltip,\n    TinyPopover: Popover,\n    TinyRadio: Radio,\n    TinyRadioGroup: RadioGroup\n  },\n  inheritAttrs: false,\n  props: {\n    meta: {\n      type: Object,\n      default: () => ({})\n    },\n    label: {\n      type: String,\n      default: ''\n    }\n  },\n  emits: ['change', 'update:modelValue'],\n  setup(props, { emit }) {\n    const getModelValueType = (types: string[], value: any) => {\n      let result = types[0] || ''\n\n      if (value === undefined) return result\n      for (const type of types) {\n        if (typeof value === type || (type === 'array' && Array.isArray(value))) {\n          result = type\n          emit('change', [type])\n          break\n        }\n      }\n\n      return result\n    }\n\n    const currentType = getModelValueType(props.meta.type, props.meta.widget?.props?.modelValue)\n    const defaultType = getModelValueType(props.meta.type, props.meta.defaultValue)\n\n    const initModelValue = () =>\n      props.meta.type.map((type: string) => {\n        if (type === currentType) return { modelValue: props.meta.widget?.props?.modelValue }\n        if (type === defaultType) return { modelValue: props.meta.defaultValue }\n        return { modelValue: null }\n      })\n\n    const state = reactive({\n      type: currentType, // 当前选中的组件类型\n      typesValue: initModelValue() // 保存多个组件的modelValue\n    })\n\n    const TYPE_MAP: Record<string, string> = {\n      string: '字符串',\n      number: '数字',\n      boolean: '布尔值',\n      object: '对象',\n      array: '数组'\n    }\n\n    const change = (val: any[]) => {\n      const itemIndex = props.meta.type.findIndex((type: any) => type === val[0])\n      if (itemIndex > -1) {\n        emit('update:modelValue', state.typesValue[itemIndex].modelValue)\n      }\n      emit('change', val)\n    }\n\n    const handleChange = (index: string | number, val: any) => {\n      const type = props.meta.type[index]\n\n      if (state.type !== type) {\n        state.type = type\n        emit('change', [type])\n      }\n      emit('update:modelValue', val)\n    }\n\n    return {\n      state,\n      TYPE_MAP,\n      change,\n      handleChange,\n      getConfigurator\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  width: 100%;\n  padding: 0;\n  position: relative;\n  .container-title {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .tiny-radio {\n    color: var(--te-component-common-icon-color);\n  }\n  .tiny-radio-group {\n    width: 100%;\n  }\n  .property-container {\n    width: 100%;\n    padding: 8px 0px;\n    display: flex;\n    align-items: center;\n    .item-label {\n      width: 35%;\n    }\n    .component-wrap {\n      width: calc(65% - 16px);\n    }\n  }\n}\n</style>\n","<template>\n  <div\n    v-if=\"!property.hidden\"\n    :key=\"property\"\n    :style=\"{ width: property.cols / 0.12 + '%' }\"\n    :class=\"[\n      'properties-item',\n      {\n        active: property === currentProperty\n      }\n    ]\"\n  >\n    <div :class=\"['item-warp', labelPosition, property.className, { multiType }]\">\n      <div v-if=\"showLabel\" :class=\"['item-label', { linked: isLinked }]\">\n        <tiny-popover\n          placement=\"top\"\n          title=\"\"\n          trigger=\"hover\"\n          popper-class=\"prop-label-tips-container\"\n          :open-delay=\"500\"\n          :disabled=\"!propDescription || propDescription === propLabel\"\n        >\n          <div class=\"prop-content\">\n            <div class=\"prop-title\">{{ property.property }}</div>\n            <div class=\"prop-description\">\n              {{ propDescription }}\n            </div>\n          </div>\n          <template #reference>\n            <div>\n              <div :class=\"[{ 'pro-underline': propDescription && propDescription !== propLabel }]\">\n                <span>{{ propLabel }}</span>\n              </div>\n            </div>\n          </template>\n        </tiny-popover>\n      </div>\n      <div class=\"item-input\">\n        <slot name=\"prefix\"></slot>\n        <div\n          :class=\"[\n            'widget',\n            {\n              'verify-failed': verification.failed\n            }\n          ]\"\n        >\n          <div v-if=\"showBindState\" class=\"binding-state text-ellipsis-multiple\">\n            {{ '已绑定：' + widget.props.modelValue?.value }}\n          </div>\n          <component\n            v-else\n            :is=\"component\"\n            v-show=\"!hidden\"\n            v-bind=\"widget.props\"\n            :model-value=\"bindValue\"\n            :language=\"currentLanguage\"\n            :meta=\"property\"\n            :label=\"propLabel\"\n            :metaComponents=\"metaComponents\"\n            @update:modelValue=\"onModelUpdate\"\n            @focus=\"handleFocus\"\n            @blur=\"handleBlur\"\n          ></component>\n          <div v-if=\"showErrorPopup\" class=\"error-tips-container\">\n            <svg-icon name=\"notify-failure\" class=\"error-icon\"></svg-icon>\n            <span class=\"error-desc\">{{ verification.message }}</span>\n          </div>\n        </div>\n\n        <div class=\"action-icon\">\n          <slot name=\"suffix\"></slot>\n          <component\n            :is=\"CodeConfigurator\"\n            v-if=\"showCodeEditIcon\"\n            ref=\"editorModalRef\"\n            v-bind=\"widget.props\"\n            :model-value=\"bindValue\"\n            :meta=\"property\"\n            :label=\"propLabel\"\n            language=\"json\"\n            @update:modelValue=\"onModelUpdate\"\n          >\n            <template #default>\n              <tiny-tooltip class=\"item\" effect=\"light\" content=\"源码编辑\" placement=\"left\">\n                <icon-writing class=\"code-icon\" @click=\"editorModalRef?.open && editorModalRef.open()\"></icon-writing>\n              </tiny-tooltip>\n            </template>\n          </component>\n          <component\n            :is=\"VariableConfigurator\"\n            v-if=\"isTopLayer && !onlyEdit && property.bindState !== false && !isRelatedComponents(widget.component)\"\n            :model-value=\"widget.props.modelValue\"\n            :name=\"widget.props.name\"\n            @update:modelValue=\"onModelUpdate\"\n          ></component>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { inject, computed, watch, ref, reactive, provide } from 'vue'\nimport { Popover, Tooltip } from '@opentiny/vue'\nimport { IconWriting, IconHelpCircle, IconPlusCircle } from '@opentiny/vue-icon'\nimport { typeOf } from '@opentiny/vue-renderless/common/type'\nimport {\n  useHistory,\n  useProperties,\n  useMaterial,\n  useLayout,\n  useCanvas,\n  getConfigurator\n} from '@opentiny/tiny-engine-meta-register'\nimport { utils } from '@opentiny/tiny-engine-utils'\nimport i18n from '../js/i18n'\nimport MultiTypeSelector from './MultiTypeSelector.vue'\nimport { SCHEMA_DATA_TYPE, PAGE_STATUS, TYPES } from '../js/constants'\n\nconst { parseFunction: generateFunction } = utils\n\nconst hasRule = (required: any, rules: string | any[]) => {\n  if (required) {\n    return true\n  }\n  return Array.isArray(rules) && rules.length > 0\n}\n\nexport default {\n  components: {\n    MultiTypeSelector,\n    TinyPopover: Popover,\n    TinyTooltip: Tooltip,\n    IconWriting: IconWriting(),\n    IconPlusCircle: IconPlusCircle(),\n    IconHelpCircle: IconHelpCircle()\n  },\n  props: {\n    properties: {\n      type: [Array, Object],\n      default: () => []\n    },\n    property: {\n      type: Object,\n      default: () => ({})\n    },\n    isTopLayer: {\n      type: Boolean,\n      default: false\n    },\n    onlyEdit: {\n      type: Boolean,\n      default: false\n    },\n    group: {\n      type: Object,\n      default: () => ({})\n    },\n    metaComponents: {\n      type: Object,\n      default: () => ({})\n    },\n    showMessageError: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const CodeConfigurator = getConfigurator('CodeConfigurator')\n    const VariableConfigurator = getConfigurator('VariableConfigurator')\n\n    const { t, locale } = i18n.global\n\n    const verification = reactive({\n      failed: false,\n      message: '',\n      hasRule: computed(() => hasRule(props.property?.required, props.property?.rules))\n    })\n    const editorModalRef = ref<any>(null)\n    const currentProperty = inject('currentProperty', null)\n    const propsObj = inject('propsObj', null)\n    const required = computed(() => props.property?.required || false)\n\n    const hidden = computed(() => props.hidden)\n    const widget = computed(() => props.property?.widget || {})\n    const propLabel = computed(\n      () => props.property?.label?.text?.[locale.value] || props.property?.label?.text || props.property.property\n    )\n    const multiType = computed(() => Array.isArray(widget.value.component))\n    const isBindingState = ref(false) // 当前是否是绑定到状态变量state\n    const showCodeEditIcon = computed(\n      () =>\n        props.isTopLayer &&\n        isBindingState.value === false &&\n        (multiType.value || ['array', 'object'].includes(props.property.type))\n    )\n    const showLabel = computed(\n      () =>\n        !props.onlyEdit &&\n        propLabel.value &&\n        (isBindingState.value ||\n          ![\n            'GroupItemConfigurator',\n            'ArrayItemConfigurator',\n            'RelatedColumnsConfigurator',\n            'TableColumnsConfigurator'\n          ].includes(widget.value.component)) &&\n        !multiType.value\n    )\n    const propDescription = computed(\n      () =>\n        (props.property?.description?.[locale.value] ?? props.property?.description) ||\n        (props.property?.label?.text?.[locale.value] ?? props.property?.label?.text)\n    )\n    const isLinked = computed(() => Boolean(props.property.linked))\n    const component = computed(() => {\n      // TODO: 需要弄清楚 props.metaComponents[widget.value.component] 是什么场景\n      return multiType.value\n        ? MultiTypeSelector\n        : getConfigurator(widget.value.component) ||\n            props.metaComponents[widget.value.component] ||\n            getConfigurator('InputConfigurator')\n    })\n    const bindValue = computed(() => {\n      let value = props.property?.widget?.props?.modelValue\n\n      if (value === null || value === undefined) {\n        const defaultValue = props.property?.defaultValue\n        value = defaultValue?.[locale.value] ?? defaultValue\n      }\n\n      if (value?.componentName === 'Icon') {\n        value = value.props.name\n      }\n\n      return value\n    })\n\n    const currentLanguage = computed(() => {\n      const language = props.property?.widget?.props?.language\n      const defaultLanguage =\n        props.property?.description?.zh_CN === '分页配置' || props.property?.type === 'Object' ? 'json' : 'javascript'\n\n      return language || defaultLanguage\n    })\n\n    const labelPosition = computed(() => {\n      if (!showLabel.value) {\n        return 'none'\n      }\n\n      if (props.property.labelPosition) {\n        return props.property.labelPosition\n      }\n\n      if (['CheckBoxConfigurator', 'SwitchConfigurator'].includes(props.property.widget?.component)) {\n        return 'left'\n      }\n\n      if (props.property.widget?.component === 'CodeConfigurator') {\n        return 'top'\n      }\n\n      return 'auto'\n    })\n\n    const updateValue = (value: { type?: any; componentName?: string; props?: { name: any } }) => {\n      const { property, type } = props.property\n      const { setProp, getSchema } = useProperties()\n\n      // 是否双向绑定\n      if (value?.type === SCHEMA_DATA_TYPE.JSExpression) {\n        const currentComponent = getSchema().componentName\n        const {\n          schema: { events = {} }\n        } = useMaterial().getMaterial(currentComponent)\n\n        if (Object.keys(events).includes(`onUpdate:${property}`)) {\n          // 默认情况下，v-model 在组件上都是使用 modelValue 作为 prop，并以 update:modelValue 作为对应的事件。\n          // 支持指定参数的 v-model，如：`v-model:visible`，如果组件使用的是除 modelValue 之外的其它参数，则将该参数显式声明为 prop\n          const model = property === 'modelValue' ? true : { prop: property }\n          value = { ...value, model }\n        }\n      }\n\n      const { operateNode, isSaved } = useCanvas()\n\n      if (property === 'children') {\n        const schema = getSchema()\n        operateNode({ type: 'updateAttributes', id: schema.id, value: { children: value } })\n      } else {\n        if (!isSaved() && ![PAGE_STATUS.Guest, PAGE_STATUS.Occupy].includes(useLayout().layoutState.pageStatus.state)) {\n          return\n        }\n\n        if (property !== 'name' && ['SelectIconConfigurator'].includes(props.property.widget.component)) {\n          // icon以组件形式传入，实现类似:icon=\"IconPlus\"的图标配置（排除Icon组件本身）\n          value = {\n            componentName: 'Icon',\n            props: {\n              name: value\n            }\n          }\n        }\n\n        if (props.isTopLayer) {\n          setProp(property, value, type)\n        }\n      }\n\n      useHistory().addHistory()\n    }\n\n    const setVerifyFailed = (result: { failed: any; message: any }, message: string) => {\n      result.failed = true\n      result.message = typeof message === 'string' ? message : message?.[locale.value]\n    }\n\n    const isEmptyInputValue = (value: string | null) => {\n      // 通过 value == null 做隐式类型转换\n      // 空值约定为 undefined | null | ''\n      // eslint-disable-next-line no-eq-null\n      return value == null || (typeOf(value) === TYPES.StringType && value.trim() === '')\n    }\n    const verifyRequired = (value: string) => {\n      return !isEmptyInputValue(value)\n    }\n\n    const verifyValue = (value = '', rules: any[] = []) => {\n      const result = {\n        failed: false,\n        message: ''\n      }\n\n      if (!hasRule(props.property?.required, props.property?.rules)) {\n        return result\n      }\n\n      if (required.value && !verifyRequired(value)) {\n        setVerifyFailed(result, t('common.required'))\n\n        return result\n      }\n\n      const length = rules.length\n      const { getProp } = useProperties()\n\n      for (let i = 0; i < length; i++) {\n        const rule = rules[i]\n        if (rule.required && !verifyRequired(value)) {\n          setVerifyFailed(result, rule.message)\n          return result\n        }\n        if (rule.pattern) {\n          const reg = new RegExp(rule.pattern)\n\n          if (!reg.test(value)) {\n            setVerifyFailed(result, rule.message)\n            break\n          }\n        } else if (rule.validator) {\n          try {\n            const fn = generateFunction(rule.validator, {\n              props: {\n                value\n              },\n              getProp\n            })\n\n            if (!fn(rule, value)) {\n              setVerifyFailed(result, rule.message)\n              break\n            }\n          } catch (error) {\n            const printer = console\n            printer.log(error)\n          }\n        }\n      }\n\n      return result\n    }\n\n    const executeRelationAction = (value: string | undefined, preValue: any) => {\n      const { onChange, rules } = props.property\n      const { setProp, delProp } = useProperties()\n\n      // 关联\n      if (onChange && propsObj) {\n        try {\n          const fun = generateFunction(onChange, {\n            ...propsObj.value,\n            config: {\n              ...widget.value?.props\n            },\n            setProp: setProp,\n            delProp\n          })\n          fun(value, preValue)\n        } catch (error) {\n          const printer = console\n          printer.log(error)\n        }\n      }\n\n      // 校验\n      Object.assign(verification, verifyValue(value, rules))\n    }\n\n    const onModelUpdate = (data: any, shouldUpdate = true) => {\n      const preValue = bindValue.value\n      widget.value.props.modelValue = data\n      emit('update:modelValue', data)\n      if (!shouldUpdate) {\n        return\n      }\n      updateValue(data)\n      executeRelationAction(data, preValue)\n    }\n\n    const parentPath = inject('path', '')\n    const parentData = inject('data', null)\n    provide('path', `${parentPath ? parentPath + '.' : ''}${props.property.property}`)\n    provide('data', useProperties().getSchema())\n\n    watch(\n      () => bindValue.value,\n      (value) => {\n        isBindingState.value = value?.type === SCHEMA_DATA_TYPE.JSExpression\n      },\n      {\n        immediate: true\n      }\n    )\n\n    const showErrorPopup = ref(false)\n\n    const isFocus = ref(false)\n\n    watch(\n      () => [verification.failed, isFocus.value],\n      () => {\n        if (!verification.failed) {\n          showErrorPopup.value = false\n          return\n        }\n\n        showErrorPopup.value = true\n      }\n    )\n\n    const handleFocus = () => {\n      isFocus.value = true\n    }\n\n    const handleBlur = () => {\n      isFocus.value = false\n      const onBlur = props.property?.onBlur\n      if (onBlur) {\n        try {\n          const fun = generateFunction(onBlur, {})\n          fun(bindValue.value)\n        } catch (error) {\n          /* empty */\n        }\n      }\n    }\n\n    const isRelatedComponents = (component: string) =>\n      ['RelatedEditorConfigurator', 'RelatedColumnsConfigurator'].includes(component)\n\n    const showBindState = computed(\n      () => !props.onlyEdit && (isBindingState.value || isLinked.value) && !isRelatedComponents(widget.value.component)\n    )\n\n    return {\n      CodeConfigurator,\n      VariableConfigurator,\n      verification,\n      showCodeEditIcon,\n      editorModalRef,\n      isBindingState,\n      component,\n      hidden,\n      widget,\n      required,\n      isLinked,\n      propLabel,\n      showLabel,\n      multiType,\n      propDescription,\n      bindValue,\n      currentProperty,\n      showBindState,\n      onModelUpdate,\n      parentData,\n      currentLanguage,\n      showErrorPopup,\n      handleFocus,\n      handleBlur,\n      isFocus,\n      isRelatedComponents,\n      labelPosition\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.sensitive-tip {\n  width: 50px;\n  position: absolute;\n}\n.properties-item {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n  align-items: center;\n  padding-bottom: var(--te-common-vertical-item-spacing-normal);\n  &:last-child {\n    padding-bottom: 0;\n  }\n  &.active {\n    background: var(--te-component-common-bg-color-active);\n  }\n\n  .item-label {\n    color: var(--te-component-common-text-color-secondary);\n    font-size: 12px;\n    display: flex;\n    line-height: 18px;\n  }\n\n  .item-input {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    overflow: hidden;\n    position: relative;\n    overflow: visible;\n    &:has(.verify-failed) {\n      align-items: flex-start;\n    }\n    .widget {\n      flex: 1;\n      padding: 1px;\n      overflow: hidden;\n\n      .binding-state {\n        color: var(--te-component-common-text-color-emphasize);\n        background: var(--te-component-config-item-bind-bg-color);\n        border: 1px solid var(--te-component-config-item-bind-border-color);\n        padding: 4px 12px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        border-radius: 6px;\n      }\n      &:has(.tiny-switch) {\n        text-align: right;\n      }\n      &.verify-failed {\n        :deep(.tiny-input .tiny-input__inner) {\n          &,\n          &:focus {\n            border-color: var(--te-component-common-error-color);\n            background-color: var(--te-component-common-bg-color-error);\n          }\n        }\n        :deep(.tiny-textarea__inner) {\n          &,\n          &:focus {\n            background-color: var(--te-component-common-bg-color-error);\n          }\n        }\n        :deep(.tiny-textarea) {\n          &,\n          &:focus {\n            border-color: var(--te-component-common-error-color);\n            background-color: var(--te-component-common-bg-color-error);\n          }\n        }\n      }\n      .widget-popover {\n        display: inline-block;\n        width: 100%;\n      }\n    }\n    .action-icon {\n      display: flex;\n      align-items: center;\n      .code-icon {\n        font-size: 16px;\n      }\n    }\n    :deep(.tiny-input__inner) {\n      padding-right: 6px;\n      padding-left: 4px;\n    }\n    :deep(.tiny-select .tiny-input__inner) {\n      padding-right: 26px;\n    }\n    :deep(.tiny-input-suffix) {\n      .tiny-input__inner {\n        padding-right: 28px;\n      }\n    }\n  }\n\n  .prop-description {\n    margin-top: 8px;\n    color: var(--te-component-common-text-color-weaken);\n  }\n  .label-tip {\n    padding: 2px 0;\n  }\n\n  .help-icon {\n    margin-left: 3px;\n    cursor: help;\n    width: 14px;\n    height: 14px;\n  }\n\n  .item-warp {\n    display: flex;\n    gap: 8px;\n    width: 100%;\n\n    .pro-underline {\n      border-bottom: 1px dashed transparent;\n      &:hover {\n        border-bottom: 1px dashed;\n      }\n    }\n    &.multiType {\n      border-bottom: 1px solid var(--te-component-common-border-color-transparent);\n      border-top: 1px solid var(--te-component-common-border-color-transparent);\n    }\n    &.auto {\n      flex-wrap: wrap;\n      align-items: center;\n      .item-label {\n        min-width: 30%;\n      }\n      .item-input {\n        width: calc(70% - 8px);\n        flex-grow: 1;\n      }\n    }\n    &.left {\n      flex-wrap: wrap;\n      align-items: center;\n      .item-label {\n        width: 30%;\n      }\n      .item-input {\n        width: calc(70% - 8px);\n      }\n    }\n    &.top {\n      flex-direction: column;\n    }\n    &.bottom {\n      flex-direction: column-reverse;\n    }\n    &.none {\n      .item-label {\n        display: none;\n      }\n      .item-input {\n        flex-grow: 1;\n      }\n    }\n  }\n  .error-tips {\n    margin: 0;\n    display: flex;\n    align-items: center;\n    margin-top: 8px;\n    color: var(--te-component-common-error-color);\n    font-size: 12px;\n    .failure-icon {\n      width: 16px;\n      height: 16px;\n    }\n    .error-desc {\n      margin-left: 4px;\n    }\n  }\n}\n\n.error-tips-container {\n  padding: 4px 6px;\n  color: var(--te-component-common-error-color);\n  .error-icon {\n    flex-shrink: 0;\n  }\n  .error-desc {\n    margin-left: 4px;\n  }\n}\n</style>\n\n<style lang=\"less\">\n.tiny-popover.tiny-popper {\n  &.prop-label-tips-container {\n    .prop-content {\n      margin: 6px;\n      max-width: 224px;\n\n      .prop-title {\n        font-size: 16px;\n        font-weight: bold;\n        margin-bottom: 8px;\n        color: var(--te-component-common-text-color-primary);\n      }\n      .prop-description {\n        font-size: 12px;\n        color: var(--te-component-common-text-color-secondary);\n        line-height: 18px;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 5;\n        overflow-y: auto;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"button-group\">\n    <slot></slot>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.button-group {\n  display: grid;\n  grid-auto-flow: column;\n  column-gap: 4px;\n  align-items: center;\n\n  :deep(.svg-button),\n  :deep(.tiny-button) {\n    margin: 0;\n  }\n  :deep(.tiny-button) {\n    padding: 0;\n    min-width: 40px;\n  }\n  :deep(.tiny-button + .svg-button) {\n    margin-left: 4px;\n  }\n  :deep(.tiny-button + .tiny-button) {\n    margin-left: 8px;\n  }\n  :deep(.tiny-button.tiny-button.tiny-button--default) {\n    border-color: var(--te-component-common-button-border-color);\n  }\n}\n</style>\n","<template>\n  <span class=\"svg-button\" :class=\"{ 'svg-button-hover': hoverBgColor }\" @click=\"handleClick($event)\">\n    <tiny-tooltip effect=\"light\" :content=\"tips\" :placement=\"placement\">\n      <component :is=\"name\" v-if=\"isTinyIcon\" />\n      <svg-icon v-else :name=\"name\"></svg-icon>\n    </tiny-tooltip>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\nimport { Tooltip } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyTooltip: Tooltip\n  },\n  props: {\n    tips: {\n      type: String,\n      default: ''\n    },\n    placement: {\n      type: String,\n      default: 'bottom'\n    },\n    name: {\n      type: String,\n      default: 'add'\n    },\n    hoverBgColor: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['click'],\n  setup(props, { emit }) {\n    const isTinyIcon = computed(() => props.name.toLowerCase().indexOf('icon') === 0)\n\n    const handleClick = (event: MouseEvent) => {\n      event.target?.blur()\n      emit('click', event)\n    }\n\n    return {\n      isTinyIcon,\n      handleClick\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.svg-button {\n  width: 24px;\n  height: 24px;\n  font-size: 16px;\n  color: var(--te-component-common-icon-color);\n  border: 1px solid transparent;\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  &:hover {\n    color: var(--te-component-common-icon-color-hover);\n  }\n  &.active {\n    color: var(--te-component-common-icon-color-hover);\n  }\n\n  .svg-icon {\n    outline: none;\n  }\n}\n.svg-button-hover {\n  color: var(--te-component-common-icon-color-primary);\n  &:hover {\n    color: var(--te-component-common-icon-color-primary);\n    background-color: var(--te-component-svg-button-bg-color-hover);\n  }\n  &.active {\n    color: var(--te-component-common-icon-color-primary);\n    background-color: var(--te-component-svg-button-bg-color-active);\n  }\n}\n</style>\n","<template>\n  <div\n    id=\"panel-setting\"\n    :class=\"[\n      'plugin-setting',\n      { 'second-panel': isSecond },\n      { 'full-screen': state.isFullScreen },\n      { 'align-right': align.includes('right') },\n      shadowClass\n    ]\"\n    :style=\"isSecond ? secondAlignStyle : alignStyle\"\n    @click=\"$emit('click')\"\n  >\n    <div class=\"plugin-setting-header\">\n      <slot name=\"title\">\n        <span class=\"plugin-setting-header-title\">{{ title }}</span>\n      </slot>\n      <div class=\"button-group-wrap\">\n        <slot name=\"header\">\n          <button-group>\n            <tiny-button v-if=\"!isIconButton\" type=\"info\" @click=\"$emit('save')\" class=\"plugin-save\">保存</tiny-button>\n            <tiny-button v-if=\"isIconButton\" :icon=\"icon\" type=\"info\" @click=\"$emit('add')\">\n              {{ iconButtonText }}\n            </tiny-button>\n            <div v-if=\"showIfFullScreen\" class=\"cursor\" @click=\"fullScreen\">\n              <svg-button v-if=\"!state.isFullScreen\" name=\"full-screen\"></svg-button>\n              <svg-button v-if=\"state.isFullScreen\" name=\"cancel-full-screen\"></svg-button>\n            </div>\n            <svg-button name=\"close\" @click=\"$emit('cancel')\"></svg-button>\n          </button-group>\n        </slot>\n      </div>\n    </div>\n    <slot name=\"progress\"></slot>\n    <div class=\"plugin-setting-content lowcode-scrollbar\">\n      <slot name=\"content\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { nextTick, reactive, watchEffect, computed } from 'vue'\nimport { Button } from '@opentiny/vue'\nimport { iconPlus } from '@opentiny/vue-icon'\nimport ButtonGroup from './ButtonGroup.vue'\nimport SvgButton from './SvgButton.vue'\nimport { useLayout } from '@opentiny/tiny-engine-meta-register'\n\nconst EVENTS = {\n  FULL_SCREEN_CHANGE: 'fullScreenChange',\n  SAVE: 'save',\n  CANCEL: 'cancel',\n  ADD: 'add',\n  CLICK: 'click'\n}\n\nexport default {\n  components: {\n    TinyButton: Button,\n    SvgButton,\n    ButtonGroup\n  },\n  props: {\n    /**\n     * plugin-setting面板标题\n     */\n    title: {\n      type: String,\n      default: ''\n    },\n    /**\n     * 是否为二级展开面板\n     */\n    isSecond: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 是否为全屏显示\n     */\n    isFullScreen: {\n      type: Boolean,\n      default: false\n    },\n    showIfFullScreen: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 是否为图标按钮\n     */\n    isIconButton: {\n      type: Boolean,\n      default: false\n    },\n    iconButtonText: {\n      type: String,\n      default: '新增数据'\n    },\n    icon: {\n      type: Object,\n      default: iconPlus()\n    },\n    fixedName: {\n      type: String,\n      default: ''\n    },\n    align: {\n      type: String,\n      default: 'leftTop'\n    }\n  },\n  emits: [EVENTS.FULL_SCREEN_CHANGE, EVENTS.SAVE, EVENTS.CANCEL, EVENTS.ADD, EVENTS.CLICK],\n  setup(props, { emit }) {\n    const state = reactive({\n      isFullScreen: false\n    })\n\n    const { getPluginWidth } = useLayout()\n\n    const firstPanelOffset = computed(() => {\n      return getPluginWidth(props.fixedName) - 1\n    })\n\n    const secondPanelAlign = computed(() => {\n      return props.align.includes('left') ? 'left' : 'right'\n    })\n\n    const alignStyle = computed(() => {\n      return `${secondPanelAlign.value} : ${firstPanelOffset.value}px`\n    })\n\n    const secondAlignStyle = computed(() => {\n      // 解决三级面板点击与二级面板重叠\n      const secondPanelOffset = document.querySelector('.plugin-setting')?.clientWidth + firstPanelOffset.value\n      return `${secondPanelAlign.value} : ${secondPanelOffset.value}px`\n    })\n\n    watchEffect(() => {\n      // 处理二级面板偏移量\n      const secondPanelOffset = document.querySelector('.plugin-setting')?.clientWidth + firstPanelOffset.value\n      nextTick(() => {\n        document.querySelector('.second-panel')?.style.setProperty(secondPanelAlign.value, `${secondPanelOffset}px`)\n      })\n    })\n\n    watchEffect(() => {\n      state.isFullScreen = props.isFullScreen\n    })\n\n    const fullScreen = () => {\n      state.isFullScreen = !state.isFullScreen\n      emit(EVENTS.FULL_SCREEN_CHANGE, state.isFullScreen)\n    }\n\n    const getFullScreenLabel = (isFullScreen: boolean) => {\n      return isFullScreen ? '收起' : '全屏查看'\n    }\n\n    // 计算属性用于确定阴影类\n    const shadowClass = computed(() => {\n      if (props.isSecond) return ''\n      return props.align.includes('right') ? 'shadow-right' : 'shadow-left'\n    })\n\n    return {\n      alignStyle,\n      secondAlignStyle,\n      shadowClass,\n      firstPanelOffset,\n      state,\n      fullScreen,\n      getFullScreenLabel\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.plugin-setting {\n  position: absolute;\n  top: 0;\n  width: var(--base-collection-panel-width);\n  height: 100%;\n  border-right: 1px solid var(--te-component-common-border-color);\n  background: var(--te-component-common-bg-color);\n  overflow: hidden;\n  border-left: 1px solid var(--te-component-common-border-color-divider);\n\n  &:not(.second-panel) {\n    &.shadow-left {\n      box-shadow: 6px 0px 3px 0px var(--te-component-common-shadow-color);\n      border-right: none;\n    }\n\n    &.shadow-right {\n      box-shadow: -6px 0px 3px 0px var(--te-component-common-shadow-color);\n      border-left: none;\n    }\n  }\n\n  &.full-screen {\n    width: var(--base-collection-panel-full-screen-width);\n  }\n\n  &.second-panel {\n    z-index: 1;\n  }\n\n  .cursor {\n    margin-left: 8px;\n    cursor: pointer;\n  }\n\n  .close {\n    margin-left: 12px;\n    cursor: pointer;\n  }\n\n  .plugin-setting-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 48px;\n    line-height: 40px;\n    font-size: 14px;\n    line-height: 18px;\n    color: var(--te-component-common-text-color-primary);\n    padding: 0 12px;\n    border-bottom: 1px solid var(--te-component-common-border-color-divider);\n\n    .plugin-setting-header-title {\n      font-size: 12px;\n      font-weight: 700;\n      margin-right: 20px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    :deep(.svg-button + .svg-button) {\n      margin: 0;\n    }\n\n    :deep(.tiny-button.tiny-button) {\n      margin-right: 0;\n    }\n  }\n\n  .plugin-setting-content {\n    height: calc(100% - 46px);\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 12px;\n  }\n\n  .button-group-wrap {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.align-right {\n  right: 0;\n}\n</style>\n","<template>\n  <span class=\"link-button\">\n    <tiny-tooltip effect=\"light\" :content=\"tips\">\n      <template #content>\n        <div class=\"tip-content\">\n          {{ tips }}\n        </div>\n        <a v-if=\"href\" class=\"tip-jump\" :href=\"href\" target=\"_blank\">\n          <svg-icon name=\"jump\"></svg-icon>\n          查看详情\n        </a>\n      </template>\n      <svg-icon name=\"plugin-icon-plugin-help\"></svg-icon>\n    </tiny-tooltip>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { TinyTooltip } from '@opentiny/vue'\nexport default {\n  components: {\n    TinyTooltip\n  },\n  props: {\n    href: {\n      type: String,\n      default: ''\n    },\n    tips: {\n      type: String,\n      default: '帮助'\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.link-button {\n  width: 24px;\n  height: 24px;\n  font-size: 16px;\n  margin-left: 4px;\n  color: var(--te-component-common-icon-color-primary);\n  border: 1px solid transparent;\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n\n  .svg-icon {\n    outline: none;\n  }\n  :deep(.svg-icon.icon-plugin-icon-plugin-help) {\n    font-size: 16px;\n  }\n}\n.tip-content {\n  width: 220px;\n  margin-bottom: 6px;\n  color: var(--te-component-common-text-color-secondary);\n}\n.tip-jump {\n  color: var(--te-component-common-text-color-link);\n}\n</style>\n","<template>\n  <span class=\"icon-wrap\" @click=\"$emit('close')\">\n    <component :is=\"name\" v-if=\"isTinyIcon\" />\n    <svg-icon v-else :name=\"name\"></svg-icon>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\n\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: 'cross'\n    }\n  },\n  setup(props) {\n    const isTinyIcon = computed(() => props.name.toLowerCase().indexOf('icon') === 0)\n\n    return {\n      isTinyIcon\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.icon-wrap {\n  width: 24px;\n  height: 24px;\n  color: var(--te-component-common-icon-color-primary);\n  font-size: 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  transition: 0.3s;\n\n  &:hover {\n    color: var(--te-component-common-icon-color-primary);\n    background-color: var(--te-component-close-icon-bg-color-hover);\n  }\n  &.active {\n    color: var(--te-component-common-icon-color-primary);\n    background-color: var(--te-component-close-icon-bg-color-active);\n  }\n}\n</style>\n","<template>\n  <div class=\"plugin-panel\" ref=\"panel\" :style=\"{ width: panelWidth + 'px' }\">\n    <div :class=\"['plugin-panel-header', headerBottomLine]\">\n      <div class=\"plugin-panel-title\">\n        <span class=\"title\"\n          >{{ title }}<link-button class=\"link\" v-if=\"isShowDocsIcon\" :tips=\"docsContent\" :href=\"docsUrl\"></link-button\n        ></span>\n        <close-icon v-if=\"isCloseLeft\" :name=\"name\" @close=\"closePanel\"></close-icon>\n      </div>\n      <div class=\"plugin-panel-icon\">\n        <slot name=\"header\"></slot>\n        <tiny-tooltip\n          v-if=\"isShowCollapseIcon\"\n          effect=\"light\"\n          :content=\"isCollapsed ? '展开' : '折叠'\"\n          placement=\"top\"\n          :visible-arrow=\"false\"\n        >\n          <template #default>\n            <svg-button :name=\"settingIcon\" @click=\"clickCollapseIcon\"></svg-button>\n          </template>\n        </tiny-tooltip>\n        <svg-button\n          class=\"item icon-sidebar\"\n          :name=\"fixedPanels?.includes(fixedName) ? 'fixed-solid' : 'fixed'\"\n          :tips=\"!fixedPanels?.includes(fixedName) ? '固定面板' : '解除固定面板'\"\n          @click=\"fixPanel\"\n        ></svg-button>\n        <close-icon v-if=\"!isCloseLeft\" :name=\"name\" @close=\"closePanel\"></close-icon>\n      </div>\n    </div>\n    <div class=\"scroll-content\">\n      <slot name=\"content\"></slot>\n    </div>\n\n    <div v-if=\"isWidthResizable\">\n      <div class=\"resizer-right\" v-if=\"isLeftResizer\" @mousedown=\"onMouseDownRight\"></div>\n      <div class=\"resizer-left\" v-if=\"isRightResizer\" @mousedown=\"onMouseDownLeft\"></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useThrottleFn } from '@vueuse/core'\nimport { inject, ref, computed, onMounted, provide } from 'vue'\nimport { useLayout } from '@opentiny/tiny-engine-meta-register'\nimport { SvgButton } from '@opentiny/tiny-engine-common'\nimport { constants } from '@opentiny/tiny-engine-utils'\nimport LinkButton from './LinkButton.vue'\nimport CloseIcon from './CloseIcon.vue'\nimport { Tooltip } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyTooltip: Tooltip,\n    LinkButton,\n    CloseIcon,\n    SvgButton\n  },\n  props: {\n    /**\n     * plugin面板标题\n     */\n    title: {\n      type: String,\n      default: ''\n    },\n    /**\n     * 关闭图标是否在左侧\n     */\n    isCloseLeft: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: 'cross'\n    },\n    docsUrl: {\n      type: String,\n      default: ''\n    },\n    docsContent: {\n      type: String,\n      default: ''\n    },\n    isShowDocsIcon: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 固定面板插件数组\n     */\n    fixedPanels: {\n      type: Array\n    },\n    /**\n     * 固定面板标识\n     */\n    fixedName: {\n      type: String\n    },\n    /**\n     * 是否展示标题下边线\n     */\n    showBottomBorder: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 是否展示折叠按钮\n     */\n    isShowCollapseIcon: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'updateCollapseStatus'],\n  setup(props, { emit }) {\n    const closePanel = () => {\n      emit('close')\n    }\n\n    const { PLUGIN_DEFAULT_WIDTH } = constants\n\n    const MIN_WIDTH = PLUGIN_DEFAULT_WIDTH // 固定的最小宽度值\n    const MAX_WIDTH = 1000 // 固定的最大宽度值\n    const panel = ref<HTMLElement | null>(null)\n    let startX = 0\n    let startWidth = 0\n    let rafId: number | null = null // 添加 requestAnimationFrame 标识\n\n    const isCollapsed = ref(false)\n    const settingIcon = computed(() => (isCollapsed.value ? 'collapse_all' : 'expand_all'))\n\n    provide('isCollapsed', isCollapsed)\n\n    interface PanelState {\n      emitEvent: (event: string, ...args: any[]) => void\n    }\n\n    const panelState = inject<PanelState>('panelState')\n    const fixPanel = () => {\n      panelState?.emitEvent('fixPanel', props.fixedName)\n    }\n\n    const headerBottomLine = computed(() => (props.showBottomBorder ? 'header-bottom-line' : ''))\n\n    const { getPluginWidth, changePluginWidth, getPluginByLayout, changeMoveDragBarState, isPanelWidthResizable } =\n      useLayout()\n\n    const align = ref(getPluginByLayout(props.fixedName)) // 滚动条位置\n    const panelWidth = ref(getPluginWidth(props.fixedName)) // 面板使用默认宽度\n    const isLeftResizer = ref(align.value.includes('left'))\n    const isRightResizer = ref(align.value.includes('right'))\n    const isWidthResizable = computed(() => isPanelWidthResizable(props.fixedName))\n\n    const updateWidth = (newWidth: number) => {\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n      }\n\n      rafId = requestAnimationFrame(() => {\n        panelWidth.value = Math.max(MIN_WIDTH, Math.min(newWidth, MAX_WIDTH))\n        changePluginWidth(props.fixedName, panelWidth.value)\n      })\n    }\n\n    const onMouseMoveRight = (event: MouseEvent) => {\n      const newWidth = startWidth + (event.clientX - startX)\n      updateWidth(newWidth)\n    }\n\n    const onMouseMoveLeft = (event: MouseEvent) => {\n      const newWidth = startWidth - (event.clientX - startX)\n      updateWidth(newWidth)\n    }\n\n    // 降低节流时间，提高响应速度\n    const throttledMouseMoveRight = useThrottleFn(onMouseMoveRight, 16)\n    const throttledMouseMoveLeft = useThrottleFn(onMouseMoveLeft, 16)\n\n    type ResizerElement = HTMLElement | null\n\n    const leftResizer = ref<ResizerElement>(null)\n    const rightResizer = ref<ResizerElement>(null)\n\n    const onMouseUpRight = () => {\n      changeMoveDragBarState(false)\n      document.removeEventListener('mousemove', throttledMouseMoveRight)\n      document.removeEventListener('mouseup', onMouseUpRight)\n      document.body.style.cursor = ''\n      if (rightResizer.value) {\n        rightResizer.value.classList.remove('dragging')\n      }\n\n      // 清理 requestAnimationFrame\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n        rafId = null\n      }\n    }\n\n    const onMouseDownRight = (event: MouseEvent) => {\n      changeMoveDragBarState(true)\n      startX = event.clientX\n      startWidth = panel.value?.offsetWidth || 0\n      document.addEventListener('mousemove', throttledMouseMoveRight)\n      document.addEventListener('mouseup', onMouseUpRight)\n      document.body.style.cursor = 'col-resize'\n      if (rightResizer.value) {\n        rightResizer.value.classList.add('dragging')\n      }\n    }\n\n    const onMouseUpLeft = () => {\n      changeMoveDragBarState(false)\n      document.removeEventListener('mousemove', throttledMouseMoveLeft)\n      document.removeEventListener('mouseup', onMouseUpLeft)\n      document.body.style.cursor = ''\n      if (leftResizer.value) {\n        leftResizer.value.classList.remove('dragging')\n      }\n\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n        rafId = null\n      }\n    }\n\n    const onMouseDownLeft = (event: MouseEvent) => {\n      changeMoveDragBarState(true)\n      startX = event.clientX\n      startWidth = panel.value?.offsetWidth || 0\n      document.addEventListener('mousemove', throttledMouseMoveLeft)\n      document.addEventListener('mouseup', onMouseUpLeft)\n      document.body.style.cursor = 'col-resize'\n      if (leftResizer.value) {\n        leftResizer.value.classList.add('dragging')\n      }\n    }\n\n    const initResizerDOM = () => {\n      const leftEl = document.querySelector('.resizer-left')\n      const rightEl = document.querySelector('.resizer-right')\n      if (leftEl instanceof HTMLElement) {\n        leftResizer.value = leftEl\n      }\n      if (rightEl instanceof HTMLElement) {\n        rightResizer.value = rightEl\n      }\n    }\n    const clickCollapseIcon = () => {\n      isCollapsed.value = !isCollapsed.value\n      emit('updateCollapseStatus', isCollapsed.value)\n    }\n\n    onMounted(() => {\n      initResizerDOM()\n    })\n\n    return {\n      isWidthResizable,\n      headerBottomLine,\n      clickCollapseIcon,\n      isCollapsed,\n      settingIcon,\n      closePanel,\n      fixPanel,\n      panel,\n      panelWidth,\n      onMouseDownRight,\n      onMouseDownLeft,\n      isLeftResizer,\n      isRightResizer\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.plugin-panel {\n  width: 100%;\n  height: 100%;\n  background: var(--te-component-common-bg-color);\n  border-right: 1px solid var(--te-component-common-border-color-divider);\n  display: flex;\n  flex-direction: column;\n  position: relative;\n\n  .plugin-panel-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 12px;\n    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',\n      'Helvetica Neue', sans-serif;\n    padding: 12px;\n    color: var(--te-component-common-text-color-primary);\n    font-weight: var(--te-base-font-weight-7);\n\n    .plugin-panel-title {\n      display: flex;\n      align-items: center;\n\n      .title + .icon-wrap {\n        margin-left: 10px;\n      }\n\n      .title {\n        display: flex;\n        align-items: center;\n        margin-right: 5px;\n      }\n    }\n\n    .plugin-panel-icon {\n      display: grid;\n      grid-auto-flow: column;\n      align-items: center;\n\n      :deep(.svg-button + .svg-button) {\n        margin-left: 4px;\n      }\n\n      :deep(.svg-button + .icon-wrap) {\n        margin-left: 4px;\n      }\n    }\n  }\n}\n\n// 右边拖拽线\n.resizer-right {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 3px;\n  height: 100%;\n  cursor: col-resize;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n\n  &::after {\n    content: '';\n    position: absolute;\n    left: 3px;\n    width: 1px;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.1);\n    transition: width 0.3s ease, background-color 0.3s ease;\n  }\n}\n\n.header-bottom-line {\n  border-bottom: 1px solid var(--te-common-border-divider);\n}\n\n.dragging {\n  background-color: var(--te-component-common-resizer-border-color);\n\n  &::after {\n    width: 2px !important;\n  }\n}\n\n.resizer-right:hover {\n  background-color: var(--te-component-common-resizer-border-color);\n\n  &::after {\n    width: 2px;\n  }\n}\n\n// 左边拖拽线\n.resizer-left {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 3px;\n  height: 100%;\n  cursor: col-resize;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n\n  &::after {\n    content: '';\n    position: absolute;\n    right: 3px;\n    width: 1px;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.1);\n    transition: width 0.3s ease, background-color 0.3s ease;\n  }\n}\n\n.resizer-left:hover {\n  background-color: var(--te-component-common-resizer-border-color);\n\n  &::after {\n    width: 2px;\n  }\n}\n\n.scroll-content {\n  height: 100%;\n  overflow: auto;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n.scroll-content::-webkit-scrollbar {\n  display: none;\n}\n</style>\n","<template>\n  <ul v-if=\"false\" class=\"plugin-context-menu\" :style=\"{ left: contextMenu.x + 'px', top: contextMenu.y + 'px' }\">\n    <li v-if=\"contextMenu.type\" @click=\"hidePlugin\">隐藏 \"{{ contextMenu.item.title }}\"</li>\n    <li v-if=\"contextMenu.type\" class=\"bottom-li\" @click=\"switchAlign\">\n      切换到{{ align.includes('right') ? '左侧' : '右侧' }}\n    </li>\n    <li\n      v-for=\"(item, index) in list\"\n      :key=\"index\"\n      @click.stop=\"changeShowState(item.id)\"\n      class=\"menu-item-wrapper\"\n      :class=\"{\n        'bottom-li': index === list.length - 1\n      }\"\n    >\n      <span class=\"check-mark\">\n        <span v-show=\"getPluginShown(item.id)\">√</span>\n      </span>\n      <span>{{ item.title }}</span>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport { reactive, onMounted, onBeforeUnmount, nextTick, ref } from 'vue'\nimport { useLayout } from '@opentiny/tiny-engine-meta-register'\nexport default {\n  props: {\n    list: {\n      type: Array\n    },\n    align: {\n      type: String,\n      default: 'left'\n    }\n  },\n  emits: ['close', 'switchAlign'],\n  setup(props, { emit }) {\n    const { getPluginShown, changePluginShown, changeMenuShown } = useLayout()\n    const pluginGroupPosition = ref('')\n    const contextMenu = reactive({\n      type: true,\n      visible: false,\n      x: 0,\n      y: 0,\n      item: null,\n      index: null,\n      list: null\n    })\n\n    // 显示菜单\n    const contextMenuWidth = props.align.includes('right') ? 130 : 0\n    const showContextMenu = (x, y, type, item, index, position) => {\n      const windowHeight = window.innerHeight\n\n      contextMenu.type = type\n      contextMenu.visible = true\n\n      nextTick(() => {\n        const pluginMenuPanel = document.querySelector('.plugin-context-menu')\n        const menuHeight = pluginMenuPanel?.offsetHeight\n\n        const spaceBelow = windowHeight - y - 20\n\n        if (menuHeight && spaceBelow < menuHeight) {\n          contextMenu.y = y - menuHeight\n        } else {\n          contextMenu.y = y\n        }\n\n        contextMenu.x = x - contextMenuWidth\n      })\n\n      if (type) {\n        contextMenu.item = item\n        contextMenu.index = index\n        pluginGroupPosition.value = position\n      }\n    }\n\n    // 隐藏菜单\n    const hideContextMenu = () => {\n      contextMenu.visible = false\n    }\n\n    // 隐藏插件\n    const hidePlugin = () => {\n      emit('close')\n      changePluginShown(contextMenu.item.id)\n      hideContextMenu()\n    }\n\n    // 切换组件位置\n    const switchAlign = () => {\n      emit('close')\n      emit('switchAlign', contextMenu.index, contextMenu.item.id, pluginGroupPosition.value)\n      hideContextMenu()\n    }\n\n    // 隐藏活动栏\n    const hideSidebar = () => {\n      const align = props.align.includes('right') ? 'right' : 'left'\n      changeMenuShown(align)\n      hideContextMenu()\n    }\n\n    // 改变组件显示状态\n    const changeShowState = (pluginName) => {\n      changePluginShown(pluginName)\n    }\n\n    const handleClickOutside = (event) => {\n      if (!event.target.closest('.plugin-context-menu')) {\n        hideContextMenu()\n      }\n    }\n\n    onMounted(() => {\n      document.addEventListener('click', handleClickOutside)\n    })\n\n    onBeforeUnmount(() => {\n      document.removeEventListener('click', handleClickOutside)\n    })\n\n    return {\n      contextMenu,\n      showContextMenu,\n      changeShowState,\n      getPluginShown,\n      hidePlugin,\n      switchAlign,\n      hideSidebar\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 引入B的CSS样式 */\n.plugin-context-menu {\n  position: absolute;\n  background: white;\n  border: 1px solid #ccc;\n  list-style: none;\n  width: 135px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n}\n\n.plugin-context-menu-header {\n  padding: 8px 12px;\n  font-weight: bold;\n  cursor: default;\n  background: #f5f5f5;\n  border-bottom: 1px solid #ccc;\n}\n.bottom-li {\n  border-bottom: 1px solid #ccc;\n}\n\n.plugin-context-menu li {\n  padding: 8px 12px;\n  cursor: pointer;\n}\n\n.plugin-context-menu li:hover {\n  background: #f0f0f0;\n}\n.menu-item-wrapper {\n  display: flex;\n  flex-grow: 1;\n}\n\n.check-mark {\n  width: 20px;\n  text-align: left;\n}\n</style>\n","<template>\n  <div class=\"properties-list\">\n    <tiny-collapse v-model=\"activeNames\">\n      <tiny-collapse-item v-for=\"(group, groupIndex) in data\" :key=\"group\" :name=\"groupIndex\">\n        <template #title>\n          <slot name=\"title\" :group=\"group\">\n            <div @click=\"onGroupClick(group)\">\n              {{ group.label?.zh_CN || '' }}\n            </div>\n          </slot>\n        </template>\n        <config-group :group=\"group\" :index=\"groupIndex\" :design=\"design\" :emptyText=\"emptyText\">\n          <template #item=\"{ data, propIndex }\">\n            <config-item\n              :key=\"propIndex\"\n              :properties=\"properties\"\n              :property=\"data\"\n              :data-prop-index=\"propIndex\"\n              :data-group-index=\"groupIndex\"\n              :isTopLayer=\"true\"\n              :group=\"group\"\n              @click=\"onPropClick(data)\"\n            >\n              <template #prefix>\n                <slot name=\"prefix\" :data=\"data\"></slot>\n              </template>\n              <template v-if=\"!data.noBinding\" #suffix>\n                <slot name=\"suffix\" :data=\"data\"></slot>\n              </template>\n            </config-item>\n          </template>\n        </config-group>\n      </tiny-collapse-item>\n    </tiny-collapse>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, provide, ref, watchEffect } from 'vue'\nimport { Collapse, CollapseItem } from '@opentiny/vue'\nimport ConfigGroup from './ConfigGroup.vue'\nimport ConfigItem from './ConfigItem.vue'\nexport default {\n  components: {\n    TinyCollapse: Collapse,\n    TinyCollapseItem: CollapseItem,\n    ConfigGroup,\n    ConfigItem\n  },\n  props: {\n    data: {\n      type: [Array, Object],\n      default: () => []\n    },\n    design: Boolean,\n    emptyText: {\n      type: String,\n      default: '空'\n    }\n  },\n  emits: ['selected', 'select-prop', 'select-group'],\n  setup(props, { emit }) {\n    const activeNames = ref([])\n\n    const getPropsObj = (data?: Record<string, any> | any[]) => {\n      const obj = {}\n\n      data?.forEach(({ content }) => {\n        if (content.length) {\n          content.forEach(\n            (item: { schema: string | any[]; widget: { props: { modelValue: any } }; property: string | number }) => {\n              const node: any = item.schema?.length ? getPropsObj(item.schema) : {}\n\n              node.setValue = (value: any) => {\n                item.widget.props.modelValue = value\n              }\n              obj[item.property] = node\n            }\n          )\n        }\n      })\n\n      return obj\n    }\n\n    const propsObj = computed(() => getPropsObj(props.data || []))\n\n    provide('propsObj', propsObj)\n\n    const onPropClick = (data: any) => emit('select-prop', data)\n    const onGroupClick = (data: any) => emit('select-group', data)\n\n    const filterActiveGroup = (data: any[] | Record<string, any>) =>\n      data?.filter?.((item: { fold: any }) => !item.fold)?.map?.((item: any, index: any) => index) || []\n\n    watchEffect(() => {\n      activeNames.value = filterActiveGroup(props.data)\n    })\n\n    const properties = computed(() => props.data)\n\n    return { onPropClick, onGroupClick, activeNames, properties }\n  }\n}\n</script>\n","<template>\n  <div class=\"demo-form\">\n    <tiny-form label-position=\"left\" label-width=\"53px\">\n      <template v-for=\"label in labelList\" :key=\"label\">\n        <tiny-form-item v-if=\"labelTranslations[label]\" :label=\"labelTranslations[label] || label\">\n          <tiny-input v-model=\"formData[label]\"></tiny-input>\n        </tiny-form-item>\n      </template>\n      <tiny-form-item :class=\"{ footerbtnHide: footerbtnHide }\">\n        <tiny-button @click=\"cancel\">取消</tiny-button>\n        <tiny-button @click=\"confirm\">确定</tiny-button>\n      </tiny-form-item>\n    </tiny-form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive } from 'vue'\nimport { Form, FormItem, Input, Button } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyForm: Form,\n    TinyFormItem: FormItem,\n    TinyInput: Input,\n    TinyButton: Button\n  },\n  props: {\n    option: {\n      type: Object,\n      default: () => ({})\n    },\n    footerbtnHide: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const labelList = Object.keys(props.option)\n    const formData = reactive({ ...props.option })\n\n    const labelTranslations = {\n      label: '显示值',\n      text: '展示值',\n      zh_CN: '中文',\n      en_US: '英文',\n      field: 'field',\n      title: 'title',\n      description: '描述',\n      defaultValue: '缺省值'\n    }\n\n    const cancel = () => {\n      emit('cancel')\n    }\n\n    const confirm = () => {\n      emit('confirm', formData)\n    }\n\n    return {\n      labelList,\n      formData,\n      labelTranslations,\n      cancel,\n      confirm\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.demo-form {\n  .tiny-button {\n    min-width: 50px;\n    padding: 0 8px;\n  }\n  .footerbtnHide {\n    display: none;\n  }\n}\n</style>\n","<template lang=\"\">\n  <span v-for=\"(actionsItem, index) in actions\" :key=\"index\" class=\"actionsItem\" @click=\"actionsEvents(actionsItem)\">\n    <tiny-tooltip class=\"item\" effect=\"light\" :content=\"actionsItem.title\" placement=\"top\">\n      <component :is=\"actionsItem.icon\"></component>\n    </tiny-tooltip>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { Tooltip } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyTooltip: Tooltip\n  },\n  props: {\n    actions: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props, { emit }) {\n    const actionsEvents = (item: any) => {\n      emit('actionEvents', item)\n    }\n\n    return {\n      actionsEvents\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.actionsItem {\n  display: inline-block;\n  padding: 5px 5px;\n  background-color: var(--te-component-meta-list-action-bg-color);\n  &:not(:last-child) {\n    border-right: 1px solid var(--te-component-common-border-color);\n  }\n  .tiny-svg {\n    color: var(--te-component-common-icon-color);\n    font-size: 16px;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n}\n</style>\n","<template>\n  <div>{{ title }}</div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","/*!\n  * vue-draggable-next v2.2.0\n  * (c) 2023 Anish George\n  * @license MIT\n  */\nimport { defineComponent, h, resolveComponent } from 'vue';\n\n/**!\n * Sortable 1.14.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar version = \"1.14.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n * @param  {Number} x      X position\n * @param  {Number} y      Y position\n * @return {HTMLElement}   Element of the first found nearest Sortable\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          el.appendChild(dragEl);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\n   * Save the current sorting\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\n   * Destroy\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\n * Gets the direction dragEl must be swapped relative to target in order to make it\n * seem that dragEl has been \"inserted\" into that element's position\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n * @return {Number}                   Direction dragEl must be swapped\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\n * Get the Sortable instance of an element\n * @param  {HTMLElement} element The element\n * @return {Sortable|undefined}         The instance of Sortable\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\n * Mount a plugin to Sortable\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nfunction getConsole() {\r\n    if (typeof window !== 'undefined') {\r\n        return window.console;\r\n    }\r\n    return global.console;\r\n}\r\nconst console = getConsole();\r\nfunction cached(fn) {\r\n    const cache = Object.create(null);\r\n    return function cachedFn(str) {\r\n        const hit = cache[str];\r\n        return hit || (cache[str] = fn(str));\r\n    };\r\n}\r\nconst regex = /-(\\w)/g;\r\nconst camelize = cached((str) => str.replace(regex, (_, c) => (c ? c.toUpperCase() : '')));\r\nfunction removeNode(node) {\r\n    if (node.parentElement !== null) {\r\n        node.parentElement.removeChild(node);\r\n    }\r\n}\r\nfunction insertNodeAt(fatherNode, node, position) {\r\n    const refNode = position === 0\r\n        ? fatherNode.children[0]\r\n        : fatherNode.children[position - 1].nextSibling;\r\n    fatherNode.insertBefore(node, refNode);\r\n}\n\nfunction computeVmIndex(vnodes, element) {\r\n    return Object.values(vnodes).indexOf(element);\r\n}\r\nfunction computeIndexes(slots, children, isTransition, footerOffset) {\r\n    if (!slots) {\r\n        return [];\r\n    }\r\n    const elmFromNodes = Object.values(slots);\r\n    const footerIndex = children.length - footerOffset;\r\n    const rawIndexes = [...children].map((elt, idx) => idx >= footerIndex ? elmFromNodes.length : elmFromNodes.indexOf(elt));\r\n    return rawIndexes;\r\n}\r\nfunction emit(evtName, evtData) {\r\n    //@ts-ignore\r\n    this.$nextTick(() => this.$emit(evtName.toLowerCase(), evtData));\r\n}\r\nfunction delegateAndEmit(evtName) {\r\n    //@ts-ignore\r\n    return evtData => {\r\n        //@ts-ignore\r\n        if (this.realList !== null) {\r\n            //@ts-ignore\r\n            this['onDrag' + evtName](evtData);\r\n        }\r\n        //@ts-ignore\r\n        emit.call(this, evtName, evtData);\r\n    };\r\n}\r\nfunction isTransitionName(name) {\r\n    return ['transition-group', 'TransitionGroup'].includes(name);\r\n}\r\nfunction isTransition(slots) {\r\n    if (!slots || slots.length !== 1) {\r\n        return false;\r\n    }\r\n    // @ts-ignore\r\n    const [{ type }] = slots;\r\n    if (!type) {\r\n        return false;\r\n    }\r\n    //@ts-ignore\r\n    return isTransitionName(type.name);\r\n}\r\nfunction getComponentAttributes($attrs, componentData) {\r\n    if (!componentData) {\r\n        return $attrs;\r\n    }\r\n    return { ...componentData.props, ...componentData.attrs };\r\n}\r\nconst eventsListened = ['Start', 'Add', 'Remove', 'Update', 'End'];\r\nconst eventsToEmit = ['Choose', 'Unchoose', 'Sort', 'Filter', 'Clone'];\r\nconst readonlyProperties = ['Move', ...eventsListened, ...eventsToEmit].map(evt => 'on' + evt);\r\n// @ts-ignore\r\nlet draggingElement = null;\r\nconst props = {\r\n    options: Object,\r\n    list: {\r\n        type: Array,\r\n        required: false,\r\n        default: null,\r\n    },\r\n    noTransitionOnDrag: {\r\n        type: Boolean,\r\n        default: false,\r\n    },\r\n    clone: {\r\n        type: Function,\r\n        default: (original) => {\r\n            return original;\r\n        },\r\n    },\r\n    tag: {\r\n        type: String,\r\n        default: 'div',\r\n    },\r\n    move: {\r\n        type: Function,\r\n        default: null,\r\n    },\r\n    componentData: {\r\n        type: Object,\r\n        required: false,\r\n        default: null,\r\n    },\r\n    component: {\r\n        type: String,\r\n        default: null,\r\n    },\r\n    modelValue: {\r\n        type: Array,\r\n        required: false,\r\n        default: null,\r\n    },\r\n};\r\nconst VueDraggableNext = defineComponent({\r\n    name: 'VueDraggableNext',\r\n    inheritAttrs: false,\r\n    emits: [\r\n        'update:modelValue',\r\n        'move',\r\n        'change',\r\n        ...eventsListened.map(s => s.toLowerCase()),\r\n        ...eventsToEmit.map(s => s.toLowerCase()),\r\n    ],\r\n    props,\r\n    data() {\r\n        return {\r\n            transitionMode: false,\r\n            noneFunctionalComponentMode: false,\r\n            headerOffset: 0,\r\n            footerOffset: 0,\r\n            _sortable: {},\r\n            visibleIndexes: [],\r\n            context: {},\r\n        };\r\n    },\r\n    render() {\r\n        const slots = this.$slots.default ? this.$slots.default() : null;\r\n        const attrs = getComponentAttributes(this.$attrs, this.componentData);\r\n        if (!slots)\r\n            return h(this.getTag(), attrs, []);\r\n        this.transitionMode = isTransition(slots);\r\n        return h(this.getTag(), attrs, slots);\r\n    },\r\n    created() {\r\n        if (this.list !== null && this.modelValue !== null) {\r\n            console.error('list props are mutually exclusive! Please set one.');\r\n        }\r\n    },\r\n    mounted() {\r\n        const optionsAdded = {};\r\n        eventsListened.forEach(elt => {\r\n            optionsAdded['on' + elt] = delegateAndEmit.call(this, elt);\r\n        });\r\n        eventsToEmit.forEach(elt => {\r\n            optionsAdded['on' + elt] = emit.bind(this, elt);\r\n        });\r\n        const attributes = Object.keys(this.$attrs).reduce((res, key) => {\r\n            res[camelize(key)] = this.$attrs[key];\r\n            return res;\r\n        }, {});\r\n        const options = Object.assign({}, attributes, optionsAdded, {\r\n            onMove: (evt, originalEvent) => {\r\n                return this.onDragMove(evt, originalEvent);\r\n            },\r\n        });\r\n        !('draggable' in options) && (options.draggable = '>*');\r\n        const targetDomElement = this.$el.nodeType === 1 ? this.$el : this.$el.parentElement;\r\n        this._sortable = new Sortable(targetDomElement, options);\r\n        targetDomElement.__draggable_component__ = this;\r\n        this.computeIndexes();\r\n    },\r\n    beforeUnmount() {\r\n        try {\r\n            if (this._sortable !== undefined)\r\n                this._sortable.destroy();\r\n        }\r\n        catch (error) { }\r\n    },\r\n    computed: {\r\n        realList() {\r\n            return this.list ? this.list : this.modelValue;\r\n        },\r\n    },\r\n    watch: {\r\n        $attrs: {\r\n            handler(newOptionValue) {\r\n                this.updateOptions(newOptionValue);\r\n            },\r\n            deep: true,\r\n        },\r\n        realList() {\r\n            this.computeIndexes();\r\n        },\r\n    },\r\n    methods: {\r\n        getTag() {\r\n            return this.component ? resolveComponent(this.component) : this.tag;\r\n        },\r\n        updateOptions(newOptionValue) {\r\n            for (var property in newOptionValue) {\r\n                const value = camelize(property);\r\n                if (readonlyProperties.indexOf(value) === -1) {\r\n                    this._sortable.option(value, newOptionValue[property]);\r\n                }\r\n            }\r\n        },\r\n        getChildrenNodes() {\r\n            return this.$el.children;\r\n        },\r\n        computeIndexes() {\r\n            this.$nextTick(() => {\r\n                this.visibleIndexes = computeIndexes(this.getChildrenNodes(), this.$el.children, this.transitionMode, this.footerOffset);\r\n            });\r\n        },\r\n        getUnderlyingVm(htmlElt) {\r\n            const index = computeVmIndex(this.getChildrenNodes() || [], htmlElt);\r\n            if (index === -1) {\r\n                //Edge case during move callback: related element might be\r\n                //an element different from collection\r\n                return null;\r\n            }\r\n            //@ts-ignore\r\n            const element = this.realList[index];\r\n            return { index, element };\r\n        },\r\n        emitChanges(evt) {\r\n            this.$nextTick(() => {\r\n                this.$emit('change', evt);\r\n            });\r\n        },\r\n        alterList(onList) {\r\n            if (this.list) {\r\n                onList(this.list);\r\n                return;\r\n            }\r\n            const newList = [...this.modelValue];\r\n            onList(newList);\r\n            this.$emit('update:modelValue', newList);\r\n        },\r\n        spliceList() {\r\n            const spliceList = (list) => list.splice(...arguments);\r\n            this.alterList(spliceList);\r\n        },\r\n        updatePosition(oldIndex, newIndex) {\r\n            const updatePosition = (list) => list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]);\r\n            this.alterList(updatePosition);\r\n        },\r\n        getVmIndex(domIndex) {\r\n            const indexes = this.visibleIndexes;\r\n            const numberIndexes = indexes.length;\r\n            return domIndex > numberIndexes - 1 ? numberIndexes : indexes[domIndex];\r\n        },\r\n        getComponent() {\r\n            return this.$slots.default\r\n                ? //@ts-ignore\r\n                    this.$slots.default()[0].componentInstance\r\n                : null;\r\n        },\r\n        resetTransitionData(index) {\r\n            if (!this.noTransitionOnDrag || !this.transitionMode) {\r\n                return;\r\n            }\r\n            var nodes = this.getChildrenNodes();\r\n            nodes[index].data = null;\r\n            const transitionContainer = this.getComponent();\r\n            transitionContainer.children = [];\r\n            transitionContainer.kept = undefined;\r\n        },\r\n        onDragStart(evt) {\r\n            this.computeIndexes();\r\n            this.context = this.getUnderlyingVm(evt.item);\r\n            if (!this.context)\r\n                return;\r\n            evt.item._underlying_vm_ = this.clone(this.context.element);\r\n            draggingElement = evt.item;\r\n        },\r\n        onDragAdd(evt) {\r\n            const element = evt.item._underlying_vm_;\r\n            if (element === undefined) {\r\n                return;\r\n            }\r\n            removeNode(evt.item);\r\n            const newIndex = this.getVmIndex(evt.newIndex);\r\n            //@ts-ignore\r\n            this.spliceList(newIndex, 0, element);\r\n            this.computeIndexes();\r\n            const added = { element, newIndex };\r\n            this.emitChanges({ added });\r\n        },\r\n        onDragRemove(evt) {\r\n            insertNodeAt(this.$el, evt.item, evt.oldIndex);\r\n            if (evt.pullMode === 'clone') {\r\n                removeNode(evt.clone);\r\n                return;\r\n            }\r\n            if (!this.context)\r\n                return;\r\n            const oldIndex = this.context.index;\r\n            //@ts-ignore\r\n            this.spliceList(oldIndex, 1);\r\n            const removed = { element: this.context.element, oldIndex };\r\n            this.resetTransitionData(oldIndex);\r\n            this.emitChanges({ removed });\r\n        },\r\n        onDragUpdate(evt) {\r\n            removeNode(evt.item);\r\n            insertNodeAt(evt.from, evt.item, evt.oldIndex);\r\n            //@ts-ignore\r\n            const oldIndex = this.context.index;\r\n            const newIndex = this.getVmIndex(evt.newIndex);\r\n            this.updatePosition(oldIndex, newIndex);\r\n            //@ts-ignore\r\n            const moved = { element: this.context.element, oldIndex, newIndex };\r\n            this.emitChanges({ moved });\r\n        },\r\n        updateProperty(evt, propertyName) {\r\n            evt.hasOwnProperty(propertyName) &&\r\n                (evt[propertyName] += this.headerOffset);\r\n        },\r\n        onDragMove(evt, originalEvent) {\r\n            const onMove = this.move;\r\n            if (!onMove || !this.realList) {\r\n                return true;\r\n            }\r\n            const relatedContext = this.getRelatedContextFromMoveEvent(evt);\r\n            const draggedContext = this.context;\r\n            const futureIndex = this.computeFutureIndex(relatedContext, evt);\r\n            Object.assign(draggedContext, { futureIndex });\r\n            const sendEvt = Object.assign({}, evt, {\r\n                relatedContext,\r\n                draggedContext,\r\n            });\r\n            return onMove(sendEvt, originalEvent);\r\n        },\r\n        onDragEnd() {\r\n            this.computeIndexes();\r\n            draggingElement = null;\r\n        },\r\n        getTrargetedComponent(htmElement) {\r\n            return htmElement.__draggable_component__;\r\n        },\r\n        getRelatedContextFromMoveEvent({ to, related }) {\r\n            const component = this.getTrargetedComponent(to);\r\n            if (!component) {\r\n                return { component };\r\n            }\r\n            const list = component.realList;\r\n            const context = { list, component };\r\n            if (to !== related && list && component.getUnderlyingVm) {\r\n                const destination = component.getUnderlyingVm(related);\r\n                if (destination) {\r\n                    return Object.assign(destination, context);\r\n                }\r\n            }\r\n            return context;\r\n        },\r\n        computeFutureIndex(relatedContext, evt) {\r\n            const domChildren = [...evt.to.children].filter(el => el.style['display'] !== 'none');\r\n            if (domChildren.length === 0)\r\n                return 0;\r\n            const currentDOMIndex = domChildren.indexOf(evt.related);\r\n            const currentIndex = relatedContext.component.getVmIndex(currentDOMIndex);\r\n            const draggedInList = domChildren.indexOf(draggingElement) !== -1;\r\n            return draggedInList || !evt.willInsertAfter\r\n                ? currentIndex\r\n                : currentIndex + 1;\r\n        },\r\n    },\r\n});\n\nexport { VueDraggableNext };\n","<template>\n  <teleport to=\"body\">\n    <div v-if=\"visibleModal\" class=\"mask-modal\" @click=\"$emit('close')\">\n      <slot></slot>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\n\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close'],\n  setup(props) {\n    const visibleModal = computed(() => props.visible)\n\n    return {\n      visibleModal\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.mask-modal {\n  position: fixed;\n  top: 0;\n  left: calc(100% - var(--base-right-panel-width) - var(--base-nav-panel-width));\n  width: var(--base-right-panel-width);\n  height: 100%;\n  background-color: var(--te-component-mask-modal-bg-color);\n  transition: background-color, 0.2s, ease-in-out;\n  z-index: 9;\n}\n</style>\n","<template>\n  <div :class=\"['item-content', { 'active-item': currentIndex === index }]\" @click=\"openEdit\">\n    <div class=\"option-input\">\n      <div class=\"left\">\n        <icon-more class=\"tiny-svg-size icon-more\"></icon-more>\n        <slot name=\"content\" :data=\"item\"></slot>\n      </div>\n      <div class=\"right\">\n        <slot name=\"operate\" :data=\"item\">\n          <template v-for=\"item in dataScource.btnList\" :key=\"item.type\">\n            <template v-if=\"item.type === 'edit'\">\n              <tiny-popover\n                :key=\"itemData.index\"\n                v-model=\"isVisible\"\n                placement=\"bottom-start\"\n                :popper-class=\"['option-popper', { 'fixed-left': expand }]\"\n                :visible-arrow=\"!expand\"\n                title=\"\"\n                width=\"295\"\n                height=\"auto\"\n                trigger=\"manual\"\n                @hide=\"hide(item)\"\n              >\n                <template v-if=\"isVisible\">\n                  <div ref=\"addOptions\" class=\"add-options\" :style=\"`left:${itemData.left}px;top:${itemData.top}px`\">\n                    <icon-close class=\"tiny-svg-size icon-close\" @click=\"closeEditOption\"></icon-close>\n                    <slot name=\"metaForm\">\n                      <meta-form\n                        v-bind=\"itemData\"\n                        footerbtnHide=\"true\"\n                        @changeItem=\"change\"\n                        @cancel=\"cancel\"\n                        @confirm=\"formConfirm\"\n                      ></meta-form>\n                    </slot>\n                    <slot name=\"footer\"></slot></div\n                ></template>\n\n                <template #reference>\n                  <icon-edit class=\"tiny-svg-size icon-edit\" @click=\"btnClick($event, item.type)\"></icon-edit>\n                </template>\n              </tiny-popover>\n            </template>\n            <template v-else>\n              <span class=\"item-icon\" @click=\"btnClick($event, item.type)\">\n                <component :is=\"item.icon\"></component>\n              </span>\n            </template>\n          </template>\n        </slot>\n      </div>\n    </div>\n  </div>\n  <!-- 删除页面弹窗 -->\n  <tiny-dialog-box\n    v-if=\"isShow\"\n    :append-to-body=\"true\"\n    :visible=\"isShow\"\n    title=\"提示\"\n    width=\"20%\"\n    @update:visible=\"isShow = $event\"\n  >\n    <span class=\"switch-tip\">\n      <span>确定删除吗？</span>\n    </span>\n    <template #footer>\n      <tiny-button @click=\"isShow = false\">取消</tiny-button>\n      <tiny-button type=\"danger\" @click=\"confirm\">删除</tiny-button>\n    </template>\n  </tiny-dialog-box>\n  <!-- 遮罩层 -->\n  <mask-modal :visible=\"showMask && !expand\" @close=\"closeMask\"></mask-modal>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, watchEffect, ref, onMounted } from 'vue'\nimport { Tooltip, Input, FormItem, Form, Popover, DialogBox, Button } from '@opentiny/vue'\nimport { iconDel, iconEdit, iconMore, iconClose } from '@opentiny/vue-icon'\nimport MaskModal from './MaskModal.vue'\nimport MetaForm from './MetaForm.vue'\n\nexport default {\n  components: {\n    TinyTooltip: Tooltip,\n    TinyInput: Input,\n    TinyFormItem: FormItem,\n    TinyForm: Form,\n    TinyPopover: Popover,\n    TinyDialogBox: DialogBox,\n    TinyButton: Button,\n    MetaForm,\n    MaskModal,\n    IconDel: iconDel(),\n    IconEdit: iconEdit(),\n    IconMore: iconMore(),\n    IconClose: iconClose()\n  },\n  inheritAttrs: false,\n  props: {\n    item: {\n      type: Object,\n      default: () => {}\n    },\n    dataScource: {\n      type: Object,\n      default: () => {}\n    },\n    index: {\n      type: Number,\n      default: 0\n    },\n    currentIndex: {\n      type: Number,\n      default: -1\n    },\n    // 使用itemClick判断是否由双击触发弹出面板\n    itemClick: {\n      type: Boolean,\n      default: false\n    },\n    // 子级弹出层是否在左侧展开\n    expand: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['editItem', 'changeItem', 'deleteItem', 'hide'],\n  setup(props, { emit }) {\n    const itemData = reactive<any>({})\n    const isShow = ref(false)\n    const isVisible = ref(false)\n    const showMask = ref(false)\n    const top = ref(0)\n\n    const deleteItem = () => {\n      isShow.value = true\n    }\n\n    const editList = () => {\n      showMask.value = true\n      isVisible.value = true\n    }\n\n    const btnClick = ($event: any, action: any) => {\n      switch (action) {\n        case 'delete':\n          deleteItem()\n          break\n        case 'openModal':\n          emit('editItem', { action: 'openModal', index: props.index })\n          break\n        case 'edit':\n          emit('editItem', { action: 'edit', index: props.index })\n          editList()\n          break\n        default:\n          emit('editItem', { index: props.index })\n          editList()\n          break\n      }\n    }\n\n    const change = () => {\n      emit('changeItem', itemData)\n    }\n\n    const confirm = () => {\n      isShow.value = false\n\n      emit('deleteItem', itemData)\n    }\n\n    const closeEditOption = () => {\n      isVisible.value = false\n      showMask.value = false\n    }\n\n    const hide = () => {\n      emit('hide')\n    }\n\n    const isShowModal = ref(false)\n\n    const cancel = () => {\n      isVisible.value = false\n    }\n\n    const formConfirm = (formData: any) => {\n      emit('changeItem', { data: formData, index: props.index })\n      isVisible.value = false\n    }\n\n    watchEffect(() => {\n      itemData.option = props.item\n      itemData.textField = props.dataScource.textField\n      itemData.valueField = props.dataScource.valueField\n      itemData.label = props.dataScource.label\n      itemData.index = props.index\n\n      if (props.currentIndex !== props.index) {\n        cancel()\n      }\n    })\n\n    const openEdit = () => {\n      if (props.itemClick && !isShow.value) {\n        editList()\n      }\n    }\n\n    const closeMask = () => {\n      showMask.value = false\n      isVisible.value = false\n    }\n\n    onMounted(() => {\n      if (props.currentIndex === props.index) {\n        editList()\n      }\n    })\n\n    return {\n      itemData,\n      change,\n      deleteItem,\n      closeEditOption,\n      btnClick,\n      hide,\n      isShow,\n      confirm,\n      editList,\n      isVisible,\n      showMask,\n      closeMask,\n      top,\n      isShowModal,\n      formConfirm,\n      cancel,\n      openEdit\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.item-content {\n  border: 1px solid var(--te-component-common-border-color-divider);\n  border-left: none;\n  border-right: none;\n  background: var(--te-component-common-bg-color);\n  margin-bottom: -1px;\n  color: var(--te-component-common-text-color-primary);\n  &.active-item {\n    background-color: var(--te-component-meta-list-item-bg-color);\n  }\n  .option-input {\n    display: flex;\n    height: 24px;\n    align-items: center;\n    padding: 2px;\n    & > div {\n      overflow: hidden;\n      .tiny-svg {\n        margin-right: 5px;\n        font-size: 12px;\n        opacity: 0.4;\n        color: var(--te-component-common-text-color-primary);\n        &:hover {\n          cursor: pointer;\n          opacity: 1;\n        }\n      }\n\n      &.left {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        .icon-more {\n          font-size: 14px;\n          flex-shrink: 0;\n          cursor: move;\n        }\n        :deep(span) {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n      &.right {\n        float: left;\n        text-align: right;\n        margin-right: 8px;\n      }\n    }\n  }\n}\n\n.tiny-popover {\n  position: relative;\n  .icon-close {\n    position: absolute;\n    top: 6px;\n    right: 10px;\n  }\n}\n.add-options {\n  overflow-y: auto;\n  max-height: calc(100vh - 94px); // 94为头部高度和底部高度\n  &.top {\n    margin-bottom: 0;\n  }\n}\n</style>\n","<template>\n  <template v-if=\"draggable\">\n    <vue-draggable-next class=\"dragArea list-group w-full\" :list=\"optionsList\" handle=\".icon-more\" @change=\"dragEnd\">\n      <div v-for=\"(item, index) in optionsList\" :key=\"index\" class=\"option-item\">\n        <meta-list-item\n          :item=\"item\"\n          :index=\"index\"\n          :itemClick=\"itemClick\"\n          :dataScource=\"listItemOption\"\n          @changeItem=\"changeItem\"\n          @deleteItem=\"deleteItem\"\n          @editItem=\"editItem\"\n        >\n          <template #content>\n            <slot name=\"content\" :data=\"item\">\n              <span>{{ item[textField] || formatName(item) }}</span>\n            </slot>\n          </template>\n          <template #operate>\n            <slot name=\"operate\" :data=\"item\"></slot>\n          </template>\n          <template #metaForm>\n            <slot name=\"form\" :data=\"item\"></slot>\n          </template>\n          <template #footer>\n            <slot name=\"footer\" :data=\"item\"></slot>\n          </template>\n        </meta-list-item>\n      </div>\n    </vue-draggable-next>\n  </template>\n  <template v-else>\n    <div>\n      <div v-for=\"(item, index) in optionsList\" :key=\"index\" class=\"option-item not-draggable\">\n        <meta-list-item\n          :item=\"item\"\n          :index=\"index\"\n          :itemClick=\"itemClick\"\n          :dataScource=\"listItemOption\"\n          @changeItem=\"changeItem\"\n          @deleteItem=\"deleteItem\"\n          @editItem=\"editItem\"\n        >\n          <template #content>\n            <slot name=\"content\" :data=\"item\">\n              <span>{{ item[textField] || formatName(item) }}</span>\n            </slot>\n          </template>\n          <template #operate>\n            <slot name=\"operate\" :data=\"item\"></slot>\n          </template>\n          <template #metaForm>\n            <slot name=\"form\" :data=\"item\"></slot>\n          </template>\n          <template #footer>\n            <slot name=\"footer\" :data=\"item\"></slot>\n          </template>\n        </meta-list-item>\n      </div>\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\nimport { VueDraggableNext } from 'vue-draggable-next'\nimport { useResource } from '@opentiny/tiny-engine-meta-register'\nimport MetaListItem from './MetaListItem.vue'\n\nexport default {\n  components: {\n    MetaListItem,\n    VueDraggableNext\n  },\n  props: {\n    draggable: {\n      type: Boolean,\n      default: true\n    },\n    optionsList: {\n      type: Array,\n      default: () => []\n    },\n    name: {\n      type: String,\n      default: ''\n    },\n    valueField: {\n      type: String,\n      default: ''\n    },\n    textField: {\n      type: String,\n      default: ''\n    },\n    btnList: {\n      type: Array,\n      default: () => []\n    },\n    // 使用itemClick判断是否由双击触发弹出面板\n    itemClick: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const listItemOption = computed(() => props)\n    const { appSchemaState } = useResource()\n\n    const changeItem = (params) => {\n      const optionsList = [...props.optionsList]\n      if (params.data) {\n        optionsList[params.index] = params.data\n      }\n\n      emit('changeItem', optionsList)\n    }\n\n    const deleteItem = (params) => {\n      emit('deleteItem', params)\n    }\n\n    const dragEnd = (value) => {\n      emit('dragEnd', value)\n    }\n\n    const editItem = (params) => {\n      const optionsList = [...props.optionsList]\n\n      switch (params.action) {\n        case 'openModal':\n          emit('openModal', { index: params.index })\n          break\n\n        default:\n          optionsList[params.index] = params.data\n          emit('changeItem', optionsList)\n          break\n      }\n    }\n\n    const typeDesc = {\n      index: '序号',\n      selection: '复选框',\n      radio: '单选框',\n      expand: '展开行'\n    }\n\n    const formatName = (item) => {\n      if (!item) {\n        return ''\n      }\n\n      let text = ''\n\n      const name = computed(() => {\n        if (item.type) {\n          text = typeDesc[item.type]\n        }\n\n        if (item[props.textField]) {\n          if (item[props.textField].i18nKey) {\n            const i18nKey = item[props.textField].i18nKey\n            text = appSchemaState.langs[i18nKey][appSchemaState.currentLang]\n          } else {\n            text = item[props.textField]\n          }\n        }\n\n        return text\n      })\n\n      return name\n    }\n\n    return {\n      listItemOption,\n      changeItem,\n      deleteItem,\n      dragEnd,\n      editItem,\n      formatName\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.option-item.not-draggable {\n  :deep(.item-content .option-input > div.left .icon-more) {\n    cursor: auto;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"modal.created\" v-show=\"modal.show\" class=\"modal-wrapper\">\n    <div class=\"modal-mask\" @click=\"close\"></div>\n    <div class=\"modal-content\" :style=\"{ width: width + 'px' }\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive } from 'vue'\n\nconst modal = reactive({\n  show: false,\n  created: false\n})\nexport const useModal = () => {\n  const openModal = () => {\n    if (!modal.created) {\n      modal.created = true\n    }\n    modal.show = true\n  }\n\n  const closeModal = () => {\n    modal.show = false\n  }\n\n  return { openModal, closeModal }\n}\n\nexport default {\n  props: {\n    width: {\n      type: Number,\n      default: 239\n    },\n    top: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, { emit }) {\n    const { closeModal } = useModal()\n\n    const close = () => {\n      closeModal()\n      emit('close')\n    }\n\n    return {\n      close,\n      modal\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.modal-wrapper {\n  position: fixed;\n  z-index: 999;\n  height: calc(100% - var(--base-top-panel-height));\n  right: var(--base-right-panel-width);\n  top: var(--base-top-panel-height);\n  .modal-mask {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: -1;\n  }\n\n  .modal-content {\n    padding: 8px;\n    color: var(--te-component-common-text-color-secondary);\n    border: 1px solid var(--te-component-common-border-color);\n    border-radius: 4px;\n    background-color: var(--te-component-meta-modal-bg-color);\n    overflow: auto;\n    max-height: 100%;\n  }\n}\n</style>\n","<template>\n  <div class=\"items-container\">\n    <div class=\"title\">{{ title }}</div>\n    <div v-for=\"(data, idx) in properties\" :key=\"idx\" class=\"meta-config-item\">\n      <config-item\n        :key=\"idx\"\n        :property=\"data\"\n        :data-prop-index=\"idx\"\n        :data-group-index=\"index\"\n        @update:modelValue=\"onValueChange(data.property, $event)\"\n      >\n        <slot name=\"prefix\" :data=\"data\"></slot>\n        <slot name=\"suffix\" :data=\"data\"></slot>\n      </config-item>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\nimport { isObject } from '@opentiny/vue-renderless/grid/static'\nimport ConfigItem from './ConfigItem.vue'\nimport i18n from '../js/i18n'\n\nexport default {\n  components: {\n    ConfigItem\n  },\n  inheritAttrs: false,\n  props: {\n    meta: {\n      type: Object,\n      default: () => {}\n    },\n    type: {\n      type: String,\n      default: 'object'\n    },\n    arrayIndex: {\n      type: Number,\n      default: -1\n    }\n  },\n  setup(props, { emit }) {\n    const { locale } = i18n.global\n    const untitled = {\n      zh_CN: '未命名标题',\n      en_US: 'Untitled'\n    }\n\n    const title = computed(() => {\n      const propsModelValue = props.meta.widget.props?.modelValue || []\n      const { title, label, type } = propsModelValue[props.arrayIndex] || {}\n      const text = title || label\n      const localizedText = isObject(text) ? text[locale.value] : text\n\n      return localizedText || type || untitled[locale.value] || untitled.zh_CN\n    })\n\n    const properties = computed(() => {\n      const result = [...(props.meta?.properties?.[0]?.content || [])]\n      const propsModelValue = props.meta.widget.props?.modelValue\n\n      if (result.length && propsModelValue) {\n        result.forEach((item) => {\n          let modelValue = propsModelValue\n          if (props.type === 'array' && props.arrayIndex > -1) {\n            modelValue = modelValue[props.arrayIndex]\n          }\n          const model_value_property = modelValue[item.property]\n          item.widget.props.modelValue =\n            typeof model_value_property === 'boolean' ? model_value_property : model_value_property || null\n        })\n      }\n      return result\n    })\n\n    const onValueChange = (property: any, data: any) => {\n      emit('update:modelValue', { propertyKey: property, propertyValue: data })\n    }\n\n    return {\n      title,\n      properties,\n      onValueChange\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.title {\n  color: var(--te-component-common-text-color-primary);\n  padding: 0 10px;\n  font-weight: bold;\n  margin-bottom: 16px;\n}\n.items-container {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  height: calc(100% - 34px); // 34为头部+底部的高度\n  overflow-y: auto;\n\n  .meta-config-item {\n    flex: 1;\n    padding: 0 10px;\n    margin-bottom: var(--te-common-vertical-item-spacing-normal);\n  }\n}\n</style>\n","<template>\n  <div class=\"meta-modal-wrap\">\n    <tiny-button @click=\"open\">{{ title }}</tiny-button>\n    <div v-if=\"modalState.created\" v-show=\"modalState.show\" class=\"mask\" @click.self=\"close\">\n      <div class=\"property-item\">\n        <div class=\"property-item-header\">\n          <span class=\"header-text\">{{ title }}</span>\n          <span class=\"icon-wrap\">\n            <icon-close class=\"header-icon\" @click=\"close\"></icon-close>\n          </span>\n        </div>\n        <slot name=\"body\">\n          <div class=\"meta-modal-body\">\n            <meta-child-item :meta=\"meta\" @update:modelValue=\"onValueChange\"></meta-child-item>\n          </div>\n        </slot>\n        <slot name=\"footer\">\n          <div v-show=\"false\" class=\"property-item-footer\">\n            <tiny-button @click=\"close\">关闭</tiny-button>\n            <tiny-button type=\"info\" @click=\"save\">保存</tiny-button>\n          </div>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Button } from '@opentiny/vue'\nimport { iconClose } from '@opentiny/vue-icon'\nimport { reactive, computed } from 'vue'\nimport MetaChildItem from './MetaChildItem.vue'\n\nexport default {\n  components: {\n    MetaChildItem,\n    TinyButton: Button,\n    IconClose: iconClose()\n  },\n  props: {\n    meta: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  emits: ['save', 'close', 'update:modelValue'],\n  setup(props, { emit }) {\n    const modalState = reactive({\n      show: false,\n      created: false\n    })\n    const title = computed(() => `编辑${props.meta.label?.text?.zh_CN || props.meta.property || '属性'}`)\n\n    // 关闭编辑器\n    const close = () => {\n      modalState.show = false\n      emit('close')\n    }\n\n    // 打开编辑器\n    const open = () => {\n      if (!modalState.created) {\n        modalState.created = true\n      }\n\n      modalState.show = true\n    }\n\n    const save = (value: any) => {\n      emit('update:modelValue', value)\n\n      close()\n    }\n\n    const onValueChange = ({ propertyKey, propertyValue }) => {\n      const newPropertyValue = { ...props.meta.widget?.props?.modelValue, [propertyKey]: propertyValue }\n      emit('update:modelValue', newPropertyValue)\n    }\n\n    return {\n      title,\n      modalState,\n      save,\n      close,\n      open,\n      onValueChange\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.mask {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  .property-item {\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    z-index: 9999;\n    width: 50vw;\n    height: fit-content;\n    min-height: 200px;\n    max-height: 90vh;\n    padding: 0 16px;\n    margin: auto;\n    border-radius: 4px;\n    border: 1px solid var(--te-component-common-border-color);\n    background-color: var(--te-component-meta-modal-bg-color);\n    box-shadow: rgb(0 0 0 / 30%) 0px 1px 15px 0px;\n\n    .property-item-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 10px 0;\n      color: var(--te-component-common-text-color-secondary);\n\n      .header-title {\n        font-size: 14px;\n      }\n\n      .icon-wrap {\n        width: 20px;\n        height: 20px;\n        color: var(--te-component-common-icon-color);\n        font-size: 16px;\n        border-radius: 2px;\n        cursor: pointer;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        transition: 0.3s;\n        &:hover {\n          color: var(--te-component-common-icon-color-hover);\n          background: var(--te-component-common-bg-color-hover);\n        }\n      }\n    }\n\n    .property-item-content {\n      // min-height: 200px;\n      height: calc(100% - 86px);\n      box-shadow: 0px 0px 4px rgb(0 0 0 / 20%);\n    }\n\n    .property-item-footer {\n      display: flex;\n      justify-content: flex-end;\n      padding: 10px 0;\n    }\n  }\n  .meta-modal-body {\n    display: flex;\n    flex-wrap: wrap;\n  }\n}\n.meta-modal-wrap {\n  :deep(.items-container) {\n    .meta-config-item {\n      width: 50%;\n    }\n  }\n}\n</style>\n","<template>\n  <tiny-popover width=\"267\" trigger=\"click\" placement=\"bottom-end\" :visible-arrow=\"true\" popperClass=\"option-popper\">\n    <template #reference>\n      <slot name=\"reference\">\n        <tiny-button>{{ title }}</tiny-button>\n      </slot>\n    </template>\n    <slot name=\"body\">\n      <meta-child-item :meta=\"meta\" @update:modelValue=\"onValueChange\"></meta-child-item>\n    </slot>\n  </tiny-popover>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\nimport { Popover, Button } from '@opentiny/vue'\nimport MetaChildItem from './MetaChildItem.vue'\n\nexport default {\n  components: {\n    MetaChildItem,\n    TinyPopover: Popover,\n    TinyButton: Button\n  },\n  inheritAttrs: false,\n  props: {\n    meta: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props, { emit }) {\n    const title = computed(() => `编辑${props.meta.label?.text?.zh_CN || props.meta.property || '属性'}`)\n    const onValueChange = ({ propertyKey, propertyValue }) => {\n      const newPropertyValue = { ...props.meta.widget?.props?.modelValue, [propertyKey]: propertyValue }\n      emit('update:modelValue', newPropertyValue)\n    }\n\n    return { title, onValueChange }\n  }\n}\n</script>\n","<template>\n  <div ref=\"monacoRef\"></div>\n</template>\n<script lang=\"ts\">\nimport * as monacoEditor from 'monaco-editor'\nimport { watch, onMounted, nextTick, onBeforeUnmount, ref } from 'vue'\nimport { formatString } from '../js/ast'\n\nconst defaultMonacoEditorTheme = 'vs'\nconst globalMonacoEditorTheme = ref(defaultMonacoEditorTheme)\n\nexport const setGlobalMonacoEditorTheme = (theme?: 'vs' | 'vs-dark') => {\n  globalMonacoEditorTheme.value = theme || defaultMonacoEditorTheme\n}\n\nexport default {\n  name: 'MonacoEditor',\n  model: {\n    event: 'change'\n  },\n  props: {\n    original: {\n      type: String\n    },\n    value: {\n      type: String,\n      required: true\n    },\n    language: {\n      type: String\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    amdRequire: {\n      type: Function\n    },\n    diffEditor: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['change', 'editorWillMount', 'editorDidMount', 'shortcutSave'],\n  setup(props, { emit }) {\n    const vueMonaco: { editor: any; monaco: any } = {\n      editor: null,\n      monaco: null\n    }\n    const monacoRef = ref(null)\n\n    const defaultOptions = {\n      autoIndent: true,\n      automaticLayout: true,\n      formatOnPaste: true,\n      roundedSelection: true,\n      tabSize: 2\n    }\n\n    const focus = () => vueMonaco.editor && vueMonaco.editor.focus()\n\n    const getMonaco = () => vueMonaco.monaco\n\n    const getEditor = () => vueMonaco.editor\n\n    const getModifiedEditor = () => (props.diffEditor ? vueMonaco.editor.getModifiedEditor() : vueMonaco.editor)\n\n    const getOriginalEditor = () => (props.diffEditor ? vueMonaco.editor.getOriginalEditor() : vueMonaco.editor)\n\n    const getModelMarkers = () => vueMonaco.monaco.editor.getModelMarkers()\n\n    const initMonaco = (monaco: any) => {\n      emit('editorWillMount', vueMonaco.monaco)\n\n      const options = {\n        ...defaultOptions,\n        value: props.value,\n        theme: globalMonacoEditorTheme.value,\n        language: props.language,\n        ...props.options\n      }\n\n      if (props.diffEditor) {\n        vueMonaco.editor = monaco.editor.createDiffEditor(monacoRef.value, options)\n        const originalModel = monaco.editor.createModel(props.original, props.language)\n        const modifiedModel = monaco.editor.createModel(props.value, props.language)\n\n        vueMonaco.editor.setModel({\n          original: originalModel,\n          modified: modifiedModel\n        })\n      } else {\n        vueMonaco.editor = monaco.editor.create(monacoRef.value, options)\n      }\n\n      vueMonaco.editor.addCommand(monacoEditor.KeyMod.CtrlCmd | monacoEditor.KeyCode.KeyS, () => {\n        // 快捷键 ctrl + s 或 command + s 保存\n        emit('shortcutSave')\n      })\n\n      const editor2 = getModifiedEditor()\n\n      editor2.onDidChangeModelContent((event: any) => {\n        const value = editor2.getValue()\n\n        if (props.value !== value) {\n          emit('change', value, event)\n        }\n      })\n\n      emit('editorDidMount', vueMonaco.editor)\n    }\n\n    onMounted(() => {\n      if (props.amdRequire) {\n        props.amdRequire(['vs/editor/editor.main'], () => {\n          vueMonaco.monaco = window.monaco\n          nextTick(() => {\n            initMonaco(window.monaco)\n          })\n        })\n      } else {\n        vueMonaco.monaco = monacoEditor\n        nextTick(() => {\n          initMonaco(vueMonaco.monaco)\n          vueMonaco.editor.addAction({\n            id: 'prettier',\n            label: 'Prettier',\n            precondition: null,\n            contextMenuGroupId: 'navigation',\n            run(editor: { getValue: () => any; setValue: (arg0: any) => void }) {\n              const currentValue = editor.getValue()\n              const newValue = formatString(currentValue, props.options.language)\n\n              if (newValue !== currentValue) {\n                editor.setValue(newValue)\n              }\n            }\n          })\n        })\n      }\n    })\n\n    onBeforeUnmount(() => {\n      if (vueMonaco.editor) {\n        vueMonaco.editor.dispose()\n      }\n    })\n\n    watch(\n      () => props.options,\n      (options) => {\n        if (vueMonaco.editor) {\n          const editor2 = getModifiedEditor()\n\n          editor2.updateOptions(options)\n        }\n      },\n      {\n        deep: true\n      }\n    )\n\n    watch(\n      () => props.value,\n      (newValue) => {\n        if (vueMonaco.editor) {\n          const editor = getModifiedEditor()\n\n          if (newValue !== editor.getValue()) {\n            editor.setValue(newValue)\n          }\n        }\n      }\n    )\n\n    watch(\n      () => props.original,\n      (newValue) => {\n        if (vueMonaco.editor && props.diffEditor) {\n          const editor = getOriginalEditor()\n\n          if (newValue !== editor.getValue()) {\n            editor.setValue(newValue)\n          }\n        }\n      }\n    )\n\n    watch(\n      () => props.language,\n      (newVal) => {\n        if (vueMonaco.editor) {\n          const editor = getModifiedEditor()\n          vueMonaco.monaco.editor.setModelLanguage(editor.getModel(), newVal)\n        }\n      }\n    )\n\n    watch(globalMonacoEditorTheme, (newVal) => {\n      if (vueMonaco.editor) {\n        vueMonaco.monaco.editor.setTheme(newVal)\n      }\n    })\n\n    return {\n      getMonaco,\n      getEditor,\n      getModifiedEditor,\n      getOriginalEditor,\n      initMonaco,\n      focus,\n      monacoRef,\n      getModelMarkers\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"editor-wrap\">\n    <slot :open=\"open\">\n      <div v-if=\"buttonShowContent\" :class=\"['full-width', { 'empty-color': value === '' }]\" @click=\"open\">\n        <span class=\"text-content text-ellipsis-multiple text-line-clamp\">{{\n          value === '' ? buttonLabel : value\n        }}</span>\n        <svg-icon class=\"edit-icon\" name=\"to-edit\"></svg-icon>\n      </div>\n      <tiny-button v-else class=\"edit-btn\" @click=\"open\">\n        <slot name=\"icon\"></slot>\n        <svg-icon\n          name=\"page-schema\"\n          v-if=\"[buttonText[locale], buttonText].includes(EDIT_CODE_TEXT)\"\n          class=\"edit-btn-icon\"\n        ></svg-icon>\n\n        {{ buttonLabel }}\n      </tiny-button>\n    </slot>\n    <tiny-dialog-box\n      v-model:visible=\"editorState.show\"\n      :title=\"titleLabel\"\n      width=\"50vw\"\n      class=\"meta-code-editor-dialog-box\"\n      append-to-body\n      :close-on-click-modal=\"false\"\n    >\n      <div class=\"source-code\">\n        <div v-if=\"editorTipsTitle\" class=\"header-tips-container\">\n          <span class=\"header-tips-title\" :title=\"editorTipsTitle\">{{ editorTipsTitle }}</span>\n        </div>\n        <div class=\"source-code-split-panel-wrapper\">\n          <tiny-split v-model=\"editorState.splitWidth\">\n            <template #left>\n              <monaco-editor\n                ref=\"editor\"\n                class=\"source-code-content\"\n                :value=\"value\"\n                :options=\"options\"\n                @editorDidMount=\"editorDidMount\"\n              ></monaco-editor>\n            </template>\n            <template #right>\n              <div v-if=\"editorTipsDemo\" class=\"source-code-split-panel-wrapper-right\">\n                <div class=\"header-tips-demo-content lowcode-scrollbar-thin\">\n                  <span>{{ $t('common.exampleCode') }}</span>\n                  <pre><code>{{ editorTipsDemo }}</code></pre>\n                </div>\n              </div>\n            </template>\n          </tiny-split>\n        </div>\n        <div v-if=\"showErrorMsg\" class=\"error-msg\">{{ editorState.errorMsg }}</div>\n      </div>\n      <template #footer>\n        <div class=\"btn-box\">\n          <tiny-button\n            v-if=\"language === 'json' && showFormatBtn\"\n            class=\"format-btn\"\n            plain\n            type=\"danger\"\n            @click=\"formatCode\"\n          >\n            {{ $t('common.format') }}\n          </tiny-button>\n          <div>\n            <tiny-button @click=\"close\">{{ $t('common.cancel') }}</tiny-button>\n            <tiny-button type=\"primary\" @click=\"save\">{{ $t('common.save') }}</tiny-button>\n          </div>\n        </div>\n      </template>\n    </tiny-dialog-box>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, nextTick, reactive, ref, watchEffect } from 'vue'\nimport { Button, DialogBox, Split } from '@opentiny/vue'\nimport VueMonaco from './VueMonaco.vue'\nimport { formatString } from '../js/ast'\nimport i18n from '../js/i18n'\n\nexport default {\n  components: {\n    TinySplit: Split,\n    MonacoEditor: VueMonaco,\n    TinyButton: Button,\n    TinyDialogBox: DialogBox\n  },\n  props: {\n    buttonText: {\n      type: [String, Object],\n      default: '编辑代码'\n    },\n    modelValue: {\n      type: [String, Object, Array],\n      default: ''\n    },\n    buttonShowContent: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: [String, Object],\n      default: '编辑代码'\n    },\n    language: {\n      type: String,\n      default: 'javascript'\n    },\n    dataType: String,\n    single: {\n      type: Boolean,\n      default: false\n    },\n    theme: {\n      type: String\n    },\n    showFormatBtn: {\n      type: Boolean,\n      default: true\n    },\n    showErrorMsg: {\n      type: Boolean,\n      default: true\n    },\n    tips: {\n      // 代码编辑器上方提示：title显示简短的文字描述，demo为显示的示例，点击 “展开示例” 可查看\n      type: Object,\n      default: () => ({ title: '', demo: '' })\n    }\n  },\n  emits: ['save', 'open', 'close'],\n  setup(props, { emit }) {\n    const { locale } = i18n.global\n    const editorState = reactive({\n      show: false,\n      created: false,\n      errorMsg: '',\n      showEditorDemo: false,\n      splitWidth: props.tips?.demo ? 0.7 : 1\n    })\n    const value = ref('')\n    const editor = ref<any>(null)\n\n    const buttonLabel = computed(() => props.buttonText?.[locale.value] ?? props.buttonText)\n\n    const titleLabel = computed(() => props.title?.[locale.value] ?? props.title)\n\n    const editorTipsTitle = computed(() => props.tips?.title?.[locale.value] ?? props.tips?.title)\n    const editorTipsDemo = computed(() => props.tips?.demo?.[locale.value] ?? props.tips?.demo)\n\n    const EDIT_CODE_TEXT = '编辑代码'\n\n    watchEffect(() => {\n      const { modelValue, dataType } = props\n      const val = dataType ? modelValue?.value || '' : modelValue\n      value.value = typeof val === 'string' ? val : JSON.stringify(val, null, 2)\n    })\n\n    // 关闭编辑器\n    const close = () => {\n      editorState.show = false\n      emit('close')\n    }\n\n    // 打开编辑器\n    const open = () => {\n      if (!editorState.created) {\n        editorState.created = true\n      }\n\n      editorState.show = true\n      emit('open')\n      nextTick(() => window.dispatchEvent(new Event('resize')))\n    }\n\n    const parseContent = (content = editor.value?.getEditor().getValue()) => {\n      let jsonData\n      if (props.language === 'json' && content) {\n        try {\n          jsonData = JSON.parse(content)\n          editorState.errorMsg = ''\n        } catch (error: any) {\n          editorState.errorMsg = error\n        }\n      }\n      return jsonData\n    }\n\n    const editorDidMount = (monacoInstance: { onDidChangeModelContent: any; getValue: () => any }) => {\n      monacoInstance.onDidChangeModelContent(() => {\n        const newValue = monacoInstance.getValue()\n        parseContent(newValue)\n      })\n    }\n\n    const formatCode = () => {\n      let jsonStr = editor.value?.getEditor().getValue()\n      if (jsonStr) {\n        try {\n          jsonStr = formatString(jsonStr, 'json')\n          editor.value?.getEditor().setValue(jsonStr)\n        } catch (error) {\n          /* empty */\n        }\n      }\n    }\n\n    // 保存编辑器内容\n    const save = () => {\n      const { language, dataType, single } = props\n      const content = formatString(editor.value?.getEditor().getValue(), language)\n      emit('save', { content })\n\n      if (!single) {\n        let value = content\n        const Func = Function\n        try {\n          if (dataType) {\n            value = value === '' ? '' : { type: dataType, value }\n          } else if (language === 'json') {\n            value = new Func(`return ${content}`)()\n          } else {\n            value = typeof props.modelValue === 'string' ? content : JSON.parse(content)\n          }\n        } catch (error) {\n          /* empty */\n        }\n\n        emit('update:modelValue', value)\n      }\n\n      close()\n    }\n\n    return {\n      save,\n      close,\n      open,\n      formatCode,\n      editorDidMount,\n      buttonLabel,\n      titleLabel,\n      editorTipsTitle,\n      editorTipsDemo,\n      editor,\n      editorState,\n      value,\n      EDIT_CODE_TEXT,\n      options: {\n        language: props.language,\n        minimap: {\n          enabled: false\n        }\n      },\n      locale\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.editor-wrap {\n  width: 100%;\n  display: flex;\n  text-align: center;\n  .tiny-button.tiny-button.edit-btn {\n    color: var(--te-component-common-text-color-primary);\n    border-color: var(--te-component-common-border-color);\n    flex: 1;\n    text-align: center;\n    margin-right: 0;\n    &:hover {\n      border-color: var(--te-component-common-border-color-active);\n    }\n    &:focus {\n      border-color: var(--te-component-common-border-color-active);\n    }\n    .edit-btn-icon {\n      font-size: 14px;\n      margin-right: 4px;\n      vertical-align: text-top;\n      color: var(--te-component-common-icon-color);\n    }\n  }\n}\n\n.btn-box {\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  &:has(.format-btn) {\n    justify-content: space-between;\n  }\n}\n\n.full-width {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 24px;\n  padding: 4px;\n  padding-left: 10px;\n  padding-right: 12px;\n  border: 1px solid var(--te-component-common-border-color);\n  border-radius: var(--te-base-border-radius-1);\n\n  &:hover {\n    border-color: var(--te-component-common-border-color-divider);\n  }\n\n  .text-content {\n    --ellipsis-line: 1;\n  }\n\n  &.empty-color {\n    color: var(--te-component-common-text-color-weaken);\n  }\n\n  .edit-icon {\n    margin-left: 4px;\n    flex-shrink: 0;\n    cursor: pointer;\n    color: var(--te-component-common-text-color-secondary);\n  }\n}\n\n.text-line-clamp {\n  -webkit-line-clamp: 1;\n}\n:deep(.tiny-dialog-box__header) {\n  padding-bottom: 15px;\n}\n\n:deep(.tiny-dialog-box__title) {\n  font-size: 14px;\n}\n\n.source-code {\n  height: 50vh;\n  display: flex;\n  flex-direction: column;\n\n  .header-tips-container {\n    display: flex;\n    height: 17px;\n    margin-bottom: 10px;\n    color: var(--te-component-common-text-color-primary);\n\n    .header-tips-title {\n      color: var(--te-component-common-text-color-weaken);\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n  }\n\n  .source-code-content {\n    overflow-y: auto;\n    height: 100%;\n    flex: 1;\n  }\n\n  .source-code-split-panel-wrapper {\n    height: 100%;\n\n    :deep(.tiny-split-trigger) {\n      width: 2px;\n    }\n\n    &-right {\n      padding: 16px 0 0 16px;\n\n      pre {\n        margin: 8px;\n      }\n\n      code {\n        font-family: Microsoft YaHei, Microsoft YaHei-Normal;\n        color: var(--te-component-common-text-color-weaken);\n      }\n    }\n  }\n\n  .error-msg {\n    margin-top: 8px;\n    color: var(--te-component-common-error-color);\n    font-weight: bold;\n  }\n}\n</style>\n","<template>\n  <div v-show=\"showDescription\" :class=\"[classObject, { border: border }]\">\n    <div class=\"content\">\n      <slot name=\"content\">\n        {{ text }}\n      </slot>\n    </div>\n    <div class=\"footer\">\n      <div>\n        <slot name=\"footer-left\">\n          <a :href=\"footer.href\" target=\"_blank\" class=\"footer-text link\">{{ footer.text }}</a>\n        </slot>\n      </div>\n      <div>\n        <slot name=\"footer-right\">\n          <div class=\"footer-text\" @click=\"closeDescription\">{{ footer.confirm }}</div>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, watchEffect, reactive } from 'vue'\n\nconst $constants = {\n  DESCRIPTION_TYPE: {\n    INFO: 'info',\n    WARNING: 'warning',\n    ERROR: 'error'\n  }\n}\n\nexport default {\n  props: {\n    type: {\n      type: String,\n      default: $constants.DESCRIPTION_TYPE.INFO\n    },\n    text: {\n      type: String,\n      default: ''\n    },\n    footer: {\n      type: Object,\n      default: () => ({})\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    visible: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, { emit }) {\n    const showDescription = ref(true)\n\n    const classObject = reactive({\n      wrapper: true,\n      warning: props.type === $constants.DESCRIPTION_TYPE.WARNING,\n      error: props.type === $constants.DESCRIPTION_TYPE.ERROR\n    })\n\n    const closeDescription = () => {\n      showDescription.value = false\n      emit('close')\n    }\n\n    watchEffect(() => {\n      classObject.warning = props.type === $constants.DESCRIPTION_TYPE.WARNING\n      classObject.error = props.type === $constants.DESCRIPTION_TYPE.ERROR\n      showDescription.value = props.visible\n    })\n\n    return {\n      showDescription,\n      classObject,\n      closeDescription\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.wrapper {\n  align-items: start;\n  border-left: 2px solid currentcolor;\n  border-radius: 0 3px 3px 0;\n  line-height: 1.4;\n  padding-block: 4px;\n  padding-inline: 11px 8px;\n  width: auto;\n  color: var(--te-component-common-text-color-secondary);\n  background-color: var(--te-component-meta-description-bg-color);\n  box-shadow: 0px 0px 6px 2px rgba(0, 0, 0, 0.3);\n  &.warning {\n    color: var(--te-component-common-warning-color);\n  }\n  &.error {\n    color: var(--te-component-common-error-color);\n  }\n\n  &.border {\n    border: 1px solid var(--te-component-common-border-color);\n    border-left: none;\n  }\n  .content {\n    color: var(--te-component-common-text-color-secondary);\n  }\n  .footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    color: var(--te-component-common-text-color-secondary);\n    .footer-text {\n      cursor: pointer;\n      &.link {\n        display: block;\n        color: var(--te-component-common-text-color-link);\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n    }\n    .footer-text:not(:empty) {\n      margin-top: 5px;\n    }\n  }\n}\n</style>\n","<template>\n  <meta-description class=\"block-guide\">\n    <template #content>\n      <div>{{ title }}</div>\n      <div>\n        <slot name=\"video\">请观看指引视频</slot>\n      </div>\n      <template v-if=\"isVscodeEnvironment\">\n        <a :href=\"src\" target=\"_blank\">\n          <img class=\"guide-video\" :src=\"cover\" :alt=\"cover\" />\n        </a>\n      </template>\n      <template v-else>\n        <video class=\"guide-video\" controls>\n          <source :src=\"src\" type=\"video/mp4\" />\n        </video>\n      </template>\n    </template>\n  </meta-description>\n</template>\n\n<script lang=\"ts\">\nimport MetaDescription from './MetaDescription.vue'\n\nexport default {\n  components: {\n    MetaDescription\n  },\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    src: {\n      type: String,\n      default: ''\n    },\n    cover: {\n      type: String,\n      default: ''\n    }\n  },\n  setup() {\n    return {\n      isVscodeEnvironment: window.vscodeBridge\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.block-guide {\n  color: var(--te-component-common-text-color-secondary);\n  line-height: 2;\n  border: none;\n  border-color: var(--te-component-common-text-color-link);\n  margin-bottom: 20px;\n  .guide-video {\n    width: 250px;\n    height: 150px;\n    margin-top: 8px;\n  }\n}\n</style>\n","<template>\n  <span class=\"public-icon\">\n    <component :is=\"name\" v-if=\"isTinyIcon\" />\n    <svg-icon v-else :name=\"name\" :class=\"svgClass\"></svg-icon>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { computed } from 'vue'\n\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: 'cross'\n    },\n    svgClass: {\n      type: String,\n      default: ''\n    }\n  },\n  setup(props) {\n    const isTinyIcon = computed(() => props.name.toLowerCase().indexOf('icon') === 0)\n\n    return {\n      isTinyIcon\n    }\n  }\n}\n</script>\n","<template>\n  <div :class=\"['editor-container', { 'editor-container-full': fullscreen }]\">\n    <slot v-if=\"fullscreen\" name=\"fullscreenHead\"></slot>\n    <div class=\"editor-container-content\">\n      <div class=\"toolbar\">\n        <div class=\"toolbar-start\">\n          <slot name=\"toolbarStart\"></slot>\n        </div>\n        <div :class=\"['buttons', { 'monaco-btn-fullscreen': fullscreen }]\" id=\"icon-buttons\">\n          <slot name=\"buttons\"></slot>\n          <tiny-tooltip\n            v-if=\"showFormatBtn && options.language === 'json'\"\n            content=\"格式化\"\n            placement=\"top\"\n            :open-delay=\"OPEN_DELAY.Default\"\n            effect=\"light\"\n          >\n            <public-icon name=\"json\" @click=\"formatCode\"></public-icon>\n          </tiny-tooltip>\n          <span v-if=\"showFullScreenBtn\">\n            <tiny-tooltip\n              v-if=\"!fullscreen\"\n              effect=\"light\"\n              content=\"全屏\"\n              placement=\"top\"\n              :open-delay=\"OPEN_DELAY.Default\"\n            >\n              <public-icon name=\"full-screen\" @click=\"switchFullScreen(true)\"></public-icon>\n            </tiny-tooltip>\n            <tiny-tooltip v-else content=\"退出全屏\" effect=\"light\" placement=\"top\" :open-delay=\"OPEN_DELAY.Default\">\n              <public-icon name=\"cancel-full-screen\" @click=\"switchFullScreen(false)\"></public-icon>\n            </tiny-tooltip>\n          </span>\n        </div>\n      </div>\n      <monaco-editor\n        ref=\"editor\"\n        class=\"editor\"\n        :value=\"value\"\n        :options=\"editorOptions\"\n        language=\"javascript\"\n        @editorDidMount=\"$emit('editorDidMount', $event)\"\n        @shortcutSave=\"$emit('shortcutSave', $event)\"\n        @change=\"$emit('change', $event)\"\n      ></monaco-editor>\n    </div>\n    <slot v-if=\"fullscreen\" name=\"fullscreenFooter\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, ref, onActivated, onDeactivated } from 'vue'\nimport { Tooltip } from '@opentiny/vue'\nimport PublicIcon from './PublicIcon.vue'\nimport VueMonaco from './VueMonaco.vue'\nimport { constants } from '@opentiny/tiny-engine-utils'\nconst { OPEN_DELAY } = constants\n\nexport default {\n  components: {\n    MonacoEditor: VueMonaco,\n    PublicIcon,\n    TinyTooltip: Tooltip\n  },\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    showFormatBtn: {\n      type: Boolean,\n      default: false\n    },\n    showFullScreenBtn: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['editorDidMount', 'change', 'fullscreenChange', 'shortcutSave'],\n  setup(props, { emit }) {\n    const editor = ref<any>(null)\n    const fullscreen = ref(false)\n    const editorOptions = computed(() => {\n      return {\n        language: 'javascript',\n        lineNumbers: false,\n        minimap: {\n          enabled: false\n        },\n        ...props.options\n      }\n    })\n\n    const getEditorValue = () => editor.value?.getEditor()?.getValue()\n\n    const getEditor = () => editor.value.getEditor()\n\n    const getValue = () => {\n      let value = getEditor().getValue()\n      const Func = Function\n      try {\n        value = new Func(`return ${value}`)()\n        if (value instanceof Date) {\n          return {\n            type: 'JSExpression',\n            value: getEditor().getValue()\n          }\n        }\n      } catch (error) {\n        // do nothing\n      }\n\n      return value\n    }\n\n    const formatCode = () => {\n      const value = getValue()\n      getEditor().setValue(typeof value === 'string' ? value.trim() : JSON.stringify(value, null, 2))\n    }\n\n    onActivated(() => {\n      editor.value.initMonaco(editor.value.getMonaco())\n    })\n\n    onDeactivated(() => {\n      editor.value.getEditor().dispose()\n    })\n\n    const switchFullScreen = (value: boolean) => {\n      fullscreen.value = value\n      emit('fullscreenChange', value)\n    }\n\n    return {\n      editorOptions,\n      editor,\n      getEditor,\n      getEditorValue,\n      fullscreen,\n      switchFullScreen,\n      getValue,\n      formatCode,\n      OPEN_DELAY\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.editor-container {\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n}\n\n.editor-container-full {\n  position: fixed;\n  top: var(--base-top-panel-height);\n  bottom: 0;\n  left: calc(var(--base-nav-panel-width) + var(--base-left-panel-width));\n  right: calc(var(--base-nav-panel-width) + var(--base-right-panel-width));\n  z-index: 100;\n  padding: 10px 16px 16px 16px;\n  background-color: var(--te-component-common-bg-color);\n  height: auto !important;\n}\n\n.toolbar {\n  display: flex;\n  margin-bottom: 4px;\n  justify-content: space-between;\n  align-items: center;\n\n  .buttons {\n    display: flex;\n    gap: 8px;\n    color: var(--te-component-common-text-color-primary);\n    cursor: pointer;\n  }\n  #icon-buttons {\n    :deep(.svg-icon) {\n      color: var(--te-component-common-text-color-secondary);\n    }\n  }\n  .monaco-btn-fullscreen {\n    display: flex;\n    margin-right: 20px;\n  }\n}\n\n.editor-container-content {\n  flex: 1;\n  overflow: hidden;\n}\n\n.editor {\n  flex: 1;\n  overflow: hidden;\n  border: 1px solid var(--te-component-common-border-color-divider);\n  border-radius: 6px;\n}\n</style>\n","<template>\n  <tiny-popover class=\"block-link-field\" popper-class=\"option-popper block-new-attr-popover\" :visible-arrow=\"false\">\n    <template #reference>\n      <div>\n        <span class=\"icon-wrap bind-prop\">\n          <svg-icon name=\"block-bind-prop\"></svg-icon>\n        </span>\n        <span class=\"icon-wrap add-prop\">\n          <svg-icon name=\"block-add-prop\"></svg-icon>\n        </span>\n      </div>\n    </template>\n    <ul class=\"context-menu\">\n      <li v-if=\"isLinked\" class=\"menu-item\" @click=\"unLink(data)\">取消关联</li>\n      <li v-else class=\"menu-item\" @click=\"addProperty(data)\">\n        <svg-icon name=\"plus-circle\"></svg-icon>\n        <span>创建并链接新属性</span>\n      </li>\n      <li class=\"menu-item\" @click=\"openBlockSetting\">\n        <svg-icon name=\"setting\"></svg-icon>\n        <span>打开属性面板</span>\n      </li>\n      <li v-for=\"item in properties\" :key=\"item.property\" class=\"menu-item property\">\n        <span>{{ item.property }}</span>\n        <span v-if=\"item.property !== data?.linked?.blockProperty\" class=\"link-item\" @click=\"editProperty(item)\">\n          关联\n        </span>\n      </li>\n    </ul>\n  </tiny-popover>\n</template>\n\n<script lang=\"jsx\">\nimport { reactive, computed } from 'vue'\nimport { extend } from '@opentiny/vue-renderless/common/object'\nimport { Input as TinyInput, Popover as TinyPopover } from '@opentiny/vue'\nimport { useLayout, useModal, useCanvas, useBlock, useHistory } from '@opentiny/tiny-engine-meta-register'\n\nexport default {\n  components: {\n    TinyPopover\n  },\n  props: {\n    data: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props) {\n    const { confirm } = useModal()\n    const { pageState, canvasApi, getSchema } = useCanvas()\n    const { addBlockProperty, removePropertyLink, getCurrentBlock, editBlockProperty } = useBlock()\n    const { PLUGIN_NAME, activePlugin } = useLayout()\n    const { schema } = getSchema?.() || {}\n\n    const state = reactive({\n      newPropertyName: ''\n    })\n\n    const properties = schema?.properties?.[0]?.content || []\n    const isLinked = computed(() => Boolean(props.data.linked))\n\n    const addProperty = (property) => {\n      state.newPropertyName = ''\n\n      confirm({\n        title: '属性名称',\n        message: {\n          render() {\n            return (\n              <div>\n                <TinyInput placeholder=\"请输入字段名称\" v-model={state.newPropertyName}></TinyInput>\n              </div>\n            )\n          }\n        },\n        exec() {\n          const {\n            schema: { id, componentName }\n          } = canvasApi.value?.getCurrent?.() || {}\n          const newProperty = extend(true, {}, property, {\n            property: state.newPropertyName || `${property.property}${id}`,\n            linked: {\n              id,\n              componentName,\n              property: property.property\n            }\n          })\n\n          addBlockProperty(newProperty, getCurrentBlock())\n          useHistory().addHistory()\n        }\n      })\n    }\n\n    const editProperty = (property) => {\n      const {\n        schema: { id, componentName }\n      } = canvasApi.value?.getCurrent?.() || {}\n\n      // 如果之前有关联关系，则需要去除关联\n      if (props.data?.linked) {\n        removePropertyLink({ componentProperty: props.data })\n      }\n\n      property.linked = {\n        id,\n        componentName,\n        property: props.data.property\n      }\n\n      const linked = props.data.linked || {}\n      Object.assign(linked, { ...property.linked, blockProperty: property.property })\n      Object.assign(props.data, { linked })\n\n      editBlockProperty(property, props.data)\n      useHistory().addHistory()\n    }\n\n    const openBlockSetting = () => {\n      activePlugin(PLUGIN_NAME.BlockManage).then((api) => {\n        api.openSettingPanel({ item: getCurrentBlock() })\n      })\n    }\n\n    const unLink = (property) => {\n      confirm({\n        title: '提示',\n        message: '您确定要取消关联吗?',\n        exec: () => {\n          const componentId = pageState?.currentSchema?.id\n\n          if (componentId) {\n            removePropertyLink({ componentProperty: property })\n            useHistory().addHistory()\n          }\n        }\n      })\n    }\n\n    return {\n      state,\n      isLinked,\n      unLink,\n      addProperty,\n      editProperty,\n      properties,\n      openBlockSetting\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.icon-wrap {\n  position: absolute;\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  color: var(--te-component-common-block-add-text-color);\n\n  .svg-icon {\n    font-size: 14px;\n  }\n\n  &:hover .svg-icon {\n    transform: scale(1.25);\n  }\n\n  &.bind-prop {\n    z-index: 30;\n    &:hover {\n      z-index: 10;\n    }\n  }\n\n  &.add-prop {\n    z-index: 20;\n    &:hover {\n      z-index: 30;\n    }\n  }\n}\n\n.context-menu {\n  width: 200px;\n  padding: 8px 0;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n  .menu-item {\n    line-height: 18px;\n    color: var(--te-component-common-text-color-primary);\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    padding: 4px 12px;\n    cursor: pointer;\n    &:hover {\n      background: var(--te-component-common-bg-color-hover);\n    }\n    &.property {\n      justify-content: space-between;\n    }\n    .link-item {\n      cursor: pointer;\n      color: var(--te-component-common-text-color-emphasize);\n    }\n  }\n\n  .svg-icon {\n    font-size: 16px;\n  }\n}\n</style>\n<style lang=\"less\">\n.tiny-popover.tiny-popper.tiny-popper.block-new-attr-popover[x-placement] {\n  // 这里不知为啥要添加 max-height，后续确认无用可删除\n  max-height: 65vh;\n  padding: 0;\n}\n</style>\n","/**\n* @vue/shared v3.4.29\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str, expectsLowerCase) {\n  const set = new Set(str.split(\",\"));\n  return expectsLowerCase ? (val) => set.has(val.toLowerCase()) : (val) => set.has(val);\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction((str) => {\n  const s = str ? `on${capitalize(str)}` : ``;\n  return s;\n});\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"HOISTED\": -1,\n  \"-1\": \"HOISTED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  let ret = \"\";\n  if (!styles || isString(styles)) {\n    return ret;\n  }\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (val && val.__v_isRef) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","<template>\n  <tiny-popover popper-class=\"quick\" :visible-arrow=\"false\">\n    <template #reference>\n      <span class=\"link-icon\">+</span>\n    </template>\n    <ul class=\"context-menu\">\n      <li v-if=\"isLinked\" class=\"menu-item\" @click=\"unLink(data.linkedEventName)\">取消关联</li>\n      <li v-else class=\"menu-item add-event\" @click=\"addEvent(data)\">\n        <svg-icon name=\"plus-circle\"></svg-icon> 新建事件\n      </li>\n      <li class=\"menu-item\" @click=\"openBlockSetting\">管理事件</li>\n      <li v-for=\"item in eventsList\" :key=\"item.name\" class=\"menu-item\">\n        {{ item.name }}\n        <span v-if=\"item.name !== data?.linkedEventName\" class=\"link-item\" @click=\"editEvent(item, data)\">关联</span>\n      </li>\n    </ul>\n  </tiny-popover>\n</template>\n\n<script lang=\"jsx\">\nimport { reactive, computed } from 'vue'\nimport { capitalize } from '@vue/shared'\nimport { extend } from '@opentiny/vue-renderless/common/object'\nimport { Input as TinyInput, Form as TinyForm, FormItem as TinyFormItem, Popover as TinyPopover } from '@opentiny/vue'\nimport { useLayout, useModal, useCanvas, useBlock } from '@opentiny/tiny-engine-meta-register'\n\nexport default {\n  components: {\n    TinyPopover\n  },\n  props: {\n    data: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props) {\n    const { confirm } = useModal()\n    const { pageState } = useCanvas()\n    const { addBlockEvent, removeEventLink, getCurrentBlock, appendEventEmit } = useBlock()\n    const { PLUGIN_NAME, activePlugin } = useLayout()\n\n    const { schema } = useCanvas()?.getSchema?.() || {}\n    const events = schema?.events || []\n    const eventsList = Object.entries(events).map(([key, value]) => {\n      return {\n        name: key,\n        ...value\n      }\n    })\n    const isLinked = computed(() => Boolean(props.data.linked))\n\n    const addEvent = (data) => {\n      const formData = reactive({\n        name: ''\n      })\n      const pattern = /^[A-Za-z]\\w*?\\w$/\n      const rules = {\n        name: [{ pattern, message: '首字符为字母, 其它是单字字符' }]\n      }\n\n      let name = ''\n\n      const changeName = (value) => {\n        name = value\n      }\n\n      confirm({\n        title: '新建区块事件',\n        status: 'custom',\n        message: {\n          render() {\n            return (\n              <div>\n                <div>此新区块事件将自动链接到此组件事件</div>\n                <br />\n                <TinyForm show-message label-width=\"0\" model={formData} rules={rules}>\n                  <TinyFormItem prop=\"name\">\n                    <TinyInput v-model={formData.name} placeholder=\"请输入事件名\" onChange={changeName}></TinyInput>\n                  </TinyFormItem>\n                </TinyForm>\n              </div>\n            )\n          }\n        },\n        exec() {\n          if (!pattern.test(name)) {\n            return\n          }\n\n          const {\n            schema: { id, componentName }\n          } = useCanvas().canvasApi.value?.getCurrent?.() || {}\n\n          const newEvent = extend(true, {}, data.metaEvent, {\n            linked: {\n              id,\n              componentName,\n              event: data.eventName\n            }\n          })\n\n          addBlockEvent(\n            {\n              name: `on${capitalize(name.replace(/^on/i, ''))}`,\n              event: newEvent\n            },\n            getCurrentBlock()\n          )\n\n          appendEventEmit({\n            eventName: name,\n            functionName: data.ref\n          })\n        }\n      })\n    }\n\n    const editEvent = (item, data) => {\n      const {\n        schema: { id, componentName }\n      } = useCanvas().canvasApi.value?.getCurrent?.() || {}\n\n      const oldEventName = data.linkedEventName\n\n      if (oldEventName) {\n        removeEventLink(data.linkedEventName)\n      }\n\n      const newEvent = extend(true, {}, data.metaEvent, {\n        linked: {\n          id,\n          componentName,\n          event: data.eventName\n        }\n      })\n\n      addBlockEvent(\n        {\n          name: item.name,\n          event: newEvent\n        },\n        getCurrentBlock()\n      )\n\n      appendEventEmit({\n        eventName: item.name,\n        functionName: data.ref\n      })\n    }\n\n    const openBlockSetting = () => {\n      activePlugin(PLUGIN_NAME.BlockManage).then((api) => {\n        api.openSettingPanel({ item: getCurrentBlock() })\n      })\n    }\n\n    const unLink = (linkedEventName) => {\n      confirm({\n        title: '提示',\n        message: '您确定要取消关联吗?',\n        exec: () => {\n          const componentId = pageState?.currentSchema?.id\n\n          if (componentId) {\n            removeEventLink(linkedEventName)\n          }\n        }\n      })\n    }\n\n    return {\n      isLinked,\n      unLink,\n      addEvent,\n      editEvent,\n      eventsList,\n      openBlockSetting\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.link-icon {\n  padding: 0 3px;\n  margin: 0 5px;\n  color: #fff;\n  border-radius: 50%;\n  line-height: 14px;\n  background-color: var(--te-component-common-block-add-text-color);\n  &:hover {\n    cursor: pointer;\n    transform: scale(1.3);\n  }\n}\n\n.context-menu {\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  .menu-item {\n    font-size: 12px;\n    display: flex;\n    justify-content: space-between;\n    color: var(--te-component-common-text-color-primary);\n    padding: 4px 16px;\n    margin: 0 -16px;\n    &:hover {\n      color: var(--te-component-common-text-color-primary);\n      background: var(--te-component-common-bg-color-hover);\n    }\n\n    .link-item {\n      cursor: pointer;\n      background-color: var(--te-component-common-text-color-checked);\n      padding: 2px 5px;\n    }\n    &.add-event {\n      justify-content: start;\n      gap: 4px;\n    }\n  }\n}\n</style>\n","<template>\n  <meta-description class=\"description\">\n    <template #content>\n      <div class=\"setting-block\" @click=\"openBlockSetting\">\n        <svg-icon name=\"block-add-prop\"></svg-icon>\n        <span>设置区块暴露属性</span>\n      </div>\n    </template>\n  </meta-description>\n</template>\n\n<script lang=\"ts\">\nimport { useLayout, useBlock } from '@opentiny/tiny-engine-meta-register'\nimport MetaDescription from './MetaDescription.vue'\n\nexport default {\n  components: {\n    MetaDescription\n  },\n  setup() {\n    const { getCurrentBlock } = useBlock()\n    const { PLUGIN_NAME, activePlugin } = useLayout()\n\n    const openBlockSetting = () => {\n      activePlugin(PLUGIN_NAME.BlockManage).then((api: { openSettingPanel: (arg0: { item: any }) => void }) => {\n        api.openSettingPanel({ item: getCurrentBlock() })\n      })\n    }\n\n    return {\n      openBlockSetting\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.description {\n  font-size: 12px;\n\n  &.wrapper {\n    height: 32px;\n    padding: 0 12px;\n    border-left: 0;\n    box-shadow: none;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    background-color: var(--te-component-block-bg-color);\n  }\n\n  .setting-block {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    cursor: pointer;\n    .svg-icon {\n      color: var(--te-component-common-block-add-text-color);\n    }\n  }\n\n  .svg-icon {\n    font-size: 16px;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"showCheckbox && displayTable\" class=\"table-selection\">\n    <tiny-checkbox :modelValue=\"props.checked\" @change=\"handleCheck\"></tiny-checkbox>\n  </div>\n  <div class=\"block-item-img\">\n    <img\n      v-if=\"item.screenshot\"\n      class=\"item-image\"\n      :src=\"item.screenshot || defaultImg\"\n      draggable=\"false\"\n      @error=\"$event.target.src = defaultImg\"\n    />\n    <svg-icon v-else class=\"item-image item-default-img\" name=\"block-default\"></svg-icon>\n    <div v-if=\"showCheckbox && !displayTable\" class=\"top-left\">\n      <tiny-checkbox :modelValue=\"props.checked\" @change=\"handleCheck\"></tiny-checkbox>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Checkbox as TinyCheckbox } from '@opentiny/vue'\nimport { defineEmits, defineProps } from 'vue'\n\nconst props = defineProps({\n  item: {\n    type: Object,\n    default: () => ({})\n  },\n  checked: {\n    type: Boolean,\n    default: false\n  },\n  // 是否显示多选框\n  showCheckbox: {\n    type: Boolean,\n    default: false\n  },\n  displayTable: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['check'])\n\nconst defaultImg =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA11JREFUaEPtmUvIVVUYhp83CIJKpIsOEsSBAxEiEAwqRDGDBCmRkCwhwQQbSANDEbwNgvgzxEIUCwRBEB2EgiQR5MA/RcHImRBKkYhYaAliULzxwT6y3O1zzv735Rx+PN/srP1d3ve7rLX2PmKSiyY5fkYEhl3BUQVGFaiZgQdayPZTwOvA7Jp+2zI/C5yV9FcnQJ7AB8DetqI35HdM0qZuBL4HFjYUqC03pyUteigIPMC0rXSW8Ws77YzSFRgRKJPdMjqtVcD2DOC6pH/LAKmq0zgB2+uAXcCTwD1gs6Q9VQH2s2uDwO/A00ngv4EnJP3TD0zneZaEt4GvJB3uZdcoAdsBPAjkZaakX8sQsP0ecDDR/UhSVLRQGiUQEWzfAKYl0e4CU8rMgu0XgXMFSNdJ+rKIQRsE1gBjwDPAbWCLpH39sm97CvADMLeL7kpJR/PPGieQ9PGzkm72A57oB7i3Ev1vsstjZylmaJmkU6nP1giUBZ613U5gW2LzGzAHiEE+kKz/AbwhaTwhPtyT2PZK4EiO8MuSop1iprYAHyfPrwDLJV3Kng+PgO3ngZ9y4NdL2p9rk93Ah8naj8AKSVdbayHb0c+PASck/VkwfI8CASQd2v2S1nfZbeI8WJU8O53NzLHkmt/MZc72IWB1Fuxi9Lekk7ms5oe27wXR9rfAksTPCWAqsCBbq0/A9qfAxoIsfgJ8Lum67e3AjkQnzo55kq71Gn7bATZ6/oWc7fRGCNgO4EGgm5wJEkB+P18qKbbNvmI73smDxHMFytUrYDtaJlonldgeg9TjPZBtlPRZX+SJgu2XgJiBmKNUqhGw/RpwPBvajsMvJG2wvTQjcf9dNYkYl7X3JwK+o2v7TeDrnO0FSfM7a/mvEoX7bbYVxjDNTJwdlvRuEix2o61xtQYeydbHJb1SBXziN8inB93EKmA7hifA32cNnJIU34/+J7ajCu8AccWOgb5ch0DY2o6DbVbmZ8IEAvyyBMR54FVJd+oCK2tf+SADfgbWJoHid4D/pWzwJvSqEgiQac/fAhZLipN1oFKVQB7kEknfDRR5FqwJAoUvGoMi0wSBQWEtE6f0LlTG2TB0ehKY9J/XJ/cfHMPoh7oxR/9S1s1gXftRBepmsK79qAJ1M1jX/j/bzulAKB9d1wAAAABJRU5ErkJggg=='\n\nconst handleCheck = (v: any) => {\n  emit('check', v)\n}\n</script>\n\n<style lang=\"less\" scoped>\n.table-selection {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.block-item-img {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  flex: 1;\n  border-radius: 4px;\n  background-color: var(--te-component-block-bg-color);\n\n  .top-left {\n    display: flex;\n    position: absolute;\n    top: 4px;\n    right: 4px;\n  }\n}\n\n:deep(.tiny-checkbox__label) {\n  padding: 0;\n}\n\n.item-image {\n  width: 84px;\n  height: 48px;\n  overflow: hidden;\n  object-fit: cover;\n}\n.item-default-img {\n  width: 84px;\n  height: 50px;\n  color: var(--te-component-common-bg-color);\n}\n\n.block-item-small-list .item-image {\n  width: 30px;\n  height: 30px;\n  min-width: 30px;\n}\n</style>\n","<template>\n  <div v-if=\"isShow\" class=\"empty-wrap\">\n    <svg-icon class=\"empty-icon\" name=\"empty\"></svg-icon>\n    <p class=\"empty-text\">暂无数据</p>\n  </div>\n</template>\n<script lang=\"ts\">\nexport default {\n  props: {\n    /**\n     * 控制搜索空数据显示\n     */\n    isShow: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.empty-wrap {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 56px;\n  .empty-icon {\n    width: 80px;\n    height: 80px;\n  }\n  .empty-text {\n    font-size: 12px;\n    color: var(--te-component-common-text-color-weaken);\n  }\n}\n</style>\n","<template>\n  <tiny-checkbox class=\"block-select-all\" :indeterminate=\"isIndeterminate\" v-model=\"selectedAll\">\n    {{ hiddenLabel ? '' : '全选' }}\n  </tiny-checkbox>\n</template>\n\n<script setup lang=\"ts\">\nimport { Checkbox as TinyCheckbox } from '@opentiny/vue'\nimport { computed, defineEmits, defineProps } from 'vue'\n\nconst props = defineProps({\n  allItems: {\n    type: Array,\n    default: () => []\n  },\n  selected: {\n    type: Array,\n    default: () => []\n  },\n  hiddenLabel: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['selectAll'])\n\nconst filterList = computed(() => props.allItems.filter((item) => props.selected.some((i) => item.id === i.id)))\n\nconst selectNotSearchList = computed(() =>\n  props.selected.filter((item) => !props.allItems.some((i) => item.id === i.id))\n)\n\nconst selectedAll = computed({\n  get() {\n    return props.allItems.length > 0 && props.allItems.length === filterList.value.length\n  },\n  set(value) {\n    if (value) {\n      emit('selectAll', props.allItems.concat(selectNotSearchList.value))\n    } else {\n      if (selectNotSearchList.value.length) {\n        emit('selectAll', selectNotSearchList.value)\n        return\n      }\n      emit('selectAll', null)\n    }\n  }\n})\n\nconst isIndeterminate = computed(() => filterList.value.length > 0 && filterList.value.length !== props.allItems.length)\n</script>\n","<template>\n  <div v-if=\"blockStyle === BlockStyles.Mini && showCheckbox\" class=\"header\">\n    <div class=\"col-checkbox\">\n      <select-all :allItems=\"data\" :selected=\"checked\" :hidden-label=\"true\" @select-all=\"handleSelectAll\"></select-all>\n    </div>\n    <div class=\"col-name\">区块名称</div>\n    <div class=\"col-time\">创建时间</div>\n    <div class=\"col-created-by\">创建人</div>\n  </div>\n  <ul\n    v-if=\"state.data.length || showAddButton\"\n    :class=\"[\n      'block-list',\n      'lowcode-scrollbar',\n      { 'is-small-list': blockStyle === BlockStyles.Mini },\n      { isShortcutPanel }\n    ]\"\n    @mouseleave=\"state.hover = false\"\n  >\n    <li v-if=\"showAddButton\" class=\"block-item block-plus\" @click=\"$emit('add')\">\n      <span class=\"block-plus-icon\"><svg-icon name=\"add\"></svg-icon></span>\n      <div class=\"item-text\">添加区块</div>\n    </li>\n    <li\n      v-for=\"(item, index) in state.data\"\n      :key=\"item.blockName\"\n      :draggable=\"!isBlockManage && showSettingIcon\"\n      :class=\"[\n        'block-item',\n        { 'is-disabled': showBlockDetail },\n        { 'block-item-small-list': blockStyle === BlockStyles.Mini }\n      ]\"\n      :title=\"getTitle(item)\"\n      @mousedown.stop.left=\"blockClick({ event: $event, item, index })\"\n      @mouseover.stop=\"openBlockShotPanel(item, $event)\"\n      @mouseleave=\"handleBlockItemLeave\"\n    >\n      <slot :data=\"item\">\n        <plugin-block-item-img\n          :item=\"item\"\n          :show-checkbox=\"showCheckbox\"\n          :checked=\"checked.some((block) => block.id === item.id)\"\n          :display-table=\"blockStyle === BlockStyles.Mini\"\n        ></plugin-block-item-img>\n        <div class=\"item-text\">\n          <div class=\"item-name\">{{ item.name_cn || item.label || item.content?.fileName }}</div>\n          <div v-if=\"blockStyle === BlockStyles.List\" class=\"item-description\">{{ item.description }}</div>\n        </div>\n\n        <div v-if=\"isBlockManage && !item.is_published\" class=\"publish-flag\">未发布</div>\n\n        <div v-if=\"isBlockManage\" class=\"block-detail\">\n          <div class=\"setting-menu\" @mouseover.stop=\"handleSettingMouseOver\" @mouseleave=\"handleBlockItemLeave\">\n            <ul class=\"list\">\n              <li class=\"list-item\" @mousedown.stop.left=\"editBlock({ event: $event, item, index })\">\n                <svg-button class=\"list-item-svg\" :hoverBgColor=\"false\" name=\"to-edit\"> </svg-button>\n              </li>\n              <li\n                class=\"list-item\"\n                @mouseover.stop=\"iconSettingMove\"\n                @mousedown.stop.prevent=\"iconClick({ event: $event, item, index })\"\n              >\n                <svg-button class=\"list-item-svg\" :hoverBgColor=\"false\" name=\"setting\"> </svg-button>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div\n          v-else-if=\"showSettingIcon\"\n          :class=\"['block-setting', { 'is-current-visible-icon': state.hoverItemId === item.id }]\"\n          title=\" \"\n        >\n          <div class=\"setting-menu\" @mouseover.stop=\"handleSettingMouseOver\" @mouseleave=\"handleBlockItemLeave\">\n            <ul class=\"list\">\n              <tiny-tooltip content=\"版本列表\" placement=\"top\" effect=\"light\">\n                <li class=\"list-item\" @click.stop=\"$emit('openVersionPanel', { item, index })\">\n                  <svg-button class=\"list-item-svg\" :hoverBgColor=\"false\" name=\"versions\"> </svg-button>\n                </li>\n              </tiny-tooltip>\n              <tiny-tooltip content=\"移除\" placement=\"top\" effect=\"light\">\n                <li class=\"list-item\" @click.stop=\"$emit('deleteBlock', item)\">\n                  <svg-button class=\"list-item-svg\" :hoverBgColor=\"false\" name=\"remove\"> </svg-button>\n                </li>\n              </tiny-tooltip>\n            </ul>\n          </div>\n        </div>\n      </slot>\n    </li>\n    <div v-if=\"showBlockShot && state.hover && state.currentBlock.screenshot\" class=\"block-shortcut\">\n      <div class=\"block-shortcut-title\">{{ state.currentBlock.label }}预览图</div>\n      <div v-if=\"state.currentBlock.description\" class=\"block-shortcut-description\">\n        {{ state.currentBlock.description }}\n      </div>\n      <div class=\"block-shortcut-image-wrapper\">\n        <img\n          class=\"block-shortcut-image\"\n          :src=\"state.currentBlock.screenshot || defaultImg\"\n          @error=\"$event.target.src = defaultImg\"\n        />\n      </div>\n    </div>\n  </ul>\n  <search-empty :isShow=\"!state.data.length && !showAddButton\" />\n</template>\n\n<script>\nimport { computed, watch, inject, reactive } from 'vue'\nimport { format } from '@opentiny/vue-renderless/common/date'\nimport { Tooltip } from '@opentiny/vue'\nimport PluginBlockItemImg from './PluginBlockItemImg.vue'\nimport SearchEmpty from './SearchEmpty.vue'\nimport SvgButton from './SvgButton.vue'\nimport SelectAll from './SelectAll.vue'\n\nconst BlockStyles = {\n  Default: 'default',\n  Mini: 'mini',\n  List: 'list'\n}\n\nconst defaultImg =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA11JREFUaEPtmUvIVVUYhp83CIJKpIsOEsSBAxEiEAwqRDGDBCmRkCwhwQQbSANDEbwNgvgzxEIUCwRBEB2EgiQR5MA/RcHImRBKkYhYaAliULzxwT6y3O1zzv735Rx+PN/srP1d3ve7rLX2PmKSiyY5fkYEhl3BUQVGFaiZgQdayPZTwOvA7Jp+2zI/C5yV9FcnQJ7AB8DetqI35HdM0qZuBL4HFjYUqC03pyUteigIPMC0rXSW8Ws77YzSFRgRKJPdMjqtVcD2DOC6pH/LAKmq0zgB2+uAXcCTwD1gs6Q9VQH2s2uDwO/A00ngv4EnJP3TD0zneZaEt4GvJB3uZdcoAdsBPAjkZaakX8sQsP0ecDDR/UhSVLRQGiUQEWzfAKYl0e4CU8rMgu0XgXMFSNdJ+rKIQRsE1gBjwDPAbWCLpH39sm97CvADMLeL7kpJR/PPGieQ9PGzkm72A57oB7i3Ev1vsstjZylmaJmkU6nP1giUBZ613U5gW2LzGzAHiEE+kKz/AbwhaTwhPtyT2PZK4EiO8MuSop1iprYAHyfPrwDLJV3Kng+PgO3ngZ9y4NdL2p9rk93Ah8naj8AKSVdbayHb0c+PASck/VkwfI8CASQd2v2S1nfZbeI8WJU8O53NzLHkmt/MZc72IWB1Fuxi9Lekk7ms5oe27wXR9rfAksTPCWAqsCBbq0/A9qfAxoIsfgJ8Lum67e3AjkQnzo55kq71Gn7bATZ6/oWc7fRGCNgO4EGgm5wJEkB+P18qKbbNvmI73smDxHMFytUrYDtaJlonldgeg9TjPZBtlPRZX+SJgu2XgJiBmKNUqhGw/RpwPBvajsMvJG2wvTQjcf9dNYkYl7X3JwK+o2v7TeDrnO0FSfM7a/mvEoX7bbYVxjDNTJwdlvRuEix2o61xtQYeydbHJb1SBXziN8inB93EKmA7hifA32cNnJIU34/+J7ajCu8AccWOgb5ch0DY2o6DbVbmZ8IEAvyyBMR54FVJd+oCK2tf+SADfgbWJoHid4D/pWzwJvSqEgiQac/fAhZLipN1oFKVQB7kEknfDRR5FqwJAoUvGoMi0wSBQWEtE6f0LlTG2TB0ehKY9J/XJ/cfHMPoh7oxR/9S1s1gXftRBepmsK79qAJ1M1jX/j/bzulAKB9d1wAAAABJRU5ErkJggg=='\n\nexport default {\n  components: {\n    TinyTooltip: Tooltip,\n    PluginBlockItemImg,\n    SvgButton,\n    SearchEmpty,\n    SelectAll\n  },\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    /*\n      列表样式，可选择为 default || list || mini  默认值为 default\n    */\n    blockStyle: {\n      type: String,\n      default: BlockStyles.Default\n    },\n    /*\n    用于区分是否是区块管理侧的列表\n    */\n    isBlockManage: {\n      type: Boolean,\n      default: false\n    },\n    /*\n      是否显示新增按钮\n    */\n    showAddButton: {\n      type: Boolean,\n      default: false\n    },\n    /*\n      是否显示区块详情弹框\n    */\n    showBlockDetail: {\n      type: Boolean,\n      default: false\n    },\n    /*\n      是否显示快照\n    */\n    showBlockShot: {\n      type: Boolean,\n      default: false\n    },\n    /*\n    默认 ICON 的提示文字\n    */\n    defaultIconTip: {\n      type: String,\n      default: ''\n    },\n    // 是否显示历史备份按钮\n    showSettingIcon: {\n      type: Boolean,\n      default: true\n    },\n    // 外部传入的区块信息：不通过区块列表里点击展示，而是从外面直接调起区块面板展示的区块。\n    externalBlock: {\n      type: Object,\n      default: null\n    },\n    // 是否显示多选框\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    },\n    // 选中的区块\n    checked: {\n      type: Array,\n      default: () => []\n    },\n    gridColumns: {\n      type: Number,\n      default: 2\n    }\n  },\n  emits: ['click', 'iconClick', 'add', 'deleteBlock', 'openVersionPanel', 'editBlock', 'checkAll', 'cancelCheckAll'],\n  setup(props, { emit }) {\n    const panelState = inject('panelState', {})\n    const blockUsers = inject('blockUsers', [])\n    const state = reactive({\n      activeIndex: -1,\n      data: computed(() => props.data),\n      top: 0,\n      hover: false,\n      currentBlock: {},\n      hoverItemId: null,\n      currentShowMenuId: null,\n      timeoutId: null\n    })\n\n    const users = computed(() => blockUsers?.value || [])\n\n    const getParentNode = (el) => {\n      while (el.nodeName !== 'LI') {\n        el = el.parentNode\n      }\n      return el\n    }\n\n    const openBlockShotPanel = (item, event) => {\n      state.currentBlock = item\n\n      state.top = `${getParentNode(event.target).getBoundingClientRect().top}px`\n\n      state.hover = true\n      state.hoverItemId = item.id\n\n      if (state.currentShowMenuId === item.id) {\n        clearTimeout(state.timeoutId)\n      }\n    }\n\n    const editBlock = ({ event, item, index }) => {\n      state.activeIndex = index\n\n      emit('editBlock', item)\n      // 点击区块并不打开设置面板\n      emit('iconClick', { event, item, index, isOpen: false })\n    }\n\n    const blockClick = ({ event, item, index }) => {\n      if (props.isBlockManage) {\n        editBlock({ event, item, index })\n      }\n\n      emit('click', item)\n    }\n\n    const iconClick = ({ event, item, index }) => {\n      state.activeIndex = index\n\n      emit('iconClick', { event, item, index, isOpen: true })\n    }\n\n    // 清除当前选择状态\n    const clearActive = () => {\n      state.activeIndex = -1\n    }\n\n    const iconSettingMove = () => {\n      state.hover = false\n    }\n\n    const getTitle = (item) => (item.groupName ? `分组: ${item.groupName + '\\n'}` : '') + (item.label || item.blockName)\n\n    const handleBlockItemLeave = () => {\n      state.timeoutId = setTimeout(() => {\n        state.hoverItemId = null\n        state.currentShowMenuId = null\n      }, 200)\n    }\n\n    const handleSettingMouseOver = () => {\n      clearTimeout(state.timeoutId)\n    }\n\n    const handleShowVersionMenu = (item) => {\n      if (state.currentShowMenuId) {\n        state.currentShowMenuId = null\n      } else {\n        state.currentShowMenuId = item.id\n      }\n    }\n\n    // 若是存在外部区块：即不通过区块列表里点击展示，而是从外面直接调起区块面板展示的区块，\n    // 那么当前高亮的所选中的区块需要切换成外部区块\n    const changeActiveIndex = (blockList, block) => {\n      const blockIndex = blockList.findIndex((item) => item.id === block.id)\n      state.activeIndex = blockIndex\n    }\n\n    watch(\n      () => props.data,\n      async (blockList) => {\n        if (blockList && props.externalBlock) {\n          changeActiveIndex(blockList, props.externalBlock)\n        }\n      }\n    )\n\n    watch(\n      () => props.externalBlock,\n      async (block) => {\n        if (block && state.data?.length) {\n          changeActiveIndex(state.data, block)\n        }\n      }\n    )\n\n    const handleSelectAll = (items) => {\n      if (Array.isArray(items)) {\n        emit('checkAll', items)\n      } else {\n        emit('cancelCheckAll')\n      }\n    }\n\n    return {\n      BlockStyles,\n      isShortcutPanel: panelState.isShortcutPanel,\n      state,\n      users,\n      getTitle,\n      blockClick,\n      iconClick,\n      clearActive,\n      openBlockShotPanel,\n      iconSettingMove,\n      defaultImg,\n      handleBlockItemLeave,\n      handleSettingMouseOver,\n      handleShowVersionMenu,\n      editBlock,\n      format,\n      handleSelectAll\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.block-shortcut {\n  position: fixed;\n  z-index: 9999;\n  top: 50px;\n  left: calc(var(--base-left-panel-width) + var(--base-nav-panel-width) + 10px);\n  max-width: 500px;\n  max-height: 136px;\n  padding: 12px;\n  background: var(--te-component-common-bg-color);\n  border-radius: 5px;\n  border: 1px solid var(--te-component-common-border-color);\n  top: v-bind('state.top');\n  .block-shortcut-title {\n    color: var(--te-component-common-text-color-primary);\n    font-weight: 600;\n    margin-bottom: 8px;\n  }\n  .block-shortcut-description {\n    color: var(--te-component-common-text-color-secondary);\n    margin-bottom: 20px;\n    font-size: 12px;\n  }\n  .block-shortcut-image-wrapper {\n    height: 80px;\n    overflow: hidden;\n  }\n  .block-shortcut-image {\n    width: 100%;\n    object-fit: contain;\n  }\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  height: 24px;\n  background-color: var(--te-component-block-bg-color);\n  color: var(--te-component-common-text-color-secondary);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n\n  & > div {\n    padding: 0 8px;\n    position: relative;\n  }\n\n  .col-time::before,\n  .col-created-by::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 1px;\n    height: 10px;\n    background-color: var(--te-component-common-border-color);\n  }\n}\n\n.col-checkbox {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.col-checkbox,\n.block-item-small-list:deep(.table-selection) {\n  width: 40px;\n}\n.col-checkbox:deep(.tiny-checkbox__label) {\n  padding: 0;\n}\n.col-name {\n  width: 35%;\n}\n.col-time {\n  width: 35%;\n}\n.col-created-by {\n  flex: 1;\n}\n\n.block-list {\n  display: grid;\n  grid-template-columns: repeat(v-bind('gridColumns'), 1fr);\n  position: relative;\n  gap: 12px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  color: var(--te-component-common-text-color-secondary);\n\n  .block-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    height: 110px;\n    user-select: none;\n    gap: 6px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    .publish-flag {\n      position: absolute;\n      left: 4px;\n      top: 4px;\n      text-align: center;\n      display: block;\n      color: var(--te-component-common-text-color-primary);\n      font-size: 12px;\n      background-color: var(--te-component-block-publish-flag-bg-color);\n      padding: 2px 4px;\n      border-radius: 2px;\n      transform: scale(0.9);\n      min-width: 45px;\n    }\n\n    &.block-item-small-list {\n      color: var(--te-component-common-text-color-primary);\n      gap: 0;\n      &:deep(.block-item-img) {\n        width: 54px;\n        height: 40px;\n        flex: unset;\n        margin-left: 8px;\n      }\n      .item-text {\n        width: 50%;\n      }\n      .publish-flag {\n        position: static;\n      }\n      .block-detail,\n      .block-setting {\n        visibility: hidden;\n        position: static;\n        margin-left: 4px;\n        z-index: 9;\n      }\n      &:hover {\n        background-color: var(--te-component-common-bg-color-hover);\n      }\n    }\n    &:nth-child(even) {\n      border-right: 0;\n    }\n\n    :deep(.tiny-progress.is-success .tiny-progress-bar__inner) {\n      animation-duration: 5s;\n      animation-name: roll;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n    }\n\n    :deep(.tiny-progress-bar__innerText) {\n      display: none;\n    }\n\n    .progress-bar {\n      width: 100%;\n    }\n\n    &.is-active {\n      background: var(--te-component-common-bg-color-active);\n    }\n\n    &.is-disabled {\n      & + .block-plus:hover {\n        background: transparent;\n        cursor: inherit;\n      }\n    }\n\n    &:not(.is-disabled):hover {\n      cursor: pointer;\n\n      .block-detail,\n      .block-setting {\n        visibility: visible;\n      }\n\n      &[draggable='true'] {\n        cursor: move;\n      }\n    }\n\n    &.block-plus {\n      .block-plus-icon {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 86px;\n        border: 1px dashed var(--te-component-common-border-color-hover);\n        border-radius: 4px;\n      }\n      .item-text {\n        font-size: 12px;\n      }\n      .svg-icon {\n        font-size: 24px;\n        color: var(--te-component-common-text-color-primary);\n      }\n\n      &:hover {\n        cursor: pointer;\n        color: var(--te-component-common-text-color-primary);\n      }\n    }\n\n    .item-default-img {\n      width: 84px;\n      height: 50px;\n      color: var(--te-component-common-bg-color);\n    }\n\n    .item-text {\n      color: var(--te-component-common-text-color-secondary);\n      text-align: center;\n      font-size: 12px;\n      line-height: 1.5;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 100%;\n    }\n\n    .item-name {\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-size: 12px;\n    }\n\n    .block-detail,\n    .block-setting {\n      visibility: hidden;\n      position: absolute;\n      top: 1px;\n      right: 6px;\n      z-index: 9;\n      &.is-current-visible-icon {\n        visibility: visible;\n      }\n    }\n    .block-setting {\n      right: 0px;\n      top: 0;\n    }\n  }\n\n  .loading {\n    animation-duration: 5s;\n    animation-name: roll;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    background: repeating-linear-gradient(\n      135deg,\n      rgba(39, 115, 214, 0.6) 0px,\n      rgba(39, 115, 214, 0.6) 10px,\n      rgba(255, 255, 255, 0.6) 10px,\n      rgba(255, 255, 255, 0.6) 20px\n    );\n  }\n\n  .success {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 10px;\n    animation: greenGrow 800ms ease-out 10 alternate;\n    background: rgb(55 68 58 / 60%);\n  }\n\n  .error {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 10px;\n    animation: redGrow 800ms ease-out 20 alternate;\n    background: rgb(86 52 52 / 60%);\n  }\n\n  @keyframes roll {\n    from {\n      background-position: 0 0;\n    }\n\n    to {\n      background-position: 128px 0;\n    }\n  }\n\n  @keyframes greenGrow {\n    0% {\n      box-shadow: inset 0px 0px 3px green;\n    }\n    100% {\n      box-shadow: inset 0px 0px 7px green;\n    }\n  }\n\n  @keyframes redGrow {\n    0% {\n      box-shadow: inset 0px 0px 3px red;\n    }\n    100% {\n      box-shadow: inset 0px 0px 7px red;\n    }\n  }\n\n  &.isShortcutPanel {\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    height: 300px;\n    .block-item {\n      .item-text {\n        width: 100px;\n      }\n    }\n  }\n\n  &.is-small-list {\n    display: block;\n\n    .block-item {\n      height: 54px;\n      flex-direction: row;\n    }\n\n    .item-text {\n      margin-top: 0;\n      padding: 0 8px;\n      text-align: left;\n\n      .item-name {\n        font-size: 12px;\n        line-height: 16px;\n      }\n      .item-description {\n        color: var(--te-component-common-text-color-primary);\n        font-size: 12px;\n      }\n    }\n\n    .cell {\n      padding: 0 8px;\n      text-align: start;\n    }\n    .cell-time {\n      width: 35%;\n    }\n    .cell-created-by {\n      flex: 1;\n    }\n  }\n}\n.setting-menu {\n  font-size: 12px;\n  color: var(--te-component-common-text-color-primary);\n  .list {\n    display: flex;\n  }\n  .list-item {\n    box-sizing: border-box;\n    cursor: pointer;\n    &:hover {\n      color: var(--te-component-common-text-color-primary);\n    }\n    .list-item-icon {\n      font-size: 14px;\n      color: var(--te-component-common-icon-color);\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"life-cycle\">\n    <tiny-popover\n      v-model=\"state.showPopover\"\n      placement=\"bottom-end\"\n      trigger=\"hover\"\n      popperClass=\"option-popper\"\n      :open-delay=\"OPEN_DELAY.Default\"\n    >\n      <template #reference>\n        <tiny-button class=\"life-cycle-btn\"\n          ><svg-icon name=\"add\"></svg-icon>{{ isPage ? '添加页面生命周期' : '添加区块生命周期' }}\n        </tiny-button>\n      </template>\n      <div class=\"popover-list\">\n        <ul>\n          <li\n            v-for=\"(item, index) in state.lifeCycles\"\n            :key=\"index\"\n            :class=\"{ existed: state.bindLifeCycles.hasOwnProperty(item) }\"\n            @click=\"openLifeCyclesPanel(item)\"\n          >\n            <div>{{ item }}</div>\n          </li>\n        </ul>\n      </div>\n    </tiny-popover>\n  </div>\n  <div class=\"life-cycle-tips\">{{ lifeCycleTips }}</div>\n  <meta-list-items\n    :optionsList=\"Object.keys(state.bindLifeCycles)\"\n    :draggable=\"false\"\n    :class=\"{ 'life-cycle-content-list': Object.keys(state.bindLifeCycles).length }\"\n  >\n    <template #content=\"{ data }\">\n      <div class=\"life-cycle-content-item\">\n        {{ data }}\n      </div>\n    </template>\n    <template #operate=\"{ data }\">\n      <svg-button :hoverBgColor=\"false\" name=\"setting\" @click=\"openLifeCyclesPanel(data)\"></svg-button>\n      <svg-button :hoverBgColor=\"false\" name=\"delete\" @click=\"deleteLifeCycle(data)\"></svg-button>\n    </template>\n  </meta-list-items>\n  <tiny-dialog-box v-model:visible=\"state.showLifeCyclesDialog\" fullscreen :show-close=\"false\" :append-to-body=\"true\">\n    <template #title>\n      <div class=\"bind-dialog-title\">\n        <div class=\"bind-dialog-text\">\n          {{ isPage ? '添加页面生命周期' : '添加区块生命周期' }}\n        </div>\n        <div class=\"bind-dialog-btn\">\n          <tiny-button type=\"info\" @click=\"editorConfirm\">保存</tiny-button>\n          <svg-button name=\"close\" @click=\"state.showLifeCyclesDialog = false\"></svg-button>\n        </div>\n      </div>\n    </template>\n    <div v-if=\"state.showLifeCyclesDialog\" class=\"dialog-content\">\n      <div class=\"dialog-content-left\">\n        <tiny-search placeholder=\"搜索\" @update:modelValue=\"searchLifeCyclesList\"></tiny-search>\n        <ul class=\"life-cycle-list\">\n          <li v-for=\"(item, index) in state.lifeCycles\" :key=\"index\" @click=\"openLifeCyclesPanel(item)\">\n            <div class=\"life-cycle-name\" :class=\"{ 'life-cycle-selected': item === state.title }\">\n              {{ item }}\n              <icon-yes v-if=\"item === state.title\" class=\"life-cycle-selected__icon\"></icon-yes>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div class=\"dialog-content-right\">\n        <monaco-editor\n          ref=\"editorRef\"\n          class=\"life-cycle-editor\"\n          :options=\"{\n            language: 'javascript'\n          }\"\n          :value=\"state.editorValue\"\n          @change=\"handleEditorChange\"\n          @editorDidMount=\"editorDidMount\"\n        />\n      </div>\n    </div>\n\n    <template #footer> </template>\n  </tiny-dialog-box>\n</template>\n\n<script lang=\"jsx\">\nimport { reactive, ref, watchEffect, onBeforeUnmount } from 'vue'\nimport { Button, DialogBox, Popover, Search } from '@opentiny/vue'\nimport { useModal, usePage, useNotify, useCanvas } from '@opentiny/tiny-engine-meta-register'\nimport { getMergeMeta } from '@opentiny/tiny-engine-meta-register'\nimport MetaListItems from './MetaListItems.vue'\nimport { iconYes } from '@opentiny/vue-icon'\nimport VueMonaco from './VueMonaco.vue'\nimport { initCompletion } from '../js/completion'\nimport { initLinter, lint } from '../js/linter'\nimport { SvgButton } from '../index'\nimport { constants } from '@opentiny/tiny-engine-utils'\nconst { OPEN_DELAY } = constants\n\nexport default {\n  components: {\n    TinyPopover: Popover,\n    TinyDialogBox: DialogBox,\n    TinySearch: Search,\n    TinyButton: Button,\n    MonacoEditor: VueMonaco,\n    SvgButton,\n    MetaListItems,\n    IconYes: iconYes()\n  },\n\n  props: {\n    bindLifeCycles: Object,\n    isPage: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['updatePageLifeCycles', 'bind'],\n  setup(props, { emit }) {\n    const { confirm } = useModal()\n    const { getPageContent } = usePage()\n\n    const lifeCycles = getMergeMeta('engine.config')?.lifeCyclesOptions[getMergeMeta('engine.config')?.dslMode]\n\n    const lifeCycleTips = getMergeMeta('engine.config')?.lifeCycleTips[getMergeMeta('engine.config')?.dslMode]\n\n    const state = reactive({\n      showPopover: true,\n      showLifeCyclesDialog: false,\n      title: '',\n      lifeCycles,\n      bindLifeCycles: {},\n      editorValue: '{}',\n      hasError: false,\n      linterWorker: null,\n      completionProvider: null\n    })\n\n    watchEffect(() => {\n      state.bindLifeCycles = props.bindLifeCycles || {}\n    })\n\n    const searchLifeCyclesList = (value) => {\n      if (!value) {\n        state.lifeCycles = lifeCycles\n        return\n      }\n      state.lifeCycles = lifeCycles.filter((item) => item?.toLowerCase().indexOf(value.toLowerCase()) > -1)\n    }\n\n    const syncLifeCycle = () => {\n      const currentSchema = useCanvas().getSchema()\n      const pageContent = getPageContent()\n      const { id, fileName } = pageContent\n      if (id === currentSchema.id || fileName === currentSchema.fileName) {\n        currentSchema.lifeCycles = state.bindLifeCycles\n      }\n    }\n\n    const deleteLifeCycle = (name) => {\n      confirm({\n        title: '提示',\n        message: `您确定要删除 ${name} 吗？`,\n        exec: () => {\n          delete state.bindLifeCycles[name]\n          syncLifeCycle()\n        }\n      })\n    }\n\n    const editorRef = ref(null)\n\n    const openLifeCyclesPanel = (item) => {\n      state.title = item\n      const bindLifeCycleSource = props.bindLifeCycles?.[item] || useCanvas().getSchema()?.lifeCycles?.[item]\n      state.editorValue =\n        bindLifeCycleSource?.value ||\n        `function ${item} (${item === 'setup' ? '{ props, state, watch, onMounted }' : ''}) {} `\n      state.showLifeCyclesDialog = true\n      setTimeout(() => {\n        editorRef.value.getEditor().trigger('anyString', 'editor.action.formatDocument')\n      })\n    }\n\n    const editorConfirm = () => {\n      if (state.hasError) {\n        useNotify({\n          type: 'error',\n          message: '代码静态检查有错误，请先修改后再保存'\n        })\n\n        return\n      }\n\n      const editorValue = editorRef.value.getEditor().getValue()\n      const value = {\n        type: 'JSFunction',\n        value: editorValue\n      }\n\n      if (!state.bindLifeCycles) {\n        state.bindLifeCycles = {}\n      }\n\n      state.bindLifeCycles[state.title] = value\n      state.showLifeCyclesDialog = false\n      syncLifeCycle()\n\n      if (!props.isPage) {\n        emit('bind', state.bindLifeCycles)\n      } else {\n        emit('updatePageLifeCycles', state.bindLifeCycles)\n      }\n    }\n\n    const editorDidMount = (editor) => {\n      if (!editorRef.value) {\n        return\n      }\n      // Lowcode API 提示\n      state.completionProvider = initCompletion(editorRef.value.getMonaco(), editorRef.value.getEditor()?.getModel())\n\n      // 初始化 ESLint worker\n      state.linterWorker = initLinter(editor, editorRef.value.getMonaco(), state)\n    }\n\n    const handleEditorChange = () => {\n      if (!editorRef.value) {\n        return\n      }\n      // 用户在线编辑代码内容变化时，发起 ESLint 静态检查\n      const monacoModel = editorRef.value.getEditor().getModel()\n      lint(monacoModel, state.linterWorker)\n    }\n\n    onBeforeUnmount(() => {\n      state.completionProvider?.forEach?.((provider) => {\n        provider.dispose()\n      })\n      // 终止 ESLint worker\n      state.linterWorker?.terminate?.()\n    })\n\n    return {\n      state,\n      lifeCycleTips,\n      editorRef,\n      searchLifeCyclesList,\n      openLifeCyclesPanel,\n      deleteLifeCycle,\n      editorConfirm,\n      editorDidMount,\n      handleEditorChange,\n      OPEN_DELAY\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.life-cycle {\n  display: flex; // 决定了鼠标移入后的弹窗位置\n  svg {\n    outline: none;\n  }\n  .life-cycle-btn {\n    color: var(--te-component-common-text-color-primary);\n    border-color: var(--te-component-common-border-color);\n    &:hover {\n      border-color: var(--te-component-common-border-color-hover);\n    }\n  }\n}\n.life-cycle-tips {\n  color: var(--te-component-common-text-color-weaken);\n  margin: 4px 0 0;\n  height: 16px;\n  line-height: 16px;\n}\n.life-cycle-content-list {\n  margin-top: 12px;\n}\n.life-cycle-alert {\n  color: var(--te-component-common-text-color-weaken);\n  margin-left: 20px;\n  margin-right: 20px;\n}\n.life-cycle-content-item {\n  color: var(--te-component-common-text-color-primary);\n}\n.opt-button {\n  &:last-child {\n    margin-right: var(--te-base-space-2x);\n  }\n}\n\n.popover-list {\n  li {\n    padding: 0 12px;\n    margin: 0 -16px;\n    line-height: 24px;\n    cursor: pointer;\n    &:hover {\n      background: var(--te-component-common-bg-color-hover);\n    }\n  }\n  .existed {\n    cursor: not-allowed;\n    pointer-events: none;\n    color: var(--te-component-common-text-color-disabled);\n  }\n}\n\n:deep(.tiny-dialog-box__body) {\n  height: calc(100vh - 150px);\n}\n\n.dialog-content {\n  display: flex;\n  height: 100%;\n  .dialog-content-left {\n    width: 200px;\n    margin-right: 20px;\n\n    .life-cycle-list {\n      border-radius: 4px;\n      max-height: 500px;\n      margin-top: 8px;\n      overflow: auto;\n    }\n\n    .life-cycle-name {\n      padding: 8px 12px 8px 30px;\n      cursor: pointer;\n      position: relative;\n      transition: 0.3s;\n\n      &.life-cycle-selected {\n        background: var(--te-component-common-bg-color-active);\n      }\n\n      .life-cycle-selected__icon {\n        font-size: 16px;\n        position: absolute;\n        top: 50%;\n        left: 12px;\n        transform: translateY(-50%);\n      }\n\n      &:hover {\n        background: var(--te-component-common-bg-color-hover);\n      }\n    }\n  }\n\n  .dialog-content-right {\n    flex: 1;\n    .life-cycle-editor {\n      border: 1px solid var(--te-component-common-border-color-divider);\n      height: 100%;\n      box-sizing: border-box;\n    }\n  }\n}\n\n.bind-dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-top: 20px;\n}\n.bind-dialog-title {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  .bind-dialog-text {\n    color: var(--te-component-common-text-color-primary);\n    font-size: var(--te-base-font-size-1);\n  }\n  .bind-dialog-btn {\n    display: flex;\n    align-items: center;\n    .tiny-button {\n      margin-right: 8px;\n      min-width: 40px;\n    }\n  }\n}\n</style>\n","<template>\n  <div :class=\"['tip', type]\">\n    <div class=\"left\">\n      <slot name=\"icon\">\n        <icon-info class=\"icon\"></icon-info>\n      </slot>\n    </div>\n    <div class=\"middle\">\n      <slot name=\"content\"></slot>\n    </div>\n    <div class=\"right\">\n      <slot name=\"more\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { iconInfo } from '@opentiny/vue-icon'\n\nexport default {\n  components: {\n    IconInfo: iconInfo()\n  },\n  props: {\n    type: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.tip {\n  display: flex;\n  border: 1px solid var(--te-component-common-border-color);\n  border-left: 2px solid var(--te-component-empty-tip-border-color);\n  border-radius: 0 4px 4px 0;\n  align-items: center;\n  padding: 8px 12px;\n  background-color: var(--te-component-empty-tip-bg-color);\n\n  .left {\n    width: 20px;\n  }\n  .middle {\n    flex: 1;\n    margin-right: 10px;\n  }\n  .right {\n    width: 50px;\n  }\n}\n.waring {\n  border-left: 2px solid var(--te-component-common-warning-color);\n}\n.error {\n  border-left: 2px solid var(--te-component-common-error-color);\n}\n</style>\n","<template>\n  <div ref=\"languageContent\" class=\"languageContent\">\n    <div v-show=\"!showEditItem\">\n      <tiny-select\n        ref=\"selectRef\"\n        v-model=\"selectValue\"\n        placeholder=\"请选择多语言文案\"\n        filterable\n        is-drop-inherit-width\n        :filter-method=\"filterMethod\"\n        @change=\"selectI18n\"\n      >\n        <tiny-option\n          v-for=\"item in langData\"\n          :key=\"item.key\"\n          :label=\"`${item[currentLang]} (${item.key})`\"\n          :value=\"item.key\"\n        >\n        </tiny-option>\n      </tiny-select>\n      <div v-if=\"paramsForm.length\" class=\"params-form\">\n        <div class=\"label\">国际化参数配置</div>\n        <div v-for=\"param in paramsForm\" :key=\"param.name\" class=\"params-item\">\n          <label>{{ param.name }}</label>\n          <tiny-input v-model=\"param.value\" @update:modelValue=\"paramsChange\"></tiny-input>\n        </div>\n      </div>\n      <slot name=\"suffix\">\n        <div class=\"bottom-buttons\">\n          <tiny-button v-if=\"isBind\" @click=\"unbindI18n\">解除关联</tiny-button>\n          <tiny-button type=\"primary\" @click=\"openCreateForm\">\n            <span>创建新的多语言文案</span>\n          </tiny-button>\n        </div>\n      </slot>\n    </div>\n    <div v-show=\"showEditItem\" class=\"addNewLanguage\">\n      <div>\n        <div class=\"tiny-input\">\n          <label>唯一键</label>\n          <input v-model=\"editForm.key\" class=\"tiny-input__inner\" />\n        </div>\n\n        <div v-for=\"locale in locales\" :key=\"locale.lang\" class=\"tiny-input\">\n          <label>{{ locale.label }}</label>\n          <input v-model=\"editForm[locale.lang]\" class=\"tiny-input__inner\" />\n        </div>\n      </div>\n      <div class=\"bottom-buttons\">\n        <tiny-button @click=\"activeI18n\">国际化管理</tiny-button>\n        <tiny-button type=\"primary\" @click=\"addBindI18n\">添加并关联</tiny-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, ref, watchEffect } from 'vue'\nimport { useLayout, useTranslate } from '@opentiny/tiny-engine-meta-register'\nimport { PROP_DATA_TYPE } from '../js/constants'\nimport { utils } from '@opentiny/tiny-engine-utils'\nimport { Select, Option, Button, Input } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinySelect: Select,\n    TinyOption: Option,\n    TinyButton: Button,\n    TinyInput: Input\n  },\n  inheritAttrs: false,\n  props: {\n    currentLang: String,\n    isBind: Boolean,\n    langData: {\n      type: [Array, Object],\n      default: () => []\n    },\n    modelValue: {\n      type: String,\n      default: ''\n    },\n    data: [Object, String],\n    locales: Array\n  },\n  setup(props, { emit }) {\n    const selectValue = ref(props.modelValue)\n    const showEditItem = ref(false)\n    const selectRef = ref<any>(null)\n    const editForm = reactive<any>({})\n    const paramsForm = ref<any[]>([])\n\n    watchEffect(() => {\n      selectValue.value = props.modelValue\n      if (props.modelValue && props.langData[props.modelValue]) {\n        const curValue = props.langData[props.modelValue][props.currentLang] || ''\n        const params: any[] = []\n        const data = props?.data?.params || {}\n\n        curValue.replace(/\\{(.+?)\\}/g, (substr, key) => {\n          if (key) {\n            params.push({ name: key, value: data[key] || '' })\n          }\n        })\n        paramsForm.value = params\n      }\n    })\n\n    const filterMethod = (value: any) => {\n      const options = selectRef.value.state.cachedOptions\n\n      options.forEach((item: any) => {\n        item.state.visible = value ? item.label.indexOf(value) > -1 : true\n      })\n    }\n\n    const selectI18n = (key: string) => {\n      const data = props.langData[key] || {}\n\n      emit('bind', { ...data, key })\n    }\n\n    const { PLUGIN_NAME, activePlugin } = useLayout()\n    const activeI18n = () => activePlugin(PLUGIN_NAME.I18n)\n\n    const addBindI18n = () => {\n      useTranslate().ensureI18n(editForm, true)\n      emit('bind', { ...editForm })\n      showEditItem.value = false\n    }\n\n    const unbindI18n = () => {\n      const i18nObj = props.langData[props.modelValue]\n\n      emit('bind', i18nObj[props.currentLang])\n      showEditItem.value = false\n    }\n\n    const paramsChange = () => {\n      const params: Record<string, any> = {}\n\n      paramsForm.value.forEach(({ name, value }) => {\n        params[name] = value\n      })\n      emit('bind', { type: PROP_DATA_TYPE.I18N, key: selectValue.value, params })\n    }\n\n    const openCreateForm = () => {\n      Object.keys(editForm).forEach((key) => delete editForm[key])\n      editForm.key = 'lowcode.' + utils.guid()\n      editForm.type = PROP_DATA_TYPE.I18N\n      showEditItem.value = true\n    }\n\n    return {\n      selectRef,\n      showEditItem,\n      filterMethod,\n      selectI18n,\n      selectValue,\n      activeI18n,\n      addBindI18n,\n      unbindI18n,\n      paramsForm,\n      paramsChange,\n      editForm,\n      openCreateForm\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.languageContent {\n  z-index: 99;\n\n  .tiny-svg {\n    margin-right: 10px;\n    font-size: 16px;\n    &:hover {\n      cursor: pointer;\n      color: #ccc;\n    }\n  }\n  .addNewLanguage {\n    .tiny-input {\n      display: flex;\n      margin-bottom: 10px;\n      padding: 0 8px;\n      align-items: center;\n      label {\n        text-wrap: nowrap;\n        text-align: left;\n        width: 50px;\n      }\n      display: flex;\n    }\n    .tiny-input__inner {\n      flex: 1;\n    }\n  }\n}\n.params-form {\n  .label {\n    margin: 16px 0;\n    font-size: 12px;\n    line-height: 18px;\n  }\n  .params-item + .params-item {\n    margin-top: 12px;\n  }\n  .params-item {\n    display: flex;\n    align-items: center;\n    label {\n      width: 80px;\n    }\n  }\n}\n.bottom-buttons {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 16px;\n  gap: 8px;\n  .tiny-button,\n  .tiny-button.tiny-button--default {\n    margin: 0;\n  }\n}\n</style>\n","<template>\n  <tiny-dialog-box\n    :visible=\"visible\"\n    title=\"发布区块\"\n    width=\"550px\"\n    append-to-body\n    draggable\n    @update:visible=\"setVisible\"\n  >\n    <tiny-form\n      ref=\"deployBlockRef\"\n      label-position=\"left\"\n      label-width=\"84px\"\n      label-align\n      :model=\"formState\"\n      :rules=\"formRules\"\n      validate-type=\"text\"\n    >\n      <tiny-form-item label=\"版本号\" prop=\"version\">\n        <tiny-input v-model=\"formState.version\" placeholder=\"请输入X.Y.Z格式版本号，如1.0.0\"></tiny-input>\n      </tiny-form-item>\n      <tiny-form-item label=\"版本描述\" prop=\"deployInfo\">\n        <tiny-input v-model=\"formState.deployInfo\" type=\"textarea\" placeholder=\"请输入此次发布的修改点\"></tiny-input>\n      </tiny-form-item>\n      <tiny-form-item label=\"保存设置\" prop=\"needToSave\" class=\"form-item-save\">\n        <tiny-checkbox v-model=\"formState.needToSave\">发布成功后保存最新数据</tiny-checkbox>\n      </tiny-form-item>\n      <tiny-form-item label=\"schema比对\" class=\"schema-compare\">\n        <tiny-button class=\"compare-button\" type=\"text\" @click=\"changeCompare\"> 查看本次发布的改动点 </tiny-button>\n        <tiny-popover\n          placement=\"top\"\n          trigger=\"hover\"\n          append-to-body\n          :width=\"162\"\n          content=\"区块本地schema和线上新版本schema进行比对\"\n        >\n          <template #reference>\n            <svg-icon name=\"plugin-icon-plugin-help\"></svg-icon>\n          </template>\n        </tiny-popover>\n      </tiny-form-item>\n    </tiny-form>\n    <template #footer>\n      <tiny-button type=\"primary\" @click=\"deployBlock\"> 确定 </tiny-button>\n      <tiny-button @click=\"setVisible(false)\">取消</tiny-button>\n    </template>\n    <tiny-dialog-box\n      v-model:visible=\"state.compareVisible\"\n      class=\"dialog-box\"\n      :modal=\"false\"\n      :fullscreen=\"true\"\n      :append-to-body=\"true\"\n      title=\"Schema 线上与本地差异\"\n    >\n      <vue-monaco\n        v-if=\"state.compareVisible\"\n        ref=\"editor\"\n        class=\"monaco-editor\"\n        :diffEditor=\"true\"\n        :options=\"editorOptions\"\n        :value=\"state.code\"\n        :original=\"state.originalCode\"\n        @change=\"changeCode\"\n      ></vue-monaco>\n      <template #footer>\n        <tiny-button type=\"primary\" @click=\"save\">保存</tiny-button>\n        <tiny-button @click=\"close\">取消</tiny-button>\n      </template>\n    </tiny-dialog-box>\n  </tiny-dialog-box>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, ref, watch } from 'vue'\nimport {\n  Checkbox as TinyCheckbox,\n  Input as TinyInput,\n  Button as TinyButton,\n  DialogBox as TinyDialogBox,\n  Form as TinyForm,\n  Popover as TinyPopover,\n  FormItem as TinyFormItem\n} from '@opentiny/vue'\nimport { useBlock, useCanvas, useNotify, getMetaApi, META_APP } from '@opentiny/tiny-engine-meta-register'\nimport { constants } from '@opentiny/tiny-engine-utils'\nimport VueMonaco from './VueMonaco.vue'\n\nexport default {\n  components: {\n    TinyCheckbox,\n    TinyButton,\n    TinyDialogBox,\n    TinyForm,\n    TinyInput,\n    TinyFormItem,\n    TinyPopover,\n    VueMonaco\n  },\n  props: {\n    block: {\n      type: Object,\n      default: () => ({})\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:visible', 'changeSchema'],\n  setup(props, { emit }) {\n    const { COMPONENT_NAME } = constants\n    const formState = reactive({\n      deployInfo: '',\n      version: '',\n      needToSave: true\n    })\n\n    const state = reactive({\n      compareVisible: false,\n      schemaCompare: false,\n      code: '',\n      originalCode: '',\n      newCode: ''\n    })\n\n    const deployBlockRef = ref(null)\n\n    const formRules = {\n      deployInfo: [{ required: true, message: '必填', trigger: 'blur' }],\n      version: [\n        { required: true, message: '必填', trigger: 'blur' },\n        { type: 'version', message: '请输入正确的X.Y.Z版本格式', trigger: 'blur' }\n      ]\n    }\n\n    const editor = ref(null)\n    const editorOptions = {\n      language: 'javascript',\n      lineNumbers: true,\n      minimap: {\n        enabled: false\n      }\n    }\n\n    const getNextVersion = (block: any) => {\n      const backupList = block.histories || []\n\n      let latestVersion = '1.0.0'\n      let latestTime = 0\n      backupList.forEach((v: { created_at: string | number | Date; version: string }) => {\n        const vTime = new Date(v.created_at).getTime()\n\n        if (vTime > latestTime) {\n          latestTime = vTime\n          latestVersion = v.version\n        }\n      })\n      // version 符合X.Y.Z的字符结构\n      return latestVersion.replace(/\\d+$/, (match) => Number(match) + 1)\n    }\n\n    watch(\n      () => props.visible,\n      (visible) => {\n        if (!visible) {\n          return\n        }\n\n        formState.version = getNextVersion(props.block)\n      }\n    )\n\n    const setVisible = (visible: boolean) => emit('update:visible', visible)\n\n    const { setSaved } = useCanvas()\n\n    const isSameBlock = () => {\n      const currentBlock = useBlock().getCurrentBlock()\n      return props.block?.id === currentBlock?.id\n    }\n\n    const deployBlock = async () => {\n      deployBlockRef.value.validate((valid: any) => {\n        const { publishBlock } = getMetaApi(META_APP.BlockManage)\n\n        if (valid) {\n          const params = {\n            block: props.block,\n            is_compile: true,\n            deploy_info: formState.deployInfo,\n            version: formState.version,\n            needToSave: formState.needToSave\n          }\n          publishBlock(params)\n          setVisible(false)\n          if (formState.needToSave && isSameBlock()) {\n            setSaved(true)\n          }\n          formState.deployInfo = ''\n          formState.version = ''\n          formState.needToSave = true\n        }\n      })\n    }\n\n    const changeCompare = async (value: any) => {\n      const api = getMetaApi(META_APP.BlockManage)\n\n      if (value) {\n        const block = props.block\n        const remote = await api.getBlockById(block?.id)\n        const originalObj = remote?.content || {}\n        state.originalCode = JSON.stringify(originalObj, null, 2)\n\n        state.code = JSON.stringify(block?.content || {}, null, 2)\n        state.compareVisible = true\n      }\n    }\n\n    const changeCode = (code: string) => {\n      if (typeof code !== 'string') {\n        return\n      }\n      state.newCode = code\n    }\n\n    const close = () => {\n      state.schemaCompare = false\n      state.compareVisible = false\n    }\n\n    const save = () => {\n      if (!state.newCode) {\n        close()\n        return\n      }\n      try {\n        const newSchema = JSON.parse(state.newCode)\n        emit('changeSchema', { ...newSchema, componentName: COMPONENT_NAME.Block })\n        close()\n      } catch (err) {\n        useNotify({\n          type: 'error',\n          message: '代码静态检查有错误，请先修改后再保存'\n        })\n      }\n    }\n\n    return {\n      formState,\n      state,\n      deployBlockRef,\n      formRules,\n      editor,\n      editorOptions,\n      setVisible,\n      changeCompare,\n      changeCode,\n      close,\n      save,\n      deployBlock\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.dialog-box {\n  :deep(.tiny-dialog-box__body) {\n    height: 100%;\n  }\n}\n.monaco-editor {\n  width: 100%;\n  height: 100%;\n}\n.form-item-save {\n  :deep(.tiny-form-item__content) {\n    line-height: 0;\n  }\n}\n.schema-compare {\n  .tiny-button.tiny-button {\n    padding-left: 0;\n    padding-right: 4px;\n    font-size: 12px;\n  }\n}\n.compare-button {\n  font-size: 12px;\n  padding-left: 0;\n  padding-right: 8px;\n  line-height: 28px;\n  vertical-align: middle;\n}\n</style>\n","<template>\n  <div class=\"options\">\n    <div class=\"top\">\n      <div class=\"title\">\n        <slot name=\"title\"></slot>\n      </div>\n      <div class=\"actions\">\n        <slot name=\"actions\"></slot>\n      </div>\n    </div>\n    <div id=\"options\" class=\"select-options\">\n      <slot name=\"items\"></slot>\n    </div>\n    <div class=\"bottom\">\n      <slot name=\"bottom\"></slot>\n    </div>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.options {\n  width: 100%;\n  .top {\n    color: var(--te-component-common-text-color-secondary);\n    overflow: hidden;\n    .title {\n      float: left;\n      height: 28px;\n      line-height: 28px;\n    }\n    .actions {\n      float: right;\n      border: 1px solid var(--te-component-common-border-color);\n      overflow: hidden;\n      border-radius: 4px 4px 0 0;\n    }\n  }\n\n  .bottom {\n    display: flex;\n    padding: 2px;\n    margin-top: 4px;\n  }\n}\n</style>\n","<script>\nimport { h } from 'vue'\n\nexport default {\n  name: 'Splitpanes',\n\n  provide() {\n    return {\n      onPaneClick: this.onPaneClick,\n      onPaneAdd: this.onPaneAdd,\n      requestUpdate: this.requestUpdate,\n      onPaneRemove: this.onPaneRemove\n    }\n  },\n\n  props: {\n    horizontal: { type: Boolean },\n    pushOtherPanes: { type: Boolean, default: true },\n    dblClickSplitter: { type: Boolean, default: true },\n    rtl: { type: Boolean, default: false },\n    firstSplitter: { type: Boolean }\n  },\n  emits: ['ready', 'resize', 'resized', 'pane-click', 'pane-maximize', 'pane-add', 'pane-remove', 'splitter-click'],\n\n  data: () => ({\n    ready: false,\n    container: null,\n    touch: {\n      dragging: false,\n      activeSplitter: null,\n      mouseDown: false\n    },\n    panes: [],\n    lowcodeSplitterTaps: {\n      timeoutId: null,\n      splitter: null\n    }\n  }),\n\n  computed: {\n    indexedPanes() {\n      return this.panes.reduce((obj, pane) => {\n        obj[pane.id] = pane\n        return obj\n      }, {})\n    },\n    panesCount() {\n      return this.panes.length\n    }\n  },\n\n  watch: {\n    horizontal() {\n      this.updateLowCodePaneComponents()\n    },\n    panes: {\n      deep: true,\n      immediate: false,\n      handler() {\n        this.updateLowCodePaneComponents()\n      }\n    },\n    firstSplitter() {\n      this.redoLowCodeSplitters()\n    },\n    dblClickSplitter(enable) {\n      const splitters = [...this.container.querySelectorAll('.splitpanes-lowcode__splitter')]\n      splitters.forEach((item, i) => {\n        item.ondblclick = enable ? (event) => this.onSplitterDblClick(event, i) : undefined\n      })\n    }\n  },\n  mounted() {\n    this.container = this.$refs.container\n    this.checkLowCodeSplitpanesNodes()\n    this.redoLowCodeSplitters()\n    this.resetLowCodePaneSizes()\n    this.$emit('ready')\n    this.ready = true\n  },\n  beforeUnmount() {\n    this.ready = false\n  },\n  methods: {\n    updateLowCodePaneComponents() {\n      this.panes.forEach((item) => {\n        if (item.update) {\n          item.update({\n            [this.horizontal ? 'height' : 'width']: `${this.indexedPanes[item.id].size}%`\n          })\n        }\n      })\n    },\n    bindEvents() {\n      document.addEventListener('mousemove', this.onLowCodeMouseMove, { passive: false })\n      document.addEventListener('mouseup', this.onLowCodeMouseUp)\n    },\n    unbindEvents() {\n      document.removeEventListener('mousemove', this.onLowCodeMouseMove, { passive: false })\n      document.removeEventListener('mouseup', this.onLowCodeMouseUp)\n    },\n    onMouseDown(event, splitterLowCodeIndex) {\n      this.bindEvents()\n      this.touch.mouseDown = true\n      this.touch.activeSplitter = splitterLowCodeIndex\n    },\n\n    onLowCodeMouseMove(event) {\n      if (this.touch.mouseDown) {\n        event.preventDefault()\n        this.touch.dragging = true\n        this.calculatePanesSize(this.getCurrentMouseDrag(event))\n        this.$emit(\n          'resize',\n          this.panes.map((pane) => ({ min: pane.min, max: pane.max, size: pane.size }))\n        )\n      }\n    },\n\n    onLowCodeMouseUp() {\n      if (this.touch.dragging) {\n        this.$emit(\n          'resized',\n          this.panes.map((pane) => ({ min: pane.min, max: pane.max, size: pane.size }))\n        )\n      }\n      this.touch.mouseDown = false\n      setTimeout(() => {\n        this.touch.dragging = false\n        this.unbindEvents()\n      }, 100)\n    },\n    onSplitterClick(event, splitterLowCodeIndex) {\n      if ('ontouchstart' in window) {\n        event.preventDefault()\n        if (this.dblClickSplitter) {\n          if (this.lowcodeSplitterTaps.splitter === splitterLowCodeIndex) {\n            clearTimeout(this.lowcodeSplitterTaps.timeoutId)\n            this.lowcodeSplitterTaps.timeoutId = null\n            this.onSplitterDblClick(event, splitterLowCodeIndex)\n            this.lowcodeSplitterTaps.splitter = null\n          } else {\n            this.lowcodeSplitterTaps.splitter = splitterLowCodeIndex\n            this.lowcodeSplitterTaps.timeoutId = setTimeout(() => {\n              this.lowcodeSplitterTaps.splitter = null\n            }, 500)\n          }\n        }\n      }\n\n      if (!this.touch.dragging) this.$emit('splitter-click', this.panes[splitterLowCodeIndex])\n    },\n    onSplitterDblClick(event, splitterLowCodeIndex) {\n      let totalMinSizes = 0\n      this.panes = this.panes.map((pane, i) => {\n        pane.size = i === splitterLowCodeIndex ? pane.max : pane.min\n        if (i !== splitterLowCodeIndex) totalMinSizes += pane.min\n\n        return pane\n      })\n      this.panes[splitterLowCodeIndex].size -= totalMinSizes\n      this.$emit('pane-maximize', this.panes[splitterLowCodeIndex])\n    },\n\n    onPaneClick(event, paneId) {\n      this.$emit('pane-click', this.indexedPanes[paneId])\n    },\n    getCurrentMouseDrag(event) {\n      const rect = this.container.getBoundingClientRect()\n      const { clientX, clientY } = 'ontouchstart' in window && event.touches ? event.touches[0] : event\n\n      return {\n        x: clientX - rect.left,\n        y: clientY - rect.top\n      }\n    },\n    getCurrentDragPercentage(drag) {\n      drag = drag[this.horizontal ? 'y' : 'x']\n      const containerSize = this.container?.[this.horizontal ? 'clientHeight' : 'clientWidth'] || 0\n      if (this.rtl && !this.horizontal) drag = containerSize - drag\n\n      return (drag * 100) / containerSize\n    },\n\n    calculatePanesSize(drag) {\n      const splitterLowCodeIndex = this.touch.activeSplitter\n      let sums = {\n        prevPanesSize: this.sumLowCodePrevPanesSize(splitterLowCodeIndex),\n        nextPanesSize: this.sumLowCodeNextPanesSize(splitterLowCodeIndex),\n        prevLowcodeReachedMinPanes: 0,\n        nextLowCodeReachedMinPanes: 0\n      }\n\n      const minLowCodeDrag = 0 + (this.pushOtherPanes ? 0 : sums.prevPanesSize)\n      const maxLowCodeDrag = 100 - (this.pushOtherPanes ? 0 : sums.nextPanesSize)\n      const dragLowCodePercentage = Math.max(\n        Math.min(this.getCurrentDragPercentage(drag), maxLowCodeDrag),\n        minLowCodeDrag\n      )\n      let panesLowCodeToResize = [splitterLowCodeIndex, splitterLowCodeIndex + 1]\n      let paneLowCodeBefore = this.panes[panesLowCodeToResize[0]] || null\n      let paneLowCodeAfter = this.panes[panesLowCodeToResize[1]] || null\n\n      const paneLowCodeBeforeMaxReached =\n        paneLowCodeBefore.max < 100 && dragLowCodePercentage >= paneLowCodeBefore.max + sums.prevPanesSize\n      const paneLowCodeAfterMaxReached =\n        paneLowCodeAfter.max < 100 &&\n        dragLowCodePercentage <= 100 - (paneLowCodeAfter.max + this.sumLowCodeNextPanesSize(splitterLowCodeIndex + 1))\n      if (paneLowCodeBeforeMaxReached || paneLowCodeAfterMaxReached) {\n        if (paneLowCodeBeforeMaxReached) {\n          paneLowCodeBefore.size = paneLowCodeBefore.max\n          paneLowCodeAfter.size = Math.max(100 - paneLowCodeBefore.max - sums.prevPanesSize - sums.nextPanesSize, 0)\n        } else {\n          paneLowCodeBefore.size = Math.max(\n            100 - paneLowCodeAfter.max - sums.prevPanesSize - this.sumLowCodeNextPanesSize(splitterLowCodeIndex + 1),\n            0\n          )\n          paneLowCodeAfter.size = paneLowCodeAfter.max\n        }\n        return\n      }\n      if (this.pushOtherPanes) {\n        const vars = this.doPushOtherPanes(sums, dragLowCodePercentage)\n        if (!vars) return\n        ;({ sums, panesLowCodeToResize } = vars)\n        paneLowCodeBefore = this.panes[panesLowCodeToResize[0]] || null\n        paneLowCodeAfter = this.panes[panesLowCodeToResize[1]] || null\n      }\n\n      if (paneLowCodeBefore !== null) {\n        paneLowCodeBefore.size = Math.min(\n          Math.max(dragLowCodePercentage - sums.prevPanesSize - sums.prevLowcodeReachedMinPanes, paneLowCodeBefore.min),\n          paneLowCodeBefore.max\n        )\n      }\n      if (paneLowCodeAfter !== null) {\n        paneLowCodeAfter.size = Math.min(\n          Math.max(\n            100 - dragLowCodePercentage - sums.nextPanesSize - sums.nextLowCodeReachedMinPanes,\n            paneLowCodeAfter.min\n          ),\n          paneLowCodeAfter.max\n        )\n      }\n    },\n\n    doPushOtherPanes(sums, dragLowCodePercentage) {\n      const splitterLowCodeIndex = this.touch.activeSplitter\n      const panesLowCodeToResize = [splitterLowCodeIndex, splitterLowCodeIndex + 1]\n      if (dragLowCodePercentage < sums.prevPanesSize + this.panes[panesLowCodeToResize[0]].min) {\n        panesLowCodeToResize[0] = this.findPrevExpandedPane(splitterLowCodeIndex).index\n\n        sums.prevLowcodeReachedMinPanes = 0\n        if (panesLowCodeToResize[0] < splitterLowCodeIndex) {\n          this.panes.forEach((pane, i) => {\n            if (i > panesLowCodeToResize[0] && i <= splitterLowCodeIndex) {\n              pane.size = pane.min\n              sums.prevLowcodeReachedMinPanes += pane.min\n            }\n          })\n        }\n        sums.prevPanesSize = this.sumLowCodePrevPanesSize(panesLowCodeToResize[0])\n        if (panesLowCodeToResize[0] === undefined) {\n          sums.prevLowcodeReachedMinPanes = 0\n          this.panes[0].size = this.panes[0].min\n          this.panes.forEach((pane, i) => {\n            if (i > 0 && i <= splitterLowCodeIndex) {\n              pane.size = pane.min\n              sums.prevLowcodeReachedMinPanes += pane.min\n            }\n          })\n          this.panes[panesLowCodeToResize[1]].size =\n            100 - sums.prevLowcodeReachedMinPanes - this.panes[0].min - sums.prevPanesSize - sums.nextPanesSize\n          return null\n        }\n      }\n      if (dragLowCodePercentage > 100 - sums.nextPanesSize - this.panes[panesLowCodeToResize[1]].min) {\n        panesLowCodeToResize[1] = this.findNextExpandedPane(splitterLowCodeIndex).index\n        sums.nextLowCodeReachedMinPanes = 0\n        if (panesLowCodeToResize[1] > splitterLowCodeIndex + 1) {\n          this.panes.forEach((pane, i) => {\n            if (i > splitterLowCodeIndex && i < panesLowCodeToResize[1]) {\n              pane.size = pane.min\n              sums.nextLowCodeReachedMinPanes += pane.min\n            }\n          })\n        }\n        sums.nextPanesSize = this.sumLowCodeNextPanesSize(panesLowCodeToResize[1] - 1)\n        if (panesLowCodeToResize[1] === undefined) {\n          sums.nextLowCodeReachedMinPanes = 0\n          this.panes[this.panesCount - 1].size = this.panes[this.panesCount - 1].min\n          this.panes.forEach((pane, i) => {\n            if (i < this.panesCount - 1 && i >= splitterLowCodeIndex + 1) {\n              pane.size = pane.min\n              sums.nextLowCodeReachedMinPanes += pane.min\n            }\n          })\n          this.panes[panesLowCodeToResize[0]].size =\n            100 -\n            sums.prevPanesSize -\n            sums.nextLowCodeReachedMinPanes -\n            this.panes[this.panesCount - 1].min -\n            sums.nextPanesSize\n          return null\n        }\n      }\n      return { sums, panesLowCodeToResize }\n    },\n    sumLowCodePrevPanesSize(splitterLowCodeIndex) {\n      return this.panes.reduce((total, pane, i) => total + (i < splitterLowCodeIndex ? pane.size : 0), 0)\n    },\n    sumLowCodeNextPanesSize(splitterLowCodeIndex) {\n      return this.panes.reduce((total, pane, i) => total + (i > splitterLowCodeIndex + 1 ? pane.size : 0), 0)\n    },\n    findPrevExpandedPane(splitterLowCodeIndex) {\n      const pane = [...this.panes].reverse().find((p) => p.index < splitterLowCodeIndex && p.size > p.min)\n      return pane || {}\n    },\n    findNextExpandedPane(splitterLowCodeIndex) {\n      const pane = this.panes.find((p) => p.index > splitterLowCodeIndex + 1 && p.size > p.min)\n      return pane || {}\n    },\n    checkLowCodeSplitpanesNodes() {\n      const children = Array.from(this.container.children)\n      children.forEach((child) => {\n        const isPane = child.classList.contains('splitpanes__pane')\n        const isSplitter = child.classList.contains('splitpanes-lowcode__splitter')\n        if (!isPane && !isSplitter) {\n          child.parentNode.removeChild(child)\n          return\n        }\n      })\n    },\n\n    addSplitter(paneIndex, nextPaneNode, isVeryFirst = false) {\n      const splitterLowCodeIndex = paneIndex - 1\n      const elm = document.createElement('div')\n      elm.classList.add('splitpanes-lowcode__splitter')\n\n      if (!isVeryFirst) {\n        elm.onmousedown = (event) => this.onMouseDown(event, splitterLowCodeIndex)\n\n        if (typeof window !== 'undefined' && 'ontouchstart' in window) {\n          elm.ontouchstart = (event) => this.onMouseDown(event, splitterLowCodeIndex)\n        }\n        elm.onclick = (event) => this.onSplitterClick(event, splitterLowCodeIndex + 1)\n      }\n\n      if (this.dblClickSplitter) {\n        elm.ondblclick = (event) => this.onSplitterDblClick(event, splitterLowCodeIndex + 1)\n      }\n\n      nextPaneNode.parentNode.insertBefore(elm, nextPaneNode)\n    },\n\n    removeSplitter(node) {\n      node.onmousedown = undefined\n      node.onclick = undefined\n      node.ondblclick = undefined\n      node.parentNode.removeChild(node)\n    },\n\n    redoLowCodeSplitters() {\n      const children = Array.from(this.container.children)\n      children.forEach((el) => {\n        if (el.className.includes('splitpanes-lowcode__splitter')) this.removeSplitter(el)\n      })\n      let paneIndex = 0\n      children.forEach((el) => {\n        if (el.className.includes('splitpanes__pane')) {\n          if (!paneIndex && this.firstSplitter) this.addSplitter(paneIndex, el, true)\n          else if (paneIndex) this.addSplitter(paneIndex, el)\n          paneIndex++\n        }\n      })\n    },\n    requestUpdate({ target, ...args }) {\n      const pane = this.indexedPanes[target._.uid]\n      Object.entries(args).forEach(([key, value]) => {\n        pane[key] = value\n      })\n    },\n\n    onPaneAdd(pane) {\n      let index = -1\n      Array.from(pane.$el.parentNode.children).some((el) => {\n        if (el.className.includes('splitpanes__pane')) index++\n        return el === pane.$el\n      })\n\n      const min = parseFloat(pane.minSize)\n      const max = parseFloat(pane.maxSize)\n      this.panes.splice(index, 0, {\n        index,\n        id: pane._.uid,\n        max: isNaN(max) ? 100 : max,\n        min: isNaN(min) ? 0 : min,\n        givenSize: pane.size,\n        size: pane.size === null ? null : parseFloat(pane.size),\n        update: pane.update\n      })\n\n      this.panes.forEach((p, i) => {\n        p.index = i\n      })\n\n      if (this.ready) {\n        this.$nextTick(() => {\n          this.redoLowCodeSplitters()\n          this.resetLowCodePaneSizes({ addedPane: this.panes[index] })\n          this.$emit('pane-add', {\n            index,\n            panes: this.panes.map((pane) => ({ min: pane.min, max: pane.max, size: pane.size }))\n          })\n        })\n      }\n    },\n\n    onPaneRemove(pane) {\n      const index = this.panes.findIndex((p) => p.id === pane._.uid)\n      const removed = this.panes.splice(index, 1)[0]\n      this.panes.forEach((p, i) => {\n        p.index = i\n      })\n\n      this.$nextTick(() => {\n        this.redoLowCodeSplitters()\n\n        this.resetLowCodePaneSizes({ removedPane: { ...removed, index } })\n\n        this.$emit('pane-remove', {\n          removed,\n          panes: this.panes.map((pane) => ({ min: pane.min, max: pane.max, size: pane.size }))\n        })\n      })\n    },\n\n    resetLowCodePaneSizes(changedPanes = {}) {\n      if (!changedPanes.addedPane && !changedPanes.removedPane) this.initialPanesSizing()\n      else if (this.panes.some((pane) => pane.givenSize !== null || pane.min || pane.max < 100))\n        this.equalizeAfterAddOrRemove(changedPanes)\n      else this.equalize()\n\n      if (this.ready)\n        this.$emit(\n          'resized',\n          this.panes.map((pane) => ({ min: pane.min, max: pane.max, size: pane.size }))\n        )\n    },\n\n    equalize() {\n      const equalSpace = 100 / this.panesCount\n      let leftLowCodeToAllocate = 0\n      const ungrowableLowCode = []\n      const unshrinkableLowCode = []\n\n      this.panes.forEach((pane) => {\n        pane.size = Math.max(Math.min(equalSpace, pane.max), pane.min)\n\n        leftLowCodeToAllocate -= pane.size\n        if (pane.size >= pane.max) ungrowableLowCode.push(pane.id)\n        if (pane.size <= pane.min) unshrinkableLowCode.push(pane.id)\n      })\n\n      if (leftLowCodeToAllocate > 0.1) this.readjustSizes(leftLowCodeToAllocate, ungrowableLowCode, unshrinkableLowCode)\n    },\n\n    initialPanesSizing() {\n      let leftLowCodeToAllocate = 100\n      const ungrowableLowCode = []\n      const unshrinkableLowCode = []\n      let definedSizes = 0\n      this.panes.forEach((pane) => {\n        leftLowCodeToAllocate -= pane.size\n        if (pane.size !== null) definedSizes++\n        if (pane.size >= pane.max) ungrowableLowCode.push(pane.id)\n        if (pane.size <= pane.min) unshrinkableLowCode.push(pane.id)\n      })\n\n      let leftLowCodeToAllocate2 = 100\n      if (leftLowCodeToAllocate > 0.1) {\n        this.panes.forEach((pane) => {\n          if (pane.size === null) {\n            pane.size = Math.max(Math.min(leftLowCodeToAllocate / (this.panesCount - definedSizes), pane.max), pane.min)\n          }\n          leftLowCodeToAllocate2 -= pane.size\n        })\n\n        if (leftLowCodeToAllocate2 > 0.1)\n          this.readjustSizes(leftLowCodeToAllocate, ungrowableLowCode, unshrinkableLowCode)\n      }\n    },\n\n    equalizeAfterAddOrRemove({ addedPane } = {}) {\n      let equalSpace = 100 / this.panesCount\n      let leftLowCodeToAllocate = 0\n      const ungrowableLowCode = []\n      const unshrinkableLowCode = []\n\n      if (addedPane && addedPane.givenSize !== null) {\n        equalSpace = (100 - addedPane.givenSize) / (this.panesCount - 1)\n      }\n      this.panes.forEach((pane) => {\n        leftLowCodeToAllocate -= pane.size\n        if (pane.size >= pane.max) ungrowableLowCode.push(pane.id)\n        if (pane.size <= pane.min) unshrinkableLowCode.push(pane.id)\n      })\n\n      if (Math.abs(leftLowCodeToAllocate) < 0.1) return // Ok.\n\n      this.panes.forEach((pane) => {\n        if (!(addedPane && addedPane.givenSize !== null && addedPane.id === pane.id)) {\n          pane.size = Math.max(Math.min(equalSpace, pane.max), pane.min)\n        }\n\n        leftLowCodeToAllocate -= pane.size\n        if (pane.size >= pane.max) ungrowableLowCode.push(pane.id)\n        if (pane.size <= pane.min) unshrinkableLowCode.push(pane.id)\n      })\n\n      if (leftLowCodeToAllocate > 0.1) this.readjustSizes(leftLowCodeToAllocate, ungrowableLowCode, unshrinkableLowCode)\n    },\n    readjustSizes(leftLowCodeToAllocate, ungrowableLowCode, unshrinkableLowCode) {\n      let equalLowCodeSpaceToAllocate\n      if (leftLowCodeToAllocate > 0)\n        equalLowCodeSpaceToAllocate = leftLowCodeToAllocate / (this.panesCount - ungrowableLowCode.length)\n      else equalLowCodeSpaceToAllocate = leftLowCodeToAllocate / (this.panesCount - unshrinkableLowCode.length)\n\n      this.panes.forEach((pane) => {\n        if (leftLowCodeToAllocate > 0 && !ungrowableLowCode.includes(pane.id)) {\n          const newLowCodePaneSize = Math.max(Math.min(pane.size + equalLowCodeSpaceToAllocate, pane.max), pane.min)\n          const allocated = newLowCodePaneSize - pane.size\n          leftLowCodeToAllocate -= allocated\n          pane.size = newLowCodePaneSize\n        } else if (!unshrinkableLowCode.includes(pane.id)) {\n          const newLowCodePaneSize = Math.max(Math.min(pane.size + equalLowCodeSpaceToAllocate, pane.max), pane.min)\n          const allocated = newLowCodePaneSize - pane.size\n          leftLowCodeToAllocate -= allocated\n          pane.size = newLowCodePaneSize\n        }\n        pane.update({\n          [this.horizontal ? 'height' : 'width']: `${this.indexedPanes[pane.id].size}%`\n        })\n      })\n\n      if (Math.abs(leftLowCodeToAllocate) > 0.1) {\n        this.$nextTick(() => {\n          if (this.ready) {\n            // eslint-disable-next-line no-console\n            console.warn('Splitpanes: Could not resize panes correctly due to their constraints.')\n          }\n        })\n      }\n    }\n  },\n\n  render() {\n    return h(\n      'div',\n      {\n        class: [\n          `splitpanes--${this.horizontal ? 'horizontal' : 'vertical'}`,\n          'splitpanes',\n          {\n            'splitpanes--dragging': this.touch.dragging\n          }\n        ],\n        ref: 'container'\n      },\n      this.$slots.default()\n    )\n  }\n}\n</script>\n\n<style lang=\"less\">\n.splitpanes {\n  height: 100%;\n  width: 100%;\n  display: flex;\n\n  &--horizontal {\n    flex-direction: column;\n  }\n  &--vertical {\n    flex-direction: row;\n  }\n  &--dragging * {\n    user-select: none;\n  }\n\n  &__splitter {\n    touch-action: none;\n  }\n  &__pane {\n    height: 100%;\n    overflow: hidden;\n    width: 100%;\n\n    .splitpanes--horizontal & {\n      transition: height 0.3s ease-out;\n    }\n    .splitpanes--vertical & {\n      transition: width 0.3s ease-out;\n    }\n    .splitpanes--dragging & {\n      transition: none;\n    }\n  }\n  &--vertical > .splitpanes-lowcode__splitter {\n    min-width: 1px;\n    cursor: col-resize;\n  }\n  &--horizontal > .splitpanes-lowcode__splitter {\n    min-height: 1px;\n    cursor: row-resize;\n  }\n}\n.splitpanes.default-theme {\n  .splitpanes__pane {\n    background-color: #f2f2f2;\n  }\n  .splitpanes-lowcode__splitter {\n    background-color: #fff;\n    box-sizing: border-box;\n    position: relative;\n    flex-shrink: 0;\n    &:before,\n    &:after {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      background-color: rgba(0, 0, 0, 0.15);\n      transition: background-color 0.3s;\n    }\n    &:hover:before,\n    &:hover:after {\n      background-color: rgba(0, 0, 0, 0.25);\n    }\n    &:first-child {\n      cursor: auto;\n    }\n  }\n}\n.default-theme {\n  &.splitpanes .splitpanes .splitpanes-lowcode__splitter {\n    z-index: 1;\n  }\n  &.splitpanes--vertical > .splitpanes-lowcode__splitter,\n  .splitpanes--vertical > .splitpanes-lowcode__splitter {\n    width: 7px;\n    border-left: 1px solid #eee;\n    margin-left: -1px;\n    &:after,\n    &:before {\n      width: 1px;\n      transform: translateY(-50%);\n      height: 30px;\n    }\n    &:after {\n      margin-left: 1px;\n    }\n    &:before {\n      margin-left: -2px;\n    }\n  }\n  &.splitpanes--horizontal > .splitpanes-lowcode__splitter,\n  .splitpanes--horizontal > .splitpanes-lowcode__splitter {\n    border-top: 1px solid #eee;\n    margin-top: -1px;\n    height: 7px;\n    &:after,\n    &:before {\n      height: 1px;\n      transform: translateX(-50%);\n      width: 30px;\n    }\n    &:before {\n      margin-top: -2px;\n    }\n    &:after {\n      margin-top: 1px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"splitpanes__pane\" :style=\"style\" @click=\"onPaneClick($event, _.uid)\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Pane',\n  inject: ['requestUpdate', 'onPaneAdd', 'onPaneRemove', 'onPaneClick'],\n\n  props: {\n    size: { type: [Number, String], default: null },\n    minSize: { type: [Number, String], default: 0 },\n    maxSize: { type: [Number, String], default: 100 }\n  },\n\n  data: () => ({\n    style: {}\n  }),\n\n  computed: {\n    sizeNumber() {\n      return this.size || this.size === 0 ? parseFloat(this.size) : null\n    },\n    minSizeNumber() {\n      return parseFloat(this.minSize)\n    },\n    maxSizeNumber() {\n      return parseFloat(this.maxSize)\n    }\n  },\n\n  watch: {\n    sizeNumber(size) {\n      this.requestUpdate({ target: this, size })\n    },\n    minSizeNumber(min) {\n      this.requestUpdate({ target: this, min })\n    },\n    maxSizeNumber(max) {\n      this.requestUpdate({ target: this, max })\n    }\n  },\n\n  mounted() {\n    this.onPaneAdd(this)\n  },\n\n  beforeUnmount() {\n    this.onPaneRemove(this)\n  },\n\n  methods: {\n    // Called from the splitpanes component.\n    update(style) {\n      this.style = style\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"text-input\">\n    <tiny-input :modelValue=\"inputValue\" placeholder=\"请输入内容\" v-bind=\"$attrs\" @input=\"inputChange\">\n      <template #suffix>\n        <tiny-popover\n          ref=\"popoverRef\"\n          width=\"340\"\n          trigger=\"click\"\n          :visible-arrow=\"false\"\n          popper-class=\"i18n-input-popover\"\n          @hide=\"onHide\"\n        >\n          <div class=\"popover-content\">\n            <h3 class=\"title\">绑定国际化</h3>\n            <icon-close class=\"icon-close\" @click=\"closePopover\"></icon-close>\n            <bind-i18n\n              ref=\"addI1i8nRef\"\n              v-model=\"i18nValue\"\n              :lang-data=\"langs\"\n              :is-bind=\"isBind\"\n              :currentLang=\"currentLanguage\"\n              :data=\"modelValue\"\n              :locales=\"i18nResource.locales\"\n              @bind=\"setI18n\"\n            ></bind-i18n>\n          </div>\n\n          <template #reference>\n            <svg-icon name=\"internationalization\" :class=\"['icon-language', { isBind }]\"></svg-icon>\n          </template>\n        </tiny-popover>\n      </template>\n    </tiny-input>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, ref, watchEffect } from 'vue'\nimport { useTranslate } from '@opentiny/tiny-engine-meta-register'\nimport { Input, Popover } from '@opentiny/vue'\nimport { IconClose } from '@opentiny/vue-icon'\nimport BindI18n from './BindI18n.vue'\n\nexport default {\n  name: 'I18nInput',\n  components: {\n    TinyInput: Input,\n    BindI18n,\n    TinyPopover: Popover,\n    IconClose: IconClose()\n  },\n  inheritAttrs: false,\n  props: {\n    modelValue: {\n      type: [String, Object],\n      default: ''\n    }\n  },\n  setup(props, { emit }) {\n    const { currentLanguage, getLangs, i18nResource } = useTranslate()\n    const langs = computed(() => getLangs())\n    const isBind = computed(() => props.modelValue?.type === 'i18n')\n    const inputValue = ref('')\n    const i18nValue = ref(props.modelValue?.key || '')\n    const addI1i8nRef = ref(null)\n    const popoverRef = ref(null)\n\n    watchEffect(() => {\n      i18nValue.value = props.modelValue?.key || ''\n      inputValue.value = useTranslate().translate(props.modelValue)\n    })\n\n    const inputChange = (event: { target: { value: any } }) => {\n      emit('update:modelValue', event.target.value) // 直接修改时去掉绑定\n    }\n\n    const setI18n = (data: any) => {\n      emit('update:modelValue', data)\n    }\n\n    const onHide = () => {\n      if (addI1i8nRef.value) {\n        addI1i8nRef.value.showEditItem = false\n      }\n    }\n\n    const closePopover = () => {\n      popoverRef.value.state.showPopper = false\n    }\n\n    return {\n      isBind,\n      inputValue,\n      inputChange,\n      langs,\n      i18nValue,\n      currentLanguage,\n      i18nResource,\n      setI18n,\n      addI1i8nRef,\n      onHide,\n      closePopover,\n      popoverRef\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.text-input {\n  position: relative;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n.popover-content {\n  position: relative;\n\n  .title {\n    margin-top: 0;\n    margin-bottom: 16px;\n    font-size: 14px;\n    line-height: 20px;\n  }\n  .icon-close {\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n}\n.icon-language {\n  color: var(--te-component-common-icon-color);\n  outline: none;\n  &:hover {\n    cursor: pointer;\n    color: var(--te-component-common-icon-color-hover);\n  }\n  &.isBind {\n    color: var(--te-component-common-icon-color-primary);\n  }\n}\n</style>\n\n<style>\n.tiny-popover.tiny-popover.tiny-popper[x-placement].i18n-input-popover {\n  padding: 20px;\n}\n</style>\n","<template>\n  <div draggable=\"true\" class=\"drag-item\" @dragstart=\"dragstart\" @dragend=\"dragend\" @click=\"handleClick\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { getMetaApi } from '@opentiny/tiny-engine-meta-register'\nimport { utils } from '@opentiny/tiny-engine-utils'\n\nconst { deepClone } = utils\n\nexport default {\n  props: {\n    data: Object\n  },\n  emits: ['click'],\n  setup(props, { emit }) {\n    const canvasApi = getMetaApi('engine.canvas').canvasApi\n\n    const dragstart = (e: any) => {\n      if (props.data && canvasApi.value?.dragStart) {\n        const data = deepClone(props.data)\n        canvasApi.value.dragStart(data)\n\n        // 设置拖拽鼠标样式和设置拖拽预览图\n        const target = e.target.querySelector('.component-item-component')\n        e.dataTransfer.effectAllowed = 'move'\n        e.dataTransfer.setDragImage(target, 10, 10)\n      }\n    }\n\n    const dragend = (e) => {\n      // 拖拽结束，但是此时的 dropEffect 为 none ，说明此时没有完成拖拽，需要清理一下拖拽状态\n      if (e.dataTransfer?.dropEffect === 'none') {\n        canvasApi.value?.dragEnd?.()\n      }\n    }\n\n    const handleClick = () => {\n      if (props.data) {\n        const data = deepClone(props.data)\n\n        emit('click', data)\n      }\n    }\n\n    return {\n      dragstart,\n      dragend,\n      handleClick\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n.drag-item {\n  user-select: none;\n  cursor: move;\n}\n</style>\n","<template>\n  <tiny-popover\n    trigger=\"hover\"\n    :open-delay=\"1000\"\n    popper-class=\"toolbar-right-popover\"\n    append-to-body\n    :content=\"content\"\n  >\n    <template #reference>\n      <span class=\"icon\">\n        <span class=\"icon-hides\" v-bind=\"$attrs\">\n          <svg-icon :name=\"icon\"></svg-icon>\n          <span v-if=\"options?.showDots\" class=\"dots\"></span>\n        </span>\n      </span>\n    </template>\n  </tiny-popover>\n</template>\n<script lang=\"ts\">\nimport { Popover } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyPopover: Popover\n  },\n  props: {\n    icon: {\n      type: String,\n      default: ''\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.dots {\n  width: 6px;\n  height: 6px;\n  background: var(--te-component-common-error-color);\n  border-radius: 50%;\n  display: inline-block;\n  position: absolute;\n  top: 4px;\n  right: 3px;\n  z-index: 100;\n}\n</style>\n","<template>\n  <div class=\"svg-wrap\">\n    <span v-if=\"options?.showDots\" class=\"dot\"></span>\n    <tiny-button class=\"toolbar-button\">\n      <svg-icon v-if=\"icon\" :name=\"icon\"></svg-icon>\n      <span class=\"save-title\">{{ content }}</span>\n      <slot></slot>\n    </tiny-button>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { Button } from '@opentiny/vue'\n\nexport default {\n  components: {\n    TinyButton: Button\n  },\n  props: {\n    icon: {\n      type: String,\n      default: ''\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.toolbar-button {\n  background-color: var(--te-component-toolbar-base-button-bg-color) !important;\n  border: none !important;\n  min-width: 70px;\n  height: 26px;\n  line-height: 24px;\n  padding: 0 8px;\n  border-radius: 4px;\n  margin-right: 4px;\n}\n\n.svg-wrap {\n  position: relative;\n\n  .dot {\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    background: var(--te-component-common-error-color);\n    border-radius: 50%;\n    top: -3px;\n    right: 2px;\n    z-index: 100;\n  }\n  .svg-icon.svg-icon.svg-icon {\n    color: var(--te-component-common-icon-color-primary);\n  }\n}\n</style>\n","<template>\n  <span class=\"toolbar-item-wrap\" @click=\"click\">\n    <component :is=\"getRender()\" v-bind=\"state\">\n      <template #default>\n        <slot name=\"button\"></slot>\n      </template>\n    </component>\n    <slot></slot>\n    <span v-if=\"state.options?.collapsed && content\">{{ state.content }}</span>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, computed } from 'vue'\nimport ToolbarBaseIcon from './toolbar-built-in/ToolbarBaseIcon.vue'\nimport ToolbarBaseButton from './toolbar-built-in/ToolbarBaseButton.vue'\n\nexport default {\n  components: {\n    ToolbarBaseIcon,\n    ToolbarBaseButton\n  },\n  props: {\n    icon: {\n      type: String,\n      default: ''\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: ['click-api'],\n  setup(props, { emit }) {\n    const state = reactive({\n      icon: computed(() => props.icon),\n      content: computed(() => props.content),\n      options: computed(() => props.options)\n    })\n\n    const click = () => {\n      emit('click-api')\n    }\n\n    const getRender = () => {\n      if (props.options.renderType === 'button') {\n        return ToolbarBaseButton\n      }\n      if (props.options.renderType === 'icon') {\n        return ToolbarBaseIcon\n      }\n      return false\n    }\n\n    return {\n      state,\n      click,\n      getRender\n    }\n  }\n}\n</script>\n<style scoped>\n.split-line {\n  color: var(--te-component-common-border-color);\n  margin: 0 4px;\n  font-size: 14px;\n}\n.toolbar-item-wrap {\n  display: flex;\n  align-items: center;\n}\n.toolbar-item-wrap div {\n  display: inline-block;\n}\n</style>\n","import { h, render } from 'vue'\nimport { Modal } from '@opentiny/vue'\n\nexport interface ModalOptions {\n  title: string\n  status?: string\n  message: string | ((...args: any[]) => any)\n  exec?: (...args: any[]) => any\n  cancel?: (...args: any[]) => any\n  showFooter?: boolean\n}\n\nexport type ConfirmOptions = ModalOptions\n\nconst confirm = ({ title, status, message, exec, cancel, showFooter = true }: ConfirmOptions) => {\n  Modal.confirm({\n    title,\n    status,\n    showFooter,\n    message: () => {\n      return (\n        <div class=\"modal-content\">\n          <div class=\"wrap\">{typeof message === 'string' ? message : <message />}</div>\n        </div>\n      )\n    }\n  }).then((res: string) => {\n    if (res === 'confirm' && typeof exec === 'function') {\n      exec()\n    } else if (typeof cancel === 'function') {\n      cancel()\n    }\n  })\n}\n\nexport type MessageOptions = Pick<ModalOptions, 'title' | 'status' | 'message' | 'exec'> & { width?: string }\n\nconst message = ({ title, status, message, exec, width = '400' }: MessageOptions) => {\n  Modal.alert({\n    title,\n    status,\n    'confirm-btn-props': { text: '确定' },\n    width: width,\n    message() {\n      return (\n        <div div class=\"modal-content\">\n          <div class=\"wrap\">{typeof message === 'string' ? message : <message />}</div>\n        </div>\n      )\n    }\n  }).then(() => {\n    if (typeof exec === 'function') {\n      exec()\n    }\n  })\n}\n\nconst topbox = (options: ModalOptions) => {\n  const props = { ...options, modelValue: true }\n  let TopBox = h(Modal, props)\n  const modalEl = document.createElement('div')\n\n  const close = () => {\n    TopBox.el?.remove()\n    TopBox = null\n  }\n\n  render(TopBox, modalEl)\n\n  return {\n    TopBox,\n    close\n  }\n}\n\ndeclare global {\n  interface Window {\n    topbox?: (options: ModalOptions) => { TopBox: any; close: () => void }\n    message?: (options: MessageOptions) => void\n  }\n}\n\nwindow.topbox = topbox\nwindow.message = message\n\nexport default {\n  confirm,\n  message,\n  topbox\n}\n","import { Notify } from '@opentiny/vue'\n\nconst durationMap = {\n  info: 5000,\n  success: 5000,\n  warning: 10000,\n  error: 10000\n}\n\nexport interface NotifyOptions {\n  [key: string]: any\n  title?: string\n  message: string\n  type: keyof typeof durationMap\n  customClass?: string\n  position?: string\n}\n\nconst useNotify = (config: NotifyOptions) => {\n  const { customClass, title, type = 'info', position = 'top-right', ...otherConfig } = config\n\n  Notify({\n    duration: durationMap[type],\n    ...otherConfig,\n    position,\n    title,\n    type,\n    customClass: `${customClass}`,\n    verticalOffset: 46\n  })\n}\n\nexport default useNotify\n","/**\n * Copyright (c) 2023 - present TinyEngine Authors.\n * Copyright (c) 2023 - present Huawei Cloud Computing Technologies Co., Ltd.\n *\n * Use of this source code is governed by an MIT-style license.\n *\n * THE OPEN SOURCE SOFTWARE IN THIS PRODUCT IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL,\n * BUT WITHOUT ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS FOR\n * A PARTICULAR PURPOSE. SEE THE APPLICABLE LICENSES FOR MORE DETAILS.\n *\n */\n\nimport type { App } from 'vue'\nimport ConfigGroup from './ConfigGroup.vue'\nimport ConfigItem from './ConfigItem.vue'\nexport { default as PluginSetting } from './PluginSetting.vue'\nexport { default as PluginPanel } from './PluginPanel.vue'\nexport { default as PluginRightMenu } from './PluginRightMenu.vue'\nexport { default as SvgButton } from './SvgButton.vue'\nexport { default as LinkButton } from './LinkButton.vue'\nexport { default as ConfigCollapse } from './ConfigCollapse.vue'\nexport { default as ConfigRender } from './ConfigRender.vue'\nexport { default as MetaForm } from './MetaForm.vue'\nexport { default as MetaListActions } from './MetaListActions.vue'\nexport { default as MetaListTitle } from './MetaListTitle.vue'\nexport { default as MetaListItems } from './MetaListItems.vue'\nexport { default as MetaListItem } from './MetaListItem.vue'\nexport { default as MetaModal, useModal } from './MetaModal.vue'\nexport { default as MetaModalItem } from './MetaModalItem.vue'\nexport { default as MetaPopover } from './MetaPopover.vue'\nexport { default as MetaCodeEditor } from './MetaCodeEditor.vue'\nexport { default as VideoGuide } from './VideoGuide.vue'\nexport { default as MonacoEditor } from './MonacoEditor.vue'\nexport { default as BlockHistoryList } from './BlockHistoryList.vue'\nexport { default as BlockLinkField } from './BlockLinkField.vue'\nexport { default as BlockLinkEvent } from './BlockLinkEvent.vue'\nexport { default as BlockDescription } from './BlockDescription.vue'\nexport { default as PluginBlockList } from './PluginBlockList.vue'\nexport { default as SelectAll } from './SelectAll.vue'\nexport { default as ButtonGroup } from './ButtonGroup.vue'\nexport { default as CloseIcon } from './CloseIcon.vue'\nexport { default as LifeCycles } from './LifeCycles.vue'\nexport { default as EmptyTip } from './EmptyTip.vue'\nexport { default as MaskModal } from './MaskModal.vue'\nexport { default as VueMonaco, setGlobalMonacoEditorTheme } from './VueMonaco.vue'\nexport { default as PublicIcon } from './PublicIcon.vue'\nexport { default as BindI18n } from './BindI18n.vue'\nexport { default as BlockDeployDialog } from './BlockDeployDialog.vue'\nexport { default as SearchEmpty } from './SearchEmpty.vue'\nexport { default as MetaDescription } from './MetaDescription.vue'\nexport { default as MetaList } from './MetaList.vue'\nexport { default as MetaChildItem } from './MetaChildItem.vue'\nexport { default as SplitPanes } from './SplitPanes.vue'\nexport { default as Pane } from './Pane.vue'\nexport { default as I18nInput } from './I18nInput.vue'\nexport { default as CanvasDragItem } from './CanvasDragItem.vue'\nexport { default as ToolbarBase } from './ToolbarBase.vue'\nexport { default as Modal } from './Modal'\nexport { default as Notify } from './Notify'\nexport { ConfigGroup, ConfigItem }\n\nexport const injectGlobalComponents = {\n  install: (app: App<Element>) => {\n    const globalComponents = {\n      ConfigGroup,\n      ConfigItem\n    }\n    Object.entries(globalComponents).forEach(([name, component]) => {\n      app.component(name, component)\n    })\n  }\n}\n","import {\n  generateApp,\n  parseRequiredBlocks,\n  genSFCWithDefaultPlugin,\n  type IAppSchema\n} from '@opentiny/tiny-engine-dsl-vue'\nimport defaultPrettierConfig from '../../js/config-files/prettierrc'\n\n// 应用出码默认配置\nconst defaultOptions = {\n  pluginConfig: {\n    formatCode: {\n      // 默认格式化配置\n      ...defaultPrettierConfig\n    }\n  }\n}\n\n// 应用出码\nconst generateAppCode = async (appSchema: IAppSchema, options = {}) => {\n  const instance = generateApp({ ...defaultOptions, ...options })\n\n  return instance.generate(appSchema)\n}\n\n// 页面出码\nconst generatePageCode = (...args: any[]) => {\n  return genSFCWithDefaultPlugin(...args)\n}\n\n/**\n * 获取所有嵌套的区块 schema\n * @param {*} pageSchema 页面 schema\n * @param {*} fetchBlockSchemaApi 获取 blockSchema 的 api\n * @param {*} blockSet 已经获取的区块 set，默认不需要传\n * @returns\n */\nconst getAllNestedBlocksSchema = async (pageSchema: any, fetchBlockSchemaApi: any, blockSet = new Set<string>()) => {\n  const res: any[] = []\n\n  const blockNames = parseRequiredBlocks(pageSchema)\n  const promiseList = blockNames\n    .filter((name: string) => {\n      if (blockSet.has(name)) {\n        return false\n      }\n\n      blockSet.add(name)\n\n      return true\n    })\n    .map((name: any) => fetchBlockSchemaApi(name))\n  const schemaList = await Promise.allSettled(promiseList)\n  const extraList: any[] = []\n\n  schemaList.forEach((item: { value: any[]; status: string }) => {\n    const blockItem = item.value?.[0]\n\n    if (item.status !== 'fulfilled' || !blockItem) {\n      return\n    }\n\n    const historyId = blockItem?.current_history\n    const historySchema = blockItem?.histories?.find?.((historyItem: any) => historyItem?.id === historyId)\n\n    let schemaContent = null\n\n    if (historyId && historySchema?.content) {\n      schemaContent = historySchema.content\n    } else {\n      schemaContent = blockItem?.content\n    }\n\n    if (!schemaContent) {\n      return\n    }\n\n    // 区块 schema 中加上当前版本号，让后续数据支持缓存或更丰富的操作\n    schemaContent.version = historyId || ''\n    // 区块子依赖\n    schemaContent.subBlockDeps = blockNames\n\n    res.push(schemaContent)\n\n    extraList.push(getAllNestedBlocksSchema(schemaContent, fetchBlockSchemaApi, blockSet))\n  })\n  ;(await Promise.allSettled(extraList)).forEach((item) => {\n    if (item.status === 'fulfilled' && item.value) {\n      res.push(...item.value)\n    }\n  })\n\n  return res\n}\n\nexport const GenerateCodeService = {\n  id: 'engine.service.generateCode',\n  type: 'MetaService',\n  options: {},\n  apis: {\n    parseRequiredBlocks,\n    getAllNestedBlocksSchema,\n    generatePageCode,\n    generateAppCode\n  }\n}\n","import { useMessage, useModal, defineService, getMetaApi, META_SERVICE } from '@opentiny/tiny-engine-meta-register'\nimport { watch } from 'vue'\n\nconst getBaseInfo = () => {\n  const paramsMap = new URLSearchParams(location.search)\n  const id = paramsMap.get('id')\n  const blockId = paramsMap.get('blockid')\n  const pageId = paramsMap.get('pageid')\n  const previewId = paramsMap.get('previewid')\n  const type = paramsMap.get('type')\n  const version = paramsMap.get('version')\n\n  return {\n    type: type || 'app',\n    id,\n    pageId,\n    previewId,\n    blockId,\n    version\n  }\n}\n\nconst initialState = {\n  userInfo: null as any,\n  // 当前应用\n  appInfo: {\n    id: '',\n    name: '',\n    app_desc: '',\n    app_website: '',\n    obs_url: null,\n    published_at: '',\n    created_at: '',\n    updated_at: '',\n    platform: '',\n    state: null,\n    published: false,\n    tenant: null,\n    editor_url: ''\n  },\n  // 应用列表\n  appList: [] as any[]\n}\n\nconst getUserInfo = () => {\n  // 获取登录用户信息\n  return getMetaApi(META_SERVICE.Http)\n    .get('/platform-center/api/user/me')\n    .catch((error: { message: any }) => {\n      useModal().message({ message: error.message, status: 'error' })\n    })\n}\n\n// 获取当前应用的信息\nconst fetchAppInfo = (appId: string) => getMetaApi(META_SERVICE.Http).get(`/app-center/api/apps/detail/${appId}`)\n\n// 获取应用列表\nconst fetchAppList = (platformId: string) =>\n  getMetaApi(META_SERVICE.Http).get(`/app-center/api/apps/list/${platformId}`)\n\nconst { subscribe, publish } = useMessage()\n\nconst postLocationHistoryChanged = (data: any) => publish({ topic: 'locationHistoryChanged', data })\n\n/**\n * 过滤掉没有变化的URL参数。pageId和blockId互斥，如果同时存在，会去掉blockId\n * @param {Record<string, any>} params\n * @returns\n */\nconst filterParams = (params: Record<string, any>) => {\n  const fieldsMap = ['pageId', 'blockId', 'previewId'].reduce((result, field) => {\n    result[field] = field.toLowerCase()\n    return result\n  }, {} as Record<string, any>)\n\n  const paramFileds = Object.keys(params)\n  const url = new URL(window.location.href)\n  const changedParams: any = {}\n\n  Object.entries(fieldsMap).forEach(([field, urlParamKey]) => {\n    if (paramFileds.includes(field) && params[field] !== url.searchParams.get(urlParamKey)) {\n      changedParams[field] = params[field]\n    }\n  })\n\n  const changedParamFields = Object.keys(changedParams)\n  // pageId和blockId互斥，如果同时存在，会去掉blockId\n  if (changedParamFields.includes('pageId') && changedParamFields.includes('blockId')) {\n    delete changedParams.blockId\n  }\n\n  return changedParams\n}\n\n/**\n * 支持pageId, blockId, previewId 批量更新，pageId和blockId互斥，如果同时存在，会去掉blockId\n * @param {*} params\n * @param {boolean} replace\n * @returns\n */\nconst updateParams = (params: any, replace: boolean = false) => {\n  const changedParams = filterParams(params)\n  const url = new URL(window.location.href)\n\n  const { pageId, blockId, previewId } = changedParams\n  const changedParamFields = Object.keys(changedParams)\n\n  if (changedParamFields.length === 0) {\n    return\n  }\n\n  // pageId 与 blockId 互斥\n  if (changedParamFields.includes('pageId')) {\n    url.searchParams.delete('blockid')\n    url.searchParams.set('pageid', pageId)\n  } else if (changedParamFields.includes('blockId')) {\n    url.searchParams.delete('pageid')\n    url.searchParams.set('blockid', blockId)\n  }\n\n  if (changedParamFields.includes('previewId')) {\n    if (previewId) {\n      url.searchParams.set('previewid', previewId)\n    } else {\n      url.searchParams.delete('previewid')\n    }\n  }\n\n  if (replace) {\n    window.history.replaceState({}, '', url)\n  } else {\n    window.history.pushState({}, '', url)\n  }\n\n  postLocationHistoryChanged(changedParams)\n}\n\nconst updatePageId = (pageId: string) => {\n  updateParams({ pageId })\n}\n\nconst updateBlockId = (blockId: string) => {\n  updateParams({ blockId })\n}\n\nconst updatePreviewId = (previewId: string, replace = false) => {\n  updateParams({ previewId }, replace)\n}\n\nexport default defineService({\n  id: META_SERVICE.GlobalService,\n  type: 'MetaService',\n  options: {\n    enableTitleUpdate: true\n  },\n  initialState,\n  init: ({ state, options }) => {\n    watch(\n      () => state.appInfo,\n      (appInfo) => {\n        publish({ topic: 'app_info_changed', data: appInfo })\n      }\n    )\n\n    watch(\n      () => state.appList,\n      (appList) => {\n        publish({ topic: 'app_list_changed', data: appList })\n      }\n    )\n\n    subscribe({\n      topic: 'app_id_changed',\n      callback: (appId: string) => {\n        if (!appId) {\n          // eslint-disable-next-line no-console\n          console.error('Invalid appId received in app_id_changed event')\n\n          return\n        }\n\n        fetchAppInfo(appId).then((app: any) => {\n          state.appInfo = app\n\n          if (options.enableTitleUpdate) {\n            // 监听应用 ID 变化，根据应用名称设置网页 title\n            document.title = `${app.name} —— TinyEngine 前端可视化设计器`\n          }\n        })\n      }\n    })\n\n    subscribe({\n      topic: 'platform_id_changed',\n      callback: (platformId: string) => {\n        if (!platformId) {\n          // eslint-disable-next-line no-console\n          console.error('Received platform_id_changed event with no platformId')\n\n          return\n        }\n        fetchAppList(platformId).then((list: any[]) => {\n          state.appList = list\n        })\n      }\n    })\n\n    getUserInfo().then((data: any) => {\n      if (data) {\n        state.userInfo = data\n      }\n      publish({ topic: 'global_service_init_finish' })\n    })\n  },\n  apis: () => ({\n    getBaseInfo,\n    postLocationHistoryChanged,\n    updateParams,\n    updatePageId,\n    updateBlockId,\n    updatePreviewId\n  })\n})\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n// eslint-disable-next-line func-names\nvar kindOf = (function(cache) {\n  // eslint-disable-next-line func-names\n  return function(thing) {\n    var str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n  };\n})(Object.create(null));\n\nfunction kindOfTest(type) {\n  type = type.toLowerCase();\n  return function isKindOf(thing) {\n    return kindOf(thing) === type;\n  };\n}\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return Array.isArray(val);\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nvar isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a empty Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a empty Object, otherwise false\n */\nfunction isEmptyObject(val) {\n  return val && Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nvar isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nvar isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nvar isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nvar isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} thing The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(thing) {\n  var pattern = '[object FormData]';\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) ||\n    toString.call(thing) === pattern ||\n    (isFunction(thing.toString) && thing.toString() === pattern)\n  );\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n * @function\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nvar isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  var product;\n  if (typeof navigator !== 'undefined' && (\n    (product = navigator.product) === 'ReactNative' ||\n    product === 'NativeScript' ||\n    product === 'NS')\n  ) {\n    return false;\n  }\n\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n */\n\nfunction inherits(constructor, superConstructor, props, descriptors) {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n * @returns {Object}\n */\n\nfunction toFlatObject(sourceObj, destObj, filter, propFilter) {\n  var props;\n  var i;\n  var prop;\n  var merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && Object.getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/*\n * determines whether a string ends with the characters of a specified string\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n * @returns {boolean}\n */\nfunction endsWith(str, searchString, position) {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  var lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n * @param {*} [thing]\n * @returns {?Array}\n */\nfunction toArray(thing) {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  var i = thing.length;\n  if (!isNumber(i)) return null;\n  var arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n// eslint-disable-next-line func-names\nvar isTypedArray = (function(TypedArray) {\n  // eslint-disable-next-line func-names\n  return function(thing) {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && Object.getPrototypeOf(Uint8Array));\n\nfunction forEachEntry(obj, fn) {\n  var generator = obj && obj[Symbol.iterator];\n\n  var iterator = generator.call(obj);\n\n  var result;\n\n  while ((result = iterator.next()) && !result.done) {\n    var pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\nfunction matchAll(regExp, str) {\n  var matches;\n  var arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\nvar isHTMLForm = kindOfTest('HTMLFormElement');\n\nvar hasOwnProperty = (function resolver(_hasOwnProperty) {\n  return function(obj, prop) {\n    return _hasOwnProperty.call(obj, prop);\n  };\n})(Object.prototype.hasOwnProperty);\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isEmptyObject: isEmptyObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM,\n  inherits: inherits,\n  toFlatObject: toFlatObject,\n  kindOf: kindOf,\n  kindOfTest: kindOfTest,\n  endsWith: endsWith,\n  toArray: toArray,\n  isTypedArray: isTypedArray,\n  isFileList: isFileList,\n  forEachEntry: forEachEntry,\n  matchAll: matchAll,\n  isHTMLForm: isHTMLForm,\n  hasOwnProperty: hasOwnProperty\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nvar prototype = AxiosError.prototype;\nvar descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(function(code) {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = function(error, code, config, request, response, customProps) {\n  var axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nmodule.exports = AxiosError;\n","'use strict';\n\n/* eslint-env browser */\nmodule.exports = typeof self === 'object' ? self.FormData : window.FormData;\n","// eslint-disable-next-line strict\nmodule.exports = require('form-data');\n","'use strict';\n\nvar utils = require('../utils');\nvar AxiosError = require('../core/AxiosError');\nvar envFormData = require('../env/classes/FormData');\n\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nvar predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\nfunction isSpecCompliant(thing) {\n  return thing && utils.isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator];\n}\n\n/**\n * Convert a data object to FormData\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n * @returns {Object}\n **/\n\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (envFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  var metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  var visitor = options.visitor || defaultVisitor;\n  var dots = options.dots;\n  var indexes = options.indexes;\n  var _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  var useBlob = _Blob && isSpecCompliant(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    var arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        (utils.isFileList(value) || utils.endsWith(key, '[]') && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !utils.isUndefined(el) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  var stack = [];\n\n  var exposedHelpers = Object.assign(predicates, {\n    defaultVisitor: defaultVisitor,\n    convertValue: convertValue,\n    isVisitable: isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      var result = !utils.isUndefined(el) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nmodule.exports = toFormData;\n","'use strict';\n\nvar toFormData = require('./toFormData');\n\nfunction encode(str) {\n  var charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nvar prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  var _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nmodule.exports = AxiosURLSearchParams;\n","'use strict';\n\nvar utils = require('../utils');\nvar AxiosURLSearchParams = require('../helpers/AxiosURLSearchParams');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var hashmarkIndex = url.indexOf('#');\n\n  if (hashmarkIndex !== -1) {\n    url = url.slice(0, hashmarkIndex);\n  }\n\n  var _encode = options && options.encode || encode;\n\n  var serializerParams = utils.isURLSearchParams(params) ?\n    params.toString() :\n    new AxiosURLSearchParams(params, options).toString(_encode);\n\n  if (serializerParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializerParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Clear all interceptors from the stack\n */\nInterceptorManager.prototype.clear = function clear() {\n  if (this.handlers) {\n    this.handlers = [];\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nmodule.exports = {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nvar AxiosURLSearchParams = require('../../../helpers/AxiosURLSearchParams');\n\nmodule.exports = typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nmodule.exports = FormData;\n","'use strict';\n\nmodule.exports = {\n  isBrowser: true,\n  classes: {\n    URLSearchParams: require('./classes/URLSearchParams'),\n    FormData: require('./classes/FormData'),\n    Blob: Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nmodule.exports = require('./node/');\n","'use strict';\n\nvar utils = require('../utils');\nvar toFormData = require('./toFormData');\nvar platform = require('../platform/');\n\nmodule.exports = function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(function(match) {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\nfunction arrayToObject(arr) {\n  var obj = {};\n  var keys = Object.keys(arr);\n  var i;\n  var len = keys.length;\n  var key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    var name = path[index++];\n    var isNumericKey = Number.isFinite(+name);\n    var isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProperty(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    var result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    var obj = {};\n\n    utils.forEachEntry(formData, function(name, value) {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nmodule.exports = formDataToJSON;\n","'use strict';\n\nvar AxiosError = require('./AxiosError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.slice(0, i)).toLowerCase();\n    val = utils.trim(line.slice(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n      * Parse a URL to discover it's components\n      *\n      * @param {String} url The URL to be parsed\n      * @returns {Object}\n      */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n          // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n      * Determine if a URL shares the same origin as the current location\n      *\n      * @param {String} requestURL The URL to test\n      * @returns {boolean} True if URL shares the same origin, otherwise false\n      */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n    // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar AxiosError = require('../core/AxiosError');\nvar utils = require('../utils');\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nmodule.exports = CanceledError;\n","'use strict';\n\nmodule.exports = function parseProtocol(url) {\n  var match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar transitionalDefaults = require('../defaults/transitional');\nvar AxiosError = require('../core/AxiosError');\nvar CanceledError = require('../cancel/CanceledError');\nvar parseProtocol = require('../helpers/parseProtocol');\nvar platform = require('../platform');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n    var withXSRFToken = config.withXSRFToken;\n    var onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    if (utils.isFormData(requestData) && utils.isStandardBrowserEnv()) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      var transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(config));\n      if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(fullPath))) {\n        // Add xsrf header\n        var xsrfValue = config.xsrfHeaderName && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n        if (xsrfValue) {\n          requestHeaders[config.xsrfHeaderName] = xsrfValue;\n        }\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = function(cancel) {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, req) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    // false, 0 (zero number), and '' (empty string) are valid JSON values\n    if (!requestData && requestData !== false && requestData !== 0 && requestData !== '') {\n      requestData = null;\n    }\n\n    var protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar normalizeHeaderName = require('../helpers/normalizeHeaderName');\nvar AxiosError = require('../core/AxiosError');\nvar transitionalDefaults = require('./transitional');\nvar toFormData = require('../helpers/toFormData');\nvar toURLEncodedForm = require('../helpers/toURLEncodedForm');\nvar platform = require('../platform');\nvar formDataToJSON = require('../helpers/formDataToJSON');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('../adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('../adapters/http');\n  }\n  return adapter;\n}\n\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nvar defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    var contentType = headers && headers['Content-Type'] || '';\n    var hasJSONContentType = contentType.indexOf('application/json') > -1;\n    var isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    var isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n\n    var isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') !== -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        var _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional || defaults.transitional;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      var silentJSONParsing = transitional && transitional.silentJSONParsing;\n      var strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Number} status HTTP status code\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, status, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers, status);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar CanceledError = require('../cancel/CanceledError');\nvar normalizeHeaderName = require('../helpers/normalizeHeaderName');\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    null,\n    config.transformRequest\n  );\n\n  normalizeHeaderName(config.headers, 'Accept');\n  normalizeHeaderName(config.headers, 'Content-Type');\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      response.status,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          reason.response.status,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isEmptyObject(source)) {\n      return utils.merge({}, target);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(undefined, config2[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(prop) {\n    if (prop in config2) {\n      return getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  var mergeMap = {\n    'url': valueFromConfig2,\n    'method': valueFromConfig2,\n    'data': valueFromConfig2,\n    'baseURL': defaultToConfig2,\n    'transformRequest': defaultToConfig2,\n    'transformResponse': defaultToConfig2,\n    'paramsSerializer': defaultToConfig2,\n    'timeout': defaultToConfig2,\n    'timeoutMessage': defaultToConfig2,\n    'withCredentials': defaultToConfig2,\n    'withXSRFToken': defaultToConfig2,\n    'adapter': defaultToConfig2,\n    'responseType': defaultToConfig2,\n    'xsrfCookieName': defaultToConfig2,\n    'xsrfHeaderName': defaultToConfig2,\n    'onUploadProgress': defaultToConfig2,\n    'onDownloadProgress': defaultToConfig2,\n    'decompress': defaultToConfig2,\n    'maxContentLength': defaultToConfig2,\n    'maxBodyLength': defaultToConfig2,\n    'beforeRedirect': defaultToConfig2,\n    'transport': defaultToConfig2,\n    'httpAgent': defaultToConfig2,\n    'httpsAgent': defaultToConfig2,\n    'cancelToken': defaultToConfig2,\n    'socketPath': defaultToConfig2,\n    'responseEncoding': defaultToConfig2,\n    'validateStatus': mergeDirectKeys\n  };\n\n  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {\n    var merge = mergeMap[prop] || mergeDeepProperties;\n    var configValue = merge(prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n};\n","module.exports = {\n  \"version\": \"0.28.0\"\n};","'use strict';\n\nvar VERSION = require('../env/data').version;\nvar AxiosError = require('../core/AxiosError');\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nmodule.exports = {\n  assertOptions: assertOptions,\n  validators: validators\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar buildFullPath = require('./buildFullPath');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n * @param {?Object} config\n */\nAxios.prototype.request = function request(configOrUrl, config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof configOrUrl === 'string') {\n    config = config || {};\n    config.url = configOrUrl;\n  } else {\n    config = configOrUrl || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean),\n      forcedJSONParsing: validators.transitional(validators.boolean),\n      clarifyTimeoutError: validators.transitional(validators.boolean)\n    }, false);\n  }\n\n  var paramsSerializer = config.paramsSerializer;\n\n  utils.isFunction(paramsSerializer) && (config.paramsSerializer = {serialize: paramsSerializer});\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain = chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  var fullPath = buildFullPath(config.baseURL, config.url);\n  return buildURL(fullPath, config.params, config.paramsSerializer);\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method: method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url: url,\n        data: data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar CanceledError = require('./CanceledError');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n\n  // eslint-disable-next-line func-names\n  this.promise.then(function(cancel) {\n    if (!token._listeners) return;\n\n    var i = token._listeners.length;\n\n    while (i-- > 0) {\n      token._listeners[i](cancel);\n    }\n    token._listeners = null;\n  });\n\n  // eslint-disable-next-line func-names\n  this.promise.then = function(onfulfilled) {\n    var _resolve;\n    // eslint-disable-next-line func-names\n    var promise = new Promise(function(resolve) {\n      token.subscribe(resolve);\n      _resolve = resolve;\n    }).then(onfulfilled);\n\n    promise.cancel = function reject() {\n      token.unsubscribe(_resolve);\n    };\n\n    return promise;\n  };\n\n  executor(function cancel(message, config, request) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new CanceledError(message, config, request);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Subscribe to the cancel signal\n */\n\nCancelToken.prototype.subscribe = function subscribe(listener) {\n  if (this.reason) {\n    listener(this.reason);\n    return;\n  }\n\n  if (this._listeners) {\n    this._listeners.push(listener);\n  } else {\n    this._listeners = [listener];\n  }\n};\n\n/**\n * Unsubscribe from the cancel signal\n */\n\nCancelToken.prototype.unsubscribe = function unsubscribe(listener) {\n  if (!this._listeners) {\n    return;\n  }\n  var index = this._listeners.indexOf(listener);\n  if (index !== -1) {\n    this._listeners.splice(index, 1);\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\nvar formDataToJSON = require('./helpers/formDataToJSON');\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = require('./cancel/CanceledError');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\naxios.VERSION = require('./env/data').version;\naxios.toFormData = require('./helpers/toFormData');\n\n// Expose AxiosError class\naxios.AxiosError = require('../lib/core/AxiosError');\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\naxios.formToJSON = function(thing) {\n  return formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n};\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","module.exports = require('./lib/axios');","import { defineService, META_SERVICE } from '@opentiny/tiny-engine-meta-register'\nimport axios from 'axios'\n\nlet http = null\n\nconst createInterceptorHandler =\n  (http) =>\n  ({ data, type }) => {\n    if (typeof data === 'function') {\n      http.interceptors[type].use(data)\n\n      return\n    }\n\n    if (Array.isArray(data)) {\n      data.forEach((item) => {\n        if (!item) return\n\n        if (Array.isArray(item)) {\n          http.interceptors[type].use(...item)\n\n          return\n        }\n\n        if (typeof item === 'function') {\n          http.interceptors[type].use(item)\n        }\n      })\n    }\n  }\n\nexport default defineService({\n  id: META_SERVICE.Http,\n  type: 'MetaService',\n  options: {\n    axiosConfig: {\n      // axios 配置\n      baseURL: '',\n      withCredentials: false, // 跨域请求时是否需要使用凭证\n      headers: {} // 请求头\n    },\n    interceptors: {\n      // 拦截器\n      request: [], // 支持配置多个请求拦截器，先注册后执行\n      response: [] // 支持配置多个响应拦截器，先注册先执行\n    }\n  },\n  init: ({ options = {} }) => {\n    const { axiosConfig = {}, interceptors = {} } = options\n    const { request = [], response = [] } = interceptors\n\n    http = axios.create(axiosConfig)\n    const addInterceptors = createInterceptorHandler(http)\n    addInterceptors({ data: request, type: 'request' })\n    addInterceptors({ data: response, type: 'response' })\n  },\n  apis: () => ({\n    getHttp: () => http,\n    get: (...args) => http?.get(...args),\n    post: (...args) => http?.post(...args),\n    request: (...args) => http?.request(...args),\n    put: (...args) => http?.put(...args),\n    delete: (...args) => http?.delete(...args)\n  })\n})\n","export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n","import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n","import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n","import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n","import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n","export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n","import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n","import { z } from \"zod\";\nexport const LATEST_PROTOCOL_VERSION = \"2025-06-18\";\nexport const DEFAULT_NEGOTIATED_PROTOCOL_VERSION = \"2025-03-26\";\nexport const SUPPORTED_PROTOCOL_VERSIONS = [\n    LATEST_PROTOCOL_VERSION,\n    \"2025-03-26\",\n    \"2024-11-05\",\n    \"2024-10-07\",\n];\n/* JSON-RPC types */\nexport const JSONRPC_VERSION = \"2.0\";\n/**\n * A progress token, used to associate progress notifications with the original request.\n */\nexport const ProgressTokenSchema = z.union([z.string(), z.number().int()]);\n/**\n * An opaque token used to represent a cursor for pagination.\n */\nexport const CursorSchema = z.string();\nconst RequestMetaSchema = z\n    .object({\n    /**\n     * If specified, the caller is requesting out-of-band progress notifications for this request (as represented by notifications/progress). The value of this parameter is an opaque token that will be attached to any subsequent notifications. The receiver is not obligated to provide these notifications.\n     */\n    progressToken: z.optional(ProgressTokenSchema),\n})\n    .passthrough();\nconst BaseRequestParamsSchema = z\n    .object({\n    _meta: z.optional(RequestMetaSchema),\n})\n    .passthrough();\nexport const RequestSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseRequestParamsSchema),\n});\nconst BaseNotificationParamsSchema = z\n    .object({\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\nexport const NotificationSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseNotificationParamsSchema),\n});\nexport const ResultSchema = z\n    .object({\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * A uniquely identifying ID for a request in JSON-RPC.\n */\nexport const RequestIdSchema = z.union([z.string(), z.number().int()]);\n/**\n * A request that expects a response.\n */\nexport const JSONRPCRequestSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n})\n    .merge(RequestSchema)\n    .strict();\nexport const isJSONRPCRequest = (value) => JSONRPCRequestSchema.safeParse(value).success;\n/**\n * A notification which does not expect a response.\n */\nexport const JSONRPCNotificationSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n})\n    .merge(NotificationSchema)\n    .strict();\nexport const isJSONRPCNotification = (value) => JSONRPCNotificationSchema.safeParse(value).success;\n/**\n * A successful (non-error) response to a request.\n */\nexport const JSONRPCResponseSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    result: ResultSchema,\n})\n    .strict();\nexport const isJSONRPCResponse = (value) => JSONRPCResponseSchema.safeParse(value).success;\n/**\n * Error codes defined by the JSON-RPC specification.\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    // SDK error codes\n    ErrorCode[ErrorCode[\"ConnectionClosed\"] = -32000] = \"ConnectionClosed\";\n    ErrorCode[ErrorCode[\"RequestTimeout\"] = -32001] = \"RequestTimeout\";\n    // Standard JSON-RPC error codes\n    ErrorCode[ErrorCode[\"ParseError\"] = -32700] = \"ParseError\";\n    ErrorCode[ErrorCode[\"InvalidRequest\"] = -32600] = \"InvalidRequest\";\n    ErrorCode[ErrorCode[\"MethodNotFound\"] = -32601] = \"MethodNotFound\";\n    ErrorCode[ErrorCode[\"InvalidParams\"] = -32602] = \"InvalidParams\";\n    ErrorCode[ErrorCode[\"InternalError\"] = -32603] = \"InternalError\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * A response to a request that indicates an error occurred.\n */\nexport const JSONRPCErrorSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    error: z.object({\n        /**\n         * The error type that occurred.\n         */\n        code: z.number().int(),\n        /**\n         * A short description of the error. The message SHOULD be limited to a concise single sentence.\n         */\n        message: z.string(),\n        /**\n         * Additional information about the error. The value of this member is defined by the sender (e.g. detailed error information, nested errors etc.).\n         */\n        data: z.optional(z.unknown()),\n    }),\n})\n    .strict();\nexport const isJSONRPCError = (value) => JSONRPCErrorSchema.safeParse(value).success;\nexport const JSONRPCMessageSchema = z.union([\n    JSONRPCRequestSchema,\n    JSONRPCNotificationSchema,\n    JSONRPCResponseSchema,\n    JSONRPCErrorSchema,\n]);\n/* Empty result */\n/**\n * A response that indicates success but carries no data.\n */\nexport const EmptyResultSchema = ResultSchema.strict();\n/* Cancellation */\n/**\n * This notification can be sent by either side to indicate that it is cancelling a previously-issued request.\n *\n * The request SHOULD still be in-flight, but due to communication latency, it is always possible that this notification MAY arrive after the request has already finished.\n *\n * This notification indicates that the result will be unused, so any associated processing SHOULD cease.\n *\n * A client MUST NOT attempt to cancel its `initialize` request.\n */\nexport const CancelledNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/cancelled\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The ID of the request to cancel.\n         *\n         * This MUST correspond to the ID of a request previously issued in the same direction.\n         */\n        requestId: RequestIdSchema,\n        /**\n         * An optional string describing the reason for the cancellation. This MAY be logged or presented to the user.\n         */\n        reason: z.string().optional(),\n    }),\n});\n/* Base Metadata */\n/**\n * Base metadata interface for common properties across resources, tools, prompts, and implementations.\n */\nexport const BaseMetadataSchema = z\n    .object({\n    /** Intended for programmatic or logical use, but used as a display name in past specs or fallback */\n    name: z.string(),\n    /**\n    * Intended for UI and end-user contexts — optimized to be human-readable and easily understood,\n    * even by those unfamiliar with domain-specific terminology.\n    *\n    * If not provided, the name should be used for display (except for Tool,\n    * where `annotations.title` should be given precedence over using `name`,\n    * if present).\n    */\n    title: z.optional(z.string()),\n})\n    .passthrough();\n/* Initialization */\n/**\n * Describes the name and version of an MCP implementation.\n */\nexport const ImplementationSchema = BaseMetadataSchema.extend({\n    version: z.string(),\n});\n/**\n * Capabilities a client may support. Known capabilities are defined here, in this schema, but this is not a closed set: any client can define its own, additional capabilities.\n */\nexport const ClientCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the client supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports sampling from an LLM.\n     */\n    sampling: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports eliciting user input.\n     */\n    elicitation: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports listing roots.\n     */\n    roots: z.optional(z\n        .object({\n        /**\n         * Whether the client supports issuing notifications for changes to the roots list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n})\n    .passthrough();\n/**\n * This request is sent from the client to the server when it first connects, asking it to begin initialization.\n */\nexport const InitializeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"initialize\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The latest version of the Model Context Protocol that the client supports. The client MAY decide to support older versions as well.\n         */\n        protocolVersion: z.string(),\n        capabilities: ClientCapabilitiesSchema,\n        clientInfo: ImplementationSchema,\n    }),\n});\nexport const isInitializeRequest = (value) => InitializeRequestSchema.safeParse(value).success;\n/**\n * Capabilities that a server may support. Known capabilities are defined here, in this schema, but this is not a closed set: any server can define its own, additional capabilities.\n */\nexport const ServerCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the server supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending log messages to the client.\n     */\n    logging: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending completions to the client.\n     */\n    completions: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server offers any prompt templates.\n     */\n    prompts: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the prompt list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any resources to read.\n     */\n    resources: z.optional(z\n        .object({\n        /**\n         * Whether this server supports clients subscribing to resource updates.\n         */\n        subscribe: z.optional(z.boolean()),\n        /**\n         * Whether this server supports issuing notifications for changes to the resource list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any tools to call.\n     */\n    tools: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the tool list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n})\n    .passthrough();\n/**\n * After receiving an initialize request from the client, the server sends this response.\n */\nexport const InitializeResultSchema = ResultSchema.extend({\n    /**\n     * The version of the Model Context Protocol that the server wants to use. This may not match the version that the client requested. If the client cannot support this version, it MUST disconnect.\n     */\n    protocolVersion: z.string(),\n    capabilities: ServerCapabilitiesSchema,\n    serverInfo: ImplementationSchema,\n    /**\n     * Instructions describing how to use the server and its features.\n     *\n     * This can be used by clients to improve the LLM's understanding of available tools, resources, etc. It can be thought of like a \"hint\" to the model. For example, this information MAY be added to the system prompt.\n     */\n    instructions: z.optional(z.string()),\n});\n/**\n * This notification is sent from the client to the server after initialization has finished.\n */\nexport const InitializedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/initialized\"),\n});\nexport const isInitializedNotification = (value) => InitializedNotificationSchema.safeParse(value).success;\n/* Ping */\n/**\n * A ping, issued by either the server or the client, to check that the other party is still alive. The receiver must promptly respond, or else may be disconnected.\n */\nexport const PingRequestSchema = RequestSchema.extend({\n    method: z.literal(\"ping\"),\n});\n/* Progress notifications */\nexport const ProgressSchema = z\n    .object({\n    /**\n     * The progress thus far. This should increase every time progress is made, even if the total is unknown.\n     */\n    progress: z.number(),\n    /**\n     * Total number of items to process (or total progress required), if known.\n     */\n    total: z.optional(z.number()),\n    /**\n     * An optional message describing the current progress.\n     */\n    message: z.optional(z.string()),\n})\n    .passthrough();\n/**\n * An out-of-band notification used to inform the receiver of a progress update for a long-running request.\n */\nexport const ProgressNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/progress\"),\n    params: BaseNotificationParamsSchema.merge(ProgressSchema).extend({\n        /**\n         * The progress token which was given in the initial request, used to associate this notification with the request that is proceeding.\n         */\n        progressToken: ProgressTokenSchema,\n    }),\n});\n/* Pagination */\nexport const PaginatedRequestSchema = RequestSchema.extend({\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * An opaque token representing the current pagination position.\n         * If provided, the server should return results starting after this cursor.\n         */\n        cursor: z.optional(CursorSchema),\n    }).optional(),\n});\nexport const PaginatedResultSchema = ResultSchema.extend({\n    /**\n     * An opaque token representing the pagination position after the last returned result.\n     * If present, there may be more results available.\n     */\n    nextCursor: z.optional(CursorSchema),\n});\n/* Resources */\n/**\n * The contents of a specific resource or sub-resource.\n */\nexport const ResourceContentsSchema = z\n    .object({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\nexport const TextResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * The text of the item. This must only be set if the item can actually be represented as text (not binary data).\n     */\n    text: z.string(),\n});\n/**\n * A Zod schema for validating Base64 strings that is more performant and\n * robust for very large inputs than the default regex-based check. It avoids\n * stack overflows by using the native `atob` function for validation.\n */\nconst Base64Schema = z.string().refine((val) => {\n    try {\n        // atob throws a DOMException if the string contains characters\n        // that are not part of the Base64 character set.\n        atob(val);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}, { message: \"Invalid Base64 string\" });\nexport const BlobResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * A base64-encoded string representing the binary data of the item.\n     */\n    blob: Base64Schema,\n});\n/**\n * A known resource that the server is capable of reading.\n */\nexport const ResourceSchema = BaseMetadataSchema.extend({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * A description of what this resource represents.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n});\n/**\n * A template description for resources available on the server.\n */\nexport const ResourceTemplateSchema = BaseMetadataSchema.extend({\n    /**\n     * A URI template (according to RFC 6570) that can be used to construct resource URIs.\n     */\n    uriTemplate: z.string(),\n    /**\n     * A description of what this template is for.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type for all resources that match this template. This should only be included if all resources matching this template have the same type.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n});\n/**\n * Sent from the client to request a list of resources the server has.\n */\nexport const ListResourcesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"resources/list\"),\n});\n/**\n * The server's response to a resources/list request from the client.\n */\nexport const ListResourcesResultSchema = PaginatedResultSchema.extend({\n    resources: z.array(ResourceSchema),\n});\n/**\n * Sent from the client to request a list of resource templates the server has.\n */\nexport const ListResourceTemplatesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"resources/templates/list\"),\n});\n/**\n * The server's response to a resources/templates/list request from the client.\n */\nexport const ListResourceTemplatesResultSchema = PaginatedResultSchema.extend({\n    resourceTemplates: z.array(ResourceTemplateSchema),\n});\n/**\n * Sent from the client to the server, to read a specific resource URI.\n */\nexport const ReadResourceRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/read\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to read. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * The server's response to a resources/read request from the client.\n */\nexport const ReadResourceResultSchema = ResultSchema.extend({\n    contents: z.array(z.union([TextResourceContentsSchema, BlobResourceContentsSchema])),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of resources it can read from has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ResourceListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/resources/list_changed\"),\n});\n/**\n * Sent from the client to request resources/updated notifications from the server whenever a particular resource changes.\n */\nexport const SubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/subscribe\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to subscribe to. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * Sent from the client to request cancellation of resources/updated notifications from the server. This should follow a previous resources/subscribe request.\n */\nexport const UnsubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/unsubscribe\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to unsubscribe from.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * A notification from the server to the client, informing it that a resource has changed and may need to be read again. This should only be sent if the client previously sent a resources/subscribe request.\n */\nexport const ResourceUpdatedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/resources/updated\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The URI of the resource that has been updated. This might be a sub-resource of the one that the client actually subscribed to.\n         */\n        uri: z.string(),\n    }),\n});\n/* Prompts */\n/**\n * Describes an argument that a prompt can accept.\n */\nexport const PromptArgumentSchema = z\n    .object({\n    /**\n     * The name of the argument.\n     */\n    name: z.string(),\n    /**\n     * A human-readable description of the argument.\n     */\n    description: z.optional(z.string()),\n    /**\n     * Whether this argument must be provided.\n     */\n    required: z.optional(z.boolean()),\n})\n    .passthrough();\n/**\n * A prompt or prompt template that the server offers.\n */\nexport const PromptSchema = BaseMetadataSchema.extend({\n    /**\n     * An optional description of what this prompt provides\n     */\n    description: z.optional(z.string()),\n    /**\n     * A list of arguments to use for templating the prompt.\n     */\n    arguments: z.optional(z.array(PromptArgumentSchema)),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n});\n/**\n * Sent from the client to request a list of prompts and prompt templates the server has.\n */\nexport const ListPromptsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"prompts/list\"),\n});\n/**\n * The server's response to a prompts/list request from the client.\n */\nexport const ListPromptsResultSchema = PaginatedResultSchema.extend({\n    prompts: z.array(PromptSchema),\n});\n/**\n * Used by the client to get a prompt provided by the server.\n */\nexport const GetPromptRequestSchema = RequestSchema.extend({\n    method: z.literal(\"prompts/get\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The name of the prompt or prompt template.\n         */\n        name: z.string(),\n        /**\n         * Arguments to use for templating the prompt.\n         */\n        arguments: z.optional(z.record(z.string())),\n    }),\n});\n/**\n * Text provided to or from an LLM.\n */\nexport const TextContentSchema = z\n    .object({\n    type: z.literal(\"text\"),\n    /**\n     * The text content of the message.\n     */\n    text: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * An image provided to or from an LLM.\n */\nexport const ImageContentSchema = z\n    .object({\n    type: z.literal(\"image\"),\n    /**\n     * The base64-encoded image data.\n     */\n    data: Base64Schema,\n    /**\n     * The MIME type of the image. Different providers may support different image types.\n     */\n    mimeType: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * An Audio provided to or from an LLM.\n */\nexport const AudioContentSchema = z\n    .object({\n    type: z.literal(\"audio\"),\n    /**\n     * The base64-encoded audio data.\n     */\n    data: Base64Schema,\n    /**\n     * The MIME type of the audio. Different providers may support different audio types.\n     */\n    mimeType: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * The contents of a resource, embedded into a prompt or tool call result.\n */\nexport const EmbeddedResourceSchema = z\n    .object({\n    type: z.literal(\"resource\"),\n    resource: z.union([TextResourceContentsSchema, BlobResourceContentsSchema]),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * A resource that the server is capable of reading, included in a prompt or tool call result.\n *\n * Note: resource links returned by tools are not guaranteed to appear in the results of `resources/list` requests.\n */\nexport const ResourceLinkSchema = ResourceSchema.extend({\n    type: z.literal(\"resource_link\"),\n});\n/**\n * A content block that can be used in prompts and tool results.\n */\nexport const ContentBlockSchema = z.union([\n    TextContentSchema,\n    ImageContentSchema,\n    AudioContentSchema,\n    ResourceLinkSchema,\n    EmbeddedResourceSchema,\n]);\n/**\n * Describes a message returned as part of a prompt.\n */\nexport const PromptMessageSchema = z\n    .object({\n    role: z.enum([\"user\", \"assistant\"]),\n    content: ContentBlockSchema,\n})\n    .passthrough();\n/**\n * The server's response to a prompts/get request from the client.\n */\nexport const GetPromptResultSchema = ResultSchema.extend({\n    /**\n     * An optional description for the prompt.\n     */\n    description: z.optional(z.string()),\n    messages: z.array(PromptMessageSchema),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of prompts it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const PromptListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/prompts/list_changed\"),\n});\n/* Tools */\n/**\n * Additional properties describing a Tool to clients.\n *\n * NOTE: all properties in ToolAnnotations are **hints**.\n * They are not guaranteed to provide a faithful description of\n * tool behavior (including descriptive properties like `title`).\n *\n * Clients should never make tool use decisions based on ToolAnnotations\n * received from untrusted servers.\n */\nexport const ToolAnnotationsSchema = z\n    .object({\n    /**\n     * A human-readable title for the tool.\n     */\n    title: z.optional(z.string()),\n    /**\n     * If true, the tool does not modify its environment.\n     *\n     * Default: false\n     */\n    readOnlyHint: z.optional(z.boolean()),\n    /**\n     * If true, the tool may perform destructive updates to its environment.\n     * If false, the tool performs only additive updates.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: true\n     */\n    destructiveHint: z.optional(z.boolean()),\n    /**\n     * If true, calling the tool repeatedly with the same arguments\n     * will have no additional effect on the its environment.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: false\n     */\n    idempotentHint: z.optional(z.boolean()),\n    /**\n     * If true, this tool may interact with an \"open world\" of external\n     * entities. If false, the tool's domain of interaction is closed.\n     * For example, the world of a web search tool is open, whereas that\n     * of a memory tool is not.\n     *\n     * Default: true\n     */\n    openWorldHint: z.optional(z.boolean()),\n})\n    .passthrough();\n/**\n * Definition for a tool the client can call.\n */\nexport const ToolSchema = BaseMetadataSchema.extend({\n    /**\n     * A human-readable description of the tool.\n     */\n    description: z.optional(z.string()),\n    /**\n     * A JSON Schema object defining the expected parameters for the tool.\n     */\n    inputSchema: z\n        .object({\n        type: z.literal(\"object\"),\n        properties: z.optional(z.object({}).passthrough()),\n        required: z.optional(z.array(z.string())),\n    })\n        .passthrough(),\n    /**\n     * An optional JSON Schema object defining the structure of the tool's output returned in\n     * the structuredContent field of a CallToolResult.\n     */\n    outputSchema: z.optional(z.object({\n        type: z.literal(\"object\"),\n        properties: z.optional(z.object({}).passthrough()),\n        required: z.optional(z.array(z.string())),\n    })\n        .passthrough()),\n    /**\n     * Optional additional tool information.\n     */\n    annotations: z.optional(ToolAnnotationsSchema),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n});\n/**\n * Sent from the client to request a list of tools the server has.\n */\nexport const ListToolsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"tools/list\"),\n});\n/**\n * The server's response to a tools/list request from the client.\n */\nexport const ListToolsResultSchema = PaginatedResultSchema.extend({\n    tools: z.array(ToolSchema),\n});\n/**\n * The server's response to a tool call.\n */\nexport const CallToolResultSchema = ResultSchema.extend({\n    /**\n     * A list of content objects that represent the result of the tool call.\n     *\n     * If the Tool does not define an outputSchema, this field MUST be present in the result.\n     * For backwards compatibility, this field is always present, but it may be empty.\n     */\n    content: z.array(ContentBlockSchema).default([]),\n    /**\n     * An object containing structured tool output.\n     *\n     * If the Tool defines an outputSchema, this field MUST be present in the result, and contain a JSON object that matches the schema.\n     */\n    structuredContent: z.object({}).passthrough().optional(),\n    /**\n     * Whether the tool call ended in an error.\n     *\n     * If not set, this is assumed to be false (the call was successful).\n     *\n     * Any errors that originate from the tool SHOULD be reported inside the result\n     * object, with `isError` set to true, _not_ as an MCP protocol-level error\n     * response. Otherwise, the LLM would not be able to see that an error occurred\n     * and self-correct.\n     *\n     * However, any errors in _finding_ the tool, an error indicating that the\n     * server does not support tool calls, or any other exceptional conditions,\n     * should be reported as an MCP error response.\n     */\n    isError: z.optional(z.boolean()),\n});\n/**\n * CallToolResultSchema extended with backwards compatibility to protocol version 2024-10-07.\n */\nexport const CompatibilityCallToolResultSchema = CallToolResultSchema.or(ResultSchema.extend({\n    toolResult: z.unknown(),\n}));\n/**\n * Used by the client to invoke a tool provided by the server.\n */\nexport const CallToolRequestSchema = RequestSchema.extend({\n    method: z.literal(\"tools/call\"),\n    params: BaseRequestParamsSchema.extend({\n        name: z.string(),\n        arguments: z.optional(z.record(z.unknown())),\n    }),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of tools it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ToolListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/tools/list_changed\"),\n});\n/* Logging */\n/**\n * The severity of a log message.\n */\nexport const LoggingLevelSchema = z.enum([\n    \"debug\",\n    \"info\",\n    \"notice\",\n    \"warning\",\n    \"error\",\n    \"critical\",\n    \"alert\",\n    \"emergency\",\n]);\n/**\n * A request from the client to the server, to enable or adjust logging.\n */\nexport const SetLevelRequestSchema = RequestSchema.extend({\n    method: z.literal(\"logging/setLevel\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The level of logging that the client wants to receive from the server. The server should send all logs at this level and higher (i.e., more severe) to the client as notifications/logging/message.\n         */\n        level: LoggingLevelSchema,\n    }),\n});\n/**\n * Notification of a log message passed from server to client. If no logging/setLevel request has been sent from the client, the server MAY decide which messages to send automatically.\n */\nexport const LoggingMessageNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/message\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The severity of this log message.\n         */\n        level: LoggingLevelSchema,\n        /**\n         * An optional name of the logger issuing this message.\n         */\n        logger: z.optional(z.string()),\n        /**\n         * The data to be logged, such as a string message or an object. Any JSON serializable type is allowed here.\n         */\n        data: z.unknown(),\n    }),\n});\n/* Sampling */\n/**\n * Hints to use for model selection.\n */\nexport const ModelHintSchema = z\n    .object({\n    /**\n     * A hint for a model name.\n     */\n    name: z.string().optional(),\n})\n    .passthrough();\n/**\n * The server's preferences for model selection, requested of the client during sampling.\n */\nexport const ModelPreferencesSchema = z\n    .object({\n    /**\n     * Optional hints to use for model selection.\n     */\n    hints: z.optional(z.array(ModelHintSchema)),\n    /**\n     * How much to prioritize cost when selecting a model.\n     */\n    costPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize sampling speed (latency) when selecting a model.\n     */\n    speedPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize intelligence and capabilities when selecting a model.\n     */\n    intelligencePriority: z.optional(z.number().min(0).max(1)),\n})\n    .passthrough();\n/**\n * Describes a message issued to or received from an LLM API.\n */\nexport const SamplingMessageSchema = z\n    .object({\n    role: z.enum([\"user\", \"assistant\"]),\n    content: z.union([TextContentSchema, ImageContentSchema, AudioContentSchema]),\n})\n    .passthrough();\n/**\n * A request from the server to sample an LLM via the client. The client has full discretion over which model to select. The client should also inform the user before beginning sampling, to allow them to inspect the request (human in the loop) and decide whether to approve it.\n */\nexport const CreateMessageRequestSchema = RequestSchema.extend({\n    method: z.literal(\"sampling/createMessage\"),\n    params: BaseRequestParamsSchema.extend({\n        messages: z.array(SamplingMessageSchema),\n        /**\n         * An optional system prompt the server wants to use for sampling. The client MAY modify or omit this prompt.\n         */\n        systemPrompt: z.optional(z.string()),\n        /**\n         * A request to include context from one or more MCP servers (including the caller), to be attached to the prompt. The client MAY ignore this request.\n         */\n        includeContext: z.optional(z.enum([\"none\", \"thisServer\", \"allServers\"])),\n        temperature: z.optional(z.number()),\n        /**\n         * The maximum number of tokens to sample, as requested by the server. The client MAY choose to sample fewer tokens than requested.\n         */\n        maxTokens: z.number().int(),\n        stopSequences: z.optional(z.array(z.string())),\n        /**\n         * Optional metadata to pass through to the LLM provider. The format of this metadata is provider-specific.\n         */\n        metadata: z.optional(z.object({}).passthrough()),\n        /**\n         * The server's preferences for which model to select.\n         */\n        modelPreferences: z.optional(ModelPreferencesSchema),\n    }),\n});\n/**\n * The client's response to a sampling/create_message request from the server. The client should inform the user before returning the sampled message, to allow them to inspect the response (human in the loop) and decide whether to allow the server to see it.\n */\nexport const CreateMessageResultSchema = ResultSchema.extend({\n    /**\n     * The name of the model that generated the message.\n     */\n    model: z.string(),\n    /**\n     * The reason why sampling stopped.\n     */\n    stopReason: z.optional(z.enum([\"endTurn\", \"stopSequence\", \"maxTokens\"]).or(z.string())),\n    role: z.enum([\"user\", \"assistant\"]),\n    content: z.discriminatedUnion(\"type\", [\n        TextContentSchema,\n        ImageContentSchema,\n        AudioContentSchema\n    ]),\n});\n/* Elicitation */\n/**\n * Primitive schema definition for boolean fields.\n */\nexport const BooleanSchemaSchema = z\n    .object({\n    type: z.literal(\"boolean\"),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    default: z.optional(z.boolean()),\n})\n    .passthrough();\n/**\n * Primitive schema definition for string fields.\n */\nexport const StringSchemaSchema = z\n    .object({\n    type: z.literal(\"string\"),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    minLength: z.optional(z.number()),\n    maxLength: z.optional(z.number()),\n    format: z.optional(z.enum([\"email\", \"uri\", \"date\", \"date-time\"])),\n})\n    .passthrough();\n/**\n * Primitive schema definition for number fields.\n */\nexport const NumberSchemaSchema = z\n    .object({\n    type: z.enum([\"number\", \"integer\"]),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    minimum: z.optional(z.number()),\n    maximum: z.optional(z.number()),\n})\n    .passthrough();\n/**\n * Primitive schema definition for enum fields.\n */\nexport const EnumSchemaSchema = z\n    .object({\n    type: z.literal(\"string\"),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    enum: z.array(z.string()),\n    enumNames: z.optional(z.array(z.string())),\n})\n    .passthrough();\n/**\n * Union of all primitive schema definitions.\n */\nexport const PrimitiveSchemaDefinitionSchema = z.union([\n    BooleanSchemaSchema,\n    StringSchemaSchema,\n    NumberSchemaSchema,\n    EnumSchemaSchema,\n]);\n/**\n * A request from the server to elicit user input via the client.\n * The client should present the message and form fields to the user.\n */\nexport const ElicitRequestSchema = RequestSchema.extend({\n    method: z.literal(\"elicitation/create\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The message to present to the user.\n         */\n        message: z.string(),\n        /**\n         * The schema for the requested user input.\n         */\n        requestedSchema: z\n            .object({\n            type: z.literal(\"object\"),\n            properties: z.record(z.string(), PrimitiveSchemaDefinitionSchema),\n            required: z.optional(z.array(z.string())),\n        })\n            .passthrough(),\n    }),\n});\n/**\n * The client's response to an elicitation/create request from the server.\n */\nexport const ElicitResultSchema = ResultSchema.extend({\n    /**\n     * The user's response action.\n     */\n    action: z.enum([\"accept\", \"decline\", \"cancel\"]),\n    /**\n     * The collected user input content (only present if action is \"accept\").\n     */\n    content: z.optional(z.record(z.string(), z.unknown())),\n});\n/* Autocomplete */\n/**\n * A reference to a resource or resource template definition.\n */\nexport const ResourceTemplateReferenceSchema = z\n    .object({\n    type: z.literal(\"ref/resource\"),\n    /**\n     * The URI or URI template of the resource.\n     */\n    uri: z.string(),\n})\n    .passthrough();\n/**\n * @deprecated Use ResourceTemplateReferenceSchema instead\n */\nexport const ResourceReferenceSchema = ResourceTemplateReferenceSchema;\n/**\n * Identifies a prompt.\n */\nexport const PromptReferenceSchema = z\n    .object({\n    type: z.literal(\"ref/prompt\"),\n    /**\n     * The name of the prompt or prompt template\n     */\n    name: z.string(),\n})\n    .passthrough();\n/**\n * A request from the client to the server, to ask for completion options.\n */\nexport const CompleteRequestSchema = RequestSchema.extend({\n    method: z.literal(\"completion/complete\"),\n    params: BaseRequestParamsSchema.extend({\n        ref: z.union([PromptReferenceSchema, ResourceTemplateReferenceSchema]),\n        /**\n         * The argument's information\n         */\n        argument: z\n            .object({\n            /**\n             * The name of the argument\n             */\n            name: z.string(),\n            /**\n             * The value of the argument to use for completion matching.\n             */\n            value: z.string(),\n        })\n            .passthrough(),\n        context: z.optional(z.object({\n            /**\n             * Previously-resolved variables in a URI template or prompt.\n             */\n            arguments: z.optional(z.record(z.string(), z.string())),\n        })),\n    }),\n});\n/**\n * The server's response to a completion/complete request\n */\nexport const CompleteResultSchema = ResultSchema.extend({\n    completion: z\n        .object({\n        /**\n         * An array of completion values. Must not exceed 100 items.\n         */\n        values: z.array(z.string()).max(100),\n        /**\n         * The total number of completion options available. This can exceed the number of values actually sent in the response.\n         */\n        total: z.optional(z.number().int()),\n        /**\n         * Indicates whether there are additional completion options beyond those provided in the current response, even if the exact total is unknown.\n         */\n        hasMore: z.optional(z.boolean()),\n    })\n        .passthrough(),\n});\n/* Roots */\n/**\n * Represents a root directory or file that the server can operate on.\n */\nexport const RootSchema = z\n    .object({\n    /**\n     * The URI identifying the root. This *must* start with file:// for now.\n     */\n    uri: z.string().startsWith(\"file://\"),\n    /**\n     * An optional name for the root.\n     */\n    name: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * Sent from the server to request a list of root URIs from the client.\n */\nexport const ListRootsRequestSchema = RequestSchema.extend({\n    method: z.literal(\"roots/list\"),\n});\n/**\n * The client's response to a roots/list request from the server.\n */\nexport const ListRootsResultSchema = ResultSchema.extend({\n    roots: z.array(RootSchema),\n});\n/**\n * A notification from the client to the server, informing it that the list of roots has changed.\n */\nexport const RootsListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/roots/list_changed\"),\n});\n/* Client messages */\nexport const ClientRequestSchema = z.union([\n    PingRequestSchema,\n    InitializeRequestSchema,\n    CompleteRequestSchema,\n    SetLevelRequestSchema,\n    GetPromptRequestSchema,\n    ListPromptsRequestSchema,\n    ListResourcesRequestSchema,\n    ListResourceTemplatesRequestSchema,\n    ReadResourceRequestSchema,\n    SubscribeRequestSchema,\n    UnsubscribeRequestSchema,\n    CallToolRequestSchema,\n    ListToolsRequestSchema,\n]);\nexport const ClientNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    InitializedNotificationSchema,\n    RootsListChangedNotificationSchema,\n]);\nexport const ClientResultSchema = z.union([\n    EmptyResultSchema,\n    CreateMessageResultSchema,\n    ElicitResultSchema,\n    ListRootsResultSchema,\n]);\n/* Server messages */\nexport const ServerRequestSchema = z.union([\n    PingRequestSchema,\n    CreateMessageRequestSchema,\n    ElicitRequestSchema,\n    ListRootsRequestSchema,\n]);\nexport const ServerNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    LoggingMessageNotificationSchema,\n    ResourceUpdatedNotificationSchema,\n    ResourceListChangedNotificationSchema,\n    ToolListChangedNotificationSchema,\n    PromptListChangedNotificationSchema,\n]);\nexport const ServerResultSchema = z.union([\n    EmptyResultSchema,\n    InitializeResultSchema,\n    CompleteResultSchema,\n    GetPromptResultSchema,\n    ListPromptsResultSchema,\n    ListResourcesResultSchema,\n    ListResourceTemplatesResultSchema,\n    ReadResourceResultSchema,\n    CallToolResultSchema,\n    ListToolsResultSchema,\n]);\nexport class McpError extends Error {\n    constructor(code, message, data) {\n        super(`MCP error ${code}: ${message}`);\n        this.code = code;\n        this.data = data;\n        this.name = \"McpError\";\n    }\n}\n//# sourceMappingURL=types.js.map","import { CancelledNotificationSchema, ErrorCode, isJSONRPCError, isJSONRPCRequest, isJSONRPCResponse, isJSONRPCNotification, McpError, PingRequestSchema, ProgressNotificationSchema, } from \"../types.js\";\n/**\n * The default request timeout, in miliseconds.\n */\nexport const DEFAULT_REQUEST_TIMEOUT_MSEC = 60000;\n/**\n * Implements MCP protocol framing on top of a pluggable transport, including\n * features like request/response linking, notifications, and progress.\n */\nexport class Protocol {\n    constructor(_options) {\n        this._options = _options;\n        this._requestMessageId = 0;\n        this._requestHandlers = new Map();\n        this._requestHandlerAbortControllers = new Map();\n        this._notificationHandlers = new Map();\n        this._responseHandlers = new Map();\n        this._progressHandlers = new Map();\n        this._timeoutInfo = new Map();\n        this._pendingDebouncedNotifications = new Set();\n        this.setNotificationHandler(CancelledNotificationSchema, (notification) => {\n            const controller = this._requestHandlerAbortControllers.get(notification.params.requestId);\n            controller === null || controller === void 0 ? void 0 : controller.abort(notification.params.reason);\n        });\n        this.setNotificationHandler(ProgressNotificationSchema, (notification) => {\n            this._onprogress(notification);\n        });\n        this.setRequestHandler(PingRequestSchema, \n        // Automatic pong by default.\n        (_request) => ({}));\n    }\n    _setupTimeout(messageId, timeout, maxTotalTimeout, onTimeout, resetTimeoutOnProgress = false) {\n        this._timeoutInfo.set(messageId, {\n            timeoutId: setTimeout(onTimeout, timeout),\n            startTime: Date.now(),\n            timeout,\n            maxTotalTimeout,\n            resetTimeoutOnProgress,\n            onTimeout\n        });\n    }\n    _resetTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (!info)\n            return false;\n        const totalElapsed = Date.now() - info.startTime;\n        if (info.maxTotalTimeout && totalElapsed >= info.maxTotalTimeout) {\n            this._timeoutInfo.delete(messageId);\n            throw new McpError(ErrorCode.RequestTimeout, \"Maximum total timeout exceeded\", { maxTotalTimeout: info.maxTotalTimeout, totalElapsed });\n        }\n        clearTimeout(info.timeoutId);\n        info.timeoutId = setTimeout(info.onTimeout, info.timeout);\n        return true;\n    }\n    _cleanupTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (info) {\n            clearTimeout(info.timeoutId);\n            this._timeoutInfo.delete(messageId);\n        }\n    }\n    /**\n     * Attaches to the given transport, starts it, and starts listening for messages.\n     *\n     * The Protocol object assumes ownership of the Transport, replacing any callbacks that have already been set, and expects that it is the only user of the Transport instance going forward.\n     */\n    async connect(transport) {\n        var _a, _b, _c;\n        this._transport = transport;\n        const _onclose = (_a = this.transport) === null || _a === void 0 ? void 0 : _a.onclose;\n        this._transport.onclose = () => {\n            _onclose === null || _onclose === void 0 ? void 0 : _onclose();\n            this._onclose();\n        };\n        const _onerror = (_b = this.transport) === null || _b === void 0 ? void 0 : _b.onerror;\n        this._transport.onerror = (error) => {\n            _onerror === null || _onerror === void 0 ? void 0 : _onerror(error);\n            this._onerror(error);\n        };\n        const _onmessage = (_c = this._transport) === null || _c === void 0 ? void 0 : _c.onmessage;\n        this._transport.onmessage = (message, extra) => {\n            _onmessage === null || _onmessage === void 0 ? void 0 : _onmessage(message, extra);\n            if (isJSONRPCResponse(message) || isJSONRPCError(message)) {\n                this._onresponse(message);\n            }\n            else if (isJSONRPCRequest(message)) {\n                this._onrequest(message, extra);\n            }\n            else if (isJSONRPCNotification(message)) {\n                this._onnotification(message);\n            }\n            else {\n                this._onerror(new Error(`Unknown message type: ${JSON.stringify(message)}`));\n            }\n        };\n        await this._transport.start();\n    }\n    _onclose() {\n        var _a;\n        const responseHandlers = this._responseHandlers;\n        this._responseHandlers = new Map();\n        this._progressHandlers.clear();\n        this._pendingDebouncedNotifications.clear();\n        this._transport = undefined;\n        (_a = this.onclose) === null || _a === void 0 ? void 0 : _a.call(this);\n        const error = new McpError(ErrorCode.ConnectionClosed, \"Connection closed\");\n        for (const handler of responseHandlers.values()) {\n            handler(error);\n        }\n    }\n    _onerror(error) {\n        var _a;\n        (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n    }\n    _onnotification(notification) {\n        var _a;\n        const handler = (_a = this._notificationHandlers.get(notification.method)) !== null && _a !== void 0 ? _a : this.fallbackNotificationHandler;\n        // Ignore notifications not being subscribed to.\n        if (handler === undefined) {\n            return;\n        }\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(notification))\n            .catch((error) => this._onerror(new Error(`Uncaught error in notification handler: ${error}`)));\n    }\n    _onrequest(request, extra) {\n        var _a, _b, _c, _d;\n        const handler = (_a = this._requestHandlers.get(request.method)) !== null && _a !== void 0 ? _a : this.fallbackRequestHandler;\n        if (handler === undefined) {\n            (_b = this._transport) === null || _b === void 0 ? void 0 : _b.send({\n                jsonrpc: \"2.0\",\n                id: request.id,\n                error: {\n                    code: ErrorCode.MethodNotFound,\n                    message: \"Method not found\",\n                },\n            }).catch((error) => this._onerror(new Error(`Failed to send an error response: ${error}`)));\n            return;\n        }\n        const abortController = new AbortController();\n        this._requestHandlerAbortControllers.set(request.id, abortController);\n        const fullExtra = {\n            signal: abortController.signal,\n            sessionId: (_c = this._transport) === null || _c === void 0 ? void 0 : _c.sessionId,\n            _meta: (_d = request.params) === null || _d === void 0 ? void 0 : _d._meta,\n            sendNotification: (notification) => this.notification(notification, { relatedRequestId: request.id }),\n            sendRequest: (r, resultSchema, options) => this.request(r, resultSchema, { ...options, relatedRequestId: request.id }),\n            authInfo: extra === null || extra === void 0 ? void 0 : extra.authInfo,\n            requestId: request.id,\n            requestInfo: extra === null || extra === void 0 ? void 0 : extra.requestInfo\n        };\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(request, fullExtra))\n            .then((result) => {\n            var _a;\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                result,\n                jsonrpc: \"2.0\",\n                id: request.id,\n            });\n        }, (error) => {\n            var _a, _b;\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                jsonrpc: \"2.0\",\n                id: request.id,\n                error: {\n                    code: Number.isSafeInteger(error[\"code\"])\n                        ? error[\"code\"]\n                        : ErrorCode.InternalError,\n                    message: (_b = error.message) !== null && _b !== void 0 ? _b : \"Internal error\",\n                },\n            });\n        })\n            .catch((error) => this._onerror(new Error(`Failed to send response: ${error}`)))\n            .finally(() => {\n            this._requestHandlerAbortControllers.delete(request.id);\n        });\n    }\n    _onprogress(notification) {\n        const { progressToken, ...params } = notification.params;\n        const messageId = Number(progressToken);\n        const handler = this._progressHandlers.get(messageId);\n        if (!handler) {\n            this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(notification)}`));\n            return;\n        }\n        const responseHandler = this._responseHandlers.get(messageId);\n        const timeoutInfo = this._timeoutInfo.get(messageId);\n        if (timeoutInfo && responseHandler && timeoutInfo.resetTimeoutOnProgress) {\n            try {\n                this._resetTimeout(messageId);\n            }\n            catch (error) {\n                responseHandler(error);\n                return;\n            }\n        }\n        handler(params);\n    }\n    _onresponse(response) {\n        const messageId = Number(response.id);\n        const handler = this._responseHandlers.get(messageId);\n        if (handler === undefined) {\n            this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(response)}`));\n            return;\n        }\n        this._responseHandlers.delete(messageId);\n        this._progressHandlers.delete(messageId);\n        this._cleanupTimeout(messageId);\n        if (isJSONRPCResponse(response)) {\n            handler(response);\n        }\n        else {\n            const error = new McpError(response.error.code, response.error.message, response.error.data);\n            handler(error);\n        }\n    }\n    get transport() {\n        return this._transport;\n    }\n    /**\n     * Closes the connection.\n     */\n    async close() {\n        var _a;\n        await ((_a = this._transport) === null || _a === void 0 ? void 0 : _a.close());\n    }\n    /**\n     * Sends a request and wait for a response.\n     *\n     * Do not use this method to emit notifications! Use notification() instead.\n     */\n    request(request, resultSchema, options) {\n        const { relatedRequestId, resumptionToken, onresumptiontoken } = options !== null && options !== void 0 ? options : {};\n        return new Promise((resolve, reject) => {\n            var _a, _b, _c, _d, _e, _f;\n            if (!this._transport) {\n                reject(new Error(\"Not connected\"));\n                return;\n            }\n            if (((_a = this._options) === null || _a === void 0 ? void 0 : _a.enforceStrictCapabilities) === true) {\n                this.assertCapabilityForMethod(request.method);\n            }\n            (_b = options === null || options === void 0 ? void 0 : options.signal) === null || _b === void 0 ? void 0 : _b.throwIfAborted();\n            const messageId = this._requestMessageId++;\n            const jsonrpcRequest = {\n                ...request,\n                jsonrpc: \"2.0\",\n                id: messageId,\n            };\n            if (options === null || options === void 0 ? void 0 : options.onprogress) {\n                this._progressHandlers.set(messageId, options.onprogress);\n                jsonrpcRequest.params = {\n                    ...request.params,\n                    _meta: {\n                        ...(((_c = request.params) === null || _c === void 0 ? void 0 : _c._meta) || {}),\n                        progressToken: messageId\n                    },\n                };\n            }\n            const cancel = (reason) => {\n                var _a;\n                this._responseHandlers.delete(messageId);\n                this._progressHandlers.delete(messageId);\n                this._cleanupTimeout(messageId);\n                (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                    jsonrpc: \"2.0\",\n                    method: \"notifications/cancelled\",\n                    params: {\n                        requestId: messageId,\n                        reason: String(reason),\n                    },\n                }, { relatedRequestId, resumptionToken, onresumptiontoken }).catch((error) => this._onerror(new Error(`Failed to send cancellation: ${error}`)));\n                reject(reason);\n            };\n            this._responseHandlers.set(messageId, (response) => {\n                var _a;\n                if ((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                    return;\n                }\n                if (response instanceof Error) {\n                    return reject(response);\n                }\n                try {\n                    const result = resultSchema.parse(response.result);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n            (_d = options === null || options === void 0 ? void 0 : options.signal) === null || _d === void 0 ? void 0 : _d.addEventListener(\"abort\", () => {\n                var _a;\n                cancel((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.reason);\n            });\n            const timeout = (_e = options === null || options === void 0 ? void 0 : options.timeout) !== null && _e !== void 0 ? _e : DEFAULT_REQUEST_TIMEOUT_MSEC;\n            const timeoutHandler = () => cancel(new McpError(ErrorCode.RequestTimeout, \"Request timed out\", { timeout }));\n            this._setupTimeout(messageId, timeout, options === null || options === void 0 ? void 0 : options.maxTotalTimeout, timeoutHandler, (_f = options === null || options === void 0 ? void 0 : options.resetTimeoutOnProgress) !== null && _f !== void 0 ? _f : false);\n            this._transport.send(jsonrpcRequest, { relatedRequestId, resumptionToken, onresumptiontoken }).catch((error) => {\n                this._cleanupTimeout(messageId);\n                reject(error);\n            });\n        });\n    }\n    /**\n     * Emits a notification, which is a one-way message that does not expect a response.\n     */\n    async notification(notification, options) {\n        var _a, _b;\n        if (!this._transport) {\n            throw new Error(\"Not connected\");\n        }\n        this.assertNotificationCapability(notification.method);\n        const debouncedMethods = (_b = (_a = this._options) === null || _a === void 0 ? void 0 : _a.debouncedNotificationMethods) !== null && _b !== void 0 ? _b : [];\n        // A notification can only be debounced if it's in the list AND it's \"simple\"\n        // (i.e., has no parameters and no related request ID that could be lost).\n        const canDebounce = debouncedMethods.includes(notification.method)\n            && !notification.params\n            && !(options === null || options === void 0 ? void 0 : options.relatedRequestId);\n        if (canDebounce) {\n            // If a notification of this type is already scheduled, do nothing.\n            if (this._pendingDebouncedNotifications.has(notification.method)) {\n                return;\n            }\n            // Mark this notification type as pending.\n            this._pendingDebouncedNotifications.add(notification.method);\n            // Schedule the actual send to happen in the next microtask.\n            // This allows all synchronous calls in the current event loop tick to be coalesced.\n            Promise.resolve().then(() => {\n                var _a;\n                // Un-mark the notification so the next one can be scheduled.\n                this._pendingDebouncedNotifications.delete(notification.method);\n                // SAFETY CHECK: If the connection was closed while this was pending, abort.\n                if (!this._transport) {\n                    return;\n                }\n                const jsonrpcNotification = {\n                    ...notification,\n                    jsonrpc: \"2.0\",\n                };\n                // Send the notification, but don't await it here to avoid blocking.\n                // Handle potential errors with a .catch().\n                (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send(jsonrpcNotification, options).catch(error => this._onerror(error));\n            });\n            // Return immediately.\n            return;\n        }\n        const jsonrpcNotification = {\n            ...notification,\n            jsonrpc: \"2.0\",\n        };\n        await this._transport.send(jsonrpcNotification, options);\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a request with the given method.\n     *\n     * Note that this will replace any previous request handler for the same method.\n     */\n    setRequestHandler(requestSchema, handler) {\n        const method = requestSchema.shape.method.value;\n        this.assertRequestHandlerCapability(method);\n        this._requestHandlers.set(method, (request, extra) => {\n            return Promise.resolve(handler(requestSchema.parse(request), extra));\n        });\n    }\n    /**\n     * Removes the request handler for the given method.\n     */\n    removeRequestHandler(method) {\n        this._requestHandlers.delete(method);\n    }\n    /**\n     * Asserts that a request handler has not already been set for the given method, in preparation for a new one being automatically installed.\n     */\n    assertCanSetRequestHandler(method) {\n        if (this._requestHandlers.has(method)) {\n            throw new Error(`A request handler for ${method} already exists, which would be overridden`);\n        }\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a notification with the given method.\n     *\n     * Note that this will replace any previous notification handler for the same method.\n     */\n    setNotificationHandler(notificationSchema, handler) {\n        this._notificationHandlers.set(notificationSchema.shape.method.value, (notification) => Promise.resolve(handler(notificationSchema.parse(notification))));\n    }\n    /**\n     * Removes the notification handler for the given method.\n     */\n    removeNotificationHandler(method) {\n        this._notificationHandlers.delete(method);\n    }\n}\nexport function mergeCapabilities(base, additional) {\n    return Object.entries(additional).reduce((acc, [key, value]) => {\n        if (value && typeof value === \"object\") {\n            acc[key] = acc[key] ? { ...acc[key], ...value } : value;\n        }\n        else {\n            acc[key] = value;\n        }\n        return acc;\n    }, { ...base });\n}\n//# sourceMappingURL=protocol.js.map","/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.URI = global.URI || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction merge() {\n    for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n    }\n\n    if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n            sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join('');\n    } else {\n        return sets[0];\n    }\n}\nfunction subexp(str) {\n    return \"(?:\" + str + \")\";\n}\nfunction typeOf(o) {\n    return o === undefined ? \"undefined\" : o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase();\n}\nfunction toUpperCase(str) {\n    return str.toUpperCase();\n}\nfunction toArray(obj) {\n    return obj !== undefined && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n}\nfunction assign(target, source) {\n    var obj = target;\n    if (source) {\n        for (var key in source) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\n\nfunction buildExps(isIRI) {\n    var ALPHA$$ = \"[A-Za-z]\",\n        CR$ = \"[\\\\x0D]\",\n        DIGIT$$ = \"[0-9]\",\n        DQUOTE$$ = \"[\\\\x22]\",\n        HEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),\n        //case-insensitive\n    LF$$ = \"[\\\\x0A]\",\n        SP$$ = \"[\\\\x20]\",\n        PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),\n        //expanded\n    GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n        SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n        RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n        UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",\n        //subset, excludes bidi control characters\n    IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",\n        //subset\n    UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n        SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n        USERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n        DEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n        DEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),\n        //relaxed parsing rules\n    IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n        H16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n        LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n        IPV6ADDRESS1$ = subexp(subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$),\n        //                           6( h16 \":\" ) ls32\n    IPV6ADDRESS2$ = subexp(\"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$),\n        //                      \"::\" 5( h16 \":\" ) ls32\n    IPV6ADDRESS3$ = subexp(subexp(H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$),\n        //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n    IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$),\n        //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n    IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$),\n        //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n    IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" + H16$ + \"\\\\:\" + LS32$),\n        //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n    IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\" + LS32$),\n        //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n    IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\" + H16$),\n        //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n    IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"),\n        //[ *6( h16 \":\" ) h16 ] \"::\"\n    IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n        ZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),\n        //RFC 6874\n    IPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),\n        //RFC 6874\n    IPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),\n        //RFC 6874, with relaxed parsing rules\n    IPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n        IP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\n        //RFC 6874\n    REG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n        HOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n        PORT$ = subexp(DIGIT$$ + \"*\"),\n        AUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n        PCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n        SEGMENT$ = subexp(PCHAR$ + \"*\"),\n        SEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n        SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n        PATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n        PATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),\n        //simplified\n    PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n        PATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        QUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n        FRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n        HIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        RELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n        RELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        URI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n        ABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n        GENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        RELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        ABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n        SAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        AUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\";\n    return {\n        NOT_SCHEME: new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n        NOT_USERINFO: new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_HOST: new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH: new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH_NOSCHEME: new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_QUERY: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n        NOT_FRAGMENT: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n        ESCAPE: new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        UNRESERVED: new RegExp(UNRESERVED$$, \"g\"),\n        OTHER_CHARS: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$, \"g\"),\n        IPV4ADDRESS: new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n        IPV6ADDRESS: new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\") //RFC 6874, with relaxed parsing rules\n    };\n}\nvar URI_PROTOCOL = buildExps(false);\n\nvar IRI_PROTOCOL = buildExps(true);\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/** Highest positive signed 32-bit float value */\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error$1(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar result = [];\n\tvar length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split('@');\n\tvar result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tvar labels = string.split('.');\n\tvar encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\twhile (counter < length) {\n\t\tvar value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tvar extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t// Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nvar ucs2encode = function ucs2encode(array) {\n\treturn String.fromCodePoint.apply(String, toConsumableArray(array));\n};\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nvar basicToDigit = function basicToDigit(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nvar digitToBasic = function digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nvar adapt = function adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nvar decode = function decode(input) {\n\t// Don't use UCS-2.\n\tvar output = [];\n\tvar inputLength = input.length;\n\tvar i = 0;\n\tvar n = initialN;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tvar basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (var j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror$1('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (var index = basic > 0 ? basic + 1 : 0; index < inputLength;) /* no final expression */{\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tvar oldi = i;\n\t\tfor (var w = 1, k = base;; /* no condition */k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror$1('invalid-input');\n\t\t\t}\n\n\t\t\tvar digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tvar out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn String.fromCodePoint.apply(String, output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nvar encode = function encode(input) {\n\tvar output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tvar inputLength = input.length;\n\n\t// Initialize the state.\n\tvar n = initialN;\n\tvar delta = 0;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points.\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar _currentValue2 = _step.value;\n\n\t\t\tif (_currentValue2 < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(_currentValue2));\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar basicLength = output.length;\n\tvar handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tvar m = maxInt;\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar currentValue = _step2.value;\n\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow.\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar _currentValue = _step3.value;\n\n\t\t\t\tif (_currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror$1('overflow');\n\t\t\t\t}\n\t\t\t\tif (_currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\t\tvar q = delta;\n\t\t\t\t\tfor (var k = base;; /* no condition */k += base) {\n\t\t\t\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar qMinusT = q - t;\n\t\t\t\t\t\tvar baseMinusT = base - t;\n\t\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nvar toUnicode = function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nvar toASCII = function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nvar punycode = {\n\t/**\n  * A string representing the current Punycode.js version number.\n  * @memberOf punycode\n  * @type String\n  */\n\t'version': '2.1.0',\n\t/**\n  * An object of methods to convert from JavaScript's internal character\n  * representation (UCS-2) to Unicode code points, and back.\n  * @see <https://mathiasbynens.be/notes/javascript-encoding>\n  * @memberOf punycode\n  * @type Object\n  */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\n/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\nvar SCHEMES = {};\nfunction pctEncChar(chr) {\n    var c = chr.charCodeAt(0);\n    var e = void 0;\n    if (c < 16) e = \"%0\" + c.toString(16).toUpperCase();else if (c < 128) e = \"%\" + c.toString(16).toUpperCase();else if (c < 2048) e = \"%\" + (c >> 6 | 192).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();else e = \"%\" + (c >> 12 | 224).toString(16).toUpperCase() + \"%\" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n    return e;\n}\nfunction pctDecChars(str) {\n    var newStr = \"\";\n    var i = 0;\n    var il = str.length;\n    while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n            newStr += String.fromCharCode(c);\n            i += 3;\n        } else if (c >= 194 && c < 224) {\n            if (il - i >= 6) {\n                var c2 = parseInt(str.substr(i + 4, 2), 16);\n                newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n            } else {\n                newStr += str.substr(i, 6);\n            }\n            i += 6;\n        } else if (c >= 224) {\n            if (il - i >= 9) {\n                var _c = parseInt(str.substr(i + 4, 2), 16);\n                var c3 = parseInt(str.substr(i + 7, 2), 16);\n                newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n            } else {\n                newStr += str.substr(i, 9);\n            }\n            i += 9;\n        } else {\n            newStr += str.substr(i, 3);\n            i += 3;\n        }\n    }\n    return newStr;\n}\nfunction _normalizeComponentEncoding(components, protocol) {\n    function decodeUnreserved(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n    }\n    if (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n    if (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    return components;\n}\n\nfunction _stripLeadingZeros(str) {\n    return str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\nfunction _normalizeIPv4(host, protocol) {\n    var matches = host.match(protocol.IPV4ADDRESS) || [];\n\n    var _matches = slicedToArray(matches, 2),\n        address = _matches[1];\n\n    if (address) {\n        return address.split(\".\").map(_stripLeadingZeros).join(\".\");\n    } else {\n        return host;\n    }\n}\nfunction _normalizeIPv6(host, protocol) {\n    var matches = host.match(protocol.IPV6ADDRESS) || [];\n\n    var _matches2 = slicedToArray(matches, 3),\n        address = _matches2[1],\n        zone = _matches2[2];\n\n    if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split('::').reverse(),\n            _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2),\n            last = _address$toLowerCase$2[0],\n            first = _address$toLowerCase$2[1];\n\n        var firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n        var lastFields = last.split(\":\").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n            fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n        }\n        if (isLastFieldIPv4Address) {\n            fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function (acc, field, index) {\n            if (!field || field === \"0\") {\n                var lastLongest = acc[acc.length - 1];\n                if (lastLongest && lastLongest.index + lastLongest.length === index) {\n                    lastLongest.length++;\n                } else {\n                    acc.push({ index: index, length: 1 });\n                }\n            }\n            return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function (a, b) {\n            return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n            var newFirst = fields.slice(0, longestZeroFields.index);\n            var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n            newHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n        } else {\n            newHost = fields.join(\":\");\n        }\n        if (zone) {\n            newHost += \"%\" + zone;\n        }\n        return newHost;\n    } else {\n        return host;\n    }\n}\nvar URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nvar NO_MATCH_IS_UNDEFINED = \"\".match(/(){0}/)[1] === undefined;\nfunction parse(uriString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var components = {};\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    if (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n    var matches = uriString.match(URI_PARSE);\n    if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n            //store each component\n            components.scheme = matches[1];\n            components.userinfo = matches[3];\n            components.host = matches[4];\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = matches[7];\n            components.fragment = matches[8];\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = matches[5];\n            }\n        } else {\n            //IE FIX for improper RegExp matching\n            //store each component\n            components.scheme = matches[1] || undefined;\n            components.userinfo = uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined;\n            components.host = uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined;\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined;\n            components.fragment = uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined;\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined;\n            }\n        }\n        if (components.host) {\n            //normalize IP hosts\n            components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        //determine reference type\n        if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n            components.reference = \"same-document\";\n        } else if (components.scheme === undefined) {\n            components.reference = \"relative\";\n        } else if (components.fragment === undefined) {\n            components.reference = \"absolute\";\n        } else {\n            components.reference = \"uri\";\n        }\n        //check for reference errors\n        if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n            components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n        }\n        //find scheme handler\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n        //check if scheme can't handle IRIs\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n            //if host component is a domain name\n            if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            }\n            //convert IRI -> URI\n            _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n            //normalize encodings\n            _normalizeComponentEncoding(components, protocol);\n        }\n        //perform scheme specific parsing\n        if (schemeHandler && schemeHandler.parse) {\n            schemeHandler.parse(components, options);\n        }\n    } else {\n        components.error = components.error || \"URI can not be parsed.\";\n    }\n    return components;\n}\n\nfunction _recomposeAuthority(components, options) {\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    if (components.userinfo !== undefined) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push(\"@\");\n    }\n    if (components.host !== undefined) {\n        //normalize IP hosts, add brackets and escape zone separator for IPv6\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function (_, $1, $2) {\n            return \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\";\n        }));\n    }\n    if (typeof components.port === \"number\" || typeof components.port === \"string\") {\n        uriTokens.push(\":\");\n        uriTokens.push(String(components.port));\n    }\n    return uriTokens.length ? uriTokens.join(\"\") : undefined;\n}\n\nvar RDS1 = /^\\.\\.?\\//;\nvar RDS2 = /^\\/\\.(\\/|$)/;\nvar RDS3 = /^\\/\\.\\.(\\/|$)/;\nvar RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\nfunction removeDotSegments(input) {\n    var output = [];\n    while (input.length) {\n        if (input.match(RDS1)) {\n            input = input.replace(RDS1, \"\");\n        } else if (input.match(RDS2)) {\n            input = input.replace(RDS2, \"/\");\n        } else if (input.match(RDS3)) {\n            input = input.replace(RDS3, \"/\");\n            output.pop();\n        } else if (input === \".\" || input === \"..\") {\n            input = \"\";\n        } else {\n            var im = input.match(RDS5);\n            if (im) {\n                var s = im[0];\n                input = input.slice(s.length);\n                output.push(s);\n            } else {\n                throw new Error(\"Unexpected dot segment condition\");\n            }\n        }\n    }\n    return output.join(\"\");\n}\n\nfunction serialize(components) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    //find scheme handler\n    var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n    //perform scheme specific serialization\n    if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n    if (components.host) {\n        //if host component is an IPv6 address\n        if (protocol.IPV6ADDRESS.test(components.host)) {}\n        //TODO: normalize IPv6 address as per RFC 5952\n\n        //if host component is a domain name\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n                //convert IDN via punycode\n                try {\n                    components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n            }\n    }\n    //normalize encoding\n    _normalizeComponentEncoding(components, protocol);\n    if (options.reference !== \"suffix\" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(\":\");\n    }\n    var authority = _recomposeAuthority(components, options);\n    if (authority !== undefined) {\n        if (options.reference !== \"suffix\") {\n            uriTokens.push(\"//\");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== \"/\") {\n            uriTokens.push(\"/\");\n        }\n    }\n    if (components.path !== undefined) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n            s = removeDotSegments(s);\n        }\n        if (authority === undefined) {\n            s = s.replace(/^\\/\\//, \"/%2F\"); //don't allow the path to start with \"//\"\n        }\n        uriTokens.push(s);\n    }\n    if (components.query !== undefined) {\n        uriTokens.push(\"?\");\n        uriTokens.push(components.query);\n    }\n    if (components.fragment !== undefined) {\n        uriTokens.push(\"#\");\n        uriTokens.push(components.fragment);\n    }\n    return uriTokens.join(\"\"); //merge tokens into a string\n}\n\nfunction resolveComponents(base, relative) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var skipNormalization = arguments[3];\n\n    var target = {};\n    if (!skipNormalization) {\n        base = parse(serialize(base, options), options); //normalize base components\n        relative = parse(serialize(relative, options), options); //normalize relative components\n    }\n    options = options || {};\n    if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        //target.authority = relative.authority;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || \"\");\n        target.query = relative.query;\n    } else {\n        if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n            //target.authority = relative.authority;\n            target.userinfo = relative.userinfo;\n            target.host = relative.host;\n            target.port = relative.port;\n            target.path = removeDotSegments(relative.path || \"\");\n            target.query = relative.query;\n        } else {\n            if (!relative.path) {\n                target.path = base.path;\n                if (relative.query !== undefined) {\n                    target.query = relative.query;\n                } else {\n                    target.query = base.query;\n                }\n            } else {\n                if (relative.path.charAt(0) === \"/\") {\n                    target.path = removeDotSegments(relative.path);\n                } else {\n                    if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n                        target.path = \"/\" + relative.path;\n                    } else if (!base.path) {\n                        target.path = relative.path;\n                    } else {\n                        target.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n                    }\n                    target.path = removeDotSegments(target.path);\n                }\n                target.query = relative.query;\n            }\n            //target.authority = base.authority;\n            target.userinfo = base.userinfo;\n            target.host = base.host;\n            target.port = base.port;\n        }\n        target.scheme = base.scheme;\n    }\n    target.fragment = relative.fragment;\n    return target;\n}\n\nfunction resolve(baseURI, relativeURI, options) {\n    var schemelessOptions = assign({ scheme: 'null' }, options);\n    return serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n}\n\nfunction normalize(uri, options) {\n    if (typeof uri === \"string\") {\n        uri = serialize(parse(uri, options), options);\n    } else if (typeOf(uri) === \"object\") {\n        uri = parse(serialize(uri, options), options);\n    }\n    return uri;\n}\n\nfunction equal(uriA, uriB, options) {\n    if (typeof uriA === \"string\") {\n        uriA = serialize(parse(uriA, options), options);\n    } else if (typeOf(uriA) === \"object\") {\n        uriA = serialize(uriA, options);\n    }\n    if (typeof uriB === \"string\") {\n        uriB = serialize(parse(uriB, options), options);\n    } else if (typeOf(uriB) === \"object\") {\n        uriB = serialize(uriB, options);\n    }\n    return uriA === uriB;\n}\n\nfunction escapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n}\n\nfunction unescapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n}\n\nvar handler = {\n    scheme: \"http\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        //report missing host\n        if (!components.host) {\n            components.error = components.error || \"HTTP URIs must have a host.\";\n        }\n        return components;\n    },\n    serialize: function serialize(components, options) {\n        var secure = String(components.scheme).toLowerCase() === \"https\";\n        //normalize the default port\n        if (components.port === (secure ? 443 : 80) || components.port === \"\") {\n            components.port = undefined;\n        }\n        //normalize the empty path\n        if (!components.path) {\n            components.path = \"/\";\n        }\n        //NOTE: We do not parse query strings for HTTP URIs\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n        //and not the HTTP spec.\n        return components;\n    }\n};\n\nvar handler$1 = {\n    scheme: \"https\",\n    domainHost: handler.domainHost,\n    parse: handler.parse,\n    serialize: handler.serialize\n};\n\nfunction isSecure(wsComponents) {\n    return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n//RFC 6455\nvar handler$2 = {\n    scheme: \"ws\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        var wsComponents = components;\n        //indicate if the secure flag is set\n        wsComponents.secure = isSecure(wsComponents);\n        //construct resouce name\n        wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n        wsComponents.path = undefined;\n        wsComponents.query = undefined;\n        return wsComponents;\n    },\n    serialize: function serialize(wsComponents, options) {\n        //normalize the default port\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n            wsComponents.port = undefined;\n        }\n        //ensure scheme matches secure flag\n        if (typeof wsComponents.secure === 'boolean') {\n            wsComponents.scheme = wsComponents.secure ? 'wss' : 'ws';\n            wsComponents.secure = undefined;\n        }\n        //reconstruct path from resource name\n        if (wsComponents.resourceName) {\n            var _wsComponents$resourc = wsComponents.resourceName.split('?'),\n                _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2),\n                path = _wsComponents$resourc2[0],\n                query = _wsComponents$resourc2[1];\n\n            wsComponents.path = path && path !== '/' ? path : undefined;\n            wsComponents.query = query;\n            wsComponents.resourceName = undefined;\n        }\n        //forbid fragment component\n        wsComponents.fragment = undefined;\n        return wsComponents;\n    }\n};\n\nvar handler$3 = {\n    scheme: \"wss\",\n    domainHost: handler$2.domainHost,\n    parse: handler$2.parse,\n    serialize: handler$2.serialize\n};\n\nvar O = {};\nvar isIRI = true;\n//RFC 3986\nvar UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nvar HEXDIG$$ = \"[0-9A-Fa-f]\"; //case-insensitive\nvar PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)); //expanded\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nvar ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nvar QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nvar VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nvar SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nvar UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nvar PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nvar NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nvar NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nvar NOT_HFVALUE = NOT_HFNAME;\nfunction decodeUnreserved(str) {\n    var decStr = pctDecChars(str);\n    return !decStr.match(UNRESERVED) ? str : decStr;\n}\nvar handler$4 = {\n    scheme: \"mailto\",\n    parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(\",\") : [];\n        mailtoComponents.path = undefined;\n        if (mailtoComponents.query) {\n            var unknownHeaders = false;\n            var headers = {};\n            var hfields = mailtoComponents.query.split(\"&\");\n            for (var x = 0, xl = hfields.length; x < xl; ++x) {\n                var hfield = hfields[x].split(\"=\");\n                switch (hfield[0]) {\n                    case \"to\":\n                        var toAddrs = hfield[1].split(\",\");\n                        for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                            to.push(toAddrs[_x]);\n                        }\n                        break;\n                    case \"subject\":\n                        mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                        break;\n                    case \"body\":\n                        mailtoComponents.body = unescapeComponent(hfield[1], options);\n                        break;\n                    default:\n                        unknownHeaders = true;\n                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                        break;\n                }\n            }\n            if (unknownHeaders) mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = undefined;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n            var addr = to[_x2].split(\"@\");\n            addr[0] = unescapeComponent(addr[0]);\n            if (!options.unicodeSupport) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n                } catch (e) {\n                    mailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            } else {\n                addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n            }\n            to[_x2] = addr.join(\"@\");\n        }\n        return mailtoComponents;\n    },\n    serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray(mailtoComponents.to);\n        if (to) {\n            for (var x = 0, xl = to.length; x < xl; ++x) {\n                var toAddr = String(to[x]);\n                var atIdx = toAddr.lastIndexOf(\"@\");\n                var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n                var domain = toAddr.slice(atIdx + 1);\n                //convert IDN via punycode\n                try {\n                    domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n                } catch (e) {\n                    components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n                to[x] = localPart + \"@\" + domain;\n            }\n            components.path = to.join(\",\");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n        if (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n        var fields = [];\n        for (var name in headers) {\n            if (headers[name] !== O[name]) {\n                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + \"=\" + headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n            }\n        }\n        if (fields.length) {\n            components.query = fields.join(\"&\");\n        }\n        return components;\n    }\n};\n\nvar URN_PARSE = /^([^\\:]+)\\:(.*)/;\n//RFC 2141\nvar handler$5 = {\n    scheme: \"urn\",\n    parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n            var scheme = options.scheme || urnComponents.scheme || \"urn\";\n            var nid = matches[1].toLowerCase();\n            var nss = matches[2];\n            var urnScheme = scheme + \":\" + (options.nid || nid);\n            var schemeHandler = SCHEMES[urnScheme];\n            urnComponents.nid = nid;\n            urnComponents.nss = nss;\n            urnComponents.path = undefined;\n            if (schemeHandler) {\n                urnComponents = schemeHandler.parse(urnComponents, options);\n            }\n        } else {\n            urnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n        }\n        return urnComponents;\n    },\n    serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || \"urn\";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + \":\" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n            urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + \":\" + nss;\n        return uriComponents;\n    }\n};\n\nvar UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n//RFC 4122\nvar handler$6 = {\n    scheme: \"urn:uuid\",\n    parse: function parse(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = undefined;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n            uuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n        }\n        return uuidComponents;\n    },\n    serialize: function serialize(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        //normalize UUID\n        urnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n        return urnComponents;\n    }\n};\n\nSCHEMES[handler.scheme] = handler;\nSCHEMES[handler$1.scheme] = handler$1;\nSCHEMES[handler$2.scheme] = handler$2;\nSCHEMES[handler$3.scheme] = handler$3;\nSCHEMES[handler$4.scheme] = handler$4;\nSCHEMES[handler$5.scheme] = handler$5;\nSCHEMES[handler$6.scheme] = handler$6;\n\nexports.SCHEMES = SCHEMES;\nexports.pctEncChar = pctEncChar;\nexports.pctDecChars = pctDecChars;\nexports.parse = parse;\nexports.removeDotSegments = removeDotSegments;\nexports.serialize = serialize;\nexports.resolveComponents = resolveComponents;\nexports.resolve = resolve;\nexports.normalize = normalize;\nexports.equal = equal;\nexports.escapeComponent = escapeComponent;\nexports.unescapeComponent = unescapeComponent;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=uri.all.js.map\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n","'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  schemaUnknownRules: schemaUnknownRules,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, strictNumbers, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data +\n                           (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    case 'number': return '(typeof ' + data + EQUAL + '\"' + dataType + '\"' +\n                          (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, strictNumbers, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, strictNumbers, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction schemaUnknownRules(schema, rules) {\n  if (typeof schema == 'boolean') return;\n  for (var key in schema) if (!rules[key]) return key;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/([^\\\\])' \\+ '/g, '$1');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","'use strict';\n\nvar URI = require('uri-js')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = URI.parse(ref)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.fragment = parsedRef.fragment || '';\n  if (parsedRef.fragment.slice(0,1) != '/') return;\n  var parts = parsedRef.fragment.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = URI.parse(id);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  return URI.serialize(p).split('#')[0] + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? URI.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n","'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = 'unknown keyword: ' + $unknownKwd;\n      if (it.opts.strictKeywords === 'log') it.logger.warn($keywordsMsg);\n      else throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += ' var validate = ';\n    if ($async) {\n      it.async = true;\n      out += 'async ';\n    }\n    out += 'function(data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }; return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== undefined && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = 'default is ignored in the schema root';\n      if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n      else throw new Error($defaultMsg);\n    }\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf('null') == -1) $typeSchema = $typeSchema.concat('null');\n    } else if ($typeSchema != 'null') {\n      $typeSchema = [$typeSchema, 'null'];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += ' ' + (it.RULES.all.$comment.code(it, '$comment'));\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; var ' + ($coerced) + ' = undefined; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ') && ' + ($data) + '.length == 1) { ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + '; if (' + (it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers)) + ') ' + ($coerced) + ' = ' + ($data) + '; } ';\n        }\n        out += ' if (' + ($coerced) + ' !== undefined) ; ';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == 'string') {\n              out += ' else if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' else if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' else if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' else if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' else if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' else {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } if (' + ($coerced) + ' !== undefined) {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers)) + ') { ';\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }; return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n","'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var validate = compilation.validate;\n    var result = validate.apply(this, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode, _schema);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && !!refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    if (self._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword);\n      }))\n        throw new Error('parent schema must have all required keywords: ' + deps.join(','));\n\n      var validateSchema = rule.definition.validateSchema;\n      if (validateSchema) {\n        var valid = validateSchema(schema);\n        if (!valid) {\n          var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n          if (self._opts.validateSchema == 'log') self.logger.error(message);\n          else throw new Error(message);\n        }\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n","'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n","'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,28,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction isLeapYear(year) {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n\n  return month >= 1 && month <= 12 && day >= 1 &&\n          day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return ((hour <= 23 && minute <= 59 && second <= 59) ||\n          (hour == 23 && minute == 59 && second == 60)) &&\n         (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n","'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true || (it.async && $refVal.$async !== false);\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { await ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return (it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all));\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_comment(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema);\n  if (it.opts.$comment === true) {\n    out += ' console.log(' + ($comment) + ');';\n  } else if (typeof it.opts.$comment == 'function') {\n    out += ' self._opts.$comment(' + ($comment) + ', ' + (it.util.toQuotedString($errSchemaPath)) + ', validate.root.schema);';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValue: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = (it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all));\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    if ($property == '__proto__') continue;\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? await ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(await ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_if(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $thenSch = it.schema['then'],\n    $elseSch = it.schema['else'],\n    $thenPresent = $thenSch !== undefined && (it.opts.strictKeywords ? (typeof $thenSch == 'object' && Object.keys($thenSch).length > 0) || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)),\n    $elsePresent = $elseSch !== undefined && (it.opts.strictKeywords ? (typeof $elseSch == 'object' && Object.keys($elseSch).length > 0) || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)),\n    $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = true;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += '  ' + (it.validate($it)) + ' ';\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += ' if (' + ($nextValid) + ') {  ';\n      $it.schema = it.schema['then'];\n      $it.schemaPath = it.schemaPath + '.then';\n      $it.errSchemaPath = it.errSchemaPath + '/then';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'then\\'; ';\n      } else {\n        $ifClause = '\\'then\\'';\n      }\n      out += ' } ';\n      if ($elsePresent) {\n        out += ' else { ';\n      }\n    } else {\n      out += ' if (!' + ($nextValid) + ') { ';\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema['else'];\n      $it.schemaPath = it.schemaPath + '.else';\n      $it.errSchemaPath = it.errSchemaPath + '/else';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'else\\'; ';\n      } else {\n        $ifClause = '\\'else\\'';\n      }\n      out += ' } ';\n    }\n    out += ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('if') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { failingKeyword: ' + ($ifClause) + ' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match \"\\' + ' + ($ifClause) + ' + \\'\" schema\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && (it.opts.strictKeywords ? (typeof $additionalItems == 'object' && Object.keys($additionalItems).length > 0) || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if (!($isData || typeof $schema == 'number' || $schema === undefined)) {\n    throw new Error($keyword + ' must be number');\n  }\n  if (!($isDataExcl || $schemaExcl === undefined || typeof $schemaExcl == 'number' || typeof $schemaExcl == 'boolean')) {\n    throw new Error($exclusiveKeyword + ' must be number or boolean');\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\'; ';\n    if ($schema === undefined) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $prevValid = 'prevValid' + $lvl,\n    $passingSchemas = 'passingSchemas' + $lvl;\n  out += 'var ' + ($errs) + ' = errors , ' + ($prevValid) + ' = false , ' + ($valid) + ' = false , ' + ($passingSchemas) + ' = null; ';\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && ' + ($prevValid) + ') { ' + ($valid) + ' = false; ' + ($passingSchemas) + ' = [' + ($passingSchemas) + ', ' + ($i) + ']; } else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') { ' + ($valid) + ' = ' + ($prevValid) + ' = true; ' + ($passingSchemas) + ' = ' + ($i) + '; }';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { passingSchemas: ' + ($passingSchemas) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}).filter(notProto),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties).filter(notProto),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n\n  function notProto(p) {\n    return p !== '__proto__';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += ' || validate.schema' + ($schemaPath) + '.hasOwnProperty(' + ($key) + ') ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is an invalid additional property';\n              } else {\n                out += 'should NOT have additional properties';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1,\n        l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema[$propertyKey];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;';\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? (typeof $propertySch == 'object' && Object.keys($propertySch).length > 0) || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var i = ' + ($data) + '.length , ' + ($valid) + ' = true , j; if (i > 1) { ';\n    var $itemType = it.schema.items && it.schema.items.type,\n      $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == 'object' || $itemType == 'array' || ($typeIsArray && ($itemType.indexOf('object') >= 0 || $itemType.indexOf('array') >= 0))) {\n      out += ' outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } ';\n    } else {\n      out += ' var itemIndices = {}, item; for (;i--;) { var item = ' + ($data) + '[i]; ';\n      var $method = 'checkDataType' + ($typeIsArray ? 's' : '');\n      out += ' if (' + (it.util[$method]($itemType, 'item', it.opts.strictNumbers, true)) + ') continue; ';\n      if ($typeIsArray) {\n        out += ' if (typeof item == \\'string\\') item = \\'\"\\' + item; ';\n      }\n      out += ' if (typeof itemIndices[item] == \\'number\\') { ' + ($valid) + ' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';\n    }\n    out += ' } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('./ref'),\n  allOf: require('./allOf'),\n  anyOf: require('./anyOf'),\n  '$comment': require('./comment'),\n  const: require('./const'),\n  contains: require('./contains'),\n  dependencies: require('./dependencies'),\n  'enum': require('./enum'),\n  format: require('./format'),\n  'if': require('./if'),\n  items: require('./items'),\n  maximum: require('./_limit'),\n  minimum: require('./_limit'),\n  maxItems: require('./_limitItems'),\n  minItems: require('./_limitItems'),\n  maxLength: require('./_limitLength'),\n  minLength: require('./_limitLength'),\n  maxProperties: require('./_limitProperties'),\n  minProperties: require('./_limitProperties'),\n  multipleOf: require('./multipleOf'),\n  not: require('./not'),\n  oneOf: require('./oneOf'),\n  pattern: require('./pattern'),\n  properties: require('./properties'),\n  propertyNames: require('./propertyNames'),\n  required: require('./required'),\n  uniqueItems: require('./uniqueItems'),\n  validate: require('./validate')\n};\n","'use strict';\n\nvar ruleModules = require('../dotjs')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'items', 'contains', 'uniqueItems' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf', 'if' ] }\n  ];\n\n  var ALL = [ 'type', '$comment' ];\n  var KEYWORDS = [\n    '$schema', '$id', 'id', '$data', '$async', 'title',\n    'description', 'default', 'definitions',\n    'examples', 'readOnly', 'writeOnly',\n    'contentMediaType', 'contentEncoding',\n    'additionalItems', 'then', 'else'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    RULES.all.$comment = {\n      keyword: '$comment',\n      code: ruleModules.$comment\n    };\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n","'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n","'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n","'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += 'await ';\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = await ' + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\nvar metaSchema = require('./refs/json-schema-draft-07.json');\n\nmodule.exports = {\n  $id: 'https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js',\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: 'object',\n  dependencies: {\n    schema: ['validate'],\n    $data: ['validate'],\n    statements: ['inline'],\n    valid: {not: {required: ['macro']}}\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: {type: 'boolean'},\n    statements: {type: 'boolean'},\n    dependencies: {\n      type: 'array',\n      items: {type: 'string'}\n    },\n    metaSchema: {type: 'object'},\n    modifying: {type: 'boolean'},\n    valid: {type: 'boolean'},\n    $data: {type: 'boolean'},\n    async: {type: 'boolean'},\n    errors: {\n      anyOf: [\n        {type: 'boolean'},\n        {const: 'full'}\n      ]\n    }\n  }\n};\n","'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n","'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes', 'strictDefaults' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  if (opts.keywords) addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  if (opts.nullable) this.addKeyword('nullable', {metaSchema: {type: 'boolean'}});\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema, schema);\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDefaultMetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction addInitialKeywords(self) {\n  for (var name in self._opts.keywords) {\n    var keyword = self._opts.keywords[name];\n    self.addKeyword(name, keyword);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n","import { mergeCapabilities, Protocol, } from \"../shared/protocol.js\";\nimport { CallToolResultSchema, CompleteResultSchema, EmptyResultSchema, GetPromptResultSchema, InitializeResultSchema, LATEST_PROTOCOL_VERSION, ListPromptsResultSchema, ListResourcesResultSchema, ListResourceTemplatesResultSchema, ListToolsResultSchema, ReadResourceResultSchema, SUPPORTED_PROTOCOL_VERSIONS, ErrorCode, McpError, } from \"../types.js\";\nimport Ajv from \"ajv\";\n/**\n * An MCP client on top of a pluggable transport.\n *\n * The client will automatically begin the initialization flow with the server when connect() is called.\n *\n * To use with custom types, extend the base Request/Notification/Result types and pass them as type parameters:\n *\n * ```typescript\n * // Custom schemas\n * const CustomRequestSchema = RequestSchema.extend({...})\n * const CustomNotificationSchema = NotificationSchema.extend({...})\n * const CustomResultSchema = ResultSchema.extend({...})\n *\n * // Type aliases\n * type CustomRequest = z.infer<typeof CustomRequestSchema>\n * type CustomNotification = z.infer<typeof CustomNotificationSchema>\n * type CustomResult = z.infer<typeof CustomResultSchema>\n *\n * // Create typed client\n * const client = new Client<CustomRequest, CustomNotification, CustomResult>({\n *   name: \"CustomClient\",\n *   version: \"1.0.0\"\n * })\n * ```\n */\nexport class Client extends Protocol {\n    /**\n     * Initializes this client with the given name and version information.\n     */\n    constructor(_clientInfo, options) {\n        var _a;\n        super(options);\n        this._clientInfo = _clientInfo;\n        this._cachedToolOutputValidators = new Map();\n        this._capabilities = (_a = options === null || options === void 0 ? void 0 : options.capabilities) !== null && _a !== void 0 ? _a : {};\n        this._ajv = new Ajv();\n    }\n    /**\n     * Registers new capabilities. This can only be called before connecting to a transport.\n     *\n     * The new capabilities will be merged with any existing capabilities previously given (e.g., at initialization).\n     */\n    registerCapabilities(capabilities) {\n        if (this.transport) {\n            throw new Error(\"Cannot register capabilities after connecting to transport\");\n        }\n        this._capabilities = mergeCapabilities(this._capabilities, capabilities);\n    }\n    assertCapability(capability, method) {\n        var _a;\n        if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a[capability])) {\n            throw new Error(`Server does not support ${capability} (required for ${method})`);\n        }\n    }\n    async connect(transport, options) {\n        await super.connect(transport);\n        // When transport sessionId is already set this means we are trying to reconnect.\n        // In this case we don't need to initialize again.\n        if (transport.sessionId !== undefined) {\n            return;\n        }\n        try {\n            const result = await this.request({\n                method: \"initialize\",\n                params: {\n                    protocolVersion: LATEST_PROTOCOL_VERSION,\n                    capabilities: this._capabilities,\n                    clientInfo: this._clientInfo,\n                },\n            }, InitializeResultSchema, options);\n            if (result === undefined) {\n                throw new Error(`Server sent invalid initialize result: ${result}`);\n            }\n            if (!SUPPORTED_PROTOCOL_VERSIONS.includes(result.protocolVersion)) {\n                throw new Error(`Server's protocol version is not supported: ${result.protocolVersion}`);\n            }\n            this._serverCapabilities = result.capabilities;\n            this._serverVersion = result.serverInfo;\n            // HTTP transports must set the protocol version in each header after initialization.\n            if (transport.setProtocolVersion) {\n                transport.setProtocolVersion(result.protocolVersion);\n            }\n            this._instructions = result.instructions;\n            await this.notification({\n                method: \"notifications/initialized\",\n            });\n        }\n        catch (error) {\n            // Disconnect if initialization fails.\n            void this.close();\n            throw error;\n        }\n    }\n    /**\n     * After initialization has completed, this will be populated with the server's reported capabilities.\n     */\n    getServerCapabilities() {\n        return this._serverCapabilities;\n    }\n    /**\n     * After initialization has completed, this will be populated with information about the server's name and version.\n     */\n    getServerVersion() {\n        return this._serverVersion;\n    }\n    /**\n     * After initialization has completed, this may be populated with information about the server's instructions.\n     */\n    getInstructions() {\n        return this._instructions;\n    }\n    assertCapabilityForMethod(method) {\n        var _a, _b, _c, _d, _e;\n        switch (method) {\n            case \"logging/setLevel\":\n                if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a.logging)) {\n                    throw new Error(`Server does not support logging (required for ${method})`);\n                }\n                break;\n            case \"prompts/get\":\n            case \"prompts/list\":\n                if (!((_b = this._serverCapabilities) === null || _b === void 0 ? void 0 : _b.prompts)) {\n                    throw new Error(`Server does not support prompts (required for ${method})`);\n                }\n                break;\n            case \"resources/list\":\n            case \"resources/templates/list\":\n            case \"resources/read\":\n            case \"resources/subscribe\":\n            case \"resources/unsubscribe\":\n                if (!((_c = this._serverCapabilities) === null || _c === void 0 ? void 0 : _c.resources)) {\n                    throw new Error(`Server does not support resources (required for ${method})`);\n                }\n                if (method === \"resources/subscribe\" &&\n                    !this._serverCapabilities.resources.subscribe) {\n                    throw new Error(`Server does not support resource subscriptions (required for ${method})`);\n                }\n                break;\n            case \"tools/call\":\n            case \"tools/list\":\n                if (!((_d = this._serverCapabilities) === null || _d === void 0 ? void 0 : _d.tools)) {\n                    throw new Error(`Server does not support tools (required for ${method})`);\n                }\n                break;\n            case \"completion/complete\":\n                if (!((_e = this._serverCapabilities) === null || _e === void 0 ? void 0 : _e.completions)) {\n                    throw new Error(`Server does not support completions (required for ${method})`);\n                }\n                break;\n            case \"initialize\":\n                // No specific capability required for initialize\n                break;\n            case \"ping\":\n                // No specific capability required for ping\n                break;\n        }\n    }\n    assertNotificationCapability(method) {\n        var _a;\n        switch (method) {\n            case \"notifications/roots/list_changed\":\n                if (!((_a = this._capabilities.roots) === null || _a === void 0 ? void 0 : _a.listChanged)) {\n                    throw new Error(`Client does not support roots list changed notifications (required for ${method})`);\n                }\n                break;\n            case \"notifications/initialized\":\n                // No specific capability required for initialized\n                break;\n            case \"notifications/cancelled\":\n                // Cancellation notifications are always allowed\n                break;\n            case \"notifications/progress\":\n                // Progress notifications are always allowed\n                break;\n        }\n    }\n    assertRequestHandlerCapability(method) {\n        switch (method) {\n            case \"sampling/createMessage\":\n                if (!this._capabilities.sampling) {\n                    throw new Error(`Client does not support sampling capability (required for ${method})`);\n                }\n                break;\n            case \"elicitation/create\":\n                if (!this._capabilities.elicitation) {\n                    throw new Error(`Client does not support elicitation capability (required for ${method})`);\n                }\n                break;\n            case \"roots/list\":\n                if (!this._capabilities.roots) {\n                    throw new Error(`Client does not support roots capability (required for ${method})`);\n                }\n                break;\n            case \"ping\":\n                // No specific capability required for ping\n                break;\n        }\n    }\n    async ping(options) {\n        return this.request({ method: \"ping\" }, EmptyResultSchema, options);\n    }\n    async complete(params, options) {\n        return this.request({ method: \"completion/complete\", params }, CompleteResultSchema, options);\n    }\n    async setLoggingLevel(level, options) {\n        return this.request({ method: \"logging/setLevel\", params: { level } }, EmptyResultSchema, options);\n    }\n    async getPrompt(params, options) {\n        return this.request({ method: \"prompts/get\", params }, GetPromptResultSchema, options);\n    }\n    async listPrompts(params, options) {\n        return this.request({ method: \"prompts/list\", params }, ListPromptsResultSchema, options);\n    }\n    async listResources(params, options) {\n        return this.request({ method: \"resources/list\", params }, ListResourcesResultSchema, options);\n    }\n    async listResourceTemplates(params, options) {\n        return this.request({ method: \"resources/templates/list\", params }, ListResourceTemplatesResultSchema, options);\n    }\n    async readResource(params, options) {\n        return this.request({ method: \"resources/read\", params }, ReadResourceResultSchema, options);\n    }\n    async subscribeResource(params, options) {\n        return this.request({ method: \"resources/subscribe\", params }, EmptyResultSchema, options);\n    }\n    async unsubscribeResource(params, options) {\n        return this.request({ method: \"resources/unsubscribe\", params }, EmptyResultSchema, options);\n    }\n    async callTool(params, resultSchema = CallToolResultSchema, options) {\n        const result = await this.request({ method: \"tools/call\", params }, resultSchema, options);\n        // Check if the tool has an outputSchema\n        const validator = this.getToolOutputValidator(params.name);\n        if (validator) {\n            // If tool has outputSchema, it MUST return structuredContent (unless it's an error)\n            if (!result.structuredContent && !result.isError) {\n                throw new McpError(ErrorCode.InvalidRequest, `Tool ${params.name} has an output schema but did not return structured content`);\n            }\n            // Only validate structured content if present (not when there's an error)\n            if (result.structuredContent) {\n                try {\n                    // Validate the structured content (which is already an object) against the schema\n                    const isValid = validator(result.structuredContent);\n                    if (!isValid) {\n                        throw new McpError(ErrorCode.InvalidParams, `Structured content does not match the tool's output schema: ${this._ajv.errorsText(validator.errors)}`);\n                    }\n                }\n                catch (error) {\n                    if (error instanceof McpError) {\n                        throw error;\n                    }\n                    throw new McpError(ErrorCode.InvalidParams, `Failed to validate structured content: ${error instanceof Error ? error.message : String(error)}`);\n                }\n            }\n        }\n        return result;\n    }\n    cacheToolOutputSchemas(tools) {\n        this._cachedToolOutputValidators.clear();\n        for (const tool of tools) {\n            // If the tool has an outputSchema, create and cache the Ajv validator\n            if (tool.outputSchema) {\n                try {\n                    const validator = this._ajv.compile(tool.outputSchema);\n                    this._cachedToolOutputValidators.set(tool.name, validator);\n                }\n                catch (_a) {\n                    // Ignore schema compilation errors\n                }\n            }\n        }\n    }\n    getToolOutputValidator(toolName) {\n        return this._cachedToolOutputValidators.get(toolName);\n    }\n    async listTools(params, options) {\n        const result = await this.request({ method: \"tools/list\", params }, ListToolsResultSchema, options);\n        // Cache the tools and their output schemas for future validation\n        this.cacheToolOutputSchemas(result.tools);\n        return result;\n    }\n    async sendRootsListChanged() {\n        return this.notification({ method: \"notifications/roots/list_changed\" });\n    }\n}\n//# sourceMappingURL=index.js.map","class ParseError extends Error {\n  constructor(message, options) {\n    super(message), this.name = \"ParseError\", this.type = options.type, this.field = options.field, this.value = options.value, this.line = options.line;\n  }\n}\nfunction noop(_arg) {\n}\nfunction createParser(callbacks) {\n  if (typeof callbacks == \"function\")\n    throw new TypeError(\n      \"`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?\"\n    );\n  const { onEvent = noop, onError = noop, onRetry = noop, onComment } = callbacks;\n  let incompleteLine = \"\", isFirstChunk = !0, id, data = \"\", eventType = \"\";\n  function feed(newChunk) {\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, \"\") : newChunk, [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`);\n    for (const line of complete)\n      parseLine(line);\n    incompleteLine = incomplete, isFirstChunk = !1;\n  }\n  function parseLine(line) {\n    if (line === \"\") {\n      dispatchEvent();\n      return;\n    }\n    if (line.startsWith(\":\")) {\n      onComment && onComment(line.slice(line.startsWith(\": \") ? 2 : 1));\n      return;\n    }\n    const fieldSeparatorIndex = line.indexOf(\":\");\n    if (fieldSeparatorIndex !== -1) {\n      const field = line.slice(0, fieldSeparatorIndex), offset = line[fieldSeparatorIndex + 1] === \" \" ? 2 : 1, value = line.slice(fieldSeparatorIndex + offset);\n      processField(field, value, line);\n      return;\n    }\n    processField(line, \"\", line);\n  }\n  function processField(field, value, line) {\n    switch (field) {\n      case \"event\":\n        eventType = value;\n        break;\n      case \"data\":\n        data = `${data}${value}\n`;\n        break;\n      case \"id\":\n        id = value.includes(\"\\0\") ? void 0 : value;\n        break;\n      case \"retry\":\n        /^\\d+$/.test(value) ? onRetry(parseInt(value, 10)) : onError(\n          new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n            type: \"invalid-retry\",\n            value,\n            line\n          })\n        );\n        break;\n      default:\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}\\u2026` : field}\"`,\n            { type: \"unknown-field\", field, value, line }\n          )\n        );\n        break;\n    }\n  }\n  function dispatchEvent() {\n    data.length > 0 && onEvent({\n      id,\n      event: eventType || void 0,\n      // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n      // then remove the last character from the data buffer.\n      data: data.endsWith(`\n`) ? data.slice(0, -1) : data\n    }), id = void 0, data = \"\", eventType = \"\";\n  }\n  function reset(options = {}) {\n    incompleteLine && options.consume && parseLine(incompleteLine), isFirstChunk = !0, id = void 0, data = \"\", eventType = \"\", incompleteLine = \"\";\n  }\n  return { feed, reset };\n}\nfunction splitLines(chunk) {\n  const lines = [];\n  let incompleteLine = \"\", searchIndex = 0;\n  for (; searchIndex < chunk.length; ) {\n    const crIndex = chunk.indexOf(\"\\r\", searchIndex), lfIndex = chunk.indexOf(`\n`, searchIndex);\n    let lineEnd = -1;\n    if (crIndex !== -1 && lfIndex !== -1 ? lineEnd = Math.min(crIndex, lfIndex) : crIndex !== -1 ? lineEnd = crIndex : lfIndex !== -1 && (lineEnd = lfIndex), lineEnd === -1) {\n      incompleteLine = chunk.slice(searchIndex);\n      break;\n    } else {\n      const line = chunk.slice(searchIndex, lineEnd);\n      lines.push(line), searchIndex = lineEnd + 1, chunk[searchIndex - 1] === \"\\r\" && chunk[searchIndex] === `\n` && searchIndex++;\n    }\n  }\n  return [lines, incompleteLine];\n}\nexport {\n  ParseError,\n  createParser\n};\n//# sourceMappingURL=index.js.map\n","import { createParser } from \"eventsource-parser\";\nclass ErrorEvent extends Event {\n  /**\n   * Constructs a new `ErrorEvent` instance. This is typically not called directly,\n   * but rather emitted by the `EventSource` object when an error occurs.\n   *\n   * @param type - The type of the event (should be \"error\")\n   * @param errorEventInitDict - Optional properties to include in the error event\n   */\n  constructor(type, errorEventInitDict) {\n    var _a, _b;\n    super(type), this.code = (_a = errorEventInitDict == null ? void 0 : errorEventInitDict.code) != null ? _a : void 0, this.message = (_b = errorEventInitDict == null ? void 0 : errorEventInitDict.message) != null ? _b : void 0;\n  }\n  /**\n   * Node.js \"hides\" the `message` and `code` properties of the `ErrorEvent` instance,\n   * when it is `console.log`'ed. This makes it harder to debug errors. To ease debugging,\n   * we explicitly include the properties in the `inspect` method.\n   *\n   * This is automatically called by Node.js when you `console.log` an instance of this class.\n   *\n   * @param _depth - The current depth\n   * @param options - The options passed to `util.inspect`\n   * @param inspect - The inspect function to use (prevents having to import it from `util`)\n   * @returns A string representation of the error\n   */\n  [Symbol.for(\"nodejs.util.inspect.custom\")](_depth, options, inspect) {\n    return inspect(inspectableError(this), options);\n  }\n  /**\n   * Deno \"hides\" the `message` and `code` properties of the `ErrorEvent` instance,\n   * when it is `console.log`'ed. This makes it harder to debug errors. To ease debugging,\n   * we explicitly include the properties in the `inspect` method.\n   *\n   * This is automatically called by Deno when you `console.log` an instance of this class.\n   *\n   * @param inspect - The inspect function to use (prevents having to import it from `util`)\n   * @param options - The options passed to `Deno.inspect`\n   * @returns A string representation of the error\n   */\n  [Symbol.for(\"Deno.customInspect\")](inspect, options) {\n    return inspect(inspectableError(this), options);\n  }\n}\nfunction syntaxError(message) {\n  const DomException = globalThis.DOMException;\n  return typeof DomException == \"function\" ? new DomException(message, \"SyntaxError\") : new SyntaxError(message);\n}\nfunction flattenError(err) {\n  return err instanceof Error ? \"errors\" in err && Array.isArray(err.errors) ? err.errors.map(flattenError).join(\", \") : \"cause\" in err && err.cause instanceof Error ? `${err}: ${flattenError(err.cause)}` : err.message : `${err}`;\n}\nfunction inspectableError(err) {\n  return {\n    type: err.type,\n    message: err.message,\n    code: err.code,\n    defaultPrevented: err.defaultPrevented,\n    cancelable: err.cancelable,\n    timeStamp: err.timeStamp\n  };\n}\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n}, __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg), __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj)), __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value), __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), member.set(obj, value), value), __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method), _readyState, _url, _redirectUrl, _withCredentials, _fetch, _reconnectInterval, _reconnectTimer, _lastEventId, _controller, _parser, _onError, _onMessage, _onOpen, _EventSource_instances, connect_fn, _onFetchResponse, _onFetchError, getRequestOptions_fn, _onEvent, _onRetryChange, failConnection_fn, scheduleReconnect_fn, _reconnect;\nclass EventSource extends EventTarget {\n  constructor(url, eventSourceInitDict) {\n    var _a, _b;\n    super(), __privateAdd(this, _EventSource_instances), this.CONNECTING = 0, this.OPEN = 1, this.CLOSED = 2, __privateAdd(this, _readyState), __privateAdd(this, _url), __privateAdd(this, _redirectUrl), __privateAdd(this, _withCredentials), __privateAdd(this, _fetch), __privateAdd(this, _reconnectInterval), __privateAdd(this, _reconnectTimer), __privateAdd(this, _lastEventId, null), __privateAdd(this, _controller), __privateAdd(this, _parser), __privateAdd(this, _onError, null), __privateAdd(this, _onMessage, null), __privateAdd(this, _onOpen, null), __privateAdd(this, _onFetchResponse, async (response) => {\n      var _a2;\n      __privateGet(this, _parser).reset();\n      const { body, redirected, status, headers } = response;\n      if (status === 204) {\n        __privateMethod(this, _EventSource_instances, failConnection_fn).call(this, \"Server sent HTTP 204, not reconnecting\", 204), this.close();\n        return;\n      }\n      if (redirected ? __privateSet(this, _redirectUrl, new URL(response.url)) : __privateSet(this, _redirectUrl, void 0), status !== 200) {\n        __privateMethod(this, _EventSource_instances, failConnection_fn).call(this, `Non-200 status code (${status})`, status);\n        return;\n      }\n      if (!(headers.get(\"content-type\") || \"\").startsWith(\"text/event-stream\")) {\n        __privateMethod(this, _EventSource_instances, failConnection_fn).call(this, 'Invalid content type, expected \"text/event-stream\"', status);\n        return;\n      }\n      if (__privateGet(this, _readyState) === this.CLOSED)\n        return;\n      __privateSet(this, _readyState, this.OPEN);\n      const openEvent = new Event(\"open\");\n      if ((_a2 = __privateGet(this, _onOpen)) == null || _a2.call(this, openEvent), this.dispatchEvent(openEvent), typeof body != \"object\" || !body || !(\"getReader\" in body)) {\n        __privateMethod(this, _EventSource_instances, failConnection_fn).call(this, \"Invalid response body, expected a web ReadableStream\", status), this.close();\n        return;\n      }\n      const decoder = new TextDecoder(), reader = body.getReader();\n      let open = !0;\n      do {\n        const { done, value } = await reader.read();\n        value && __privateGet(this, _parser).feed(decoder.decode(value, { stream: !done })), done && (open = !1, __privateGet(this, _parser).reset(), __privateMethod(this, _EventSource_instances, scheduleReconnect_fn).call(this));\n      } while (open);\n    }), __privateAdd(this, _onFetchError, (err) => {\n      __privateSet(this, _controller, void 0), !(err.name === \"AbortError\" || err.type === \"aborted\") && __privateMethod(this, _EventSource_instances, scheduleReconnect_fn).call(this, flattenError(err));\n    }), __privateAdd(this, _onEvent, (event) => {\n      typeof event.id == \"string\" && __privateSet(this, _lastEventId, event.id);\n      const messageEvent = new MessageEvent(event.event || \"message\", {\n        data: event.data,\n        origin: __privateGet(this, _redirectUrl) ? __privateGet(this, _redirectUrl).origin : __privateGet(this, _url).origin,\n        lastEventId: event.id || \"\"\n      });\n      __privateGet(this, _onMessage) && (!event.event || event.event === \"message\") && __privateGet(this, _onMessage).call(this, messageEvent), this.dispatchEvent(messageEvent);\n    }), __privateAdd(this, _onRetryChange, (value) => {\n      __privateSet(this, _reconnectInterval, value);\n    }), __privateAdd(this, _reconnect, () => {\n      __privateSet(this, _reconnectTimer, void 0), __privateGet(this, _readyState) === this.CONNECTING && __privateMethod(this, _EventSource_instances, connect_fn).call(this);\n    });\n    try {\n      if (url instanceof URL)\n        __privateSet(this, _url, url);\n      else if (typeof url == \"string\")\n        __privateSet(this, _url, new URL(url, getBaseURL()));\n      else\n        throw new Error(\"Invalid URL\");\n    } catch {\n      throw syntaxError(\"An invalid or illegal string was specified\");\n    }\n    __privateSet(this, _parser, createParser({\n      onEvent: __privateGet(this, _onEvent),\n      onRetry: __privateGet(this, _onRetryChange)\n    })), __privateSet(this, _readyState, this.CONNECTING), __privateSet(this, _reconnectInterval, 3e3), __privateSet(this, _fetch, (_a = eventSourceInitDict == null ? void 0 : eventSourceInitDict.fetch) != null ? _a : globalThis.fetch), __privateSet(this, _withCredentials, (_b = eventSourceInitDict == null ? void 0 : eventSourceInitDict.withCredentials) != null ? _b : !1), __privateMethod(this, _EventSource_instances, connect_fn).call(this);\n  }\n  /**\n   * Returns the state of this EventSource object's connection. It can have the values described below.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/readyState)\n   *\n   * Note: typed as `number` instead of `0 | 1 | 2` for compatibility with the `EventSource` interface,\n   * defined in the TypeScript `dom` library.\n   *\n   * @public\n   */\n  get readyState() {\n    return __privateGet(this, _readyState);\n  }\n  /**\n   * Returns the URL providing the event stream.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/url)\n   *\n   * @public\n   */\n  get url() {\n    return __privateGet(this, _url).href;\n  }\n  /**\n   * Returns true if the credentials mode for connection requests to the URL providing the event stream is set to \"include\", and false otherwise.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/withCredentials)\n   */\n  get withCredentials() {\n    return __privateGet(this, _withCredentials);\n  }\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/error_event) */\n  get onerror() {\n    return __privateGet(this, _onError);\n  }\n  set onerror(value) {\n    __privateSet(this, _onError, value);\n  }\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/message_event) */\n  get onmessage() {\n    return __privateGet(this, _onMessage);\n  }\n  set onmessage(value) {\n    __privateSet(this, _onMessage, value);\n  }\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/open_event) */\n  get onopen() {\n    return __privateGet(this, _onOpen);\n  }\n  set onopen(value) {\n    __privateSet(this, _onOpen, value);\n  }\n  addEventListener(type, listener, options) {\n    const listen = listener;\n    super.addEventListener(type, listen, options);\n  }\n  removeEventListener(type, listener, options) {\n    const listen = listener;\n    super.removeEventListener(type, listen, options);\n  }\n  /**\n   * Aborts any instances of the fetch algorithm started for this EventSource object, and sets the readyState attribute to CLOSED.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/close)\n   *\n   * @public\n   */\n  close() {\n    __privateGet(this, _reconnectTimer) && clearTimeout(__privateGet(this, _reconnectTimer)), __privateGet(this, _readyState) !== this.CLOSED && (__privateGet(this, _controller) && __privateGet(this, _controller).abort(), __privateSet(this, _readyState, this.CLOSED), __privateSet(this, _controller, void 0));\n  }\n}\n_readyState = /* @__PURE__ */ new WeakMap(), _url = /* @__PURE__ */ new WeakMap(), _redirectUrl = /* @__PURE__ */ new WeakMap(), _withCredentials = /* @__PURE__ */ new WeakMap(), _fetch = /* @__PURE__ */ new WeakMap(), _reconnectInterval = /* @__PURE__ */ new WeakMap(), _reconnectTimer = /* @__PURE__ */ new WeakMap(), _lastEventId = /* @__PURE__ */ new WeakMap(), _controller = /* @__PURE__ */ new WeakMap(), _parser = /* @__PURE__ */ new WeakMap(), _onError = /* @__PURE__ */ new WeakMap(), _onMessage = /* @__PURE__ */ new WeakMap(), _onOpen = /* @__PURE__ */ new WeakMap(), _EventSource_instances = /* @__PURE__ */ new WeakSet(), /**\n* Connect to the given URL and start receiving events\n*\n* @internal\n*/\nconnect_fn = function() {\n  __privateSet(this, _readyState, this.CONNECTING), __privateSet(this, _controller, new AbortController()), __privateGet(this, _fetch)(__privateGet(this, _url), __privateMethod(this, _EventSource_instances, getRequestOptions_fn).call(this)).then(__privateGet(this, _onFetchResponse)).catch(__privateGet(this, _onFetchError));\n}, _onFetchResponse = /* @__PURE__ */ new WeakMap(), _onFetchError = /* @__PURE__ */ new WeakMap(), /**\n* Get request options for the `fetch()` request\n*\n* @returns The request options\n* @internal\n*/\ngetRequestOptions_fn = function() {\n  var _a;\n  const init = {\n    // [spec] Let `corsAttributeState` be `Anonymous`…\n    // [spec] …will have their mode set to \"cors\"…\n    mode: \"cors\",\n    redirect: \"follow\",\n    headers: { Accept: \"text/event-stream\", ...__privateGet(this, _lastEventId) ? { \"Last-Event-ID\": __privateGet(this, _lastEventId) } : void 0 },\n    cache: \"no-store\",\n    signal: (_a = __privateGet(this, _controller)) == null ? void 0 : _a.signal\n  };\n  return \"window\" in globalThis && (init.credentials = this.withCredentials ? \"include\" : \"same-origin\"), init;\n}, _onEvent = /* @__PURE__ */ new WeakMap(), _onRetryChange = /* @__PURE__ */ new WeakMap(), /**\n* Handles the process referred to in the EventSource specification as \"failing a connection\".\n*\n* @param error - The error causing the connection to fail\n* @param code - The HTTP status code, if available\n* @internal\n*/\nfailConnection_fn = function(message, code) {\n  var _a;\n  __privateGet(this, _readyState) !== this.CLOSED && __privateSet(this, _readyState, this.CLOSED);\n  const errorEvent = new ErrorEvent(\"error\", { code, message });\n  (_a = __privateGet(this, _onError)) == null || _a.call(this, errorEvent), this.dispatchEvent(errorEvent);\n}, /**\n* Schedules a reconnection attempt against the EventSource endpoint.\n*\n* @param message - The error causing the connection to fail\n* @param code - The HTTP status code, if available\n* @internal\n*/\nscheduleReconnect_fn = function(message, code) {\n  var _a;\n  if (__privateGet(this, _readyState) === this.CLOSED)\n    return;\n  __privateSet(this, _readyState, this.CONNECTING);\n  const errorEvent = new ErrorEvent(\"error\", { code, message });\n  (_a = __privateGet(this, _onError)) == null || _a.call(this, errorEvent), this.dispatchEvent(errorEvent), __privateSet(this, _reconnectTimer, setTimeout(__privateGet(this, _reconnect), __privateGet(this, _reconnectInterval)));\n}, _reconnect = /* @__PURE__ */ new WeakMap(), /**\n* ReadyState representing an EventSource currently trying to connect\n*\n* @public\n*/\nEventSource.CONNECTING = 0, /**\n* ReadyState representing an EventSource connection that is open (eg connected)\n*\n* @public\n*/\nEventSource.OPEN = 1, /**\n* ReadyState representing an EventSource connection that is closed (eg disconnected)\n*\n* @public\n*/\nEventSource.CLOSED = 2;\nfunction getBaseURL() {\n  const doc = \"document\" in globalThis ? globalThis.document : void 0;\n  return doc && typeof doc == \"object\" && \"baseURI\" in doc && typeof doc.baseURI == \"string\" ? doc.baseURI : void 0;\n}\nexport {\n  ErrorEvent,\n  EventSource\n};\n//# sourceMappingURL=index.js.map\n","let crypto;\ncrypto = globalThis.crypto; // web browsers\n/**\n * Creates an array of length `size` of random bytes\n * @param size\n * @returns Array of random ints (0 to 255)\n */\nasync function getRandomValues(size) {\n    return (await crypto).getRandomValues(new Uint8Array(size));\n}\n/** Generate cryptographically strong random string\n * @param size The desired length of the string\n * @returns The random string\n */\nasync function random(size) {\n    const mask = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~\";\n    let result = \"\";\n    const randomUints = await getRandomValues(size);\n    for (let i = 0; i < size; i++) {\n        // cap the value of the randomIndex to mask.length - 1\n        const randomIndex = randomUints[i] % mask.length;\n        result += mask[randomIndex];\n    }\n    return result;\n}\n/** Generate a PKCE challenge verifier\n * @param length Length of the verifier\n * @returns A random verifier `length` characters long\n */\nasync function generateVerifier(length) {\n    return await random(length);\n}\n/** Generate a PKCE code challenge from a code verifier\n * @param code_verifier\n * @returns The base64 url encoded code challenge\n */\nexport async function generateChallenge(code_verifier) {\n    const buffer = await (await crypto).subtle.digest(\"SHA-256\", new TextEncoder().encode(code_verifier));\n    // Generate base64url string\n    // btoa is deprecated in Node.js but is used here for web browser compatibility\n    // (which has no good replacement yet, see also https://github.com/whatwg/html/issues/6811)\n    return btoa(String.fromCharCode(...new Uint8Array(buffer)))\n        .replace(/\\//g, '_')\n        .replace(/\\+/g, '-')\n        .replace(/=/g, '');\n}\n/** Generate a PKCE challenge pair\n * @param length Length of the verifer (between 43-128). Defaults to 43.\n * @returns PKCE challenge pair\n */\nexport default async function pkceChallenge(length) {\n    if (!length)\n        length = 43;\n    if (length < 43 || length > 128) {\n        throw `Expected a length between 43 and 128. Received ${length}.`;\n    }\n    const verifier = await generateVerifier(length);\n    const challenge = await generateChallenge(verifier);\n    return {\n        code_verifier: verifier,\n        code_challenge: challenge,\n    };\n}\n/** Verify that a code_verifier produces the expected code challenge\n * @param code_verifier\n * @param expectedChallenge The code challenge to verify\n * @returns True if challenges are equal. False otherwise.\n */\nexport async function verifyChallenge(code_verifier, expectedChallenge) {\n    const actualChallenge = await generateChallenge(code_verifier);\n    return actualChallenge === expectedChallenge;\n}\n","import { z } from \"zod\";\n/**\n * RFC 9728 OAuth Protected Resource Metadata\n */\nexport const OAuthProtectedResourceMetadataSchema = z\n    .object({\n    resource: z.string().url(),\n    authorization_servers: z.array(z.string().url()).optional(),\n    jwks_uri: z.string().url().optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    bearer_methods_supported: z.array(z.string()).optional(),\n    resource_signing_alg_values_supported: z.array(z.string()).optional(),\n    resource_name: z.string().optional(),\n    resource_documentation: z.string().optional(),\n    resource_policy_uri: z.string().url().optional(),\n    resource_tos_uri: z.string().url().optional(),\n    tls_client_certificate_bound_access_tokens: z.boolean().optional(),\n    authorization_details_types_supported: z.array(z.string()).optional(),\n    dpop_signing_alg_values_supported: z.array(z.string()).optional(),\n    dpop_bound_access_tokens_required: z.boolean().optional(),\n})\n    .passthrough();\n/**\n * RFC 8414 OAuth 2.0 Authorization Server Metadata\n */\nexport const OAuthMetadataSchema = z\n    .object({\n    issuer: z.string(),\n    authorization_endpoint: z.string(),\n    token_endpoint: z.string(),\n    registration_endpoint: z.string().optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    response_types_supported: z.array(z.string()),\n    response_modes_supported: z.array(z.string()).optional(),\n    grant_types_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    service_documentation: z.string().optional(),\n    revocation_endpoint: z.string().optional(),\n    revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    revocation_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    introspection_endpoint: z.string().optional(),\n    introspection_endpoint_auth_methods_supported: z\n        .array(z.string())\n        .optional(),\n    introspection_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    code_challenge_methods_supported: z.array(z.string()).optional(),\n})\n    .passthrough();\n/**\n * OpenID Connect Discovery 1.0 Provider Metadata\n * see: https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata\n */\nexport const OpenIdProviderMetadataSchema = z\n    .object({\n    issuer: z.string(),\n    authorization_endpoint: z.string(),\n    token_endpoint: z.string(),\n    userinfo_endpoint: z.string().optional(),\n    jwks_uri: z.string(),\n    registration_endpoint: z.string().optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    response_types_supported: z.array(z.string()),\n    response_modes_supported: z.array(z.string()).optional(),\n    grant_types_supported: z.array(z.string()).optional(),\n    acr_values_supported: z.array(z.string()).optional(),\n    subject_types_supported: z.array(z.string()),\n    id_token_signing_alg_values_supported: z.array(z.string()),\n    id_token_encryption_alg_values_supported: z.array(z.string()).optional(),\n    id_token_encryption_enc_values_supported: z.array(z.string()).optional(),\n    userinfo_signing_alg_values_supported: z.array(z.string()).optional(),\n    userinfo_encryption_alg_values_supported: z.array(z.string()).optional(),\n    userinfo_encryption_enc_values_supported: z.array(z.string()).optional(),\n    request_object_signing_alg_values_supported: z.array(z.string()).optional(),\n    request_object_encryption_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    request_object_encryption_enc_values_supported: z\n        .array(z.string())\n        .optional(),\n    token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    display_values_supported: z.array(z.string()).optional(),\n    claim_types_supported: z.array(z.string()).optional(),\n    claims_supported: z.array(z.string()).optional(),\n    service_documentation: z.string().optional(),\n    claims_locales_supported: z.array(z.string()).optional(),\n    ui_locales_supported: z.array(z.string()).optional(),\n    claims_parameter_supported: z.boolean().optional(),\n    request_parameter_supported: z.boolean().optional(),\n    request_uri_parameter_supported: z.boolean().optional(),\n    require_request_uri_registration: z.boolean().optional(),\n    op_policy_uri: z.string().optional(),\n    op_tos_uri: z.string().optional(),\n})\n    .passthrough();\n/**\n * OpenID Connect Discovery metadata that may include OAuth 2.0 fields\n * This schema represents the real-world scenario where OIDC providers\n * return a mix of OpenID Connect and OAuth 2.0 metadata fields\n */\nexport const OpenIdProviderDiscoveryMetadataSchema = OpenIdProviderMetadataSchema.merge(OAuthMetadataSchema.pick({\n    code_challenge_methods_supported: true,\n}));\n/**\n * OAuth 2.1 token response\n */\nexport const OAuthTokensSchema = z\n    .object({\n    access_token: z.string(),\n    id_token: z.string().optional(), // Optional for OAuth 2.1, but necessary in OpenID Connect\n    token_type: z.string(),\n    expires_in: z.number().optional(),\n    scope: z.string().optional(),\n    refresh_token: z.string().optional(),\n})\n    .strip();\n/**\n * OAuth 2.1 error response\n */\nexport const OAuthErrorResponseSchema = z\n    .object({\n    error: z.string(),\n    error_description: z.string().optional(),\n    error_uri: z.string().optional(),\n});\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration metadata\n */\nexport const OAuthClientMetadataSchema = z.object({\n    redirect_uris: z.array(z.string()).refine((uris) => uris.every((uri) => URL.canParse(uri)), { message: \"redirect_uris must contain valid URLs\" }),\n    token_endpoint_auth_method: z.string().optional(),\n    grant_types: z.array(z.string()).optional(),\n    response_types: z.array(z.string()).optional(),\n    client_name: z.string().optional(),\n    client_uri: z.string().optional(),\n    logo_uri: z.string().optional(),\n    scope: z.string().optional(),\n    contacts: z.array(z.string()).optional(),\n    tos_uri: z.string().optional(),\n    policy_uri: z.string().optional(),\n    jwks_uri: z.string().optional(),\n    jwks: z.any().optional(),\n    software_id: z.string().optional(),\n    software_version: z.string().optional(),\n    software_statement: z.string().optional(),\n}).strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration client information\n */\nexport const OAuthClientInformationSchema = z.object({\n    client_id: z.string(),\n    client_secret: z.string().optional(),\n    client_id_issued_at: z.number().optional(),\n    client_secret_expires_at: z.number().optional(),\n}).strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration full response (client information plus metadata)\n */\nexport const OAuthClientInformationFullSchema = OAuthClientMetadataSchema.merge(OAuthClientInformationSchema);\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration error response\n */\nexport const OAuthClientRegistrationErrorSchema = z.object({\n    error: z.string(),\n    error_description: z.string().optional(),\n}).strip();\n/**\n * RFC 7009 OAuth 2.0 Token Revocation request\n */\nexport const OAuthTokenRevocationRequestSchema = z.object({\n    token: z.string(),\n    token_type_hint: z.string().optional(),\n}).strip();\n//# sourceMappingURL=auth.js.map","/**\n * Utilities for handling OAuth resource URIs.\n */\n/**\n * Converts a server URL to a resource URL by removing the fragment.\n * RFC 8707 section 2 states that resource URIs \"MUST NOT include a fragment component\".\n * Keeps everything else unchanged (scheme, domain, port, path, query).\n */\nexport function resourceUrlFromServerUrl(url) {\n    const resourceURL = typeof url === \"string\" ? new URL(url) : new URL(url.href);\n    resourceURL.hash = ''; // Remove fragment\n    return resourceURL;\n}\n/**\n * Checks if a requested resource URL matches a configured resource URL.\n * A requested resource matches if it has the same scheme, domain, port,\n * and its path starts with the configured resource's path.\n *\n * @param requestedResource The resource URL being requested\n * @param configuredResource The resource URL that has been configured\n * @returns true if the requested resource matches the configured resource, false otherwise\n */\nexport function checkResourceAllowed({ requestedResource, configuredResource }) {\n    const requested = typeof requestedResource === \"string\" ? new URL(requestedResource) : new URL(requestedResource.href);\n    const configured = typeof configuredResource === \"string\" ? new URL(configuredResource) : new URL(configuredResource.href);\n    // Compare the origin (scheme, domain, and port)\n    if (requested.origin !== configured.origin) {\n        return false;\n    }\n    // Handle cases like requested=/foo and configured=/foo/\n    if (requested.pathname.length < configured.pathname.length) {\n        return false;\n    }\n    // Check if the requested path starts with the configured path\n    // Ensure both paths end with / for proper comparison\n    // This ensures that if we have paths like \"/api\" and \"/api/users\",\n    // we properly detect that \"/api/users\" is a subpath of \"/api\"\n    // By adding a trailing slash if missing, we avoid false positives\n    // where paths like \"/api123\" would incorrectly match \"/api\"\n    const requestedPath = requested.pathname.endsWith('/') ? requested.pathname : requested.pathname + '/';\n    const configuredPath = configured.pathname.endsWith('/') ? configured.pathname : configured.pathname + '/';\n    return requestedPath.startsWith(configuredPath);\n}\n//# sourceMappingURL=auth-utils.js.map","/**\n * Base class for all OAuth errors\n */\nexport class OAuthError extends Error {\n    constructor(message, errorUri) {\n        super(message);\n        this.errorUri = errorUri;\n        this.name = this.constructor.name;\n    }\n    /**\n     * Converts the error to a standard OAuth error response object\n     */\n    toResponseObject() {\n        const response = {\n            error: this.errorCode,\n            error_description: this.message\n        };\n        if (this.errorUri) {\n            response.error_uri = this.errorUri;\n        }\n        return response;\n    }\n    get errorCode() {\n        return this.constructor.errorCode;\n    }\n}\n/**\n * Invalid request error - The request is missing a required parameter,\n * includes an invalid parameter value, includes a parameter more than once,\n * or is otherwise malformed.\n */\nexport class InvalidRequestError extends OAuthError {\n}\nInvalidRequestError.errorCode = \"invalid_request\";\n/**\n * Invalid client error - Client authentication failed (e.g., unknown client, no client\n * authentication included, or unsupported authentication method).\n */\nexport class InvalidClientError extends OAuthError {\n}\nInvalidClientError.errorCode = \"invalid_client\";\n/**\n * Invalid grant error - The provided authorization grant or refresh token is\n * invalid, expired, revoked, does not match the redirection URI used in the\n * authorization request, or was issued to another client.\n */\nexport class InvalidGrantError extends OAuthError {\n}\nInvalidGrantError.errorCode = \"invalid_grant\";\n/**\n * Unauthorized client error - The authenticated client is not authorized to use\n * this authorization grant type.\n */\nexport class UnauthorizedClientError extends OAuthError {\n}\nUnauthorizedClientError.errorCode = \"unauthorized_client\";\n/**\n * Unsupported grant type error - The authorization grant type is not supported\n * by the authorization server.\n */\nexport class UnsupportedGrantTypeError extends OAuthError {\n}\nUnsupportedGrantTypeError.errorCode = \"unsupported_grant_type\";\n/**\n * Invalid scope error - The requested scope is invalid, unknown, malformed, or\n * exceeds the scope granted by the resource owner.\n */\nexport class InvalidScopeError extends OAuthError {\n}\nInvalidScopeError.errorCode = \"invalid_scope\";\n/**\n * Access denied error - The resource owner or authorization server denied the request.\n */\nexport class AccessDeniedError extends OAuthError {\n}\nAccessDeniedError.errorCode = \"access_denied\";\n/**\n * Server error - The authorization server encountered an unexpected condition\n * that prevented it from fulfilling the request.\n */\nexport class ServerError extends OAuthError {\n}\nServerError.errorCode = \"server_error\";\n/**\n * Temporarily unavailable error - The authorization server is currently unable to\n * handle the request due to a temporary overloading or maintenance of the server.\n */\nexport class TemporarilyUnavailableError extends OAuthError {\n}\nTemporarilyUnavailableError.errorCode = \"temporarily_unavailable\";\n/**\n * Unsupported response type error - The authorization server does not support\n * obtaining an authorization code using this method.\n */\nexport class UnsupportedResponseTypeError extends OAuthError {\n}\nUnsupportedResponseTypeError.errorCode = \"unsupported_response_type\";\n/**\n * Unsupported token type error - The authorization server does not support\n * the requested token type.\n */\nexport class UnsupportedTokenTypeError extends OAuthError {\n}\nUnsupportedTokenTypeError.errorCode = \"unsupported_token_type\";\n/**\n * Invalid token error - The access token provided is expired, revoked, malformed,\n * or invalid for other reasons.\n */\nexport class InvalidTokenError extends OAuthError {\n}\nInvalidTokenError.errorCode = \"invalid_token\";\n/**\n * Method not allowed error - The HTTP method used is not allowed for this endpoint.\n * (Custom, non-standard error)\n */\nexport class MethodNotAllowedError extends OAuthError {\n}\nMethodNotAllowedError.errorCode = \"method_not_allowed\";\n/**\n * Too many requests error - Rate limit exceeded.\n * (Custom, non-standard error based on RFC 6585)\n */\nexport class TooManyRequestsError extends OAuthError {\n}\nTooManyRequestsError.errorCode = \"too_many_requests\";\n/**\n * Invalid client metadata error - The client metadata is invalid.\n * (Custom error for dynamic client registration - RFC 7591)\n */\nexport class InvalidClientMetadataError extends OAuthError {\n}\nInvalidClientMetadataError.errorCode = \"invalid_client_metadata\";\n/**\n * Insufficient scope error - The request requires higher privileges than provided by the access token.\n */\nexport class InsufficientScopeError extends OAuthError {\n}\nInsufficientScopeError.errorCode = \"insufficient_scope\";\n/**\n * A utility class for defining one-off error codes\n */\nexport class CustomOAuthError extends OAuthError {\n    constructor(customErrorCode, message, errorUri) {\n        super(message, errorUri);\n        this.customErrorCode = customErrorCode;\n    }\n    get errorCode() {\n        return this.customErrorCode;\n    }\n}\n/**\n * A full list of all OAuthErrors, enabling parsing from error responses\n */\nexport const OAUTH_ERRORS = {\n    [InvalidRequestError.errorCode]: InvalidRequestError,\n    [InvalidClientError.errorCode]: InvalidClientError,\n    [InvalidGrantError.errorCode]: InvalidGrantError,\n    [UnauthorizedClientError.errorCode]: UnauthorizedClientError,\n    [UnsupportedGrantTypeError.errorCode]: UnsupportedGrantTypeError,\n    [InvalidScopeError.errorCode]: InvalidScopeError,\n    [AccessDeniedError.errorCode]: AccessDeniedError,\n    [ServerError.errorCode]: ServerError,\n    [TemporarilyUnavailableError.errorCode]: TemporarilyUnavailableError,\n    [UnsupportedResponseTypeError.errorCode]: UnsupportedResponseTypeError,\n    [UnsupportedTokenTypeError.errorCode]: UnsupportedTokenTypeError,\n    [InvalidTokenError.errorCode]: InvalidTokenError,\n    [MethodNotAllowedError.errorCode]: MethodNotAllowedError,\n    [TooManyRequestsError.errorCode]: TooManyRequestsError,\n    [InvalidClientMetadataError.errorCode]: InvalidClientMetadataError,\n    [InsufficientScopeError.errorCode]: InsufficientScopeError,\n};\n//# sourceMappingURL=errors.js.map","import pkceChallenge from \"pkce-challenge\";\nimport { LATEST_PROTOCOL_VERSION } from \"../types.js\";\nimport { OAuthErrorResponseSchema, OpenIdProviderDiscoveryMetadataSchema } from \"../shared/auth.js\";\nimport { OAuthClientInformationFullSchema, OAuthMetadataSchema, OAuthProtectedResourceMetadataSchema, OAuthTokensSchema } from \"../shared/auth.js\";\nimport { checkResourceAllowed, resourceUrlFromServerUrl } from \"../shared/auth-utils.js\";\nimport { InvalidClientError, InvalidGrantError, OAUTH_ERRORS, OAuthError, ServerError, UnauthorizedClientError } from \"../server/auth/errors.js\";\nexport class UnauthorizedError extends Error {\n    constructor(message) {\n        super(message !== null && message !== void 0 ? message : \"Unauthorized\");\n    }\n}\n/**\n * Determines the best client authentication method to use based on server support and client configuration.\n *\n * Priority order (highest to lowest):\n * 1. client_secret_basic (if client secret is available)\n * 2. client_secret_post (if client secret is available)\n * 3. none (for public clients)\n *\n * @param clientInformation - OAuth client information containing credentials\n * @param supportedMethods - Authentication methods supported by the authorization server\n * @returns The selected authentication method\n */\nfunction selectClientAuthMethod(clientInformation, supportedMethods) {\n    const hasClientSecret = clientInformation.client_secret !== undefined;\n    // If server doesn't specify supported methods, use RFC 6749 defaults\n    if (supportedMethods.length === 0) {\n        return hasClientSecret ? \"client_secret_post\" : \"none\";\n    }\n    // Try methods in priority order (most secure first)\n    if (hasClientSecret && supportedMethods.includes(\"client_secret_basic\")) {\n        return \"client_secret_basic\";\n    }\n    if (hasClientSecret && supportedMethods.includes(\"client_secret_post\")) {\n        return \"client_secret_post\";\n    }\n    if (supportedMethods.includes(\"none\")) {\n        return \"none\";\n    }\n    // Fallback: use what we have\n    return hasClientSecret ? \"client_secret_post\" : \"none\";\n}\n/**\n * Applies client authentication to the request based on the specified method.\n *\n * Implements OAuth 2.1 client authentication methods:\n * - client_secret_basic: HTTP Basic authentication (RFC 6749 Section 2.3.1)\n * - client_secret_post: Credentials in request body (RFC 6749 Section 2.3.1)\n * - none: Public client authentication (RFC 6749 Section 2.1)\n *\n * @param method - The authentication method to use\n * @param clientInformation - OAuth client information containing credentials\n * @param headers - HTTP headers object to modify\n * @param params - URL search parameters to modify\n * @throws {Error} When required credentials are missing\n */\nfunction applyClientAuthentication(method, clientInformation, headers, params) {\n    const { client_id, client_secret } = clientInformation;\n    switch (method) {\n        case \"client_secret_basic\":\n            applyBasicAuth(client_id, client_secret, headers);\n            return;\n        case \"client_secret_post\":\n            applyPostAuth(client_id, client_secret, params);\n            return;\n        case \"none\":\n            applyPublicAuth(client_id, params);\n            return;\n        default:\n            throw new Error(`Unsupported client authentication method: ${method}`);\n    }\n}\n/**\n * Applies HTTP Basic authentication (RFC 6749 Section 2.3.1)\n */\nfunction applyBasicAuth(clientId, clientSecret, headers) {\n    if (!clientSecret) {\n        throw new Error(\"client_secret_basic authentication requires a client_secret\");\n    }\n    const credentials = btoa(`${clientId}:${clientSecret}`);\n    headers.set(\"Authorization\", `Basic ${credentials}`);\n}\n/**\n * Applies POST body authentication (RFC 6749 Section 2.3.1)\n */\nfunction applyPostAuth(clientId, clientSecret, params) {\n    params.set(\"client_id\", clientId);\n    if (clientSecret) {\n        params.set(\"client_secret\", clientSecret);\n    }\n}\n/**\n * Applies public client authentication (RFC 6749 Section 2.1)\n */\nfunction applyPublicAuth(clientId, params) {\n    params.set(\"client_id\", clientId);\n}\n/**\n * Parses an OAuth error response from a string or Response object.\n *\n * If the input is a standard OAuth2.0 error response, it will be parsed according to the spec\n * and an instance of the appropriate OAuthError subclass will be returned.\n * If parsing fails, it falls back to a generic ServerError that includes\n * the response status (if available) and original content.\n *\n * @param input - A Response object or string containing the error response\n * @returns A Promise that resolves to an OAuthError instance\n */\nexport async function parseErrorResponse(input) {\n    const statusCode = input instanceof Response ? input.status : undefined;\n    const body = input instanceof Response ? await input.text() : input;\n    try {\n        const result = OAuthErrorResponseSchema.parse(JSON.parse(body));\n        const { error, error_description, error_uri } = result;\n        const errorClass = OAUTH_ERRORS[error] || ServerError;\n        return new errorClass(error_description || '', error_uri);\n    }\n    catch (error) {\n        // Not a valid OAuth error response, but try to inform the user of the raw data anyway\n        const errorMessage = `${statusCode ? `HTTP ${statusCode}: ` : ''}Invalid OAuth error response: ${error}. Raw body: ${body}`;\n        return new ServerError(errorMessage);\n    }\n}\n/**\n * Orchestrates the full auth flow with a server.\n *\n * This can be used as a single entry point for all authorization functionality,\n * instead of linking together the other lower-level functions in this module.\n */\nexport async function auth(provider, options) {\n    var _a, _b;\n    try {\n        return await authInternal(provider, options);\n    }\n    catch (error) {\n        // Handle recoverable error types by invalidating credentials and retrying\n        if (error instanceof InvalidClientError || error instanceof UnauthorizedClientError) {\n            await ((_a = provider.invalidateCredentials) === null || _a === void 0 ? void 0 : _a.call(provider, 'all'));\n            return await authInternal(provider, options);\n        }\n        else if (error instanceof InvalidGrantError) {\n            await ((_b = provider.invalidateCredentials) === null || _b === void 0 ? void 0 : _b.call(provider, 'tokens'));\n            return await authInternal(provider, options);\n        }\n        // Throw otherwise\n        throw error;\n    }\n}\nasync function authInternal(provider, { serverUrl, authorizationCode, scope, resourceMetadataUrl, fetchFn, }) {\n    let resourceMetadata;\n    let authorizationServerUrl;\n    try {\n        resourceMetadata = await discoverOAuthProtectedResourceMetadata(serverUrl, { resourceMetadataUrl }, fetchFn);\n        if (resourceMetadata.authorization_servers && resourceMetadata.authorization_servers.length > 0) {\n            authorizationServerUrl = resourceMetadata.authorization_servers[0];\n        }\n    }\n    catch (_a) {\n        // Ignore errors and fall back to /.well-known/oauth-authorization-server\n    }\n    /**\n     * If we don't get a valid authorization server metadata from protected resource metadata,\n     * fallback to the legacy MCP spec's implementation (version 2025-03-26): MCP server acts as the Authorization server.\n     */\n    if (!authorizationServerUrl) {\n        authorizationServerUrl = serverUrl;\n    }\n    const resource = await selectResourceURL(serverUrl, provider, resourceMetadata);\n    const metadata = await discoverAuthorizationServerMetadata(authorizationServerUrl, {\n        fetchFn,\n    });\n    // Handle client registration if needed\n    let clientInformation = await Promise.resolve(provider.clientInformation());\n    if (!clientInformation) {\n        if (authorizationCode !== undefined) {\n            throw new Error(\"Existing OAuth client information is required when exchanging an authorization code\");\n        }\n        if (!provider.saveClientInformation) {\n            throw new Error(\"OAuth client information must be saveable for dynamic registration\");\n        }\n        const fullInformation = await registerClient(authorizationServerUrl, {\n            metadata,\n            clientMetadata: provider.clientMetadata,\n        });\n        await provider.saveClientInformation(fullInformation);\n        clientInformation = fullInformation;\n    }\n    // Exchange authorization code for tokens\n    if (authorizationCode !== undefined) {\n        const codeVerifier = await provider.codeVerifier();\n        const tokens = await exchangeAuthorization(authorizationServerUrl, {\n            metadata,\n            clientInformation,\n            authorizationCode,\n            codeVerifier,\n            redirectUri: provider.redirectUrl,\n            resource,\n            addClientAuthentication: provider.addClientAuthentication,\n            fetchFn: fetchFn,\n        });\n        await provider.saveTokens(tokens);\n        return \"AUTHORIZED\";\n    }\n    const tokens = await provider.tokens();\n    // Handle token refresh or new authorization\n    if (tokens === null || tokens === void 0 ? void 0 : tokens.refresh_token) {\n        try {\n            // Attempt to refresh the token\n            const newTokens = await refreshAuthorization(authorizationServerUrl, {\n                metadata,\n                clientInformation,\n                refreshToken: tokens.refresh_token,\n                resource,\n                addClientAuthentication: provider.addClientAuthentication,\n            });\n            await provider.saveTokens(newTokens);\n            return \"AUTHORIZED\";\n        }\n        catch (error) {\n            // If this is a ServerError, or an unknown type, log it out and try to continue. Otherwise, escalate so we can fix things and retry.\n            if (!(error instanceof OAuthError) || error instanceof ServerError) {\n                // Could not refresh OAuth tokens\n            }\n            else {\n                // Refresh failed for another reason, re-throw\n                throw error;\n            }\n        }\n    }\n    const state = provider.state ? await provider.state() : undefined;\n    // Start new authorization flow\n    const { authorizationUrl, codeVerifier } = await startAuthorization(authorizationServerUrl, {\n        metadata,\n        clientInformation,\n        state,\n        redirectUrl: provider.redirectUrl,\n        scope: scope || provider.clientMetadata.scope,\n        resource,\n    });\n    await provider.saveCodeVerifier(codeVerifier);\n    await provider.redirectToAuthorization(authorizationUrl);\n    return \"REDIRECT\";\n}\nexport async function selectResourceURL(serverUrl, provider, resourceMetadata) {\n    const defaultResource = resourceUrlFromServerUrl(serverUrl);\n    // If provider has custom validation, delegate to it\n    if (provider.validateResourceURL) {\n        return await provider.validateResourceURL(defaultResource, resourceMetadata === null || resourceMetadata === void 0 ? void 0 : resourceMetadata.resource);\n    }\n    // Only include resource parameter when Protected Resource Metadata is present\n    if (!resourceMetadata) {\n        return undefined;\n    }\n    // Validate that the metadata's resource is compatible with our request\n    if (!checkResourceAllowed({ requestedResource: defaultResource, configuredResource: resourceMetadata.resource })) {\n        throw new Error(`Protected resource ${resourceMetadata.resource} does not match expected ${defaultResource} (or origin)`);\n    }\n    // Prefer the resource from metadata since it's what the server is telling us to request\n    return new URL(resourceMetadata.resource);\n}\n/**\n * Extract resource_metadata from response header.\n */\nexport function extractResourceMetadataUrl(res) {\n    const authenticateHeader = res.headers.get(\"WWW-Authenticate\");\n    if (!authenticateHeader) {\n        return undefined;\n    }\n    const [type, scheme] = authenticateHeader.split(' ');\n    if (type.toLowerCase() !== 'bearer' || !scheme) {\n        return undefined;\n    }\n    const regex = /resource_metadata=\"([^\"]*)\"/;\n    const match = regex.exec(authenticateHeader);\n    if (!match) {\n        return undefined;\n    }\n    try {\n        return new URL(match[1]);\n    }\n    catch (_a) {\n        return undefined;\n    }\n}\n/**\n * Looks up RFC 9728 OAuth 2.0 Protected Resource Metadata.\n *\n * If the server returns a 404 for the well-known endpoint, this function will\n * return `undefined`. Any other errors will be thrown as exceptions.\n */\nexport async function discoverOAuthProtectedResourceMetadata(serverUrl, opts, fetchFn = fetch) {\n    const response = await discoverMetadataWithFallback(serverUrl, 'oauth-protected-resource', fetchFn, {\n        protocolVersion: opts === null || opts === void 0 ? void 0 : opts.protocolVersion,\n        metadataUrl: opts === null || opts === void 0 ? void 0 : opts.resourceMetadataUrl,\n    });\n    if (!response || response.status === 404) {\n        throw new Error(`Resource server does not implement OAuth 2.0 Protected Resource Metadata.`);\n    }\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status} trying to load well-known OAuth protected resource metadata.`);\n    }\n    return OAuthProtectedResourceMetadataSchema.parse(await response.json());\n}\n/**\n * Helper function to handle fetch with CORS retry logic\n */\nasync function fetchWithCorsRetry(url, headers, fetchFn = fetch) {\n    try {\n        return await fetchFn(url, { headers });\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            if (headers) {\n                // CORS errors come back as TypeError, retry without headers\n                return fetchWithCorsRetry(url, undefined, fetchFn);\n            }\n            else {\n                // We're getting CORS errors on retry too, return undefined\n                return undefined;\n            }\n        }\n        throw error;\n    }\n}\n/**\n * Constructs the well-known path for auth-related metadata discovery\n */\nfunction buildWellKnownPath(wellKnownPrefix, pathname = '', options = {}) {\n    // Strip trailing slash from pathname to avoid double slashes\n    if (pathname.endsWith('/')) {\n        pathname = pathname.slice(0, -1);\n    }\n    return options.prependPathname\n        ? `${pathname}/.well-known/${wellKnownPrefix}`\n        : `/.well-known/${wellKnownPrefix}${pathname}`;\n}\n/**\n * Tries to discover OAuth metadata at a specific URL\n */\nasync function tryMetadataDiscovery(url, protocolVersion, fetchFn = fetch) {\n    const headers = {\n        \"MCP-Protocol-Version\": protocolVersion\n    };\n    return await fetchWithCorsRetry(url, headers, fetchFn);\n}\n/**\n * Determines if fallback to root discovery should be attempted\n */\nfunction shouldAttemptFallback(response, pathname) {\n    return !response || response.status === 404 && pathname !== '/';\n}\n/**\n * Generic function for discovering OAuth metadata with fallback support\n */\nasync function discoverMetadataWithFallback(serverUrl, wellKnownType, fetchFn, opts) {\n    var _a, _b;\n    const issuer = new URL(serverUrl);\n    const protocolVersion = (_a = opts === null || opts === void 0 ? void 0 : opts.protocolVersion) !== null && _a !== void 0 ? _a : LATEST_PROTOCOL_VERSION;\n    let url;\n    if (opts === null || opts === void 0 ? void 0 : opts.metadataUrl) {\n        url = new URL(opts.metadataUrl);\n    }\n    else {\n        // Try path-aware discovery first\n        const wellKnownPath = buildWellKnownPath(wellKnownType, issuer.pathname);\n        url = new URL(wellKnownPath, (_b = opts === null || opts === void 0 ? void 0 : opts.metadataServerUrl) !== null && _b !== void 0 ? _b : issuer);\n        url.search = issuer.search;\n    }\n    let response = await tryMetadataDiscovery(url, protocolVersion, fetchFn);\n    // If path-aware discovery fails with 404 and we're not already at root, try fallback to root discovery\n    if (!(opts === null || opts === void 0 ? void 0 : opts.metadataUrl) && shouldAttemptFallback(response, issuer.pathname)) {\n        const rootUrl = new URL(`/.well-known/${wellKnownType}`, issuer);\n        response = await tryMetadataDiscovery(rootUrl, protocolVersion, fetchFn);\n    }\n    return response;\n}\n/**\n * Looks up RFC 8414 OAuth 2.0 Authorization Server Metadata.\n *\n * If the server returns a 404 for the well-known endpoint, this function will\n * return `undefined`. Any other errors will be thrown as exceptions.\n *\n * @deprecated This function is deprecated in favor of `discoverAuthorizationServerMetadata`.\n */\nexport async function discoverOAuthMetadata(issuer, { authorizationServerUrl, protocolVersion, } = {}, fetchFn = fetch) {\n    if (typeof issuer === 'string') {\n        issuer = new URL(issuer);\n    }\n    if (!authorizationServerUrl) {\n        authorizationServerUrl = issuer;\n    }\n    if (typeof authorizationServerUrl === 'string') {\n        authorizationServerUrl = new URL(authorizationServerUrl);\n    }\n    protocolVersion !== null && protocolVersion !== void 0 ? protocolVersion : (protocolVersion = LATEST_PROTOCOL_VERSION);\n    const response = await discoverMetadataWithFallback(authorizationServerUrl, 'oauth-authorization-server', fetchFn, {\n        protocolVersion,\n        metadataServerUrl: authorizationServerUrl,\n    });\n    if (!response || response.status === 404) {\n        return undefined;\n    }\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status} trying to load well-known OAuth metadata`);\n    }\n    return OAuthMetadataSchema.parse(await response.json());\n}\n/**\n * Builds a list of discovery URLs to try for authorization server metadata.\n * URLs are returned in priority order:\n * 1. OAuth metadata at the given URL\n * 2. OAuth metadata at root (if URL has path)\n * 3. OIDC metadata endpoints\n */\nexport function buildDiscoveryUrls(authorizationServerUrl) {\n    const url = typeof authorizationServerUrl === 'string' ? new URL(authorizationServerUrl) : authorizationServerUrl;\n    const hasPath = url.pathname !== '/';\n    const urlsToTry = [];\n    if (!hasPath) {\n        // Root path: https://example.com/.well-known/oauth-authorization-server\n        urlsToTry.push({\n            url: new URL('/.well-known/oauth-authorization-server', url.origin),\n            type: 'oauth'\n        });\n        // OIDC: https://example.com/.well-known/openid-configuration\n        urlsToTry.push({\n            url: new URL(`/.well-known/openid-configuration`, url.origin),\n            type: 'oidc'\n        });\n        return urlsToTry;\n    }\n    // Strip trailing slash from pathname to avoid double slashes\n    let pathname = url.pathname;\n    if (pathname.endsWith('/')) {\n        pathname = pathname.slice(0, -1);\n    }\n    // 1. OAuth metadata at the given URL\n    // Insert well-known before the path: https://example.com/.well-known/oauth-authorization-server/tenant1\n    urlsToTry.push({\n        url: new URL(`/.well-known/oauth-authorization-server${pathname}`, url.origin),\n        type: 'oauth'\n    });\n    // Root path: https://example.com/.well-known/oauth-authorization-server\n    urlsToTry.push({\n        url: new URL('/.well-known/oauth-authorization-server', url.origin),\n        type: 'oauth'\n    });\n    // 3. OIDC metadata endpoints\n    // RFC 8414 style: Insert /.well-known/openid-configuration before the path\n    urlsToTry.push({\n        url: new URL(`/.well-known/openid-configuration${pathname}`, url.origin),\n        type: 'oidc'\n    });\n    // OIDC Discovery 1.0 style: Append /.well-known/openid-configuration after the path\n    urlsToTry.push({\n        url: new URL(`${pathname}/.well-known/openid-configuration`, url.origin),\n        type: 'oidc'\n    });\n    return urlsToTry;\n}\n/**\n * Discovers authorization server metadata with support for RFC 8414 OAuth 2.0 Authorization Server Metadata\n * and OpenID Connect Discovery 1.0 specifications.\n *\n * This function implements a fallback strategy for authorization server discovery:\n * 1. Attempts RFC 8414 OAuth metadata discovery first\n * 2. If OAuth discovery fails, falls back to OpenID Connect Discovery\n *\n * @param authorizationServerUrl - The authorization server URL obtained from the MCP Server's\n *                                 protected resource metadata, or the MCP server's URL if the\n *                                 metadata was not found.\n * @param options - Configuration options\n * @param options.fetchFn - Optional fetch function for making HTTP requests, defaults to global fetch\n * @param options.protocolVersion - MCP protocol version to use, defaults to LATEST_PROTOCOL_VERSION\n * @returns Promise resolving to authorization server metadata, or undefined if discovery fails\n */\nexport async function discoverAuthorizationServerMetadata(authorizationServerUrl, { fetchFn = fetch, protocolVersion = LATEST_PROTOCOL_VERSION, } = {}) {\n    var _a;\n    const headers = { 'MCP-Protocol-Version': protocolVersion };\n    // Get the list of URLs to try\n    const urlsToTry = buildDiscoveryUrls(authorizationServerUrl);\n    // Try each URL in order\n    for (const { url: endpointUrl, type } of urlsToTry) {\n        const response = await fetchWithCorsRetry(endpointUrl, headers, fetchFn);\n        if (!response) {\n            throw new Error(`CORS error trying to load ${type === 'oauth' ? 'OAuth' : 'OpenID provider'} metadata from ${endpointUrl}`);\n        }\n        if (!response.ok) {\n            // Continue looking for any 4xx response code.\n            if (response.status >= 400 && response.status < 500) {\n                continue; // Try next URL\n            }\n            throw new Error(`HTTP ${response.status} trying to load ${type === 'oauth' ? 'OAuth' : 'OpenID provider'} metadata from ${endpointUrl}`);\n        }\n        // Parse and validate based on type\n        if (type === 'oauth') {\n            return OAuthMetadataSchema.parse(await response.json());\n        }\n        else {\n            const metadata = OpenIdProviderDiscoveryMetadataSchema.parse(await response.json());\n            // MCP spec requires OIDC providers to support S256 PKCE\n            if (!((_a = metadata.code_challenge_methods_supported) === null || _a === void 0 ? void 0 : _a.includes('S256'))) {\n                throw new Error(`Incompatible OIDC provider at ${endpointUrl}: does not support S256 code challenge method required by MCP specification`);\n            }\n            return metadata;\n        }\n    }\n    return undefined;\n}\n/**\n * Begins the authorization flow with the given server, by generating a PKCE challenge and constructing the authorization URL.\n */\nexport async function startAuthorization(authorizationServerUrl, { metadata, clientInformation, redirectUrl, scope, state, resource, }) {\n    const responseType = \"code\";\n    const codeChallengeMethod = \"S256\";\n    let authorizationUrl;\n    if (metadata) {\n        authorizationUrl = new URL(metadata.authorization_endpoint);\n        if (!metadata.response_types_supported.includes(responseType)) {\n            throw new Error(`Incompatible auth server: does not support response type ${responseType}`);\n        }\n        if (!metadata.code_challenge_methods_supported ||\n            !metadata.code_challenge_methods_supported.includes(codeChallengeMethod)) {\n            throw new Error(`Incompatible auth server: does not support code challenge method ${codeChallengeMethod}`);\n        }\n    }\n    else {\n        authorizationUrl = new URL(\"/authorize\", authorizationServerUrl);\n    }\n    // Generate PKCE challenge\n    const challenge = await pkceChallenge();\n    const codeVerifier = challenge.code_verifier;\n    const codeChallenge = challenge.code_challenge;\n    authorizationUrl.searchParams.set(\"response_type\", responseType);\n    authorizationUrl.searchParams.set(\"client_id\", clientInformation.client_id);\n    authorizationUrl.searchParams.set(\"code_challenge\", codeChallenge);\n    authorizationUrl.searchParams.set(\"code_challenge_method\", codeChallengeMethod);\n    authorizationUrl.searchParams.set(\"redirect_uri\", String(redirectUrl));\n    if (state) {\n        authorizationUrl.searchParams.set(\"state\", state);\n    }\n    if (scope) {\n        authorizationUrl.searchParams.set(\"scope\", scope);\n    }\n    if (scope === null || scope === void 0 ? void 0 : scope.includes(\"offline_access\")) {\n        // if the request includes the OIDC-only \"offline_access\" scope,\n        // we need to set the prompt to \"consent\" to ensure the user is prompted to grant offline access\n        // https://openid.net/specs/openid-connect-core-1_0.html#OfflineAccess\n        authorizationUrl.searchParams.append(\"prompt\", \"consent\");\n    }\n    if (resource) {\n        authorizationUrl.searchParams.set(\"resource\", resource.href);\n    }\n    return { authorizationUrl, codeVerifier };\n}\n/**\n * Exchanges an authorization code for an access token with the given server.\n *\n * Supports multiple client authentication methods as specified in OAuth 2.1:\n * - Automatically selects the best authentication method based on server support\n * - Falls back to appropriate defaults when server metadata is unavailable\n *\n * @param authorizationServerUrl - The authorization server's base URL\n * @param options - Configuration object containing client info, auth code, etc.\n * @returns Promise resolving to OAuth tokens\n * @throws {Error} When token exchange fails or authentication is invalid\n */\nexport async function exchangeAuthorization(authorizationServerUrl, { metadata, clientInformation, authorizationCode, codeVerifier, redirectUri, resource, addClientAuthentication, fetchFn, }) {\n    var _a;\n    const grantType = \"authorization_code\";\n    const tokenUrl = (metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint)\n        ? new URL(metadata.token_endpoint)\n        : new URL(\"/token\", authorizationServerUrl);\n    if ((metadata === null || metadata === void 0 ? void 0 : metadata.grant_types_supported) &&\n        !metadata.grant_types_supported.includes(grantType)) {\n        throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n    }\n    // Exchange code for tokens\n    const headers = new Headers({\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Accept\": \"application/json\",\n    });\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        code: authorizationCode,\n        code_verifier: codeVerifier,\n        redirect_uri: String(redirectUri),\n    });\n    if (addClientAuthentication) {\n        addClientAuthentication(headers, params, authorizationServerUrl, metadata);\n    }\n    else {\n        // Determine and apply client authentication method\n        const supportedMethods = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint_auth_methods_supported) !== null && _a !== void 0 ? _a : [];\n        const authMethod = selectClientAuthMethod(clientInformation, supportedMethods);\n        applyClientAuthentication(authMethod, clientInformation, headers, params);\n    }\n    if (resource) {\n        params.set(\"resource\", resource.href);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(tokenUrl, {\n        method: \"POST\",\n        headers,\n        body: params,\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthTokensSchema.parse(await response.json());\n}\n/**\n * Exchange a refresh token for an updated access token.\n *\n * Supports multiple client authentication methods as specified in OAuth 2.1:\n * - Automatically selects the best authentication method based on server support\n * - Preserves the original refresh token if a new one is not returned\n *\n * @param authorizationServerUrl - The authorization server's base URL\n * @param options - Configuration object containing client info, refresh token, etc.\n * @returns Promise resolving to OAuth tokens (preserves original refresh_token if not replaced)\n * @throws {Error} When token refresh fails or authentication is invalid\n */\nexport async function refreshAuthorization(authorizationServerUrl, { metadata, clientInformation, refreshToken, resource, addClientAuthentication, fetchFn, }) {\n    var _a;\n    const grantType = \"refresh_token\";\n    let tokenUrl;\n    if (metadata) {\n        tokenUrl = new URL(metadata.token_endpoint);\n        if (metadata.grant_types_supported &&\n            !metadata.grant_types_supported.includes(grantType)) {\n            throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n        }\n    }\n    else {\n        tokenUrl = new URL(\"/token\", authorizationServerUrl);\n    }\n    // Exchange refresh token\n    const headers = new Headers({\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n    });\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        refresh_token: refreshToken,\n    });\n    if (addClientAuthentication) {\n        addClientAuthentication(headers, params, authorizationServerUrl, metadata);\n    }\n    else {\n        // Determine and apply client authentication method\n        const supportedMethods = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint_auth_methods_supported) !== null && _a !== void 0 ? _a : [];\n        const authMethod = selectClientAuthMethod(clientInformation, supportedMethods);\n        applyClientAuthentication(authMethod, clientInformation, headers, params);\n    }\n    if (resource) {\n        params.set(\"resource\", resource.href);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(tokenUrl, {\n        method: \"POST\",\n        headers,\n        body: params,\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthTokensSchema.parse({ refresh_token: refreshToken, ...(await response.json()) });\n}\n/**\n * Performs OAuth 2.0 Dynamic Client Registration according to RFC 7591.\n */\nexport async function registerClient(authorizationServerUrl, { metadata, clientMetadata, fetchFn, }) {\n    let registrationUrl;\n    if (metadata) {\n        if (!metadata.registration_endpoint) {\n            throw new Error(\"Incompatible auth server: does not support dynamic client registration\");\n        }\n        registrationUrl = new URL(metadata.registration_endpoint);\n    }\n    else {\n        registrationUrl = new URL(\"/register\", authorizationServerUrl);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(registrationUrl, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(clientMetadata),\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthClientInformationFullSchema.parse(await response.json());\n}\n//# sourceMappingURL=auth.js.map","import { EventSource } from \"eventsource\";\nimport { JSONRPCMessageSchema } from \"../types.js\";\nimport { auth, extractResourceMetadataUrl, UnauthorizedError } from \"./auth.js\";\nexport class SseError extends Error {\n    constructor(code, message, event) {\n        super(`SSE error: ${message}`);\n        this.code = code;\n        this.event = event;\n    }\n}\n/**\n * Client transport for SSE: this will connect to a server using Server-Sent Events for receiving\n * messages and make separate POST requests for sending messages.\n */\nexport class SSEClientTransport {\n    constructor(url, opts) {\n        this._url = url;\n        this._resourceMetadataUrl = undefined;\n        this._eventSourceInit = opts === null || opts === void 0 ? void 0 : opts.eventSourceInit;\n        this._requestInit = opts === null || opts === void 0 ? void 0 : opts.requestInit;\n        this._authProvider = opts === null || opts === void 0 ? void 0 : opts.authProvider;\n        this._fetch = opts === null || opts === void 0 ? void 0 : opts.fetch;\n    }\n    async _authThenStart() {\n        var _a;\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        let result;\n        try {\n            result = await auth(this._authProvider, { serverUrl: this._url, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n        }\n        catch (error) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n            throw error;\n        }\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError();\n        }\n        return await this._startOrAuth();\n    }\n    async _commonHeaders() {\n        var _a;\n        const headers = {};\n        if (this._authProvider) {\n            const tokens = await this._authProvider.tokens();\n            if (tokens) {\n                headers[\"Authorization\"] = `Bearer ${tokens.access_token}`;\n            }\n        }\n        if (this._protocolVersion) {\n            headers[\"mcp-protocol-version\"] = this._protocolVersion;\n        }\n        return new Headers({ ...headers, ...(_a = this._requestInit) === null || _a === void 0 ? void 0 : _a.headers });\n    }\n    _startOrAuth() {\n        var _a, _b, _c;\n        const fetchImpl = ((_c = (_b = (_a = this === null || this === void 0 ? void 0 : this._eventSourceInit) === null || _a === void 0 ? void 0 : _a.fetch) !== null && _b !== void 0 ? _b : this._fetch) !== null && _c !== void 0 ? _c : fetch);\n        return new Promise((resolve, reject) => {\n            this._eventSource = new EventSource(this._url.href, {\n                ...this._eventSourceInit,\n                fetch: async (url, init) => {\n                    const headers = await this._commonHeaders();\n                    headers.set(\"Accept\", \"text/event-stream\");\n                    const response = await fetchImpl(url, {\n                        ...init,\n                        headers,\n                    });\n                    if (response.status === 401 && response.headers.has('www-authenticate')) {\n                        this._resourceMetadataUrl = extractResourceMetadataUrl(response);\n                    }\n                    return response;\n                },\n            });\n            this._abortController = new AbortController();\n            this._eventSource.onerror = (event) => {\n                var _a;\n                if (event.code === 401 && this._authProvider) {\n                    this._authThenStart().then(resolve, reject);\n                    return;\n                }\n                const error = new SseError(event.code, event.message, event);\n                reject(error);\n                (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n            };\n            this._eventSource.onopen = () => {\n                // The connection is open, but we need to wait for the endpoint to be received.\n            };\n            this._eventSource.addEventListener(\"endpoint\", (event) => {\n                var _a;\n                const messageEvent = event;\n                try {\n                    this._endpoint = new URL(messageEvent.data, this._url);\n                    if (this._endpoint.origin !== this._url.origin) {\n                        throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`);\n                    }\n                }\n                catch (error) {\n                    reject(error);\n                    (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n                    void this.close();\n                    return;\n                }\n                resolve();\n            });\n            this._eventSource.onmessage = (event) => {\n                var _a, _b;\n                const messageEvent = event;\n                let message;\n                try {\n                    message = JSONRPCMessageSchema.parse(JSON.parse(messageEvent.data));\n                }\n                catch (error) {\n                    (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n                    return;\n                }\n                (_b = this.onmessage) === null || _b === void 0 ? void 0 : _b.call(this, message);\n            };\n        });\n    }\n    async start() {\n        if (this._eventSource) {\n            throw new Error(\"SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.\");\n        }\n        return await this._startOrAuth();\n    }\n    /**\n     * Call this method after the user has finished authorizing via their user agent and is redirected back to the MCP client application. This will exchange the authorization code for an access token, enabling the next connection attempt to successfully auth.\n     */\n    async finishAuth(authorizationCode) {\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        const result = await auth(this._authProvider, { serverUrl: this._url, authorizationCode, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError(\"Failed to authorize\");\n        }\n    }\n    async close() {\n        var _a, _b, _c;\n        (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        (_b = this._eventSource) === null || _b === void 0 ? void 0 : _b.close();\n        (_c = this.onclose) === null || _c === void 0 ? void 0 : _c.call(this);\n    }\n    async send(message) {\n        var _a, _b, _c;\n        if (!this._endpoint) {\n            throw new Error(\"Not connected\");\n        }\n        try {\n            const headers = await this._commonHeaders();\n            headers.set(\"content-type\", \"application/json\");\n            const init = {\n                ...this._requestInit,\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(message),\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            };\n            const response = await ((_b = this._fetch) !== null && _b !== void 0 ? _b : fetch)(this._endpoint, init);\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    this._resourceMetadataUrl = extractResourceMetadataUrl(response);\n                    const result = await auth(this._authProvider, { serverUrl: this._url, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n                    if (result !== \"AUTHORIZED\") {\n                        throw new UnauthorizedError();\n                    }\n                    // Purposely _not_ awaited, so we don't call onerror twice\n                    return this.send(message);\n                }\n                const text = await response.text().catch(() => null);\n                throw new Error(`Error POSTing to endpoint (HTTP ${response.status}): ${text}`);\n            }\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    setProtocolVersion(version) {\n        this._protocolVersion = version;\n    }\n}\n//# sourceMappingURL=sse.js.map","import { createParser } from \"./index.js\";\nimport { ParseError } from \"./index.js\";\nclass EventSourceParserStream extends TransformStream {\n  constructor({ onError, onRetry, onComment } = {}) {\n    let parser;\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event);\n          },\n          onError(error) {\n            onError === \"terminate\" ? controller.error(error) : typeof onError == \"function\" && onError(error);\n          },\n          onRetry,\n          onComment\n        });\n      },\n      transform(chunk) {\n        parser.feed(chunk);\n      }\n    });\n  }\n}\nexport {\n  EventSourceParserStream,\n  ParseError\n};\n//# sourceMappingURL=stream.js.map\n","import { isInitializedNotification, isJSONRPCRequest, isJSONRPCResponse, JSONRPCMessageSchema } from \"../types.js\";\nimport { auth, extractResourceMetadataUrl, UnauthorizedError } from \"./auth.js\";\nimport { EventSourceParserStream } from \"eventsource-parser/stream\";\n// Default reconnection options for StreamableHTTP connections\nconst DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS = {\n    initialReconnectionDelay: 1000,\n    maxReconnectionDelay: 30000,\n    reconnectionDelayGrowFactor: 1.5,\n    maxRetries: 2,\n};\nexport class StreamableHTTPError extends Error {\n    constructor(code, message) {\n        super(`Streamable HTTP error: ${message}`);\n        this.code = code;\n    }\n}\n/**\n * Client transport for Streamable HTTP: this implements the MCP Streamable HTTP transport specification.\n * It will connect to a server using HTTP POST for sending messages and HTTP GET with Server-Sent Events\n * for receiving messages.\n */\nexport class StreamableHTTPClientTransport {\n    constructor(url, opts) {\n        var _a;\n        this._url = url;\n        this._resourceMetadataUrl = undefined;\n        this._requestInit = opts === null || opts === void 0 ? void 0 : opts.requestInit;\n        this._authProvider = opts === null || opts === void 0 ? void 0 : opts.authProvider;\n        this._fetch = opts === null || opts === void 0 ? void 0 : opts.fetch;\n        this._sessionId = opts === null || opts === void 0 ? void 0 : opts.sessionId;\n        this._reconnectionOptions = (_a = opts === null || opts === void 0 ? void 0 : opts.reconnectionOptions) !== null && _a !== void 0 ? _a : DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS;\n    }\n    async _authThenStart() {\n        var _a;\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        let result;\n        try {\n            result = await auth(this._authProvider, { serverUrl: this._url, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n        }\n        catch (error) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n            throw error;\n        }\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError();\n        }\n        return await this._startOrAuthSse({ resumptionToken: undefined });\n    }\n    async _commonHeaders() {\n        var _a;\n        const headers = {};\n        if (this._authProvider) {\n            const tokens = await this._authProvider.tokens();\n            if (tokens) {\n                headers[\"Authorization\"] = `Bearer ${tokens.access_token}`;\n            }\n        }\n        if (this._sessionId) {\n            headers[\"mcp-session-id\"] = this._sessionId;\n        }\n        if (this._protocolVersion) {\n            headers[\"mcp-protocol-version\"] = this._protocolVersion;\n        }\n        const extraHeaders = this._normalizeHeaders((_a = this._requestInit) === null || _a === void 0 ? void 0 : _a.headers);\n        return new Headers({\n            ...headers,\n            ...extraHeaders,\n        });\n    }\n    async _startOrAuthSse(options) {\n        var _a, _b, _c;\n        const { resumptionToken } = options;\n        try {\n            // Try to open an initial SSE stream with GET to listen for server messages\n            // This is optional according to the spec - server may not support it\n            const headers = await this._commonHeaders();\n            headers.set(\"Accept\", \"text/event-stream\");\n            // Include Last-Event-ID header for resumable streams if provided\n            if (resumptionToken) {\n                headers.set(\"last-event-id\", resumptionToken);\n            }\n            const response = await ((_a = this._fetch) !== null && _a !== void 0 ? _a : fetch)(this._url, {\n                method: \"GET\",\n                headers,\n                signal: (_b = this._abortController) === null || _b === void 0 ? void 0 : _b.signal,\n            });\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    // Need to authenticate\n                    return await this._authThenStart();\n                }\n                // 405 indicates that the server does not offer an SSE stream at GET endpoint\n                // This is an expected case that should not trigger an error\n                if (response.status === 405) {\n                    return;\n                }\n                throw new StreamableHTTPError(response.status, `Failed to open SSE stream: ${response.statusText}`);\n            }\n            this._handleSseStream(response.body, options, true);\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    /**\n     * Calculates the next reconnection delay using  backoff algorithm\n     *\n     * @param attempt Current reconnection attempt count for the specific stream\n     * @returns Time to wait in milliseconds before next reconnection attempt\n     */\n    _getNextReconnectionDelay(attempt) {\n        // Access default values directly, ensuring they're never undefined\n        const initialDelay = this._reconnectionOptions.initialReconnectionDelay;\n        const growFactor = this._reconnectionOptions.reconnectionDelayGrowFactor;\n        const maxDelay = this._reconnectionOptions.maxReconnectionDelay;\n        // Cap at maximum delay\n        return Math.min(initialDelay * Math.pow(growFactor, attempt), maxDelay);\n    }\n    _normalizeHeaders(headers) {\n        if (!headers)\n            return {};\n        if (headers instanceof Headers) {\n            return Object.fromEntries(headers.entries());\n        }\n        if (Array.isArray(headers)) {\n            return Object.fromEntries(headers);\n        }\n        return { ...headers };\n    }\n    /**\n     * Schedule a reconnection attempt with exponential backoff\n     *\n     * @param lastEventId The ID of the last received event for resumability\n     * @param attemptCount Current reconnection attempt count for this specific stream\n     */\n    _scheduleReconnection(options, attemptCount = 0) {\n        var _a;\n        // Use provided options or default options\n        const maxRetries = this._reconnectionOptions.maxRetries;\n        // Check if we've exceeded maximum retry attempts\n        if (maxRetries > 0 && attemptCount >= maxRetries) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Maximum reconnection attempts (${maxRetries}) exceeded.`));\n            return;\n        }\n        // Calculate next delay based on current attempt count\n        const delay = this._getNextReconnectionDelay(attemptCount);\n        // Schedule the reconnection\n        setTimeout(() => {\n            // Use the last event ID to resume where we left off\n            this._startOrAuthSse(options).catch(error => {\n                var _a;\n                (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Failed to reconnect SSE stream: ${error instanceof Error ? error.message : String(error)}`));\n                // Schedule another attempt if this one failed, incrementing the attempt counter\n                this._scheduleReconnection(options, attemptCount + 1);\n            });\n        }, delay);\n    }\n    _handleSseStream(stream, options, isReconnectable) {\n        if (!stream) {\n            return;\n        }\n        const { onresumptiontoken, replayMessageId } = options;\n        let lastEventId;\n        const processStream = async () => {\n            var _a, _b, _c, _d;\n            // this is the closest we can get to trying to catch network errors\n            // if something happens reader will throw\n            try {\n                // Create a pipeline: binary stream -> text decoder -> SSE parser\n                const reader = stream\n                    .pipeThrough(new TextDecoderStream())\n                    .pipeThrough(new EventSourceParserStream())\n                    .getReader();\n                while (true) {\n                    const { value: event, done } = await reader.read();\n                    if (done) {\n                        break;\n                    }\n                    // Update last event ID if provided\n                    if (event.id) {\n                        lastEventId = event.id;\n                        onresumptiontoken === null || onresumptiontoken === void 0 ? void 0 : onresumptiontoken(event.id);\n                    }\n                    if (!event.event || event.event === \"message\") {\n                        try {\n                            const message = JSONRPCMessageSchema.parse(JSON.parse(event.data));\n                            if (replayMessageId !== undefined && isJSONRPCResponse(message)) {\n                                message.id = replayMessageId;\n                            }\n                            (_a = this.onmessage) === null || _a === void 0 ? void 0 : _a.call(this, message);\n                        }\n                        catch (error) {\n                            (_b = this.onerror) === null || _b === void 0 ? void 0 : _b.call(this, error);\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                // Handle stream errors - likely a network disconnect\n                (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, new Error(`SSE stream disconnected: ${error}`));\n                // Attempt to reconnect if the stream disconnects unexpectedly and we aren't closing\n                if (isReconnectable &&\n                    this._abortController &&\n                    !this._abortController.signal.aborted) {\n                    // Use the exponential backoff reconnection strategy\n                    try {\n                        this._scheduleReconnection({\n                            resumptionToken: lastEventId,\n                            onresumptiontoken,\n                            replayMessageId\n                        }, 0);\n                    }\n                    catch (error) {\n                        (_d = this.onerror) === null || _d === void 0 ? void 0 : _d.call(this, new Error(`Failed to reconnect: ${error instanceof Error ? error.message : String(error)}`));\n                    }\n                }\n            }\n        };\n        processStream();\n    }\n    async start() {\n        if (this._abortController) {\n            throw new Error(\"StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.\");\n        }\n        this._abortController = new AbortController();\n    }\n    /**\n     * Call this method after the user has finished authorizing via their user agent and is redirected back to the MCP client application. This will exchange the authorization code for an access token, enabling the next connection attempt to successfully auth.\n     */\n    async finishAuth(authorizationCode) {\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        const result = await auth(this._authProvider, { serverUrl: this._url, authorizationCode, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError(\"Failed to authorize\");\n        }\n    }\n    async close() {\n        var _a, _b;\n        // Abort any pending requests\n        (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        (_b = this.onclose) === null || _b === void 0 ? void 0 : _b.call(this);\n    }\n    async send(message, options) {\n        var _a, _b, _c, _d;\n        try {\n            const { resumptionToken, onresumptiontoken } = options || {};\n            if (resumptionToken) {\n                // If we have at last event ID, we need to reconnect the SSE stream\n                this._startOrAuthSse({ resumptionToken, replayMessageId: isJSONRPCRequest(message) ? message.id : undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                return;\n            }\n            const headers = await this._commonHeaders();\n            headers.set(\"content-type\", \"application/json\");\n            headers.set(\"accept\", \"application/json, text/event-stream\");\n            const init = {\n                ...this._requestInit,\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(message),\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            };\n            const response = await ((_b = this._fetch) !== null && _b !== void 0 ? _b : fetch)(this._url, init);\n            // Handle session ID received during initialization\n            const sessionId = response.headers.get(\"mcp-session-id\");\n            if (sessionId) {\n                this._sessionId = sessionId;\n            }\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    this._resourceMetadataUrl = extractResourceMetadataUrl(response);\n                    const result = await auth(this._authProvider, { serverUrl: this._url, resourceMetadataUrl: this._resourceMetadataUrl, fetchFn: this._fetch });\n                    if (result !== \"AUTHORIZED\") {\n                        throw new UnauthorizedError();\n                    }\n                    // Purposely _not_ awaited, so we don't call onerror twice\n                    return this.send(message);\n                }\n                const text = await response.text().catch(() => null);\n                throw new Error(`Error POSTing to endpoint (HTTP ${response.status}): ${text}`);\n            }\n            // If the response is 202 Accepted, there's no body to process\n            if (response.status === 202) {\n                // if the accepted notification is initialized, we start the SSE stream\n                // if it's supported by the server\n                if (isInitializedNotification(message)) {\n                    // Start without a lastEventId since this is a fresh connection\n                    this._startOrAuthSse({ resumptionToken: undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                }\n                return;\n            }\n            // Get original message(s) for detecting request IDs\n            const messages = Array.isArray(message) ? message : [message];\n            const hasRequests = messages.filter(msg => \"method\" in msg && \"id\" in msg && msg.id !== undefined).length > 0;\n            // Check the response type\n            const contentType = response.headers.get(\"content-type\");\n            if (hasRequests) {\n                if (contentType === null || contentType === void 0 ? void 0 : contentType.includes(\"text/event-stream\")) {\n                    // Handle SSE stream responses for requests\n                    // We use the same handler as standalone streams, which now supports\n                    // reconnection with the last event ID\n                    this._handleSseStream(response.body, { onresumptiontoken }, false);\n                }\n                else if (contentType === null || contentType === void 0 ? void 0 : contentType.includes(\"application/json\")) {\n                    // For non-streaming servers, we might get direct JSON responses\n                    const data = await response.json();\n                    const responseMessages = Array.isArray(data)\n                        ? data.map(msg => JSONRPCMessageSchema.parse(msg))\n                        : [JSONRPCMessageSchema.parse(data)];\n                    for (const msg of responseMessages) {\n                        (_c = this.onmessage) === null || _c === void 0 ? void 0 : _c.call(this, msg);\n                    }\n                }\n                else {\n                    throw new StreamableHTTPError(-1, `Unexpected content type: ${contentType}`);\n                }\n            }\n        }\n        catch (error) {\n            (_d = this.onerror) === null || _d === void 0 ? void 0 : _d.call(this, error);\n            throw error;\n        }\n    }\n    get sessionId() {\n        return this._sessionId;\n    }\n    /**\n     * Terminates the current session by sending a DELETE request to the server.\n     *\n     * Clients that no longer need a particular session\n     * (e.g., because the user is leaving the client application) SHOULD send an\n     * HTTP DELETE to the MCP endpoint with the Mcp-Session-Id header to explicitly\n     * terminate the session.\n     *\n     * The server MAY respond with HTTP 405 Method Not Allowed, indicating that\n     * the server does not allow clients to terminate sessions.\n     */\n    async terminateSession() {\n        var _a, _b, _c;\n        if (!this._sessionId) {\n            return; // No session to terminate\n        }\n        try {\n            const headers = await this._commonHeaders();\n            const init = {\n                ...this._requestInit,\n                method: \"DELETE\",\n                headers,\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            };\n            const response = await ((_b = this._fetch) !== null && _b !== void 0 ? _b : fetch)(this._url, init);\n            // We specifically handle 405 as a valid response according to the spec,\n            // meaning the server does not support explicit session termination\n            if (!response.ok && response.status !== 405) {\n                throw new StreamableHTTPError(response.status, `Failed to terminate session: ${response.statusText}`);\n            }\n            this._sessionId = undefined;\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    setProtocolVersion(version) {\n        this._protocolVersion = version;\n    }\n    get protocolVersion() {\n        return this._protocolVersion;\n    }\n}\n//# sourceMappingURL=streamableHttp.js.map","import { JSONRPCMessageSchema, EmptyResultSchema, CreateMessageResultSchema, ListRootsResultSchema } from \"@modelcontextprotocol/sdk/types.js\";\nimport { Client } from \"@modelcontextprotocol/sdk/client/index.js\";\nimport { SSEClientTransport } from \"@modelcontextprotocol/sdk/client/sse.js\";\nimport { StreamableHTTPClientTransport } from \"@modelcontextprotocol/sdk/client/streamableHttp.js\";\nfunction _0x5d34() {\n  const _0x1efc11 = [\"xvQXC\", \"603309hhGmOf\", \"object\", \"160767aSXjlh\", \"kgSPd\", \"toString\", \"821472ICyrFe\", \"3022854AnmWAK\", \"replace\", \"1492478hKDkXm\", \"456955eGHvGi\", \"randomUUID\", \"getRandomValues\", \"4IGLajm\", \"HlhgH\", \"1409958waVENt\", \"696JipcmK\"];\n  _0x5d34 = function() {\n    return _0x1efc11;\n  };\n  return _0x5d34();\n}\n(function(_0x4dc11c, _0x342bbc) {\n  const _0x3c49e9 = _0x289c, _0x37f6f6 = _0x289c, _0x426ff0 = _0x4dc11c();\n  while (!![]) {\n    try {\n      const _0xd0da30 = -parseInt(_0x3c49e9(362)) / (-2801 + 1626 + 1176) + parseInt(_0x3c49e9(365)) / (109 * -47 + -781 * -1 + 4344) + -parseInt(_0x3c49e9(371)) / (1449 + 5290 + -6736) + -parseInt(_0x37f6f6(369)) / (9948 + -1 * -5575 + -2217 * 7) * (-parseInt(_0x37f6f6(366)) / (-857 * -3 + 843 + 487 * -7)) + -parseInt(_0x3c49e9(363)) / (3198 * 2 + -664 * -9 + -12366) + -parseInt(_0x3c49e9(357)) / (-274 * 13 + -2 * 4478 + 12525) + -parseInt(_0x3c49e9(372)) / (8894 + -9603 + 717) * (-parseInt(_0x37f6f6(359)) / (7464 + 1 * -8275 + 820));\n      if (_0xd0da30 === _0x342bbc) break;\n      else _0x426ff0[\"push\"](_0x426ff0[\"shift\"]());\n    } catch (_0x5dc85b) {\n      _0x426ff0[\"push\"](_0x426ff0[\"shift\"]());\n    }\n  }\n})(_0x5d34, 425592 + -13470 * 23 + 394475);\nfunction _0x289c(_0x512315, _0x222a6f) {\n  const _0x5306d2 = _0x5d34();\n  return _0x289c = function(_0x1a2d06, _0x4b468c) {\n    _0x1a2d06 = _0x1a2d06 - (-2 * -2318 + -1565 * -1 + 1948 * -3);\n    let _0x1d079e = _0x5306d2[_0x1a2d06];\n    return _0x1d079e;\n  }, _0x289c(_0x512315, _0x222a6f);\n}\nconst generateUUID = () => {\n  const _0x3efd85 = _0x289c, _0x155517 = _0x289c, _0x279997 = {};\n  _0x279997[_0x3efd85(360)] = function(_0x1ac68e, _0x55103b) {\n    return _0x1ac68e & _0x55103b;\n  }, _0x279997[_0x3efd85(370)] = function(_0x10aa46, _0x16c636) {\n    return _0x10aa46 === _0x16c636;\n  }, _0x279997[_0x3efd85(373)] = function(_0x122514, _0x47a8ac) {\n    return _0x122514 | _0x47a8ac;\n  }, _0x279997[\"Lxvwz\"] = _0x3efd85(358);\n  const _0x2a72a1 = _0x279997;\n  if (_0x2a72a1[_0x3efd85(370)](typeof crypto, _0x2a72a1[\"Lxvwz\"]) && crypto[_0x155517(367)]) return crypto[\"randomUUID\"]();\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\"[_0x3efd85(364)](/[xy]/g, (_0x524583) => {\n    const _0x3e769a = _0x155517, _0x5f5be0 = _0x155517, _0x4f8415 = _0x2a72a1[\"kgSPd\"](crypto[_0x3e769a(368)](new Uint8Array(-2273 + -4356 + 170 * 39))[-2 * 1726 + 4100 + -648], -478 * -1 + 63 * -88 + 5081), _0x4fa1f7 = _0x2a72a1[_0x3e769a(370)](_0x524583, \"x\") ? _0x4f8415 : _0x2a72a1[_0x5f5be0(373)](_0x2a72a1[_0x3e769a(360)](_0x4f8415, -1 * 3833 + 2 * 872 + 2092), -5 * -125 + -272 + -345);\n    return _0x4fa1f7[_0x5f5be0(361)](2375 + -753 + -803 * 2);\n  });\n};\nconst _0x1bfdb8 = _0x25bb;\n(function(_0x50733a, _0x2583a6) {\n  const _0x563472 = _0x25bb, _0x275dfa = _0x25bb, _0x255adf = _0x50733a();\n  while (!![]) {\n    try {\n      const _0x5adf99 = -parseInt(_0x563472(190)) / (-8787 * 1 + -1929 + 10717) * (-parseInt(_0x563472(222)) / (-7006 + 2511 + -1 * -4497)) + parseInt(_0x275dfa(204)) / (9565 + -4765 + -1599 * 3) * (parseInt(_0x275dfa(231)) / (-5435 + 2908 * 1 + 2531)) + parseInt(_0x563472(194)) / (1092 + -3 * -1919 + -6844) * (-parseInt(_0x563472(223)) / (-2131 + -968 * 6 + 1 * 7945)) + parseInt(_0x275dfa(217)) / (-8742 + -1 * 3389 + 12138) + -parseInt(_0x275dfa(195)) / (7528 + 1094 * -2 + -5332) + parseInt(_0x563472(232)) / (1 * -14 + -8826 + 8849) * (-parseInt(_0x563472(192)) / (-1 * -1426 + -3826 * -1 + -2 * 2621)) + parseInt(_0x275dfa(234)) / (2279 * 3 + 1205 + -3 * 2677);\n      if (_0x5adf99 === _0x2583a6) break;\n      else _0x255adf[\"push\"](_0x255adf[\"shift\"]());\n    } catch (_0x3f0ca7) {\n      _0x255adf[\"push\"](_0x255adf[\"shift\"]());\n    }\n  }\n})(_0x49a5, 1 * -1712191 + 10 * -131891 + -3919385 * -1);\nconst getGlobalObject = () => {\n  const _0x23b82a = _0x25bb, _0x4af369 = _0x25bb, _0x1d1152 = { \"HKFrs\": \"3|4|2|0|1\", \"NXAqB\": function(_0x582ca9, _0x48bda6) {\n    return _0x582ca9 !== _0x48bda6;\n  }, \"yUAGf\": _0x23b82a(226), \"RFXXY\": function(_0x363a9d, _0x528c26) {\n    return _0x363a9d(_0x528c26);\n  }, \"XNizk\": \"return this\" }, _0x2b7deb = _0x1d1152[_0x23b82a(213)][\"split\"](\"|\");\n  let _0x2741fe = 5677 + -4633 * 1 + -1044;\n  while (!![]) {\n    switch (_0x2b7deb[_0x2741fe++]) {\n      case \"0\":\n        if (_0x1d1152[_0x4af369(207)](typeof self, _0x1d1152[\"yUAGf\"])) return self;\n        continue;\n      case \"1\":\n        return _0x1d1152[_0x4af369(225)](Function, _0x1d1152[_0x23b82a(236)])();\n      case \"2\":\n        if (_0x1d1152[\"NXAqB\"](typeof global, _0x1d1152[\"yUAGf\"])) return global;\n        continue;\n      case \"3\":\n        if (typeof globalThis !== _0x1d1152[\"yUAGf\"]) return globalThis;\n        continue;\n      case \"4\":\n        if (_0x1d1152[_0x4af369(207)](typeof window, _0x1d1152[_0x23b82a(191)])) return window;\n        continue;\n    }\n    break;\n  }\n}, sendMessage = (_0x53058f, _0x1b280c, _0x3c090e) => {\n  const _0x4a8659 = _0x25bb, _0x5bdb65 = _0x25bb, _0x258adf = {};\n  _0x258adf[_0x4a8659(196)] = function(_0x206a3a, _0xe5b6f3) {\n    return _0x206a3a !== _0xe5b6f3;\n  }, _0x258adf[\"aJDpp\"] = \"undefined\", _0x258adf[_0x4a8659(221)] = function(_0x507d06, _0x440bfc) {\n    return _0x507d06 in _0x440bfc;\n  }, _0x258adf[\"qKvEo\"] = _0x4a8659(229), _0x258adf[_0x5bdb65(215)] = _0x5bdb65(197);\n  const _0x4bdd96 = _0x258adf;\n  if (_0x4bdd96[_0x5bdb65(196)](typeof window, _0x4bdd96[\"aJDpp\"])) _0x53058f[\"postMessage\"](_0x1b280c, \"*\", _0x3c090e);\n  else _0x4bdd96[\"WVeFE\"](_0x4bdd96[\"qKvEo\"], _0x53058f) && typeof _0x53058f[\"postMessage\"] === _0x4bdd96[\"ctLco\"] && _0x53058f[\"postMessage\"](_0x1b280c, _0x3c090e);\n}, setMessageHandler = (_0x97a54d, _0x43d901) => {\n  const _0x53a350 = _0x25bb, _0x187012 = _0x25bb, _0x5b0505 = {};\n  _0x5b0505[\"trFbG\"] = function(_0x1eb611, _0x205a42) {\n    return _0x1eb611 in _0x205a42;\n  }, _0x5b0505[\"TBOUS\"] = \"addEventListener\", _0x5b0505[\"bJaJS\"] = function(_0x1a84f0, _0x593bc4) {\n    return _0x1a84f0 === _0x593bc4;\n  }, _0x5b0505[\"iXIHW\"] = \"message\", _0x5b0505[\"EfsGA\"] = _0x53a350(230), _0x5b0505[\"YSdDH\"] = function(_0x5ad290, _0x1cb9f4) {\n    return _0x5ad290 !== _0x1cb9f4;\n  }, _0x5b0505[\"yAfBV\"] = _0x187012(226);\n  const _0x422749 = _0x5b0505;\n  if (_0x422749[_0x187012(235)](_0x422749[_0x187012(203)], _0x97a54d) && _0x422749[\"bJaJS\"](typeof _0x97a54d[_0x53a350(219)], _0x187012(197))) _0x97a54d[_0x187012(219)](_0x422749[_0x187012(200)], _0x43d901);\n  else _0x422749[\"EfsGA\"] in _0x97a54d && _0x422749[_0x53a350(199)](typeof _0x97a54d[\"onmessage\"], _0x422749[\"yAfBV\"]) && (_0x97a54d[\"onmessage\"] = _0x43d901);\n};\nclass MessageChannelTransport {\n  constructor(_0x3291c0, _0x48f9ca) {\n    const _0x50d5f2 = _0x25bb, _0x4cf2a7 = _0x25bb, _0x3fb2ff = {};\n    _0x3fb2ff[\"yImye\"] = \"3|2|0|4|1|5\";\n    const _0x2a856a = _0x3fb2ff, _0x5ab738 = _0x2a856a[\"yImye\"][\"split\"](\"|\");\n    let _0x2dafa0 = -332 + -1070 * 8 + 8892;\n    while (!![]) {\n      switch (_0x5ab738[_0x2dafa0++]) {\n        case \"0\":\n          this[\"_port\"] = _0x3291c0;\n          continue;\n        case \"1\":\n          this[\"_started\"] = ![];\n          continue;\n        case \"2\":\n          this[_0x50d5f2(206)] = ![];\n          continue;\n        case \"3\":\n          this[_0x50d5f2(210)] = ![];\n          continue;\n        case \"4\":\n          this[_0x4cf2a7(198)] = _0x48f9ca;\n          continue;\n        case \"5\":\n          this[_0x4cf2a7(206)] = ![];\n          continue;\n      }\n      break;\n    }\n  }\n  async [\"start\"]() {\n    const _0xe93998 = _0x25bb, _0x17d5a7 = _0x25bb;\n    if (this[\"_started\"] || this[\"_closed\"] || !this[_0xe93998(216)]) return;\n    this[_0x17d5a7(210)] = !![], this[_0x17d5a7(216)][\"onmessage\"] = (_0xc6619d) => {\n      var _a, _b;\n      const _0x1e4df3 = _0x17d5a7;\n      try {\n        const _0x36ca7c = JSONRPCMessageSchema[_0x1e4df3(201)](_0xc6619d[_0x1e4df3(227)]);\n        (_a = this[_0x1e4df3(230)]) == null ? void 0 : _a.call(this, _0x36ca7c);\n      } catch (_0x4911eb) {\n        const _0x5c7589 = new Error(\"Failed to parse message: \" + _0x4911eb);\n        (_b = this[_0x1e4df3(212)]) == null ? void 0 : _b.call(this, _0x5c7589);\n      }\n    }, this[_0xe93998(216)][_0x17d5a7(228)] = (_0x551eb5) => {\n      var _a;\n      const _0x3c4f8b = _0x17d5a7, _0x392df8 = new Error(\"MessagePort error: \" + JSON[\"stringify\"](_0x551eb5));\n      (_a = this[_0x3c4f8b(212)]) == null ? void 0 : _a.call(this, _0x392df8);\n    }, this[\"_port\"][_0xe93998(205)]();\n  }\n  async [\"send\"](_0x47baae) {\n    const _0x7330 = _0x25bb, _0x305b2f = { \"mEePn\": function(_0x1e0407) {\n      return _0x1e0407();\n    }, \"YtLsL\": function(_0x2fc2a3, _0x59ddf9) {\n      return _0x2fc2a3 instanceof _0x59ddf9;\n    }, \"MAuuf\": function(_0x29881e, _0xf8dfc1) {\n      return _0x29881e(_0xf8dfc1);\n    }, \"hAyRG\": function(_0x3106a5, _0x34c9c6) {\n      return _0x3106a5(_0x34c9c6);\n    } };\n    if (this[_0x7330(206)] || !this[\"_port\"]) return;\n    return new Promise((_0x39499d, _0x1dd119) => {\n      var _a;\n      const _0x25b58a = _0x7330, _0x38e0ab = _0x7330;\n      try {\n        if (this[\"_port\"]) this[_0x25b58a(216)][\"postMessage\"](_0x47baae);\n        _0x305b2f[\"mEePn\"](_0x39499d);\n      } catch (_0x32af17) {\n        const _0xfa30d = _0x305b2f[\"YtLsL\"](_0x32af17, Error) ? _0x32af17 : new Error(_0x305b2f[\"MAuuf\"](String, _0x32af17));\n        (_a = this[\"onerror\"]) == null ? void 0 : _a.call(this, _0xfa30d), _0x305b2f[_0x38e0ab(214)](_0x1dd119, _0xfa30d);\n      }\n    });\n  }\n  async [_0x1bfdb8(202)]() {\n    var _a;\n    const _0x2b64c1 = _0x1bfdb8;\n    if (this[\"_closed\"] || !this[\"_port\"]) return;\n    this[\"_closed\"] = !![], this[\"_port\"][_0x2b64c1(202)](), (_a = this[\"onclose\"]) == null ? void 0 : _a.call(this);\n  }\n  get [\"sessionId\"]() {\n    const _0x1c6f8f = _0x1bfdb8;\n    return this[_0x1c6f8f(198)];\n  }\n}\nfunction _0x49a5() {\n  const _0x5d7bfb = [\"endpoint\", \"_started\", \"_globalObject\", \"onerror\", \"HKFrs\", \"hAyRG\", \"ctLco\", \"_port\", \"6357498MylexY\", \"sessionId\", \"addEventListener\", \"Qdmwi\", \"WVeFE\", \"2571152TAiISL\", \"10340886KVKStC\", \"nKvYQ\", \"RFXXY\", \"undefined\", \"data\", \"onmessageerror\", \"postMessage\", \"onmessage\", \"4sCECAn\", \"54tPiUsm\", \"_endpoint\", \"2092167qFLRxD\", \"trFbG\", \"XNizk\", \"port2\", \"1voHuKs\", \"yUAGf\", \"1555570JcyrXi\", \"ports\", \"5fwVkQB\", \"1793592DbUnOK\", \"EeNHO\", \"function\", \"_sessionId\", \"YSdDH\", \"iXIHW\", \"parse\", \"close\", \"TBOUS\", \"4155957vBaybS\", \"start\", \"_closed\", \"NXAqB\", \"KUmPc\"];\n  _0x49a5 = function() {\n    return _0x5d7bfb;\n  };\n  return _0x49a5();\n}\nfunction _0x25bb(_0x259301, _0x174918) {\n  const _0x1db798 = _0x49a5();\n  return _0x25bb = function(_0x2acd10, _0x1805f4) {\n    _0x2acd10 = _0x2acd10 - (-2 * 2471 + -9757 + -3 * -4963);\n    let _0xe5f456 = _0x1db798[_0x2acd10];\n    return _0xe5f456;\n  }, _0x25bb(_0x259301, _0x174918);\n}\nclass MessageChannelClientTransport extends MessageChannelTransport {\n  constructor(_0x36243e, _0x2009f1 = getGlobalObject()) {\n    const _0x1ed500 = _0x1bfdb8, _0x1652cc = _0x1bfdb8, _0x20e881 = { \"Qdmwi\": function(_0x2a8d25) {\n      return _0x2a8d25();\n    }, \"acxGw\": function(_0x29bb84, _0x562bb2, _0x3e5cc1, _0xc286ee) {\n      return _0x29bb84(_0x562bb2, _0x3e5cc1, _0xc286ee);\n    } };\n    super(), this[_0x1ed500(233)] = _0x36243e, this[_0x1652cc(211)] = _0x2009f1;\n    const _0x43ef5b = new MessageChannel(), _0x34d037 = _0x20e881[_0x1652cc(220)](generateUUID);\n    this[\"_port\"] = _0x43ef5b[\"port1\"], this[_0x1652cc(198)] = _0x34d037, _0x20e881[\"acxGw\"](sendMessage, this[_0x1ed500(211)], { \"endpoint\": this[_0x1ed500(233)], \"sessionId\": _0x34d037 }, [_0x43ef5b[_0x1652cc(237)]]);\n  }\n}\nclass MessageChannelServerTransport extends MessageChannelTransport {\n  constructor(_0x2531ca, _0x397a3f = getGlobalObject()) {\n    const _0x5c94d2 = { \"nKvYQ\": function(_0x54e475, _0x492795, _0x15d342) {\n      return _0x54e475(_0x492795, _0x15d342);\n    } };\n    super(), this[\"_endpoint\"] = _0x2531ca, this[\"_globalObject\"] = _0x397a3f, this[\"_listen\"] = new Promise((_0x300e40) => {\n      const _0x360931 = _0x25bb, _0x23edfd = _0x25bb, _0x5d1a32 = {};\n      _0x5d1a32[_0x360931(208)] = function(_0x561090, _0x5b8d5c) {\n        return _0x561090 === _0x5b8d5c;\n      };\n      const _0x1bbd84 = _0x5d1a32;\n      _0x5c94d2[_0x360931(224)](setMessageHandler, this[\"_globalObject\"], (_0x497a2c) => {\n        const _0x5c9bb5 = _0x360931, _0x56aec5 = _0x23edfd;\n        _0x497a2c[_0x5c9bb5(227)] && _0x1bbd84[\"KUmPc\"](_0x497a2c[_0x56aec5(227)][_0x56aec5(209)], this[_0x56aec5(233)]) && (this[_0x56aec5(216)] = _0x497a2c[_0x5c9bb5(193)][-1 * 1697 + 2889 + -596 * 2], this[\"_sessionId\"] = _0x497a2c[\"data\"][_0x5c9bb5(218)], _0x300e40());\n      });\n    });\n  }\n  async [\"listen\"]() {\n    return this[\"_listen\"];\n  }\n}\nconst createTransportPair = () => {\n  const _0x287e54 = { \"UdUkT\": function(_0x2dc06b) {\n    return _0x2dc06b();\n  } }, _0x1f0e76 = new MessageChannel(), _0x270235 = _0x287e54[\"UdUkT\"](generateUUID);\n  return [new MessageChannelTransport(_0x1f0e76[\"port1\"], _0x270235), new MessageChannelTransport(_0x1f0e76[\"port2\"], _0x270235)];\n};\n(function(_0x55a9d7, _0x1c1b1c) {\n  const _0x511b70 = _0x4af2, _0x1a34ce = _0x4af2, _0x46d5ad = _0x55a9d7();\n  while (!![]) {\n    try {\n      const _0x21c022 = -parseInt(_0x511b70(150)) / (-14 * -3 + -1683 + -2 * -821) + parseInt(_0x1a34ce(147)) / (-8158 + 7512 + 648) * (-parseInt(_0x511b70(157)) / (-9234 + -17 * 359 + 260 * 59)) + parseInt(_0x511b70(153)) / (-9695 + -148 * 1 + -9847 * -1) * (-parseInt(_0x511b70(143)) / (3813 * 1 + 2 * -2813 + 1818)) + -parseInt(_0x1a34ce(145)) / (330 + -9451 * 1 + 9127) + parseInt(_0x511b70(152)) / (-3336 + -8188 + 11531) * (parseInt(_0x1a34ce(155)) / (71 * 109 + 5463 + -13194)) + -parseInt(_0x1a34ce(144)) / (-2 * -4741 + -3022 + -6451 * 1) + -parseInt(_0x511b70(146)) / (8747 + -3476 + -5261) * (-parseInt(_0x1a34ce(151)) / (-4 * 309 + 961 + 286));\n      if (_0x21c022 === _0x1c1b1c) break;\n      else _0x46d5ad[\"push\"](_0x46d5ad[\"shift\"]());\n    } catch (_0x5b6c24) {\n      _0x46d5ad[\"push\"](_0x46d5ad[\"shift\"]());\n    }\n  }\n})(_0x215e, -974071 + 975210 + 628825);\nfunction _0x4af2(_0x387515, _0x2ab620) {\n  const _0x32c5be = _0x215e();\n  return _0x4af2 = function(_0x164eda, _0x239e1b) {\n    _0x164eda = _0x164eda - (-2363 + 2488 * -3 + 9970);\n    let _0x4fdce7 = _0x32c5be[_0x164eda];\n    return _0x4fdce7;\n  }, _0x4af2(_0x387515, _0x2ab620);\n}\nconst sseOptions = (_0x2f1cc4, _0x208c79 = generateUUID()) => ({ \"requestInit\": { \"headers\": { \"Authorization\": \"Bearer \" + _0x2f1cc4, \"sse-session-id\": _0x208c79 } }, \"eventSourceInit\": { async \"fetch\"(_0x43ea14, _0x4557ec) {\n  const _0x4b7a71 = _0x4af2, _0x50b396 = { \"AiGNv\": _0x4b7a71(154), \"vSQiS\": \"sse-session-id\", \"XdpCs\": function(_0x1f15a0, _0x4616a0, _0x14f5b5) {\n    return _0x1f15a0(_0x4616a0, _0x14f5b5);\n  } }, _0x5a64eb = new Headers((_0x4557ec == null ? void 0 : _0x4557ec[\"headers\"]) || {});\n  _0x5a64eb[\"set\"](_0x50b396[_0x4b7a71(148)], \"Bearer \" + _0x2f1cc4), _0x5a64eb[_0x4b7a71(156)](_0x50b396[_0x4b7a71(149)], _0x208c79);\n  const _0x474368 = { ..._0x4557ec };\n  return _0x474368[\"headers\"] = _0x5a64eb, _0x50b396[\"XdpCs\"](fetch, _0x43ea14, _0x474368);\n} } });\nconst streamOptions = (_0x3bc494, _0x19a952 = generateUUID()) => ({ \"requestInit\": { \"headers\": { \"Authorization\": \"Bearer \" + _0x3bc494, \"stream-session-id\": _0x19a952 } } });\nfunction _0x215e() {\n  const _0x42af44 = [\"vSQiS\", \"1232600XmyMuo\", \"21373eXHBdU\", \"425355MVAcRJ\", \"12AWycNK\", \"authorization\", \"56hXzxWH\", \"set\", \"1260255yqMDQL\", \"773300AfCyyF\", \"9359541qoODls\", \"5783370zsljtT\", \"22260yFjCbi\", \"2osLpLl\", \"AiGNv\"];\n  _0x215e = function() {\n    return _0x42af44;\n  };\n  return _0x215e();\n}\n(function(_0x3a7ddb, _0x193954) {\n  const _0xb50952 = _0x389e, _0x5f5705 = _0x389e, _0x1794b6 = _0x3a7ddb();\n  while (!![]) {\n    try {\n      const _0x499732 = -parseInt(_0xb50952(257)) / (5705 + 335 + -6039) * (-parseInt(_0x5f5705(283)) / (-9824 + -131 + -9957 * -1)) + -parseInt(_0xb50952(298)) / (-2421 * 3 + -9902 + 17168) + -parseInt(_0xb50952(241)) / (599 + -2 * -911 + -2417 * 1) + -parseInt(_0x5f5705(290)) / (4253 + 274 * -29 + -3698 * -1) + parseInt(_0xb50952(253)) / (2481 + 2 * -3211 + -3947 * -1) + -parseInt(_0x5f5705(313)) / (5864 + -1 * 5937 + 16 * 5) * (parseInt(_0x5f5705(279)) / (9032 + -5381 + 1 * -3643)) + parseInt(_0xb50952(271)) / (8127 + -8309 * 1 + 191) * (parseInt(_0xb50952(281)) / (-3643 * 1 + 1459 * -1 + 5112));\n      if (_0x499732 === _0x193954) break;\n      else _0x1794b6[\"push\"](_0x1794b6[\"shift\"]());\n    } catch (_0x458381) {\n      _0x1794b6[\"push\"](_0x1794b6[\"shift\"]());\n    }\n  }\n})(_0x5ce7, 1 * -958321 + -1498149 + 42 * 76909);\nfunction _0x389e(_0x4c53e7, _0x5019cc) {\n  const _0x328e54 = _0x5ce7();\n  return _0x389e = function(_0x776f85, _0x224cf9) {\n    _0x776f85 = _0x776f85 - (2 * 2869 + -2589 * 1 + 2909 * -1);\n    let _0x4bc9c9 = _0x328e54[_0x776f85];\n    return _0x4bc9c9;\n  }, _0x389e(_0x4c53e7, _0x5019cc);\n}\nconst forwardServerRequest = async (_0x5c4d13, _0x14efd6, _0x3d0783) => {\n  var _a;\n  const _0x3ffbda = _0x389e, _0x475e61 = _0x389e, _0x543329 = {};\n  _0x543329[_0x3ffbda(255)] = _0x3ffbda(296), _0x543329[_0x475e61(269)] = \"resources/list\", _0x543329[_0x475e61(266)] = _0x3ffbda(256), _0x543329[\"RRkap\"] = \"resources/subscribe\", _0x543329[\"upnaf\"] = \"resources/unsubscribe\", _0x543329[\"lsGQt\"] = \"prompts/get\", _0x543329[_0x475e61(275)] = _0x475e61(309), _0x543329[_0x475e61(312)] = _0x475e61(305), _0x543329[\"kQNzn\"] = _0x3ffbda(252), _0x543329[_0x475e61(263)] = _0x3ffbda(246);\n  const _0x1afe15 = _0x543329, { id: _0x2cf226, method: _0x24430b, params: _0x5660ad } = _0x3d0783;\n  let _0x10d088 = {};\n  switch (_0x24430b) {\n    case _0x3ffbda(306):\n      _0x10d088 = await _0x14efd6[\"listTools\"](_0x5660ad);\n      break;\n    case _0x1afe15[_0x3ffbda(255)]:\n      _0x10d088 = await _0x14efd6[_0x3ffbda(293)](_0x5660ad);\n      break;\n    case _0x1afe15[\"STkQf\"]:\n      _0x10d088 = await _0x14efd6[_0x475e61(286)](_0x5660ad);\n      break;\n    case _0x475e61(267):\n      _0x10d088 = await _0x14efd6[_0x3ffbda(317)](_0x5660ad);\n      break;\n    case _0x1afe15[\"ClDpH\"]:\n      _0x10d088 = await _0x14efd6[\"readResource\"](_0x5660ad);\n      break;\n    case _0x1afe15[\"RRkap\"]:\n      _0x10d088 = await _0x14efd6[\"subscribeResource\"](_0x5660ad);\n      break;\n    case _0x1afe15[\"upnaf\"]:\n      _0x10d088 = await _0x14efd6[_0x475e61(260)](_0x5660ad);\n      break;\n    case _0x1afe15[_0x475e61(324)]:\n      _0x10d088 = await _0x14efd6[\"getPrompt\"](_0x5660ad);\n      break;\n    case _0x1afe15[_0x3ffbda(275)]:\n      _0x10d088 = await _0x14efd6[\"listPrompts\"](_0x5660ad);\n      break;\n    case \"ping\":\n      _0x10d088 = await _0x14efd6[\"ping\"]();\n      break;\n    case _0x1afe15[\"gUByd\"]:\n      _0x10d088 = await _0x14efd6[_0x3ffbda(289)](_0x5660ad);\n      break;\n    case _0x1afe15[_0x475e61(240)]:\n      _0x10d088 = await _0x14efd6[\"setLoggingLevel\"](_0x5660ad == null ? void 0 : _0x5660ad[_0x475e61(294)]);\n      break;\n  }\n  const _0x115738 = {};\n  _0x115738[\"result\"] = _0x10d088, _0x115738[_0x475e61(321)] = _0x1afe15[_0x475e61(263)], _0x115738[\"id\"] = _0x2cf226, await ((_a = _0x5c4d13 == null ? void 0 : _0x5c4d13[\"transport\"]) == null ? void 0 : _a[\"send\"](_0x115738));\n}, forwardClientRequest = async (_0x308d7b, _0x3df369, _0x13e839) => {\n  var _a;\n  const _0x3acbfa = _0x389e, _0x1334d1 = _0x389e, _0x7caf02 = {};\n  _0x7caf02[_0x3acbfa(272)] = _0x3acbfa(280), _0x7caf02[\"HJWCi\"] = \"sampling/createMessage\", _0x7caf02[_0x3acbfa(276)] = _0x1334d1(319), _0x7caf02[\"zAPVJ\"] = \"2.0\";\n  const _0x5dc149 = _0x7caf02, { id: _0x5aa3bf, method: _0x1361c3, params: _0x3a0352 } = _0x13e839;\n  let _0x37ef20 = {};\n  switch (_0x1361c3) {\n    case _0x5dc149[_0x1334d1(272)]:\n      const _0xac694b = {};\n      _0xac694b[\"method\"] = _0x1361c3, _0xac694b[_0x3acbfa(287)] = _0x3a0352, _0x37ef20 = await _0x3df369[_0x1334d1(285)](_0xac694b, ListRootsResultSchema);\n      break;\n    case _0x5dc149[_0x3acbfa(270)]:\n      const _0x468975 = {};\n      _0x468975[\"method\"] = _0x1361c3, _0x468975[\"params\"] = _0x3a0352, _0x37ef20 = await _0x3df369[_0x1334d1(285)](_0x468975, CreateMessageResultSchema);\n      break;\n    case _0x5dc149[\"MHdLd\"]:\n      const _0xec923d = {};\n      _0xec923d[_0x3acbfa(308)] = _0x1361c3, _0x37ef20 = await _0x3df369[_0x1334d1(285)](_0xec923d, EmptyResultSchema);\n      break;\n  }\n  const _0x449fe0 = {};\n  _0x449fe0[\"result\"] = _0x37ef20, _0x449fe0[\"jsonrpc\"] = _0x5dc149[_0x1334d1(261)], _0x449fe0[\"id\"] = _0x5aa3bf, await ((_a = _0x308d7b == null ? void 0 : _0x308d7b[\"transport\"]) == null ? void 0 : _a[_0x3acbfa(300)](_0x449fe0));\n};\nconst forwardServerOnRequest = (_0x27dc5c, _0x568fc4) => {\n  const _0x2a7d93 = _0x389e, _0x70caed = _0x389e, _0x48a546 = { \"uakTp\": _0x2a7d93(278), \"PRkoG\": function(_0x5c2227, _0x1301c4, _0x41f8ad, _0x4c4201) {\n    return _0x5c2227(_0x1301c4, _0x41f8ad, _0x4c4201);\n  }, \"BPMzo\": \"2.0\" }, _0x1057cb = _0x27dc5c[_0x2a7d93(322)];\n  _0x27dc5c[_0x70caed(322)] = async (_0x2e41e0, _0x2c3def) => {\n    var _a;\n    const _0x4571c5 = _0x2a7d93, _0x3d02b1 = _0x2a7d93, { id: _0x4f5e54, method: _0x3c76bd } = _0x2e41e0;\n    try {\n      _0x3c76bd === _0x48a546[_0x4571c5(277)] ? await _0x1057cb[_0x4571c5(264)](_0x27dc5c, _0x2e41e0, _0x2c3def) : await _0x48a546[_0x4571c5(302)](forwardServerRequest, _0x27dc5c, _0x568fc4, _0x2e41e0);\n    } catch (_0x5006ec) {\n      const { code: _0x2407e9, message: _0x5aed23, data: _0x40147e } = _0x5006ec;\n      try {\n        const _0x8d37fc = {};\n        _0x8d37fc[_0x4571c5(295)] = _0x2407e9, _0x8d37fc[\"message\"] = _0x5aed23, _0x8d37fc[_0x4571c5(315)] = _0x40147e;\n        const _0x4de494 = {};\n        _0x4de494[_0x3d02b1(259)] = _0x8d37fc, _0x4de494[_0x4571c5(321)] = _0x48a546[\"BPMzo\"], _0x4de494[\"id\"] = _0x4f5e54, await ((_a = _0x27dc5c == null ? void 0 : _0x27dc5c[_0x3d02b1(314)]) == null ? void 0 : _a[_0x4571c5(300)](_0x4de494));\n      } catch {\n      }\n    }\n  };\n};\nfunction _0x5ce7() {\n  const _0x2adf5a = [\"jQOHt\", \"logging/setLevel\", \"9148050QavroF\", \"addResponseListener\", \"DKcdb\", \"resources/read\", \"2dhabXO\", \"notifications/cancelled\", \"error\", \"unsubscribeResource\", \"zAPVJ\", \"taVWl\", \"tPJej\", \"call\", \"fallbackRequestHandler\", \"ClDpH\", \"resources/templates/list\", \"wFRTc\", \"STkQf\", \"HJWCi\", \"9HsXPHL\", \"EteND\", \"notifications/progress\", \"abort\", \"KRjHw\", \"MHdLd\", \"uakTp\", \"initialize\", \"1592OvFQRg\", \"roots/list\", \"24485730fwSTLx\", \"clearNotificationListener\", \"495382ohHKQU\", \"function\", \"request\", \"listResources\", \"params\", \"KfGLt\", \"complete\", \"5554650asvKKt\", \"vAQOh\", \"qGHPg\", \"callTool\", \"level\", \"code\", \"tools/call\", \"removeResponseListener\", \"3707892TeWMjJ\", \"clear\", \"send\", \"FqNTf\", \"PRkoG\", \"LyVnY\", \"length\", \"completion/complete\", \"tools/list\", \"ChEvV\", \"method\", \"prompts/list\", \"jatfb\", \"fEKFh\", \"gUByd\", \"9079gFgwwb\", \"transport\", \"data\", \"YbuGL\", \"listResourceTemplates\", \"handleListener\", \"ping\", \"UARSo\", \"jsonrpc\", \"_onrequest\", \"removeNotificationListener\", \"lsGQt\", \"kQNzn\", \"4359700wMGLtX\", \"addRequestListener\", \"Dplaa\", \"clearListener\", \"_requestHandlerAbortControllers\", \"2.0\", \"addNotificationListener\", \"push\", \"AroLw\", \"message\"];\n  _0x5ce7 = function() {\n    return _0x2adf5a;\n  };\n  return _0x5ce7();\n}\nconst forwardServerOnNotification = (_0x5f3aac, _0x2bdcd5) => {\n  const _0xb4015b = _0x389e, _0x4424e2 = _0x389e, _0x3faa0b = {};\n  _0x3faa0b[\"LyVnY\"] = function(_0x5a2961, _0x19fff8) {\n    return _0x5a2961 !== _0x19fff8;\n  }, _0x3faa0b[_0xb4015b(249)] = \"notifications/initialized\", _0x3faa0b[_0x4424e2(311)] = \"notifications/cancelled\";\n  const _0x12d3ea = _0x3faa0b;\n  _0x5f3aac[\"_onnotification\"] = async (_0x658a8d) => {\n    const _0x194fa4 = _0xb4015b, _0xd3ef49 = _0xb4015b, { method: _0x4bf9c9, params: _0x261f04 } = _0x658a8d;\n    if (_0x12d3ea[_0x194fa4(303)](_0x4bf9c9, _0x12d3ea[_0xd3ef49(249)]) && (_0x4bf9c9 !== _0x12d3ea[_0x194fa4(311)] || (_0x261f04 == null ? void 0 : _0x261f04[\"forward\"]))) try {\n      await _0x2bdcd5[\"notification\"](_0x658a8d);\n    } catch {\n    }\n  };\n};\nconst forwardClientOnRequest = (_0x34be45, _0x27f842) => async (_0x4571ee) => {\n  var _a;\n  const _0x35bbc3 = _0x389e, _0xd5ee3e = _0x389e, _0x2c60e8 = {};\n  _0x2c60e8[_0x35bbc3(292)] = \"2.0\";\n  const _0x1a394c = _0x2c60e8;\n  try {\n    await forwardClientRequest(_0x34be45, _0x27f842, _0x4571ee);\n  } catch (_0x4b58a8) {\n    const { code: _0x3b52be, message: _0x43e67e, data: _0x460c24 } = _0x4b58a8;\n    try {\n      const _0x586af5 = {};\n      _0x586af5[\"code\"] = _0x3b52be, _0x586af5[_0xd5ee3e(250)] = _0x43e67e, _0x586af5[\"data\"] = _0x460c24;\n      const _0x3002ef = {};\n      _0x3002ef[_0x35bbc3(259)] = _0x586af5, _0x3002ef[\"jsonrpc\"] = _0x1a394c[_0x35bbc3(292)], _0x3002ef[\"id\"] = _0x4571ee[\"id\"], await ((_a = _0x34be45 == null ? void 0 : _0x34be45[_0xd5ee3e(314)]) == null ? void 0 : _a[\"send\"](_0x3002ef));\n    } catch {\n    }\n  }\n};\nconst forwardClientOnNotification = (_0x4cb45e) => async (_0x158ed6) => {\n  var _a;\n  const _0x5fdd9d = _0x389e, _0x448197 = _0x389e, _0x235af7 = {};\n  _0x235af7[\"jQOHt\"] = \"notifications/initialized\", _0x235af7[_0x5fdd9d(310)] = function(_0x38778c, _0x48cd24) {\n    return _0x38778c !== _0x48cd24;\n  }, _0x235af7[_0x5fdd9d(262)] = _0x448197(258);\n  const _0x394d84 = _0x235af7, { method: _0x35ccf1, params: _0x19894a } = _0x158ed6;\n  if (_0x35ccf1 !== _0x394d84[_0x448197(251)] && (_0x394d84[_0x5fdd9d(310)](_0x35ccf1, _0x394d84[_0x5fdd9d(262)]) || (_0x19894a == null ? void 0 : _0x19894a[\"forward\"]))) try {\n    const _0x583913 = { ..._0x158ed6 };\n    _0x583913[\"jsonrpc\"] = _0x5fdd9d(246), await ((_a = _0x4cb45e == null ? void 0 : _0x4cb45e[\"transport\"]) == null ? void 0 : _a[\"send\"](_0x583913));\n  } catch {\n  }\n};\nconst forwardClientOnResponse = (_0x49b3ee, _0x1bcb55) => async (_0x20fe15) => {\n  var _a, _b;\n  const _0x2d3103 = _0x389e, _0x16f509 = _0x389e, _0x1074b0 = {};\n  _0x1074b0[\"vxoaP\"] = _0x2d3103(246);\n  const _0x4af8a2 = _0x1074b0;\n  try {\n    await ((_a = _0x1bcb55 == null ? void 0 : _0x1bcb55[\"transport\"]) == null ? void 0 : _a[\"send\"](_0x20fe15));\n  } catch (_0x4dbf02) {\n    const { code: _0x3adf06, message: _0x2d3c7b, data: _0x2756ac } = _0x4dbf02;\n    try {\n      const _0x801073 = {};\n      _0x801073[_0x16f509(295)] = _0x3adf06, _0x801073[\"message\"] = _0x2d3c7b, _0x801073[_0x2d3103(315)] = _0x2756ac;\n      const _0x25a81c = {};\n      _0x25a81c[_0x2d3103(259)] = _0x801073, _0x25a81c[\"jsonrpc\"] = _0x4af8a2[\"vxoaP\"], _0x25a81c[\"id\"] = _0x20fe15[\"id\"], await ((_b = _0x49b3ee == null ? void 0 : _0x49b3ee[_0x16f509(314)]) == null ? void 0 : _b[\"send\"](_0x25a81c));\n    } catch {\n    }\n  }\n};\nconst createHandleListener = () => {\n  const _0x14f631 = _0x389e, _0x4676c6 = { \"REOpj\": function(_0x4198da, _0x5d67ce) {\n    return _0x4198da(_0x5d67ce);\n  }, \"UARSo\": function(_0x27912a, _0x2a191a) {\n    return _0x27912a === _0x2a191a;\n  }, \"wFRTc\": \"function\", \"cboFW\": function(_0x37ca4b, _0x1bdaa1) {\n    return _0x37ca4b !== _0x1bdaa1;\n  } }, _0x3d4a8e = [], _0x130821 = (_0x1334da) => {\n    const _0x233d74 = [..._0x3d4a8e];\n    let _0x19903a;\n    for (const _0x59d78f of _0x233d74) {\n      try {\n        _0x19903a = _0x4676c6[\"REOpj\"](_0x59d78f, _0x1334da);\n      } catch {\n      }\n    }\n    if (!(_0x19903a instanceof Promise)) return _0x19903a;\n  }, _0x1c4719 = (_0x6a094d) => {\n    const _0x5c27b3 = _0x389e, _0x373d85 = _0x389e;\n    _0x4676c6[_0x5c27b3(320)](typeof _0x6a094d, _0x4676c6[_0x373d85(268)]) && !_0x3d4a8e[\"includes\"](_0x6a094d) && _0x3d4a8e[_0x373d85(248)](_0x6a094d);\n  }, _0x52815b = (_0x5cb516) => {\n    const _0x2a4330 = _0x3d4a8e[\"indexOf\"](_0x5cb516);\n    _0x4676c6[\"cboFW\"](_0x2a4330, -1) && _0x3d4a8e[\"splice\"](_0x2a4330, -241 * 1 + 321 * -6 + 2168);\n  }, _0x3eda68 = () => {\n    const _0x532f40 = _0x389e;\n    _0x3d4a8e[_0x532f40(304)] = -459 * 21 + 2 * -2763 + 1011 * 15;\n  }, _0x1f3623 = {};\n  return _0x1f3623[_0x14f631(318)] = _0x130821, _0x1f3623[\"addListener\"] = _0x1c4719, _0x1f3623[\"removeListener\"] = _0x52815b, _0x1f3623[_0x14f631(244)] = _0x3eda68, _0x1f3623;\n}, setClientListener = (_0xa67e25) => {\n  const _0x3c676a = _0x389e, _0x107291 = _0x389e, _0x45201d = { \"Dplaa\": function(_0x427539) {\n    return _0x427539();\n  }, \"KfGLt\": function(_0x348224) {\n    return _0x348224();\n  } };\n  {\n    const { handleListener: _0x116e1d, addListener: _0x1edd51, removeListener: _0x1623d8, clearListener: _0x160253 } = createHandleListener();\n    _0xa67e25[\"_onresponse\"] = _0x116e1d, _0xa67e25[\"addResponseListener\"] = _0x1edd51, _0xa67e25[_0x3c676a(297)] = _0x1623d8, _0xa67e25[\"clearResponseListener\"] = _0x160253;\n  }\n  {\n    const { handleListener: _0x3ef79d, addListener: _0x36d9e5, removeListener: _0x1fcb7b, clearListener: _0x10ea28 } = _0x45201d[_0x3c676a(243)](createHandleListener);\n    _0xa67e25[_0x3c676a(265)] = _0x3ef79d, _0xa67e25[_0x107291(242)] = _0x36d9e5, _0xa67e25[\"removeRequestListener\"] = _0x1fcb7b, _0xa67e25[\"clearRequestListener\"] = _0x10ea28;\n  }\n  {\n    const { handleListener: _0x21759f, addListener: _0x1a2b9d, removeListener: _0x283abb, clearListener: _0xf93403 } = _0x45201d[_0x107291(288)](createHandleListener);\n    _0xa67e25[\"fallbackNotificationHandler\"] = _0x21759f, _0xa67e25[_0x107291(247)] = _0x1a2b9d, _0xa67e25[_0x107291(323)] = _0x283abb, _0xa67e25[_0x3c676a(282)] = _0xf93403;\n  }\n};\nconst initClientHandler = (_0x434b5f, _0x238cde, { beforeInit: _0xaa72ce, afterInit: _0x471e82 } = {}) => {\n  const _0x35c179 = _0x389e, _0x39ff3e = _0x389e, _0x371c24 = { \"ChEvV\": function(_0x21d19c, _0x7715f7) {\n    return _0x21d19c === _0x7715f7;\n  }, \"YbuGL\": _0x35c179(319), \"FqNTf\": function(_0x37a6ab, _0x3c89f5) {\n    return _0x37a6ab === _0x3c89f5;\n  }, \"WUrMn\": _0x35c179(284), \"vAQOh\": function(_0x5ad5c3) {\n    return _0x5ad5c3();\n  }, \"DiIVP\": function(_0x20ef27, _0x3c47bc) {\n    return _0x20ef27(_0x3c47bc);\n  }, \"ArGZD\": function(_0x374747, _0x4ae463) {\n    return _0x374747 === _0x4ae463;\n  } };\n  _0x434b5f[\"_requestHandlers\"][_0x35c179(299)](), _0x434b5f[\"_notificationHandlers\"][\"clear\"]();\n  typeof _0xaa72ce === _0x371c24[\"WUrMn\"] && _0x371c24[_0x35c179(291)](_0xaa72ce);\n  const _0x2504f2 = _0x434b5f[\"_onresponse\"];\n  _0x371c24[\"DiIVP\"](setClientListener, _0x434b5f), _0x434b5f[_0x35c179(254)]((_0x2b1c87) => {\n    _0x2504f2[\"call\"](_0x434b5f, _0x2b1c87);\n  }), _0x434b5f[_0x35c179(242)]((_0x2fa87a) => {\n    const _0xd40917 = _0x35c179, { method: _0x48e479 } = _0x2fa87a;\n    if (_0x371c24[_0xd40917(307)](_0x48e479, _0x371c24[_0xd40917(316)])) return {};\n  }), _0x434b5f[\"addNotificationListener\"]((_0x16f826) => {\n    const _0x4ffb37 = _0x35c179, _0x544f53 = _0x39ff3e, { method: _0x1aefd7, params: _0x4e9a46 } = _0x16f826;\n    if (_0x371c24[_0x4ffb37(301)](_0x1aefd7, _0x4ffb37(258))) {\n      const _0x225a74 = _0x434b5f[_0x544f53(245)][\"get\"](_0x4e9a46[\"requestId\"]);\n      _0x225a74 == null ? void 0 : _0x225a74[_0x4ffb37(274)](_0x4e9a46 == null ? void 0 : _0x4e9a46[\"reason\"]);\n    } else _0x1aefd7 === _0x4ffb37(273) && _0x434b5f[\"_onprogress\"](_0x16f826);\n  }), _0x371c24[\"ArGZD\"](typeof _0x471e82, _0x371c24[\"WUrMn\"]) && _0x471e82();\n};\n(function(_0x3a51f9, _0x27e9aa) {\n  const _0x213d97 = _0x3f42, _0x226132 = _0x3f42, _0x1ff3f6 = _0x3a51f9();\n  while (!![]) {\n    try {\n      const _0x447c57 = -parseInt(_0x213d97(286)) / (-3985 + 1 * -4629 + 8615) * (parseInt(_0x226132(296)) / (17 * -391 + 4980 + 1 * 1669)) + -parseInt(_0x213d97(283)) / (-6963 + 41 * 164 + -2 * -121) + parseInt(_0x213d97(306)) / (1 * -1137 + -3846 + 4987 * 1) * (-parseInt(_0x226132(285)) / (-1 * -1649 + -4259 + -1 * -2615)) + -parseInt(_0x213d97(305)) / (124 * 63 + 9811 + -17617) + -parseInt(_0x213d97(317)) / (-1 * -265 + 5846 + -6104) * (parseInt(_0x226132(318)) / (22 * -389 + 9648 + -541 * 2)) + parseInt(_0x226132(308)) / (-5 * 804 + 9632 + -5603 * 1) * (parseInt(_0x226132(304)) / (3 * 2927 + -753 + -211 * 38)) + -parseInt(_0x226132(292)) / (21 * 133 + -8233 * -1 + -1 * 11015) * (-parseInt(_0x213d97(314)) / (-7685 + -879 + -8 * -1072));\n      if (_0x447c57 === _0x27e9aa) break;\n      else _0x1ff3f6[\"push\"](_0x1ff3f6[\"shift\"]());\n    } catch (_0x52210d) {\n      _0x1ff3f6[\"push\"](_0x1ff3f6[\"shift\"]());\n    }\n  }\n})(_0x40c7, 73514 + -9970 * -20 + 69651);\nfunction _0x3f42(_0x38f123, _0x4c4a41) {\n  const _0x4c6b28 = _0x40c7();\n  return _0x3f42 = function(_0x8f66f0, _0x107472) {\n    _0x8f66f0 = _0x8f66f0 - (-5350 * -1 + -4 * 662 + 2420 * -1);\n    let _0x2c4baf = _0x4c6b28[_0x8f66f0];\n    return _0x2c4baf;\n  }, _0x3f42(_0x38f123, _0x4c4a41);\n}\nconst forwardProxyClient = (_0x3ffec4, _0x512b11) => {\n  const _0x869d7 = _0x3f42, _0x585eb4 = _0x3f42, _0x177126 = { \"wtkds\": function(_0x5a4977, _0x2b1bf4, _0x4b88ef) {\n    return _0x5a4977(_0x2b1bf4, _0x4b88ef);\n  } };\n  _0x177126[\"wtkds\"](forwardServerOnRequest, _0x3ffec4, _0x512b11), _0x177126[_0x869d7(310)](forwardServerOnNotification, _0x3ffec4, _0x512b11);\n  const _0x34aa96 = forwardClientOnRequest(_0x512b11, _0x3ffec4), _0xf28fb = _0x177126[_0x585eb4(310)](forwardClientOnResponse, _0x512b11, _0x3ffec4), _0x117a73 = forwardClientOnNotification(_0x3ffec4);\n  _0x512b11[\"addRequestListener\"](_0x34aa96), _0x512b11[\"addResponseListener\"](_0xf28fb), _0x512b11[_0x869d7(312)](_0x117a73), _0x3ffec4[_0x585eb4(321)] = () => {\n    const _0x599903 = _0x585eb4, _0x43399a = _0x585eb4;\n    _0x512b11[_0x599903(300)](_0x34aa96), _0x512b11[\"removeResponseListener\"](_0xf28fb), _0x512b11[_0x43399a(299)](_0x117a73);\n  };\n}, initWebClientHandler = (_0x395e7c, _0x46c4f2) => {\n  const _0x113deb = _0x3f42, _0x5c020f = _0x3f42, _0x2a8105 = { \"pvctu\": function(_0xebd8e4, _0x32c296) {\n    return _0xebd8e4 instanceof _0x32c296;\n  }, \"Stdcb\": _0x113deb(323), \"MhUJa\": function(_0x41cf16, _0xdefd83, _0x236512, _0x3d1937) {\n    return _0x41cf16(_0xdefd83, _0x236512, _0x3d1937);\n  } }, _0x38c7ec = () => {\n    var _a;\n    const _0x11c915 = _0x113deb;\n    _0x2a8105[\"pvctu\"](_0x46c4f2, SSEClientTransport) && ((_a = _0x46c4f2[\"_eventSource\"]) == null ? void 0 : _a[_0x11c915(291)](_0x2a8105[\"Stdcb\"], () => {\n      var _a2;\n      const _0xe9d09e = _0x11c915;\n      (_a2 = _0x46c4f2[_0xe9d09e(319)]) == null ? void 0 : _a2[\"close\"]();\n    }));\n  }, _0x4db354 = {};\n  _0x4db354[\"afterInit\"] = _0x38c7ec, _0x2a8105[_0x5c020f(298)](initClientHandler, _0x395e7c, _0x46c4f2, _0x4db354);\n};\nconst createSseProxy = async (_0x3476bd) => {\n  const _0x454b87 = _0x3f42, _0x45d35a = _0x3f42, _0x292cdb = { \"fWZFK\": function(_0x1a51fb) {\n    return _0x1a51fb();\n  }, \"MHbif\": function(_0x482437, _0x27e904, _0x1b9bd2) {\n    return _0x482437(_0x27e904, _0x1b9bd2);\n  }, \"cGSyh\": _0x454b87(284), \"nAXtx\": _0x45d35a(309), \"NYETq\": function(_0xbbe73a, _0x237ec4, _0x4b124c) {\n    return _0xbbe73a(_0x237ec4, _0x4b124c);\n  } }, { client: _0x2239f7, url: _0x4c8606, token: _0x184465, sessionId: _0x240bd1 } = _0x3476bd, _0xbd785d = _0x240bd1 || _0x292cdb[\"fWZFK\"](generateUUID), _0x1ebb2c = new SSEClientTransport(new URL(_0x4c8606), _0x292cdb[_0x45d35a(290)](sseOptions, _0x184465, _0xbd785d)), _0x325a8a = {};\n  _0x325a8a[_0x454b87(316)] = !![];\n  const _0x1cedf0 = {};\n  _0x1cedf0[\"prompts\"] = {}, _0x1cedf0[_0x45d35a(295)] = {}, _0x1cedf0[_0x45d35a(303)] = {}, _0x1cedf0[_0x45d35a(315)] = {}, _0x1cedf0[_0x454b87(288)] = _0x325a8a, _0x1cedf0[\"sampling\"] = {};\n  const _0x3d4a35 = _0x1cedf0, _0x104240 = {};\n  _0x104240[\"name\"] = _0x292cdb[_0x454b87(322)], _0x104240[\"version\"] = _0x292cdb[_0x45d35a(302)];\n  const _0x5b7516 = {};\n  _0x5b7516[\"capabilities\"] = _0x3d4a35;\n  const _0x2960cc = new Client(_0x104240, _0x5b7516);\n  await _0x2960cc[\"connect\"](_0x1ebb2c), _0x292cdb[_0x45d35a(290)](initWebClientHandler, _0x2239f7, _0x1ebb2c), _0x292cdb[\"NYETq\"](forwardProxyClient, _0x2960cc, _0x2239f7), _0x1ebb2c[\"sessionId\"] = _0xbd785d;\n  const _0x13f204 = {};\n  return _0x13f204[_0x454b87(287)] = _0x1ebb2c, _0x13f204[\"sessionId\"] = _0xbd785d, _0x13f204;\n};\nconst createStreamProxy = async (_0x15218f) => {\n  const _0x551a73 = _0x3f42, _0x3b3748 = _0x3f42, _0x5ea558 = { \"STOLL\": function(_0x276436) {\n    return _0x276436();\n  }, \"Ralpb\": function(_0x6f7b57, _0x17336b, _0x467f4a) {\n    return _0x6f7b57(_0x17336b, _0x467f4a);\n  }, \"kRoIR\": _0x551a73(307), \"zBxUW\": \"1.0.0\", \"MLIWZ\": function(_0x11beef, _0x321a32, _0xf6db6a) {\n    return _0x11beef(_0x321a32, _0xf6db6a);\n  } }, { client: _0x316e48, url: _0x3ea39b, token: _0x267d0c, sessionId: _0x346bab } = _0x15218f, _0x217cdb = _0x346bab || _0x5ea558[_0x3b3748(282)](generateUUID), _0x490cd8 = new StreamableHTTPClientTransport(new URL(_0x3ea39b), _0x5ea558[_0x551a73(311)](streamOptions, _0x267d0c, _0x217cdb)), _0x3f4689 = {};\n  _0x3f4689[\"listChanged\"] = !![];\n  const _0x2e09fc = {};\n  _0x2e09fc[_0x3b3748(320)] = {}, _0x2e09fc[\"resources\"] = {}, _0x2e09fc[_0x551a73(303)] = {}, _0x2e09fc[_0x551a73(315)] = {}, _0x2e09fc[_0x551a73(288)] = _0x3f4689, _0x2e09fc[_0x551a73(313)] = {};\n  const _0x4a3b1b = _0x2e09fc, _0x2d4b2f = {};\n  _0x2d4b2f[\"name\"] = _0x5ea558[\"kRoIR\"], _0x2d4b2f[_0x551a73(301)] = _0x5ea558[_0x551a73(289)];\n  const _0x4d1011 = {};\n  _0x4d1011[\"capabilities\"] = _0x4a3b1b;\n  const _0x503534 = new Client(_0x2d4b2f, _0x4d1011);\n  await _0x503534[_0x3b3748(297)](_0x490cd8), _0x5ea558[_0x551a73(293)](initWebClientHandler, _0x316e48, _0x490cd8), _0x5ea558[_0x551a73(311)](forwardProxyClient, _0x503534, _0x316e48);\n  const _0x55c735 = {};\n  return _0x55c735[_0x3b3748(287)] = _0x490cd8, _0x55c735[_0x3b3748(294)] = _0x217cdb, _0x55c735;\n};\nfunction _0x40c7() {\n  const _0x215da0 = [\"MhUJa\", \"removeNotificationListener\", \"removeRequestListener\", \"version\", \"nAXtx\", \"tools\", \"802030ULkOOd\", \"888120XOtYOc\", \"2249276aONbFk\", \"mcp-stream-proxy-client\", \"9Zrtczb\", \"1.0.0\", \"wtkds\", \"Ralpb\", \"addNotificationListener\", \"sampling\", \"48gpfGZR\", \"logging\", \"listChanged\", \"76643wQMMNV\", \"176xFTxxv\", \"_eventSource\", \"prompts\", \"onclose\", \"cGSyh\", \"close\", \"STOLL\", \"1365396TZnVUQ\", \"mcp-sse-proxy-client\", \"5alDkiu\", \"12031tcYqPf\", \"transport\", \"roots\", \"zBxUW\", \"MHbif\", \"addEventListener\", \"4952893dMIJix\", \"MLIWZ\", \"sessionId\", \"resources\", \"22ACquGI\", \"connect\"];\n  _0x40c7 = function() {\n    return _0x215da0;\n  };\n  return _0x40c7();\n}\n(function(_0x5f44e1, _0x50db57) {\n  var _0x470aa1 = _0x624e, _0x228588 = _0x624e, _0x3d7e54 = _0x5f44e1();\n  while (!![]) {\n    try {\n      var _0x5853e8 = -parseInt(_0x470aa1(146)) / (-5603 + -3 * -2705 + -3 * 837) + -parseInt(_0x470aa1(151)) / (5066 + -320 * 16 + 56) * (parseInt(_0x470aa1(150)) / (-146 * 31 + -4 * -1590 + -1831)) + parseInt(_0x470aa1(148)) / (-656 * -5 + -4206 + 3 * 310) + -parseInt(_0x470aa1(152)) / (814 + 2139 + 2948 * -1) + -parseInt(_0x470aa1(149)) / (1 * -917 + -1 * 3123 + 4046) + -parseInt(_0x470aa1(147)) / (8908 + -73 * 67 + -4010) * (-parseInt(_0x228588(153)) / (-1 * 8774 + 2809 + -1991 * -3)) + parseInt(_0x470aa1(145)) / (-1761 + -1301 * 2 + 2186 * 2);\n      if (_0x5853e8 === _0x50db57) break;\n      else _0x3d7e54[\"push\"](_0x3d7e54[\"shift\"]());\n    } catch (_0x1095cf) {\n      _0x3d7e54[\"push\"](_0x3d7e54[\"shift\"]());\n    }\n  }\n})(_0x290a, 421 * 846 + -1230358 + 1829094);\nfunction _0x624e(_0x6862c7, _0x3553e9) {\n  var _0x834ca = _0x290a();\n  return _0x624e = function(_0x5077ba, _0x5a96cc) {\n    _0x5077ba = _0x5077ba - (4870 + -7584 + -1 * -2859);\n    var _0xb6bb90 = _0x834ca[_0x5077ba];\n    return _0xb6bb90;\n  }, _0x624e(_0x6862c7, _0x3553e9);\n}\nfunction _0x290a() {\n  var _0x1564d5 = [\"6990666lmTFZb\", \"12303JhneIQ\", \"442jbtgOa\", \"8311125vypyPK\", \"368KGtkFm\", \"31159062Uuazld\", \"1452721vYzYtN\", \"171122cONrrN\", \"6218584okJVdB\"];\n  _0x290a = function() {\n    return _0x1564d5;\n  };\n  return _0x290a();\n}\nexport {\n  MessageChannelClientTransport,\n  MessageChannelServerTransport,\n  MessageChannelTransport,\n  createSseProxy,\n  createStreamProxy,\n  createTransportPair,\n  generateUUID,\n  sseOptions,\n  streamOptions\n};\n","import { mergeCapabilities, Protocol, } from \"../shared/protocol.js\";\nimport { CreateMessageResultSchema, ElicitResultSchema, EmptyResultSchema, InitializedNotificationSchema, InitializeRequestSchema, LATEST_PROTOCOL_VERSION, ListRootsResultSchema, McpError, ErrorCode, SUPPORTED_PROTOCOL_VERSIONS, } from \"../types.js\";\nimport Ajv from \"ajv\";\n/**\n * An MCP server on top of a pluggable transport.\n *\n * This server will automatically respond to the initialization flow as initiated from the client.\n *\n * To use with custom types, extend the base Request/Notification/Result types and pass them as type parameters:\n *\n * ```typescript\n * // Custom schemas\n * const CustomRequestSchema = RequestSchema.extend({...})\n * const CustomNotificationSchema = NotificationSchema.extend({...})\n * const CustomResultSchema = ResultSchema.extend({...})\n *\n * // Type aliases\n * type CustomRequest = z.infer<typeof CustomRequestSchema>\n * type CustomNotification = z.infer<typeof CustomNotificationSchema>\n * type CustomResult = z.infer<typeof CustomResultSchema>\n *\n * // Create typed server\n * const server = new Server<CustomRequest, CustomNotification, CustomResult>({\n *   name: \"CustomServer\",\n *   version: \"1.0.0\"\n * })\n * ```\n */\nexport class Server extends Protocol {\n    /**\n     * Initializes this server with the given name and version information.\n     */\n    constructor(_serverInfo, options) {\n        var _a;\n        super(options);\n        this._serverInfo = _serverInfo;\n        this._capabilities = (_a = options === null || options === void 0 ? void 0 : options.capabilities) !== null && _a !== void 0 ? _a : {};\n        this._instructions = options === null || options === void 0 ? void 0 : options.instructions;\n        this.setRequestHandler(InitializeRequestSchema, (request) => this._oninitialize(request));\n        this.setNotificationHandler(InitializedNotificationSchema, () => { var _a; return (_a = this.oninitialized) === null || _a === void 0 ? void 0 : _a.call(this); });\n    }\n    /**\n     * Registers new capabilities. This can only be called before connecting to a transport.\n     *\n     * The new capabilities will be merged with any existing capabilities previously given (e.g., at initialization).\n     */\n    registerCapabilities(capabilities) {\n        if (this.transport) {\n            throw new Error(\"Cannot register capabilities after connecting to transport\");\n        }\n        this._capabilities = mergeCapabilities(this._capabilities, capabilities);\n    }\n    assertCapabilityForMethod(method) {\n        var _a, _b, _c;\n        switch (method) {\n            case \"sampling/createMessage\":\n                if (!((_a = this._clientCapabilities) === null || _a === void 0 ? void 0 : _a.sampling)) {\n                    throw new Error(`Client does not support sampling (required for ${method})`);\n                }\n                break;\n            case \"elicitation/create\":\n                if (!((_b = this._clientCapabilities) === null || _b === void 0 ? void 0 : _b.elicitation)) {\n                    throw new Error(`Client does not support elicitation (required for ${method})`);\n                }\n                break;\n            case \"roots/list\":\n                if (!((_c = this._clientCapabilities) === null || _c === void 0 ? void 0 : _c.roots)) {\n                    throw new Error(`Client does not support listing roots (required for ${method})`);\n                }\n                break;\n            case \"ping\":\n                // No specific capability required for ping\n                break;\n        }\n    }\n    assertNotificationCapability(method) {\n        switch (method) {\n            case \"notifications/message\":\n                if (!this._capabilities.logging) {\n                    throw new Error(`Server does not support logging (required for ${method})`);\n                }\n                break;\n            case \"notifications/resources/updated\":\n            case \"notifications/resources/list_changed\":\n                if (!this._capabilities.resources) {\n                    throw new Error(`Server does not support notifying about resources (required for ${method})`);\n                }\n                break;\n            case \"notifications/tools/list_changed\":\n                if (!this._capabilities.tools) {\n                    throw new Error(`Server does not support notifying of tool list changes (required for ${method})`);\n                }\n                break;\n            case \"notifications/prompts/list_changed\":\n                if (!this._capabilities.prompts) {\n                    throw new Error(`Server does not support notifying of prompt list changes (required for ${method})`);\n                }\n                break;\n            case \"notifications/cancelled\":\n                // Cancellation notifications are always allowed\n                break;\n            case \"notifications/progress\":\n                // Progress notifications are always allowed\n                break;\n        }\n    }\n    assertRequestHandlerCapability(method) {\n        switch (method) {\n            case \"sampling/createMessage\":\n                if (!this._capabilities.sampling) {\n                    throw new Error(`Server does not support sampling (required for ${method})`);\n                }\n                break;\n            case \"logging/setLevel\":\n                if (!this._capabilities.logging) {\n                    throw new Error(`Server does not support logging (required for ${method})`);\n                }\n                break;\n            case \"prompts/get\":\n            case \"prompts/list\":\n                if (!this._capabilities.prompts) {\n                    throw new Error(`Server does not support prompts (required for ${method})`);\n                }\n                break;\n            case \"resources/list\":\n            case \"resources/templates/list\":\n            case \"resources/read\":\n                if (!this._capabilities.resources) {\n                    throw new Error(`Server does not support resources (required for ${method})`);\n                }\n                break;\n            case \"tools/call\":\n            case \"tools/list\":\n                if (!this._capabilities.tools) {\n                    throw new Error(`Server does not support tools (required for ${method})`);\n                }\n                break;\n            case \"ping\":\n            case \"initialize\":\n                // No specific capability required for these methods\n                break;\n        }\n    }\n    async _oninitialize(request) {\n        const requestedVersion = request.params.protocolVersion;\n        this._clientCapabilities = request.params.capabilities;\n        this._clientVersion = request.params.clientInfo;\n        const protocolVersion = SUPPORTED_PROTOCOL_VERSIONS.includes(requestedVersion)\n            ? requestedVersion\n            : LATEST_PROTOCOL_VERSION;\n        return {\n            protocolVersion,\n            capabilities: this.getCapabilities(),\n            serverInfo: this._serverInfo,\n            ...(this._instructions && { instructions: this._instructions }),\n        };\n    }\n    /**\n     * After initialization has completed, this will be populated with the client's reported capabilities.\n     */\n    getClientCapabilities() {\n        return this._clientCapabilities;\n    }\n    /**\n     * After initialization has completed, this will be populated with information about the client's name and version.\n     */\n    getClientVersion() {\n        return this._clientVersion;\n    }\n    getCapabilities() {\n        return this._capabilities;\n    }\n    async ping() {\n        return this.request({ method: \"ping\" }, EmptyResultSchema);\n    }\n    async createMessage(params, options) {\n        return this.request({ method: \"sampling/createMessage\", params }, CreateMessageResultSchema, options);\n    }\n    async elicitInput(params, options) {\n        const result = await this.request({ method: \"elicitation/create\", params }, ElicitResultSchema, options);\n        // Validate the response content against the requested schema if action is \"accept\"\n        if (result.action === \"accept\" && result.content) {\n            try {\n                const ajv = new Ajv();\n                const validate = ajv.compile(params.requestedSchema);\n                const isValid = validate(result.content);\n                if (!isValid) {\n                    throw new McpError(ErrorCode.InvalidParams, `Elicitation response content does not match requested schema: ${ajv.errorsText(validate.errors)}`);\n                }\n            }\n            catch (error) {\n                if (error instanceof McpError) {\n                    throw error;\n                }\n                throw new McpError(ErrorCode.InternalError, `Error validating elicitation response: ${error}`);\n            }\n        }\n        return result;\n    }\n    async listRoots(params, options) {\n        return this.request({ method: \"roots/list\", params }, ListRootsResultSchema, options);\n    }\n    async sendLoggingMessage(params) {\n        return this.notification({ method: \"notifications/message\", params });\n    }\n    async sendResourceUpdated(params) {\n        return this.notification({\n            method: \"notifications/resources/updated\",\n            params,\n        });\n    }\n    async sendResourceListChanged() {\n        return this.notification({\n            method: \"notifications/resources/list_changed\",\n        });\n    }\n    async sendToolListChanged() {\n        return this.notification({ method: \"notifications/tools/list_changed\" });\n    }\n    async sendPromptListChanged() {\n        return this.notification({ method: \"notifications/prompts/list_changed\" });\n    }\n}\n//# sourceMappingURL=index.js.map","export const ignoreOverride = Symbol(\"Let zodToJsonSchema decide on which parser to use\");\nexport const jsonDescription = (jsonSchema, def) => {\n    if (def.description) {\n        try {\n            return {\n                ...jsonSchema,\n                ...JSON.parse(def.description),\n            };\n        }\n        catch { }\n    }\n    return jsonSchema;\n};\nexport const defaultOptions = {\n    name: undefined,\n    $refStrategy: \"root\",\n    basePath: [\"#\"],\n    effectStrategy: \"input\",\n    pipeStrategy: \"all\",\n    dateStrategy: \"format:date-time\",\n    mapStrategy: \"entries\",\n    removeAdditionalStrategy: \"passthrough\",\n    allowedAdditionalProperties: true,\n    rejectedAdditionalProperties: false,\n    definitionPath: \"definitions\",\n    target: \"jsonSchema7\",\n    strictUnions: false,\n    definitions: {},\n    errorMessages: false,\n    markdownDescription: false,\n    patternStrategy: \"escape\",\n    applyRegexFlags: false,\n    emailStrategy: \"format:email\",\n    base64Strategy: \"contentEncoding:base64\",\n    nameStrategy: \"ref\",\n    openAiAnyTypeName: \"OpenAiAnyType\"\n};\nexport const getDefaultOptions = (options) => (typeof options === \"string\"\n    ? {\n        ...defaultOptions,\n        name: options,\n    }\n    : {\n        ...defaultOptions,\n        ...options,\n    });\n","import { getDefaultOptions } from \"./Options.js\";\nexport const getRefs = (options) => {\n    const _options = getDefaultOptions(options);\n    const currentPath = _options.name !== undefined\n        ? [..._options.basePath, _options.definitionPath, _options.name]\n        : _options.basePath;\n    return {\n        ..._options,\n        flags: { hasReferencedOpenAiAnyType: false },\n        currentPath: currentPath,\n        propertyPath: undefined,\n        seen: new Map(Object.entries(_options.definitions).map(([name, def]) => [\n            def._def,\n            {\n                def: def._def,\n                path: [..._options.basePath, _options.definitionPath, name],\n                // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.\n                jsonSchema: undefined,\n            },\n        ])),\n    };\n};\n","export function addErrorMessage(res, key, errorMessage, refs) {\n    if (!refs?.errorMessages)\n        return;\n    if (errorMessage) {\n        res.errorMessage = {\n            ...res.errorMessage,\n            [key]: errorMessage,\n        };\n    }\n}\nexport function setResponseValueAndErrors(res, key, value, errorMessage, refs) {\n    res[key] = value;\n    addErrorMessage(res, key, errorMessage, refs);\n}\n","export const getRelativePath = (pathA, pathB) => {\n    let i = 0;\n    for (; i < pathA.length && i < pathB.length; i++) {\n        if (pathA[i] !== pathB[i])\n            break;\n    }\n    return [(pathA.length - i).toString(), ...pathB.slice(i)].join(\"/\");\n};\n","import { getRelativePath } from \"../getRelativePath.js\";\nexport function parseAnyDef(refs) {\n    if (refs.target !== \"openAi\") {\n        return {};\n    }\n    const anyDefinitionPath = [\n        ...refs.basePath,\n        refs.definitionPath,\n        refs.openAiAnyTypeName,\n    ];\n    refs.flags.hasReferencedOpenAiAnyType = true;\n    return {\n        $ref: refs.$refStrategy === \"relative\"\n            ? getRelativePath(anyDefinitionPath, refs.currentPath)\n            : anyDefinitionPath.join(\"/\"),\n    };\n}\n","import { ZodFirstPartyTypeKind } from \"zod\";\nimport { setResponseValueAndErrors } from \"../errorMessages.js\";\nimport { parseDef } from \"../parseDef.js\";\nexport function parseArrayDef(def, refs) {\n    const res = {\n        type: \"array\",\n    };\n    if (def.type?._def &&\n        def.type?._def?.typeName !== ZodFirstPartyTypeKind.ZodAny) {\n        res.items = parseDef(def.type._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"items\"],\n        });\n    }\n    if (def.minLength) {\n        setResponseValueAndErrors(res, \"minItems\", def.minLength.value, def.minLength.message, refs);\n    }\n    if (def.maxLength) {\n        setResponseValueAndErrors(res, \"maxItems\", def.maxLength.value, def.maxLength.message, refs);\n    }\n    if (def.exactLength) {\n        setResponseValueAndErrors(res, \"minItems\", def.exactLength.value, def.exactLength.message, refs);\n        setResponseValueAndErrors(res, \"maxItems\", def.exactLength.value, def.exactLength.message, refs);\n    }\n    return res;\n}\n","import { setResponseValueAndErrors } from \"../errorMessages.js\";\nexport function parseBigintDef(def, refs) {\n    const res = {\n        type: \"integer\",\n        format: \"int64\",\n    };\n    if (!def.checks)\n        return res;\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"min\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMinimum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMinimum = true;\n                    }\n                    setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                }\n                break;\n            case \"max\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMaximum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMaximum = true;\n                    }\n                    setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                }\n                break;\n            case \"multipleOf\":\n                setResponseValueAndErrors(res, \"multipleOf\", check.value, check.message, refs);\n                break;\n        }\n    }\n    return res;\n}\n","export function parseBooleanDef() {\n    return {\n        type: \"boolean\",\n    };\n}\n","import { parseDef } from \"../parseDef.js\";\nexport function parseBrandedDef(_def, refs) {\n    return parseDef(_def.type._def, refs);\n}\n","import { parseDef } from \"../parseDef.js\";\nexport const parseCatchDef = (def, refs) => {\n    return parseDef(def.innerType._def, refs);\n};\n","import { setResponseValueAndErrors } from \"../errorMessages.js\";\nexport function parseDateDef(def, refs, overrideDateStrategy) {\n    const strategy = overrideDateStrategy ?? refs.dateStrategy;\n    if (Array.isArray(strategy)) {\n        return {\n            anyOf: strategy.map((item, i) => parseDateDef(def, refs, item)),\n        };\n    }\n    switch (strategy) {\n        case \"string\":\n        case \"format:date-time\":\n            return {\n                type: \"string\",\n                format: \"date-time\",\n            };\n        case \"format:date\":\n            return {\n                type: \"string\",\n                format: \"date\",\n            };\n        case \"integer\":\n            return integerDateParser(def, refs);\n    }\n}\nconst integerDateParser = (def, refs) => {\n    const res = {\n        type: \"integer\",\n        format: \"unix-time\",\n    };\n    if (refs.target === \"openApi3\") {\n        return res;\n    }\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"min\":\n                setResponseValueAndErrors(res, \"minimum\", check.value, // This is in milliseconds\n                check.message, refs);\n                break;\n            case \"max\":\n                setResponseValueAndErrors(res, \"maximum\", check.value, // This is in milliseconds\n                check.message, refs);\n                break;\n        }\n    }\n    return res;\n};\n","import { parseDef } from \"../parseDef.js\";\nexport function parseDefaultDef(_def, refs) {\n    return {\n        ...parseDef(_def.innerType._def, refs),\n        default: _def.defaultValue(),\n    };\n}\n","import { parseDef } from \"../parseDef.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseEffectsDef(_def, refs) {\n    return refs.effectStrategy === \"input\"\n        ? parseDef(_def.schema._def, refs)\n        : parseAnyDef(refs);\n}\n","export function parseEnumDef(def) {\n    return {\n        type: \"string\",\n        enum: Array.from(def.values),\n    };\n}\n","import { parseDef } from \"../parseDef.js\";\nconst isJsonSchema7AllOfType = (type) => {\n    if (\"type\" in type && type.type === \"string\")\n        return false;\n    return \"allOf\" in type;\n};\nexport function parseIntersectionDef(def, refs) {\n    const allOf = [\n        parseDef(def.left._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"allOf\", \"0\"],\n        }),\n        parseDef(def.right._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"allOf\", \"1\"],\n        }),\n    ].filter((x) => !!x);\n    let unevaluatedProperties = refs.target === \"jsonSchema2019-09\"\n        ? { unevaluatedProperties: false }\n        : undefined;\n    const mergedAllOf = [];\n    // If either of the schemas is an allOf, merge them into a single allOf\n    allOf.forEach((schema) => {\n        if (isJsonSchema7AllOfType(schema)) {\n            mergedAllOf.push(...schema.allOf);\n            if (schema.unevaluatedProperties === undefined) {\n                // If one of the schemas has no unevaluatedProperties set,\n                // the merged schema should also have no unevaluatedProperties set\n                unevaluatedProperties = undefined;\n            }\n        }\n        else {\n            let nestedSchema = schema;\n            if (\"additionalProperties\" in schema &&\n                schema.additionalProperties === false) {\n                const { additionalProperties, ...rest } = schema;\n                nestedSchema = rest;\n            }\n            else {\n                // As soon as one of the schemas has additionalProperties set not to false, we allow unevaluatedProperties\n                unevaluatedProperties = undefined;\n            }\n            mergedAllOf.push(nestedSchema);\n        }\n    });\n    return mergedAllOf.length\n        ? {\n            allOf: mergedAllOf,\n            ...unevaluatedProperties,\n        }\n        : undefined;\n}\n","export function parseLiteralDef(def, refs) {\n    const parsedType = typeof def.value;\n    if (parsedType !== \"bigint\" &&\n        parsedType !== \"number\" &&\n        parsedType !== \"boolean\" &&\n        parsedType !== \"string\") {\n        return {\n            type: Array.isArray(def.value) ? \"array\" : \"object\",\n        };\n    }\n    if (refs.target === \"openApi3\") {\n        return {\n            type: parsedType === \"bigint\" ? \"integer\" : parsedType,\n            enum: [def.value],\n        };\n    }\n    return {\n        type: parsedType === \"bigint\" ? \"integer\" : parsedType,\n        const: def.value,\n    };\n}\n","import { setResponseValueAndErrors } from \"../errorMessages.js\";\nlet emojiRegex = undefined;\n/**\n * Generated from the regular expressions found here as of 2024-05-22:\n * https://github.com/colinhacks/zod/blob/master/src/types.ts.\n *\n * Expressions with /i flag have been changed accordingly.\n */\nexport const zodPatterns = {\n    /**\n     * `c` was changed to `[cC]` to replicate /i flag\n     */\n    cuid: /^[cC][^\\s-]{8,}$/,\n    cuid2: /^[0-9a-z]+$/,\n    ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,\n    /**\n     * `a-z` was added to replicate /i flag\n     */\n    email: /^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,\n    /**\n     * Constructed a valid Unicode RegExp\n     *\n     * Lazily instantiate since this type of regex isn't supported\n     * in all envs (e.g. React Native).\n     *\n     * See:\n     * https://github.com/colinhacks/zod/issues/2433\n     * Fix in Zod:\n     * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b\n     */\n    emoji: () => {\n        if (emojiRegex === undefined) {\n            emojiRegex = RegExp(\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\", \"u\");\n        }\n        return emojiRegex;\n    },\n    /**\n     * Unused\n     */\n    uuid: /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n    /**\n     * Unused\n     */\n    ipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,\n    ipv4Cidr: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,\n    /**\n     * Unused\n     */\n    ipv6: /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,\n    ipv6Cidr: /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,\n    base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,\n    base64url: /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,\n    nanoid: /^[a-zA-Z0-9_-]{21}$/,\n    jwt: /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,\n};\nexport function parseStringDef(def, refs) {\n    const res = {\n        type: \"string\",\n    };\n    if (def.checks) {\n        for (const check of def.checks) {\n            switch (check.kind) {\n                case \"min\":\n                    setResponseValueAndErrors(res, \"minLength\", typeof res.minLength === \"number\"\n                        ? Math.max(res.minLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"max\":\n                    setResponseValueAndErrors(res, \"maxLength\", typeof res.maxLength === \"number\"\n                        ? Math.min(res.maxLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"email\":\n                    switch (refs.emailStrategy) {\n                        case \"format:email\":\n                            addFormat(res, \"email\", check.message, refs);\n                            break;\n                        case \"format:idn-email\":\n                            addFormat(res, \"idn-email\", check.message, refs);\n                            break;\n                        case \"pattern:zod\":\n                            addPattern(res, zodPatterns.email, check.message, refs);\n                            break;\n                    }\n                    break;\n                case \"url\":\n                    addFormat(res, \"uri\", check.message, refs);\n                    break;\n                case \"uuid\":\n                    addFormat(res, \"uuid\", check.message, refs);\n                    break;\n                case \"regex\":\n                    addPattern(res, check.regex, check.message, refs);\n                    break;\n                case \"cuid\":\n                    addPattern(res, zodPatterns.cuid, check.message, refs);\n                    break;\n                case \"cuid2\":\n                    addPattern(res, zodPatterns.cuid2, check.message, refs);\n                    break;\n                case \"startsWith\":\n                    addPattern(res, RegExp(`^${escapeLiteralCheckValue(check.value, refs)}`), check.message, refs);\n                    break;\n                case \"endsWith\":\n                    addPattern(res, RegExp(`${escapeLiteralCheckValue(check.value, refs)}$`), check.message, refs);\n                    break;\n                case \"datetime\":\n                    addFormat(res, \"date-time\", check.message, refs);\n                    break;\n                case \"date\":\n                    addFormat(res, \"date\", check.message, refs);\n                    break;\n                case \"time\":\n                    addFormat(res, \"time\", check.message, refs);\n                    break;\n                case \"duration\":\n                    addFormat(res, \"duration\", check.message, refs);\n                    break;\n                case \"length\":\n                    setResponseValueAndErrors(res, \"minLength\", typeof res.minLength === \"number\"\n                        ? Math.max(res.minLength, check.value)\n                        : check.value, check.message, refs);\n                    setResponseValueAndErrors(res, \"maxLength\", typeof res.maxLength === \"number\"\n                        ? Math.min(res.maxLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"includes\": {\n                    addPattern(res, RegExp(escapeLiteralCheckValue(check.value, refs)), check.message, refs);\n                    break;\n                }\n                case \"ip\": {\n                    if (check.version !== \"v6\") {\n                        addFormat(res, \"ipv4\", check.message, refs);\n                    }\n                    if (check.version !== \"v4\") {\n                        addFormat(res, \"ipv6\", check.message, refs);\n                    }\n                    break;\n                }\n                case \"base64url\":\n                    addPattern(res, zodPatterns.base64url, check.message, refs);\n                    break;\n                case \"jwt\":\n                    addPattern(res, zodPatterns.jwt, check.message, refs);\n                    break;\n                case \"cidr\": {\n                    if (check.version !== \"v6\") {\n                        addPattern(res, zodPatterns.ipv4Cidr, check.message, refs);\n                    }\n                    if (check.version !== \"v4\") {\n                        addPattern(res, zodPatterns.ipv6Cidr, check.message, refs);\n                    }\n                    break;\n                }\n                case \"emoji\":\n                    addPattern(res, zodPatterns.emoji(), check.message, refs);\n                    break;\n                case \"ulid\": {\n                    addPattern(res, zodPatterns.ulid, check.message, refs);\n                    break;\n                }\n                case \"base64\": {\n                    switch (refs.base64Strategy) {\n                        case \"format:binary\": {\n                            addFormat(res, \"binary\", check.message, refs);\n                            break;\n                        }\n                        case \"contentEncoding:base64\": {\n                            setResponseValueAndErrors(res, \"contentEncoding\", \"base64\", check.message, refs);\n                            break;\n                        }\n                        case \"pattern:zod\": {\n                            addPattern(res, zodPatterns.base64, check.message, refs);\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case \"nanoid\": {\n                    addPattern(res, zodPatterns.nanoid, check.message, refs);\n                }\n                case \"toLowerCase\":\n                case \"toUpperCase\":\n                case \"trim\":\n                    break;\n                default:\n                    /* c8 ignore next */\n                    ((_) => { })(check);\n            }\n        }\n    }\n    return res;\n}\nfunction escapeLiteralCheckValue(literal, refs) {\n    return refs.patternStrategy === \"escape\"\n        ? escapeNonAlphaNumeric(literal)\n        : literal;\n}\nconst ALPHA_NUMERIC = new Set(\"ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789\");\nfunction escapeNonAlphaNumeric(source) {\n    let result = \"\";\n    for (let i = 0; i < source.length; i++) {\n        if (!ALPHA_NUMERIC.has(source[i])) {\n            result += \"\\\\\";\n        }\n        result += source[i];\n    }\n    return result;\n}\n// Adds a \"format\" keyword to the schema. If a format exists, both formats will be joined in an allOf-node, along with subsequent ones.\nfunction addFormat(schema, value, message, refs) {\n    if (schema.format || schema.anyOf?.some((x) => x.format)) {\n        if (!schema.anyOf) {\n            schema.anyOf = [];\n        }\n        if (schema.format) {\n            schema.anyOf.push({\n                format: schema.format,\n                ...(schema.errorMessage &&\n                    refs.errorMessages && {\n                    errorMessage: { format: schema.errorMessage.format },\n                }),\n            });\n            delete schema.format;\n            if (schema.errorMessage) {\n                delete schema.errorMessage.format;\n                if (Object.keys(schema.errorMessage).length === 0) {\n                    delete schema.errorMessage;\n                }\n            }\n        }\n        schema.anyOf.push({\n            format: value,\n            ...(message &&\n                refs.errorMessages && { errorMessage: { format: message } }),\n        });\n    }\n    else {\n        setResponseValueAndErrors(schema, \"format\", value, message, refs);\n    }\n}\n// Adds a \"pattern\" keyword to the schema. If a pattern exists, both patterns will be joined in an allOf-node, along with subsequent ones.\nfunction addPattern(schema, regex, message, refs) {\n    if (schema.pattern || schema.allOf?.some((x) => x.pattern)) {\n        if (!schema.allOf) {\n            schema.allOf = [];\n        }\n        if (schema.pattern) {\n            schema.allOf.push({\n                pattern: schema.pattern,\n                ...(schema.errorMessage &&\n                    refs.errorMessages && {\n                    errorMessage: { pattern: schema.errorMessage.pattern },\n                }),\n            });\n            delete schema.pattern;\n            if (schema.errorMessage) {\n                delete schema.errorMessage.pattern;\n                if (Object.keys(schema.errorMessage).length === 0) {\n                    delete schema.errorMessage;\n                }\n            }\n        }\n        schema.allOf.push({\n            pattern: stringifyRegExpWithFlags(regex, refs),\n            ...(message &&\n                refs.errorMessages && { errorMessage: { pattern: message } }),\n        });\n    }\n    else {\n        setResponseValueAndErrors(schema, \"pattern\", stringifyRegExpWithFlags(regex, refs), message, refs);\n    }\n}\n// Mutate z.string.regex() in a best attempt to accommodate for regex flags when applyRegexFlags is true\nfunction stringifyRegExpWithFlags(regex, refs) {\n    if (!refs.applyRegexFlags || !regex.flags) {\n        return regex.source;\n    }\n    // Currently handled flags\n    const flags = {\n        i: regex.flags.includes(\"i\"),\n        m: regex.flags.includes(\"m\"),\n        s: regex.flags.includes(\"s\"), // `.` matches newlines\n    };\n    // The general principle here is to step through each character, one at a time, applying mutations as flags require. We keep track when the current character is escaped, and when it's inside a group /like [this]/ or (also) a range like /[a-z]/. The following is fairly brittle imperative code; edit at your peril!\n    const source = flags.i ? regex.source.toLowerCase() : regex.source;\n    let pattern = \"\";\n    let isEscaped = false;\n    let inCharGroup = false;\n    let inCharRange = false;\n    for (let i = 0; i < source.length; i++) {\n        if (isEscaped) {\n            pattern += source[i];\n            isEscaped = false;\n            continue;\n        }\n        if (flags.i) {\n            if (inCharGroup) {\n                if (source[i].match(/[a-z]/)) {\n                    if (inCharRange) {\n                        pattern += source[i];\n                        pattern += `${source[i - 2]}-${source[i]}`.toUpperCase();\n                        inCharRange = false;\n                    }\n                    else if (source[i + 1] === \"-\" && source[i + 2]?.match(/[a-z]/)) {\n                        pattern += source[i];\n                        inCharRange = true;\n                    }\n                    else {\n                        pattern += `${source[i]}${source[i].toUpperCase()}`;\n                    }\n                    continue;\n                }\n            }\n            else if (source[i].match(/[a-z]/)) {\n                pattern += `[${source[i]}${source[i].toUpperCase()}]`;\n                continue;\n            }\n        }\n        if (flags.m) {\n            if (source[i] === \"^\") {\n                pattern += `(^|(?<=[\\r\\n]))`;\n                continue;\n            }\n            else if (source[i] === \"$\") {\n                pattern += `($|(?=[\\r\\n]))`;\n                continue;\n            }\n        }\n        if (flags.s && source[i] === \".\") {\n            pattern += inCharGroup ? `${source[i]}\\r\\n` : `[${source[i]}\\r\\n]`;\n            continue;\n        }\n        pattern += source[i];\n        if (source[i] === \"\\\\\") {\n            isEscaped = true;\n        }\n        else if (inCharGroup && source[i] === \"]\") {\n            inCharGroup = false;\n        }\n        else if (!inCharGroup && source[i] === \"[\") {\n            inCharGroup = true;\n        }\n    }\n    try {\n        new RegExp(pattern);\n    }\n    catch {\n        console.warn(`Could not convert regex pattern at ${refs.currentPath.join(\"/\")} to a flag-independent form! Falling back to the flag-ignorant source`);\n        return regex.source;\n    }\n    return pattern;\n}\n","import { ZodFirstPartyTypeKind, } from \"zod\";\nimport { parseDef } from \"../parseDef.js\";\nimport { parseStringDef } from \"./string.js\";\nimport { parseBrandedDef } from \"./branded.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseRecordDef(def, refs) {\n    if (refs.target === \"openAi\") {\n        console.warn(\"Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.\");\n    }\n    if (refs.target === \"openApi3\" &&\n        def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodEnum) {\n        return {\n            type: \"object\",\n            required: def.keyType._def.values,\n            properties: def.keyType._def.values.reduce((acc, key) => ({\n                ...acc,\n                [key]: parseDef(def.valueType._def, {\n                    ...refs,\n                    currentPath: [...refs.currentPath, \"properties\", key],\n                }) ?? parseAnyDef(refs),\n            }), {}),\n            additionalProperties: refs.rejectedAdditionalProperties,\n        };\n    }\n    const schema = {\n        type: \"object\",\n        additionalProperties: parseDef(def.valueType._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"additionalProperties\"],\n        }) ?? refs.allowedAdditionalProperties,\n    };\n    if (refs.target === \"openApi3\") {\n        return schema;\n    }\n    if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n        def.keyType._def.checks?.length) {\n        const { type, ...keyType } = parseStringDef(def.keyType._def, refs);\n        return {\n            ...schema,\n            propertyNames: keyType,\n        };\n    }\n    else if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodEnum) {\n        return {\n            ...schema,\n            propertyNames: {\n                enum: def.keyType._def.values,\n            },\n        };\n    }\n    else if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodBranded &&\n        def.keyType._def.type._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n        def.keyType._def.type._def.checks?.length) {\n        const { type, ...keyType } = parseBrandedDef(def.keyType._def, refs);\n        return {\n            ...schema,\n            propertyNames: keyType,\n        };\n    }\n    return schema;\n}\n","import { parseDef } from \"../parseDef.js\";\nimport { parseRecordDef } from \"./record.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseMapDef(def, refs) {\n    if (refs.mapStrategy === \"record\") {\n        return parseRecordDef(def, refs);\n    }\n    const keys = parseDef(def.keyType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\", \"items\", \"0\"],\n    }) || parseAnyDef(refs);\n    const values = parseDef(def.valueType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\", \"items\", \"1\"],\n    }) || parseAnyDef(refs);\n    return {\n        type: \"array\",\n        maxItems: 125,\n        items: {\n            type: \"array\",\n            items: [keys, values],\n            minItems: 2,\n            maxItems: 2,\n        },\n    };\n}\n","export function parseNativeEnumDef(def) {\n    const object = def.values;\n    const actualKeys = Object.keys(def.values).filter((key) => {\n        return typeof object[object[key]] !== \"number\";\n    });\n    const actualValues = actualKeys.map((key) => object[key]);\n    const parsedTypes = Array.from(new Set(actualValues.map((values) => typeof values)));\n    return {\n        type: parsedTypes.length === 1\n            ? parsedTypes[0] === \"string\"\n                ? \"string\"\n                : \"number\"\n            : [\"string\", \"number\"],\n        enum: actualValues,\n    };\n}\n","import { parseAnyDef } from \"./any.js\";\nexport function parseNeverDef(refs) {\n    return refs.target === \"openAi\"\n        ? undefined\n        : {\n            not: parseAnyDef({\n                ...refs,\n                currentPath: [...refs.currentPath, \"not\"],\n            }),\n        };\n}\n","export function parseNullDef(refs) {\n    return refs.target === \"openApi3\"\n        ? {\n            enum: [\"null\"],\n            nullable: true,\n        }\n        : {\n            type: \"null\",\n        };\n}\n","import { parseDef } from \"../parseDef.js\";\nexport const primitiveMappings = {\n    ZodString: \"string\",\n    ZodNumber: \"number\",\n    ZodBigInt: \"integer\",\n    ZodBoolean: \"boolean\",\n    ZodNull: \"null\",\n};\nexport function parseUnionDef(def, refs) {\n    if (refs.target === \"openApi3\")\n        return asAnyOf(def, refs);\n    const options = def.options instanceof Map ? Array.from(def.options.values()) : def.options;\n    // This blocks tries to look ahead a bit to produce nicer looking schemas with type array instead of anyOf.\n    if (options.every((x) => x._def.typeName in primitiveMappings &&\n        (!x._def.checks || !x._def.checks.length))) {\n        // all types in union are primitive and lack checks, so might as well squash into {type: [...]}\n        const types = options.reduce((types, x) => {\n            const type = primitiveMappings[x._def.typeName]; //Can be safely casted due to row 43\n            return type && !types.includes(type) ? [...types, type] : types;\n        }, []);\n        return {\n            type: types.length > 1 ? types : types[0],\n        };\n    }\n    else if (options.every((x) => x._def.typeName === \"ZodLiteral\" && !x.description)) {\n        // all options literals\n        const types = options.reduce((acc, x) => {\n            const type = typeof x._def.value;\n            switch (type) {\n                case \"string\":\n                case \"number\":\n                case \"boolean\":\n                    return [...acc, type];\n                case \"bigint\":\n                    return [...acc, \"integer\"];\n                case \"object\":\n                    if (x._def.value === null)\n                        return [...acc, \"null\"];\n                case \"symbol\":\n                case \"undefined\":\n                case \"function\":\n                default:\n                    return acc;\n            }\n        }, []);\n        if (types.length === options.length) {\n            // all the literals are primitive, as far as null can be considered primitive\n            const uniqueTypes = types.filter((x, i, a) => a.indexOf(x) === i);\n            return {\n                type: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],\n                enum: options.reduce((acc, x) => {\n                    return acc.includes(x._def.value) ? acc : [...acc, x._def.value];\n                }, []),\n            };\n        }\n    }\n    else if (options.every((x) => x._def.typeName === \"ZodEnum\")) {\n        return {\n            type: \"string\",\n            enum: options.reduce((acc, x) => [\n                ...acc,\n                ...x._def.values.filter((x) => !acc.includes(x)),\n            ], []),\n        };\n    }\n    return asAnyOf(def, refs);\n}\nconst asAnyOf = (def, refs) => {\n    const anyOf = (def.options instanceof Map\n        ? Array.from(def.options.values())\n        : def.options)\n        .map((x, i) => parseDef(x._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", `${i}`],\n    }))\n        .filter((x) => !!x &&\n        (!refs.strictUnions ||\n            (typeof x === \"object\" && Object.keys(x).length > 0)));\n    return anyOf.length ? { anyOf } : undefined;\n};\n","import { parseDef } from \"../parseDef.js\";\nimport { primitiveMappings } from \"./union.js\";\nexport function parseNullableDef(def, refs) {\n    if ([\"ZodString\", \"ZodNumber\", \"ZodBigInt\", \"ZodBoolean\", \"ZodNull\"].includes(def.innerType._def.typeName) &&\n        (!def.innerType._def.checks || !def.innerType._def.checks.length)) {\n        if (refs.target === \"openApi3\") {\n            return {\n                type: primitiveMappings[def.innerType._def.typeName],\n                nullable: true,\n            };\n        }\n        return {\n            type: [\n                primitiveMappings[def.innerType._def.typeName],\n                \"null\",\n            ],\n        };\n    }\n    if (refs.target === \"openApi3\") {\n        const base = parseDef(def.innerType._def, {\n            ...refs,\n            currentPath: [...refs.currentPath],\n        });\n        if (base && \"$ref\" in base)\n            return { allOf: [base], nullable: true };\n        return base && { ...base, nullable: true };\n    }\n    const base = parseDef(def.innerType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", \"0\"],\n    });\n    return base && { anyOf: [base, { type: \"null\" }] };\n}\n","import { addErrorMessage, setResponseValueAndErrors, } from \"../errorMessages.js\";\nexport function parseNumberDef(def, refs) {\n    const res = {\n        type: \"number\",\n    };\n    if (!def.checks)\n        return res;\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"int\":\n                res.type = \"integer\";\n                addErrorMessage(res, \"type\", check.message, refs);\n                break;\n            case \"min\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMinimum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMinimum = true;\n                    }\n                    setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                }\n                break;\n            case \"max\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMaximum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMaximum = true;\n                    }\n                    setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                }\n                break;\n            case \"multipleOf\":\n                setResponseValueAndErrors(res, \"multipleOf\", check.value, check.message, refs);\n                break;\n        }\n    }\n    return res;\n}\n","import { parseDef } from \"../parseDef.js\";\nexport function parseObjectDef(def, refs) {\n    const forceOptionalIntoNullable = refs.target === \"openAi\";\n    const result = {\n        type: \"object\",\n        properties: {},\n    };\n    const required = [];\n    const shape = def.shape();\n    for (const propName in shape) {\n        let propDef = shape[propName];\n        if (propDef === undefined || propDef._def === undefined) {\n            continue;\n        }\n        let propOptional = safeIsOptional(propDef);\n        if (propOptional && forceOptionalIntoNullable) {\n            if (propDef._def.typeName === \"ZodOptional\") {\n                propDef = propDef._def.innerType;\n            }\n            if (!propDef.isNullable()) {\n                propDef = propDef.nullable();\n            }\n            propOptional = false;\n        }\n        const parsedDef = parseDef(propDef._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"properties\", propName],\n            propertyPath: [...refs.currentPath, \"properties\", propName],\n        });\n        if (parsedDef === undefined) {\n            continue;\n        }\n        result.properties[propName] = parsedDef;\n        if (!propOptional) {\n            required.push(propName);\n        }\n    }\n    if (required.length) {\n        result.required = required;\n    }\n    const additionalProperties = decideAdditionalProperties(def, refs);\n    if (additionalProperties !== undefined) {\n        result.additionalProperties = additionalProperties;\n    }\n    return result;\n}\nfunction decideAdditionalProperties(def, refs) {\n    if (def.catchall._def.typeName !== \"ZodNever\") {\n        return parseDef(def.catchall._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"additionalProperties\"],\n        });\n    }\n    switch (def.unknownKeys) {\n        case \"passthrough\":\n            return refs.allowedAdditionalProperties;\n        case \"strict\":\n            return refs.rejectedAdditionalProperties;\n        case \"strip\":\n            return refs.removeAdditionalStrategy === \"strict\"\n                ? refs.allowedAdditionalProperties\n                : refs.rejectedAdditionalProperties;\n    }\n}\nfunction safeIsOptional(schema) {\n    try {\n        return schema.isOptional();\n    }\n    catch {\n        return true;\n    }\n}\n","import { parseDef } from \"../parseDef.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport const parseOptionalDef = (def, refs) => {\n    if (refs.currentPath.toString() === refs.propertyPath?.toString()) {\n        return parseDef(def.innerType._def, refs);\n    }\n    const innerSchema = parseDef(def.innerType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", \"1\"],\n    });\n    return innerSchema\n        ? {\n            anyOf: [\n                {\n                    not: parseAnyDef(refs),\n                },\n                innerSchema,\n            ],\n        }\n        : parseAnyDef(refs);\n};\n","import { parseDef } from \"../parseDef.js\";\nexport const parsePipelineDef = (def, refs) => {\n    if (refs.pipeStrategy === \"input\") {\n        return parseDef(def.in._def, refs);\n    }\n    else if (refs.pipeStrategy === \"output\") {\n        return parseDef(def.out._def, refs);\n    }\n    const a = parseDef(def.in._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"allOf\", \"0\"],\n    });\n    const b = parseDef(def.out._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"allOf\", a ? \"1\" : \"0\"],\n    });\n    return {\n        allOf: [a, b].filter((x) => x !== undefined),\n    };\n};\n","import { parseDef } from \"../parseDef.js\";\nexport function parsePromiseDef(def, refs) {\n    return parseDef(def.type._def, refs);\n}\n","import { setResponseValueAndErrors } from \"../errorMessages.js\";\nimport { parseDef } from \"../parseDef.js\";\nexport function parseSetDef(def, refs) {\n    const items = parseDef(def.valueType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\"],\n    });\n    const schema = {\n        type: \"array\",\n        uniqueItems: true,\n        items,\n    };\n    if (def.minSize) {\n        setResponseValueAndErrors(schema, \"minItems\", def.minSize.value, def.minSize.message, refs);\n    }\n    if (def.maxSize) {\n        setResponseValueAndErrors(schema, \"maxItems\", def.maxSize.value, def.maxSize.message, refs);\n    }\n    return schema;\n}\n","import { parseDef } from \"../parseDef.js\";\nexport function parseTupleDef(def, refs) {\n    if (def.rest) {\n        return {\n            type: \"array\",\n            minItems: def.items.length,\n            items: def.items\n                .map((x, i) => parseDef(x._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"items\", `${i}`],\n            }))\n                .reduce((acc, x) => (x === undefined ? acc : [...acc, x]), []),\n            additionalItems: parseDef(def.rest._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"additionalItems\"],\n            }),\n        };\n    }\n    else {\n        return {\n            type: \"array\",\n            minItems: def.items.length,\n            maxItems: def.items.length,\n            items: def.items\n                .map((x, i) => parseDef(x._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"items\", `${i}`],\n            }))\n                .reduce((acc, x) => (x === undefined ? acc : [...acc, x]), []),\n        };\n    }\n}\n","import { parseAnyDef } from \"./any.js\";\nexport function parseUndefinedDef(refs) {\n    return {\n        not: parseAnyDef(refs),\n    };\n}\n","import { parseAnyDef } from \"./any.js\";\nexport function parseUnknownDef(refs) {\n    return parseAnyDef(refs);\n}\n","import { parseDef } from \"../parseDef.js\";\nexport const parseReadonlyDef = (def, refs) => {\n    return parseDef(def.innerType._def, refs);\n};\n","import { ZodFirstPartyTypeKind } from \"zod\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nimport { parseArrayDef } from \"./parsers/array.js\";\nimport { parseBigintDef } from \"./parsers/bigint.js\";\nimport { parseBooleanDef } from \"./parsers/boolean.js\";\nimport { parseBrandedDef } from \"./parsers/branded.js\";\nimport { parseCatchDef } from \"./parsers/catch.js\";\nimport { parseDateDef } from \"./parsers/date.js\";\nimport { parseDefaultDef } from \"./parsers/default.js\";\nimport { parseEffectsDef } from \"./parsers/effects.js\";\nimport { parseEnumDef } from \"./parsers/enum.js\";\nimport { parseIntersectionDef } from \"./parsers/intersection.js\";\nimport { parseLiteralDef } from \"./parsers/literal.js\";\nimport { parseMapDef } from \"./parsers/map.js\";\nimport { parseNativeEnumDef } from \"./parsers/nativeEnum.js\";\nimport { parseNeverDef } from \"./parsers/never.js\";\nimport { parseNullDef } from \"./parsers/null.js\";\nimport { parseNullableDef } from \"./parsers/nullable.js\";\nimport { parseNumberDef } from \"./parsers/number.js\";\nimport { parseObjectDef } from \"./parsers/object.js\";\nimport { parseOptionalDef } from \"./parsers/optional.js\";\nimport { parsePipelineDef } from \"./parsers/pipeline.js\";\nimport { parsePromiseDef } from \"./parsers/promise.js\";\nimport { parseRecordDef } from \"./parsers/record.js\";\nimport { parseSetDef } from \"./parsers/set.js\";\nimport { parseStringDef } from \"./parsers/string.js\";\nimport { parseTupleDef } from \"./parsers/tuple.js\";\nimport { parseUndefinedDef } from \"./parsers/undefined.js\";\nimport { parseUnionDef } from \"./parsers/union.js\";\nimport { parseUnknownDef } from \"./parsers/unknown.js\";\nimport { parseReadonlyDef } from \"./parsers/readonly.js\";\nexport const selectParser = (def, typeName, refs) => {\n    switch (typeName) {\n        case ZodFirstPartyTypeKind.ZodString:\n            return parseStringDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodNumber:\n            return parseNumberDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodObject:\n            return parseObjectDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBigInt:\n            return parseBigintDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBoolean:\n            return parseBooleanDef();\n        case ZodFirstPartyTypeKind.ZodDate:\n            return parseDateDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodUndefined:\n            return parseUndefinedDef(refs);\n        case ZodFirstPartyTypeKind.ZodNull:\n            return parseNullDef(refs);\n        case ZodFirstPartyTypeKind.ZodArray:\n            return parseArrayDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodUnion:\n        case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:\n            return parseUnionDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodIntersection:\n            return parseIntersectionDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodTuple:\n            return parseTupleDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodRecord:\n            return parseRecordDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodLiteral:\n            return parseLiteralDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodEnum:\n            return parseEnumDef(def);\n        case ZodFirstPartyTypeKind.ZodNativeEnum:\n            return parseNativeEnumDef(def);\n        case ZodFirstPartyTypeKind.ZodNullable:\n            return parseNullableDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodOptional:\n            return parseOptionalDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodMap:\n            return parseMapDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodSet:\n            return parseSetDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodLazy:\n            return () => def.getter()._def;\n        case ZodFirstPartyTypeKind.ZodPromise:\n            return parsePromiseDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodNaN:\n        case ZodFirstPartyTypeKind.ZodNever:\n            return parseNeverDef(refs);\n        case ZodFirstPartyTypeKind.ZodEffects:\n            return parseEffectsDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodAny:\n            return parseAnyDef(refs);\n        case ZodFirstPartyTypeKind.ZodUnknown:\n            return parseUnknownDef(refs);\n        case ZodFirstPartyTypeKind.ZodDefault:\n            return parseDefaultDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBranded:\n            return parseBrandedDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodReadonly:\n            return parseReadonlyDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodCatch:\n            return parseCatchDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodPipeline:\n            return parsePipelineDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodFunction:\n        case ZodFirstPartyTypeKind.ZodVoid:\n        case ZodFirstPartyTypeKind.ZodSymbol:\n            return undefined;\n        default:\n            /* c8 ignore next */\n            return ((_) => undefined)(typeName);\n    }\n};\n","import { ignoreOverride } from \"./Options.js\";\nimport { selectParser } from \"./selectParser.js\";\nimport { getRelativePath } from \"./getRelativePath.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nexport function parseDef(def, refs, forceResolution = false) {\n    const seenItem = refs.seen.get(def);\n    if (refs.override) {\n        const overrideResult = refs.override?.(def, refs, seenItem, forceResolution);\n        if (overrideResult !== ignoreOverride) {\n            return overrideResult;\n        }\n    }\n    if (seenItem && !forceResolution) {\n        const seenSchema = get$ref(seenItem, refs);\n        if (seenSchema !== undefined) {\n            return seenSchema;\n        }\n    }\n    const newItem = { def, path: refs.currentPath, jsonSchema: undefined };\n    refs.seen.set(def, newItem);\n    const jsonSchemaOrGetter = selectParser(def, def.typeName, refs);\n    // If the return was a function, then the inner definition needs to be extracted before a call to parseDef (recursive)\n    const jsonSchema = typeof jsonSchemaOrGetter === \"function\"\n        ? parseDef(jsonSchemaOrGetter(), refs)\n        : jsonSchemaOrGetter;\n    if (jsonSchema) {\n        addMeta(def, refs, jsonSchema);\n    }\n    if (refs.postProcess) {\n        const postProcessResult = refs.postProcess(jsonSchema, def, refs);\n        newItem.jsonSchema = jsonSchema;\n        return postProcessResult;\n    }\n    newItem.jsonSchema = jsonSchema;\n    return jsonSchema;\n}\nconst get$ref = (item, refs) => {\n    switch (refs.$refStrategy) {\n        case \"root\":\n            return { $ref: item.path.join(\"/\") };\n        case \"relative\":\n            return { $ref: getRelativePath(refs.currentPath, item.path) };\n        case \"none\":\n        case \"seen\": {\n            if (item.path.length < refs.currentPath.length &&\n                item.path.every((value, index) => refs.currentPath[index] === value)) {\n                console.warn(`Recursive reference detected at ${refs.currentPath.join(\"/\")}! Defaulting to any`);\n                return parseAnyDef(refs);\n            }\n            return refs.$refStrategy === \"seen\" ? parseAnyDef(refs) : undefined;\n        }\n    }\n};\nconst addMeta = (def, refs, jsonSchema) => {\n    if (def.description) {\n        jsonSchema.description = def.description;\n        if (refs.markdownDescription) {\n            jsonSchema.markdownDescription = def.description;\n        }\n    }\n    return jsonSchema;\n};\n","import { parseDef } from \"./parseDef.js\";\nimport { getRefs } from \"./Refs.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nconst zodToJsonSchema = (schema, options) => {\n    const refs = getRefs(options);\n    let definitions = typeof options === \"object\" && options.definitions\n        ? Object.entries(options.definitions).reduce((acc, [name, schema]) => ({\n            ...acc,\n            [name]: parseDef(schema._def, {\n                ...refs,\n                currentPath: [...refs.basePath, refs.definitionPath, name],\n            }, true) ?? parseAnyDef(refs),\n        }), {})\n        : undefined;\n    const name = typeof options === \"string\"\n        ? options\n        : options?.nameStrategy === \"title\"\n            ? undefined\n            : options?.name;\n    const main = parseDef(schema._def, name === undefined\n        ? refs\n        : {\n            ...refs,\n            currentPath: [...refs.basePath, refs.definitionPath, name],\n        }, false) ?? parseAnyDef(refs);\n    const title = typeof options === \"object\" &&\n        options.name !== undefined &&\n        options.nameStrategy === \"title\"\n        ? options.name\n        : undefined;\n    if (title !== undefined) {\n        main.title = title;\n    }\n    if (refs.flags.hasReferencedOpenAiAnyType) {\n        if (!definitions) {\n            definitions = {};\n        }\n        if (!definitions[refs.openAiAnyTypeName]) {\n            definitions[refs.openAiAnyTypeName] = {\n                // Skipping \"object\" as no properties can be defined and additionalProperties must be \"false\"\n                type: [\"string\", \"number\", \"integer\", \"boolean\", \"array\", \"null\"],\n                items: {\n                    $ref: refs.$refStrategy === \"relative\"\n                        ? \"1\"\n                        : [\n                            ...refs.basePath,\n                            refs.definitionPath,\n                            refs.openAiAnyTypeName,\n                        ].join(\"/\"),\n                },\n            };\n        }\n    }\n    const combined = name === undefined\n        ? definitions\n            ? {\n                ...main,\n                [refs.definitionPath]: definitions,\n            }\n            : main\n        : {\n            $ref: [\n                ...(refs.$refStrategy === \"relative\" ? [] : refs.basePath),\n                refs.definitionPath,\n                name,\n            ].join(\"/\"),\n            [refs.definitionPath]: {\n                ...definitions,\n                [name]: main,\n            },\n        };\n    if (refs.target === \"jsonSchema7\") {\n        combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n    }\n    else if (refs.target === \"jsonSchema2019-09\" || refs.target === \"openAi\") {\n        combined.$schema = \"https://json-schema.org/draft/2019-09/schema#\";\n    }\n    if (refs.target === \"openAi\" &&\n        (\"anyOf\" in combined ||\n            \"oneOf\" in combined ||\n            \"allOf\" in combined ||\n            (\"type\" in combined && Array.isArray(combined.type)))) {\n        console.warn(\"Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.\");\n    }\n    return combined;\n};\nexport { zodToJsonSchema };\n","import { ZodType, } from \"zod\";\nexport var McpZodTypeKind;\n(function (McpZodTypeKind) {\n    McpZodTypeKind[\"Completable\"] = \"McpCompletable\";\n})(McpZodTypeKind || (McpZodTypeKind = {}));\nexport class Completable extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nCompletable.create = (type, params) => {\n    return new Completable({\n        type,\n        typeName: McpZodTypeKind.Completable,\n        complete: params.complete,\n        ...processCreateParams(params),\n    });\n};\n/**\n * Wraps a Zod type to provide autocompletion capabilities. Useful for, e.g., prompt arguments in MCP.\n */\nexport function completable(schema, complete) {\n    return Completable.create(schema, { ...schema._def, complete });\n}\n// Not sure why this isn't exported from Zod:\n// https://github.com/colinhacks/zod/blob/f7ad26147ba291cb3fb257545972a8e00e767470/src/types.ts#L130\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        var _a, _b;\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message !== null && message !== void 0 ? message : ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\n//# sourceMappingURL=completable.js.map","import { Server } from \"./index.js\";\nimport { zodToJsonSchema } from \"zod-to-json-schema\";\nimport { z, } from \"zod\";\nimport { McpError, ErrorCode, ListResourceTemplatesRequestSchema, ReadResourceRequestSchema, ListToolsRequestSchema, CallToolRequestSchema, ListResourcesRequestSchema, ListPromptsRequestSchema, GetPromptRequestSchema, CompleteRequestSchema, } from \"../types.js\";\nimport { Completable } from \"./completable.js\";\nimport { UriTemplate } from \"../shared/uriTemplate.js\";\n/**\n * High-level MCP server that provides a simpler API for working with resources, tools, and prompts.\n * For advanced usage (like sending notifications or setting custom request handlers), use the underlying\n * Server instance available via the `server` property.\n */\nexport class McpServer {\n    constructor(serverInfo, options) {\n        this._registeredResources = {};\n        this._registeredResourceTemplates = {};\n        this._registeredTools = {};\n        this._registeredPrompts = {};\n        this._toolHandlersInitialized = false;\n        this._completionHandlerInitialized = false;\n        this._resourceHandlersInitialized = false;\n        this._promptHandlersInitialized = false;\n        this.server = new Server(serverInfo, options);\n    }\n    /**\n     * Attaches to the given transport, starts it, and starts listening for messages.\n     *\n     * The `server` object assumes ownership of the Transport, replacing any callbacks that have already been set, and expects that it is the only user of the Transport instance going forward.\n     */\n    async connect(transport) {\n        return await this.server.connect(transport);\n    }\n    /**\n     * Closes the connection.\n     */\n    async close() {\n        await this.server.close();\n    }\n    setToolRequestHandlers() {\n        if (this._toolHandlersInitialized) {\n            return;\n        }\n        this.server.assertCanSetRequestHandler(ListToolsRequestSchema.shape.method.value);\n        this.server.assertCanSetRequestHandler(CallToolRequestSchema.shape.method.value);\n        this.server.registerCapabilities({\n            tools: {\n                listChanged: true\n            }\n        });\n        this.server.setRequestHandler(ListToolsRequestSchema, () => ({\n            tools: Object.entries(this._registeredTools).filter(([, tool]) => tool.enabled).map(([name, tool]) => {\n                const toolDefinition = {\n                    name,\n                    title: tool.title,\n                    description: tool.description,\n                    inputSchema: tool.inputSchema\n                        ? zodToJsonSchema(tool.inputSchema, {\n                            strictUnions: true,\n                        })\n                        : EMPTY_OBJECT_JSON_SCHEMA,\n                    annotations: tool.annotations,\n                };\n                if (tool.outputSchema) {\n                    toolDefinition.outputSchema = zodToJsonSchema(tool.outputSchema, { strictUnions: true });\n                }\n                return toolDefinition;\n            }),\n        }));\n        this.server.setRequestHandler(CallToolRequestSchema, async (request, extra) => {\n            const tool = this._registeredTools[request.params.name];\n            if (!tool) {\n                throw new McpError(ErrorCode.InvalidParams, `Tool ${request.params.name} not found`);\n            }\n            if (!tool.enabled) {\n                throw new McpError(ErrorCode.InvalidParams, `Tool ${request.params.name} disabled`);\n            }\n            let result;\n            if (tool.inputSchema) {\n                const parseResult = await tool.inputSchema.safeParseAsync(request.params.arguments);\n                if (!parseResult.success) {\n                    throw new McpError(ErrorCode.InvalidParams, `Invalid arguments for tool ${request.params.name}: ${parseResult.error.message}`);\n                }\n                const args = parseResult.data;\n                const cb = tool.callback;\n                try {\n                    result = await Promise.resolve(cb(args, extra));\n                }\n                catch (error) {\n                    result = {\n                        content: [\n                            {\n                                type: \"text\",\n                                text: error instanceof Error ? error.message : String(error),\n                            },\n                        ],\n                        isError: true,\n                    };\n                }\n            }\n            else {\n                const cb = tool.callback;\n                try {\n                    result = await Promise.resolve(cb(extra));\n                }\n                catch (error) {\n                    result = {\n                        content: [\n                            {\n                                type: \"text\",\n                                text: error instanceof Error ? error.message : String(error),\n                            },\n                        ],\n                        isError: true,\n                    };\n                }\n            }\n            if (tool.outputSchema && !result.isError) {\n                if (!result.structuredContent) {\n                    throw new McpError(ErrorCode.InvalidParams, `Tool ${request.params.name} has an output schema but no structured content was provided`);\n                }\n                // if the tool has an output schema, validate structured content\n                const parseResult = await tool.outputSchema.safeParseAsync(result.structuredContent);\n                if (!parseResult.success) {\n                    throw new McpError(ErrorCode.InvalidParams, `Invalid structured content for tool ${request.params.name}: ${parseResult.error.message}`);\n                }\n            }\n            return result;\n        });\n        this._toolHandlersInitialized = true;\n    }\n    setCompletionRequestHandler() {\n        if (this._completionHandlerInitialized) {\n            return;\n        }\n        this.server.assertCanSetRequestHandler(CompleteRequestSchema.shape.method.value);\n        this.server.registerCapabilities({\n            completions: {},\n        });\n        this.server.setRequestHandler(CompleteRequestSchema, async (request) => {\n            switch (request.params.ref.type) {\n                case \"ref/prompt\":\n                    return this.handlePromptCompletion(request, request.params.ref);\n                case \"ref/resource\":\n                    return this.handleResourceCompletion(request, request.params.ref);\n                default:\n                    throw new McpError(ErrorCode.InvalidParams, `Invalid completion reference: ${request.params.ref}`);\n            }\n        });\n        this._completionHandlerInitialized = true;\n    }\n    async handlePromptCompletion(request, ref) {\n        const prompt = this._registeredPrompts[ref.name];\n        if (!prompt) {\n            throw new McpError(ErrorCode.InvalidParams, `Prompt ${ref.name} not found`);\n        }\n        if (!prompt.enabled) {\n            throw new McpError(ErrorCode.InvalidParams, `Prompt ${ref.name} disabled`);\n        }\n        if (!prompt.argsSchema) {\n            return EMPTY_COMPLETION_RESULT;\n        }\n        const field = prompt.argsSchema.shape[request.params.argument.name];\n        if (!(field instanceof Completable)) {\n            return EMPTY_COMPLETION_RESULT;\n        }\n        const def = field._def;\n        const suggestions = await def.complete(request.params.argument.value, request.params.context);\n        return createCompletionResult(suggestions);\n    }\n    async handleResourceCompletion(request, ref) {\n        const template = Object.values(this._registeredResourceTemplates).find((t) => t.resourceTemplate.uriTemplate.toString() === ref.uri);\n        if (!template) {\n            if (this._registeredResources[ref.uri]) {\n                // Attempting to autocomplete a fixed resource URI is not an error in the spec (but probably should be).\n                return EMPTY_COMPLETION_RESULT;\n            }\n            throw new McpError(ErrorCode.InvalidParams, `Resource template ${request.params.ref.uri} not found`);\n        }\n        const completer = template.resourceTemplate.completeCallback(request.params.argument.name);\n        if (!completer) {\n            return EMPTY_COMPLETION_RESULT;\n        }\n        const suggestions = await completer(request.params.argument.value, request.params.context);\n        return createCompletionResult(suggestions);\n    }\n    setResourceRequestHandlers() {\n        if (this._resourceHandlersInitialized) {\n            return;\n        }\n        this.server.assertCanSetRequestHandler(ListResourcesRequestSchema.shape.method.value);\n        this.server.assertCanSetRequestHandler(ListResourceTemplatesRequestSchema.shape.method.value);\n        this.server.assertCanSetRequestHandler(ReadResourceRequestSchema.shape.method.value);\n        this.server.registerCapabilities({\n            resources: {\n                listChanged: true\n            }\n        });\n        this.server.setRequestHandler(ListResourcesRequestSchema, async (request, extra) => {\n            const resources = Object.entries(this._registeredResources).filter(([_, resource]) => resource.enabled).map(([uri, resource]) => ({\n                uri,\n                name: resource.name,\n                ...resource.metadata,\n            }));\n            const templateResources = [];\n            for (const template of Object.values(this._registeredResourceTemplates)) {\n                if (!template.resourceTemplate.listCallback) {\n                    continue;\n                }\n                const result = await template.resourceTemplate.listCallback(extra);\n                for (const resource of result.resources) {\n                    templateResources.push({\n                        ...template.metadata,\n                        // the defined resource metadata should override the template metadata if present\n                        ...resource,\n                    });\n                }\n            }\n            return { resources: [...resources, ...templateResources] };\n        });\n        this.server.setRequestHandler(ListResourceTemplatesRequestSchema, async () => {\n            const resourceTemplates = Object.entries(this._registeredResourceTemplates).map(([name, template]) => ({\n                name,\n                uriTemplate: template.resourceTemplate.uriTemplate.toString(),\n                ...template.metadata,\n            }));\n            return { resourceTemplates };\n        });\n        this.server.setRequestHandler(ReadResourceRequestSchema, async (request, extra) => {\n            const uri = new URL(request.params.uri);\n            // First check for exact resource match\n            const resource = this._registeredResources[uri.toString()];\n            if (resource) {\n                if (!resource.enabled) {\n                    throw new McpError(ErrorCode.InvalidParams, `Resource ${uri} disabled`);\n                }\n                return resource.readCallback(uri, extra);\n            }\n            // Then check templates\n            for (const template of Object.values(this._registeredResourceTemplates)) {\n                const variables = template.resourceTemplate.uriTemplate.match(uri.toString());\n                if (variables) {\n                    return template.readCallback(uri, variables, extra);\n                }\n            }\n            throw new McpError(ErrorCode.InvalidParams, `Resource ${uri} not found`);\n        });\n        this.setCompletionRequestHandler();\n        this._resourceHandlersInitialized = true;\n    }\n    setPromptRequestHandlers() {\n        if (this._promptHandlersInitialized) {\n            return;\n        }\n        this.server.assertCanSetRequestHandler(ListPromptsRequestSchema.shape.method.value);\n        this.server.assertCanSetRequestHandler(GetPromptRequestSchema.shape.method.value);\n        this.server.registerCapabilities({\n            prompts: {\n                listChanged: true\n            }\n        });\n        this.server.setRequestHandler(ListPromptsRequestSchema, () => ({\n            prompts: Object.entries(this._registeredPrompts).filter(([, prompt]) => prompt.enabled).map(([name, prompt]) => {\n                return {\n                    name,\n                    title: prompt.title,\n                    description: prompt.description,\n                    arguments: prompt.argsSchema\n                        ? promptArgumentsFromSchema(prompt.argsSchema)\n                        : undefined,\n                };\n            }),\n        }));\n        this.server.setRequestHandler(GetPromptRequestSchema, async (request, extra) => {\n            const prompt = this._registeredPrompts[request.params.name];\n            if (!prompt) {\n                throw new McpError(ErrorCode.InvalidParams, `Prompt ${request.params.name} not found`);\n            }\n            if (!prompt.enabled) {\n                throw new McpError(ErrorCode.InvalidParams, `Prompt ${request.params.name} disabled`);\n            }\n            if (prompt.argsSchema) {\n                const parseResult = await prompt.argsSchema.safeParseAsync(request.params.arguments);\n                if (!parseResult.success) {\n                    throw new McpError(ErrorCode.InvalidParams, `Invalid arguments for prompt ${request.params.name}: ${parseResult.error.message}`);\n                }\n                const args = parseResult.data;\n                const cb = prompt.callback;\n                return await Promise.resolve(cb(args, extra));\n            }\n            else {\n                const cb = prompt.callback;\n                return await Promise.resolve(cb(extra));\n            }\n        });\n        this.setCompletionRequestHandler();\n        this._promptHandlersInitialized = true;\n    }\n    resource(name, uriOrTemplate, ...rest) {\n        let metadata;\n        if (typeof rest[0] === \"object\") {\n            metadata = rest.shift();\n        }\n        const readCallback = rest[0];\n        if (typeof uriOrTemplate === \"string\") {\n            if (this._registeredResources[uriOrTemplate]) {\n                throw new Error(`Resource ${uriOrTemplate} is already registered`);\n            }\n            const registeredResource = this._createRegisteredResource(name, undefined, uriOrTemplate, metadata, readCallback);\n            this.setResourceRequestHandlers();\n            this.sendResourceListChanged();\n            return registeredResource;\n        }\n        else {\n            if (this._registeredResourceTemplates[name]) {\n                throw new Error(`Resource template ${name} is already registered`);\n            }\n            const registeredResourceTemplate = this._createRegisteredResourceTemplate(name, undefined, uriOrTemplate, metadata, readCallback);\n            this.setResourceRequestHandlers();\n            this.sendResourceListChanged();\n            return registeredResourceTemplate;\n        }\n    }\n    registerResource(name, uriOrTemplate, config, readCallback) {\n        if (typeof uriOrTemplate === \"string\") {\n            if (this._registeredResources[uriOrTemplate]) {\n                throw new Error(`Resource ${uriOrTemplate} is already registered`);\n            }\n            const registeredResource = this._createRegisteredResource(name, config.title, uriOrTemplate, config, readCallback);\n            this.setResourceRequestHandlers();\n            this.sendResourceListChanged();\n            return registeredResource;\n        }\n        else {\n            if (this._registeredResourceTemplates[name]) {\n                throw new Error(`Resource template ${name} is already registered`);\n            }\n            const registeredResourceTemplate = this._createRegisteredResourceTemplate(name, config.title, uriOrTemplate, config, readCallback);\n            this.setResourceRequestHandlers();\n            this.sendResourceListChanged();\n            return registeredResourceTemplate;\n        }\n    }\n    _createRegisteredResource(name, title, uri, metadata, readCallback) {\n        const registeredResource = {\n            name,\n            title,\n            metadata,\n            readCallback,\n            enabled: true,\n            disable: () => registeredResource.update({ enabled: false }),\n            enable: () => registeredResource.update({ enabled: true }),\n            remove: () => registeredResource.update({ uri: null }),\n            update: (updates) => {\n                if (typeof updates.uri !== \"undefined\" && updates.uri !== uri) {\n                    delete this._registeredResources[uri];\n                    if (updates.uri)\n                        this._registeredResources[updates.uri] = registeredResource;\n                }\n                if (typeof updates.name !== \"undefined\")\n                    registeredResource.name = updates.name;\n                if (typeof updates.title !== \"undefined\")\n                    registeredResource.title = updates.title;\n                if (typeof updates.metadata !== \"undefined\")\n                    registeredResource.metadata = updates.metadata;\n                if (typeof updates.callback !== \"undefined\")\n                    registeredResource.readCallback = updates.callback;\n                if (typeof updates.enabled !== \"undefined\")\n                    registeredResource.enabled = updates.enabled;\n                this.sendResourceListChanged();\n            },\n        };\n        this._registeredResources[uri] = registeredResource;\n        return registeredResource;\n    }\n    _createRegisteredResourceTemplate(name, title, template, metadata, readCallback) {\n        const registeredResourceTemplate = {\n            resourceTemplate: template,\n            title,\n            metadata,\n            readCallback,\n            enabled: true,\n            disable: () => registeredResourceTemplate.update({ enabled: false }),\n            enable: () => registeredResourceTemplate.update({ enabled: true }),\n            remove: () => registeredResourceTemplate.update({ name: null }),\n            update: (updates) => {\n                if (typeof updates.name !== \"undefined\" && updates.name !== name) {\n                    delete this._registeredResourceTemplates[name];\n                    if (updates.name)\n                        this._registeredResourceTemplates[updates.name] = registeredResourceTemplate;\n                }\n                if (typeof updates.title !== \"undefined\")\n                    registeredResourceTemplate.title = updates.title;\n                if (typeof updates.template !== \"undefined\")\n                    registeredResourceTemplate.resourceTemplate = updates.template;\n                if (typeof updates.metadata !== \"undefined\")\n                    registeredResourceTemplate.metadata = updates.metadata;\n                if (typeof updates.callback !== \"undefined\")\n                    registeredResourceTemplate.readCallback = updates.callback;\n                if (typeof updates.enabled !== \"undefined\")\n                    registeredResourceTemplate.enabled = updates.enabled;\n                this.sendResourceListChanged();\n            },\n        };\n        this._registeredResourceTemplates[name] = registeredResourceTemplate;\n        return registeredResourceTemplate;\n    }\n    _createRegisteredPrompt(name, title, description, argsSchema, callback) {\n        const registeredPrompt = {\n            title,\n            description,\n            argsSchema: argsSchema === undefined ? undefined : z.object(argsSchema),\n            callback,\n            enabled: true,\n            disable: () => registeredPrompt.update({ enabled: false }),\n            enable: () => registeredPrompt.update({ enabled: true }),\n            remove: () => registeredPrompt.update({ name: null }),\n            update: (updates) => {\n                if (typeof updates.name !== \"undefined\" && updates.name !== name) {\n                    delete this._registeredPrompts[name];\n                    if (updates.name)\n                        this._registeredPrompts[updates.name] = registeredPrompt;\n                }\n                if (typeof updates.title !== \"undefined\")\n                    registeredPrompt.title = updates.title;\n                if (typeof updates.description !== \"undefined\")\n                    registeredPrompt.description = updates.description;\n                if (typeof updates.argsSchema !== \"undefined\")\n                    registeredPrompt.argsSchema = z.object(updates.argsSchema);\n                if (typeof updates.callback !== \"undefined\")\n                    registeredPrompt.callback = updates.callback;\n                if (typeof updates.enabled !== \"undefined\")\n                    registeredPrompt.enabled = updates.enabled;\n                this.sendPromptListChanged();\n            },\n        };\n        this._registeredPrompts[name] = registeredPrompt;\n        return registeredPrompt;\n    }\n    _createRegisteredTool(name, title, description, inputSchema, outputSchema, annotations, callback) {\n        const registeredTool = {\n            title,\n            description,\n            inputSchema: inputSchema === undefined ? undefined : z.object(inputSchema),\n            outputSchema: outputSchema === undefined ? undefined : z.object(outputSchema),\n            annotations,\n            callback,\n            enabled: true,\n            disable: () => registeredTool.update({ enabled: false }),\n            enable: () => registeredTool.update({ enabled: true }),\n            remove: () => registeredTool.update({ name: null }),\n            update: (updates) => {\n                if (typeof updates.name !== \"undefined\" && updates.name !== name) {\n                    delete this._registeredTools[name];\n                    if (updates.name)\n                        this._registeredTools[updates.name] = registeredTool;\n                }\n                if (typeof updates.title !== \"undefined\")\n                    registeredTool.title = updates.title;\n                if (typeof updates.description !== \"undefined\")\n                    registeredTool.description = updates.description;\n                if (typeof updates.paramsSchema !== \"undefined\")\n                    registeredTool.inputSchema = z.object(updates.paramsSchema);\n                if (typeof updates.callback !== \"undefined\")\n                    registeredTool.callback = updates.callback;\n                if (typeof updates.annotations !== \"undefined\")\n                    registeredTool.annotations = updates.annotations;\n                if (typeof updates.enabled !== \"undefined\")\n                    registeredTool.enabled = updates.enabled;\n                this.sendToolListChanged();\n            },\n        };\n        this._registeredTools[name] = registeredTool;\n        this.setToolRequestHandlers();\n        this.sendToolListChanged();\n        return registeredTool;\n    }\n    /**\n     * tool() implementation. Parses arguments passed to overrides defined above.\n     */\n    tool(name, ...rest) {\n        if (this._registeredTools[name]) {\n            throw new Error(`Tool ${name} is already registered`);\n        }\n        let description;\n        let inputSchema;\n        let outputSchema;\n        let annotations;\n        // Tool properties are passed as separate arguments, with omissions allowed.\n        // Support for this style is frozen as of protocol version 2025-03-26. Future additions\n        // to tool definition should *NOT* be added.\n        if (typeof rest[0] === \"string\") {\n            description = rest.shift();\n        }\n        // Handle the different overload combinations\n        if (rest.length > 1) {\n            // We have at least one more arg before the callback\n            const firstArg = rest[0];\n            if (isZodRawShape(firstArg)) {\n                // We have a params schema as the first arg\n                inputSchema = rest.shift();\n                // Check if the next arg is potentially annotations\n                if (rest.length > 1 && typeof rest[0] === \"object\" && rest[0] !== null && !(isZodRawShape(rest[0]))) {\n                    // Case: tool(name, paramsSchema, annotations, cb)\n                    // Or: tool(name, description, paramsSchema, annotations, cb)\n                    annotations = rest.shift();\n                }\n            }\n            else if (typeof firstArg === \"object\" && firstArg !== null) {\n                // Not a ZodRawShape, so must be annotations in this position\n                // Case: tool(name, annotations, cb)\n                // Or: tool(name, description, annotations, cb)\n                annotations = rest.shift();\n            }\n        }\n        const callback = rest[0];\n        return this._createRegisteredTool(name, undefined, description, inputSchema, outputSchema, annotations, callback);\n    }\n    /**\n     * Registers a tool with a config object and callback.\n     */\n    registerTool(name, config, cb) {\n        if (this._registeredTools[name]) {\n            throw new Error(`Tool ${name} is already registered`);\n        }\n        const { title, description, inputSchema, outputSchema, annotations } = config;\n        return this._createRegisteredTool(name, title, description, inputSchema, outputSchema, annotations, cb);\n    }\n    prompt(name, ...rest) {\n        if (this._registeredPrompts[name]) {\n            throw new Error(`Prompt ${name} is already registered`);\n        }\n        let description;\n        if (typeof rest[0] === \"string\") {\n            description = rest.shift();\n        }\n        let argsSchema;\n        if (rest.length > 1) {\n            argsSchema = rest.shift();\n        }\n        const cb = rest[0];\n        const registeredPrompt = this._createRegisteredPrompt(name, undefined, description, argsSchema, cb);\n        this.setPromptRequestHandlers();\n        this.sendPromptListChanged();\n        return registeredPrompt;\n    }\n    /**\n     * Registers a prompt with a config object and callback.\n     */\n    registerPrompt(name, config, cb) {\n        if (this._registeredPrompts[name]) {\n            throw new Error(`Prompt ${name} is already registered`);\n        }\n        const { title, description, argsSchema } = config;\n        const registeredPrompt = this._createRegisteredPrompt(name, title, description, argsSchema, cb);\n        this.setPromptRequestHandlers();\n        this.sendPromptListChanged();\n        return registeredPrompt;\n    }\n    /**\n     * Checks if the server is connected to a transport.\n     * @returns True if the server is connected\n     */\n    isConnected() {\n        return this.server.transport !== undefined;\n    }\n    /**\n     * Sends a resource list changed event to the client, if connected.\n     */\n    sendResourceListChanged() {\n        if (this.isConnected()) {\n            this.server.sendResourceListChanged();\n        }\n    }\n    /**\n     * Sends a tool list changed event to the client, if connected.\n     */\n    sendToolListChanged() {\n        if (this.isConnected()) {\n            this.server.sendToolListChanged();\n        }\n    }\n    /**\n     * Sends a prompt list changed event to the client, if connected.\n     */\n    sendPromptListChanged() {\n        if (this.isConnected()) {\n            this.server.sendPromptListChanged();\n        }\n    }\n}\n/**\n * A resource template combines a URI pattern with optional functionality to enumerate\n * all resources matching that pattern.\n */\nexport class ResourceTemplate {\n    constructor(uriTemplate, _callbacks) {\n        this._callbacks = _callbacks;\n        this._uriTemplate =\n            typeof uriTemplate === \"string\"\n                ? new UriTemplate(uriTemplate)\n                : uriTemplate;\n    }\n    /**\n     * Gets the URI template pattern.\n     */\n    get uriTemplate() {\n        return this._uriTemplate;\n    }\n    /**\n     * Gets the list callback, if one was provided.\n     */\n    get listCallback() {\n        return this._callbacks.list;\n    }\n    /**\n     * Gets the callback for completing a specific URI template variable, if one was provided.\n     */\n    completeCallback(variable) {\n        var _a;\n        return (_a = this._callbacks.complete) === null || _a === void 0 ? void 0 : _a[variable];\n    }\n}\nconst EMPTY_OBJECT_JSON_SCHEMA = {\n    type: \"object\",\n    properties: {},\n};\n// Helper to check if an object is a Zod schema (ZodRawShape)\nfunction isZodRawShape(obj) {\n    if (typeof obj !== \"object\" || obj === null)\n        return false;\n    const isEmptyObject = Object.keys(obj).length === 0;\n    // Check if object is empty or at least one property is a ZodType instance\n    // Note: use heuristic check to avoid instanceof failure across different Zod versions\n    return isEmptyObject || Object.values(obj).some(isZodTypeLike);\n}\nfunction isZodTypeLike(value) {\n    return value !== null &&\n        typeof value === 'object' &&\n        'parse' in value && typeof value.parse === 'function' &&\n        'safeParse' in value && typeof value.safeParse === 'function';\n}\nfunction promptArgumentsFromSchema(schema) {\n    return Object.entries(schema.shape).map(([name, field]) => ({\n        name,\n        description: field.description,\n        required: !field.isOptional(),\n    }));\n}\nfunction createCompletionResult(suggestions) {\n    return {\n        completion: {\n            values: suggestions.slice(0, 100),\n            total: suggestions.length,\n            hasMore: suggestions.length > 100,\n        },\n    };\n}\nconst EMPTY_COMPLETION_RESULT = {\n    completion: {\n        values: [],\n        hasMore: false,\n    },\n};\n//# sourceMappingURL=mcp.js.map","import type { IState, ToolItem } from './type'\nimport type { ZodRawShape } from 'zod'\nimport type { ToolCallback } from '@modelcontextprotocol/sdk/server/mcp.d.ts'\nimport type { ToolAnnotations } from '@modelcontextprotocol/sdk/types.d.ts'\n\nconst logger = console\n\n// 定义 UpdateToolConfig 接口\nexport interface UpdateToolConfig {\n  title?: string | undefined\n  description?: string | undefined\n  paramsSchema?: ZodRawShape | undefined\n  outputSchema?: ZodRawShape | undefined\n  annotations?: ToolAnnotations | undefined\n  callback?: ToolCallback<ZodRawShape>\n  enabled?: boolean\n}\n\nexport const getToolList = (state: IState) => {\n  return state.toolList.map((toolItem) => {\n    const toolInstance = state.toolInstanceMap.get(toolItem.name)\n\n    return {\n      ...toolItem,\n      status: toolInstance ? (toolInstance.enabled ? 'enabled' : 'disabled') : 'not_registered'\n    }\n  })\n}\n\nexport const getToolByName = (state: IState, name: string) => {\n  const toolItem = state.toolList.find((tool) => tool.name === name)\n\n  if (!toolItem) {\n    return null\n  }\n\n  const toolInstance = state.toolInstanceMap.get(name)\n\n  return { ...toolItem, status: toolInstance ? (toolInstance.enabled ? 'enabled' : 'disabled') : 'not_registered' }\n}\n\nexport const getToolInstance = (state: IState, name: string) => {\n  return state.toolInstanceMap.get(name)\n}\n\nexport const registerTools = (state: IState, tools: ToolItem[]) => {\n  if (!Array.isArray(tools) || !tools.length) {\n    return\n  }\n\n  if (!state.server) {\n    logger.error('mcp server is not created')\n    return\n  }\n\n  const toolInstances = tools.map((tool) => {\n    const { name, callback, ...restConfig } = tool\n\n    const toolInstance = state.server?.registerTool(name, restConfig, callback as ToolCallback<ZodRawShape>)\n\n    if (toolInstance) {\n      state.toolInstanceMap.set(name, toolInstance)\n    }\n\n    return toolInstance\n  })\n\n  return toolInstances\n}\n\nexport const enableTool = (state: IState, name: string) => {\n  const toolInstance = state.toolInstanceMap.get(name)\n\n  if (toolInstance) {\n    toolInstance.enable()\n  }\n}\n\nexport const disableTool = (state: IState, name: string) => {\n  const toolInstance = state.toolInstanceMap.get(name)\n\n  if (toolInstance) {\n    toolInstance.disable()\n  }\n}\n\nexport const removeTool = (state: IState, name: string) => {\n  const toolInstance = state.toolInstanceMap.get(name)\n\n  if (toolInstance) {\n    toolInstance.remove()\n    state.toolInstanceMap.delete(name)\n  }\n}\n\nexport const updateTool = (state: IState, name: string, config?: UpdateToolConfig) => {\n  const toolInstance = state.toolInstanceMap.get(name)\n\n  if (toolInstance) {\n    toolInstance.update({ name, ...(config || {}) })\n  }\n}\n","import { useMessage, defineService, META_SERVICE, getAllMergeMeta } from '@opentiny/tiny-engine-meta-register'\nimport { Client } from '@modelcontextprotocol/sdk/client/index.js'\nimport { createTransportPair, createStreamProxy } from '@opentiny/next'\nimport { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js'\nimport type { ToolCallback } from '@modelcontextprotocol/sdk/server/mcp.d.ts'\nimport type { ZodRawShape } from 'zod'\nimport type { IState, ToolItem, ServerConnectionStatus } from './type'\nimport { registerTools, getToolList, getToolByName, removeTool, updateTool, type UpdateToolConfig } from './toolUtils'\nimport { toRaw } from 'vue'\n\nconst logger = console\n\nexport type { IState, ToolItem, UpdateToolConfig }\n\ninterface IOptions {\n  agentServer: {\n    url: string | null\n    token: string | null\n    connectToAgentServer: boolean\n    reconnectAttempts?: number\n    reconnectInterval?: number\n  }\n}\n\n// 定义 MCP Server 的能力\nconst capabilities = {\n  prompts: { listChanged: true },\n  resources: { subscribe: true, listChanged: true },\n  tools: { listChanged: true },\n  completions: {},\n  logging: {}\n}\n\nconst initialState: IState = {\n  mcpServer: {\n    transport: null,\n    capabilities\n  },\n  server: null,\n  sessionID: '',\n  remoteTransport: null,\n  toolList: [],\n  toolInstanceMap: new Map(),\n  mcpClient: null,\n  serverConnectionStatus: 'disconnected'\n}\n\nconst updateServerConnectionStatus = (state: IState, status: ServerConnectionStatus, error?: Error) => {\n  state.serverConnectionStatus = status\n\n  const { publish } = useMessage()\n  publish({ topic: 'serverConnectionStatusChanged', data: { status, error } })\n}\n\n// 关闭 streamableHTTP 的 transport\nconst closeTransport = async (state: IState) => {\n  if (!state.remoteTransport) {\n    return\n  }\n\n  if (['disconnected', 'disconnecting'].includes(state.serverConnectionStatus)) {\n    return\n  }\n\n  try {\n    updateServerConnectionStatus(state, 'disconnecting')\n    await state.remoteTransport.terminateSession()\n    updateServerConnectionStatus(state, 'disconnected')\n  } catch (error) {\n    updateServerConnectionStatus(state, 'error', error as Error)\n  }\n}\n\nconst connectToRemoteServer = async (state: IState, options: IOptions, client: Client, attempts: number = 0) => {\n  const {\n    reconnectAttempts = 3,\n    reconnectInterval = 1000,\n    url = '',\n    token = '',\n    connectToAgentServer = false\n  } = options.agentServer || {}\n\n  if (['connected', 'connecting'].includes(state.serverConnectionStatus) || !connectToAgentServer) {\n    return\n  }\n\n  if (!url) {\n    throw new Error('agent server url is required')\n  }\n\n  const handleClose = () => closeTransport(state)\n\n  try {\n    window.removeEventListener('beforeunload', handleClose)\n    updateServerConnectionStatus(state, 'connecting')\n    const exitSessionId = sessionStorage.getItem('mcp-session-id') || ''\n\n    // 把量子纠缠的 client 客户端通过 StreamableHTTP 代理传递给后端服务，创建孪生 client\n    const { transport: streamTransport, sessionId } = await createStreamProxy({\n      client,\n      url,\n      token: token || '',\n      sessionId: exitSessionId\n    })\n\n    updateServerConnectionStatus(state, 'connected')\n\n    sessionStorage.setItem('mcp-session-id', sessionId)\n\n    state.sessionID = sessionId\n    state.remoteTransport = streamTransport\n    window.addEventListener('beforeunload', handleClose)\n  } catch (error) {\n    if (attempts < reconnectAttempts) {\n      await new Promise((resolve) => setTimeout(resolve, reconnectInterval))\n      await connectToRemoteServer(state, options, client, attempts + 1)\n    } else {\n      updateServerConnectionStatus(state, 'error', error as Error)\n    }\n  }\n}\n\nconst reconnectToRemoteServer = async (state: IState, options: IOptions) => {\n  await closeTransport(state)\n  await connectToRemoteServer(state, options, state.mcpClient as Client)\n}\n\nconst createStreamServerTransport = async (state: IState, options: IOptions) => {\n  // 在非 iframe 嵌入的模式下，使用量子纠缠的 transport\n  const [transport, clientTransport] = createTransportPair()\n\n  state.mcpServer.transport = transport\n\n  const capabilities = {\n    roots: { listChanged: true },\n    sampling: {}\n  }\n  const client = new Client({ name: 'tiny-engine-mcp-client', version: '1.0.0' }, { capabilities })\n\n  await client.connect(clientTransport)\n\n  state.mcpClient = client\n\n  await connectToRemoteServer(state, options, client)\n}\n\nconst createMcpServer = async (state: IState) => {\n  const { transport, capabilities } = state.mcpServer\n\n  if (!transport) {\n    throw new Error('transport is not available')\n  }\n\n  const server = new McpServer(\n    {\n      name: 'tiny-engine-mcp-server',\n      version: '1.0.0'\n    },\n    {\n      capabilities\n    }\n  )\n\n  // server._setupTimeout = () => {}\n\n  state.toolList.forEach((tool) => {\n    const { name, callback, inputSchema, outputSchema, ...restConfig } = tool\n\n    try {\n      if (state.toolInstanceMap.has(name)) {\n        logger.error(`tool ${name} already registered`)\n        return\n      }\n\n      if (!name || typeof name !== 'string') {\n        logger.error('tool name is required and must be a string')\n        return\n      }\n\n      if (!callback || typeof callback !== 'function') {\n        logger.error('tool callback is required and must be a function')\n        return\n      }\n\n      const toolInstance = server.registerTool(\n        name,\n        // 需要序列化一次，否则 list tool 会超时，因为有 proxy 之后，内部会报错\n        {\n          ...JSON.parse(JSON.stringify(restConfig)),\n          inputSchema,\n          outputSchema\n        },\n        callback as ToolCallback<ZodRawShape>\n      )\n\n      state.toolInstanceMap.set(name, toolInstance)\n    } catch (error) {\n      logger.error('error when register tool', error)\n    }\n  })\n\n  await server.connect(toRaw(transport))\n\n  state.server = server\n\n  const { publish } = useMessage()\n\n  publish({ topic: 'mcpServerCreated', data: server })\n}\n\nconst collectTools = (state: IState) => {\n  const allMetaData = getAllMergeMeta()\n  const tools: ToolItem[] = []\n\n  allMetaData.forEach((meta) => {\n    if (Array.isArray(meta.mcp?.tools)) {\n      tools.push(...meta.mcp.tools)\n    }\n  })\n\n  state.toolList = tools\n}\n\n// 移除未使用的 @ts-expect-error 注释\nexport default defineService<IState, IOptions>({\n  id: META_SERVICE.McpService,\n  type: 'MetaService',\n  options: {\n    agentServer: {\n      url: null,\n      token: null,\n      connectToAgentServer: false\n    }\n  },\n  initialState,\n  init: async ({ state, options }) => {\n    await createStreamServerTransport(state, options)\n\n    // 收集所有注册表中的 tools\n    collectTools(state)\n    // TODO: 支持 prompts\n    // TODO: 支持 resources\n    // TODO: 支持 Elicitation\n\n    // 创建 mcp server\n    await createMcpServer(state)\n  },\n  apis: ({ state, options }) => ({\n    getMcpServer: () => state.server,\n    getMcpClient: () => state.mcpClient,\n    getRemoteTransport: () => state.remoteTransport,\n    connectToRemoteServer: () => connectToRemoteServer(state, options, state.mcpClient as Client),\n    reconnectToRemoteServer: () => reconnectToRemoteServer(state, options),\n    closeRemoteServer: () => closeTransport(state),\n    getServerConnectionStatus: () => state.serverConnectionStatus,\n    closeTransport: () => closeTransport(state),\n    registerTools: (tools: ToolItem[]) => registerTools(state, tools),\n    getToolList: () => getToolList(state),\n    getToolByName: (name: string) => getToolByName(state, name),\n    removeTool: (name: string) => removeTool(state, name),\n    updateTool: (name: string, config?: UpdateToolConfig) => updateTool(state, name, config)\n  })\n})\n"],"names":["mergeLocaleMessage","i18n","i18nKeyMaps","enUs","zhCn","_sfc_main$L","Collapse","CollapseItem","_resolveComponent","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_tiny_collapse","_withCtx","_component_tiny_collapse_item","$props","_renderSlot","_ctx","_sfc_main$K","props","group","Object","index","Number","design","Boolean","emptyText","type","String","default","render","list","content","item","$slots","number","_a","collapse","length","propNodes","map","data","propIndex","expandItems","slice","collapseItems","expandNode","collapseNode","_createTextVNode","_sfc_main$J","Tooltip","Popover","Radio","RadioGroup","emit","getModelValueType","types","value","result","currentType","_b","defaultType","state","reactive","val","itemIndex","getConfigurator","_hoisted_2","_createElementVNode","_toDisplayString","_component_tiny_radio_group","$setup","_cache","$event","_Fragment","_renderList","_hoisted_3","_component_tiny_radio","_hoisted_4","_createBlock","_resolveDynamicComponent","generateFunction","utils","hasRule","required","rules","_sfc_main$I","MultiTypeSelector","IconWriting","IconPlusCircle","IconHelpCircle","CodeConfigurator","VariableConfigurator","t","locale","verification","computed","editorModalRef","ref","currentProperty","inject","propsObj","hidden","widget","propLabel","_c","_e","_d","multiType","isBindingState","showCodeEditIcon","showLabel","propDescription","_f","_h","_g","isLinked","component","bindValue","defaultValue","currentLanguage","language","defaultLanguage","labelPosition","updateValue","property","setProp","getSchema","useProperties","SCHEMA_DATA_TYPE","currentComponent","events","useMaterial","operateNode","isSaved","useCanvas","schema","PAGE_STATUS","useLayout","useHistory","setVerifyFailed","message","isEmptyInputValue","typeOf","TYPES","verifyRequired","verifyValue","getProp","i","rule","error","executeRelationAction","preValue","onChange","delProp","onModelUpdate","shouldUpdate","parentPath","parentData","provide","watch","showErrorPopup","isFocus","handleFocus","handleBlur","onBlur","isRelatedComponents","showBindState","_hoisted_5","_hoisted_6","_component_tiny_tooltip","_createCommentVNode","_normalizeStyle","_normalizeClass","_component_tiny_popover","_mergeProps","_vShow","_component_svg_icon","_hoisted_7","_hoisted_8","_component_icon_writing","_sfc_render","_sfc_main$G","event","EVENTS","_sfc_main$F","Button","SvgButton","ButtonGroup","iconPlus","getPluginWidth","firstPanelOffset","secondPanelAlign","alignStyle","secondAlignStyle","secondPanelOffset","watchEffect","nextTick","fullScreen","getFullScreenLabel","isFullScreen","shadowClass","_component_button_group","_component_tiny_button","args","_component_svg_button","_sfc_main$E","TinyTooltip","_sfc_main$D","$emit","_sfc_main$C","LinkButton","CloseIcon","closePanel","PLUGIN_DEFAULT_WIDTH","constants","MIN_WIDTH","MAX_WIDTH","panel","startX","startWidth","rafId","isCollapsed","settingIcon","panelState","fixPanel","headerBottomLine","changePluginWidth","getPluginByLayout","changeMoveDragBarState","isPanelWidthResizable","align","panelWidth","isLeftResizer","isRightResizer","isWidthResizable","updateWidth","newWidth","onMouseMoveRight","onMouseMoveLeft","throttledMouseMoveRight","useThrottleFn","throttledMouseMoveLeft","leftResizer","rightResizer","onMouseUpRight","onMouseDownRight","onMouseUpLeft","onMouseDownLeft","initResizerDOM","leftEl","rightEl","clickCollapseIcon","onMounted","_component_link_button","_component_close_icon","_sfc_main","getPluginShown","changePluginShown","changeMenuShown","pluginGroupPosition","contextMenu","contextMenuWidth","showContextMenu","x","y","position","windowHeight","pluginMenuPanel","menuHeight","spaceBelow","hideContextMenu","hidePlugin","switchAlign","hideSidebar","changeShowState","pluginName","handleClickOutside","onBeforeUnmount","_sfc_main$A","ConfigGroup","ConfigItem","activeNames","getPropsObj","obj","node","onPropClick","onGroupClick","filterActiveGroup","properties","groupIndex","_component_config_group","_component_config_item","_createSlots","_sfc_main$z","Form","FormItem","Input","labelList","formData","_component_tiny_form","label","_component_tiny_form_item","_component_tiny_input","_sfc_main$y","actionsItem","_sfc_main$x","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","source","key","_defineProperty","_typeof","_extends","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","version","userAgent","pattern","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","on","el","fn","off","matches","selector","getParentOrHost","closest","ctx","includeCTX","R_SPACE","toggleClass","name","className","css","prop","style","matrix","selfOnly","appliedTransforms","transform","matrixFn","find","tagName","iterator","n","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","container","elRect","top","left","bottom","right","height","width","containerRect","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","parent","getParentAutoScrollElement","elSideVal","parentSideVal","visible","getChild","childNum","options","includeDragEl","currentChild","children","Sortable","lastChild","last","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","indexOfObject","arr","includeSelf","elem","gotSelf","elemCSS","extend","dst","src","isRectEqual","rect1","rect2","_throttleTimeout","throttle","callback","ms","_this","cancelThrottle","scrollBy","clone","Polymer","$","expando","AnimationStateManager","animationStates","animationCallbackId","child","fromRect","childMatrix","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","calculateRealTime","currentRect","duration","translateX","translateY","repaint","plugins","defaults","PluginManager","plugin","option","p","eventName","sortable","evt","eventNameGlobal","initialized","modified","eventProperties","modifiedValue","dispatchEvent","_ref","rootEl","targetEl","cloneEl","toEl","fromEl","oldIndex","newIndex","oldDraggableIndex","newDraggableIndex","originalEvent","putSortable","extraEventProperties","onName","allEventProperties","_excluded","pluginEvent","dragEl","parentEl","ghostEl","nextEl","lastDownEl","cloneHidden","moved","_hideGhostForTarget","_unhideGhostForTarget","_dispatchEvent","info","activeGroup","awaitingDragStarted","ignoreNextClick","sortables","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","pastFirstInvertThresh","isCircumstantialInvert","targetMoveDistance","ghostRelativeParent","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","_detectDirection","elCSS","elWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","secondChildWidth","touchingSideChild2","_dragElInRowColumn","dragRect","targetRect","vertical","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_detectNearestEmptySortable","ret","threshold","rect","insideHorizontally","insideVertically","_prepareGroup","toFn","pull","to","from","sameGroup","otherGroup","originalGroup","nearestEmptyInsertDetectEvent","nearest","_checkOutsideTargetEl","dataTransfer","preventOnFilter","touch","originalTarget","filter","_saveInputCheckedState","criteria","ownerDocument","dragStartFn","_disableDraggable","_nextTick","fallback","inserted","fallbackTolerance","fallbackOffset","ghostMatrix","relativeScrollOffset","dx","dy","cssMatrix","revert","activeSortable","isOwner","canSort","fromSortable","completedFired","dragOverEvent","extra","completed","after","_onMove","changed","capture","insertion","elLastChild","_ghostIsLast","_ghostIsFirst","firstChild","direction","targetBeforeFirstSwap","differentLevel","differentRowCol","side1","scrolledPastTop","scrollBefore","_getSwapDirection","sibling","dragIndex","nextSibling","moveVector","_unsilent","_cancelNextTick","_globalDragOver","order","_generateId","useAnimation","items","id","store","willInsertAfter","onMoveFn","retVal","spacer","swapThreshold","invertedSwapThreshold","invertSwap","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","str","sum","root","inputs","idx","element","_len","_key","autoScrolls","scrollEl","scrollRootEl","scrolling","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","AutoScrollPlugin","AutoScroll","_ref2","clearPointerElemChangedInterval","clearAutoScrolls","autoScroll","ogElemScroller","newElem","isFallback","sens","speed","scrollThisInstance","scrollCustomFn","layersOut","currentParent","canScrollX","canScrollY","scrollWidth","scrollHeight","scrollPosX","scrollPosY","vx","vy","scrollOffsetY","scrollOffsetX","drop","dispatchSortableEvent","hideGhostForTarget","unhideGhostForTarget","toSortable","Revert","_ref3","Remove","_ref4","parentSortable","getConsole","console","cached","cache","regex","camelize","_","c","removeNode","insertNodeAt","fatherNode","refNode","computeVmIndex","vnodes","computeIndexes","slots","isTransition","footerOffset","elmFromNodes","footerIndex","elt","evtName","evtData","delegateAndEmit","isTransitionName","getComponentAttributes","$attrs","componentData","eventsListened","eventsToEmit","readonlyProperties","draggingElement","original","VueDraggableNext","defineComponent","s","attrs","h","optionsAdded","attributes","res","targetDomElement","newOptionValue","resolveComponent","htmlElt","onList","newList","spliceList","updatePosition","domIndex","indexes","numberIndexes","nodes","transitionContainer","added","removed","propertyName","onMove","relatedContext","draggedContext","futureIndex","sendEvt","htmElement","related","context","destination","domChildren","currentDOMIndex","currentIndex","_sfc_main$w","$data","$options","_Teleport","_sfc_main$v","DialogBox","MetaForm","MaskModal","iconDel","iconEdit","iconMore","iconClose","itemData","isShow","isVisible","showMask","deleteItem","editList","btnClick","action","change","confirm","closeEditOption","hide","isShowModal","cancel","formConfirm","openEdit","closeMask","_withScopeId","_pushScopeId","_popScopeId","_component_mask_modal","_component_icon_more","_component_icon_edit","_component_icon_close","_component_meta_form","_component_tiny_dialog_box","_sfc_main$u","MetaListItem","listItemOption","appSchemaState","useResource","changeItem","params","optionsList","dragEnd","editItem","typeDesc","text","i18nKey","_component_vue_draggable_next","_component_meta_list_item","modal","useModal","_sfc_main$t","closeModal","_withDirectives","_sfc_main$s","untitled","title","propsModelValue","isObject","modelValue","model_value_property","_sfc_main$r","MetaChildItem","modalState","close","propertyKey","propertyValue","newPropertyValue","_withModifiers","_component_meta_child_item","_sfc_main$q","defaultMonacoEditorTheme","globalMonacoEditorTheme","setGlobalMonacoEditorTheme","theme","_sfc_main$p","vueMonaco","monacoRef","defaultOptions","focus","getMonaco","getEditor","getModifiedEditor","getOriginalEditor","getModelMarkers","initMonaco","monaco","originalModel","modifiedModel","monacoEditor","editor2","editor","currentValue","newValue","formatString","newVal","_sfc_main$o","Split","VueMonaco","editorState","buttonLabel","titleLabel","editorTipsTitle","editorTipsDemo","EDIT_CODE_TEXT","dataType","open","parseContent","jsonData","single","Func","jsonStr","monacoInstance","_hoisted_9","_hoisted_10","$t","_component_tiny_split","_component_monaco_editor","$constants","_sfc_main$n","showDescription","classObject","closeDescription","_sfc_main$m","MetaDescription","_component_meta_description","_sfc_main$l","OPEN_DELAY","_sfc_main$k","PublicIcon","fullscreen","editorOptions","getEditorValue","getValue","formatCode","onActivated","onDeactivated","_component_public_icon","_sfc_main$i","components","TinyPopover","setup","pageState","canvasApi","addBlockProperty","removePropertyLink","getCurrentBlock","editBlockProperty","useBlock","PLUGIN_NAME","activePlugin","newPropertyName","linked","unLink","exec","currentSchema","componentProperty","addHistory","addProperty","TinyInput","componentName","getCurrent","newProperty","editProperty","assign","blockProperty","openBlockSetting","BlockManage","then","api","openSettingPanel","cacheStringFunction","capitalize","_sfc_main$h","addBlockEvent","removeEventLink","appendEventEmit","eventsList","entries","linkedEventName","addEvent","changeName","status","TinyForm","TinyFormItem","test","newEvent","metaEvent","replace","functionName","editEvent","_sfc_main$g","defaultImg","__props","__emit","handleCheck","v","_sfc_main$e","filterList","selectNotSearchList","selectedAll","isIndeterminate","BlockStyles","PluginBlockItemImg","SearchEmpty","SelectAll","blockUsers","users","getParentNode","openBlockShotPanel","editBlock","blockClick","iconClick","clearActive","iconSettingMove","getTitle","handleBlockItemLeave","handleSettingMouseOver","handleShowVersionMenu","changeActiveIndex","blockList","block","blockIndex","handleSelectAll","format","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_23","_hoisted_24","_component_select_all","_component_plugin_block_item_img","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_20","_hoisted_22","_component_search_empty","_sfc_main$b","TinyDialogBox","TinySearch","Search","TinyButton","MonacoEditor","MetaListItems","IconYes","iconYes","bindLifeCycles","isPage","emits","getPageContent","usePage","lifeCycles","getMergeMeta","lifeCyclesOptions","dslMode","lifeCycleTips","showPopover","showLifeCyclesDialog","editorValue","hasError","linterWorker","completionProvider","searchLifeCyclesList","toLowerCase","indexOf","syncLifeCycle","pageContent","fileName","deleteLifeCycle","editorRef","openLifeCyclesPanel","bindLifeCycleSource","setTimeout","trigger","editorConfirm","useNotify","editorDidMount","initCompletion","getModel","initLinter","handleEditorChange","monacoModel","lint","forEach","provider","dispose","terminate","_component_meta_list_items","_component_tiny_search","_component_icon_yes","_sfc_main$a","iconInfo","_sfc_main$9","Select","Option","selectValue","showEditItem","selectRef","editForm","paramsForm","curValue","substr","filterMethod","selectI18n","useTranslate","i18nObj","PROP_DATA_TYPE","_component_tiny_select","_component_tiny_option","param","_sfc_main$8","TinyCheckbox","COMPONENT_NAME","formState","deployBlockRef","formRules","getNextVersion","backupList","latestVersion","latestTime","vTime","match","setVisible","setSaved","isSameBlock","currentBlock","deployBlock","valid","publishBlock","getMetaApi","META_APP","changeCompare","remote","originalObj","changeCode","code","newSchema","_component_tiny_checkbox","_component_vue_monaco","pane","enable","splitterLowCodeIndex","totalMinSizes","paneId","clientX","clientY","drag","containerSize","sums","minLowCodeDrag","maxLowCodeDrag","dragLowCodePercentage","panesLowCodeToResize","paneLowCodeBefore","paneLowCodeAfter","paneLowCodeBeforeMaxReached","paneLowCodeAfterMaxReached","vars","total","isPane","isSplitter","paneIndex","nextPaneNode","isVeryFirst","elm","min","max","changedPanes","equalSpace","leftLowCodeToAllocate","ungrowableLowCode","unshrinkableLowCode","definedSizes","leftLowCodeToAllocate2","addedPane","equalLowCodeSpaceToAllocate","newLowCodePaneSize","allocated","size","_sfc_main$4","BindI18n","IconClose","getLangs","i18nResource","langs","isBind","inputValue","i18nValue","addI1i8nRef","popoverRef","_component_bind_i18n","deepClone","_sfc_main$3","e","_sfc_main$2","_sfc_main$1","ToolbarBaseIcon","ToolbarBaseButton","_normalizeProps","_guardReactiveProps","showFooter","Modal","alert","topbox","TopBox","modalEl","document","createElement","remove","window","durationMap","success","warning","config","customClass","otherConfig","Notify","verticalOffset","injectGlobalComponents","app","defaultPrettierConfig","generateAppCode","appSchema","generateApp","generatePageCode","genSFCWithDefaultPlugin","getAllNestedBlocksSchema","pageSchema","fetchBlockSchemaApi","blockSet","blockNames","parseRequiredBlocks","promiseList","schemaList","extraList","blockItem","historyId","historySchema","historyItem","schemaContent","GenerateCodeService","getBaseInfo","paramsMap","blockId","pageId","previewId","initialState","getUserInfo","META_SERVICE","fetchAppInfo","appId","fetchAppList","platformId","subscribe","publish","useMessage","postLocationHistoryChanged","filterParams","fieldsMap","field","paramFileds","url","changedParams","urlParamKey","changedParamFields","updateParams","updatePageId","updateBlockId","updatePreviewId","defaultGlobalService","defineService","appInfo","appList","bind","thisArg","require$$0","toString","kindOf","thing","kindOfTest","isArray","isUndefined","isBuffer","isArrayBuffer","isArrayBufferView","isString","isNumber","isPlainObject","prototype","isEmptyObject","isDate","isFile","isBlob","isFileList","isFunction","isStream","isFormData","isURLSearchParams","trim","isStandardBrowserEnv","product","l","merge","assignValue","a","b","stripBOM","inherits","constructor","superConstructor","descriptors","toFlatObject","sourceObj","destObj","propFilter","merged","endsWith","searchString","lastIndex","toArray","isTypedArray","TypedArray","forEachEntry","generator","pair","matchAll","regExp","isHTMLForm","hasOwnProperty","_hasOwnProperty","AxiosError","request","response","customProps","axiosError","AxiosError_1","browser","FormData","require$$1","envFormData","require$$2","isVisitable","removeBrackets","renderKey","path","dots","token","isFlatArray","predicates","isSpecCompliant","toFormData","metaTokens","visitor","defaultVisitor","_Blob","useBlob","convertValue","stack","exposedHelpers","build","toFormData_1","encode","charMap","AxiosURLSearchParams","encoder","_encode","AxiosURLSearchParams_1","buildURL","hashmarkIndex","serializerParams","InterceptorManager","fulfilled","rejected","InterceptorManager_1","normalizeHeaderName","headers","normalizedName","transitional","URLSearchParams_1","FormData_1","platform","toURLEncodedForm","helpers","parsePropPath","arrayToObject","len","formDataToJSON","buildPath","isNumericKey","isLast","formDataToJSON_1","settle","resolve","reject","validateStatus","cookies","expires","domain","secure","cookie","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","ignoreDuplicateOf","parseHeaders","parsed","line","isURLSameOrigin","msie","urlParsingNode","originURL","resolveURL","href","requestURL","CanceledError","CanceledError_1","parseProtocol","require$$3","require$$4","require$$5","require$$6","transitionalDefaults","require$$7","require$$8","require$$9","require$$10","require$$11","xhr","requestData","requestHeaders","responseType","withXSRFToken","onCanceled","done","username","password","fullPath","onloadend","responseHeaders","responseData","err","timeoutErrorMessage","xsrfValue","protocol","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","adapter","stringifySafely","rawValue","parser","contentType","hasJSONContentType","isObjectPayload","_FormData","forcedJSONParsing","JSONRequested","silentJSONParsing","strictJSONParsing","method","defaults_1","transformData","fns","isCancel","throwIfCancellationRequested","dispatchRequest","reason","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","configValue","VERSION","validators","deprecatedWarnings","validator","formatMessage","opt","desc","opts","assertOptions","allowUnknown","Axios","instanceConfig","configOrUrl","paramsSerializer","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","newConfig","onFulfilled","onRejected","generateHTTPMethod","isForm","Axios_1","CancelToken","executor","resolvePromise","onfulfilled","_resolve","listener","CancelToken_1","spread","isAxiosError","payload","createInstance","defaultConfig","instance","axios","promises","require$$12","require$$13","axiosModule","http","createInterceptorHandler","index$1","axiosConfig","interceptors","addInterceptors","util","assertIs","_arg","assertNever","_x","validKeys","k","filtered","checker","joinValues","array","separator","objectUtil","first","second","ZodParsedType","getParsedType","ZodIssueCode","ZodError","issues","sub","subs","actualProto","_mapper","mapper","issue","fieldErrors","processError","curr","formErrors","firstEl","errorMap","overrideErrorMap","defaultErrorMap","getErrorMap","makeIssue","errorMaps","issueData","fullIssue","errorMessage","maps","m","addIssueToContext","overrideMap","ParseStatus","results","arrayValue","INVALID","pairs","syncPairs","finalObject","DIRTY","OK","isAborted","isDirty","isValid","isAsync","errorUtil","ParseInputLazyPath","handleResult","processCreateParams","invalid_type_error","required_error","description","iss","ZodType","input","maybeAsyncResult","check","getIssueProperties","setError","refinementData","refinement","ZodEffects","ZodFirstPartyTypeKind","def","ZodOptional","ZodNullable","ZodArray","ZodPromise","ZodUnion","incoming","ZodIntersection","defaultValueFunc","ZodDefault","ZodBranded","catchValueFunc","ZodCatch","This","ZodPipeline","ZodReadonly","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","nanoidRegex","jwtRegex","durationRegex","emailRegex","_emojiRegex","emojiRegex","ipv4Regex","ipv4CidrRegex","ipv6Regex","ipv6CidrRegex","base64Regex","base64urlRegex","dateRegexSource","dateRegex","timeRegexSource","secondsRegexSource","secondsQuantifier","timeRegex","datetimeRegex","isValidIP","ip","isValidJWT","jwt","alg","header","base64","decoded","isValidCidr","ZodString","tooBig","tooSmall","validation","minLength","maxLength","ch","floatSafeRemainder","step","valDecCount","stepDecCount","decCount","valInt","stepInt","ZodNumber","kind","inclusive","ZodBigInt","ZodBoolean","ZodDate","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","ZodUnknown","ZodNever","ZodVoid","deepPartialify","ZodObject","newShape","fieldSchema","ZodTuple","shape","shapeKeys","extraKeys","keyValidator","unknownKeys","catchall","defaultError","augmentation","merging","mask","newField","createZodEnum","handleResults","unionErrors","childCtx","dirty","getDiscriminator","ZodLazy","ZodLiteral","ZodEnum","ZodNativeEnum","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","discriminatorValues","mergeValues","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","handleParsed","parsedLeft","parsedRight","rest","schemas","ZodRecord","keyType","valueType","third","ZodMap","finalMap","ZodSet","finalizeSet","elements","parsedSet","minSize","maxSize","getter","values","expectedValues","enumValues","newDef","nativeEnumValues","promisified","effect","checkCtx","arg","processed","executeRefinement","acc","inner","base","preprocess","newCtx","ZodNaN","inResult","freeze","stringType","numberType","booleanType","anyType","unknownType","arrayType","objectType","unionType","discriminatedUnionType","recordType","literalType","enumType","optionalType","LATEST_PROTOCOL_VERSION","SUPPORTED_PROTOCOL_VERSIONS","JSONRPC_VERSION","ProgressTokenSchema","z.union","z.string","z.number","CursorSchema","RequestMetaSchema","z\n    .object","z.optional","BaseRequestParamsSchema","RequestSchema","z.object","BaseNotificationParamsSchema","NotificationSchema","ResultSchema","RequestIdSchema","JSONRPCRequestSchema","z.literal","isJSONRPCRequest","JSONRPCNotificationSchema","isJSONRPCNotification","JSONRPCResponseSchema","isJSONRPCResponse","ErrorCode","JSONRPCErrorSchema","z.unknown","isJSONRPCError","JSONRPCMessageSchema","EmptyResultSchema","CancelledNotificationSchema","BaseMetadataSchema","ImplementationSchema","ClientCapabilitiesSchema","z\n        .object","z.boolean","InitializeRequestSchema","ServerCapabilitiesSchema","InitializeResultSchema","InitializedNotificationSchema","isInitializedNotification","PingRequestSchema","ProgressSchema","ProgressNotificationSchema","PaginatedRequestSchema","PaginatedResultSchema","ResourceContentsSchema","TextResourceContentsSchema","Base64Schema","BlobResourceContentsSchema","ResourceSchema","ResourceTemplateSchema","ListResourcesRequestSchema","ListResourcesResultSchema","z.array","ListResourceTemplatesRequestSchema","ListResourceTemplatesResultSchema","ReadResourceRequestSchema","ReadResourceResultSchema","ResourceListChangedNotificationSchema","SubscribeRequestSchema","UnsubscribeRequestSchema","ResourceUpdatedNotificationSchema","PromptArgumentSchema","PromptSchema","ListPromptsRequestSchema","ListPromptsResultSchema","GetPromptRequestSchema","z.record","TextContentSchema","ImageContentSchema","AudioContentSchema","EmbeddedResourceSchema","ResourceLinkSchema","ContentBlockSchema","PromptMessageSchema","z.enum","GetPromptResultSchema","PromptListChangedNotificationSchema","ToolAnnotationsSchema","ToolSchema","ListToolsRequestSchema","ListToolsResultSchema","CallToolResultSchema","CallToolRequestSchema","ToolListChangedNotificationSchema","LoggingLevelSchema","SetLevelRequestSchema","LoggingMessageNotificationSchema","ModelHintSchema","ModelPreferencesSchema","SamplingMessageSchema","CreateMessageRequestSchema","CreateMessageResultSchema","z.discriminatedUnion","BooleanSchemaSchema","StringSchemaSchema","NumberSchemaSchema","EnumSchemaSchema","PrimitiveSchemaDefinitionSchema","ElicitRequestSchema","z\n            .object","ElicitResultSchema","ResourceTemplateReferenceSchema","PromptReferenceSchema","CompleteRequestSchema","CompleteResultSchema","RootSchema","ListRootsRequestSchema","ListRootsResultSchema","RootsListChangedNotificationSchema","McpError","DEFAULT_REQUEST_TIMEOUT_MSEC","Protocol","_options","notification","controller","_request","messageId","timeout","maxTotalTimeout","onTimeout","resetTimeoutOnProgress","totalElapsed","transport","_onclose","_onerror","_onmessage","responseHandlers","handler","abortController","fullExtra","r","resultSchema","progressToken","responseHandler","timeoutInfo","relatedRequestId","resumptionToken","onresumptiontoken","jsonrpcRequest","timeoutHandler","jsonrpcNotification","requestSchema","notificationSchema","mergeCapabilities","additional","global","factory","exports","this","sets","xl","subexp","o","toUpperCase","buildExps","isIRI","ALPHA$$","DIGIT$$","HEXDIG$$","PCT_ENCODED$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UCSCHAR$$","IPRIVATE$$","UNRESERVED$$","DEC_OCTET_RELAXED$","IPV4ADDRESS$","H16$","LS32$","IPV6ADDRESS1$","IPV6ADDRESS2$","IPV6ADDRESS3$","IPV6ADDRESS4$","IPV6ADDRESS5$","IPV6ADDRESS6$","IPV6ADDRESS7$","IPV6ADDRESS8$","IPV6ADDRESS9$","IPV6ADDRESS$","ZONEID$","PCHAR$","URI_PROTOCOL","IRI_PROTOCOL","slicedToArray","sliceIterator","_arr","_n","_i","_s","toConsumableArray","arr2","maxInt","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","stringFromCharCode","error$1","mapDomain","string","parts","labels","encoded","ucs2decode","output","counter","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","decode","inputLength","bias","basic","j","oldi","w","baseMinusT","out","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_currentValue2","basicLength","handledCPCount","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","handledCPCountPlusOne","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_currentValue","q","qMinusT","toUnicode","toASCII","punycode","SCHEMES","pctEncChar","chr","pctDecChars","newStr","il","c2","c3","_normalizeComponentEncoding","decodeUnreserved","decStr","_stripLeadingZeros","_normalizeIPv4","host","_matches","address","_normalizeIPv6","_matches2","zone","_address$toLowerCase$","_address$toLowerCase$2","firstFields","lastFields","isLastFieldIPv4Address","fieldCount","lastFieldsStart","fields","allZeroFields","lastLongest","longestZeroFields","newHost","newFirst","newLast","URI_PARSE","NO_MATCH_IS_UNDEFINED","parse","uriString","schemeHandler","_recomposeAuthority","uriTokens","$1","$2","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","serialize","authority","resolveComponents","relative","skipNormalization","baseURI","relativeURI","schemelessOptions","normalize","uri","equal","uriA","uriB","escapeComponent","unescapeComponent","handler$1","isSecure","wsComponents","handler$2","_wsComponents$resourc","_wsComponents$resourc2","query","handler$3","O","ATEXT$$","QTEXT$$","VCHAR$$","SOME_DELIMS$$","UNRESERVED","PCT_ENCODED","NOT_LOCAL_PART","NOT_HFNAME","NOT_HFVALUE","handler$4","mailtoComponents","unknownHeaders","hfields","hfield","toAddrs","_xl","_x2","_xl2","addr","toAddr","atIdx","localPart","URN_PARSE","handler$5","urnComponents","scheme","nid","nss","urnScheme","uriComponents","UUID","handler$6","uuidComponents","fastDeepEqual","ucs2length","pos","copy","checkDataType","checkDataTypes","coerceToTypes","toHash","getProperty","escapeQuotes","varOccurences","varReplace","schemaHasRules","schemaHasRulesExcept","schemaUnknownRules","toQuotedString","getPathExpr","getPath","getData","unescapeFragment","unescapeJsonPointer","escapeFragment","escapeJsonPointer","strictNumbers","negate","EQUAL","AND","NOT","dataTypes","COERCE_TO_TYPES","optionCoerceTypes","hash","IDENTIFIER","SINGLE_QUOTE","dataVar","expr","exceptKeyword","currentPath","jsonPointers","joinPaths","JSON_POINTER","RELATIVE_JSON_POINTER","lvl","paths","up","jsonPointer","segments","segment","schema_obj","SchemaObject","traverse","jsonSchemaTraverseModule","cb","pre","post","_traverse","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","parentSchema","keyIndex","sch","escapeJsonPtr","URI","resolve_1","normalizeId","getFullPath","resolveUrl","resolveIds","inlineRef","resolveSchema","compile","refVal","baseId","refPath","_getFullPath","resolveRecursive","getJsonPointer","parsedRef","PREVENT_SCOPE_CHANGE","part","$ref","SIMPLE_INLINED","limit","checkNoRef","countKeys","count","TRAILING_SLASH_HASH","schemaId","baseIds","fullPaths","localRefs","self","error_classes","errorSubclass","ValidationError","MissingRefError","Subclass","fastJsonStableStringify","cycles","cmp","f","aobj","bobj","seen","stringify","seenIndex","validate","it","$keyword","$ruleType","$async","$refKeywords","$id","$unknownKwd","$keywordsMsg","$lvl","$dataLvl","$schema","$schemaPath","$errSchemaPath","$breakOnError","$errorKeyword","$valid","$$outStack","__err","$top","$defaultMsg","$closingBraces1","$closingBraces2","$typeSchema","$typeIsArray","$coerceToTypes","$rulesGroup","$shouldUseGroup","$method","$dataType","$coerced","arr1","$type","$i","l1","$parentData","$parentDataProperty","i2","l2","$schemaKeys","arr3","$propertyKey","i3","l3","$sch","$passData","arr4","l4","arr5","$rule","i5","l5","$shouldUseRule","$code","$ruleImplementsSomeKeyword","impl","errorClasses","stableStringify","validateGenerator","compile_1","refs","patterns","patternsHash","defaultsHash","customRules","checkCompiling","compilation","callValidate","formats","RULES","localCompile","cv","endCompiling","_schema","_root","isRoot","sourceCode","resolveRef","usePattern","useDefault","useCustomRule","refValCode","patternCode","defaultCode","customRuleCode","makeValidate","refIndex","_refVal","refCode","resolvedRef","rootRefId","addLocalRef","localSchema","removeLocalRef","replaceLocalRef","refId","regexStr","valueStr","deps","keyword","validateSchema","inline","macro","compIndex","statement","Cache","cacheModule","DATE","DAYS","TIME","HOSTNAME","URIREF","URITEMPLATE","URL","JSON_POINTER_URI_FRAGMENT","formats_1","mode","date","date_time","isLeapYear","year","month","day","full","hour","minute","timeZone","DATE_TIME_SEPARATOR","dateTime","NOT_URI_FRAGMENT","Z_ANCHOR","$refCode","$refVal","$message","$it","$nextValid","__callValidate","allOf","$closingBraces","$currentBaseId","$allSchemasEmpty","anyOf","$errs","$noEmptySchema","$wasComposite","comment","$comment","_const","$isData","contains","$idx","$dataNxt","$nextData","$nonEmptySchema","dependencies","$schemaDeps","$propertyDeps","$ownProperties","$property","$deps","$currentErrorPath","$prop","$useData","$propertyPath","$missingProperty","_enum","$vSchema","$schemaValue","$unknownFormats","$allowUnknown","$format","$isObject","$formatType","$formatRef","_if","$thenSch","$elseSch","$thenPresent","$elsePresent","$ifClause","$additionalItems","$currErrSchemaPath","_limit","$isMax","$exclusiveKeyword","$schemaExcl","$isDataExcl","$op","$notOp","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opExpr","$opStr","_limitItems","_limitLength","_limitProperties","multipleOf","not","$allErrorsOption","oneOf","$prevValid","$passingSchemas","$regexp","$key","$dataProperties","notProto","$pProperties","$pPropertyKeys","$aProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","$checkAdditional","$required","$requiredHash","i1","$pProperty","$additionalProperty","$useDefaults","$hasDefault","i4","propertyNames","$invalidName","$propertySch","$loopRequired","uniqueItems","$itemType","dotjs","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","require$$21","require$$22","require$$23","ruleModules","ALL","KEYWORDS","implKeywords","metaSchema","keywordsJsonPointers","keywords","async","compileAsync","meta","loadMetaSchemaOf","schemaObj","_compileAsync","loadMissingSchema","schemaPromise","removePromise","custom","$definition","$rDef","$compile","$inline","$macro","$ruleValidate","$validateCode","$validateSchema","$ruleErrs","$ruleErr","$asyncKeyword","def_callRuleValidate","def_customError","definition_schema","definitionSchema","addKeyword","getKeyword","removeKeyword","validateKeyword","definition","_addRule","ruleGroup","rg","throwError","compileSchema","$dataMetaSchema","ajv","Ajv","addSchema","addMetaSchema","removeSchema","addFormat","errorsText","_addSchema","_compile","customKeyword","META_SCHEMA_ID","META_IGNORE_OPTIONS","META_SUPPORT_DATA","setLogger","chooseGetId","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addDefaultMetaSchema","addInitialSchemas","schemaKeyRef","_meta","_skipValidation","checkUnique","skipValidation","throwOrLogError","defaultMeta","keyRef","_getSchemaObj","_getSchemaFragment","_removeAllSchemas","cacheKey","shouldAddSchema","willValidate","recursiveMeta","currentOpts","_validate","_get$IdOrId","_getId","_get$Id","$dataSchema","optsSchemas","metaOpts","logger","noop","Client","_clientInfo","capabilities","capability","level","tools","tool","toolName","ParseError","createParser","callbacks","onEvent","onError","onRetry","onComment","incompleteLine","isFirstChunk","eventType","feed","newChunk","chunk","complete","incomplete","splitLines","parseLine","fieldSeparatorIndex","offset","processField","reset","lines","searchIndex","crIndex","lfIndex","lineEnd","ErrorEvent","errorEventInitDict","_depth","inspect","inspectableError","syntaxError","DomException","flattenError","__typeError","msg","__accessCheck","member","__privateGet","__privateAdd","__privateSet","setter","__privateMethod","_readyState","_url","_redirectUrl","_withCredentials","_fetch","_reconnectInterval","_reconnectTimer","_lastEventId","_controller","_parser","_onError","_onMessage","_onOpen","_EventSource_instances","connect_fn","_onFetchResponse","_onFetchError","getRequestOptions_fn","_onEvent","_onRetryChange","failConnection_fn","scheduleReconnect_fn","_reconnect","EventSource","eventSourceInitDict","_a2","body","redirected","openEvent","decoder","reader","messageEvent","getBaseURL","listen","init","errorEvent","doc","crypto","getRandomValues","random","randomUints","randomIndex","generateVerifier","generateChallenge","code_verifier","buffer","pkceChallenge","verifier","challenge","OAuthProtectedResourceMetadataSchema","OAuthMetadataSchema","z\n        .array","OpenIdProviderMetadataSchema","OpenIdProviderDiscoveryMetadataSchema","OAuthTokensSchema","OAuthErrorResponseSchema","OAuthClientMetadataSchema","uris","z.any","OAuthClientInformationSchema","OAuthClientInformationFullSchema","resourceUrlFromServerUrl","resourceURL","checkResourceAllowed","requestedResource","configuredResource","requested","configured","requestedPath","configuredPath","OAuthError","errorUri","InvalidRequestError","InvalidClientError","InvalidGrantError","UnauthorizedClientError","UnsupportedGrantTypeError","InvalidScopeError","AccessDeniedError","ServerError","TemporarilyUnavailableError","UnsupportedResponseTypeError","UnsupportedTokenTypeError","InvalidTokenError","MethodNotAllowedError","TooManyRequestsError","InvalidClientMetadataError","InsufficientScopeError","OAUTH_ERRORS","UnauthorizedError","selectClientAuthMethod","clientInformation","supportedMethods","hasClientSecret","applyClientAuthentication","client_id","client_secret","applyBasicAuth","applyPostAuth","applyPublicAuth","clientId","clientSecret","credentials","parseErrorResponse","statusCode","error_description","error_uri","errorClass","auth","authInternal","serverUrl","authorizationCode","scope","resourceMetadataUrl","fetchFn","resourceMetadata","authorizationServerUrl","discoverOAuthProtectedResourceMetadata","resource","selectResourceURL","metadata","discoverAuthorizationServerMetadata","fullInformation","registerClient","codeVerifier","tokens","exchangeAuthorization","newTokens","refreshAuthorization","authorizationUrl","startAuthorization","defaultResource","extractResourceMetadataUrl","authenticateHeader","discoverMetadataWithFallback","fetchWithCorsRetry","buildWellKnownPath","wellKnownPrefix","pathname","tryMetadataDiscovery","protocolVersion","shouldAttemptFallback","wellKnownType","issuer","wellKnownPath","rootUrl","buildDiscoveryUrls","hasPath","urlsToTry","endpointUrl","redirectUrl","codeChallengeMethod","codeChallenge","redirectUri","addClientAuthentication","grantType","tokenUrl","authMethod","refreshToken","clientMetadata","registrationUrl","SseError","SSEClientTransport","fetchImpl","EventSourceParserStream","DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS","StreamableHTTPError","StreamableHTTPClientTransport","extraHeaders","attempt","initialDelay","growFactor","maxDelay","attemptCount","maxRetries","delay","stream","isReconnectable","replayMessageId","lastEventId","sessionId","hasRequests","responseMessages","_0x5d34","_0x1efc11","_0x4dc11c","_0x342bbc","_0x3c49e9","_0x289c","_0x37f6f6","_0x426ff0","_0x512315","_0x222a6f","_0x5306d2","_0x1a2d06","_0x4b468c","generateUUID","_0x3efd85","_0x155517","_0x279997","_0x1ac68e","_0x55103b","_0x10aa46","_0x16c636","_0x122514","_0x47a8ac","_0x2a72a1","_0x524583","_0x3e769a","_0x5f5be0","_0x4f8415","_0x1bfdb8","_0x25bb","_0x50733a","_0x2583a6","_0x563472","_0x275dfa","_0x255adf","_0x49a5","MessageChannelTransport","_0x3291c0","_0x48f9ca","_0x50d5f2","_0x4cf2a7","_0x3fb2ff","_0x2a856a","_0x5ab738","_0x2dafa0","_0xe93998","_0x17d5a7","_0xc6619d","_0x1e4df3","_0x36ca7c","_0x4911eb","_0x5c7589","_0x551eb5","_0x3c4f8b","_0x392df8","_0x47baae","_0x7330","_0x305b2f","_0x1e0407","_0x2fc2a3","_0x59ddf9","_0x29881e","_0xf8dfc1","_0x3106a5","_0x34c9c6","_0x39499d","_0x1dd119","_0x25b58a","_0x38e0ab","_0x32af17","_0xfa30d","_0x2b64c1","_0x5d7bfb","_0x259301","_0x174918","_0x1db798","_0x2acd10","_0x1805f4","createTransportPair","_0x287e54","_0x2dc06b","_0x1f0e76","_0x270235","_0x55a9d7","_0x1c1b1c","_0x511b70","_0x4af2","_0x1a34ce","_0x46d5ad","_0x215e","_0x387515","_0x2ab620","_0x32c5be","_0x164eda","_0x239e1b","streamOptions","_0x3bc494","_0x19a952","_0x42af44","_0x3a7ddb","_0x193954","_0xb50952","_0x389e","_0x5f5705","_0x1794b6","_0x5ce7","_0x4c53e7","_0x5019cc","_0x328e54","_0x776f85","_0x224cf9","forwardServerRequest","_0x5c4d13","_0x14efd6","_0x3d0783","_0x3ffbda","_0x475e61","_0x543329","_0x1afe15","_0x2cf226","_0x24430b","_0x5660ad","_0x10d088","_0x115738","forwardClientRequest","_0x308d7b","_0x3df369","_0x13e839","_0x3acbfa","_0x1334d1","_0x7caf02","_0x5dc149","_0x5aa3bf","_0x1361c3","_0x3a0352","_0x37ef20","_0xac694b","_0x468975","_0xec923d","_0x449fe0","forwardServerOnRequest","_0x27dc5c","_0x568fc4","_0x2a7d93","_0x70caed","_0x48a546","_0x5c2227","_0x1301c4","_0x41f8ad","_0x4c4201","_0x1057cb","_0x2e41e0","_0x2c3def","_0x4571c5","_0x3d02b1","_0x4f5e54","_0x3c76bd","_0x5006ec","_0x2407e9","_0x5aed23","_0x40147e","_0x8d37fc","_0x4de494","_0x2adf5a","forwardServerOnNotification","_0x5f3aac","_0x2bdcd5","_0xb4015b","_0x4424e2","_0x3faa0b","_0x5a2961","_0x19fff8","_0x12d3ea","_0x658a8d","_0x194fa4","_0xd3ef49","_0x4bf9c9","_0x261f04","forwardClientOnRequest","_0x34be45","_0x27f842","_0x4571ee","_0x35bbc3","_0xd5ee3e","_0x2c60e8","_0x1a394c","_0x4b58a8","_0x3b52be","_0x43e67e","_0x460c24","_0x586af5","_0x3002ef","forwardClientOnNotification","_0x4cb45e","_0x158ed6","_0x5fdd9d","_0x448197","_0x235af7","_0x38778c","_0x48cd24","_0x394d84","_0x35ccf1","_0x19894a","_0x583913","forwardClientOnResponse","_0x49b3ee","_0x1bcb55","_0x20fe15","_0x2d3103","_0x16f509","_0x1074b0","_0x4af8a2","_0x4dbf02","_0x3adf06","_0x2d3c7b","_0x2756ac","_0x801073","_0x25a81c","createHandleListener","_0x14f631","_0x4676c6","_0x4198da","_0x5d67ce","_0x27912a","_0x2a191a","_0x37ca4b","_0x1bdaa1","_0x3d4a8e","_0x130821","_0x1334da","_0x233d74","_0x19903a","_0x59d78f","_0x1c4719","_0x6a094d","_0x5c27b3","_0x373d85","_0x52815b","_0x5cb516","_0x2a4330","_0x3eda68","_0x532f40","_0x1f3623","setClientListener","_0xa67e25","_0x3c676a","_0x107291","_0x45201d","_0x427539","_0x348224","_0x116e1d","_0x1edd51","_0x1623d8","_0x160253","_0x3ef79d","_0x36d9e5","_0x1fcb7b","_0x10ea28","_0x21759f","_0x1a2b9d","_0x283abb","_0xf93403","initClientHandler","_0x434b5f","_0x238cde","_0xaa72ce","_0x471e82","_0x35c179","_0x39ff3e","_0x371c24","_0x21d19c","_0x7715f7","_0x37a6ab","_0x3c89f5","_0x5ad5c3","_0x20ef27","_0x3c47bc","_0x374747","_0x4ae463","_0x2504f2","_0x2b1c87","_0x2fa87a","_0xd40917","_0x48e479","_0x16f826","_0x4ffb37","_0x544f53","_0x1aefd7","_0x4e9a46","_0x225a74","_0x3a51f9","_0x27e9aa","_0x213d97","_0x3f42","_0x226132","_0x1ff3f6","_0x40c7","_0x38f123","_0x4c4a41","_0x4c6b28","_0x8f66f0","_0x107472","forwardProxyClient","_0x3ffec4","_0x512b11","_0x869d7","_0x585eb4","_0x177126","_0x5a4977","_0x2b1bf4","_0x4b88ef","_0x34aa96","_0xf28fb","_0x117a73","_0x599903","_0x43399a","initWebClientHandler","_0x395e7c","_0x46c4f2","_0x113deb","_0x5c020f","_0x2a8105","_0xebd8e4","_0x32c296","_0x41cf16","_0xdefd83","_0x236512","_0x3d1937","_0x38c7ec","_0x11c915","_0x4db354","createStreamProxy","_0x15218f","_0x551a73","_0x3b3748","_0x5ea558","_0x276436","_0x6f7b57","_0x17336b","_0x467f4a","_0x11beef","_0x321a32","_0xf6db6a","_0x316e48","_0x3ea39b","_0x267d0c","_0x346bab","_0x217cdb","_0x490cd8","_0x3f4689","_0x2e09fc","_0x4a3b1b","_0x2d4b2f","_0x4d1011","_0x503534","_0x55c735","_0x215da0","_0x5f44e1","_0x50db57","_0x470aa1","_0x624e","_0x228588","_0x3d7e54","_0x5853e8","_0x290a","_0x6862c7","_0x3553e9","_0x834ca","_0x5077ba","_0x5a96cc","_0xb6bb90","_0x1564d5","Server","_serverInfo","requestedVersion","ignoreOverride","getDefaultOptions","getRefs","addErrorMessage","setResponseValueAndErrors","getRelativePath","pathA","pathB","parseAnyDef","anyDefinitionPath","parseArrayDef","parseDef","parseBigintDef","parseBooleanDef","parseBrandedDef","_def","parseCatchDef","parseDateDef","overrideDateStrategy","strategy","integerDateParser","parseDefaultDef","parseEffectsDef","parseEnumDef","isJsonSchema7AllOfType","parseIntersectionDef","unevaluatedProperties","mergedAllOf","nestedSchema","additionalProperties","parseLiteralDef","parsedType","zodPatterns","parseStringDef","addPattern","escapeLiteralCheckValue","literal","escapeNonAlphaNumeric","ALPHA_NUMERIC","stringifyRegExpWithFlags","flags","isEscaped","inCharGroup","inCharRange","parseRecordDef","parseMapDef","parseNativeEnumDef","actualValues","parsedTypes","parseNeverDef","parseNullDef","primitiveMappings","parseUnionDef","asAnyOf","uniqueTypes","parseNullableDef","parseNumberDef","parseObjectDef","forceOptionalIntoNullable","propName","propDef","propOptional","safeIsOptional","parsedDef","decideAdditionalProperties","parseOptionalDef","innerSchema","parsePipelineDef","parsePromiseDef","parseSetDef","parseTupleDef","parseUndefinedDef","parseUnknownDef","parseReadonlyDef","selectParser","typeName","forceResolution","seenItem","overrideResult","seenSchema","get$ref","newItem","jsonSchemaOrGetter","jsonSchema","addMeta","postProcessResult","zodToJsonSchema","definitions","main","combined","McpZodTypeKind","Completable","McpServer","serverInfo","toolDefinition","EMPTY_OBJECT_JSON_SCHEMA","parseResult","prompt","EMPTY_COMPLETION_RESULT","suggestions","createCompletionResult","template","completer","resources","templateResources","variables","promptArgumentsFromSchema","uriOrTemplate","readCallback","registeredResource","registeredResourceTemplate","updates","argsSchema","registeredPrompt","inputSchema","outputSchema","annotations","registeredTool","firstArg","isZodRawShape","isZodTypeLike","getToolList","toolItem","toolInstance","getToolByName","registerTools","restConfig","removeTool","updateTool","updateServerConnectionStatus","closeTransport","connectToRemoteServer","client","attempts","reconnectAttempts","reconnectInterval","connectToAgentServer","handleClose","exitSessionId","streamTransport","reconnectToRemoteServer","createStreamServerTransport","clientTransport","createMcpServer","server","toRaw","collectTools","allMetaData","getAllMergeMeta"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAKM,EAAE,oBAAAA,GAAkB,IAAKC,GAAK;AAEpCD,GAAmBE,GAAY,MAAMC,EAAI;AACzCH,GAAmBE,GAAY,MAAME,EAAI;ACKzC,MAAAC,KAAe;AAAA,EACb,YAAY;AAAA,IACV,cAAcC;AAAA,IACd,kBAAkBC;AAAA,EAAA;AAAA,EAEpB,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,QAAQ;AACN,WAAO,CAAA;AAAA,EACT;AACF;;;;;;;yCA1BEC,EAAA,eAMM;AAPR,SAAAC,EAAA,GAGMC,EAEqB,OAAAC,IAAA;AAAA,IAAAC,EAFrBC,GAEqB,MAAA;AAAA,MAAA,SAFKC,EAAE,MAAK;AAAA,QAAAF,EAAUG,GAAA;AAAA,UAAA,OAAAC,EAAA;AAAA,UAHjD,MAAA;AAAA,QAAA,GAAA;AAAA;YAAAC,GAAAC,EAAA,QAAA,WAAA,CAAA,GAAA,QAAA,EAAA;AAAA,UAAA,CAAA;AAAA;QAAA,GAAA,GAAA,CAAA,OAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCGAC,KAAe;AAAA,EACbC,OAAO;AAAA,IACLC,OAAOC;AAAAA,IACPC,OAAOC;AAAAA,IACPC,QAAQC;AAAAA,IACRC,WAAW;AAAA,MACTC,MAAMC;AAAAA,MACNC,SAAS;AAAA,IACX;AAAA;EAEFC,SAAS;;AACP,UAAMC,IAAO,KAAKX,MAAMY,WAAW,CAAA,GAC7B;AAAA,MAAEC,MAAAA;AAAAA,QAAS,KAAKC,QAChBC,MAASC,IAAA,KAAKhB,MAAMiB,aAAX,gBAAAD,EAAqBD,WAAUJ,EAAKO,QAC7CC,IAAYR,EAAKS,IAAI,CAACC,GAAMC,MAAcT,EAAK;AAAA,MAAEQ,MAAAA;AAAAA,MAAMC,WAAAA;AAAAA,KAAW,CAAC,GAGnEC,IAAcJ,EAAUK,MAAM,GAAGT,CAAM,GACvCU,IAAgBN,EAAUK,MAAMT,CAAM,GAEtCW;;0BAC0C,KAAKxB;AAAAA,IAAK,GAAA,CACrDqB,EAAYL,SAASK,IAAUhC,EAAA,OAAA;AAAA,MAAA,OAAA;AAAA,IAAA,GAAA,CAAwB,KAAKe,SAAS,CAAA,CAAO,CAAA,GAI3EqB,IAAeF,EAAcP;;;4BAEe,KAAKhB;AAAAA,MAAK,GAAA,CACrDuB,CAAa,CAAA,CAAA;AAAA,IAAA,CAAA,IAGhB;AAEJ,WAAAlC,EAAA,OAAA;AAAA,MAAA,OAAA;AAAA,IAAA,GAAA,CAEKmC,GAAUE,GAAA,GAAA,GAAGD,CAAY,CAAA;AAAA,EAGhC;AACF,oECVAE,KAAe;AAAA,EACb,MAAM;AAAA,EACN,YAAY;AAAA,IACV,aAAaC;AAAA,IACb,aAAaC;AAAA,IACb,WAAWC;AAAA,IACX,gBAAgBC;AAAA,EAAA;AAAA,EAElB,cAAc;AAAA,EACd,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,UAAU,mBAAmB;AAAA,EACrC,MAAMlC,GAAO,EAAE,MAAAmC,KAAQ;;AACrB,UAAMC,IAAoB,CAACC,GAAiBC,MAAe;AACzD,UAAIC,IAASF,EAAM,CAAC,KAAK;AAEzB,UAAIC,MAAU,OAAW,QAAOC;AAChC,iBAAW/B,KAAQ6B;AACjB,YAAI,OAAOC,MAAU9B,KAASA,MAAS,WAAW,MAAM,QAAQ8B,CAAK,GAAI;AACvE,UAAAC,IAAS/B,GACT2B,EAAK,UAAU,CAAC3B,CAAI,CAAC;AACrB;AAAA,QACF;AAGF,aAAO+B;AAAA,IACT,GAEMC,IAAcJ,EAAkBpC,EAAM,KAAK,OAAMyC,KAAAxB,IAAAjB,EAAM,KAAK,WAAX,gBAAAiB,EAAmB,UAAnB,gBAAAwB,EAA0B,UAAU,GACrFC,IAAcN,EAAkBpC,EAAM,KAAK,MAAMA,EAAM,KAAK,YAAY,GASxE2C,IAAQC,GAAS;AAAA,MACrB,MAAMJ;AAAA;AAAA,MACN,YARAxC,EAAM,KAAK,KAAK,IAAI,CAACQ,MAAiB;;AACpC,eAAIA,MAASgC,IAAoB,EAAE,aAAYC,KAAAxB,IAAAjB,EAAM,KAAK,WAAX,gBAAAiB,EAAmB,UAAnB,gBAAAwB,EAA0B,WAAA,IACrEjC,MAASkC,IAAoB,EAAE,YAAY1C,EAAM,KAAK,aAAA,IACnD,EAAE,YAAY,KAAA;AAAA,MACvB,CAAC;AAAA;AAAA,IAI0B,CAC5B;AA4BD,WAAO;AAAA,MACL,OAAA2C;AAAA,MACA,UA5BuC;AAAA,QACvC,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,OAAO;AAAA,MAAA;AAAA,MAwBP,QArBa,CAACE,MAAe;AAC7B,cAAMC,IAAY9C,EAAM,KAAK,KAAK,UAAU,CAACQ,MAAcA,MAASqC,EAAI,CAAC,CAAC;AAC1E,QAAIC,IAAY,MACdX,EAAK,qBAAqBQ,EAAM,WAAWG,CAAS,EAAE,UAAU,GAElEX,EAAK,UAAUU,CAAG;AAAA,MACpB;AAAA,MAgBE,cAdmB,CAAC1C,GAAwB0C,MAAa;AACzD,cAAMrC,IAAOR,EAAM,KAAK,KAAKG,CAAK;AAElC,QAAIwC,EAAM,SAASnC,MACjBmC,EAAM,OAAOnC,GACb2B,EAAK,UAAU,CAAC3B,CAAI,CAAC,IAEvB2B,EAAK,qBAAqBU,CAAG;AAAA,MAC/B;AAAA,MAOE,iBAAAE;AAAA,IAAA;AAAA,EAEJ;AACF,GAhHexD,KAAA,EAAA,OAAM,YAAA,GAMNyD,KAAA,EAAA,OAAM,kBAAA;;iCAXnB5D,EAAA,kBAwBM;SAtBJC,EAAA,GAqBMC,EAAA,OAAAC,IAAA;AAAA,IAAA0D,EADe,OAAAD,IAAAE,GAAAtD,EAAA,KAAA,GAAA,CAAA;AAAA,IAAAqD,EAnBQ,OAAA,MAAU;AAAA,MAAAzD,EAJ3C2D,GAAA;AAAA,QAI6C,YAAQC,EAAA,MAAA;AAAA,QAAE,uBAAcC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,MAAA,OAAAE;AAAA,QAAA,UAAA;AAAA,QAJrE,UAAAF,EAAA;AAAA,MAAA,GAAA;AAAA;aAKsD,EAAI,GAAA9D,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,KAAA,MAAA,CAAAkB,GAAAX,MAAA;;AAAO,mBAAAd,EAAA,GAACC,EAAoB,OAAA;AAAA,cAAA,KAAAwB;AAAA,cAC5E,OAAA;AAAA,YAAA,GAAA;AAAA,gBANV,OAQ0C2C,IAAA;AAAA,gBAAAjE,EAR1CkE,KAQiB,OAAA5C,EAAA,GAAQ;AAAA,kBAAA,SAAApB,EAAA,MAAA;AAAA,oBARzBmC,GAAAqB,GAAAE,EAAA,SAAAtC,CAAA,KAAAA,CAAA,GAAA,CAAA;AAAA,kBAAA,CAAA;AAAA;mBAWU,MAAA,CAA2B,OAAA,CAAA;AAAA,cAAA,CAC3B;AAAA,cAAAjB,GAAAC,EACE,QAAA,UAbZ,CAAA,GAAA,QAAA,EAAA;AAAA,cAAAmD,EAgBuB,OAAAU,IAAgB;AAAA,iBAAAtE,EAAA,GAhBvCuE,GAAAC,GAgB6BT,EAAA,iBAAkBnC,IAAArB,EAAU,KAAA,OAAA,cAAV,gBAAAqB,EAEbd,SAAkBP,EAAQ,KAAA,OAAA,OAAA;AAAA,kBAD7C,YAAMwD,EAAI,MAAA,WAAAjD,CAAA,EAAA;AAAA,kBAAA,uBAAA,CAAA,CAAAmD,MAAAF,EAAA,MAAA,WAAAjD,CAAA,EAAA,aAAAmD,GAAA,CAAAA,MAAAF,EAAA,aAAAjD,GAAAmD,CAAA,CAAA;AAAA;iBAIf,GAAA,MAA2B,IAAA,CAAA,cAAA,uBAAA,MAAA,CAAA;AAAA,cAAA,CAAA;AAAA;;UArBrC,CAAA,GAAA,GAAA;AAAA,QAAA,CAAA;AAAA;;;;;uFCwHM,EAAE,eAAeQ,GAAA,IAAqBC,IAEtCC,KAAU,CAACC,GAAeC,MAC1BD,IACK,KAEF,MAAM,QAAQC,CAAK,KAAKA,EAAM,SAAS,GAGhDC,KAAe;AAAA,EACb,YAAY;AAAA,IACV,mBAAAC;AAAA,IACA,aAAapC;AAAA,IACb,aAAaD;AAAA,IACb,aAAasC,GAAA;AAAA,IACb,gBAAgBC,GAAA;AAAA,IAChB,gBAAgBC,GAAA;AAAA,EAAe;AAAA,EAEjC,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,MAAM;AAAA,MACpB,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA,IAElB,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,gBAAgB;AAAA,MACd,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,kBAAkB;AAAA,MAChB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,mBAAmB;AAAA,EAC3B,MAAMvE,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMqC,IAAmBzB,GAAgB,kBAAkB,GACrD0B,IAAuB1B,GAAgB,sBAAsB,GAE7D,EAAE,GAAA2B,GAAG,QAAAC,EAAA,IAAW9F,GAAK,QAErB+F,IAAehC,GAAS;AAAA,MAC5B,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,SAASiC,GAAS,MAAA;;AAAM,eAAAb,IAAQ/C,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,WAAUwB,IAAAzC,EAAM,aAAN,gBAAAyC,EAAgB,KAAK;AAAA,OAAC;AAAA,IAAA,CACjF,GACKqC,IAAiBC,GAAS,IAAI,GAC9BC,IAAkBC,GAAO,mBAAmB,IAAI,GAChDC,IAAWD,GAAO,YAAY,IAAI,GAClChB,IAAWY,GAAS,MAAA;;AAAM,eAAA5D,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,aAAY;AAAA,KAAK,GAE3DkE,IAASN,GAAS,MAAM7E,EAAM,MAAM,GACpCoF,IAASP,GAAS,MAAA;;AAAM,eAAA5D,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,WAAU;KAAE,GACpDoE,IAAYR;AAAA,MAChB,MAAA;;AAAM,iBAAAS,MAAA7C,KAAAxB,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,UAAhB,gBAAAwB,EAAuB,SAAvB,gBAAA6C,GAA8BX,EAAO,aAAUY,MAAAC,KAAAxF,EAAM,aAAN,gBAAAwF,GAAgB,UAAhB,gBAAAD,GAAuB,SAAQvF,EAAM,SAAS;AAAA;AAAA,IAAA,GAE/FyF,IAAYZ,GAAS,MAAM,MAAM,QAAQO,EAAO,MAAM,SAAS,CAAC,GAChEM,IAAiBX,GAAI,EAAK,GAC1BY,IAAmBd;AAAA,MACvB,MACE7E,EAAM,cACN0F,EAAe,UAAU,OACxBD,EAAU,SAAS,CAAC,SAAS,QAAQ,EAAE,SAASzF,EAAM,SAAS,IAAI;AAAA,IAAA,GAElE4F,IAAYf;AAAA,MAChB,MACE,CAAC7E,EAAM,YACPqF,EAAU,UACTK,EAAe,SACd,CAAC;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MAAA,EACA,SAASN,EAAO,MAAM,SAAS,MACnC,CAACK,EAAU;AAAA,IAAA,GAETI,IAAkBhB;AAAA,MACtB;;AACG,kBAAApC,KAAAxB,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,gBAAhB,gBAAAwB,EAA8BkC,EAAO,aAAUW,KAAAtF,EAAM,aAAN,gBAAAsF,GAAgB,oBAC/DQ,MAAAP,MAAAC,KAAAxF,EAAM,aAAN,gBAAAwF,GAAgB,UAAhB,gBAAAD,GAAuB,SAAvB,gBAAAO,GAA8BnB,EAAO,aAAUoB,MAAAC,KAAAhG,EAAM,aAAN,gBAAAgG,GAAgB,UAAhB,gBAAAD,GAAuB;AAAA;AAAA,IAAA,GAErEE,IAAWpB,GAAS,MAAM,EAAQ7E,EAAM,SAAS,MAAO,GACxDkG,IAAYrB,GAAS,MAElBY,EAAU,QACbrB,KACArB,GAAgBqC,EAAO,MAAM,SAAS,KACpCpF,EAAM,eAAeoF,EAAO,MAAM,SAAS,KAC3CrC,GAAgB,mBAAmB,CAC1C,GACKoD,IAAYtB,GAAS,MAAM;;AAC/B,UAAIvC,KAAQgD,MAAA7C,MAAAxB,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB,WAAhB,gBAAAwB,GAAwB,UAAxB,gBAAA6C,GAA+B;AAE3C,UAAIhD,KAAU,MAA6B;AACzC,cAAM8D,MAAeZ,KAAAxF,EAAM,aAAN,gBAAAwF,GAAgB;AACrC,QAAAlD,KAAQ8D,MAAA,gBAAAA,GAAezB,EAAO,WAAUyB;AAAA,MAC1C;AAEA,cAAI9D,KAAA,gBAAAA,EAAO,mBAAkB,WAC3BA,IAAQA,EAAM,MAAM,OAGfA;AAAA,IACT,CAAC,GAEK+D,IAAkBxB,GAAS,MAAM;;AACrC,YAAMyB,KAAWhB,MAAA7C,MAAAxB,KAAAjB,EAAM,aAAN,gBAAAiB,GAAgB,WAAhB,gBAAAwB,GAAwB,UAAxB,gBAAA6C,GAA+B,UAC1CiB,MACJhB,MAAAC,KAAAxF,EAAM,aAAN,gBAAAwF,GAAgB,gBAAhB,gBAAAD,GAA6B,WAAU,YAAUO,KAAA9F,EAAM,aAAN,gBAAA8F,GAAgB,UAAS,WAAW,SAAS;AAEhG,aAAOQ,KAAYC;AAAA,IACrB,CAAC,GAEKC,IAAgB3B,GAAS,MAAM;;AACnC,aAAKe,EAAU,QAIX5F,EAAM,SAAS,gBACVA,EAAM,SAAS,gBAGpB,CAAC,wBAAwB,oBAAoB,EAAE,UAASiB,IAAAjB,EAAM,SAAS,WAAf,gBAAAiB,EAAuB,SAAS,IACnF,WAGLwB,IAAAzC,EAAM,SAAS,WAAf,gBAAAyC,EAAuB,eAAc,qBAChC,QAGF,SAfE;AAAA,IAgBX,CAAC,GAEKgE,IAAc,CAACnE,MAAyE;AAC5F,YAAM,EAAE,UAAAoE,GAAU,MAAAlG,GAAA,IAASR,EAAM,UAC3B,EAAE,SAAA2G,IAAS,WAAAC,GAAA,IAAcC,GAAA;AAG/B,WAAIvE,KAAA,gBAAAA,EAAO,UAASwE,GAAiB,cAAc;AACjD,cAAMC,KAAmBH,KAAY,eAC/B;AAAA,UACJ,QAAQ,EAAE,QAAAI,KAAS,CAAA,EAAC;AAAA,QAAE,IACpBC,GAAA,EAAc,YAAYF,EAAgB;AAE9C,QAAI,OAAO,KAAKC,EAAM,EAAE,SAAS,YAAYN,CAAQ,EAAE,MAIrDpE,IAAQ,EAAE,GAAGA,GAAO,OADNoE,MAAa,eAAe,KAAO,EAAE,MAAMA,EAAA,EACrC;AAAA,MAExB;AAEA,YAAM,EAAE,aAAAQ,IAAa,SAAAC,GAAA,IAAYC,GAAA;AAEjC,UAAIV,MAAa,YAAY;AAC3B,cAAMW,KAAST,GAAA;AACf,QAAAM,GAAY,EAAE,MAAM,oBAAoB,IAAIG,GAAO,IAAI,OAAO,EAAE,UAAU/E,EAAA,EAAM,CAAG;AAAA,MACrF,OAAO;AACL,YAAI,CAAC6E,GAAA,KAAa,CAAC,CAACG,GAAY,OAAOA,GAAY,MAAM,EAAE,SAASC,GAAA,EAAY,YAAY,WAAW,KAAK;AAC1G;AAGF,QAAIb,MAAa,UAAU,CAAC,wBAAwB,EAAE,SAAS1G,EAAM,SAAS,OAAO,SAAS,MAE5FsC,IAAQ;AAAA,UACN,eAAe;AAAA,UACf,OAAO;AAAA,YACL,MAAMA;AAAA,UAAA;AAAA,QACR,IAIAtC,EAAM,cACR2G,GAAQD,GAAUpE,GAAO9B,EAAI;AAAA,MAEjC;AAEA,MAAAgH,GAAA,EAAa,WAAA;AAAA,IACf,GAEMC,IAAkB,CAAClF,GAAuCmF,MAAoB;AAClF,MAAAnF,EAAO,SAAS,IAChBA,EAAO,UAAU,OAAOmF,KAAY,WAAWA,IAAUA,KAAA,gBAAAA,EAAU/C,EAAO;AAAA,IAC5E,GAEMgD,IAAoB,CAACrF,MAIlBA,KAAS,QAASsF,GAAOtF,CAAK,MAAMuF,GAAM,cAAcvF,EAAM,KAAA,MAAW,IAE5EwF,IAAiB,CAACxF,MACf,CAACqF,EAAkBrF,CAAK,GAG3ByF,IAAc,CAACzF,IAAQ,IAAI4B,IAAe,CAAA,MAAO;;AACrD,YAAM3B,KAAS;AAAA,QACb,QAAQ;AAAA,QACR,SAAS;AAAA,MAAA;AAGX,UAAI,CAACyB,IAAQ/C,KAAAjB,EAAM,aAAN,gBAAAiB,GAAgB,WAAUwB,KAAAzC,EAAM,aAAN,gBAAAyC,GAAgB,KAAK;AAC1D,eAAOF;AAGT,UAAI0B,EAAS,SAAS,CAAC6D,EAAexF,CAAK;AACzC,eAAAmF,EAAgBlF,IAAQmC,EAAE,iBAAiB,CAAC,GAErCnC;AAGT,YAAMpB,KAAS+C,EAAM,QACf,EAAE,SAAA8D,GAAA,IAAYnB,GAAA;AAEpB,eAASoB,KAAI,GAAGA,KAAI9G,IAAQ8G,MAAK;AAC/B,cAAMC,KAAOhE,EAAM+D,EAAC;AACpB,YAAIC,GAAK,YAAY,CAACJ,EAAexF,CAAK;AACxC,iBAAAmF,EAAgBlF,IAAQ2F,GAAK,OAAO,GAC7B3F;AAET,YAAI2F,GAAK;AAGP,cAAI,CAFQ,IAAI,OAAOA,GAAK,OAAO,EAE1B,KAAK5F,CAAK,GAAG;AACpB,YAAAmF,EAAgBlF,IAAQ2F,GAAK,OAAO;AACpC;AAAA,UACF;AAAA,mBACSA,GAAK;AACd,cAAI;AAQF,gBAAI,CAPOpE,GAAiBoE,GAAK,WAAW;AAAA,cAC1C,OAAO;AAAA,gBACL,OAAA5F;AAAA,cAAA;AAAA,cAEF,SAAA0F;AAAA,YAAA,CACD,EAEOE,IAAM5F,CAAK,GAAG;AACpB,cAAAmF,EAAgBlF,IAAQ2F,GAAK,OAAO;AACpC;AAAA,YACF;AAAA,UACF,SAASC,IAAO;AAEd,YADgB,QACR,IAAIA,EAAK;AAAA,UACnB;AAAA,MAEJ;AAEA,aAAO5F;AAAA,IACT,GAEM6F,IAAwB,CAAC9F,GAA2B+F,MAAkB;;AAC1E,YAAM,EAAE,UAAAC,IAAU,OAAApE,GAAA,IAAUlE,EAAM,UAC5B,EAAE,SAAA2G,IAAS,SAAA4B,GAAA,IAAY1B,GAAA;AAG7B,UAAIyB,MAAYpD;AACd,YAAI;AASF,UARYpB,GAAiBwE,IAAU;AAAA,YACrC,GAAGpD,EAAS;AAAA,YACZ,QAAQ;AAAA,cACN,IAAGjE,KAAAmE,EAAO,UAAP,gBAAAnE,GAAc;AAAA,YAAA;AAAA,YAEnB,SAAA0F;AAAA,YACA,SAAA4B;AAAA,UAAA,CACD,EACGjG,GAAO+F,CAAQ;AAAA,QACrB,SAASF,IAAO;AAEd,UADgB,QACR,IAAIA,EAAK;AAAA,QACnB;AAIF,aAAO,OAAOvD,GAAcmD,EAAYzF,GAAO4B,EAAK,CAAC;AAAA,IACvD,GAEMsE,IAAgB,CAAClH,GAAWmH,IAAe,OAAS;AACxD,YAAMJ,KAAWlC,EAAU;AAG3B,MAFAf,EAAO,MAAM,MAAM,aAAa9D,GAChCa,EAAK,qBAAqBb,CAAI,GACzBmH,MAGLhC,EAAYnF,CAAI,GAChB8G,EAAsB9G,GAAM+G,EAAQ;AAAA,IACtC,GAEMK,IAAazD,GAAO,QAAQ,EAAE,GAC9B0D,KAAa1D,GAAO,QAAQ,IAAI;AACtC,IAAA2D,GAAQ,QAAQ,GAAGF,IAAaA,IAAa,MAAM,EAAE,GAAG1I,EAAM,SAAS,QAAQ,EAAE,GACjF4I,GAAQ,QAAQ/B,GAAA,EAAgB,UAAA,CAAW,GAE3CgC;AAAA,MACE,MAAM1C,EAAU;AAAA,MAChB,CAAC7D,MAAU;AACT,QAAAoD,EAAe,SAAQpD,KAAA,gBAAAA,EAAO,UAASwE,GAAiB;AAAA,MAC1D;AAAA,MACA;AAAA,QACE,WAAW;AAAA,MAAA;AAAA,IACb;AAGF,UAAMgC,KAAiB/D,GAAI,EAAK,GAE1BgE,KAAUhE,GAAI,EAAK;AAEzB,IAAA8D;AAAA,MACE,MAAM,CAACjE,EAAa,QAAQmE,GAAQ,KAAK;AAAA,MACzC,MAAM;AACJ,YAAI,CAACnE,EAAa,QAAQ;AACxB,UAAAkE,GAAe,QAAQ;AACvB;AAAA,QACF;AAEA,QAAAA,GAAe,QAAQ;AAAA,MACzB;AAAA,IAAA;AAGF,UAAME,KAAc,MAAM;AACxB,MAAAD,GAAQ,QAAQ;AAAA,IAClB,GAEME,KAAa,MAAM;;AACvB,MAAAF,GAAQ,QAAQ;AAChB,YAAMG,KAASjI,IAAAjB,EAAM,aAAN,gBAAAiB,EAAgB;AAC/B,UAAIiI;AACF,YAAI;AAEF,UADYpF,GAAiBoF,GAAQ,EAAE,EACnC/C,EAAU,KAAK;AAAA,QACrB,QAAgB;AAAA,QAEhB;AAAA,IAEJ,GAEMgD,KAAsB,CAACjD,MAC3B,CAAC,6BAA6B,4BAA4B,EAAE,SAASA,CAAS,GAE1EkD,KAAgBvE;AAAA,MACpB,MAAM,CAAC7E,EAAM,aAAa0F,EAAe,SAASO,EAAS,UAAU,CAACkD,GAAoB/D,EAAO,MAAM,SAAS;AAAA,IAAA;AAGlH,WAAO;AAAA,MACL,kBAAAZ;AAAA,MACA,sBAAAC;AAAA,MACA,cAAAG;AAAA,MACA,kBAAAe;AAAA,MACA,gBAAAb;AAAA,MACA,gBAAAY;AAAA,MACA,WAAAQ;AAAA,MACA,QAAAf;AAAA,MACA,QAAAC;AAAA,MACA,UAAAnB;AAAA,MACA,UAAAgC;AAAA,MACA,WAAAZ;AAAA,MACA,WAAAO;AAAA,MACA,WAAAH;AAAA,MACA,iBAAAI;AAAA,MACA,WAAAM;AAAA,MACA,iBAAAnB;AAAA,MACA,eAAAoE;AAAA,MACA,eAAAZ;AAAA,MACA,YAAAG;AAAA,MACA,iBAAAtC;AAAA,MACA,gBAAAyC;AAAA,MACA,aAAAE;AAAA,MACA,YAAAC;AAAA,MACA,SAAAF;AAAA,MACA,qBAAAI;AAAA,MACA,eAAA3C;AAAA,IAAA;AAAA,EAEJ;AACF,UAneiB,OAAM,eAAA,GAaZxD,KAAA,EAAA,OAAM,aAAA,uCArCjBW,KAAA,EAAA,OAAA,aAAA,GA+CoC0F,KAAM;AAAA,EAAA,KAAA;AAAA;GAiBLC,KAAM;AAAA,EAAA,KAAA;AAAA;;;;yEA9DjBC,IAAAnK,EAAA,cAAA;SAClBQ,EAAE,kBAHV4J,GAAA,IAAA,EAAA,UAAAlK,EAIqB,OAAA;AAAA,IAChB,KAAKM,EALV;AAAA,IAAA,OAAA6J,GAAA,EAAA,OAAA7J,EAAA,SAAA,OAAA,OAAA,KAAA;AAAA;;;;;;;;aAaiB8J,GAAS,CAAA,aAAAtG,EAAA,eAAAxD,EAAA,SAAA,WAAA,EAAA,WAAAwD,EAAA,UAAA,CAAA,CAAA;AAAA,IAAA,GAAA;AAAA,MAb1BA,EAAA,aAAA/D,KAAAC,EAAA,OAAA;AAAA,QAAA,KAAA;AAAA,QAcQ,OAAAoK,GAqBe,CAAA,cAAA,EAAA,QAAAtG,EAAA,UAAA,CAAA;AAAA,MAAA,GAAA;AAAA,QAnBL5D,EAAAmK,GAAA;AAAA,UACR,WAAQ;AAAA,UACR,OAAA;AAAA,UACC,SAAA;AAAA,UACA,gBAAW;AAAA,UAAA,cAAA;AAAA,UAQD,UAAS,CAAAvG,EAAA,mBAKZA,EAAA,oBAAAA,EAAA;AAAA,QAAA,GAAA;AAAA,qBAHJ1D,EAAA,MAEM;AAAA,YAAAuD,EAhCpB,OAAA,MAAA;AAAA,cAAAA,EAAA,OAAA;AAAA,gBA+BgB,OAAAyG,GAA4B,CAAA,EAAA,iBAAAtG,EAAA,mBAAVA,EAAA,oBAAAA,EAAA,WAAA,CAAA;AAAA,cAAA,GAAA;AAAA;;YA/BlC,CAAA;AAAA,UAAA,CAAA;AAAA,mBAuBY1D,EAAA,MAAqD;AAAA,YAAAuD,EACrD,OAEM1D,IAAA;AAAA,cAAA0D,EAAA,OAAAD,IAAAE,GAAAtD,EAAA,SAAA,QAAA,GAAA,CAAA;AAAA;YA1BlB,CAAA;AAAA,UAAA,CAAA;AAAA;QAAA,GAAA,GAAA,CAAA,UAAA,CAAA;AAAA,MAAA,SAsCQ4J,GAA2B,IAAA,EAAA;AAAA,MAAAvG,EAC3B,OA6BMU,IAAA;AAAA,QAAA9D,GApEdC,EAAA,QAAA,UAAA,CAAA,GAAA,QAAA,EAAA;AAAA,QAAAmD,EAAA,OAAA;AAAA;;;;;;;kCAuDwB3D,EAAW,gGACZD,EAAA,GAAAuE,GAAeC,GAAAT,EAAA,SAAA,GAAAwG,GAAA,EAAA,KAAA,EAAA,GAAAxG,EAAA,OAAA,OAAA;AAAA,YACzB,eAAMA,EAAQ;AAAA,YACd,UAAOA,EAAA;AAAA,YACP,MAAAxD,EAAA;AAAA,YACA,OAAAwD,EAAA;AAAA,YACA,gBAAOxD,EAAA;AAAA,YACP,uBAAMwD,EAAU;AAAA,YAAA,SAAAA,EAAA;AAAA,YATR,QAAAA,EAAA;AAAA,UAAA,CAAA,GAAA,MAAA,IAAA,CAAA,eAAA,YAAA,QAAA,SAAA,kBAAA,uBAAA,WAAA,QAAA,CAAA,IAAA;AAAA,YAWA,CAAAyG,IAAA,CAAAzG,EAAc,MAAA;AAAA,UAAA,CAAA;AAAA,UACvBA,EAAA,kBAAA/D,EAAA,GAAeC,EAAgB,OAAAgK,IAAA;AAAA,YAAA9J,EAAOsK,GAAY;AAAA,cAAA,MAAA;AAAA,cAClD,OAAA;AAAA,YAAA,CAAA;AAAA,YAlEZ7G,EAAA,QAAA8G,IAAA7G,GAAAE,EAAA,aAAA,OAAA,GAAA,CAAA;AAAA,UAAA,CAAA,KAsEQoG,GA0BM,IA1BN,EAAA;AAAA,QAAA,GACE,CAAA;AAAA,QAAAvG,EAGQ,OAAgB+G,IAAA;AAAA,UAAAnK,GAAAC,EAAA,QAFxB,UAxEV,CAAA,GAAA,QAAA,EAAA;AAAA,UAAAsD,EAAA,oBAAA/D,KA2EgBuE,GAAgBC,GAAAT,EAAA,gBAAA,GAAAwG,GAAA;AAAA,YAAA,KACZ;AAAA,YACP,KAAA;AAAA,UAAA,GACAxG,EAAM,OAAA,OAAQ;AAAA,YACd,eAAOA,EAAA;AAAA,YACR,MAAAxD,EAAS;AAAA,YACR,OAAAwD,EAAA;AAAA,YAAA,UAAA;AAAA,YAEU,uBAGMA,EAAA;AAAA,UAAA,CAAA,GAFf;AAAA,YAAA,SAAmB1D,EAAO,MAAA;AAAA,cAAAF,EAAQ+J,GAAO;AAAA,gBAAC,OAAO;AAAA,gBAAQ,QAAA;AAAA,gBAAA,SAAA;AAAA,gBApFvE,WAAA;AAAA,cAAA,GAAA;AAAA,gBAqFmC,SAAA7J,EAAC,MAAW;AAAA,kBAAAF,EAAOyK,GAAA;AAAA,oBAAA,OAAA;AAAA;;;;kBArFtD,CAAA;AAAA,gBAAA,CAAA;AAAA;cAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAAA,GAAA;AAAA,UAAA,GA2FkB,IAAA,CAAA,eAAe,QAAA,SAAY,qBAAS,CAAA,KAAAT,GAF5C,IAAA,EAMa;AAAA,UAAA5J,EA/FvB,cAAA,CAAAA,EAAA,YAAAA,EAAA,SAAA,cAAA,MAAA,CAAAwD,EAAA,oBAAAA,EAAA,OAAA,SAAA,KAAA/D,EAAA,GA4FwBuE,GAAEC,GAAuBT,EAAA,oBAAA,GAAA;AAAA,YACpC,KAAI;AAAA,YACJ,iBAAiB,OAAE,MAAA;AAAA,YAAA,MAAAA,EAAA,OAAA,MAAA;AAAA,YA9FhC,uBAAAA,EAAA;AAAA,UAAA,GAAA,MAAA,GAAA,CAAA,eAAA,QAAA,qBAAA,CAAA,KAAAoG,GAAA,IAAA,EAAA;AAAA;;IAAA,GAAA,CAAA;AAAA,EAAA,GAAA,CAAA;;;ACCE,SAAAU,GAAApK,GAAAuD,GAAA;SACEhE,EAAa,GAAAC,EAAA,OAAAC,IAAA;AAAA;;;uFCWjB4K,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAapI;AAAA,EAAA;AAAA,EAEf,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,OAAO;AAAA,EACf,MAAM/B,GAAO,EAAE,MAAAmC,KAAQ;AAQrB,WAAO;AAAA,MACL,YARiB0C,GAAS,MAAM7E,EAAM,KAAK,cAAc,QAAQ,MAAM,MAAM,CAAC;AAAA,MAS9E,aAPkB,CAACoK,MAAsB;;AACzC,SAAAnJ,IAAAmJ,EAAM,WAAN,QAAAnJ,EAAc,QACdkB,EAAK,SAASiI,CAAK;AAAA,MACrB;AAAA,IAIE;AAAA,EAEJ;AACF;;+BAhDEhL,EAKO,cAAA;AALiE,SAAAC,EAAA,GAAKC,EAAA,QAAE;AAAA,IAAA,OAAAoK,GAAA,CAAA,cAAA,EAAA,oBAAA9J,EAAA,aAAA,CAAA,CAAA;AAAA,IAC7E,SAAAyD,EAGe,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,YAAAE,CAAA;AAAA,EAAA,GAAA;AAAA,MAHwBiG,GAAI;AAAA,MAAG,QAAA;AAAA,MAAA,SAAA3J,EAAA;AAAA,MAFlD,WAAAA,EAGM;AAAA,IAAA,GAAA;AAAA,MAAA,SAAAF,EAAA,MAAA;AAAA,QAAA0D,EAAA,cAAA/D,EAAA,uCACwBuE,GAAIkG,GAAA;AAAA,UAAA,KAAA;AAAA;QAJlC,GAAA,MAAA,GAAA,CAAA,MAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCgDMO,KAAS;AAAA,EACb,oBAAoB;AAAA,EACpB,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,OAAO;AACT,GAEAC,KAAe;AAAA,EACb,YAAY;AAAA,IACV,YAAYC;AAAA,IACZ,WAAAC;AAAA,IACA,aAAAC;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA;AAAA;AAAA;AAAA,IAIL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,kBAAkB;AAAA,MAChB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,gBAAgB;AAAA,MACd,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAASC,GAAA;AAAA,IAAS;AAAA,IAEpB,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAACL,GAAO,oBAAoBA,GAAO,MAAMA,GAAO,QAAQA,GAAO,KAAKA,GAAO,KAAK;AAAA,EACvF,MAAMrK,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMQ,IAAQC,GAAS;AAAA,MACrB,cAAc;AAAA,IAAA,CACf,GAEK,EAAE,gBAAA+H,EAAA,IAAmBpD,GAAA,GAErBqD,IAAmB/F,GAAS,MACzB8F,EAAe3K,EAAM,SAAS,IAAI,CAC1C,GAEK6K,IAAmBhG,GAAS,MACzB7E,EAAM,MAAM,SAAS,MAAM,IAAI,SAAS,OAChD,GAEK8K,IAAajG,GAAS,MACnB,GAAGgG,EAAiB,KAAK,MAAMD,EAAiB,KAAK,IAC7D,GAEKG,IAAmBlG,GAAS,MAAM;;AAEtC,YAAMmG,MAAoB/J,IAAA,SAAS,cAAc,iBAAiB,MAAxC,gBAAAA,EAA2C,eAAc2J,EAAiB;AACpG,aAAO,GAAGC,EAAiB,KAAK,MAAMG,EAAkB,KAAK;AAAA,IAC/D,CAAC;AAED,IAAAC,GAAY,MAAM;;AAEhB,YAAMD,MAAoB/J,IAAA,SAAS,cAAc,iBAAiB,MAAxC,gBAAAA,EAA2C,eAAc2J,EAAiB;AACpG,MAAAM,GAAS,MAAM;;AACb,SAAAjK,IAAA,SAAS,cAAc,eAAe,MAAtC,QAAAA,EAAyC,MAAM,YAAY4J,EAAiB,OAAO,GAAGG,CAAiB;AAAA,MACzG,CAAC;AAAA,IACH,CAAC,GAEDC,GAAY,MAAM;AAChB,MAAAtI,EAAM,eAAe3C,EAAM;AAAA,IAC7B,CAAC;AAED,UAAMmL,IAAa,MAAM;AACvB,MAAAxI,EAAM,eAAe,CAACA,EAAM,cAC5BR,EAAKkI,GAAO,oBAAoB1H,EAAM,YAAY;AAAA,IACpD,GAEMyI,IAAqB,CAACC,MACnBA,IAAe,OAAO,QAIzBC,IAAczG,GAAS,MACvB7E,EAAM,WAAiB,KACpBA,EAAM,MAAM,SAAS,OAAO,IAAI,iBAAiB,aACzD;AAED,WAAO;AAAA,MACL,YAAA8K;AAAA,MACA,kBAAAC;AAAA,MACA,aAAAO;AAAA,MACA,kBAAAV;AAAA,MACA,OAAAjI;AAAA,MACA,YAAAwI;AAAA,MACA,oBAAAC;AAAA,IAAA;AAAA,EAEJ;AACF,GA9JW7L,KAAA,EAAA,OAAM,wBAAA,UAiBR,OAAM,8BAAA;;uDAjCbH,EAoCM,cAAA;SAlCEC,EAAA,GAHVC,EAAA,OAAA;AAAA,IAAA,IAAA;AAAA,IAG8D,OAAAoK,GAAA;AAAA,MAAA;AAAA,wBAAgF9J,EAAA,SAAA;AAAA,MAAiC,EAAA,eAAAwD,EAAW,MAAA,aAAA;AAAA,MAAA,EAAA,eAAAxD,EAAA,MAAA,SAAA,OAAA,EAAA;AAAA,MAOrLwD,EAVL;AAAA,IAAA,CAWK;AAAA,IAAA,OAAAqG,GAAA7J,EAAA,WAAAwD,EAAA,mBAAAA,EAAA,UAAA;AAAA,IAED,SAAAC,EAAA,CAAA,MAmBMA,EAnBN,CAAA,IAAA,CAAAC,MAmBMxD,EAAA,MAAA,OAAA;AAAA,EAAA,GAAA;AAAA,IAjBFmD,EAAA,OAA4D1D,IAA5D;AAAA,MAAAM,GAAAC,EAAA,QAAA,SAAA,CAAA,GAAA,MAAA;AAAA,QAEFmD,EAcM,QAdND,IAcME,GAAAtD,EAAA,KAAA,GAAA,CAAA;AAAA,MAAA,GAbJ,EAAA;AAAA,MAAAqD,EAWiB,OAAAQ,IAAA;AAAA,QAAA5D,GA7BzBC,EAAA,QAoBqH,UAAA,CAAA,GAAA,MAAA;AAAA,UAAAN,EAArF+L,GAAY,MAAA;AAAA,YAAA,SAAA7L,EAAA,MAAhC;AAAA,cAAAE,EApBZ,kBAqBY,IAAA,EAEc,UAH+BgE,GAAA4H,GAAA;AAAA,gBAAE,KAAA;AAAA,gBAAsB,MAAK;AAAA,gBAAA,SAAAnI,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAxD,EAAA,MAAA,MAAA;AAAA,gBApBtF,OAAA;AAAA,cAAA,GAAA;AAAA;kBAAA+B,GAAA,IAAA;AAAA,gBAAA,CAAA;AAAA,gBAAA,GAAA;AAAA,cAAA;cAuB0BjC,EAvB1B,qBAqBoDgE,GAAI4H,GAAA;AAAA,gBAAE,KAAI;AAAA,gBAAS,MAAA5L,EAAK;AAAA,gBAAA,MAAA;AAAA,gBArB5E,SAAAyD,EAAA,CAAA,MAsBkCA,EAAA,CAAA,IAAA,CAAAC,MAAAxD,EAAA,MAAA,KAAA;AAAA,cAAA,GAAA;AAAA;kBAtBlC+B,GAAAqB,GAAAtD,EAAA,cAAA,GAAA,CAAA;AAAA,gBAAA,CAAA;AAAA,gBAAA,GAAA;AAAA,cAAA,GAwBuB,GAAA,CAAA,MAAA,CAAA,KAAA4J,GAAX,IAAA,EAAA;AAAA,cAAA5J,EAxBZ,yBAwB+CN,EAAQ,OAAA;AAAA,gBAAE,KAAA;AAAA,gBAAA,OAAA;AAAA,gBACxB,SAAA+D,EAAM,CAAA,MAAAA,EAAY,CAAA,IAAA,IAAAoI,MAAArI,EAAA,cAAAA,EAAA,WAAA,GAAAqI,CAAA;AAAA,cAAA,GAAA;AAAA,gBAzBnDrI,EAAA,MAAA,kBA0Bc,IAAA,EAA6E,KA1B3F/D,EAAA,GAyB0DuE,GAAa8H,GAAA;AAAA,kBAAA,KAAA;AAAA,kBAzBvE,MAAA;AAAA,gBAAA;gBA0B2FtI,EA1B3F,2BA0ByDQ,GAAoB8H,GAAA;AAAA,kBAAA,KAAA;AAAA,kBA1B7E,MAAA;AAAA,gBAAA,CAAA,KAAAlC,GAAA,IAAA,EAAA;AAAA,cAAA,MA4BwBA,GAAY,IAAA,EAAA;AAAA,cAAAhK,EAAOkM,GAAA;AAAA,gBAAA,MAAA;AAAA;cA5B3C,CAAA;AAAA,YAAA,CAAA;AAAA;;;MAiCI,CAAA;AAAA,IAAA,CACA;AAAA,IAAA7L,GACEC,EAA4B,QAAA,YAAA,CAAA,GAAA,QAAA,EAAA;AAAA,IAAAmD,EAAA,OAAAU,IAAA;AAAA;;;;uFChBlCgI,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAAC;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAEJ,GAjCArM,KAAA,EAAA,OAAA,cAAA;;+BACEH,EAAA,cAaO;SAZSC,EAAA,GAAcC,EAAA,QAAAC,IAAA;AAAA,IAAAC,EAAW+J,GAAI;AAAA,MAAA,QAAA;AAAA,MAC9B,SAAO3J,EAAA;AAAA,IAAA,GAAA;AAAA,eAIPF,EAAI,MAAA;AAAA,QAAAuD,EAAb,OAAAD,IAGIE,GAAAtD,EAAA,IAAA,GAAA,CAAA;AAAA,QAAAA,EAVZ,aAO6BN,EAAU,KAAA;AAAA,UAAE,KAAI;AAAA,UAAQ,OAAM;AAAA,UAAA,MAAAM,EAAA;AAAA,UACjD,QAAA;AAAA,QAAA,GARV;AAAA,UAAAJ,EAAAsK,GAAA,EAAA,MAAA,OAAA,CAAA;AAAA,UAAAjI,GAAA,QAAA;AAAA,QAAA,GAAA,GAAA4B,EAAA,KAAA+F,GAY0D,IAAA,EAAA;AAAA,MAAA,CAAA;AAAA;QAZ1DhK,EAAAsK,GAAA,EAAA,MAAA,0BAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCUA+B,KAAe;AAAA,EACb,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAM7L,GAAO;AAGX,WAAO;AAAA,MACL,YAHiB6E,GAAS,MAAM7E,EAAM,KAAK,cAAc,QAAQ,MAAM,MAAM,CAAC;AAAA,IAG9E;AAAA,EAEJ;AACF;;YAvBEZ,EAGO,UAAA;AAHkB,SAAAC,EAAA,GAAKC,EAAA,QAAEwM;AAAAA,IAAAA,OAAAA;AAAAA,aACFzI,EAAA,CAAA,MAAUA,EAAA,CAAA,IAAA,CAAAC,MAAAxD,EAAA,MAAA,OAAA;AAAA,EAAA,GAAA;AAAA,IAF1CsD,EAAA,cAAA/D,EAAA,GAAAuE,GAAAC,GAAAjE,EAAA,IAAA,GAAA,EAAA,KAAA,EAAA,CAAA,MAAAP,EAAA,GAG4BuE,GAAIkG,GAAA;AAAA,MAAA,KAAA;AAAA;;;;uFCiDhCiC,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAahK;AAAA,IACb,YAAAiK;AAAA,IACA,WAAAC;AAAA,IAAA,WACAzB;AAAAA,EAAA;AAAA,EAEF,OAAO;AAAA;AAAA;AAAA;AAAA,IAIL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,gBAAgB;AAAA,MACd,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,aAAa;AAAA,MACX,MAAM;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKR,WAAW;AAAA,MACT,MAAM;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKR,kBAAkB;AAAA,MAChB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKX,oBAAoB;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,SAAS,sBAAsB;AAAA,EACvC,MAAMxK,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM+J,IAAa,MAAM;AACvB,MAAA/J,EAAK,OAAO;AAAA,IACd,GAEM,EAAE,sBAAAgK,MAAyBC,IAE3BC,IAAYF,GACZG,IAAY,KACZC,IAAQxH,GAAwB,IAAI;AAC1C,QAAIyH,IAAS,GACTC,IAAa,GACbC,IAAuB;AAE3B,UAAMC,IAAc5H,GAAI,EAAK,GACvB6H,IAAc/H,GAAS,MAAO8H,EAAY,QAAQ,iBAAiB,YAAa;AAEtF,IAAA/D,GAAQ,eAAe+D,CAAW;AAMlC,UAAME,IAAa5H,GAAmB,YAAY,GAC5C6H,IAAW,MAAM;AACrB,MAAAD,KAAA,QAAAA,EAAY,UAAU,YAAY7M,EAAM;AAAA,IAC1C,GAEM+M,IAAmBlI,GAAS,MAAO7E,EAAM,mBAAmB,uBAAuB,EAAG,GAEtF,EAAE,gBAAA2K,GAAgB,mBAAAqC,GAAmB,mBAAAC,GAAmB,wBAAAC,GAAwB,uBAAAC,EAAA,IACpF5F,GAAA,GAEI6F,IAAQrI,GAAIkI,EAAkBjN,EAAM,SAAS,CAAC,GAC9CqN,IAAatI,GAAI4F,EAAe3K,EAAM,SAAS,CAAC,GAChDsN,IAAgBvI,GAAIqI,EAAM,MAAM,SAAS,MAAM,CAAC,GAChDG,IAAiBxI,GAAIqI,EAAM,MAAM,SAAS,OAAO,CAAC,GAClDI,IAAmB3I,GAAS,MAAMsI,EAAsBnN,EAAM,SAAS,CAAC,GAExEyN,IAAc,CAACC,OAAqB;AACxC,MAAIhB,KACF,qBAAqBA,CAAK,GAG5BA,IAAQ,sBAAsB,MAAM;AAClC,QAAAW,EAAW,QAAQ,KAAK,IAAIhB,GAAW,KAAK,IAAIqB,IAAUpB,CAAS,CAAC,GACpEU,EAAkBhN,EAAM,WAAWqN,EAAW,KAAK;AAAA,MACrD,CAAC;AAAA,IACH,GAEMM,IAAmB,CAACvD,OAAsB;AAC9C,YAAMsD,IAAWjB,KAAcrC,GAAM,UAAUoC;AAC/C,MAAAiB,EAAYC,CAAQ;AAAA,IACtB,GAEME,IAAkB,CAACxD,OAAsB;AAC7C,YAAMsD,IAAWjB,KAAcrC,GAAM,UAAUoC;AAC/C,MAAAiB,EAAYC,CAAQ;AAAA,IACtB,GAGMG,IAA0BC,GAAcH,GAAkB,EAAE,GAC5DI,IAAyBD,GAAcF,GAAiB,EAAE,GAI1DI,IAAcjJ,GAAoB,IAAI,GACtCkJ,IAAelJ,GAAoB,IAAI,GAEvCmJ,KAAiB,MAAM;AAC3B,MAAAhB,EAAuB,EAAK,GAC5B,SAAS,oBAAoB,aAAaW,CAAuB,GACjE,SAAS,oBAAoB,WAAWK,EAAc,GACtD,SAAS,KAAK,MAAM,SAAS,IACzBD,EAAa,SACfA,EAAa,MAAM,UAAU,OAAO,UAAU,GAI5CvB,MACF,qBAAqBA,CAAK,GAC1BA,IAAQ;AAAA,IAEZ,GAEMyB,KAAmB,CAAC/D,OAAsB;;AAC9C,MAAA8C,EAAuB,EAAI,GAC3BV,IAASpC,GAAM,SACfqC,MAAaxL,IAAAsL,EAAM,UAAN,gBAAAtL,EAAa,gBAAe,GACzC,SAAS,iBAAiB,aAAa4M,CAAuB,GAC9D,SAAS,iBAAiB,WAAWK,EAAc,GACnD,SAAS,KAAK,MAAM,SAAS,cACzBD,EAAa,SACfA,EAAa,MAAM,UAAU,IAAI,UAAU;AAAA,IAE/C,GAEMG,KAAgB,MAAM;AAC1B,MAAAlB,EAAuB,EAAK,GAC5B,SAAS,oBAAoB,aAAaa,CAAsB,GAChE,SAAS,oBAAoB,WAAWK,EAAa,GACrD,SAAS,KAAK,MAAM,SAAS,IACzBJ,EAAY,SACdA,EAAY,MAAM,UAAU,OAAO,UAAU,GAG3CtB,MACF,qBAAqBA,CAAK,GAC1BA,IAAQ;AAAA,IAEZ,GAEM2B,KAAkB,CAACjE,OAAsB;;AAC7C,MAAA8C,EAAuB,EAAI,GAC3BV,IAASpC,GAAM,SACfqC,MAAaxL,IAAAsL,EAAM,UAAN,gBAAAtL,EAAa,gBAAe,GACzC,SAAS,iBAAiB,aAAa8M,CAAsB,GAC7D,SAAS,iBAAiB,WAAWK,EAAa,GAClD,SAAS,KAAK,MAAM,SAAS,cACzBJ,EAAY,SACdA,EAAY,MAAM,UAAU,IAAI,UAAU;AAAA,IAE9C,GAEMM,KAAiB,MAAM;AAC3B,YAAMC,KAAS,SAAS,cAAc,eAAe,GAC/CC,IAAU,SAAS,cAAc,gBAAgB;AACvD,MAAID,cAAkB,gBACpBP,EAAY,QAAQO,KAElBC,aAAmB,gBACrBP,EAAa,QAAQO;AAAA,IAEzB,GACMC,KAAoB,MAAM;AAC9B,MAAA9B,EAAY,QAAQ,CAACA,EAAY,OACjCxK,EAAK,wBAAwBwK,EAAY,KAAK;AAAA,IAChD;AAEA,WAAA+B,GAAU,MAAM;AACd,MAAAJ,GAAA;AAAA,IACF,CAAC,GAEM;AAAA,MACL,kBAAAd;AAAA,MACA,kBAAAT;AAAA,MACA,mBAAA0B;AAAA,MACA,aAAA9B;AAAA,MACA,aAAAC;AAAA,MACA,YAAAV;AAAA,MACA,UAAAY;AAAA,MACA,OAAAP;AAAA,MACA,YAAAc;AAAA,MACA,kBAAAc;AAAA,MACA,iBAAAE;AAAA,MACA,eAAAf;AAAA,MACA,gBAAAC;AAAA,IAAA;AAAA,EAEJ;AACF,GA5QWhO,KAAA,EAAA,OAAM,qBAAA,UAsBR,OAAM,QAAA,GA/BfkE,KAAA,EAAA,OAAA,oBAAA;;;4EACErE,EAsCM,cAAA;SAtCwBC,EAAA,GAAOC,EAAA,OAAA;AAAA,IAAE,OADzC;AAAA,IAAA,KAAA;AAAA,IAEI,OAAAmK,GA4BM,EAAA,OAAArG,EAAA,aAAA,KAAA,CAAA;AAAA,EAAA,GAAA;AAAA;MA3BJ,OAAAsG,GAKM,CAAA,uBAAAtG,EAAA,gBAAA,CAAA;AAAA,IAAA,GAAA;AAAA,QARZ,OAAA7D,IAKc;AAAA,QAAA0D,EAAwC,QAAcD,IAAA;AAAA,UAAAnB,GAAAqB,GACpEtD,EAAA,KAAA,GAAA,CAAA;AAAA,UAAAA,EANA,uBAK+CgE,GAAA+K,GAAA;AAAA,YAAwB,KAAI;AAAA,YAAgB,OAAM;AAAA,YAAA,MAAA/O,EAAA;AAAA,YALjG,MAAAA,EAAA;AAAA,UAAA,GAAA,MAAA,GAAA,CAAA,QAAA,MAAA,CAAA,KAO0B4J,GAAW,IAAA,EAAA;AAAA,QAAA,CAAA;AAAA,QAPrC5J,EAAA,eAAAP,KAO8CuE,GAAIgL,GAAA;AAAA,UAAG,KAAA;AAAA,UAAA,MAAAhP,EAAA;AAAA,UAPrD,SAAAwD,EAAA;AAAA,QAAA,GAAA,MAAA,GAAA,CAAA,QAAA,SAAA,CAAA,KASMoG,GAoBM,IApBN,EAAA;AAAA,MAAA,CAAA;AAAA,QAGU,OAAA/F,IAAkB;AAAA,QAAA5D,GAAAC,EAAA,QAD1B,UAUe,CAAA,GAAA,QAAA,EAAA;AAAA,QAAAF,EArBvB,2BAaiBgE,GAAO2F,GAAA;AAAA,UACb,KAAA;AAAA,UACD,QAAA;AAAA,UACC,WAAa,cAAO,OAAA;AAAA,UAAA,WAAA;AAAA,UAEV,iBAAO;AAAA,QAAA,GAAA;AAAA,mBACC7J,EAAE,MAAA;AAAA,YAAAF,EAAqBkM,GAAiB;AAAA,cAAA,MAAAtI,EAAA;AAAA;YAnBrE,GAAA,MAAA,GAAA,CAAA,QAAA,SAAA,CAAA;AAAA,UAAA,CAAA;AAAA,UAAA,GAAA;AAAA,QAAA,GAsBQ,GAAA,CAAA,SAKc,CAAA,KAJZoG,GAAM,IAAmB,EAAA;AAAA,QAAAhK,EAClBkM,GAAqB;AAAA,UAC3B,OAAO;AAAA,UACP,aAAO,0BAAQ,SAAA9L,EAAA,aAAA,gBAAA;AAAA,UAAA,OAAA6C,IAAA7C,EAAA,gBAAA,QAAA6C,EAAA,SAAA7C,EAAA,aAAA,WAAA;AAAA,UAEC,SAAAwD,EAAA;AAAA,QAAA,GAAA,MAAA,GAAA,CAAA,QAAnB,QAAA,SAA8E,CAAA;AAAA,QAAAxD,EA5BtF,cAAA4J,GAAA,IAAA,EAAA,UA4B+C5F,GAAIgL,GAAA;AAAA,UAAG,KAAA;AAAA,UAAA,MAAAhP,EAAA;AAAA,UA5BtD,SAAAwD,EAAA;AAAA,QAAA,GAAA,MAAA,GAAA,CAAA,QAAA,SAAA,CAAA;AAAA,MA+BI,CAAA;AAAA,IAAA,GACE,CAAA;AAAA,IAAAH,EAAA,OAAAU,IAAA;AAAA,MAGS9D,GAAAC,EAAA,QAAgB,WAAA,CAAA,GAAA,QAAA,EAAA;AAAA,IAAA,CAAA;AAAA,IACQsD,EAAA,oBAAA/D,EAAA,GAAAC,EAAjC,OAAoF+J,IAAA;AAAA,MAAAjG,EApC1F,sBAoCiB9D,EAAe,OAAA;AAAA,QAAuB,KAAA;AAAA,QAAA,OAAA;AAAA,QApCvD,aAAA+D,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAAoI,MAAArI,EAAA,oBAAAA,EAAA,iBAAA,GAAAqI,CAAA;AAAA,MAAA,GAqCsC,MAAA,EAAA,KAAAjC,GAAhC,IAAA,EAAA;AAAA,MAAApG,EArCN,uBAqCiB9D,EAAc,OAAA;AAAA,QAAwB,KAAA;AAAA,QAAA,OAAA;AAAA,QArCvD,aAAA+D,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAAoI,MAAArI,EAAA,mBAAAA,EAAA,gBAAA,GAAAqI,CAAA;AAAA,MAAA,GAAA,MAAA,EAAA,KAAAjC,GAAA,IAAA,EAAA;AAAA,IAAA,CAAA,KAAAA,GAAA,IAAA,EAAA;AAAA;;uFC0BKqF,KAAU;AAAA,EACb,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA;IAER,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA;EAEF,OAAO,CAAC,SAAS,aAAa;AAAA,EAC9B,MAAM7O,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM,EAAE,gBAAA2M,GAAgB,mBAAAC,GAAmB,iBAAAC,EAAc,IAAMzH,GAAS,GAClE0H,IAAsBlK,GAAI,EAAE,GAC5BmK,IAActM,GAAS;AAAA,MAC3B,MAAM;AAAA,MACN,SAAS;AAAA,MACT,GAAG;AAAA,MACH,GAAG;AAAA,MACH,MAAM;AAAA,MACN,OAAO;AAAA,MACP,MAAM;AAAA,KACP,GAGKuM,IAAmBnP,EAAM,MAAM,SAAS,OAAO,IAAI,MAAM,GACzDoP,IAAkB,CAACC,GAAGC,GAAG9O,GAAMM,GAAMX,GAAOoP,MAAa;AAC7D,YAAMC,IAAe,OAAO;AAE5B,MAAAN,EAAY,OAAO1O,GACnB0O,EAAY,UAAU,IAEtBhE,GAAS,MAAM;AACb,cAAMuE,IAAkB,SAAS,cAAc,sBAAsB,GAC/DC,IAAaD,KAAA,gBAAAA,EAAiB,cAE9BE,IAAaH,IAAeF,IAAI;AAEtC,QAAII,KAAcC,IAAaD,IAC7BR,EAAY,IAAII,IAAII,IAEpBR,EAAY,IAAII,GAGlBJ,EAAY,IAAIG,IAAIF;AAAA,MACtB,CAAC,GAEG3O,MACF0O,EAAY,OAAOpO,GACnBoO,EAAY,QAAQ/O,GACpB8O,EAAoB,QAAQM;AAAA,IAEhC,GAGMK,IAAkB,MAAM;AAC5B,MAAAV,EAAY,UAAU;AAAA,IACxB,GAGMW,IAAa,MAAM;AACvB,MAAA1N,EAAK,OAAO,GACZ4M,EAAkBG,EAAY,KAAK,EAAE,GACrCU,EAAe;AAAA,IACjB,GAGME,IAAc,MAAM;AACxB,MAAA3N,EAAK,OAAO,GACZA,EAAK,eAAe+M,EAAY,OAAOA,EAAY,KAAK,IAAID,EAAoB,KAAK,GACrFW,EAAe;AAAA,IACjB,GAGMG,IAAc,MAAM;AACxB,YAAM3C,IAAQpN,EAAM,MAAM,SAAS,OAAO,IAAI,UAAU;AACxD,MAAAgP,EAAgB5B,CAAK,GACrBwC,EAAe;AAAA,IACjB,GAGMI,IAAkB,CAACC,MAAe;AACtC,MAAAlB,EAAkBkB,CAAU;AAAA,IAC9B,GAEMC,IAAqB,CAAC9F,MAAU;AACpC,MAAKA,EAAM,OAAO,QAAQ,sBAAsB,KAC9CwF,EAAe;AAAA,IAEnB;AAEA,WAAAlB,GAAU,MAAM;AACd,eAAS,iBAAiB,SAASwB,CAAkB;AAAA,IACvD,CAAC,GAEDC,GAAgB,MAAM;AACpB,eAAS,oBAAoB,SAASD,CAAkB;AAAA,IAC1D,CAAC,GAEM;AAAA,MACL,aAAAhB;AAAA,MACA,iBAAAE;AAAA,MACA,iBAAAY;AAAA,MACA,gBAAAlB;AAAA,MACA,YAAAe;AAAA,MACA,aAAAC;AAAA,MACA,aAAAC;AAAA,IACF;AAAA,EACF;AACF;;SAvIAvG,GAAA,IAAA,EAAA;;uFC0CA4G,KAAe;AAAA,EACb,YAAY;AAAA,IACV,cAAclR;AAAA,IACd,kBAAkBC;AAAA,IAClB,aAAAkR;AAAA,IACA,YAAAC;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM,CAAC,OAAO,MAAM;AAAA,MACpB,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA,IAElB,QAAQ;AAAA,IACR,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,YAAY,eAAe,cAAc;AAAA,EACjD,MAAMtQ,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMoO,IAAcxL,GAAI,EAAE,GAEpByL,IAAc,CAAClP,MAAuC;AAC1D,YAAMmP,IAAM,CAAA;AAEZ,aAAAnP,KAAA,QAAAA,EAAM,QAAQ,CAAC,EAAE,SAAAT,QAAc;AAC7B,QAAIA,EAAQ,UACVA,EAAQ;AAAA,UACN,CAACC,MAAwG;;AACvG,kBAAM4P,KAAYzP,IAAAH,EAAK,WAAL,QAAAG,EAAa,SAASuP,EAAY1P,EAAK,MAAM,IAAI,CAAA;AAEnE,YAAA4P,EAAK,WAAW,CAACpO,MAAe;AAC9B,cAAAxB,EAAK,OAAO,MAAM,aAAawB;AAAA,YACjC,GACAmO,EAAI3P,EAAK,QAAQ,IAAI4P;AAAA,UACvB;AAAA,QAAA;AAAA,MAGN,IAEOD;AAAA,IACT,GAEMvL,IAAWL,GAAS,MAAM2L,EAAYxQ,EAAM,QAAQ,CAAA,CAAE,CAAC;AAE7D,IAAA4I,GAAQ,YAAY1D,CAAQ;AAE5B,UAAMyL,IAAc,CAACrP,MAAca,EAAK,eAAeb,CAAI,GACrDsP,IAAe,CAACtP,MAAca,EAAK,gBAAgBb,CAAI,GAEvDuP,IAAoB,CAACvP,MAAA;;AACzB,eAAAgE,KAAA7C,KAAAxB,IAAAK,KAAA,gBAAAA,EAAM,WAAN,gBAAAL,EAAA,KAAAK,GAAe,CAACR,MAAwB,CAACA,EAAK,UAA9C,gBAAA2B,EAAqD,QAArD,gBAAA6C,EAAA,KAAA7C,GAA2D,CAAC3B,GAAWX,MAAeA,OAAU,CAAA;AAAA;AAElG,IAAA8K,GAAY,MAAM;AAChB,MAAAsF,EAAY,QAAQM,EAAkB7Q,EAAM,IAAI;AAAA,IAClD,CAAC;AAED,UAAM8Q,IAAajM,GAAS,MAAM7E,EAAM,IAAI;AAE5C,WAAO,EAAE,aAAA2Q,GAAa,cAAAC,GAAc,aAAAL,GAAa,YAAAO,EAAA;AAAA,EACnD;AACF;;sFAtGE1R,EAAA,eAiCM;AAlCR,SAAAC,EAAA,GAE4BC,EAAW,OAAAC,IAAA;AAAA,IAAAC,EAFvCC,GAAA;AAAA,MAAA,YAAA2D,EAAA;AAAA,MAAA,uBAG6DC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,cAAAE;AAAA,IAAA,GAAA;AAAA;WAAO,EAAK,GAAAhE,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,MAAA,CAAAK,GAAA8Q,OAAS1R,EAAA,GAAUuE,GAAAjE,GAAA;AAAA,UAAA,KAAAM;AAAA,UACzE,MAAK8Q;AAAA,QAAA,GAAA;AAAA,UAEZ,OAAArR,EAAA,MAAA;AAAA,YAAAG,GAAWC,UAAE,SAAA,EAAA,OAAAG,EAAA,GAAkB,MAAA;;AAAA;AAAA,gBAAAgD,EAC1B,OAAM;AAAA,kBAAA,SAAA,CAAAK,MAAAF,EAAA,aAAAnD,CAAA;AAAA;cAPvB;AAAA,aAAA;AAAA,UAAA,CAAA;AAAA,mBAW4BP,EAAO,MAAA;AAAA,YAAAF,EAAUwR,GAAU;AAAA,cAAG,OAAA/Q;AAAA,cAAiB,OAAA8Q;AAAA,cAAA,QAAAnR,EAAA;AAAA,cACtD,WAAIA,EAAI;AAAA,YAAA,GAAA;AAAA,cAEd,MAAAF,EAAK,CAAA,EAAS,MAAA4B,GAAA,WAAAC,EAAA,MAAA;AAAA,iBAAAlC,EAAA,GACFuE,GAAAqN,GAAU;AAAA,kBACtB,KAAA1P;AAAA,kBACA,YAAA6B,EAAiB;AAAA,kBACjB,UAAA9B;AAAA,kBACA,mBAAgBC;AAAA,kBAChB,oBAAYwP;AAAA,kBACZ,YAAK;AAAA,kBAAA,OAAA9Q;AAAA,kBAEK,SAAM,CAAAqD,MACyBF,EAAA,YAAA9B,CAAA;AAAA,gBAAA,GAAA4P,GAAA;AAAA,kBAAA,QAAAxR,EAAA,MAAA;AAAA,oBAxBxDG,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAwB,EAAA,CAAA;AAAA,kBAAA,CAAA;AAAA,kBA0B+B,GAAA;AAAA,gBAAA,GAAA;AAAA,kBA1B/BA,EAAA,YAAA,SAAA;AAAA,oBA2BgB,MAAA;AAAA,oBAAA,IAAA5B,EAAA,MAAA;AAAA,sBA3BhBG,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAwB,EAAA,CAAA;AAAA,oBAAA,CAAA;AAAA,oBAAA,KAAA;AAAA,kBAAA;AAAA,gBAAA,CAAA,GAAA,MAAA,CAAA,cAAA,YAAA,mBAAA,oBAAA,SAAA,SAAA,CAAA;AAAA,cAAA,CAAA;AAAA;YAAA,GAAA,MAAA,CAAA,SAAA,SAAA,UAAA,WAAA,CAAA;AAAA,UAAA,CAAA;AAAA;2BAAA,GAAA,GAAA;AAAA,MAAA,CAAA;AAAA;;;;qDCoBA6P,KAAe;AAAA,EACb,YAAY;AAAA,IACV,UAAUC;AAAA,IACV,cAAcC;AAAA,IACd,WAAWC;AAAA,IACX,YAAY/G;AAAA,EAAA;AAAA,EAEd,OAAO;AAAA,IACL,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAMvK,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMoP,IAAY,OAAO,KAAKvR,EAAM,MAAM,GACpCwR,IAAW5O,GAAS,EAAE,GAAG5C,EAAM,QAAQ;AAqB7C,WAAO;AAAA,MACL,WAAAuR;AAAA,MACA,UAAAC;AAAA,MACA,mBAtBwB;AAAA,QACxB,OAAO;AAAA,QACP,MAAM;AAAA,QACN,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,aAAa;AAAA,QACb,cAAc;AAAA,MAAA;AAAA,MAed,QAZa,MAAM;AACnB,QAAArP,EAAK,QAAQ;AAAA,MACf;AAAA,MAWE,SATc,MAAM;AACpB,QAAAA,EAAK,WAAWqP,CAAQ;AAAA,MAC1B;AAAA,IAOE;AAAA,EAEJ;AACF;;4EAnEEC,IAAArS,EAYM,WAZN;AACa,SAAAC,EAAA,GAAeC,EAAM,OAAAC,IAAA;AAAA,IAAAC,EAACiS,GAAkB;AAAA,MAAA,kBAAA;AAAA,MAFvD,eAAA;AAAA,IAAA,GAAA;AAAA;WAI8B,EAAA,GAAAnS,EAAuBiE,IAAA,MAAAC,GAAAJ,EAAA,WAAA,CAAAsO,YAA7CpS,EAEiBiE,IAAA,EAAA,KAAAmO,KAAA;AAAA,UAAAtO,EANzB,6BAIgEQ,GAAA+N,GAAiC;AAAA,YAAA,KAAA;AAAA,YAJjG,OAAAvO,EAAA,kBAK6DsO,CAAA,KAAAA;AAAA,UAAA,GAAA;AAAA,qBAL7DhS,EAK+B,MAAA;AAAA,cAAAF,EAL/BoS,GAAA;AAAA,gBAAA,YAAAxO,EAAA,SAAAsO,CAAA;AAAA;cAAA,GAAA,MAAA,GAAA,CAAA,cAAA,qBAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAAA,GAAA;AAAA,UAAA,GAAA,MAAA,CAAA,OAAA,CAAA,KAAAlI,GAAA,IAAA,EAAA;AAAA,QAQM,GAAA,EAAA,EAAA,GAAiB,GAAK;AAAA,QAAAhK,EAAAmS,GAAA;AAAA,UAR5B,OAAAjI,GASqD,EAAA,eAAA9J,EAAA,cAAA,CAAA;AAAA,QAAA,GAAA;AAAA,mBATrDF,EAAA,MASuC;AAAA,YAAAF,EATvCgM,GASuC,EAAA,SAAApI,EAAA,OAAA,GAAA;AAAA,cAAA,SAAA1D,EAAA,MAAA;AAAA,gBATvCmC,GAAA,IAAA;AAAA,cAAA,CAAA;AAAA,cAUQ,GAAA;AAAA,YAAA,GAVR,GAAA,CAAA,SAAA,CAAA;AAAA,YAAArC,EAAAgM,GAUwC,EAAA,SAAApI,EAAA,QAAA,GAAA;AAAA,cAAA,SAAA1D,EAAA,MAAA;AAAA,gBAVxCmC,GAAA,IAAA;AAAA,cAAA,CAAA;AAAA;YAAA,GAAA,GAAA,CAAA,SAAA,CAAA;AAAA,UAAA,CAAA;AAAA;QAAA,GAAA,GAAA,CAAA,OAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCWAgQ,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAa9P;AAAA,EAAA;AAAA,EAEf,OAAO;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA,EAClB;AAAA,EAEF,MAAM/B,GAAO,EAAE,MAAAmC,KAAQ;AAKrB,WAAO;AAAA,MACL,eALoB,CAACrB,MAAc;AACnC,QAAAqB,EAAK,gBAAgBrB,CAAI;AAAA,MAC3B;AAAA,IAGE;AAAA,EAEJ;AACF;;AA7BE,QAAAyI,IAAAnK,EAIO,cALT;SACoDC,EAAO,EAAA,GAAAC,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,SAAA,CAAAkS,GAAA3R,OAAOd,EAAA,GAAcC,EAAA,QAAA;AAAA,IAAE,KAAAa;AAAA,IAAA,OAAA;AAAA,IAC9E,SAAA,CAAAmD,MAEeF,EAAA,cAAA0O,CAAA;AAAA,EAAA,GAAA;AAAA,MAFmBvI,GAAO;AAAA,MAAE,OAAO;AAAA,MAAqB,QAAA;AAAA,MAAA,SAAAuI,EAAA;AAAA,MAF3E,WAAA;AAAA,IAAA,GAAA;AAAA;SAAAzS,EAAA,GAAAuE,GAAAC,GAAAiO,EAAA,IAAA,CAAA;AAAA,MAAA,CAAA;AAAA,MAAA,GAAA;AAAA,IAAA,GAAA,MAAA,CAAA,SAAA,CAAA;AAAA;;uFCKAC,KAAe;AAAA,EACb,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAEJ;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,SAASC,GAAQC,GAAQC,GAAgB;AACvC,MAAIC,IAAO,OAAO,KAAKF,CAAM;AAE7B,MAAI,OAAO,uBAAuB;AAChC,QAAIG,IAAU,OAAO,sBAAsBH,CAAM;AAEjD,IAAIC,MACFE,IAAUA,EAAQ,OAAO,SAAUC,GAAK;AACtC,aAAO,OAAO,yBAAyBJ,GAAQI,CAAG,EAAE;AAAA,IACtD,CAAC,IAGHF,EAAK,KAAK,MAAMA,GAAMC,CAAO;AAAA,EAC/B;AAEA,SAAOD;AACT;AAEA,SAASG,GAAeC,GAAQ;AAC9B,WAAStK,IAAI,GAAGA,IAAI,UAAU,QAAQA,KAAK;AACzC,QAAIuK,IAAS,UAAUvK,CAAC,KAAK,OAAO,UAAUA,CAAC,IAAI,CAAA;AAEnD,IAAIA,IAAI,IACN+J,GAAQ,OAAOQ,CAAM,GAAG,EAAI,EAAE,QAAQ,SAAUC,GAAK;AACnD,MAAAC,GAAgBH,GAAQE,GAAKD,EAAOC,CAAG,CAAC;AAAA,IAC1C,CAAC,IACQ,OAAO,4BAChB,OAAO,iBAAiBF,GAAQ,OAAO,0BAA0BC,CAAM,CAAC,IAExER,GAAQ,OAAOQ,CAAM,CAAC,EAAE,QAAQ,SAAUC,GAAK;AAC7C,aAAO,eAAeF,GAAQE,GAAK,OAAO,yBAAyBD,GAAQC,CAAG,CAAC;AAAA,IACjF,CAAC;AAAA,EAEL;AAEA,SAAOF;AACT;AAEA,SAASI,GAAQlC,GAAK;AACpB;AAEA,SAAI,OAAO,UAAW,cAAc,OAAO,OAAO,YAAa,WAC7DkC,KAAU,SAAUlC,GAAK;AACvB,WAAO,OAAOA;AAAA,EAChB,IAEAkC,KAAU,SAAUlC,GAAK;AACvB,WAAOA,KAAO,OAAO,UAAW,cAAcA,EAAI,gBAAgB,UAAUA,MAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,EAC3H,GAGKkC,GAAQlC,CAAG;AACpB;AAEA,SAASiC,GAAgBjC,GAAKgC,GAAKnQ,GAAO;AACxC,SAAImQ,KAAOhC,IACT,OAAO,eAAeA,GAAKgC,GAAK;AAAA,IAC9B,OAAOnQ;AAAA,IACP,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,UAAU;AAAA,EAChB,CAAK,IAEDmO,EAAIgC,CAAG,IAAInQ,GAGNmO;AACT;AAEA,SAASmC,KAAW;AAClB,SAAAA,KAAW,OAAO,UAAU,SAAUL,GAAQ;AAC5C,aAAStK,IAAI,GAAGA,IAAI,UAAU,QAAQA,KAAK;AACzC,UAAIuK,IAAS,UAAUvK,CAAC;AAExB,eAASwK,KAAOD;AACd,QAAI,OAAO,UAAU,eAAe,KAAKA,GAAQC,CAAG,MAClDF,EAAOE,CAAG,IAAID,EAAOC,CAAG;AAAA,IAG9B;AAEA,WAAOF;AAAA,EACT,GAEOK,GAAS,MAAM,MAAM,SAAS;AACvC;AAEA,SAASC,GAA8BL,GAAQM,GAAU;AACvD,MAAIN,KAAU,KAAM,QAAO,CAAA;AAC3B,MAAID,IAAS,CAAA,GACTQ,IAAa,OAAO,KAAKP,CAAM,GAC/BC,GAAKxK;AAET,OAAKA,IAAI,GAAGA,IAAI8K,EAAW,QAAQ9K;AAEjC,IADAwK,IAAMM,EAAW9K,CAAC,GACd,EAAA6K,EAAS,QAAQL,CAAG,KAAK,OAC7BF,EAAOE,CAAG,IAAID,EAAOC,CAAG;AAG1B,SAAOF;AACT;AAEA,SAASS,GAAyBR,GAAQM,GAAU;AAClD,MAAIN,KAAU,KAAM,QAAO,CAAA;AAE3B,MAAID,IAASM,GAA8BL,GAAQM,CAAQ,GAEvDL,GAAKxK;AAET,MAAI,OAAO,uBAAuB;AAChC,QAAIgL,IAAmB,OAAO,sBAAsBT,CAAM;AAE1D,SAAKvK,IAAI,GAAGA,IAAIgL,EAAiB,QAAQhL;AAEvC,MADAwK,IAAMQ,EAAiBhL,CAAC,GACpB,EAAA6K,EAAS,QAAQL,CAAG,KAAK,MACxB,OAAO,UAAU,qBAAqB,KAAKD,GAAQC,CAAG,MAC3DF,EAAOE,CAAG,IAAID,EAAOC,CAAG;AAAA,EAE5B;AAEA,SAAOF;AACT;AAEA,IAAIW,KAAU;AAEd,SAASC,GAAUC,GAAS;AAC1B,MAAI,OAAO,SAAW,OAAe,OAAO;AAC1C,WAAO,CAAC,CAAe,0BAAU,UAAU,MAAMA,CAAO;AAE5D;AAEA,IAAIC,KAAaF,GAAU,uDAAuD,GAC9EG,KAAOH,GAAU,OAAO,GACxBI,KAAUJ,GAAU,UAAU,GAC9BK,KAASL,GAAU,SAAS,KAAK,CAACA,GAAU,SAAS,KAAK,CAACA,GAAU,UAAU,GAC/EM,KAAMN,GAAU,iBAAiB,GACjCO,KAAmBP,GAAU,SAAS,KAAKA,GAAU,UAAU,GAE/DQ,KAAc;AAAA,EAChB,SAAS;AAAA,EACT,SAAS;AACX;AAEA,SAASC,GAAGC,GAAIzJ,GAAO0J,GAAI;AACzB,EAAAD,EAAG,iBAAiBzJ,GAAO0J,GAAI,CAACT,MAAcM,EAAW;AAC3D;AAEA,SAASI,GAAIF,GAAIzJ,GAAO0J,GAAI;AAC1B,EAAAD,EAAG,oBAAoBzJ,GAAO0J,GAAI,CAACT,MAAcM,EAAW;AAC9D;AAEA,SAASK,GAETH,GAEAI,GAAU;AACR,MAAKA,GAGL;AAAA,QAFAA,EAAS,CAAC,MAAM,QAAQA,IAAWA,EAAS,UAAU,CAAC,IAEnDJ;AACF,UAAI;AACF,YAAIA,EAAG;AACL,iBAAOA,EAAG,QAAQI,CAAQ;AACrB,YAAIJ,EAAG;AACZ,iBAAOA,EAAG,kBAAkBI,CAAQ;AAC/B,YAAIJ,EAAG;AACZ,iBAAOA,EAAG,sBAAsBI,CAAQ;AAAA,MAE5C,QAAY;AACV,eAAO;AAAA,MACT;AAGF,WAAO;AAAA;AACT;AAEA,SAASC,GAAgBL,GAAI;AAC3B,SAAOA,EAAG,QAAQA,MAAO,YAAYA,EAAG,KAAK,WAAWA,EAAG,OAAOA,EAAG;AACvE;AAEA,SAASM,GAETN,GAEAI,GAEAG,GAAKC,GAAY;AACf,MAAIR,GAAI;AACN,IAAAO,IAAMA,KAAO;AAEb,OAAG;AACD,UAAIH,KAAY,SAASA,EAAS,CAAC,MAAM,MAAMJ,EAAG,eAAeO,KAAOJ,GAAQH,GAAII,CAAQ,IAAID,GAAQH,GAAII,CAAQ,MAAMI,KAAcR,MAAOO;AAC7I,eAAOP;AAGT,UAAIA,MAAOO,EAAK;AAAA,IAElB,SAASP,IAAKK,GAAgBL,CAAE;AAAA,EAClC;AAEA,SAAO;AACT;AAEA,IAAIS,KAAU;AAEd,SAASC,GAAYV,GAAIW,GAAM7R,GAAO;AACpC,MAAIkR,KAAMW;AACR,QAAIX,EAAG;AACL,MAAAA,EAAG,UAAUlR,IAAQ,QAAQ,QAAQ,EAAE6R,CAAI;AAAA,SACtC;AACL,UAAIC,KAAa,MAAMZ,EAAG,YAAY,KAAK,QAAQS,IAAS,GAAG,EAAE,QAAQ,MAAME,IAAO,KAAK,GAAG;AAC9F,MAAAX,EAAG,aAAaY,KAAa9R,IAAQ,MAAM6R,IAAO,KAAK,QAAQF,IAAS,GAAG;AAAA,IAC7E;AAEJ;AAEA,SAASI,GAAIb,GAAIc,GAAM9R,GAAK;AAC1B,MAAI+R,IAAQf,KAAMA,EAAG;AAErB,MAAIe,GAAO;AACT,QAAI/R,MAAQ;AACV,aAAI,SAAS,eAAe,SAAS,YAAY,mBAC/CA,IAAM,SAAS,YAAY,iBAAiBgR,GAAI,EAAE,IACzCA,EAAG,iBACZhR,IAAMgR,EAAG,eAGJc,MAAS,SAAS9R,IAAMA,EAAI8R,CAAI;AAEvC,IAAI,EAAEA,KAAQC,MAAUD,EAAK,QAAQ,QAAQ,MAAM,OACjDA,IAAO,aAAaA,IAGtBC,EAAMD,CAAI,IAAI9R,KAAO,OAAOA,KAAQ,WAAW,KAAK;AAAA,EAExD;AACF;AAEA,SAASgS,GAAOhB,GAAIiB,GAAU;AAC5B,MAAIC,IAAoB;AAExB,MAAI,OAAOlB,KAAO;AAChB,IAAAkB,IAAoBlB;AAAA;AAEpB,OAAG;AACD,UAAImB,IAAYN,GAAIb,GAAI,WAAW;AAEnC,MAAImB,KAAaA,MAAc,WAC7BD,IAAoBC,IAAY,MAAMD;AAAA,IAI1C,SAAS,CAACD,MAAajB,IAAKA,EAAG;AAGjC,MAAIoB,IAAW,OAAO,aAAa,OAAO,mBAAmB,OAAO,aAAa,OAAO;AAGxF,SAAOA,KAAY,IAAIA,EAASF,CAAiB;AACnD;AAEA,SAASG,GAAKd,GAAKe,GAASC,GAAU;AACpC,MAAIhB,GAAK;AACP,QAAIxT,IAAOwT,EAAI,qBAAqBe,CAAO,GACvClN,IAAI,GACJoN,IAAIzU,EAAK;AAEb,QAAIwU;AACF,aAAOnN,IAAIoN,GAAGpN;AACZ,QAAAmN,EAASxU,EAAKqH,CAAC,GAAGA,CAAC;AAIvB,WAAOrH;AAAA,EACT;AAEA,SAAO,CAAA;AACT;AAEA,SAAS0U,KAA4B;AACnC,MAAIC,IAAmB,SAAS;AAEhC,SAAIA,KAGK,SAAS;AAEpB;AAYA,SAASC,GAAQ3B,GAAI4B,GAA2BC,GAA2BC,GAAWC,GAAW;AAC/F,MAAI,GAAC/B,EAAG,yBAAyBA,MAAO,SACxC;AAAA,QAAIgC,GAAQC,GAAKC,GAAMC,GAAQC,GAAOC,GAAQC;AAmB9C,QAjBItC,MAAO,UAAUA,EAAG,cAAcA,MAAOyB,QAC3CO,IAAShC,EAAG,sBAAqB,GACjCiC,IAAMD,EAAO,KACbE,IAAOF,EAAO,MACdG,IAASH,EAAO,QAChBI,IAAQJ,EAAO,OACfK,IAASL,EAAO,QAChBM,IAAQN,EAAO,UAEfC,IAAM,GACNC,IAAO,GACPC,IAAS,OAAO,aAChBC,IAAQ,OAAO,YACfC,IAAS,OAAO,aAChBC,IAAQ,OAAO,cAGZV,KAA6BC,MAA8B7B,MAAO,WAErE+B,IAAYA,KAAa/B,EAAG,YAGxB,CAACR;AACH;AACE,YAAIuC,KAAaA,EAAU,0BAA0BlB,GAAIkB,GAAW,WAAW,MAAM,UAAUF,KAA6BhB,GAAIkB,GAAW,UAAU,MAAM,WAAW;AACpK,cAAIQ,IAAgBR,EAAU;AAE9B,UAAAE,KAAOM,EAAc,MAAM,SAAS1B,GAAIkB,GAAW,kBAAkB,CAAC,GACtEG,KAAQK,EAAc,OAAO,SAAS1B,GAAIkB,GAAW,mBAAmB,CAAC,GACzEI,IAASF,IAAMD,EAAO,QACtBI,IAAQF,IAAOF,EAAO;AACtB;AAAA,QACF;AAAA,aAGOD,IAAYA,EAAU;AAInC,QAAID,KAAa9B,MAAO,QAAQ;AAE9B,UAAIwC,IAAWxB,GAAOe,KAAa/B,CAAE,GACjCyC,IAASD,KAAYA,EAAS,GAC9BE,IAASF,KAAYA,EAAS;AAElC,MAAIA,MACFP,KAAOS,GACPR,KAAQO,GACRH,KAASG,GACTJ,KAAUK,GACVP,IAASF,IAAMI,GACfD,IAAQF,IAAOI;AAAA,IAEnB;AAEA,WAAO;AAAA,MACL,KAAKL;AAAA,MACL,MAAMC;AAAA,MACN,QAAQC;AAAA,MACR,OAAOC;AAAA,MACP,OAAOE;AAAA,MACP,QAAQD;AAAA,IACZ;AAAA;AACA;AAUA,SAASM,GAAe3C,GAAI4C,GAAQC,GAAY;AAK9C,WAJIC,IAASC,GAA2B/C,GAAI,EAAI,GAC5CgD,IAAYrB,GAAQ3B,CAAE,EAAE4C,CAAM,GAG3BE,KAAQ;AACb,QAAIG,IAAgBtB,GAAQmB,CAAM,EAAED,CAAU,GAC1CK,IAAU;AAQd,QALEA,IAAUF,KAAaC,GAKrB,CAACC,EAAS,QAAOJ;AACrB,QAAIA,MAAWrB,KAA6B;AAC5C,IAAAqB,IAASC,GAA2BD,GAAQ,EAAK;AAAA,EACnD;AAEA,SAAO;AACT;AAWA,SAASK,GAASnD,GAAIoD,GAAUC,GAASC,GAAe;AAKtD,WAJIC,IAAe,GACfnP,IAAI,GACJoP,IAAWxD,EAAG,UAEX5L,IAAIoP,EAAS,UAAQ;AAC1B,QAAIA,EAASpP,CAAC,EAAE,MAAM,YAAY,UAAUoP,EAASpP,CAAC,MAAMqP,GAAS,UAAUH,KAAiBE,EAASpP,CAAC,MAAMqP,GAAS,YAAYnD,GAAQkD,EAASpP,CAAC,GAAGiP,EAAQ,WAAWrD,GAAI,EAAK,GAAG;AACvL,UAAIuD,MAAiBH;AACnB,eAAOI,EAASpP,CAAC;AAGnB,MAAAmP;AAAA,IACF;AAEA,IAAAnP;AAAA,EACF;AAEA,SAAO;AACT;AASA,SAASsP,GAAU1D,GAAII,GAAU;AAG/B,WAFIuD,IAAO3D,EAAG,kBAEP2D,MAASA,MAASF,GAAS,SAAS5C,GAAI8C,GAAM,SAAS,MAAM,UAAUvD,KAAY,CAACD,GAAQwD,GAAMvD,CAAQ;AAC/G,IAAAuD,IAAOA,EAAK;AAGd,SAAOA,KAAQ;AACjB;AAUA,SAASrX,GAAM0T,GAAII,GAAU;AAC3B,MAAI9T,IAAQ;AAEZ,MAAI,CAAC0T,KAAM,CAACA,EAAG;AACb,WAAO;AAKT,SAAOA,IAAKA,EAAG;AACb,IAAIA,EAAG,SAAS,YAAW,MAAO,cAAcA,MAAOyD,GAAS,UAAU,CAACrD,KAAYD,GAAQH,GAAII,CAAQ,MACzG9T;AAIJ,SAAOA;AACT;AASA,SAASsX,GAAwB5D,GAAI;AACnC,MAAI6D,IAAa,GACbC,IAAY,GACZC,IAActC,GAAyB;AAE3C,MAAIzB;AACF,OAAG;AACD,UAAIwC,IAAWxB,GAAOhB,CAAE,GACpByC,IAASD,EAAS,GAClBE,IAASF,EAAS;AACtB,MAAAqB,KAAc7D,EAAG,aAAayC,GAC9BqB,KAAa9D,EAAG,YAAY0C;AAAA,IAC9B,SAAS1C,MAAO+D,MAAgB/D,IAAKA,EAAG;AAG1C,SAAO,CAAC6D,GAAYC,CAAS;AAC/B;AASA,SAASE,GAAcC,GAAKrH,GAAK;AAC/B,WAASxI,KAAK6P;AACZ,QAAKA,EAAI,eAAe7P,CAAC;AAEzB,eAASwK,KAAOhC;AACd,YAAIA,EAAI,eAAegC,CAAG,KAAKhC,EAAIgC,CAAG,MAAMqF,EAAI7P,CAAC,EAAEwK,CAAG,EAAG,QAAO,OAAOxK,CAAC;AAAA;AAI5E,SAAO;AACT;AAEA,SAAS2O,GAA2B/C,GAAIkE,GAAa;AAEnD,MAAI,CAAClE,KAAM,CAACA,EAAG,sBAAuB,QAAOyB,GAAyB;AACtE,MAAI0C,IAAOnE,GACPoE,IAAU;AAEd;AAEE,QAAID,EAAK,cAAcA,EAAK,eAAeA,EAAK,eAAeA,EAAK,cAAc;AAChF,UAAIE,IAAUxD,GAAIsD,CAAI;AAEtB,UAAIA,EAAK,cAAcA,EAAK,gBAAgBE,EAAQ,aAAa,UAAUA,EAAQ,aAAa,aAAaF,EAAK,eAAeA,EAAK,iBAAiBE,EAAQ,aAAa,UAAUA,EAAQ,aAAa,WAAW;AACpN,YAAI,CAACF,EAAK,yBAAyBA,MAAS,SAAS,KAAM,QAAO1C,GAAyB;AAC3F,YAAI2C,KAAWF,EAAa,QAAOC;AACnC,QAAAC,IAAU;AAAA,MACZ;AAAA,IACF;AAAA,SAGOD,IAAOA,EAAK;AAErB,SAAO1C,GAAyB;AAClC;AAEA,SAAS6C,GAAOC,GAAKC,GAAK;AACxB,MAAID,KAAOC;AACT,aAAS5F,KAAO4F;AACd,MAAIA,EAAI,eAAe5F,CAAG,MACxB2F,EAAI3F,CAAG,IAAI4F,EAAI5F,CAAG;AAKxB,SAAO2F;AACT;AAEA,SAASE,GAAYC,GAAOC,GAAO;AACjC,SAAO,KAAK,MAAMD,EAAM,GAAG,MAAM,KAAK,MAAMC,EAAM,GAAG,KAAK,KAAK,MAAMD,EAAM,IAAI,MAAM,KAAK,MAAMC,EAAM,IAAI,KAAK,KAAK,MAAMD,EAAM,MAAM,MAAM,KAAK,MAAMC,EAAM,MAAM,KAAK,KAAK,MAAMD,EAAM,KAAK,MAAM,KAAK,MAAMC,EAAM,KAAK;AAC5N;AAEA,IAAIC;AAEJ,SAASC,GAASC,GAAUC,GAAI;AAC9B,SAAO,WAAY;AACjB,QAAI,CAACH,IAAkB;AACrB,UAAIhN,IAAO,WACPoN,IAAQ;AAEZ,MAAIpN,EAAK,WAAW,IAClBkN,EAAS,KAAKE,GAAOpN,EAAK,CAAC,CAAC,IAE5BkN,EAAS,MAAME,GAAOpN,CAAI,GAG5BgN,KAAmB,WAAW,WAAY;AACxC,QAAAA,KAAmB;AAAA,MACrB,GAAGG,CAAE;AAAA,IACP;AAAA,EACF;AACF;AAEA,SAASE,KAAiB;AACxB,eAAaL,EAAgB,GAC7BA,KAAmB;AACrB;AAEA,SAASM,GAASlF,GAAIxE,GAAGC,GAAG;AAC1B,EAAAuE,EAAG,cAAcxE,GACjBwE,EAAG,aAAavE;AAClB;AAEA,SAAS0J,GAAMnF,GAAI;AACjB,MAAIoF,IAAU,OAAO,SACjBC,IAAI,OAAO,UAAU,OAAO;AAEhC,SAAID,KAAWA,EAAQ,MACdA,EAAQ,IAAIpF,CAAE,EAAE,UAAU,EAAI,IAC5BqF,IACFA,EAAErF,CAAE,EAAE,MAAM,EAAI,EAAE,CAAC,IAEnBA,EAAG,UAAU,EAAI;AAE5B;AAEA,IAAIsF,KAAU,cAAa,oBAAI,KAAI,GAAG,QAAO;AAE7C,SAASC,KAAwB;AAC/B,MAAIC,IAAkB,CAAA,GAClBC;AACJ,SAAO;AAAA,IACL,uBAAuB,WAAiC;AAEtD,UADAD,IAAkB,CAAA,GACd,EAAC,KAAK,QAAQ,WAClB;AAAA,YAAIhC,IAAW,CAAA,EAAG,MAAM,KAAK,KAAK,GAAG,QAAQ;AAC7C,QAAAA,EAAS,QAAQ,SAAUkC,GAAO;AAChC,cAAI,EAAA7E,GAAI6E,GAAO,SAAS,MAAM,UAAUA,MAAUjC,GAAS,QAC3D;AAAA,YAAA+B,EAAgB,KAAK;AAAA,cACnB,QAAQE;AAAA,cACR,MAAM/D,GAAQ+D,CAAK;AAAA,YAC7B,CAAS;AAED,gBAAIC,IAAWlH,GAAe,CAAA,GAAI+G,EAAgBA,EAAgB,SAAS,CAAC,EAAE,IAAI;AAGlF,gBAAIE,EAAM,uBAAuB;AAC/B,kBAAIE,IAAc5E,GAAO0E,GAAO,EAAI;AAEpC,cAAIE,MACFD,EAAS,OAAOC,EAAY,GAC5BD,EAAS,QAAQC,EAAY;AAAA,YAEjC;AAEA,YAAAF,EAAM,WAAWC;AAAA;AAAA,QACnB,CAAC;AAAA;AAAA,IACH;AAAA,IACA,mBAAmB,SAA2B7W,GAAO;AACnD,MAAA0W,EAAgB,KAAK1W,CAAK;AAAA,IAC5B;AAAA,IACA,sBAAsB,SAA8B4P,GAAQ;AAC1D,MAAA8G,EAAgB,OAAOxB,GAAcwB,GAAiB;AAAA,QACpD,QAAQ9G;AAAA,MAChB,CAAO,GAAG,CAAC;AAAA,IACP;AAAA,IACA,YAAY,SAAoBoG,GAAU;AACxC,UAAIE,IAAQ;AAEZ,UAAI,CAAC,KAAK,QAAQ,WAAW;AAC3B,qBAAaS,CAAmB,GAC5B,OAAOX,KAAa,cAAYA,EAAQ;AAC5C;AAAA,MACF;AAEA,UAAIe,IAAY,IACZC,IAAgB;AACpB,MAAAN,EAAgB,QAAQ,SAAU1W,GAAO;AACvC,YAAIiX,IAAO,GACPrH,IAAS5P,EAAM,QACf6W,IAAWjH,EAAO,UAClBsH,IAASrE,GAAQjD,CAAM,GACvBuH,IAAevH,EAAO,cACtBwH,IAAaxH,EAAO,YACpByH,IAAgBrX,EAAM,MACtBsX,IAAepF,GAAOtC,GAAQ,EAAI;AAEtC,QAAI0H,MAEFJ,EAAO,OAAOI,EAAa,GAC3BJ,EAAO,QAAQI,EAAa,IAG9B1H,EAAO,SAASsH,GAEZtH,EAAO,yBAEL+F,GAAYwB,GAAcD,CAAM,KAAK,CAACvB,GAAYkB,GAAUK,CAAM;AAAA,SACrEG,EAAc,MAAMH,EAAO,QAAQG,EAAc,OAAOH,EAAO,WAAWL,EAAS,MAAMK,EAAO,QAAQL,EAAS,OAAOK,EAAO,UAE9HD,IAAOM,GAAkBF,GAAeF,GAAcC,GAAYlB,EAAM,OAAO,IAK9EP,GAAYuB,GAAQL,CAAQ,MAC/BjH,EAAO,eAAeiH,GACtBjH,EAAO,aAAasH,GAEfD,MACHA,IAAOf,EAAM,QAAQ,YAGvBA,EAAM,QAAQtG,GAAQyH,GAAeH,GAAQD,CAAI,IAG/CA,MACFF,IAAY,IACZC,IAAgB,KAAK,IAAIA,GAAeC,CAAI,GAC5C,aAAarH,EAAO,mBAAmB,GACvCA,EAAO,sBAAsB,WAAW,WAAY;AAClD,UAAAA,EAAO,gBAAgB,GACvBA,EAAO,eAAe,MACtBA,EAAO,WAAW,MAClBA,EAAO,aAAa,MACpBA,EAAO,wBAAwB;AAAA,QACjC,GAAGqH,CAAI,GACPrH,EAAO,wBAAwBqH;AAAA,MAEnC,CAAC,GACD,aAAaN,CAAmB,GAE3BI,IAGHJ,IAAsB,WAAW,WAAY;AAC3C,QAAI,OAAOX,KAAa,cAAYA,EAAQ;AAAA,MAC9C,GAAGgB,CAAa,IAJZ,OAAOhB,KAAa,cAAYA,EAAQ,GAO9CU,IAAkB,CAAA;AAAA,IACpB;AAAA,IACA,SAAS,SAAiB9G,GAAQ4H,GAAaN,GAAQO,GAAU;AAC/D,UAAIA,GAAU;AACZ,QAAA1F,GAAInC,GAAQ,cAAc,EAAE,GAC5BmC,GAAInC,GAAQ,aAAa,EAAE;AAC3B,YAAI8D,IAAWxB,GAAO,KAAK,EAAE,GACzByB,IAASD,KAAYA,EAAS,GAC9BE,IAASF,KAAYA,EAAS,GAC9BgE,KAAcF,EAAY,OAAON,EAAO,SAASvD,KAAU,IAC3DgE,KAAcH,EAAY,MAAMN,EAAO,QAAQtD,KAAU;AAC7D,QAAAhE,EAAO,aAAa,CAAC,CAAC8H,GACtB9H,EAAO,aAAa,CAAC,CAAC+H,GACtB5F,GAAInC,GAAQ,aAAa,iBAAiB8H,IAAa,QAAQC,IAAa,OAAO,GACnF,KAAK,kBAAkBC,GAAQhI,CAAM,GAErCmC,GAAInC,GAAQ,cAAc,eAAe6H,IAAW,QAAQ,KAAK,QAAQ,SAAS,MAAM,KAAK,QAAQ,SAAS,GAAG,GACjH1F,GAAInC,GAAQ,aAAa,oBAAoB,GAC7C,OAAOA,EAAO,YAAa,YAAY,aAAaA,EAAO,QAAQ,GACnEA,EAAO,WAAW,WAAW,WAAY;AACvC,UAAAmC,GAAInC,GAAQ,cAAc,EAAE,GAC5BmC,GAAInC,GAAQ,aAAa,EAAE,GAC3BA,EAAO,WAAW,IAClBA,EAAO,aAAa,IACpBA,EAAO,aAAa;AAAA,QACtB,GAAG6H,CAAQ;AAAA,MACb;AAAA,IACF;AAAA,EACJ;AACA;AAEA,SAASG,GAAQhI,GAAQ;AACvB,SAAOA,EAAO;AAChB;AAEA,SAAS2H,GAAkBF,GAAeR,GAAUK,GAAQ3C,GAAS;AACnE,SAAO,KAAK,KAAK,KAAK,IAAIsC,EAAS,MAAMQ,EAAc,KAAK,CAAC,IAAI,KAAK,IAAIR,EAAS,OAAOQ,EAAc,MAAM,CAAC,CAAC,IAAI,KAAK,KAAK,KAAK,IAAIR,EAAS,MAAMK,EAAO,KAAK,CAAC,IAAI,KAAK,IAAIL,EAAS,OAAOK,EAAO,MAAM,CAAC,CAAC,IAAI3C,EAAQ;AAC7N;AAEA,IAAIsD,KAAU,CAAA,GACVC,KAAW;AAAA,EACb,qBAAqB;AACvB,GACIC,KAAgB;AAAA,EAClB,OAAO,SAAeC,GAAQ;AAE5B,aAASC,KAAUH;AACjB,MAAIA,GAAS,eAAeG,CAAM,KAAK,EAAEA,KAAUD,OACjDA,EAAOC,CAAM,IAAIH,GAASG,CAAM;AAIpC,IAAAJ,GAAQ,QAAQ,SAAUK,GAAG;AAC3B,UAAIA,EAAE,eAAeF,EAAO;AAC1B,cAAM,iCAAiC,OAAOA,EAAO,YAAY,iBAAiB;AAAA,IAEtF,CAAC,GACDH,GAAQ,KAAKG,CAAM;AAAA,EACrB;AAAA,EACA,aAAa,SAAqBG,GAAWC,GAAUC,GAAK;AAC1D,QAAInC,IAAQ;AAEZ,SAAK,gBAAgB,IAErBmC,EAAI,SAAS,WAAY;AACvB,MAAAnC,EAAM,gBAAgB;AAAA,IACxB;AAEA,QAAIoC,IAAkBH,IAAY;AAClC,IAAAN,GAAQ,QAAQ,SAAUG,GAAQ;AAChC,MAAKI,EAASJ,EAAO,UAAU,MAE3BI,EAASJ,EAAO,UAAU,EAAEM,CAAe,KAC7CF,EAASJ,EAAO,UAAU,EAAEM,CAAe,EAAE3I,GAAe;AAAA,QAC1D,UAAUyI;AAAA,MACpB,GAAWC,CAAG,CAAC,GAKLD,EAAS,QAAQJ,EAAO,UAAU,KAAKI,EAASJ,EAAO,UAAU,EAAEG,CAAS,KAC9EC,EAASJ,EAAO,UAAU,EAAEG,CAAS,EAAExI,GAAe;AAAA,QACpD,UAAUyI;AAAA,MACpB,GAAWC,CAAG,CAAC;AAAA,IAEX,CAAC;AAAA,EACH;AAAA,EACA,mBAAmB,SAA2BD,GAAUlH,GAAI4G,GAAUvD,GAAS;AAC7E,IAAAsD,GAAQ,QAAQ,SAAUG,GAAQ;AAChC,UAAI1K,IAAa0K,EAAO;AACxB,UAAI,GAACI,EAAS,QAAQ9K,CAAU,KAAK,CAAC0K,EAAO,sBAC7C;AAAA,YAAIO,IAAc,IAAIP,EAAOI,GAAUlH,GAAIkH,EAAS,OAAO;AAC3D,QAAAG,EAAY,WAAWH,GACvBG,EAAY,UAAUH,EAAS,SAC/BA,EAAS9K,CAAU,IAAIiL,GAEvBtI,GAAS6H,GAAUS,EAAY,QAAQ;AAAA;AAAA,IACzC,CAAC;AAED,aAASN,KAAUG,EAAS;AAC1B,UAAKA,EAAS,QAAQ,eAAeH,CAAM,GAC3C;AAAA,YAAIO,IAAW,KAAK,aAAaJ,GAAUH,GAAQG,EAAS,QAAQH,CAAM,CAAC;AAE3E,QAAI,OAAOO,IAAa,QACtBJ,EAAS,QAAQH,CAAM,IAAIO;AAAA;AAAA,EAGjC;AAAA,EACA,oBAAoB,SAA4B3G,GAAMuG,GAAU;AAC9D,QAAIK,IAAkB,CAAA;AACtB,WAAAZ,GAAQ,QAAQ,SAAUG,GAAQ;AAChC,MAAI,OAAOA,EAAO,mBAAoB,cAEtC/H,GAASwI,GAAiBT,EAAO,gBAAgB,KAAKI,EAASJ,EAAO,UAAU,GAAGnG,CAAI,CAAC;AAAA,IAC1F,CAAC,GACM4G;AAAA,EACT;AAAA,EACA,cAAc,SAAsBL,GAAUvG,GAAMlS,GAAO;AACzD,QAAI+Y;AACJ,WAAAb,GAAQ,QAAQ,SAAUG,GAAQ;AAEhC,MAAKI,EAASJ,EAAO,UAAU,KAE3BA,EAAO,mBAAmB,OAAOA,EAAO,gBAAgBnG,CAAI,KAAM,eACpE6G,IAAgBV,EAAO,gBAAgBnG,CAAI,EAAE,KAAKuG,EAASJ,EAAO,UAAU,GAAGrY,CAAK;AAAA,IAExF,CAAC,GACM+Y;AAAA,EACT;AACF;AAEA,SAASC,GAAcC,GAAM;AAC3B,MAAIR,IAAWQ,EAAK,UAChBC,IAASD,EAAK,QACd/G,IAAO+G,EAAK,MACZE,IAAWF,EAAK,UAChBG,IAAUH,EAAK,SACfI,IAAOJ,EAAK,MACZK,IAASL,EAAK,QACdM,IAAWN,EAAK,UAChBO,IAAWP,EAAK,UAChBQ,IAAoBR,EAAK,mBACzBS,IAAoBT,EAAK,mBACzBU,IAAgBV,EAAK,eACrBW,IAAcX,EAAK,aACnBY,IAAuBZ,EAAK;AAEhC,MADAR,IAAWA,KAAYS,KAAUA,EAAOrC,EAAO,GAC3C,EAAC4B,GACL;AAAA,QAAIC,GACA9D,IAAU6D,EAAS,SACnBqB,IAAS,OAAO5H,EAAK,OAAO,CAAC,EAAE,YAAW,IAAKA,EAAK,OAAO,CAAC;AAEhE,IAAI,OAAO,eAAe,CAACnB,MAAc,CAACC,KACxC0H,IAAM,IAAI,YAAYxG,GAAM;AAAA,MAC1B,SAAS;AAAA,MACT,YAAY;AAAA,IAClB,CAAK,KAEDwG,IAAM,SAAS,YAAY,OAAO,GAClCA,EAAI,UAAUxG,GAAM,IAAM,EAAI,IAGhCwG,EAAI,KAAKW,KAAQH,GACjBR,EAAI,OAAOY,KAAUJ,GACrBR,EAAI,OAAOS,KAAYD,GACvBR,EAAI,QAAQU,GACZV,EAAI,WAAWa,GACfb,EAAI,WAAWc,GACfd,EAAI,oBAAoBe,GACxBf,EAAI,oBAAoBgB,GACxBhB,EAAI,gBAAgBiB,GACpBjB,EAAI,WAAWkB,IAAcA,EAAY,cAAc;AAEvD,QAAIG,IAAqB/J,GAAeA,GAAe,IAAI6J,CAAoB,GAAGzB,GAAc,mBAAmBlG,GAAMuG,CAAQ,CAAC;AAElI,aAASH,KAAUyB;AACjB,MAAArB,EAAIJ,CAAM,IAAIyB,EAAmBzB,CAAM;AAGzC,IAAIY,KACFA,EAAO,cAAcR,CAAG,GAGtB9D,EAAQkF,CAAM,KAChBlF,EAAQkF,CAAM,EAAE,KAAKrB,GAAUC,CAAG;AAAA;AAEtC;AAEA,IAAIsB,KAAY,CAAC,KAAK,GAElBC,KAAc,SAAqBzB,GAAWC,GAAU;AAC1D,MAAIQ,IAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAA,GAC3EU,IAAgBV,EAAK,KACrBja,IAAO0R,GAAyBuI,GAAMe,EAAS;AAEnD,EAAA5B,GAAc,YAAY,KAAKpD,EAAQ,EAAEwD,GAAWC,GAAUzI,GAAe;AAAA,IAC3E,QAAQkK;AAAA,IACR,UAAUC;AAAA,IACV,SAASC;AAAA,IACT,QAAQlB;AAAA,IACR,QAAQmB;AAAA,IACR,YAAYC;AAAA,IACZ,SAASlB;AAAA,IACT,aAAamB;AAAA,IACb,aAAaC;AAAA,IACb,aAAaZ;AAAA,IACb,gBAAgB5E,GAAS;AAAA,IACzB,eAAe2E;AAAA,IACf,UAAUJ;AAAA,IACV,mBAAmBE;AAAA,IACnB,UAAUD;AAAA,IACV,mBAAmBE;AAAA,IACnB,oBAAoBe;AAAA,IACpB,sBAAsBC;AAAA,IACtB,gBAAgB,WAA0B;AACxC,MAAAH,KAAc;AAAA,IAChB;AAAA,IACA,eAAe,WAAyB;AACtC,MAAAA,KAAc;AAAA,IAChB;AAAA,IACA,uBAAuB,SAA+BrI,GAAM;AAC1D,MAAAyI,GAAe;AAAA,QACb,UAAUlC;AAAA,QACV,MAAMvG;AAAA,QACN,eAAeyH;AAAA,MACvB,CAAO;AAAA,IACH;AAAA,EACJ,GAAK3a,CAAI,CAAC;AACV;AAEA,SAAS2b,GAAeC,GAAM;AAC5B,EAAA5B,GAAchJ,GAAe;AAAA,IAC3B,aAAa4J;AAAA,IACb,SAASR;AAAA,IACT,UAAUc;AAAA,IACV,QAAQhB;AAAA,IACR,UAAUK;AAAA,IACV,mBAAmBE;AAAA,IACnB,UAAUD;AAAA,IACV,mBAAmBE;AAAA,EACvB,GAAKkB,CAAI,CAAC;AACV;AAEA,IAAIV,GACAC,IACAC,IACAlB,IACAmB,IACAC,IACAlB,IACAmB,IACAhB,IACAC,IACAC,IACAC,IACAmB,IACAjB,IACAkB,KAAsB,IACtBC,KAAkB,IAClBC,KAAY,CAAA,GACZC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAd,IACAe,IACAC,IACAC,KAAwB,IACxBC,KAAyB,IACzBC,IAEJC,IACIC,KAAmC,CAAA,GAEvCC,KAAU,IACNC,KAAoB,CAAA,GAGpBC,KAAiB,OAAO,WAAa,KACrCC,KAA0B9K,IAC1B+K,KAAmBlL,MAAQD,KAAa,aAAa,SAEzDoL,KAAmBH,MAAkB,CAAC5K,MAAoB,CAACD,MAAO,eAAe,SAAS,cAAc,KAAK,GACzGiL,KAA0B,WAAY;AACxC,MAAKJ,IAEL;AAAA,QAAIjL;AACF,aAAO;AAGT,QAAIQ,IAAK,SAAS,cAAc,GAAG;AACnC,WAAAA,EAAG,MAAM,UAAU,uBACZA,EAAG,MAAM,kBAAkB;AAAA;AACpC,EAAC,GACG8K,KAAmB,SAA0B9K,GAAIqD,GAAS;AAC5D,MAAI0H,IAAQlK,GAAIb,CAAE,GACdgL,IAAU,SAASD,EAAM,KAAK,IAAI,SAASA,EAAM,WAAW,IAAI,SAASA,EAAM,YAAY,IAAI,SAASA,EAAM,eAAe,IAAI,SAASA,EAAM,gBAAgB,GAChKE,IAAS9H,GAASnD,GAAI,GAAGqD,CAAO,GAChC6H,IAAS/H,GAASnD,GAAI,GAAGqD,CAAO,GAChC8H,IAAgBF,KAAUpK,GAAIoK,CAAM,GACpCG,IAAiBF,KAAUrK,GAAIqK,CAAM,GACrCG,IAAkBF,KAAiB,SAASA,EAAc,UAAU,IAAI,SAASA,EAAc,WAAW,IAAIxJ,GAAQsJ,CAAM,EAAE,OAC9HK,IAAmBF,KAAkB,SAASA,EAAe,UAAU,IAAI,SAASA,EAAe,WAAW,IAAIzJ,GAAQuJ,CAAM,EAAE;AAEtI,MAAIH,EAAM,YAAY;AACpB,WAAOA,EAAM,kBAAkB,YAAYA,EAAM,kBAAkB,mBAAmB,aAAa;AAGrG,MAAIA,EAAM,YAAY;AACpB,WAAOA,EAAM,oBAAoB,MAAM,GAAG,EAAE,UAAU,IAAI,aAAa;AAGzE,MAAIE,KAAUE,EAAc,SAAYA,EAAc,UAAa,QAAQ;AACzE,QAAII,IAAqBJ,EAAc,UAAa,SAAS,SAAS;AACtE,WAAOD,MAAWE,EAAe,UAAU,UAAUA,EAAe,UAAUG,KAAsB,aAAa;AAAA,EACnH;AAEA,SAAON,MAAWE,EAAc,YAAY,WAAWA,EAAc,YAAY,UAAUA,EAAc,YAAY,WAAWA,EAAc,YAAY,UAAUE,KAAmBL,KAAWD,EAAMJ,EAAgB,MAAM,UAAUO,KAAUH,EAAMJ,EAAgB,MAAM,UAAUU,IAAkBC,IAAmBN,KAAW,aAAa;AACvV,GACIQ,KAAqB,SAA4BC,GAAUC,GAAYC,GAAU;AACnF,MAAIC,IAAcD,IAAWF,EAAS,OAAOA,EAAS,KAClDI,IAAcF,IAAWF,EAAS,QAAQA,EAAS,QACnDK,IAAkBH,IAAWF,EAAS,QAAQA,EAAS,QACvDM,IAAcJ,IAAWD,EAAW,OAAOA,EAAW,KACtDM,IAAcL,IAAWD,EAAW,QAAQA,EAAW,QACvDO,IAAkBN,IAAWD,EAAW,QAAQA,EAAW;AAC/D,SAAOE,MAAgBG,KAAeF,MAAgBG,KAAeJ,IAAcE,IAAkB,MAAMC,IAAcE,IAAkB;AAC7I,GAQAC,KAA8B,SAAqC1Q,GAAGC,GAAG;AACvE,MAAI0Q;AACJ,SAAA1C,GAAU,KAAK,SAAUvC,GAAU;AACjC,QAAIkF,IAAYlF,EAAS5B,EAAO,EAAE,QAAQ;AAC1C,QAAI,GAAC8G,KAAa1I,GAAUwD,CAAQ,IACpC;AAAA,UAAImF,IAAO1K,GAAQuF,CAAQ,GACvBoF,IAAqB9Q,KAAK6Q,EAAK,OAAOD,KAAa5Q,KAAK6Q,EAAK,QAAQD,GACrEG,IAAmB9Q,KAAK4Q,EAAK,MAAMD,KAAa3Q,KAAK4Q,EAAK,SAASD;AAEvE,UAAIE,KAAsBC;AACxB,eAAOJ,IAAMjF;AAAA;AAAA,EAEjB,CAAC,GACMiF;AACT,GACIK,KAAgB,SAAuBnJ,GAAS;AAClD,WAASoJ,EAAKhe,GAAOie,GAAM;AACzB,WAAO,SAAUC,GAAIC,GAAMjE,GAAQxB,GAAK;AACtC,UAAI0F,IAAYF,EAAG,QAAQ,MAAM,QAAQC,EAAK,QAAQ,MAAM,QAAQD,EAAG,QAAQ,MAAM,SAASC,EAAK,QAAQ,MAAM;AAEjH,UAAIne,KAAS,SAASie,KAAQG;AAG5B,eAAO;AACF,UAAIpe,KAAS,QAAQA,MAAU;AACpC,eAAO;AACF,UAAIie,KAAQje,MAAU;AAC3B,eAAOA;AACF,UAAI,OAAOA,KAAU;AAC1B,eAAOge,EAAKhe,EAAMke,GAAIC,GAAMjE,GAAQxB,CAAG,GAAGuF,CAAI,EAAEC,GAAIC,GAAMjE,GAAQxB,CAAG;AAErE,UAAI2F,KAAcJ,IAAOC,IAAKC,GAAM,QAAQ,MAAM;AAClD,aAAOne,MAAU,MAAQ,OAAOA,KAAU,YAAYA,MAAUqe,KAAcre,EAAM,QAAQA,EAAM,QAAQqe,CAAU,IAAI;AAAA,IAE5H;AAAA,EACF;AAEA,MAAI1gB,IAAQ,CAAA,GACR2gB,IAAgB1J,EAAQ;AAE5B,GAAI,CAAC0J,KAAiBjO,GAAQiO,CAAa,KAAK,cAC9CA,IAAgB;AAAA,IACd,MAAMA;AAAA,EACZ,IAGE3gB,EAAM,OAAO2gB,EAAc,MAC3B3gB,EAAM,YAAYqgB,EAAKM,EAAc,MAAM,EAAI,GAC/C3gB,EAAM,WAAWqgB,EAAKM,EAAc,GAAG,GACvC3gB,EAAM,cAAc2gB,EAAc,aAClC1J,EAAQ,QAAQjX;AAClB,GACI8c,KAAsB,WAA+B;AACvD,EAAI,CAAC2B,MAA2BhC,MAC9BhI,GAAIgI,IAAS,WAAW,MAAM;AAElC,GACIM,KAAwB,WAAiC;AAC3D,EAAI,CAAC0B,MAA2BhC,MAC9BhI,GAAIgI,IAAS,WAAW,EAAE;AAE9B;AAGI4B,MACF,SAAS,iBAAiB,SAAS,SAAUtD,GAAK;AAChD,MAAIqC;AACF,WAAArC,EAAI,eAAc,GAClBA,EAAI,mBAAmBA,EAAI,gBAAe,GAC1CA,EAAI,4BAA4BA,EAAI,yBAAwB,GAC5DqC,KAAkB,IACX;AAEX,GAAG,EAAI;AAGT,IAAIwD,KAAgC,SAAuC7F,GAAK;AAC9E,MAAIwB,GAAQ;AACV,IAAAxB,IAAMA,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA;AAErC,QAAI8F,IAAUf,GAA4B/E,EAAI,SAASA,EAAI,OAAO;AAElE,QAAI8F,GAAS;AAEX,UAAI1W,IAAQ,CAAA;AAEZ,eAASnC,KAAK+S;AACZ,QAAIA,EAAI,eAAe/S,CAAC,MACtBmC,EAAMnC,CAAC,IAAI+S,EAAI/S,CAAC;AAIpB,MAAAmC,EAAM,SAASA,EAAM,SAAS0W,GAC9B1W,EAAM,iBAAiB,QACvBA,EAAM,kBAAkB,QAExB0W,EAAQ3H,EAAO,EAAE,YAAY/O,CAAK;AAAA,IACpC;AAAA,EACF;AACF,GAEI2W,KAAwB,SAA+B/F,GAAK;AAC9D,EAAIwB,KACFA,EAAO,WAAWrD,EAAO,EAAE,iBAAiB6B,EAAI,MAAM;AAE1D;AAQA,SAAS1D,GAASzD,GAAIqD,GAAS;AAC7B,MAAI,EAAErD,KAAMA,EAAG,YAAYA,EAAG,aAAa;AACzC,UAAM,8CAA8C,OAAO,CAAA,EAAG,SAAS,KAAKA,CAAE,CAAC;AAGjF,OAAK,KAAKA,GAEV,KAAK,UAAUqD,IAAUtE,GAAS,CAAA,GAAIsE,CAAO,GAE7CrD,EAAGsF,EAAO,IAAI;AACd,MAAIsB,IAAW;AAAA,IACb,OAAO;AAAA,IACP,MAAM;AAAA,IACN,UAAU;AAAA,IACV,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,WAAW,WAAW,KAAK5G,EAAG,QAAQ,IAAI,QAAQ;AAAA,IAClD,eAAe;AAAA;AAAA,IAEf,YAAY;AAAA;AAAA,IAEZ,uBAAuB;AAAA;AAAA,IAEvB,mBAAmB;AAAA,IACnB,WAAW,WAAqB;AAC9B,aAAO8K,GAAiB9K,GAAI,KAAK,OAAO;AAAA,IAC1C;AAAA,IACA,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,iBAAiB;AAAA,IACjB,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,SAAS,SAAiBmN,GAAcxE,GAAQ;AAC9C,MAAAwE,EAAa,QAAQ,QAAQxE,EAAO,WAAW;AAAA,IACjD;AAAA,IACA,YAAY;AAAA,IACZ,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,OAAO;AAAA,IACP,kBAAkB;AAAA,IAClB,sBAAsB,OAAO,WAAW,SAAS,QAAQ,SAAS,OAAO,kBAAkB,EAAE,KAAK;AAAA,IAClG,eAAe;AAAA,IACf,eAAe;AAAA,IACf,gBAAgB;AAAA,IAChB,mBAAmB;AAAA,IACnB,gBAAgB;AAAA,MACd,GAAG;AAAA,MACH,GAAG;AAAA,IACT;AAAA,IACI,gBAAgBlF,GAAS,mBAAmB,MAAS,kBAAkB,UAAU,CAAC9D;AAAA,IAClF,sBAAsB;AAAA,EAC1B;AACE,EAAAkH,GAAc,kBAAkB,MAAM7G,GAAI4G,CAAQ;AAElD,WAASjG,KAAQiG;AACf,MAAEjG,KAAQ0C,OAAaA,EAAQ1C,CAAI,IAAIiG,EAASjG,CAAI;AAGtD,EAAA6L,GAAcnJ,CAAO;AAGrB,WAASpD,KAAM;AACb,IAAIA,EAAG,OAAO,CAAC,MAAM,OAAO,OAAO,KAAKA,CAAE,KAAM,eAC9C,KAAKA,CAAE,IAAI,KAAKA,CAAE,EAAE,KAAK,IAAI;AAKjC,OAAK,kBAAkBoD,EAAQ,gBAAgB,KAAQuH,IAEnD,KAAK,oBAEP,KAAK,QAAQ,sBAAsB,IAIjCvH,EAAQ,iBACVtD,GAAGC,GAAI,eAAe,KAAK,WAAW,KAEtCD,GAAGC,GAAI,aAAa,KAAK,WAAW,GACpCD,GAAGC,GAAI,cAAc,KAAK,WAAW,IAGnC,KAAK,oBACPD,GAAGC,GAAI,YAAY,IAAI,GACvBD,GAAGC,GAAI,aAAa,IAAI,IAG1ByJ,GAAU,KAAK,KAAK,EAAE,GAEtBpG,EAAQ,SAASA,EAAQ,MAAM,OAAO,KAAK,KAAKA,EAAQ,MAAM,IAAI,IAAI,KAAK,CAAA,CAAE,GAE7EtE,GAAS,MAAMwG,IAAuB;AACxC;AAEA9B,GAAS;AAET;AAAA,EACE,aAAaA;AAAA,EACb,kBAAkB,SAA0B/E,GAAQ;AAClD,IAAI,CAAC,KAAK,GAAG,SAASA,CAAM,KAAKA,MAAW,KAAK,OAC/CsL,KAAa;AAAA,EAEjB;AAAA,EACA,eAAe,SAAuB7C,GAAKzI,GAAQ;AACjD,WAAO,OAAO,KAAK,QAAQ,aAAc,aAAa,KAAK,QAAQ,UAAU,KAAK,MAAMyI,GAAKzI,GAAQiK,CAAM,IAAI,KAAK,QAAQ;AAAA,EAC9H;AAAA,EACA,aAAa,SAEbxB,GAAK;AACH,QAAKA,EAAI,YAET;AAAA,UAAInC,IAAQ,MACRhF,IAAK,KAAK,IACVqD,IAAU,KAAK,SACf+J,IAAkB/J,EAAQ,iBAC1B1W,IAAOwa,EAAI,MACXkG,IAAQlG,EAAI,WAAWA,EAAI,QAAQ,CAAC,KAAKA,EAAI,eAAeA,EAAI,gBAAgB,WAAWA,GAC3FzI,KAAU2O,KAASlG,GAAK,QACxBmG,IAAiBnG,EAAI,OAAO,eAAeA,EAAI,QAAQA,EAAI,KAAK,CAAC,KAAKA,EAAI,gBAAgBA,EAAI,aAAY,EAAG,CAAC,MAAMzI,GACpH6O,IAASlK,EAAQ;AAKrB,UAHAmK,GAAuBxN,CAAE,GAGrB,CAAA2I,KAIA,0BAAwB,KAAKhc,CAAI,KAAKwa,EAAI,WAAW,KAAK9D,EAAQ,aAKlE,CAAAiK,EAAe,qBAKf,GAAC,KAAK,mBAAmB3N,MAAUjB,KAAUA,EAAO,QAAQ,YAAW,MAAO,cAIlFA,IAAS4B,GAAQ5B,GAAQ2E,EAAQ,WAAWrD,GAAI,EAAK,GAEjD,EAAAtB,KAAUA,EAAO,aAIjBqK,OAAerK,IASnB;AAAA,YAHAsJ,KAAW1b,GAAMoS,CAAM,GACvBwJ,KAAoB5b,GAAMoS,GAAQ2E,EAAQ,SAAS,GAE/C,OAAOkK,KAAW;AACpB,cAAIA,EAAO,KAAK,MAAMpG,GAAKzI,GAAQ,IAAI,GAAG;AACxC,YAAA0K,GAAe;AAAA,cACb,UAAUpE;AAAA,cACV,QAAQsI;AAAA,cACR,MAAM;AAAA,cACN,UAAU5O;AAAA,cACV,MAAMsB;AAAA,cACN,QAAQA;AAAA,YAClB,CAAS,GAED0I,GAAY,UAAU1D,GAAO;AAAA,cAC3B,KAAKmC;AAAA,YACf,CAAS,GACDiG,KAAmBjG,EAAI,cAAcA,EAAI,eAAc;AACvD;AAAA,UACF;AAAA,mBACSoG,MACTA,IAASA,EAAO,MAAM,GAAG,EAAE,KAAK,SAAUE,GAAU;AAGlD,cAFAA,IAAWnN,GAAQgN,GAAgBG,EAAS,KAAI,GAAIzN,GAAI,EAAK,GAEzDyN;AACF,mBAAArE,GAAe;AAAA,cACb,UAAUpE;AAAA,cACV,QAAQyI;AAAA,cACR,MAAM;AAAA,cACN,UAAU/O;AAAA,cACV,QAAQsB;AAAA,cACR,MAAMA;AAAA,YAClB,CAAW,GAED0I,GAAY,UAAU1D,GAAO;AAAA,cAC3B,KAAKmC;AAAA,YACjB,CAAW,GACM;AAAA,QAEX,CAAC,GAEGoG,IAAQ;AACV,UAAAH,KAAmBjG,EAAI,cAAcA,EAAI,eAAc;AACvD;AAAA,QACF;AAGF,QAAI9D,EAAQ,UAAU,CAAC/C,GAAQgN,GAAgBjK,EAAQ,QAAQrD,GAAI,EAAK,KAKxE,KAAK,kBAAkBmH,GAAKkG,GAAO3O,CAAM;AAAA;AAAA;AAAA,EAC3C;AAAA,EACA,mBAAmB,SAEnByI,GAEAkG,GAEA3O,GAAQ;AACN,QAAIsG,IAAQ,MACRhF,IAAKgF,EAAM,IACX3B,IAAU2B,EAAM,SAChB0I,IAAgB1N,EAAG,eACnB2N;AAEJ,QAAIjP,KAAU,CAACiK,KAAUjK,EAAO,eAAesB,GAAI;AACjD,UAAIyL,IAAW9J,GAAQjD,CAAM;AAwE7B,UAvEAiJ,KAAS3H,GACT2I,IAASjK,GACTkK,KAAWD,EAAO,YAClBG,KAASH,EAAO,aAChBI,KAAarK,GACb4K,KAAcjG,EAAQ,OACtBI,GAAS,UAAUkF,GACnBe,KAAS;AAAA,QACP,QAAQf;AAAA,QACR,UAAU0E,KAASlG,GAAK;AAAA,QACxB,UAAUkG,KAASlG,GAAK;AAAA,MAChC,GACM2C,KAAkBJ,GAAO,UAAU+B,EAAS,MAC5C1B,KAAiBL,GAAO,UAAU+B,EAAS,KAC3C,KAAK,UAAU4B,KAASlG,GAAK,SAC7B,KAAK,UAAUkG,KAASlG,GAAK,SAC7BwB,EAAO,MAAM,aAAa,IAAI,OAE9BgF,IAAc,WAAuB;AAKnC,YAJAjF,GAAY,cAAc1D,GAAO;AAAA,UAC/B,KAAKmC;AAAA,QACf,CAAS,GAEG1D,GAAS,eAAe;AAC1B,UAAAuB,EAAM,QAAO;AAEb;AAAA,QACF;AAIA,QAAAA,EAAM,0BAAyB,GAE3B,CAACtF,MAAWsF,EAAM,oBACpB2D,EAAO,YAAY,KAIrB3D,EAAM,kBAAkBmC,GAAKkG,CAAK,GAGlCjE,GAAe;AAAA,UACb,UAAUpE;AAAA,UACV,MAAM;AAAA,UACN,eAAemC;AAAA,QACzB,CAAS,GAGDzG,GAAYiI,GAAQtF,EAAQ,aAAa,EAAI;AAAA,MAC/C,GAGAA,EAAQ,OAAO,MAAM,GAAG,EAAE,QAAQ,SAAUoK,GAAU;AACpD,QAAApM,GAAKsH,GAAQ8E,EAAS,KAAI,GAAIG,EAAiB;AAAA,MACjD,CAAC,GACD7N,GAAG2N,GAAe,YAAYV,EAA6B,GAC3DjN,GAAG2N,GAAe,aAAaV,EAA6B,GAC5DjN,GAAG2N,GAAe,aAAaV,EAA6B,GAC5DjN,GAAG2N,GAAe,WAAW1I,EAAM,OAAO,GAC1CjF,GAAG2N,GAAe,YAAY1I,EAAM,OAAO,GAC3CjF,GAAG2N,GAAe,eAAe1I,EAAM,OAAO,GAE1CtF,MAAW,KAAK,oBAClB,KAAK,QAAQ,sBAAsB,GACnCiJ,EAAO,YAAY,KAGrBD,GAAY,cAAc,MAAM;AAAA,QAC9B,KAAKvB;AAAA,MACb,CAAO,GAEG9D,EAAQ,UAAU,CAACA,EAAQ,oBAAoBgK,OAAW,CAAC,KAAK,mBAAmB,EAAE5N,MAAQD,MAAc;AAC7G,YAAIiE,GAAS,eAAe;AAC1B,eAAK,QAAO;AAEZ;AAAA,QACF;AAKA,QAAA1D,GAAG2N,GAAe,WAAW1I,EAAM,mBAAmB,GACtDjF,GAAG2N,GAAe,YAAY1I,EAAM,mBAAmB,GACvDjF,GAAG2N,GAAe,eAAe1I,EAAM,mBAAmB,GAC1DjF,GAAG2N,GAAe,aAAa1I,EAAM,4BAA4B,GACjEjF,GAAG2N,GAAe,aAAa1I,EAAM,4BAA4B,GACjE3B,EAAQ,kBAAkBtD,GAAG2N,GAAe,eAAe1I,EAAM,4BAA4B,GAC7FA,EAAM,kBAAkB,WAAW2I,GAAatK,EAAQ,KAAK;AAAA,MAC/D;AACE,QAAAsK,EAAW;AAAA,IAEf;AAAA,EACF;AAAA,EACA,8BAA8B,SAE9B,GAAG;AACD,QAAIN,IAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC,IAAI;AAEvC,IAAI,KAAK,IAAI,KAAK,IAAIA,EAAM,UAAU,KAAK,MAAM,GAAG,KAAK,IAAIA,EAAM,UAAU,KAAK,MAAM,CAAC,KAAK,KAAK,MAAM,KAAK,QAAQ,uBAAuB,KAAK,mBAAmB,OAAO,oBAAoB,EAAE,KAChM,KAAK,oBAAmB;AAAA,EAE5B;AAAA,EACA,qBAAqB,WAA+B;AAClD,IAAA1E,KAAUiF,GAAkBjF,CAAM,GAClC,aAAa,KAAK,eAAe,GAEjC,KAAK,0BAAyB;AAAA,EAChC;AAAA,EACA,2BAA2B,WAAqC;AAC9D,QAAI+E,IAAgB,KAAK,GAAG;AAC5B,IAAAxN,GAAIwN,GAAe,WAAW,KAAK,mBAAmB,GACtDxN,GAAIwN,GAAe,YAAY,KAAK,mBAAmB,GACvDxN,GAAIwN,GAAe,eAAe,KAAK,mBAAmB,GAC1DxN,GAAIwN,GAAe,aAAa,KAAK,4BAA4B,GACjExN,GAAIwN,GAAe,aAAa,KAAK,4BAA4B,GACjExN,GAAIwN,GAAe,eAAe,KAAK,4BAA4B;AAAA,EACrE;AAAA,EACA,mBAAmB,SAEnBvG,GAEAkG,GAAO;AACL,IAAAA,IAAQA,KAASlG,EAAI,eAAe,WAAWA,GAE3C,CAAC,KAAK,mBAAmBkG,IACvB,KAAK,QAAQ,iBACftN,GAAG,UAAU,eAAe,KAAK,YAAY,IACpCsN,IACTtN,GAAG,UAAU,aAAa,KAAK,YAAY,IAE3CA,GAAG,UAAU,aAAa,KAAK,YAAY,KAG7CA,GAAG4I,GAAQ,WAAW,IAAI,GAC1B5I,GAAG4H,IAAQ,aAAa,KAAK,YAAY;AAG3C,QAAI;AACF,MAAI,SAAS,YAEXkG,GAAU,WAAY;AACpB,iBAAS,UAAU,MAAK;AAAA,MAC1B,CAAC,IAED,OAAO,aAAY,EAAG,gBAAe;AAAA,IAEzC,QAAc;AAAA,IAAC;AAAA,EACjB;AAAA,EACA,cAAc,SAAsBC,GAAU3G,GAAK;AAIjD,QAFAoC,KAAsB,IAElB5B,MAAUgB,GAAQ;AACpB,MAAAD,GAAY,eAAe,MAAM;AAAA,QAC/B,KAAKvB;AAAA,MACb,CAAO,GAEG,KAAK,mBACPpH,GAAG,UAAU,YAAYmN,EAAqB;AAGhD,UAAI7J,IAAU,KAAK;AAEnB,OAACyK,KAAYpN,GAAYiI,GAAQtF,EAAQ,WAAW,EAAK,GACzD3C,GAAYiI,GAAQtF,EAAQ,YAAY,EAAI,GAC5CI,GAAS,SAAS,MAClBqK,KAAY,KAAK,gBAEjB1E,GAAe;AAAA,QACb,UAAU;AAAA,QACV,MAAM;AAAA,QACN,eAAejC;AAAA,MACvB,CAAO;AAAA,IACH;AACE,WAAK,SAAQ;AAAA,EAEjB;AAAA,EACA,kBAAkB,WAA4B;AAC5C,QAAIwC,IAAU;AACZ,WAAK,SAASA,GAAS,SACvB,KAAK,SAASA,GAAS,SAEvBT,GAAmB;AAKnB,eAHIxK,IAAS,SAAS,iBAAiBiL,GAAS,SAASA,GAAS,OAAO,GACrE7G,IAASpE,GAENA,KAAUA,EAAO,eACtBA,IAASA,EAAO,WAAW,iBAAiBiL,GAAS,SAASA,GAAS,OAAO,GAC1EjL,MAAWoE;AACf,QAAAA,IAASpE;AAKX,UAFAiK,EAAO,WAAWrD,EAAO,EAAE,iBAAiB5G,CAAM,GAE9CoE;AACF,WAAG;AACD,cAAIA,EAAOwC,EAAO,GAAG;AACnB,gBAAIyI,IAAW;AAQf,gBAPAA,IAAWjL,EAAOwC,EAAO,EAAE,YAAY;AAAA,cACrC,SAASqE,GAAS;AAAA,cAClB,SAASA,GAAS;AAAA,cAClB,QAAQjL;AAAA,cACR,QAAQoE;AAAA,YACtB,CAAa,GAEGiL,KAAY,CAAC,KAAK,QAAQ;AAC5B;AAAA,UAEJ;AAEA,UAAArP,IAASoE;AAAA,QACX,SAEOA,IAASA,EAAO;AAGzB,MAAAqG,GAAqB;AAAA,IACvB;AAAA,EACF;AAAA,EACA,cAAc,SAEdhC,GAAK;AACH,QAAIuC,IAAQ;AACV,UAAIrG,IAAU,KAAK,SACf2K,IAAoB3K,EAAQ,mBAC5B4K,IAAiB5K,EAAQ,gBACzBgK,IAAQlG,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA,GACvC+G,IAAcrF,MAAW7H,GAAO6H,IAAS,EAAI,GAC7CpG,IAASoG,MAAWqF,KAAeA,EAAY,GAC/CxL,IAASmG,MAAWqF,KAAeA,EAAY,GAC/CC,IAAuBzD,MAA2BL,MAAuBzG,GAAwByG,EAAmB,GACpH+D,KAAMf,EAAM,UAAU3D,GAAO,UAAUuE,EAAe,MAAMxL,KAAU,MAAM0L,IAAuBA,EAAqB,CAAC,IAAI7D,GAAiC,CAAC,IAAI,MAAM7H,KAAU,IACnL4L,KAAMhB,EAAM,UAAU3D,GAAO,UAAUuE,EAAe,MAAMvL,KAAU,MAAMyL,IAAuBA,EAAqB,CAAC,IAAI7D,GAAiC,CAAC,IAAI,MAAM5H,KAAU;AAEvL,UAAI,CAACe,GAAS,UAAU,CAAC8F,IAAqB;AAC5C,YAAIyE,KAAqB,KAAK,IAAI,KAAK,IAAIX,EAAM,UAAU,KAAK,MAAM,GAAG,KAAK,IAAIA,EAAM,UAAU,KAAK,MAAM,CAAC,IAAIW;AAChH;AAGF,aAAK,aAAa7G,GAAK,EAAI;AAAA,MAC7B;AAEA,UAAI0B,IAAS;AACX,QAAIqF,KACFA,EAAY,KAAKE,KAAMxE,MAAU,IACjCsE,EAAY,KAAKG,KAAMxE,MAAU,MAEjCqE,IAAc;AAAA,UACZ,GAAG;AAAA,UACH,GAAG;AAAA,UACH,GAAG;AAAA,UACH,GAAG;AAAA,UACH,GAAGE;AAAA,UACH,GAAGC;AAAA,QACf;AAGQ,YAAIC,IAAY,UAAU,OAAOJ,EAAY,GAAG,GAAG,EAAE,OAAOA,EAAY,GAAG,GAAG,EAAE,OAAOA,EAAY,GAAG,GAAG,EAAE,OAAOA,EAAY,GAAG,GAAG,EAAE,OAAOA,EAAY,GAAG,GAAG,EAAE,OAAOA,EAAY,GAAG,GAAG;AAC1L,QAAArN,GAAIgI,IAAS,mBAAmByF,CAAS,GACzCzN,GAAIgI,IAAS,gBAAgByF,CAAS,GACtCzN,GAAIgI,IAAS,eAAeyF,CAAS,GACrCzN,GAAIgI,IAAS,aAAayF,CAAS,GACnC1E,KAASwE,GACTvE,KAASwE,GACT1E,KAAW0D;AAAA,MACb;AAEA,MAAAlG,EAAI,cAAcA,EAAI,eAAc;AAAA,IACtC;AAAA,EACF;AAAA,EACA,cAAc,WAAwB;AAGpC,QAAI,CAAC0B,IAAS;AACZ,UAAI9G,IAAY,KAAK,QAAQ,iBAAiB,SAAS,OAAO4F,IAC1D0E,IAAO1K,GAAQgH,GAAQ,IAAM+B,IAAyB,IAAM3I,CAAS,GACrEsB,IAAU,KAAK;AAEnB,UAAIqH,IAAyB;AAI3B,aAFAL,KAAsBtI,GAEflB,GAAIwJ,IAAqB,UAAU,MAAM,YAAYxJ,GAAIwJ,IAAqB,WAAW,MAAM,UAAUA,OAAwB;AACtI,UAAAA,KAAsBA,GAAoB;AAG5C,QAAIA,OAAwB,SAAS,QAAQA,OAAwB,SAAS,mBACxEA,OAAwB,aAAUA,KAAsB5I,GAAyB,IACrF4K,EAAK,OAAOhC,GAAoB,WAChCgC,EAAK,QAAQhC,GAAoB,cAEjCA,KAAsB5I,GAAyB,GAGjD6I,KAAmC1G,GAAwByG,EAAmB;AAAA,MAChF;AAEA,MAAAxB,KAAUF,EAAO,UAAU,EAAI,GAC/BjI,GAAYmI,IAASxF,EAAQ,YAAY,EAAK,GAC9C3C,GAAYmI,IAASxF,EAAQ,eAAe,EAAI,GAChD3C,GAAYmI,IAASxF,EAAQ,WAAW,EAAI,GAC5CxC,GAAIgI,IAAS,cAAc,EAAE,GAC7BhI,GAAIgI,IAAS,aAAa,EAAE,GAC5BhI,GAAIgI,IAAS,cAAc,YAAY,GACvChI,GAAIgI,IAAS,UAAU,CAAC,GACxBhI,GAAIgI,IAAS,OAAOwD,EAAK,GAAG,GAC5BxL,GAAIgI,IAAS,QAAQwD,EAAK,IAAI,GAC9BxL,GAAIgI,IAAS,SAASwD,EAAK,KAAK,GAChCxL,GAAIgI,IAAS,UAAUwD,EAAK,MAAM,GAClCxL,GAAIgI,IAAS,WAAW,KAAK,GAC7BhI,GAAIgI,IAAS,YAAY6B,KAA0B,aAAa,OAAO,GACvE7J,GAAIgI,IAAS,UAAU,QAAQ,GAC/BhI,GAAIgI,IAAS,iBAAiB,MAAM,GACpCpF,GAAS,QAAQoF,IACjB9G,EAAU,YAAY8G,EAAO,GAE7BhI,GAAIgI,IAAS,oBAAoBiB,KAAkB,SAASjB,GAAQ,MAAM,KAAK,IAAI,MAAM,OAAOkB,KAAiB,SAASlB,GAAQ,MAAM,MAAM,IAAI,MAAM,GAAG;AAAA,IAC7J;AAAA,EACF;AAAA,EACA,cAAc,SAEd1B,GAEA2G,GAAU;AACR,QAAI9I,IAAQ,MAERmI,IAAehG,EAAI,cACnB9D,IAAU2B,EAAM;AAKpB,QAJA0D,GAAY,aAAa,MAAM;AAAA,MAC7B,KAAKvB;AAAA,IACX,CAAK,GAEG1D,GAAS,eAAe;AAC1B,WAAK,QAAO;AAEZ;AAAA,IACF;AAEA,IAAAiF,GAAY,cAAc,IAAI,GAEzBjF,GAAS,kBACZoE,KAAU1C,GAAMwD,CAAM,GACtBd,GAAQ,YAAY,IACpBA,GAAQ,MAAM,aAAa,IAAI,IAE/B,KAAK,WAAU,GAEfnH,GAAYmH,IAAS,KAAK,QAAQ,aAAa,EAAK,GACpDpE,GAAS,QAAQoE,KAInB7C,EAAM,UAAU6I,GAAU,WAAY;AAEpC,MADAnF,GAAY,SAAS1D,CAAK,GACtB,CAAAvB,GAAS,kBAERuB,EAAM,QAAQ,qBACjB2C,GAAO,aAAaE,IAASc,CAAM,GAGrC3D,EAAM,WAAU,GAEhBoE,GAAe;AAAA,QACb,UAAUpE;AAAA,QACV,MAAM;AAAA,MACd,CAAO;AAAA,IACH,CAAC,GACD,CAAC8I,KAAYpN,GAAYiI,GAAQtF,EAAQ,WAAW,EAAI,GAEpDyK,KACFtE,KAAkB,IAClBxE,EAAM,UAAU,YAAYA,EAAM,kBAAkB,EAAE,MAGtD9E,GAAI,UAAU,WAAW8E,EAAM,OAAO,GACtC9E,GAAI,UAAU,YAAY8E,EAAM,OAAO,GACvC9E,GAAI,UAAU,eAAe8E,EAAM,OAAO,GAEtCmI,MACFA,EAAa,gBAAgB,QAC7B9J,EAAQ,WAAWA,EAAQ,QAAQ,KAAK2B,GAAOmI,GAAcxE,CAAM,IAGrE5I,GAAG,UAAU,QAAQiF,CAAK,GAE1BnE,GAAI8H,GAAQ,aAAa,eAAe,IAG1CY,KAAsB,IACtBvE,EAAM,eAAe6I,GAAU7I,EAAM,aAAa,KAAKA,GAAO8I,GAAU3G,CAAG,CAAC,GAC5EpH,GAAG,UAAU,eAAeiF,CAAK,GACjCiE,KAAQ,IAEJtJ,MACFkB,GAAI,SAAS,MAAM,eAAe,MAAM;AAAA,EAE5C;AAAA;AAAA,EAEA,aAAa,SAEbsG,GAAK;AACH,QAAInH,IAAK,KAAK,IACVtB,IAASyI,EAAI,QACbsE,GACAC,GACA6C,GACAlL,IAAU,KAAK,SACfjX,IAAQiX,EAAQ,OAChBmL,IAAiB/K,GAAS,QAC1BgL,IAAUnF,OAAgBld,GAC1BsiB,IAAUrL,EAAQ,MAClBsL,IAAetG,MAAemG,GAC9B7C,GACA3G,IAAQ,MACR4J,IAAiB;AAErB,QAAIrE,GAAS;AAEb,aAASsE,EAAclO,IAAMmO,IAAO;AAClC,MAAApG,GAAY/H,IAAMqE,GAAOvG,GAAe;AAAA,QACtC,KAAK0I;AAAA,QACL,SAASsH;AAAA,QACT,MAAM9C,IAAW,aAAa;AAAA,QAC9B,QAAQ4C;AAAA,QACR,UAAU9C;AAAA,QACV,YAAYC;AAAA,QACZ,SAASgD;AAAA,QACT,cAAcC;AAAA,QACd,QAAQjQ;AAAA,QACR,WAAWqQ;AAAA,QACX,QAAQ,SAAgBrQ,IAAQsQ,IAAO;AACrC,iBAAOC,GAAQtH,IAAQ3H,GAAI2I,GAAQ8C,GAAU/M,IAAQiD,GAAQjD,EAAM,GAAGyI,GAAK6H,EAAK;AAAA,QAClF;AAAA,QACA,SAASE;AAAA,MACjB,GAASJ,EAAK,CAAC;AAAA,IACX;AAGA,aAASK,IAAU;AACjB,MAAAN,EAAc,0BAA0B,GAExC7J,EAAM,sBAAqB,GAEvBA,MAAU2J,KACZA,EAAa,sBAAqB;AAAA,IAEtC;AAGA,aAASI,EAAUK,IAAW;AAC5B,aAAAP,EAAc,qBAAqB;AAAA,QACjC,WAAWO;AAAA,MACnB,CAAO,GAEGA,OAEEX,IACFD,EAAe,WAAU,IAEzBA,EAAe,WAAWxJ,CAAK,GAG7BA,MAAU2J,MAEZjO,GAAYiI,GAAQN,KAAcA,GAAY,QAAQ,aAAamG,EAAe,QAAQ,YAAY,EAAK,GAC3G9N,GAAYiI,GAAQtF,EAAQ,YAAY,EAAI,IAG1CgF,OAAgBrD,KAASA,MAAUvB,GAAS,SAC9C4E,KAAcrD,IACLA,MAAUvB,GAAS,UAAU4E,OACtCA,KAAc,OAIZsG,MAAiB3J,MACnBA,EAAM,wBAAwBtG,IAGhCsG,EAAM,WAAW,WAAY;AAC3B,QAAA6J,EAAc,2BAA2B,GACzC7J,EAAM,wBAAwB;AAAA,MAChC,CAAC,GAEGA,MAAU2J,MACZA,EAAa,WAAU,GACvBA,EAAa,wBAAwB,SAKrCjQ,MAAWiK,KAAU,CAACA,EAAO,YAAYjK,MAAWsB,KAAM,CAACtB,EAAO,cACpEsL,KAAa,OAIX,CAAC3G,EAAQ,kBAAkB,CAAC8D,EAAI,UAAUzI,MAAW,aACvDiK,EAAO,WAAWrD,EAAO,EAAE,iBAAiB6B,EAAI,MAAM,GAGtD,CAACiI,MAAapC,GAA8B7F,CAAG,IAGjD,CAAC9D,EAAQ,kBAAkB8D,EAAI,mBAAmBA,EAAI,gBAAe,GAC9DyH,IAAiB;AAAA,IAC1B;AAGA,aAASM,IAAU;AACjB,MAAAjH,KAAW3b,GAAMqc,CAAM,GACvBR,KAAoB7b,GAAMqc,GAAQtF,EAAQ,SAAS,GAEnD+F,GAAe;AAAA,QACb,UAAUpE;AAAA,QACV,MAAM;AAAA,QACN,MAAMhF;AAAA,QACN,UAAUiI;AAAA,QACV,mBAAmBE;AAAA,QACnB,eAAehB;AAAA,MACvB,CAAO;AAAA,IACH;AAQA,QANIA,EAAI,mBAAmB,UACzBA,EAAI,cAAcA,EAAI,eAAc,GAGtCzI,IAAS4B,GAAQ5B,GAAQ2E,EAAQ,WAAWrD,GAAI,EAAI,GACpD6O,EAAc,UAAU,GACpBpL,GAAS,cAAe,QAAOmL;AAEnC,QAAIjG,EAAO,SAASxB,EAAI,MAAM,KAAKzI,EAAO,YAAYA,EAAO,cAAcA,EAAO,cAAcsG,EAAM,0BAA0BtG;AAC9H,aAAOqQ,EAAU,EAAK;AAKxB,QAFAvF,KAAkB,IAEdgF,KAAkB,CAACnL,EAAQ,aAAaoL,IAAUC,MAAYH,IAAS3F,OAAajB,MACtFU,OAAgB,SAAS,KAAK,cAAciB,GAAY,UAAU,MAAMkF,GAAgB7F,GAAQxB,CAAG,MAAM/a,EAAM,SAAS,MAAMoiB,GAAgB7F,GAAQxB,CAAG,IAAI;AAI7J,UAHAwE,IAAW,KAAK,cAAcxE,GAAKzI,CAAM,MAAM,YAC/C+M,IAAW9J,GAAQgH,CAAM,GACzBkG,EAAc,eAAe,GACzBpL,GAAS,cAAe,QAAOmL;AAEnC,UAAIL;AACF,eAAA3F,KAAWjB,IAEXwH,EAAO,GAEP,KAAK,WAAU,GAEfN,EAAc,QAAQ,GAEjBpL,GAAS,kBACRqF,KACFnB,GAAO,aAAagB,GAAQG,EAAM,IAElCnB,GAAO,YAAYgB,CAAM,IAItBoG,EAAU,EAAI;AAGvB,UAAIM,IAAc3L,GAAU1D,GAAIqD,EAAQ,SAAS;AAEjD,UAAI,CAACgM,KAAeC,GAAanI,GAAKwE,GAAU,IAAI,KAAK,CAAC0D,EAAY,UAAU;AAG9E,YAAIA,MAAgB1G;AAClB,iBAAOoG,EAAU,EAAK;AAYxB,YARIM,KAAerP,MAAOmH,EAAI,WAC5BzI,IAAS2Q,IAGP3Q,MACFgN,IAAa/J,GAAQjD,CAAM,IAGzBuQ,GAAQtH,IAAQ3H,GAAI2I,GAAQ8C,GAAU/M,GAAQgN,GAAYvE,GAAK,CAAC,CAACzI,CAAM,MAAM;AAC/E,iBAAAyQ,EAAO,GACPnP,EAAG,YAAY2I,CAAM,GACrBC,KAAW5I,GAEXkP,EAAO,GACAH,EAAU,EAAI;AAAA,MAEzB,WAAWM,KAAeE,GAAcpI,GAAKwE,GAAU,IAAI,GAAG;AAE5D,YAAI6D,IAAarM,GAASnD,GAAI,GAAGqD,GAAS,EAAI;AAE9C,YAAImM,MAAe7G;AACjB,iBAAOoG,EAAU,EAAK;AAMxB,YAHArQ,IAAS8Q,GACT9D,IAAa/J,GAAQjD,CAAM,GAEvBuQ,GAAQtH,IAAQ3H,GAAI2I,GAAQ8C,GAAU/M,GAAQgN,GAAYvE,GAAK,EAAK,MAAM;AAC5E,iBAAAgI,EAAO,GACPnP,EAAG,aAAa2I,GAAQ6G,CAAU,GAClC5G,KAAW5I,GAEXkP,EAAO,GACAH,EAAU,EAAI;AAAA,MAEzB,WAAWrQ,EAAO,eAAesB,GAAI;AACnC,QAAA0L,IAAa/J,GAAQjD,CAAM;AAC3B,YAAI+Q,IAAY,GACZC,GACAC,IAAiBhH,EAAO,eAAe3I,GACvC4P,IAAkB,CAACpE,GAAmB7C,EAAO,YAAYA,EAAO,UAAU8C,GAAU/M,EAAO,YAAYA,EAAO,UAAUgN,GAAYC,CAAQ,GAC5IkE,IAAQlE,IAAW,QAAQ,QAC3BmE,IAAkBnN,GAAejE,GAAQ,OAAO,KAAK,KAAKiE,GAAegG,GAAQ,OAAO,KAAK,GAC7FoH,IAAeD,IAAkBA,EAAgB,YAAY;AAEjE,QAAI9F,OAAetL,MACjBgR,IAAwBhE,EAAWmE,CAAK,GACxC3F,KAAwB,IACxBC,KAAyB,CAACyF,KAAmBvM,EAAQ,cAAcsM,IAGrEF,IAAYO,GAAkB7I,GAAKzI,GAAQgN,GAAYC,GAAUiE,IAAkB,IAAIvM,EAAQ,eAAeA,EAAQ,yBAAyB,OAAOA,EAAQ,gBAAgBA,EAAQ,uBAAuB8G,IAAwBH,OAAetL,CAAM;AAC1P,YAAIuR;AAEJ,YAAIR,MAAc,GAAG;AAEnB,cAAIS,IAAY5jB,GAAMqc,CAAM;AAE5B;AACE,YAAAuH,KAAaT,GACbQ,IAAUrH,GAAS,SAASsH,CAAS;AAAA,iBAC9BD,MAAYpP,GAAIoP,GAAS,SAAS,MAAM,UAAUA,MAAYpH;AAAA,QACzE;AAGA,YAAI4G,MAAc,KAAKQ,MAAYvR;AACjC,iBAAOqQ,EAAU,EAAK;AAGxB,QAAA/E,KAAatL,GACbuL,KAAgBwF;AAChB,YAAIU,IAAczR,EAAO,oBACrBsQ,KAAQ;AACZ,QAAAA,KAAQS,MAAc;AAEtB,YAAIW,KAAanB,GAAQtH,IAAQ3H,GAAI2I,GAAQ8C,GAAU/M,GAAQgN,GAAYvE,GAAK6H,EAAK;AAErF,YAAIoB,OAAe;AACjB,kBAAIA,OAAe,KAAKA,OAAe,QACrCpB,KAAQoB,OAAe,IAGzB7F,KAAU,IACV,WAAW8F,IAAW,EAAE,GACxBlB,EAAO,GAEHH,MAAS,CAACmB,IACZnQ,EAAG,YAAY2I,CAAM,IAErBjK,EAAO,WAAW,aAAaiK,GAAQqG,KAAQmB,IAAczR,CAAM,GAIjEoR,KACF5K,GAAS4K,GAAiB,GAAGC,IAAeD,EAAgB,SAAS,GAGvElH,KAAWD,EAAO,YAGd+G,MAA0B,UAAa,CAACvF,OAC1CC,KAAqB,KAAK,IAAIsF,IAAwB/N,GAAQjD,CAAM,EAAEmR,CAAK,CAAC,IAG9EX,EAAO,GACAH,EAAU,EAAI;AAAA,MAEzB;AAEA,UAAI/O,EAAG,SAAS2I,CAAM;AACpB,eAAOoG,EAAU,EAAK;AAAA,IAE1B;AAEA,WAAO;AAAA,EACT;AAAA,EACA,uBAAuB;AAAA,EACvB,gBAAgB,WAA0B;AACxC,IAAA7O,GAAI,UAAU,aAAa,KAAK,YAAY,GAC5CA,GAAI,UAAU,aAAa,KAAK,YAAY,GAC5CA,GAAI,UAAU,eAAe,KAAK,YAAY,GAC9CA,GAAI,UAAU,YAAY8M,EAA6B,GACvD9M,GAAI,UAAU,aAAa8M,EAA6B,GACxD9M,GAAI,UAAU,aAAa8M,EAA6B;AAAA,EAC1D;AAAA,EACA,cAAc,WAAwB;AACpC,QAAIU,IAAgB,KAAK,GAAG;AAC5B,IAAAxN,GAAIwN,GAAe,WAAW,KAAK,OAAO,GAC1CxN,GAAIwN,GAAe,YAAY,KAAK,OAAO,GAC3CxN,GAAIwN,GAAe,aAAa,KAAK,OAAO,GAC5CxN,GAAIwN,GAAe,eAAe,KAAK,OAAO,GAC9CxN,GAAI,UAAU,eAAe,IAAI;AAAA,EACnC;AAAA,EACA,SAAS,SAETiH,GAAK;AACH,QAAInH,IAAK,KAAK,IACVqD,IAAU,KAAK;AAYnB,QAVA4E,KAAW3b,GAAMqc,CAAM,GACvBR,KAAoB7b,GAAMqc,GAAQtF,EAAQ,SAAS,GACnDqF,GAAY,QAAQ,MAAM;AAAA,MACxB,KAAKvB;AAAA,IACX,CAAK,GACDyB,KAAWD,KAAUA,EAAO,YAE5BV,KAAW3b,GAAMqc,CAAM,GACvBR,KAAoB7b,GAAMqc,GAAQtF,EAAQ,SAAS,GAE/CI,GAAS,eAAe;AAC1B,WAAK,SAAQ;AAEb;AAAA,IACF;AAEA,IAAA8F,KAAsB,IACtBY,KAAyB,IACzBD,KAAwB,IACxB,cAAc,KAAK,OAAO,GAC1B,aAAa,KAAK,eAAe,GAEjCoG,GAAgB,KAAK,OAAO,GAE5BA,GAAgB,KAAK,YAAY,GAG7B,KAAK,oBACPpQ,GAAI,UAAU,QAAQ,IAAI,GAC1BA,GAAIF,GAAI,aAAa,KAAK,YAAY,IAGxC,KAAK,eAAc,GAEnB,KAAK,aAAY,GAEbL,MACFkB,GAAI,SAAS,MAAM,eAAe,EAAE,GAGtCA,GAAI8H,GAAQ,aAAa,EAAE,GAEvBxB,MACE8B,OACF9B,EAAI,cAAcA,EAAI,eAAc,GACpC,CAAC9D,EAAQ,cAAc8D,EAAI,gBAAe,IAG5C0B,MAAWA,GAAQ,cAAcA,GAAQ,WAAW,YAAYA,EAAO,IAEnElB,OAAWiB,MAAYP,MAAeA,GAAY,gBAAgB,YAEpER,MAAWA,GAAQ,cAAcA,GAAQ,WAAW,YAAYA,EAAO,GAGrEc,MACE,KAAK,mBACPzI,GAAIyI,GAAQ,WAAW,IAAI,GAG7BiF,GAAkBjF,CAAM,GAExBA,EAAO,MAAM,aAAa,IAAI,IAG1BM,MAAS,CAACM,MACZ7I,GAAYiI,GAAQN,KAAcA,GAAY,QAAQ,aAAa,KAAK,QAAQ,YAAY,EAAK,GAGnG3H,GAAYiI,GAAQ,KAAK,QAAQ,aAAa,EAAK,GAEnDS,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,UAAU;AAAA,MACV,mBAAmB;AAAA,MACnB,eAAezB;AAAA,IACzB,CAAS,GAEGQ,OAAWiB,MACTX,MAAY,MAEdmB,GAAe;AAAA,MACb,QAAQR;AAAA,MACR,MAAM;AAAA,MACN,MAAMA;AAAA,MACN,QAAQjB;AAAA,MACR,eAAeR;AAAA,IAC7B,CAAa,GAGDiC,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,eAAezB;AAAA,IAC7B,CAAa,GAGDiC,GAAe;AAAA,MACb,QAAQR;AAAA,MACR,MAAM;AAAA,MACN,MAAMA;AAAA,MACN,QAAQjB;AAAA,MACR,eAAeR;AAAA,IAC7B,CAAa,GAEDiC,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,eAAezB;AAAA,IAC7B,CAAa,IAGHkB,MAAeA,GAAY,KAAI,KAE3BJ,OAAaD,MACXC,MAAY,MAEdmB,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,eAAezB;AAAA,IAC/B,CAAe,GAEDiC,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,eAAezB;AAAA,IAC/B,CAAe,IAKH1D,GAAS,YAEPwE,MAAY,QAAQA,OAAa,QACnCA,KAAWD,IACXG,KAAoBD,KAGtBkB,GAAe;AAAA,MACb,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAMR;AAAA,MACN,eAAezB;AAAA,IAC3B,CAAW,GAGD,KAAK,KAAI,MAKf,KAAK,SAAQ;AAAA,EACf;AAAA,EACA,UAAU,WAAoB;AAC5B,IAAAuB,GAAY,WAAW,IAAI,GAC3Bf,KAASgB,IAASC,KAAWC,KAAUC,KAASjB,KAAUkB,KAAaC,KAAcU,KAASC,KAAWV,KAAQhB,KAAWE,KAAoBH,KAAWE,KAAoB8B,KAAaC,KAAgB5B,KAAciB,KAAc7F,GAAS,UAAUA,GAAS,QAAQA,GAAS,QAAQA,GAAS,SAAS,MAC/S+G,GAAkB,QAAQ,SAAUxK,GAAI;AACtC,MAAAA,EAAG,UAAU;AAAA,IACf,CAAC,GACDwK,GAAkB,SAASZ,KAASC,KAAS;AAAA,EAC/C;AAAA,EACA,aAAa,SAEb1C,GAAK;AACH,YAAQA,EAAI,MAAI;AAAA,MACd,KAAK;AAAA,MACL,KAAK;AACH,aAAK,QAAQA,CAAG;AAEhB;AAAA,MAEF,KAAK;AAAA,MACL,KAAK;AACH,QAAIwB,MACF,KAAK,YAAYxB,CAAG,GAEpBoJ,GAAgBpJ,CAAG;AAGrB;AAAA,MAEF,KAAK;AACH,QAAAA,EAAI,eAAc;AAClB;AAAA,IACR;AAAA,EACE;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,SAAS,WAAmB;AAQ1B,aAPIqJ,IAAQ,CAAA,GACRxQ,GACAwD,IAAW,KAAK,GAAG,UACnBpP,IAAI,GACJoN,IAAIgC,EAAS,QACbH,IAAU,KAAK,SAEZjP,IAAIoN,GAAGpN;AACZ,MAAA4L,IAAKwD,EAASpP,CAAC,GAEXkM,GAAQN,GAAIqD,EAAQ,WAAW,KAAK,IAAI,EAAK,KAC/CmN,EAAM,KAAKxQ,EAAG,aAAaqD,EAAQ,UAAU,KAAKoN,GAAYzQ,CAAE,CAAC;AAIrE,WAAOwQ;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,SAAcA,GAAOE,GAAc;AACvC,QAAIC,IAAQ,CAAA,GACRhJ,IAAS,KAAK;AAClB,SAAK,QAAO,EAAG,QAAQ,SAAUiJ,GAAIxc,GAAG;AACtC,UAAI4L,IAAK2H,EAAO,SAASvT,CAAC;AAE1B,MAAIkM,GAAQN,GAAI,KAAK,QAAQ,WAAW2H,GAAQ,EAAK,MACnDgJ,EAAMC,CAAE,IAAI5Q;AAAA,IAEhB,GAAG,IAAI,GACP0Q,KAAgB,KAAK,sBAAqB,GAC1CF,EAAM,QAAQ,SAAUI,GAAI;AAC1B,MAAID,EAAMC,CAAE,MACVjJ,EAAO,YAAYgJ,EAAMC,CAAE,CAAC,GAC5BjJ,EAAO,YAAYgJ,EAAMC,CAAE,CAAC;AAAA,IAEhC,CAAC,GACDF,KAAgB,KAAK,WAAU;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,WAAgB;AACpB,QAAIG,IAAQ,KAAK,QAAQ;AACzB,IAAAA,KAASA,EAAM,OAAOA,EAAM,IAAI,IAAI;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,SAAS,SAAmB7Q,GAAII,GAAU;AACxC,WAAOE,GAAQN,GAAII,KAAY,KAAK,QAAQ,WAAW,KAAK,IAAI,EAAK;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,QAAQ,SAAgBO,GAAMlS,GAAO;AACnC,QAAI4U,IAAU,KAAK;AAEnB,QAAI5U,MAAU;AACZ,aAAO4U,EAAQ1C,CAAI;AAEnB,QAAI6G,IAAgBX,GAAc,aAAa,MAAMlG,GAAMlS,CAAK;AAEhE,IAAI,OAAO+Y,IAAkB,MAC3BnE,EAAQ1C,CAAI,IAAI6G,IAEhBnE,EAAQ1C,CAAI,IAAIlS,GAGdkS,MAAS,WACX6L,GAAcnJ,CAAO;AAAA,EAG3B;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,WAAmB;AAC1B,IAAAqF,GAAY,WAAW,IAAI;AAC3B,QAAI1I,IAAK,KAAK;AACd,IAAAA,EAAGsF,EAAO,IAAI,MACdpF,GAAIF,GAAI,aAAa,KAAK,WAAW,GACrCE,GAAIF,GAAI,cAAc,KAAK,WAAW,GACtCE,GAAIF,GAAI,eAAe,KAAK,WAAW,GAEnC,KAAK,oBACPE,GAAIF,GAAI,YAAY,IAAI,GACxBE,GAAIF,GAAI,aAAa,IAAI,IAI3B,MAAM,UAAU,QAAQ,KAAKA,EAAG,iBAAiB,aAAa,GAAG,SAAUA,GAAI;AAC7E,MAAAA,EAAG,gBAAgB,WAAW;AAAA,IAChC,CAAC,GAED,KAAK,QAAO,GAEZ,KAAK,0BAAyB,GAE9ByJ,GAAU,OAAOA,GAAU,QAAQ,KAAK,EAAE,GAAG,CAAC,GAC9C,KAAK,KAAKzJ,IAAK;AAAA,EACjB;AAAA,EACA,YAAY,WAAsB;AAChC,QAAI,CAACgJ,IAAa;AAEhB,UADAN,GAAY,aAAa,IAAI,GACzBjF,GAAS,cAAe;AAC5B,MAAA5C,GAAIgH,IAAS,WAAW,MAAM,GAE1B,KAAK,QAAQ,qBAAqBA,GAAQ,cAC5CA,GAAQ,WAAW,YAAYA,EAAO,GAGxCmB,KAAc;AAAA,IAChB;AAAA,EACF;AAAA,EACA,YAAY,SAAoBX,GAAa;AAC3C,QAAIA,EAAY,gBAAgB,SAAS;AACvC,WAAK,WAAU;AAEf;AAAA,IACF;AAEA,QAAIW,IAAa;AAEf,UADAN,GAAY,aAAa,IAAI,GACzBjF,GAAS,cAAe;AAE5B,MAAIkF,EAAO,cAAchB,MAAU,CAAC,KAAK,QAAQ,MAAM,cACrDA,GAAO,aAAaE,IAASc,CAAM,IAC1BG,KACTnB,GAAO,aAAaE,IAASiB,EAAM,IAEnCnB,GAAO,YAAYE,EAAO,GAGxB,KAAK,QAAQ,MAAM,eACrB,KAAK,QAAQc,GAAQd,EAAO,GAG9BhH,GAAIgH,IAAS,WAAW,EAAE,GAC1BmB,KAAc;AAAA,IAChB;AAAA,EACF;AACF;AAEA,SAASuH,GAETpJ,GAAK;AACH,EAAIA,EAAI,iBACNA,EAAI,aAAa,aAAa,SAGhCA,EAAI,cAAcA,EAAI,eAAc;AACtC;AAEA,SAAS8H,GAAQlH,GAAQD,GAAMa,GAAQ8C,GAAU7D,GAAU8D,GAAYtD,GAAe0I,GAAiB;AACrG,MAAI3J,GACAD,IAAWa,EAAOzC,EAAO,GACzByL,IAAW7J,EAAS,QAAQ,QAC5B8J;AAEJ,SAAI,OAAO,eAAe,CAACxR,MAAc,CAACC,KACxC0H,IAAM,IAAI,YAAY,QAAQ;AAAA,IAC5B,SAAS;AAAA,IACT,YAAY;AAAA,EAClB,CAAK,KAEDA,IAAM,SAAS,YAAY,OAAO,GAClCA,EAAI,UAAU,QAAQ,IAAM,EAAI,IAGlCA,EAAI,KAAKW,GACTX,EAAI,OAAOY,GACXZ,EAAI,UAAUwB,GACdxB,EAAI,cAAcsE,GAClBtE,EAAI,UAAUS,KAAYE,GAC1BX,EAAI,cAAcuE,KAAc/J,GAAQmG,CAAI,GAC5CX,EAAI,kBAAkB2J,GACtB3J,EAAI,gBAAgBiB,GACpBL,EAAO,cAAcZ,CAAG,GAEpB4J,MACFC,IAASD,EAAS,KAAK7J,GAAUC,GAAKiB,CAAa,IAG9C4I;AACT;AAEA,SAASpD,GAAkB5N,GAAI;AAC7B,EAAAA,EAAG,YAAY;AACjB;AAEA,SAASqQ,KAAY;AACnB,EAAA9F,KAAU;AACZ;AAEA,SAASgF,GAAcpI,GAAKwE,GAAUzE,GAAU;AAC9C,MAAImF,IAAO1K,GAAQwB,GAAS+D,EAAS,IAAI,GAAGA,EAAS,SAAS,EAAI,CAAC,GAC/D+J,IAAS;AACb,SAAOtF,IAAWxE,EAAI,UAAUkF,EAAK,OAAO4E,KAAU9J,EAAI,UAAUkF,EAAK,OAAOlF,EAAI,UAAUkF,EAAK,QAAQlF,EAAI,UAAUkF,EAAK,MAAM4E,KAAU9J,EAAI,UAAUkF,EAAK,UAAUlF,EAAI,UAAUkF,EAAK;AAChM;AAEA,SAASiD,GAAanI,GAAKwE,GAAUzE,GAAU;AAC7C,MAAImF,IAAO1K,GAAQ+B,GAAUwD,EAAS,IAAIA,EAAS,QAAQ,SAAS,CAAC,GACjE+J,IAAS;AACb,SAAOtF,IAAWxE,EAAI,UAAUkF,EAAK,QAAQ4E,KAAU9J,EAAI,WAAWkF,EAAK,SAASlF,EAAI,UAAUkF,EAAK,UAAUlF,EAAI,WAAWkF,EAAK,OAAOlF,EAAI,UAAUkF,EAAK,SAASlF,EAAI,UAAUkF,EAAK,OAAOlF,EAAI,WAAWkF,EAAK,SAASlF,EAAI,UAAUkF,EAAK,SAAS4E;AAC7P;AAEA,SAASjB,GAAkB7I,GAAKzI,GAAQgN,GAAYC,GAAUuF,GAAeC,GAAuBC,GAAYC,GAAc;AAC5H,MAAIC,IAAc3F,IAAWxE,EAAI,UAAUA,EAAI,SAC3CoK,IAAe5F,IAAWD,EAAW,SAASA,EAAW,OACzD8F,IAAW7F,IAAWD,EAAW,MAAMA,EAAW,MAClD+F,IAAW9F,IAAWD,EAAW,SAASA,EAAW,OACrDgG,IAAS;AAEb,MAAI,CAACN;AAEH,QAAIC,KAAgBjH,KAAqBmH,IAAeL;AAQtD,UALI,CAAChH,OAA0BD,OAAkB,IAAIqH,IAAcE,IAAWD,IAAeJ,IAAwB,IAAIG,IAAcG,IAAWF,IAAeJ,IAAwB,OAEvLjH,KAAwB,KAGrBA;AAOH,QAAAwH,IAAS;AAAA,eALLzH,OAAkB,IAAIqH,IAAcE,IAAWpH,KACjDkH,IAAcG,IAAWrH;AACzB,eAAO,CAACH;AAAA,eAORqH,IAAcE,IAAWD,KAAgB,IAAIL,KAAiB,KAAKI,IAAcG,IAAWF,KAAgB,IAAIL,KAAiB;AACnI,aAAOS,GAAoBjT,CAAM;AAAA;AAOvC,SAFAgT,IAASA,KAAUN,GAEfM,MAEEJ,IAAcE,IAAWD,IAAeJ,IAAwB,KAAKG,IAAcG,IAAWF,IAAeJ,IAAwB,KAChIG,IAAcE,IAAWD,IAAe,IAAI,IAAI,KAIpD;AACT;AASA,SAASI,GAAoBjT,GAAQ;AACnC,SAAIpS,GAAMqc,CAAM,IAAIrc,GAAMoS,CAAM,IACvB,IAEA;AAEX;AASA,SAAS+R,GAAYzQ,GAAI;AAKvB,WAJI4R,IAAM5R,EAAG,UAAUA,EAAG,YAAYA,EAAG,MAAMA,EAAG,OAAOA,EAAG,aACxD5L,IAAIwd,EAAI,QACRC,IAAM,GAEHzd;AACL,IAAAyd,KAAOD,EAAI,WAAWxd,CAAC;AAGzB,SAAOyd,EAAI,SAAS,EAAE;AACxB;AAEA,SAASrE,GAAuBsE,GAAM;AACpC,EAAAtH,GAAkB,SAAS;AAI3B,WAHIuH,IAASD,EAAK,qBAAqB,OAAO,GAC1CE,IAAMD,EAAO,QAEVC,OAAO;AACZ,QAAIhS,IAAK+R,EAAOC,CAAG;AACnB,IAAAhS,EAAG,WAAWwK,GAAkB,KAAKxK,CAAE;AAAA,EACzC;AACF;AAEA,SAAS6N,GAAU5N,GAAI;AACrB,SAAO,WAAWA,GAAI,CAAC;AACzB;AAEA,SAASqQ,GAAgBM,GAAI;AAC3B,SAAO,aAAaA,CAAE;AACxB;AAGInG,MACF1K,GAAG,UAAU,aAAa,SAAUoH,GAAK;AACvC,GAAK1D,GAAS,UAAU8F,OAAwBpC,EAAI,cAClDA,EAAI,eAAc;AAEtB,CAAC;AAIH1D,GAAS,QAAQ;AAAA,EACf,IAAI1D;AAAA,EACJ,KAAKG;AAAA,EACL,KAAKW;AAAA,EACL,MAAMQ;AAAA,EACN,IAAI,SAAYrB,GAAII,GAAU;AAC5B,WAAO,CAAC,CAACE,GAAQN,GAAII,GAAUJ,GAAI,EAAK;AAAA,EAC1C;AAAA,EACA,QAAQsE;AAAAA,EACR,UAAUO;AAAA,EACV,SAASvE;AAAA,EACT,aAAaI;AAAA,EACb,OAAOyE;AAAA,EACP,OAAO7Y;AAAAA,EACP,UAAUuhB;AAAA,EACV,gBAAgByC;AAAA,EAChB,iBAAiBxF;AAAA,EACjB,UAAU3H;AACZ;AAOAM,GAAS,MAAM,SAAUwO,GAAS;AAChC,SAAOA,EAAQ3M,EAAO;AACxB;AAOA7B,GAAS,QAAQ,WAAY;AAC3B,WAASyO,IAAO,UAAU,QAAQvL,IAAU,IAAI,MAAMuL,CAAI,GAAGC,IAAO,GAAGA,IAAOD,GAAMC;AAClF,IAAAxL,EAAQwL,CAAI,IAAI,UAAUA,CAAI;AAGhC,EAAIxL,EAAQ,CAAC,EAAE,gBAAgB,UAAOA,IAAUA,EAAQ,CAAC,IACzDA,EAAQ,QAAQ,SAAUG,GAAQ;AAChC,QAAI,CAACA,EAAO,aAAa,CAACA,EAAO,UAAU;AACzC,YAAM,gEAAgE,OAAO,CAAA,EAAG,SAAS,KAAKA,CAAM,CAAC;AAGvG,IAAIA,EAAO,UAAOrD,GAAS,QAAQhF,GAAeA,GAAe,CAAA,GAAIgF,GAAS,KAAK,GAAGqD,EAAO,KAAK,IAClGD,GAAc,MAAMC,CAAM;AAAA,EAC5B,CAAC;AACH;AAQArD,GAAS,SAAS,SAAUzD,GAAIqD,GAAS;AACvC,SAAO,IAAII,GAASzD,GAAIqD,CAAO;AACjC;AAGAI,GAAS,UAAUpE;AAEnB,IAAI+S,KAAc,CAAA,GACdC,IACAC,IACAC,KAAY,IACZC,IACAC,IACAC,IACAC;AAEJ,SAASC,KAAmB;AAC1B,WAASC,IAAa;AACpB,SAAK,WAAW;AAAA,MACd,QAAQ;AAAA,MACR,yBAAyB;AAAA,MACzB,mBAAmB;AAAA,MACnB,aAAa;AAAA,MACb,cAAc;AAAA,IACpB;AAEI,aAAS5S,KAAM;AACb,MAAIA,EAAG,OAAO,CAAC,MAAM,OAAO,OAAO,KAAKA,CAAE,KAAM,eAC9C,KAAKA,CAAE,IAAI,KAAKA,CAAE,EAAE,KAAK,IAAI;AAAA,EAGnC;AAEA,SAAA4S,EAAW,YAAY;AAAA,IACrB,aAAa,SAAqBnL,GAAM;AACtC,UAAIU,IAAgBV,EAAK;AAEzB,MAAI,KAAK,SAAS,kBAChB3H,GAAG,UAAU,YAAY,KAAK,iBAAiB,IAE3C,KAAK,QAAQ,iBACfA,GAAG,UAAU,eAAe,KAAK,yBAAyB,IACjDqI,EAAc,UACvBrI,GAAG,UAAU,aAAa,KAAK,yBAAyB,IAExDA,GAAG,UAAU,aAAa,KAAK,yBAAyB;AAAA,IAG9D;AAAA,IACA,mBAAmB,SAA2B+S,GAAO;AACnD,UAAI1K,IAAgB0K,EAAM;AAG1B,MAAI,CAAC,KAAK,QAAQ,kBAAkB,CAAC1K,EAAc,UACjD,KAAK,kBAAkBA,CAAa;AAAA,IAExC;AAAA,IACA,MAAM,WAAgB;AACpB,MAAI,KAAK,SAAS,kBAChBlI,GAAI,UAAU,YAAY,KAAK,iBAAiB,KAEhDA,GAAI,UAAU,eAAe,KAAK,yBAAyB,GAC3DA,GAAI,UAAU,aAAa,KAAK,yBAAyB,GACzDA,GAAI,UAAU,aAAa,KAAK,yBAAyB,IAG3D6S,GAA+B,GAC/BC,GAAgB,GAChB/N,GAAc;AAAA,IAChB;AAAA,IACA,SAAS,WAAmB;AAC1B,MAAAyN,KAAaJ,KAAeD,KAAWE,KAAYI,KAA6BH,KAAkBC,KAAkB,MACpHL,GAAY,SAAS;AAAA,IACvB;AAAA,IACA,2BAA2B,SAAmCjL,GAAK;AACjE,WAAK,kBAAkBA,GAAK,EAAI;AAAA,IAClC;AAAA,IACA,mBAAmB,SAA2BA,GAAK2G,GAAU;AAC3D,UAAI9I,IAAQ,MAERxJ,KAAK2L,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA,GAAK,SACzC1L,KAAK0L,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA,GAAK,SACzChD,IAAO,SAAS,iBAAiB3I,GAAGC,CAAC;AAMzC,UALAiX,KAAavL,GAKT2G,KAAY,KAAK,QAAQ,2BAA2BrO,MAAQD,MAAcG,IAAQ;AACpF,QAAAsT,GAAW9L,GAAK,KAAK,SAAShD,GAAM2J,CAAQ;AAE5C,YAAIoF,IAAiBnQ,GAA2BoB,GAAM,EAAI;AAE1D,QAAIoO,OAAc,CAACI,MAA8BnX,MAAMgX,MAAmB/W,MAAMgX,QAC9EE,MAA8BI,GAA+B,GAE7DJ,KAA6B,YAAY,WAAY;AACnD,cAAIQ,IAAUpQ,GAA2B,SAAS,iBAAiBvH,GAAGC,CAAC,GAAG,EAAI;AAE9E,UAAI0X,MAAYD,MACdA,IAAiBC,GACjBH,GAAgB,IAGlBC,GAAW9L,GAAKnC,EAAM,SAASmO,GAASrF,CAAQ;AAAA,QAClD,GAAG,EAAE,GACL0E,KAAkBhX,GAClBiX,KAAkBhX;AAAA,MAEtB,OAAO;AAEL,YAAI,CAAC,KAAK,QAAQ,gBAAgBsH,GAA2BoB,GAAM,EAAI,MAAM1C,MAA6B;AACxG,UAAAuR,GAAgB;AAChB;AAAA,QACF;AAEA,QAAAC,GAAW9L,GAAK,KAAK,SAASpE,GAA2BoB,GAAM,EAAK,GAAG,EAAK;AAAA,MAC9E;AAAA,IACF;AAAA,EACJ,GACSpF,GAAS8T,GAAY;AAAA,IAC1B,YAAY;AAAA,IACZ,qBAAqB;AAAA,EACzB,CAAG;AACH;AAEA,SAASG,KAAmB;AAC1B,EAAAZ,GAAY,QAAQ,SAAUa,GAAY;AACxC,kBAAcA,EAAW,GAAG;AAAA,EAC9B,CAAC,GACDb,KAAc,CAAA;AAChB;AAEA,SAASW,KAAkC;AACzC,gBAAcJ,EAA0B;AAC1C;AAEA,IAAIM,KAAapO,GAAS,SAAUsC,GAAK9D,GAASsE,GAAQyL,GAAY;AAEpE,MAAK/P,EAAQ,QACb;AAAA,QAAI7H,KAAK2L,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA,GAAK,SACzC1L,KAAK0L,EAAI,UAAUA,EAAI,QAAQ,CAAC,IAAIA,GAAK,SACzCkM,IAAOhQ,EAAQ,mBACfiQ,IAAQjQ,EAAQ,aAChBU,IAActC,GAAyB,GACvC8R,IAAqB,IACrBC;AAEJ,IAAIlB,OAAiB3K,MACnB2K,KAAe3K,GACfqL,GAAgB,GAChBX,KAAWhP,EAAQ,QACnBmQ,IAAiBnQ,EAAQ,UAErBgP,OAAa,OACfA,KAAWtP,GAA2B4E,GAAQ,EAAI;AAItD,QAAI8L,IAAY,GACZC,IAAgBrB;AAEpB,OAAG;AACD,UAAIrS,IAAK0T,GACLrH,IAAO1K,GAAQ3B,CAAE,GACjBiC,IAAMoK,EAAK,KACXlK,IAASkK,EAAK,QACdnK,IAAOmK,EAAK,MACZjK,IAAQiK,EAAK,OACb/J,IAAQ+J,EAAK,OACbhK,IAASgK,EAAK,QACdsH,IAAa,QACbC,IAAa,QACbC,IAAc7T,EAAG,aACjB8T,IAAe9T,EAAG,cAClB+K,IAAQlK,GAAIb,CAAE,GACd+T,IAAa/T,EAAG,YAChBgU,IAAahU,EAAG;AAEpB,MAAIA,MAAO+D,KACT4P,IAAarR,IAAQuR,MAAgB9I,EAAM,cAAc,UAAUA,EAAM,cAAc,YAAYA,EAAM,cAAc,YACvH6I,IAAavR,IAASyR,MAAiB/I,EAAM,cAAc,UAAUA,EAAM,cAAc,YAAYA,EAAM,cAAc,eAEzH4I,IAAarR,IAAQuR,MAAgB9I,EAAM,cAAc,UAAUA,EAAM,cAAc,WACvF6I,IAAavR,IAASyR,MAAiB/I,EAAM,cAAc,UAAUA,EAAM,cAAc;AAG3F,UAAIkJ,IAAKN,MAAe,KAAK,IAAIvR,IAAQ5G,CAAC,KAAK6X,KAAQU,IAAazR,IAAQuR,MAAgB,KAAK,IAAI3R,IAAO1G,CAAC,KAAK6X,KAAQ,CAAC,CAACU,IACxHG,IAAKN,MAAe,KAAK,IAAIzR,IAAS1G,CAAC,KAAK4X,KAAQW,IAAa3R,IAASyR,MAAiB,KAAK,IAAI7R,IAAMxG,CAAC,KAAK4X,KAAQ,CAAC,CAACW;AAE9H,UAAI,CAAC5B,GAAYqB,CAAS;AACxB,iBAASrf,IAAI,GAAGA,KAAKqf,GAAWrf;AAC9B,UAAKge,GAAYhe,CAAC,MAChBge,GAAYhe,CAAC,IAAI,CAAA;AAKvB,OAAIge,GAAYqB,CAAS,EAAE,MAAMQ,KAAM7B,GAAYqB,CAAS,EAAE,MAAMS,KAAM9B,GAAYqB,CAAS,EAAE,OAAOzT,OACtGoS,GAAYqB,CAAS,EAAE,KAAKzT,GAC5BoS,GAAYqB,CAAS,EAAE,KAAKQ,GAC5B7B,GAAYqB,CAAS,EAAE,KAAKS,GAC5B,cAAc9B,GAAYqB,CAAS,EAAE,GAAG,IAEpCQ,KAAM,KAAKC,KAAM,OACnBX,IAAqB,IAGrBnB,GAAYqB,CAAS,EAAE,MAAM,aAAY,WAAY;AAEnD,QAAIL,KAAc,KAAK,UAAU,KAC/B3P,GAAS,OAAO,aAAaiP,EAAU;AAIzC,YAAIyB,IAAgB/B,GAAY,KAAK,KAAK,EAAE,KAAKA,GAAY,KAAK,KAAK,EAAE,KAAKkB,IAAQ,GAClFc,KAAgBhC,GAAY,KAAK,KAAK,EAAE,KAAKA,GAAY,KAAK,KAAK,EAAE,KAAKkB,IAAQ;AAEtF,QAAI,OAAOE,KAAmB,cACxBA,EAAe,KAAK/P,GAAS,QAAQ,WAAW6B,EAAO,GAAG8O,IAAeD,GAAehN,GAAKuL,IAAYN,GAAY,KAAK,KAAK,EAAE,EAAE,MAAM,cAK/IlN,GAASkN,GAAY,KAAK,KAAK,EAAE,IAAIgC,IAAeD,CAAa;AAAA,MACnE,GAAE,KAAK;AAAA,QACL,OAAOV;AAAA,MACjB,CAAS,GAAG,EAAE,KAIVA;AAAA,IACF,SAASpQ,EAAQ,gBAAgBqQ,MAAkB3P,MAAgB2P,IAAgB3Q,GAA2B2Q,GAAe,EAAK;AAElI,IAAAnB,KAAYgB;AAAA;AACd,GAAG,EAAE,GAEDc,KAAO,SAAc3M,GAAM;AAC7B,MAAIU,IAAgBV,EAAK,eACrBW,IAAcX,EAAK,aACnBiB,IAASjB,EAAK,QACd8G,IAAiB9G,EAAK,gBACtB4M,IAAwB5M,EAAK,uBAC7B6M,IAAqB7M,EAAK,oBAC1B8M,IAAuB9M,EAAK;AAChC,MAAKU,GACL;AAAA,QAAIqM,IAAapM,KAAemG;AAChC,IAAA+F,EAAkB;AAClB,QAAIlH,IAAQjF,EAAc,kBAAkBA,EAAc,eAAe,SAASA,EAAc,eAAe,CAAC,IAAIA,GAChH1J,IAAS,SAAS,iBAAiB2O,EAAM,SAASA,EAAM,OAAO;AACnE,IAAAmH,EAAoB,GAEhBC,KAAc,CAACA,EAAW,GAAG,SAAS/V,CAAM,MAC9C4V,EAAsB,OAAO,GAC7B,KAAK,QAAQ;AAAA,MACX,QAAQ3L;AAAA,MACR,aAAaN;AAAA,IACnB,CAAK;AAAA;AAEL;AAEA,SAASqM,KAAS;AAAC;AAEnBA,GAAO,YAAY;AAAA,EACjB,YAAY;AAAA,EACZ,WAAW,SAAmB5B,GAAO;AACnC,QAAI5K,IAAoB4K,EAAM;AAC9B,SAAK,aAAa5K;AAAA,EACpB;AAAA,EACA,SAAS,SAAiByM,GAAO;AAC/B,QAAIhM,IAASgM,EAAM,QACftM,IAAcsM,EAAM;AACxB,SAAK,SAAS,sBAAqB,GAE/BtM,KACFA,EAAY,sBAAqB;AAGnC,QAAI8H,IAAchN,GAAS,KAAK,SAAS,IAAI,KAAK,YAAY,KAAK,OAAO;AAE1E,IAAIgN,IACF,KAAK,SAAS,GAAG,aAAaxH,GAAQwH,CAAW,IAEjD,KAAK,SAAS,GAAG,YAAYxH,CAAM,GAGrC,KAAK,SAAS,WAAU,GAEpBN,KACFA,EAAY,WAAU;AAAA,EAE1B;AAAA,EACA,MAAMgM;AACR;AAEAtV,GAAS2V,IAAQ;AAAA,EACf,YAAY;AACd,CAAC;AAED,SAASE,KAAS;AAAC;AAEnBA,GAAO,YAAY;AAAA,EACjB,SAAS,SAAiBC,GAAO;AAC/B,QAAIlM,IAASkM,EAAM,QACfxM,IAAcwM,EAAM,aACpBC,IAAiBzM,KAAe,KAAK;AACzC,IAAAyM,EAAe,sBAAqB,GACpCnM,EAAO,cAAcA,EAAO,WAAW,YAAYA,CAAM,GACzDmM,EAAe,WAAU;AAAA,EAC3B;AAAA,EACA,MAAMT;AACR;AAEAtV,GAAS6V,IAAQ;AAAA,EACf,YAAY;AACd,CAAC;AAEDnR,GAAS,MAAM,IAAImP,IAAkB;AACrCnP,GAAS,MAAMmR,IAAQF,EAAM;AAE7B,SAASK,KAAa;AAClB,SAAI,OAAO,SAAW,MACX,OAAO,UAEX,OAAO;AAClB;AACA,MAAMC,KAAUD,GAAU;AAC1B,SAASE,GAAOhV,GAAI;AAChB,QAAMiV,IAAQ,uBAAO,OAAO,IAAI;AAChC,SAAO,SAAkBtD,GAAK;AAE1B,WADYsD,EAAMtD,CAAG,MACNsD,EAAMtD,CAAG,IAAI3R,EAAG2R,CAAG;AAAA,EACtC;AACJ;AACA,MAAMuD,KAAQ,UACRC,KAAWH,GAAO,CAACrD,MAAQA,EAAI,QAAQuD,IAAO,CAACE,GAAGC,MAAOA,IAAIA,EAAE,YAAW,IAAK,EAAG,CAAC;AACzF,SAASC,GAAW1Y,GAAM;AACtB,EAAIA,EAAK,kBAAkB,QACvBA,EAAK,cAAc,YAAYA,CAAI;AAE3C;AACA,SAAS2Y,GAAaC,GAAY5Y,GAAMnB,GAAU;AAC9C,QAAMga,IAAUha,MAAa,IACvB+Z,EAAW,SAAS,CAAC,IACrBA,EAAW,SAAS/Z,IAAW,CAAC,EAAE;AACxC,EAAA+Z,EAAW,aAAa5Y,GAAM6Y,CAAO;AACzC;AAEA,SAASC,GAAeC,GAAQ3D,GAAS;AACrC,SAAO,OAAO,OAAO2D,CAAM,EAAE,QAAQ3D,CAAO;AAChD;AACA,SAAS4D,GAAeC,GAAOtS,GAAUuS,GAAcC,GAAc;AACjE,MAAI,CAACF;AACD,WAAO;AAEX,QAAMG,IAAe,OAAO,OAAOH,CAAK,GAClCI,IAAc1S,EAAS,SAASwS;AAEtC,SADmB,CAAC,GAAGxS,CAAQ,EAAE,IAAI,CAAC2S,GAAKnE,MAAQA,KAAOkE,IAAcD,EAAa,SAASA,EAAa,QAAQE,CAAG,CAAC;AAE3H;AACA,SAAS7nB,GAAK8nB,GAASC,GAAS;AAE5B,OAAK,UAAU,MAAM,KAAK,MAAMD,EAAQ,YAAW,GAAIC,CAAO,CAAC;AACnE;AACA,SAASC,GAAgBF,GAAS;AAE9B,SAAO,CAAAC,MAAW;AAEd,IAAI,KAAK,aAAa,QAElB,KAAK,WAAWD,CAAO,EAAEC,CAAO,GAGpC/nB,GAAK,KAAK,MAAM8nB,GAASC,CAAO;AAAA,EACpC;AACJ;AACA,SAASE,GAAiB5V,GAAM;AAC5B,SAAO,CAAC,oBAAoB,iBAAiB,EAAE,SAASA,CAAI;AAChE;AACA,SAASoV,GAAaD,GAAO;AACzB,MAAI,CAACA,KAASA,EAAM,WAAW;AAC3B,WAAO;AAGX,QAAM,CAAC,EAAE,MAAAnpB,GAAM,IAAImpB;AACnB,SAAKnpB,IAIE4pB,GAAiB5pB,EAAK,IAAI,IAHtB;AAIf;AACA,SAAS6pB,GAAuBC,GAAQC,GAAe;AACnD,SAAKA,IAGE,EAAE,GAAGA,EAAc,OAAO,GAAGA,EAAc,MAAK,IAF5CD;AAGf;AACA,MAAME,KAAiB,CAAC,SAAS,OAAO,UAAU,UAAU,KAAK,GAC3DC,KAAe,CAAC,UAAU,YAAY,QAAQ,UAAU,OAAO,GAC/DC,KAAqB,CAAC,QAAQ,GAAGF,IAAgB,GAAGC,EAAY,EAAE,IAAI,CAAAzP,MAAO,OAAOA,CAAG;AAE7F,IAAI2P,KAAkB;AACtB,MAAM3qB,KAAQ;AAAA,EACV,SAAS;AAAA,EACT,MAAM;AAAA,IACF,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS;AAAA,EACjB;AAAA,EACI,oBAAoB;AAAA,IAChB,MAAM;AAAA,IACN,SAAS;AAAA,EACjB;AAAA,EACI,OAAO;AAAA,IACH,MAAM;AAAA,IACN,SAAS,CAAC4qB,MACCA;AAAA,EAEnB;AAAA,EACI,KAAK;AAAA,IACD,MAAM;AAAA,IACN,SAAS;AAAA,EACjB;AAAA,EACI,MAAM;AAAA,IACF,MAAM;AAAA,IACN,SAAS;AAAA,EACjB;AAAA,EACI,eAAe;AAAA,IACX,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS;AAAA,EACjB;AAAA,EACI,WAAW;AAAA,IACP,MAAM;AAAA,IACN,SAAS;AAAA,EACjB;AAAA,EACI,YAAY;AAAA,IACR,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS;AAAA,EACjB;AACA,GACMC,KAAmBC,GAAgB;AAAA,EACrC,MAAM;AAAA,EACN,cAAc;AAAA,EACd,OAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAGN,GAAe,IAAI,CAAAO,MAAKA,EAAE,YAAW,CAAE;AAAA,IAC1C,GAAGN,GAAa,IAAI,CAAAM,MAAKA,EAAE,YAAW,CAAE;AAAA,EAChD;AAAA,EACI,OAAA/qB;AAAA,EACA,OAAO;AACH,WAAO;AAAA,MACH,gBAAgB;AAAA,MAChB,6BAA6B;AAAA,MAC7B,cAAc;AAAA,MACd,cAAc;AAAA,MACd,WAAW,CAAA;AAAA,MACX,gBAAgB,CAAA;AAAA,MAChB,SAAS,CAAA;AAAA,IACrB;AAAA,EACI;AAAA,EACA,SAAS;AACL,UAAM2pB,IAAQ,KAAK,OAAO,UAAU,KAAK,OAAO,QAAO,IAAK,MACtDqB,IAAQX,GAAuB,KAAK,QAAQ,KAAK,aAAa;AACpE,WAAKV,KAEL,KAAK,iBAAiBC,GAAaD,CAAK,GACjCsB,GAAE,KAAK,OAAM,GAAID,GAAOrB,CAAK,KAFzBsB,GAAE,KAAK,OAAM,GAAID,GAAO,CAAA,CAAE;AAAA,EAGzC;AAAA,EACA,UAAU;AACN,IAAI,KAAK,SAAS,QAAQ,KAAK,eAAe,QAC1CnC,GAAQ,MAAM,oDAAoD;AAAA,EAE1E;AAAA,EACA,UAAU;AACN,UAAMqC,IAAe,CAAA;AACrB,IAAAV,GAAe,QAAQ,CAAAR,MAAO;AAC1B,MAAAkB,EAAa,OAAOlB,CAAG,IAAIG,GAAgB,KAAK,MAAMH,CAAG;AAAA,IAC7D,CAAC,GACDS,GAAa,QAAQ,CAAAT,MAAO;AACxB,MAAAkB,EAAa,OAAOlB,CAAG,IAAI7nB,GAAK,KAAK,MAAM6nB,CAAG;AAAA,IAClD,CAAC;AACD,UAAMmB,IAAa,OAAO,KAAK,KAAK,MAAM,EAAE,OAAO,CAACC,GAAK3Y,OACrD2Y,EAAInC,GAASxW,CAAG,CAAC,IAAI,KAAK,OAAOA,CAAG,GAC7B2Y,IACR,CAAA,CAAE,GACClU,IAAU,OAAO,OAAO,CAAA,GAAIiU,GAAYD,GAAc;AAAA,MACxD,QAAQ,CAAClQ,GAAKiB,MACH,KAAK,WAAWjB,GAAKiB,CAAa;AAAA,IAEzD,CAAS;AACD,MAAE,eAAe/E,OAAaA,EAAQ,YAAY;AAClD,UAAMmU,IAAmB,KAAK,IAAI,aAAa,IAAI,KAAK,MAAM,KAAK,IAAI;AACvE,SAAK,YAAY,IAAI/T,GAAS+T,GAAkBnU,CAAO,GACvDmU,EAAiB,0BAA0B,MAC3C,KAAK,eAAc;AAAA,EACvB;AAAA,EACA,gBAAgB;AACZ,QAAI;AACA,MAAI,KAAK,cAAc,UACnB,KAAK,UAAU;IACvB,QACc;AAAA,IAAE;AAAA,EACpB;AAAA,EACA,UAAU;AAAA,IACN,WAAW;AACP,aAAO,KAAK,OAAO,KAAK,OAAO,KAAK;AAAA,IACxC;AAAA,EACR;AAAA,EACI,OAAO;AAAA,IACH,QAAQ;AAAA,MACJ,QAAQC,GAAgB;AACpB,aAAK,cAAcA,CAAc;AAAA,MACrC;AAAA,MACA,MAAM;AAAA,IAClB;AAAA,IACQ,WAAW;AACP,WAAK,eAAc;AAAA,IACvB;AAAA,EACR;AAAA,EACI,SAAS;AAAA,IACL,SAAS;AACL,aAAO,KAAK,YAAYC,EAAiB,KAAK,SAAS,IAAI,KAAK;AAAA,IACpE;AAAA,IACA,cAAcD,GAAgB;AAC1B,eAAS5kB,KAAY4kB,GAAgB;AACjC,cAAMhpB,IAAQ2mB,GAASviB,CAAQ;AAC/B,QAAIgkB,GAAmB,QAAQpoB,CAAK,MAAM,MACtC,KAAK,UAAU,OAAOA,GAAOgpB,EAAe5kB,CAAQ,CAAC;AAAA,MAE7D;AAAA,IACJ;AAAA,IACA,mBAAmB;AACf,aAAO,KAAK,IAAI;AAAA,IACpB;AAAA,IACA,iBAAiB;AACb,WAAK,UAAU,MAAM;AACjB,aAAK,iBAAiBgjB,GAAe,KAAK,iBAAgB,GAAI,KAAK,IAAI,UAAU,KAAK,gBAAgB,KAAK,YAAY;AAAA,MAC3H,CAAC;AAAA,IACL;AAAA,IACA,gBAAgB8B,GAAS;AACrB,YAAMrrB,IAAQqpB,GAAe,KAAK,iBAAgB,KAAM,CAAA,GAAIgC,CAAO;AACnE,UAAIrrB,MAAU;AAGV,eAAO;AAGX,YAAM2lB,IAAU,KAAK,SAAS3lB,CAAK;AACnC,aAAO,EAAE,OAAAA,GAAO,SAAA2lB;IACpB;AAAA,IACA,YAAY9K,GAAK;AACb,WAAK,UAAU,MAAM;AACjB,aAAK,MAAM,UAAUA,CAAG;AAAA,MAC5B,CAAC;AAAA,IACL;AAAA,IACA,UAAUyQ,GAAQ;AACd,UAAI,KAAK,MAAM;AACX,QAAAA,EAAO,KAAK,IAAI;AAChB;AAAA,MACJ;AACA,YAAMC,IAAU,CAAC,GAAG,KAAK,UAAU;AACnC,MAAAD,EAAOC,CAAO,GACd,KAAK,MAAM,qBAAqBA,CAAO;AAAA,IAC3C;AAAA,IACA,aAAa;AACT,YAAMC,IAAa,CAAC/qB,MAASA,EAAK,OAAO,GAAG,SAAS;AACrD,WAAK,UAAU+qB,CAAU;AAAA,IAC7B;AAAA,IACA,eAAe9P,GAAUC,GAAU;AAC/B,YAAM8P,IAAiB,CAAChrB,MAASA,EAAK,OAAOkb,GAAU,GAAGlb,EAAK,OAAOib,GAAU,CAAC,EAAE,CAAC,CAAC;AACrF,WAAK,UAAU+P,CAAc;AAAA,IACjC;AAAA,IACA,WAAWC,GAAU;AACjB,YAAMC,IAAU,KAAK,gBACfC,IAAgBD,EAAQ;AAC9B,aAAOD,IAAWE,IAAgB,IAAIA,IAAgBD,EAAQD,CAAQ;AAAA,IAC1E;AAAA,IACA,eAAe;AACX,aAAO,KAAK,OAAO;AAAA;AAAA,QAEX,KAAK,OAAO,UAAU,CAAC,EAAE;AAAA,UAC3B;AAAA,IACV;AAAA,IACA,oBAAoB1rB,GAAO;AACvB,UAAI,CAAC,KAAK,sBAAsB,CAAC,KAAK;AAClC;AAEJ,UAAI6rB,IAAQ,KAAK;AACjB,MAAAA,EAAM7rB,CAAK,EAAE,OAAO;AACpB,YAAM8rB,IAAsB,KAAK;AACjC,MAAAA,EAAoB,WAAW,IAC/BA,EAAoB,OAAO;AAAA,IAC/B;AAAA,IACA,YAAYjR,GAAK;AAGb,MAFA,KAAK,eAAc,GACnB,KAAK,UAAU,KAAK,gBAAgBA,EAAI,IAAI,GACvC,KAAK,YAEVA,EAAI,KAAK,kBAAkB,KAAK,MAAM,KAAK,QAAQ,OAAO,GAC1D2P,KAAkB3P,EAAI;AAAA,IAC1B;AAAA,IACA,UAAUA,GAAK;AACX,YAAM8K,IAAU9K,EAAI,KAAK;AACzB,UAAI8K,MAAY;AACZ;AAEJ,MAAAsD,GAAWpO,EAAI,IAAI;AACnB,YAAMc,IAAW,KAAK,WAAWd,EAAI,QAAQ;AAE7C,WAAK,WAAWc,GAAU,GAAGgK,CAAO,GACpC,KAAK,eAAc;AACnB,YAAMoG,IAAQ,EAAE,SAAApG,GAAS,UAAAhK;AACzB,WAAK,YAAY,EAAE,OAAAoQ,EAAK,CAAE;AAAA,IAC9B;AAAA,IACA,aAAalR,GAAK;AAEd,UADAqO,GAAa,KAAK,KAAKrO,EAAI,MAAMA,EAAI,QAAQ,GACzCA,EAAI,aAAa,SAAS;AAC1B,QAAAoO,GAAWpO,EAAI,KAAK;AACpB;AAAA,MACJ;AACA,UAAI,CAAC,KAAK;AACN;AACJ,YAAMa,IAAW,KAAK,QAAQ;AAE9B,WAAK,WAAWA,GAAU,CAAC;AAC3B,YAAMsQ,IAAU,EAAE,SAAS,KAAK,QAAQ,SAAS,UAAAtQ;AACjD,WAAK,oBAAoBA,CAAQ,GACjC,KAAK,YAAY,EAAE,SAAAsQ,EAAO,CAAE;AAAA,IAChC;AAAA,IACA,aAAanR,GAAK;AACd,MAAAoO,GAAWpO,EAAI,IAAI,GACnBqO,GAAarO,EAAI,MAAMA,EAAI,MAAMA,EAAI,QAAQ;AAE7C,YAAMa,IAAW,KAAK,QAAQ,OACxBC,IAAW,KAAK,WAAWd,EAAI,QAAQ;AAC7C,WAAK,eAAea,GAAUC,CAAQ;AAEtC,YAAMgB,IAAQ,EAAE,SAAS,KAAK,QAAQ,SAAS,UAAAjB,GAAU,UAAAC;AACzD,WAAK,YAAY,EAAE,OAAAgB,EAAK,CAAE;AAAA,IAC9B;AAAA,IACA,eAAe9B,GAAKoR,GAAc;AAC9B,MAAApR,EAAI,eAAeoR,CAAY,MAC1BpR,EAAIoR,CAAY,KAAK,KAAK;AAAA,IACnC;AAAA,IACA,WAAWpR,GAAKiB,GAAe;AAC3B,YAAMoQ,IAAS,KAAK;AACpB,UAAI,CAACA,KAAU,CAAC,KAAK;AACjB,eAAO;AAEX,YAAMC,IAAiB,KAAK,+BAA+BtR,CAAG,GACxDuR,IAAiB,KAAK,SACtBC,IAAc,KAAK,mBAAmBF,GAAgBtR,CAAG;AAC/D,aAAO,OAAOuR,GAAgB,EAAE,aAAAC,EAAW,CAAE;AAC7C,YAAMC,IAAU,OAAO,OAAO,CAAA,GAAIzR,GAAK;AAAA,QACnC,gBAAAsR;AAAA,QACA,gBAAAC;AAAA,MAChB,CAAa;AACD,aAAOF,EAAOI,GAASxQ,CAAa;AAAA,IACxC;AAAA,IACA,YAAY;AACR,WAAK,eAAc,GACnB0O,KAAkB;AAAA,IACtB;AAAA,IACA,sBAAsB+B,GAAY;AAC9B,aAAOA,EAAW;AAAA,IACtB;AAAA,IACA,+BAA+B,EAAE,IAAAlM,GAAI,SAAAmM,KAAW;AAC5C,YAAMzmB,IAAY,KAAK,sBAAsBsa,CAAE;AAC/C,UAAI,CAACta;AACD,eAAO,EAAE,WAAAA,EAAS;AAEtB,YAAMtF,IAAOsF,EAAU,UACjB0mB,IAAU,EAAE,MAAAhsB,GAAM,WAAAsF;AACxB,UAAIsa,MAAOmM,KAAW/rB,KAAQsF,EAAU,iBAAiB;AACrD,cAAM2mB,IAAc3mB,EAAU,gBAAgBymB,CAAO;AACrD,YAAIE;AACA,iBAAO,OAAO,OAAOA,GAAaD,CAAO;AAAA,MAEjD;AACA,aAAOA;AAAA,IACX;AAAA,IACA,mBAAmBN,GAAgBtR,GAAK;AACpC,YAAM8R,IAAc,CAAC,GAAG9R,EAAI,GAAG,QAAQ,EAAE,OAAO,CAAAnH,MAAMA,EAAG,MAAM,YAAe,MAAM;AACpF,UAAIiZ,EAAY,WAAW;AACvB,eAAO;AACX,YAAMC,IAAkBD,EAAY,QAAQ9R,EAAI,OAAO,GACjDgS,IAAeV,EAAe,UAAU,WAAWS,CAAe;AAExE,aADsBD,EAAY,QAAQnC,EAAe,MAAM,MACvC,CAAC3P,EAAI,kBACvBgS,IACAA,IAAe;AAAA,IACzB;AAAA,EACR;AACA,CAAC,GCzzGDC,KAAe;AAAA,EACb,OAAO;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,OAAO;AAAA,EACf,MAAMjtB,GAAO;AAGX,WAAO;AAAA,MACL,cAHmB6E,GAAS,MAAM7E,EAAM,OAAO;AAAA,IAG/C;AAAA,EAEJ;AACF;SAxBekK,GAAApK,GAAYuD,GAAAzD,GAAAwD,GAAA8pB,GAAAC,GAAA;cAAvBvpB,GAAAwpB,IAEM,EAAA,IAAA,UAAA;AAAA,IAAAhqB,EAJV,qBAEmC9D,EAAY,OAAA;AAAA,MAAE,KAAA;AAAA,MAAA,OAAA;AAAA,MAC3C,SAAA+D,EAAa,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAxD,EAAA,MAAA,OAAA;AAAA,IAAA,GAAA;AAAA,MAHnBD,GAAAC,EAAA,QAAA,WAAA,CAAA,GAAA,QAAA,EAAA;AAAA,IAAA,CAAA,KAAA0J,GAAA,IAAA,EAAA;AAAA;;uFCiFA6jB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAatrB;AAAA,IACb,WAAWuP;AAAA,IACX,cAAcD;AAAA,IACd,UAAUD;AAAA,IACV,aAAapP;AAAA,IACb,eAAesrB;AAAA,IACf,YAAY/iB;AAAA,IACZ,UAAAgjB;AAAA,IACA,WAAAC;AAAA,IACA,SAASC,GAAA;AAAA,IACT,UAAUC,GAAA;AAAA,IACV,UAAUC,GAAA;AAAA,IACV,WAAWC,GAAA;AAAA,EAAU;AAAA,EAEvB,cAAc;AAAA,EACd,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,MAAM;AAAA,MAAC;AAAA,IAAA;AAAA,IAElB,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS,MAAM;AAAA,MAAC;AAAA,IAAA;AAAA,IAElB,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA,IAGX,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA;AAAA,IAGX,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,YAAY,cAAc,cAAc,MAAM;AAAA,EACtD,MAAM5tB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM0rB,IAAWjrB,GAAc,EAAE,GAC3BkrB,IAAS/oB,GAAI,EAAK,GAClBgpB,IAAYhpB,GAAI,EAAK,GACrBipB,IAAWjpB,GAAI,EAAK,GACpB+Q,IAAM/Q,GAAI,CAAC,GAEXkpB,IAAa,MAAM;AACvB,MAAAH,EAAO,QAAQ;AAAA,IACjB,GAEMI,IAAW,MAAM;AACrB,MAAAF,EAAS,QAAQ,IACjBD,EAAU,QAAQ;AAAA,IACpB,GAEMI,IAAW,CAAC7qB,GAAa8qB,MAAgB;AAC7C,cAAQA,GAAA;AAAA,QACN,KAAK;AACH,UAAAH,EAAA;AACA;AAAA,QACF,KAAK;AACH,UAAA9rB,EAAK,YAAY,EAAE,QAAQ,aAAa,OAAOnC,EAAM,OAAO;AAC5D;AAAA,QACF,KAAK;AACH,UAAAmC,EAAK,YAAY,EAAE,QAAQ,QAAQ,OAAOnC,EAAM,OAAO,GACvDkuB,EAAA;AACA;AAAA,QACF;AACE,UAAA/rB,EAAK,YAAY,EAAE,OAAOnC,EAAM,OAAO,GACvCkuB,EAAA;AACA;AAAA,MAAA;AAAA,IAEN,GAEMG,IAAS,MAAM;AACnB,MAAAlsB,EAAK,cAAc0rB,CAAQ;AAAA,IAC7B,GAEMS,IAAU,MAAM;AACpB,MAAAR,EAAO,QAAQ,IAEf3rB,EAAK,cAAc0rB,CAAQ;AAAA,IAC7B,GAEMU,IAAkB,MAAM;AAC5B,MAAAR,EAAU,QAAQ,IAClBC,EAAS,QAAQ;AAAA,IACnB,GAEMQ,IAAO,MAAM;AACjB,MAAArsB,EAAK,MAAM;AAAA,IACb,GAEMssB,IAAc1pB,GAAI,EAAK,GAEvB2pB,IAAS,MAAM;AACnB,MAAAX,EAAU,QAAQ;AAAA,IACpB,GAEMY,IAAc,CAACnd,MAAkB;AACrC,MAAArP,EAAK,cAAc,EAAE,MAAMqP,GAAU,OAAOxR,EAAM,OAAO,GACzD+tB,EAAU,QAAQ;AAAA,IACpB;AAEA,IAAA9iB,GAAY,MAAM;AAChB,MAAA4iB,EAAS,SAAS7tB,EAAM,MACxB6tB,EAAS,YAAY7tB,EAAM,YAAY,WACvC6tB,EAAS,aAAa7tB,EAAM,YAAY,YACxC6tB,EAAS,QAAQ7tB,EAAM,YAAY,OACnC6tB,EAAS,QAAQ7tB,EAAM,OAEnBA,EAAM,iBAAiBA,EAAM,SAC/B0uB,EAAA;AAAA,IAEJ,CAAC;AAED,UAAME,IAAW,MAAM;AACrB,MAAI5uB,EAAM,aAAa,CAAC8tB,EAAO,SAC7BI,EAAA;AAAA,IAEJ,GAEMW,IAAY,MAAM;AACtB,MAAAb,EAAS,QAAQ,IACjBD,EAAU,QAAQ;AAAA,IACpB;AAEA,WAAArf,GAAU,MAAM;AACd,MAAI1O,EAAM,iBAAiBA,EAAM,SAC/BkuB,EAAA;AAAA,IAEJ,CAAC,GAEM;AAAA,MACL,UAAAL;AAAA,MACA,QAAAQ;AAAA,MACA,YAAAJ;AAAA,MACA,iBAAAM;AAAA,MACA,UAAAJ;AAAA,MACA,MAAAK;AAAA,MACA,QAAAV;AAAA,MACA,SAAAQ;AAAA,MACA,UAAAJ;AAAA,MACA,WAAAH;AAAA,MACA,UAAAC;AAAA,MACA,WAAAa;AAAA,MACA,KAAA/Y;AAAA,MACA,aAAA2Y;AAAA,MACA,aAAAE;AAAA,MACA,QAAAD;AAAA,MACA,UAAAE;AAAA,IAAA;AAAA,EAEJ;AACF,GA9OWE,KAAA,CAAAzZ,OAAK0Z,GAAO,iBAAA,GAAA1Z,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z,IAIZ9V,KAAA,EAAA,OAAM,eAAA,GAPjByD,KAAA,EAAA,OAAA,OAAA,4BA+DMW,KAAA,CAAA,SAAA;;;;gKA/DNsrB,IAAA7vB,EAAA,YAAA;SACQC,EAAA,GADRC,EAAAiE,IAAA,MAAA;AAAA,IAAAN,EACkF,OAAA;AAAA,MAAA,OAAAyG,GAAA,CAAA,gBAAA,EAAA,eAAA9J,EAAA,iBAAAA,EAAA,MAAA,CAAA,CAAA;AAAA,MAC9E,SAAAyD,EAAA,CAAA,MAiDMA,EAjDN,CAAA,IAAA,IAiDMoI,MAAArI,EAAA,YAAAA,EAAA,SAAA,GAAAqI,CAAA;AAAA,IAAA,GAAA;AAAA,MA/CqDxI,EAAA,OAAA1D,IAAA;AAAA,QAAA0D,EACd,OAAAD,IAAA;AAAA,UAAAxD,EAAA0vB,GAAA,EAAA,OAAA,0BAAA,CAAA;AAAA,UAE3CrvB,GAAAC,EAAA,QAAA,WA2CM,EAAA,MAAAF,EAAA,QAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA,QAzCFqD,EAAA,OAAAQ,IAAA;AAAA,UAAA5D,GAAAC,EAAA,QAAA,WATV,EAAA,MAAAF,EAAA,KAAA,GAAA,MAAA;AAAA,aAAAP,EAS8D,EAAK,GAAIC,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,YAAA,SAAA,CAAAkB;mBACvCA,EAAK;AAAA,YAAA,GAAA;AAAA,gBAEpB,SAAK,UAAAzB,EAAA,GACGuE,GAAA+F,GAAS;AAAA,gBAblC,KAAAvG,EAAA,SAAA;AAAA,gBAcgB,YAAUA,EAAA;AAAA,gBACT,uBAAYC,uBAAoCD,EAAM,YAAAE;AAAA,gBACtD,WAAA;AAAA,gBACD,gBAAQ,CAAA,iBAAA,EAAA,cAAA1D,EAAA,OAAA,CAAA;AAAA,gBACR,iBAAW,CAAAA,EAAA;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO;AAAA,gBACN,QAAI;AAAA,gBAAA,SAAA;AAAA,gBAiBM,QAAA,CAAA0D,MAASF,EAC0E,KAAAtC,CAAA;AAAA,cAAA,GAAA;AAAA,gBAA3E,WAAApB,EAAA,MAAA;AAAA,kBAAAF,EAAgC2vB,GAAE;AAAA,oBAAA,OAAA;AAAA;qBAvCrE,MAAA,GAAA,CAAA,SAoC4B,CAAA;AAAA,gBAAA,CAAA;AAAA,gBAZV,SAAAzvB,EAAA,MAAA;AAAA,kBAAA0D,EAxBlB,aAAA/D,KAAAC,EAAA,OAAA;AAAA,oBAwBuB,KAAI;AAAA,oBAAa,SAAM;AAAA,oBAAe,KAAK;AAAA,oBAAA,OAAA;AAAA,oBAC9C,OAAAmK,GAAmF,QAAArG,EAAA,SAAA,IAAA,UAAAA,EAAA,SAAA,GAAA,IAAA;AAAA,kBAAA,GAAA;AAAA,sBAA9BgsB,GAAe;AAAA,sBAAA,OAAA;AAAA,sBACpE,SAAAhsB,EAQO;AAAA,oBAAA,GAPL,MAAA,GAAA,CAAA,SAMa,CAAA;AAAA,oBAAAvD,GAJXC,EAAa,QAAO,YAAA,CAAA,GAAA,MAAA;AAAA,sBAAAN,EACnB6vB,GAAkBzlB,GAAAxG,EAAA,UAAA;AAAA,wBAClB,eAAQ;AAAA,wBACR,cAASA,EAAA;AAAA,wBAAA,UAAAA,EAAA;AAAA;uBAGd,GAAA,MAA2B,IAAA,CAAA,gBAAA,YAAA,WAAA,CAAA;AAAA,oBAAA,GAAA,EAAA;AAAA,oBAnC/CvD,GAAAC,EAAA,QAAA,UAAA,CAAA,GAAA,QAAA,EAAA;AAAA,kBAAA,GAAA,CAAA,KAAA0J,GAAA,IAAA,EAAA;AAAA,gBAAA,CAAA;AAAA;cAAA,GAAA,MAAA,CAAA,cAAA,gBAAA,iBAAA,QAAA,CAAA,MAAAnK,EAAA,GA4C0BC,EAAW,QAAA;AAAA,gBAAE,KAAA;AAAA,gBAAA,OAAA;AAAA,gBACvB,SAAA,CAAAgE,MAAAF,EAAA,SA7ChBE,GAAAxC,EAAA,IA6CgC;AAAA,cAAA,GAAA;AAAA;;;;;MAUtB,CAAA;AAAA,IAAA,GAAA,CAAA;AAAA,IAvDVsC,EAAA,UAAA/D,KAwDKuE,GAAoB0rB,GAAA;AAAA,MACpB,KAAA;AAAA,MACD,kBAAU;AAAA,MACV,SAAMlsB,EAAK;AAAA,MACV,OAAA;AAAA,MAAA,OAAA;AAAA,MAKU,oBAC4CC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,SAAAE;AAAA,IAAA,GAAA;AAAA,cAAvC5D,EAAK,MAAA;AAAA,QAAAF,EAAAgM,GAAA;AAAA,UAlEzB,SAAAnI,EAAA,CAAA,MAkE6CA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,SAAA;AAAA,QAAA,GAAA;AAAA;YAlE7CvB,GAAA,IAAA;AAAA,UAAA,CAAA;AAAA,UAmEM,GAAA;AAAA,QAAA,CAAA;AAAA,UAAmC2J,GAAO;AAAA,UAAA,MAAA;AAAA,UAnEhD,SAAApI,EAAA;AAAA,QAAA,GAAA;AAAA;YAAAvB,GAAA,IAAA;AAAA,UAAA,CAAA;AAAA;QAAA,GAAA,GAAA,CAAA,SA8DI,CAEO;AAAA,MAAA,CAAA;AAAA;QAhEXwH;AAAAA,MAAA,CAAA;AAAA,MAAA,GAAA;AAAA,IAAA,GAuEE,GAAA,CAAA,SAA2E,CAAA,KAA9DG,GAAS,IAAQ,EAAK;AAAA,IAAAhK,EAAgByvB,GAAS;AAAA,MAAA,SAAA7rB,EAAA,YAAA,CAAAxD,EAAA;AAAA;;;;uFCF9D2vB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,cAAAC;AAAA,IACA,kBAAA3E;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA,IAElB,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA;AAAA,IAGlB,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAM7qB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMstB,IAAiB5qB,GAAS,MAAM7E,CAAK,GACrC,EAAE,gBAAA0vB,EAAA,IAAmBC,GAAA,GAErBC,IAAa,CAACC,MAAW;AAC7B,YAAMC,IAAc,CAAC,GAAG9vB,EAAM,WAAW;AACzC,MAAI6vB,EAAO,SACTC,EAAYD,EAAO,KAAK,IAAIA,EAAO,OAGrC1tB,EAAK,cAAc2tB,CAAW;AAAA,IAChC,GAEM7B,IAAa,CAAC4B,MAAW;AAC7B,MAAA1tB,EAAK,cAAc0tB,CAAM;AAAA,IAC3B,GAEME,IAAU,CAACztB,MAAU;AACzB,MAAAH,EAAK,WAAWG,CAAK;AAAA,IACvB,GAEM0tB,IAAW,CAACH,MAAW;AAC3B,YAAMC,IAAc,CAAC,GAAG9vB,EAAM,WAAW;AAEzC,cAAQ6vB,EAAO,QAAA;AAAA,QACb,KAAK;AACH,UAAA1tB,EAAK,aAAa,EAAE,OAAO0tB,EAAO,OAAO;AACzC;AAAA,QAEF;AACE,UAAAC,EAAYD,EAAO,KAAK,IAAIA,EAAO,MACnC1tB,EAAK,cAAc2tB,CAAW;AAC9B;AAAA,MAAA;AAAA,IAEN,GAEMG,IAAW;AAAA,MACf,OAAO;AAAA,MACP,WAAW;AAAA,MACX,OAAO;AAAA,MACP,QAAQ;AAAA,IAAA;AA8BV,WAAO;AAAA,MACL,gBAAAR;AAAA,MACA,YAAAG;AAAA,MACA,YAAA3B;AAAA,MACA,SAAA8B;AAAA,MACA,UAAAC;AAAA,MACA,YAjCiB,CAAClvB,MAAS;AAC3B,YAAI,CAACA;AACH,iBAAO;AAGT,YAAIovB,IAAO;AAmBX,eAjBarrB,GAAS,MAAM;AAK1B,cAJI/D,EAAK,SACPovB,IAAOD,EAASnvB,EAAK,IAAI,IAGvBA,EAAKd,EAAM,SAAS;AACtB,gBAAIc,EAAKd,EAAM,SAAS,EAAE,SAAS;AACjC,oBAAMmwB,IAAUrvB,EAAKd,EAAM,SAAS,EAAE;AACtC,cAAAkwB,IAAOR,EAAe,MAAMS,CAAO,EAAET,EAAe,WAAW;AAAA,YACjE;AACE,cAAAQ,IAAOpvB,EAAKd,EAAM,SAAS;AAI/B,iBAAOkwB;AAAA,QACT,CAAC;AAAA,MAGH;AAAA,IAQE;AAAA,EAEJ;AACF;;iCAvL2BE,IAAAhxB,EAAA,oBAAA;AAD3B,SAAAQ,EAAA,aAAAP,EAAA,GAE8BuE,GAAAwsB,GAA4B;AAAA,IAAE,KAAI;AAAA,IAAe,OAAM;AAAA,IAAe,MAAAxwB,EAAQ;AAAA,IAAA,QAAA;AAAA,IAF5G,UAAAwD,EAAA;AAAA,EAAA,GAAA;AAAA;SAGsD,EAAK,GAAA9D,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,aAAA,CAAAkB,GAAAX,OAAOd,EAAA,GAAcC,EAAA,OAAA;AAAA,QAAA,KAAAa;AAAA,QACxE,OAAA;AAAA,MAAA,GAAA;AAAA,UAEUkwB,GAAK;AAAA,UACZ,MAAAvvB;AAAA,UACA,OAAAX;AAAA,UACA,WAAAP,EAAY;AAAA,UACZ,aAAUwD,EAAE;AAAA,UACZ,cAAUA,EAAA;AAAA,UAAA,cAAAA,EAAA;AAAA,UAEA,YAAOA,EAGT;AAAA,QAAA,GAAA;AAAA,mBADL1D,EAAA,MAAsD;AAAA,YAAAG,GAAAC,EAAA,QAAA,WAAA,EAAA,MAAAgB,EAAA,GAAA,MAAA;AAAA;eAG/C,EAAO;AAAA,UAAA,CAAA;AAAA;YAGPjB,GAAQC,EACjB,QAAsC,WAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,UAAA,CAAA;AAAA;YAE7BjB,GAAMC,EACyB,QAAA,QAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,UAAA,CAAA;AAAA;YAzBpDjB,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,UAAA,CAAA;AAAA;;SAAA,GAAA,GAAA;AAAA,IAAA,CAAA;AAAA;2BAiCM,CAAA,MAAAzB,KAAAC,EAAA,OAAAC,IAyBM;AAAA,KAAAF,EAzB0C,EAAK,GAAAC,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,aAAA,CAAAkB,GAAAX,OAAOd,EAAA,GAACC,EAA2B,OAAA;AAAA,MAAA,KAAAa;AAAA,MACtF,OAAA;AAAA,IAAA,GAAA;AAAA,QAEUkwB,GAAK;AAAA,QACZ,MAAAvvB;AAAA,QACA,OAAAX;AAAA,QACA,WAAAP,EAAY;AAAA,QACZ,aAAUwD,EAAE;AAAA,QACZ,cAAUA,EAAA;AAAA,QAAA,cAAAA,EAAA;AAAA,QAEA,YAAOA,EAGT;AAAA,MAAA,GAAA;AAAA,iBADL1D,EAAA,MAAsD;AAAA,UAAAG,GAAAC,EAAA,QAAA,WAAA,EAAA,MAAAgB,EAAA,GAAA,MAAA;AAAA;aAG/C,EAAO;AAAA,QAAA,CAAA;AAAA;UAGPjB,GAAQC,EACjB,QAAsC,WAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA;UAE7BjB,GAAMC,EACyB,QAAA,QAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA;UAvDpDjB,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAgB,EAAA,GAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA;;;;;uFCYMwvB,KAAQ1tB,GAAS;AAAA,EACrB,MAAM;AAAA,EACN,SAAS;AACX,CAAC,GACY2tB,KAAW,OAYf,EAAE,WAXS,MAAM;AACtB,EAAKD,GAAM,YACTA,GAAM,UAAU,KAElBA,GAAM,OAAO;AACf,GAMoB,YAJD,MAAM;AACvB,EAAAA,GAAM,OAAO;AACf,EAEoB,IAGtBE,KAAe;AAAA,EACb,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,KAAK;AAAA,MACH,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAMxwB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM,EAAE,YAAAsuB,EAAA,IAAeF,GAAA;AAOvB,WAAO;AAAA,MACL,OANY,MAAM;AAClB,QAAAE,EAAA,GACAtuB,EAAK,OAAO;AAAA,MACd;AAAA,MAIE,OAAAmuB;AAAA,IAAA;AAAA,EAEJ;AACF,GAtDgD/wB,KAAM;AAAA,EAAA,KAAA;AAAA;;AAApD,SAAA2K,GAAApK,GAAAuD,GAAAzD,GAAAwD,GAAA8pB,GAKMC,GALN;AACE,SAAA/pB,EAAA,MAAA,UAAAstB,IAAWrxB,KAAYC,EAAA,OAAAC,IAAA;AAAA,IAAA0D,EAAO,OAAA;AAAA,MAAA,OAAA;AAAA,MAC9B,SAAAI,EAAA,CAAA,MAEMA,EAAA,CAAA,IAAA,IAAAoI,MAAArI,EAAA,SAAAA,EAAA,MAAA,GAAAqI,CAAA;AAAA,IAAA,CAAA;AAAA,IALVxI,EAAA,OAAA;AAAA,MAAA,OAAA;AAAA,MAIM,OAAAwG,GAAa,EAAA,OAAA7J,EAAA,QAAA,KAAA,CAAA;AAAA,IAAA,GAAA;AAAA;;;IAJnB,CAAAiK,IAAAzG,EAAA,MAAA,IAAA;AAAA,EAAA,CAAA,IAAAoG,GAAA,IAAA,EAAA;;uFCwBAmnB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,YAAArgB;AAAA,EAAA;AAAA,EAEF,cAAc;AAAA,EACd,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,MAAM;AAAA,MAAC;AAAA,IAAA;AAAA,IAElB,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAMtQ,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM,EAAE,QAAAwC,MAAW9F,GAAK,QAClB+xB,IAAW;AAAA,MACf,OAAO;AAAA,MACP,OAAO;AAAA,IAAA,GAGHC,IAAQhsB,GAAS,MAAM;;AAC3B,YAAMisB,MAAkB7vB,IAAAjB,EAAM,KAAK,OAAO,UAAlB,gBAAAiB,EAAyB,eAAc,CAAA,GACzD,EAAE,OAAA4vB,GAAO,OAAAnf,GAAO,MAAAlR,EAAA,IAASswB,EAAgB9wB,EAAM,UAAU,KAAK,CAAA,GAC9DkwB,IAAOW,KAASnf;AAGtB,cAFsBqf,GAASb,CAAI,IAAIA,EAAKvrB,EAAO,KAAK,IAAIurB,MAEpC1vB,KAAQowB,EAASjsB,EAAO,KAAK,KAAKisB,EAAS;AAAA,IACrE,CAAC,GAEK9f,IAAajM,GAAS,MAAM;;AAChC,YAAMtC,IAAS,CAAC,KAAI+C,KAAA7C,KAAAxB,IAAAjB,EAAM,SAAN,gBAAAiB,EAAY,eAAZ,gBAAAwB,EAAyB,OAAzB,gBAAA6C,EAA6B,YAAW,EAAG,GACzDwrB,KAAkBtrB,IAAAxF,EAAM,KAAK,OAAO,UAAlB,gBAAAwF,EAAyB;AAEjD,aAAIjD,EAAO,UAAUuuB,KACnBvuB,EAAO,QAAQ,CAACzB,MAAS;AACvB,YAAIkwB,IAAaF;AACjB,QAAI9wB,EAAM,SAAS,WAAWA,EAAM,aAAa,OAC/CgxB,IAAaA,EAAWhxB,EAAM,UAAU;AAE1C,cAAMixB,IAAuBD,EAAWlwB,EAAK,QAAQ;AACrD,QAAAA,EAAK,OAAO,MAAM,aAChB,OAAOmwB,KAAyB,YAAYA,IAAuBA,KAAwB;AAAA,MAC/F,CAAC,GAEI1uB;AAAA,IACT,CAAC;AAMD,WAAO;AAAA,MACL,OAAAsuB;AAAA,MACA,YAAA/f;AAAA,MACA,eAPoB,CAACpK,GAAepF,MAAc;AAClD,QAAAa,EAAK,qBAAqB,EAAE,aAAauE,GAAU,eAAepF,GAAM;AAAA,MAC1E;AAAA,IAKE;AAAA,EAEJ;AACF;;YAtFElC,EAAA,aAcM;AAZJ,SAAAC,EAAA,GAAAC,EAWM,OAAAC,IAdV;AAAA,IAAA0D,EAAA,OAGID,IAAAE,GAWME,EAAA,KAAA,GAAA,CAAA;AAAA,KAAA/D,EAX0C,EAAA,GAAAC,EAAAiE,IAAA,MAAAC,GAAAJ,EAAA,YAAA,CAAA9B,GAAAukB,OAAOxmB,EAAA,GAACC,EAAkB,OAAA;AAAA,MAAA,KAAAumB;AAAA;;YAG3DjiB,GAAIqN,GAAA;AAAA,QACd,KAAA4U;AAAA,QACA,UAAAvkB;AAAA,QACA,mBAAAukB;AAAA,QAAA,oBAAA/lB,EAAA;AAAA,QATT,uBAWgD,CAAAwD,MAAAF,EAAA,cAAA9B,EAAA,UAAAgC,CAAA;AAAA,MAAA,GAAA;AAAA,iBACxC5D,EAAwC,MAAA;AAAA,UAAAG,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAwB,EAAA,GAAA,QAAA,EAAA;AAAA,UAZhDzB,GAAAC,EAAA,QAAA,UAAA,EAAA,MAAAwB,EAAA,GAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA;;;;;uFCiCA4vB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,eAAAC;AAAA,IACA,YAAY5mB;AAAA,IACZ,WAAWqjB,GAAA;AAAA,EAAU;AAAA,EAEvB,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,MAAM;AAAA,MAAC;AAAA,IAAA;AAAA,EAClB;AAAA,EAEF,OAAO,CAAC,QAAQ,SAAS,mBAAmB;AAAA,EAC5C,MAAM5tB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMivB,IAAaxuB,GAAS;AAAA,MAC1B,MAAM;AAAA,MACN,SAAS;AAAA,IAAA,CACV,GACKiuB,IAAQhsB,GAAS,MAAA;;AAAM,oBAAKpC,KAAAxB,IAAAjB,EAAM,KAAK,UAAX,gBAAAiB,EAAkB,SAAlB,gBAAAwB,EAAwB,UAASzC,EAAM,KAAK,YAAY,IAAI;AAAA,KAAE,GAG1FqxB,IAAQ,MAAM;AAClB,MAAAD,EAAW,OAAO,IAClBjvB,EAAK,OAAO;AAAA,IACd;AAsBA,WAAO;AAAA,MACL,OAAA0uB;AAAA,MACA,YAAAO;AAAA,MACA,MAdW,CAAC9uB,MAAe;AAC3B,QAAAH,EAAK,qBAAqBG,CAAK,GAE/B+uB,EAAA;AAAA,MACF;AAAA,MAWE,OAAAA;AAAA,MACA,MAxBW,MAAM;AACjB,QAAKD,EAAW,YACdA,EAAW,UAAU,KAGvBA,EAAW,OAAO;AAAA,MACpB;AAAA,MAmBE,eAXoB,CAAC,EAAE,aAAAE,GAAa,eAAAC,QAAoB;;AACxD,cAAMC,IAAmB,EAAE,IAAG/uB,KAAAxB,IAAAjB,EAAM,KAAK,WAAX,gBAAAiB,EAAmB,UAAnB,gBAAAwB,EAA0B,YAAY,CAAC6uB,CAAW,GAAGC,EAAA;AACnF,QAAApvB,EAAK,qBAAqBqvB,CAAgB;AAAA,MAC5C;AAAA,IAQE;AAAA,EAEJ;AACF,UAnFa,OAAM,kBAAA,GACHxuB,KAAA,EAAA,OAAM,gBAAA,GACNS,KAAA,EAAA,OAAM,uBAAA,UAKP,OAAM,cAAA,UAKS,OAAM,YAAA;;uDAhBlCrE,EAAA,iBAuBM;AAxBR,SAAAC,EAAA,GAE+BC,EAAW,OAAAC,IAAA;AAAA,IAAAC,EAF1CgM,KAEkC,SAAApI,EAAK,KAAA,GAAA;AAAA,MAAA,SAAA1D,EAAA,MAAA;AAAA,QAFvCmC,GAAAqB,GAAAE,EAAA,KAAA,GAAA,CAAA;AAAA,MAAA,CAAA;AAAA,MAGe,GAAA;AAAA,IAAA,GAAA,GAAA,CAAA,SAAA,CAAA;AAAA,MAHf,WAAA,UAAAstB,IAGwErxB,EAAA,GAAAC,EAAA,OAAA;AAAA,MAAE,KAAA;AAAA,MAAA,OAAA;AAAA,MACpE,SAAA+D,EAAA,CAAA,MAkBMA,EAlBN,CAAA,IAAAouB,GAkBM,IAAAhmB,MAAArI,EAAA,SAAAA,EAAA,MAAA,GAAAqI,CAAA,GAAA,CAAA,MAAA,CAAA;AAAA,IAAA,GAAA;AAAA,MAhBFxI,EAAA,OAA4CD,IAA5C;AAAA,QAAAC,EACA,OAEOQ,IAFP;AAAA,UAAAR,EAC8D,QAAAU,IAAAT,GAAAE,EAAA,KAAA,GAAA,CAAA;AAAA,UAAAH,EAA1C,QAAaoG,IAAA;AAAA,YAAA7J,EAAS4vB,GAAK;AAAA,cAAA,OAAA;AAAA;;UAGjD,CAAA;AAAA,QAAA,CAAA;AAAA,WAEItvB,EAAmF,QAAA,QAAA,CAAA,GAAA,MAAA;AAAA,UAAAmD,EAA3D,OAAIqG,IAAA;AAAA,YAAA9J,EAAGkyB,GAAmB;AAAA,cAAA,MAAA9xB,EAAA;AAAA;;UAGtD,CAAA;AAAA,QAAA,GAAA,EAAA;AAAA,QAEIC,GAAAC,EAA4C,QAAA,UAAA,CAAA,GAAA,MAA9B;AAAA,UAAA4wB,GAlB1BztB,EAkB0C,OAAA8G,IAAA;AAAA,YAAAvK,EAlB1CgM,GAkB0C,EAAA,SAAApI,EAAA,MAAA,GAAA;AAAA,cAAA,SAAA1D,EAAA,MAAA;AAAA,gBAlB1CmC,GAAA,IAAA;AAAA,cAAA,CAAA;AAAA,cAmBY,GAAA;AAAA,YAAA,GAAa,GAAI,CAAA,SAAO,CAAA;AAAA,YAAArC,EAASgM,GAAI;AAAA,cAAA,MAAA;AAAA,cAnBjD,SAAApI,EAAA;AAAA,YAAA,GAAA;AAAA;gBAAAvB,GAAA,IAAA;AAAA,cAAA,CAAA;AAAA;YAiB4B,GAAA,GAAA,CAAA,SAAA,CAAA;AAAA,UAAA,GAAA,GAAA,GAAA;AAAA;;;;;MAjB5B,CAAAgI,IAAAzG,EAAA,WAAA,IAAA;AAAA,IAAA,CAAA,IAAAoG,GAAA,IAAA,EAAA;AAAA;;uFCkBAmoB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,eAAAR;AAAA,IACA,aAAanvB;AAAA,IACb,YAAYuI;AAAA,EAAA;AAAA,EAEd,cAAc;AAAA,EACd,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,EACnB;AAAA,EAEF,MAAMvK,GAAO,EAAE,MAAAmC,KAAQ;AAOrB,WAAO,EAAE,OANK0C,GAAS,MAAA;;AAAM,oBAAKpC,KAAAxB,IAAAjB,EAAM,KAAK,UAAX,gBAAAiB,EAAkB,SAAlB,gBAAAwB,EAAwB,UAASzC,EAAM,KAAK,YAAY,IAAI;AAAA,KAAE,GAMhF,eALM,CAAC,EAAE,aAAAsxB,GAAa,eAAAC,QAAoB;;AACxD,YAAMC,IAAmB,EAAE,IAAG/uB,KAAAxB,IAAAjB,EAAM,KAAK,WAAX,gBAAAiB,EAAmB,UAAnB,gBAAAwB,EAA0B,YAAY,CAAC6uB,CAAW,GAAGC,EAAA;AACnF,MAAApvB,EAAK,qBAAqBqvB,CAAgB;AAAA,IAC5C,EAEgB;AAAA,EAClB;AACF;;4DAvCEpyB,EASe,cAAA;SATWC,EAAA,GAAeuE,GAAA+F,GAAA;AAAA,IAAC,OAAA;AAAA,IAAwB,SAAA;AAAA,IAAqB,WAAW;AAAA,IAAA,iBAAA;AAAA,IACrF,aAAS;AAAA,EAAA,GAAA;AAAA,eAEhBjK,EAAsC,MAAA;AAAA,MAAAG,GAJ9CC,EAAA,QAIgC,aAAA,CAAA,GAAA,MAAA;AAAA,QAAAN,EAJhCgM,GAAA,MAIwB;AAAA,UAAA,SAAA9L,EAAA,MAAA;AAAA,YAJxBmC,GAAAqB,GAAAE,EAAA,KAAA,GAAA,CAAA;AAAA,UAAA,CAAA;AAAA;;MAAA,CAAA;AAAA,IAAA,CAAA;AAAA,aAQM1D,EAAmF,MAAA;AAAA,MAAAG,GAA3DC,EAAA,QAAI,QAAA,CAAA,GAAA,MAAA;AAAA,QAAAN,EAAGkyB,GAAmB;AAAA,UAAA,MAAA9xB,EAAA;AAAA;;MARxD,CAAA;AAAA,IAAA,CAAA;AAAA;;;qDCQMgyB,KAA2B,MAC3BC,KAA0B9sB,GAAI6sB,EAAwB,GAE/CE,KAA6B,CAACC,MAA6B;AACtE,EAAAF,GAAwB,QAAQE,KAASH;AAC3C,GAEAI,KAAe;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,OAAO;AAAA,EAAA;AAAA,EAET,OAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,IAAA;AAAA,IAER,OAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAAA,IAEZ,UAAU;AAAA,MACR,MAAM;AAAA,IAAA;AAAA,IAER,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,YAAY;AAAA,MACV,MAAM;AAAA,IAAA;AAAA,IAER,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,UAAU,mBAAmB,kBAAkB,cAAc;AAAA,EACrE,MAAMhyB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM8vB,IAA0C;AAAA,MAC9C,QAAQ;AAAA,MACR,QAAQ;AAAA,IAAA,GAEJC,IAAYntB,GAAI,IAAI,GAEpBotB,IAAiB;AAAA,MACrB,YAAY;AAAA,MACZ,iBAAiB;AAAA,MACjB,eAAe;AAAA,MACf,kBAAkB;AAAA,MAClB,SAAS;AAAA,IAAA,GAGLC,IAAQ,MAAMH,EAAU,UAAUA,EAAU,OAAO,MAAA,GAEnDI,IAAY,MAAMJ,EAAU,QAE5BK,IAAY,MAAML,EAAU,QAE5BM,IAAoB,MAAOvyB,EAAM,aAAaiyB,EAAU,OAAO,sBAAsBA,EAAU,QAE/FO,IAAoB,MAAOxyB,EAAM,aAAaiyB,EAAU,OAAO,sBAAsBA,EAAU,QAE/FQ,IAAkB,MAAMR,EAAU,OAAO,OAAO,gBAAA,GAEhDS,IAAa,CAACC,MAAgB;AAClC,MAAAxwB,EAAK,mBAAmB8vB,EAAU,MAAM;AAExC,YAAM/a,IAAU;AAAA,QACd,GAAGib;AAAA,QACH,OAAOnyB,EAAM;AAAA,QACb,OAAO6xB,GAAwB;AAAA,QAC/B,UAAU7xB,EAAM;AAAA,QAChB,GAAGA,EAAM;AAAA,MAAA;AAGX,UAAIA,EAAM,YAAY;AACpB,QAAAiyB,EAAU,SAASU,EAAO,OAAO,iBAAiBT,EAAU,OAAOhb,CAAO;AAC1E,cAAM0b,IAAgBD,EAAO,OAAO,YAAY3yB,EAAM,UAAUA,EAAM,QAAQ,GACxE6yB,IAAgBF,EAAO,OAAO,YAAY3yB,EAAM,OAAOA,EAAM,QAAQ;AAE3E,QAAAiyB,EAAU,OAAO,SAAS;AAAA,UACxB,UAAUW;AAAA,UACV,UAAUC;AAAA,QAAA,CACX;AAAA,MACH;AACE,QAAAZ,EAAU,SAASU,EAAO,OAAO,OAAOT,EAAU,OAAOhb,CAAO;AAGlE,MAAA+a,EAAU,OAAO,WAAWa,GAAa,OAAO,UAAUA,GAAa,QAAQ,MAAM,MAAM;AAEzF,QAAA3wB,EAAK,cAAc;AAAA,MACrB,CAAC;AAED,YAAM4wB,IAAUR,EAAA;AAEhB,MAAAQ,EAAQ,wBAAwB,CAAC3oB,MAAe;AAC9C,cAAM9H,IAAQywB,EAAQ,SAAA;AAEtB,QAAI/yB,EAAM,UAAUsC,KAClBH,EAAK,UAAUG,GAAO8H,CAAK;AAAA,MAE/B,CAAC,GAEDjI,EAAK,kBAAkB8vB,EAAU,MAAM;AAAA,IACzC;AAEA,WAAAvjB,GAAU,MAAM;AACd,MAAI1O,EAAM,aACRA,EAAM,WAAW,CAAC,uBAAuB,GAAG,MAAM;AAChD,QAAAiyB,EAAU,SAAS,OAAO,QAC1B/mB,GAAS,MAAM;AACb,UAAAwnB,EAAW,OAAO,MAAM;AAAA,QAC1B,CAAC;AAAA,MACH,CAAC,KAEDT,EAAU,SAASa,IACnB5nB,GAAS,MAAM;AACb,QAAAwnB,EAAWT,EAAU,MAAM,GAC3BA,EAAU,OAAO,UAAU;AAAA,UACzB,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,cAAc;AAAA,UACd,oBAAoB;AAAA,UACpB,IAAIe,GAAgE;AAClE,kBAAMC,IAAeD,EAAO,SAAA,GACtBE,IAAWC,GAAaF,GAAcjzB,EAAM,QAAQ,QAAQ;AAElE,YAAIkzB,MAAaD,KACfD,EAAO,SAASE,CAAQ;AAAA,UAE5B;AAAA,QAAA,CACD;AAAA,MACH,CAAC;AAAA,IAEL,CAAC,GAED/iB,GAAgB,MAAM;AACpB,MAAI8hB,EAAU,UACZA,EAAU,OAAO,QAAA;AAAA,IAErB,CAAC,GAEDppB;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,CAACkX,MAAY;AACX,QAAI+a,EAAU,UACIM,EAAA,EAER,cAAcrb,CAAO;AAAA,MAEjC;AAAA,MACA;AAAA,QACE,MAAM;AAAA,MAAA;AAAA,IACR,GAGFrO;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,CAACkzB,MAAa;AACZ,YAAIjB,EAAU,QAAQ;AACpB,gBAAMe,IAAST,EAAA;AAEf,UAAIW,MAAaF,EAAO,cACtBA,EAAO,SAASE,CAAQ;AAAA,QAE5B;AAAA,MACF;AAAA,IAAA,GAGFrqB;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,CAACkzB,MAAa;AACZ,YAAIjB,EAAU,UAAUjyB,EAAM,YAAY;AACxC,gBAAMgzB,IAASR,EAAA;AAEf,UAAIU,MAAaF,EAAO,cACtBA,EAAO,SAASE,CAAQ;AAAA,QAE5B;AAAA,MACF;AAAA,IAAA,GAGFrqB;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,CAACozB,MAAW;AACV,YAAInB,EAAU,QAAQ;AACpB,gBAAMe,IAAST,EAAA;AACf,UAAAN,EAAU,OAAO,OAAO,iBAAiBe,EAAO,SAAA,GAAYI,CAAM;AAAA,QACpE;AAAA,MACF;AAAA,IAAA,GAGFvqB,GAAMgpB,IAAyB,CAACuB,MAAW;AACzC,MAAInB,EAAU,UACZA,EAAU,OAAO,OAAO,SAASmB,CAAM;AAAA,IAE3C,CAAC,GAEM;AAAA,MACL,WAAAf;AAAA,MACA,WAAAC;AAAA,MACA,mBAAAC;AAAA,MACA,mBAAAC;AAAA,MACA,YAAAE;AAAA,MACA,OAAAN;AAAA,MACA,WAAAF;AAAA,MACA,iBAAAO;AAAA,IAAA;AAAA,EAEJ;AACF;;;;qDCrIAY,KAAe;AAAA,EACb,YAAY;AAAA,IACV,WAAWC;AAAA,IACX,cAAcC;AAAA,IACd,YAAYhpB;AAAA,IACZ,eAAe+iB;AAAA,EAAA;AAAA,EAEjB,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IAAA;AAAA,IAEX,YAAY;AAAA,MACV,MAAM,CAAC,QAAQ,QAAQ,KAAK;AAAA,MAC5B,SAAS;AAAA,IAAA;AAAA,IAEX,mBAAmB;AAAA,MACjB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IAAA;AAAA,IAEX,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,UAAU;AAAA,IACV,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,OAAO;AAAA,MACL,MAAM;AAAA,IAAA;AAAA,IAER,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM;AAAA;AAAA,MAEJ,MAAM;AAAA,MACN,SAAS,OAAO,EAAE,OAAO,IAAI,MAAM,GAAA;AAAA,IAAG;AAAA,EACxC;AAAA,EAEF,OAAO,CAAC,QAAQ,QAAQ,OAAO;AAAA,EAC/B,MAAMttB,GAAO,EAAE,MAAAmC,KAAQ;;AACrB,UAAM,EAAE,QAAAwC,MAAW9F,GAAK,QAClB20B,IAAc5wB,GAAS;AAAA,MAC3B,MAAM;AAAA,MACN,SAAS;AAAA,MACT,UAAU;AAAA,MACV,gBAAgB;AAAA,MAChB,aAAY3B,IAAAjB,EAAM,SAAN,QAAAiB,EAAY,OAAO,MAAM;AAAA,IAAA,CACtC,GACKqB,IAAQyC,GAAI,EAAE,GACdiuB,IAASjuB,GAAS,IAAI,GAEtB0uB,IAAc5uB,GAAS,MAAA;;AAAM,eAAA5D,IAAAjB,EAAM,eAAN,gBAAAiB,EAAmB0D,EAAO,WAAU3E,EAAM;AAAA,KAAU,GAEjF0zB,IAAa7uB,GAAS,MAAA;;AAAM,eAAA5D,IAAAjB,EAAM,UAAN,gBAAAiB,EAAc0D,EAAO,WAAU3E,EAAM;AAAA,KAAK,GAEtE2zB,IAAkB9uB,GAAS,MAAA;;AAAM,eAAApC,KAAAxB,IAAAjB,EAAM,SAAN,gBAAAiB,EAAY,UAAZ,gBAAAwB,EAAoBkC,EAAO,aAAUW,IAAAtF,EAAM,SAAN,gBAAAsF,EAAY;AAAA,KAAK,GACvFsuB,IAAiB/uB,GAAS,MAAA;;AAAM,eAAApC,KAAAxB,IAAAjB,EAAM,SAAN,gBAAAiB,EAAY,SAAZ,gBAAAwB,EAAmBkC,EAAO,aAAUW,IAAAtF,EAAM,SAAN,gBAAAsF,EAAY;AAAA,KAAI,GAEpFuuB,IAAiB;AAEvB,IAAA5oB,GAAY,MAAM;AAChB,YAAM,EAAE,YAAA+lB,GAAY,UAAA8C,EAAA,IAAa9zB,GAC3B6C,IAAMixB,KAAW9C,KAAA,gBAAAA,EAAY,UAAS,KAAKA;AACjD,MAAA1uB,EAAM,QAAQ,OAAOO,KAAQ,WAAWA,IAAM,KAAK,UAAUA,GAAK,MAAM,CAAC;AAAA,IAC3E,CAAC;AAGD,UAAMwuB,IAAQ,MAAM;AAClB,MAAAmC,EAAY,OAAO,IACnBrxB,EAAK,OAAO;AAAA,IACd,GAGM4xB,IAAO,MAAM;AACjB,MAAKP,EAAY,YACfA,EAAY,UAAU,KAGxBA,EAAY,OAAO,IACnBrxB,EAAK,MAAM,GACX+I,GAAS,MAAM,OAAO,cAAc,IAAI,MAAM,QAAQ,CAAC,CAAC;AAAA,IAC1D,GAEM8oB,IAAe,CAACnzB,KAAU,CAAA4B,WAAAuwB,EAAO,UAAP,gBAAAvwB,EAAc,YAAY,kBAAe;AACvE,UAAIwxB;AACJ,UAAIj0B,EAAM,aAAa,UAAUa;AAC/B,YAAI;AACF,UAAAozB,IAAW,KAAK,MAAMpzB,CAAO,GAC7B2yB,EAAY,WAAW;AAAA,QACzB,SAASrrB,GAAY;AACnB,UAAAqrB,EAAY,WAAWrrB;AAAA,QACzB;AAEF,aAAO8rB;AAAA,IACT;AAgDA,WAAO;AAAA,MACL,MA3BW,MAAM;;AACjB,cAAM,EAAE,UAAA3tB,GAAU,UAAAwtB,GAAU,QAAAI,EAAA,IAAWl0B,GACjCa,IAAUsyB,IAAalyB,IAAA+xB,EAAO,UAAP,gBAAA/xB,EAAc,YAAY,YAAYqF,CAAQ;AAG3E,YAFAnE,EAAK,QAAQ,EAAE,SAAAtB,GAAS,GAEpB,CAACqzB,GAAQ;AACX,cAAI5xB,IAAQzB;AACZ,gBAAMszB,IAAO;AACb,cAAI;AACF,YAAIL,IACFxxB,IAAQA,MAAU,KAAK,KAAK,EAAE,MAAMwxB,GAAU,OAAAxxB,EAAAA,IACrCgE,MAAa,SACtBhE,IAAQ,IAAI6xB,EAAK,UAAUtzB,CAAO,EAAE,EAAA,IAEpCyB,IAAQ,OAAOtC,EAAM,cAAe,WAAWa,IAAU,KAAK,MAAMA,CAAO;AAAA,UAE/E,QAAgB;AAAA,UAEhB;AAEA,UAAAsB,EAAK,qBAAqBG,CAAK;AAAA,QACjC;AAEA,QAAA+uB,EAAA;AAAA,MACF;AAAA,MAIE,OAAAA;AAAA,MACA,MAAA0C;AAAA,MACA,YA3CiB,MAAM;;AACvB,YAAIK,KAAUnzB,IAAA+xB,EAAO,UAAP,gBAAA/xB,EAAc,YAAY;AACxC,YAAImzB;AACF,cAAI;AACF,YAAAA,IAAUjB,GAAaiB,GAAS,MAAM,IACtC3xB,IAAAuwB,EAAO,UAAP,QAAAvwB,EAAc,YAAY,SAAS2xB;AAAA,UACrC,QAAgB;AAAA,UAEhB;AAAA,MAEJ;AAAA,MAkCE,gBAnDqB,CAACC,MAA0E;AAChG,QAAAA,EAAe,wBAAwB,MAAM;AAC3C,gBAAMnB,IAAWmB,EAAe,SAAA;AAChC,UAAAL,EAAad,CAAQ;AAAA,QACvB,CAAC;AAAA,MACH;AAAA,MA+CE,aAAAO;AAAA,MACA,YAAAC;AAAA,MACA,iBAAAC;AAAA,MACA,gBAAAC;AAAA,MACA,QAAAZ;AAAA,MACA,aAAAQ;AAAA,MACA,OAAAlxB;AAAA,MACA,gBAAAuxB;AAAA,MACA,SAAS;AAAA,QACP,UAAU7zB,EAAM;AAAA,QAChB,SAAS;AAAA,UACP,SAAS;AAAA,QAAA;AAAA,MACX;AAAA,MAEF,QAAA2E;AAAA,IAAA;AAAA,EAEJ;AACF,GAxOWpF,KAAA,EAAA,OAAM,cAAA,0EA5BjBkE,KAAA,EAAA,OAAA,cAAA,GA6BoCE,KAAM;AAAA,EAAA,KAAA;AAAA;mBA7B1C2F,KAAA,EAAA,OAAA,kCAAA,GA4CyCS,KAAM;AAAA,EAAA,KAAA;AAAA;GA5C/CC,KAAA,EAAA,OAAA,kDAAA,GAqDiCsqB,KAAM;AAAA,EAAA,KAAA;AAAA;;;kGApDrCl1B,EAAA,iBAwEM;SAtESC,EAAA,GAAAC,EAAiB,OAAAC,IAAA;AAAA,IAAAM,GAAAC,EAAA,QAA5B,WAAA,EAAA,MAKMsD,EAAA,KAAA,GAAA,MAAA;AAAA,MAAAxD,EARZ,qBAAAP,KAAAC,EAAA,OAAA;AAAA,QAG8F,KAAA;AAAA,QAAA,OAAAoK,GAAA,CAAA,cAAA,EAAA,eAAAtG,EAAA,UAAA,GAAA,CAAA,CAAA;AAAA,QACtF,SAAAC,EAAA,CAAA,MAESA,EAFT,CAAA,IAAA,IAESoI,MAAArI,EAAA,QADPA,EAAK,KAAA,GAAUqI,CAAA;AAAA,MAAA,GAEjB;AAAA,QAAAxI,EAA2B,QAAAD,IAAAE,GAAAE,EAAA,UAAA,KAAAA,EAAA,cAAAA,EAAA,KAAA,GAAA,CAAA;AAAA,QAAA5D,EAAMsK,GAAS;AAAA,UAAA,OAAA;AAAA;;MAPlD,GAAA,CAAA,MAAAzK,KASgCuE,GAAU4H,GAAA;AAAA,QAAE,KAAA;AAAA,QAAA,OAAA;AAAA,QAT5C,SAAApI,EAAA;AAAA,MAAA,GAAA;AAAA,iBAaiB1D,EAAA,MAAW;AAAA,UAAAG,GAAAC,EAAA,QAFpB,QAIY,CAAA,GAAA,QAAA,EAAA;AAAA,UAAA,CAAAF,EAfpB,uEAYegE,GAAakG,GAAA;AAAA,YAElB,KAAK;AAAA,YAAA,MAAA;AAAA,YAdf,OAAA;AAAA,UAAA,CAAA,KAAAN,GAAA,IAAA,EAAA;AAAA,UAAA3H,GAAA,MAAAqB,GAAAE,EAAA,WAAA,GAAA,CAAA;AAAA,QAAA,CAAA;AAAA;SAoBI,GAAA,CAoDkB,SAAA,CAAA;AAAA,IAAA,GAnDR,EAAA;AAAA,IAAA5D,EArBd8vB,GAAA;AAAA,MAsBO,SAAOlsB,EAAA,YAAU;AAAA,MAClB,oBAAYC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,YAAA,OAAAE;AAAA,MACZ,OAAMF,EAAA;AAAA,MACN,OAAA;AAAA,MACC,OAAA;AAAA,MAAA,kBAAA;AAAA,MA6BU,wBAeH;AAAA,IAAA,GAAA;AAAA,cAZI1D,EAAA,MAAQ;AAAA,QAAAuD,EAAA,OADhBsxB,IAQc;AAAA,UAAA30B,EAjExB,+CA2DkBgE,GAAY4H,GAAA;AAAA,YAClB,KAAK;AAAA,YACL,OAAK;AAAA,YACJ,OAAK;AAAA,YAAA,MAAA;AAAA,YA9DlB,SAAApI,EAAA;AAAA,UAAA,GAAA;AAAA;cAAAvB,GAAAqB,GAAApD,EAAA,GAAA,eAAA,CAAA,GAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAAA,GAAA;AAAA,UAAA,GAkEU,GAAA,CAAA,SAGM,MAFJ0J,GAAmE,IAAA,EAAA;AAAA,UAAAvG,EAnE/E,OAmEiE,MAAA;AAAA,YAAAzD,EAnEjEgM,KAmE2CgpB,SAAEpxB,EAAA,MAAA,GAAA;AAAA,cAAA,SAAA1D,EAAA,MAAA;AAAA,gBAnE7CmC,GAAAqB,GAAApD,EAAA,GAAA,eAAA,CAAA,GAAA,CAAA;AAAA,cAAA,CAAA;AAAA,cAoEY,GAAA;AAAA,YAAA,GAAa,GAAI,UAAC,CAAS;AAAA,YAAAN,EAASgM,GAAI;AAAA,cAAA,MAAA;AAAA,cApEpD,SAAApI,EAAA;AAAA,YAAA,GAAA;AAAA;gBAAAvB,GAAAqB,GAAApD,EAAA,GAAA,aAAA,CAAA,GAAA,CAAA;AAAA,cAAA,CAAA;AAAA;;;QAAA,CAAA;AAAA,MAAA,CAAA;AAAA,MA6BmB,SAAAJ,EAAA,MAAA;AAAA,QAAAuD,EAAA,OAAXQ,IAAA;AAAA,UAAAL,EACE,wBAAY9D,EAAmB,OAAAqE,IAAA;AAAA,YAAAV,EAAS,QAAA;AAAA,cAAA,OAAA;AAAA;YA9BlD,GAAAC,GAAAE,EAAA,eAAA,GAAA,GAAAiG,EAAA;AAAA,UAAA,MAiCUG,GAkBa,IAAA,EAAA;AAAA,UAAAvG,EAlBQ,OAAAqG,IAAY;AAAA,YAAA9J,EAjC3Ci1B,GAAA;AAAA,cAAA,YAAArxB,EAAA,YAAA;AAAA,cAkCuB,uBAOQC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,YAAA,aAAAE;AAAA,YAAA,GAAA;AAAA,cALf,MAAA5D,EAAI,MAAQ;AAAA,gBAAAF,EACNk1B,GAAqB;AAAA,kBAC1B,KAAK;AAAA,kBACL,OAAO;AAAA,kBACP,OAAAtxB,EAAA;AAAA,kBAAA,SAAAA,EAAA;AAAA;gBAGM,GAAK,MAAA,GAAA,CAAA,SAMR,WAAA,kBAAA,CAAA;AAAA,cAAA,CAAA;AAAA,cALN,OAAA1D,EAAA,MAAA;AAAA,gBAAA0D,EACE,uBACE9D,EAA2C,OAAAyK,IAAA;AAAA,kBAAA9G,EAC3C,OAA4C+G,IAAA;AAAA,oBAAA/G,EAAvC,QAAiC,WAAxB,GAAA,oBAAc,CAAA,GAAA,CAAA;AAAA,oBAAAA,EAAA,OAAA,MAAA;AAAA;;kBA/C9C,CAAA;AAAA,gBAAA,CAAA,KAAAuG,GAAA,IAAA,EAAA;AAAA,cAAA,CAAA;AAAA;eAqDmB,GAAA,CAAA,YAAY,CAAA;AAAA,UAAA,CAAA;AAAA,UArD/B5J,EAAA,gBAAAP,EAAA,GAAAC,EAAA,OAAAg1B,IAAApxB,GAAAE,EAAA,YAAA,QAAA,GAAA,CAAA,KAAAoG,GAAA,IAAA,EAAA;AAAA,QAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCyBMmrB,KAAa;AAAA,EACjB,kBAAkB;AAAA,IAChB,MAAM;AAAA,IACN,SAAS;AAAA,IACT,OAAO;AAAA,EAAA;AAEX,GAEAC,KAAe;AAAA,EACb,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAASD,GAAW,iBAAiB;AAAA,IAAA;AAAA,IAEvC,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAM30B,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM0yB,IAAkB9vB,GAAI,EAAI,GAE1B+vB,IAAclyB,GAAS;AAAA,MAC3B,SAAS;AAAA,MACT,SAAS5C,EAAM,SAAS20B,GAAW,iBAAiB;AAAA,MACpD,OAAO30B,EAAM,SAAS20B,GAAW,iBAAiB;AAAA,IAAA,CACnD,GAEKI,IAAmB,MAAM;AAC7B,MAAAF,EAAgB,QAAQ,IACxB1yB,EAAK,OAAO;AAAA,IACd;AAEA,WAAA8I,GAAY,MAAM;AAChB,MAAA6pB,EAAY,UAAU90B,EAAM,SAAS20B,GAAW,iBAAiB,SACjEG,EAAY,QAAQ90B,EAAM,SAAS20B,GAAW,iBAAiB,OAC/DE,EAAgB,QAAQ70B,EAAM;AAAA,IAChC,CAAC,GAEM;AAAA,MACL,iBAAA60B;AAAA,MACA,aAAAC;AAAA,MACA,kBAAAC;AAAA,IAAA;AAAA,EAEJ;AACF,GAlFAx1B,KAAA,EAAA,OAAA,UAAA;SACsC2K,GADtCpK,GAAAuD,GACyCzD,MAAWstB,GAAYC,GAAA;;IAC5D,OAAAzjB,GAIM,GAJN,aAIM,EAAA,QAAA9J,EAAA,QAAA,CAAA;AAAA,EAAA,GAAA;AAAA,MANV,OAAAL,IAIW;AAAA,MAAAM,GAAAC,EAAA,QAAA,WAAA,CAAA,GAAA,MAAA;AAAA;MAGP,GAAA,EAAA;AAAA,IAAA,CAAA;AAAA,IAIWmD,EAAA,OAAAD,IAAA;AAAA,MAAAC,EADL,OAAqF,MAAA;AAAA,QAAApD,GAA3EC,UAAO,eAAI,CAAA,GAAA,MAAA;AAAA,UAAAmD,EAAiB,KAAA;AAAA,YAAC,MAAKrD,EAAC,OAAA;AAAA,YAAA,QAAA;AAAA;;QAGjD,GAAA,EAAA;AAAA,MAAA,CAAA;AAAA,QAEI,OAA6E,MAAA;AAAA,QAAAC,GAAlEC,EAAA,QAAa,gBAAA,CAAA,GAAA,MAAA;AAAA,UAAAmD,EAAO,OAAA;AAAA,YAAA,OAAA;AAAA;;;;;;;;;uFCSzC+xB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,iBAAAC;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,KAAK;AAAA,MACH,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,QAAQ;AACN,WAAO;AAAA,MACL,qBAAqB,OAAO;AAAA,IAAA;AAAA,EAEhC;AACF,kBA/CAjyB,KAAA,CAAA,OAAA,KAAA,GAaeS,KAAM;AAAA,EAAc,KAAA;AAAA,EAAA,OAAA;AAAA;;;YAKdrE,EAAA,kBAjBI;AAEnB,SAAAC,EAAA,GAAAuE,GAAsBsxB,GAAd,EAAK,OAAA,iBAAA;AAAA,IAAA,SACbx1B,EAAA,MAEM;AAAA,MAAAuD,EAD6B,OAAA,MAAAC,GAAAtD,EAAA,KAAA,GAAA,CAAA;AAAA,MAAAqD,EALzC,OAK2B,MAAO;AAAA,QAAApD,GAAAC,EAAA,QAAA,SAAA,CAAA,GAAA,MAAA;AAAA;QAEZ,GAAA,EAAA;AAAA,MAAA,CAAA;AAAA,MAPtBsD,EAAA,uBAAA/D,KAQkBC,EAAG,KAAA;AAAA,QAAE,KAAA;AAAA,QAAA,MAAAM,EAAA;AAAA,QACb,QAAA;AAAA,MAAA,GAAA;AAAA,QAAoCqD,EAAA,OAAA;AAAA,UAAG,OAAK;AAAA,UAAA,KAAArD,EATtD;AAAA,UAAA,KAAAA,EAAA;AAAA,QAAA,GAAA,MAAA,GAAAoD,EAaQ;AAAA,MAAA,GACE,gBAAc1D,EAAG,SAAAmE,IAAA;AAAA,QAAAR,EAAkB,UAAA;AAAA,UAAA,KAAArD,EAd7C;AAAA,UAAA,MAAA;AAAA;MAAA,CAAA;AAAA,IAAA,CAAA;AAAA;;;uFCUAu1B,KAAe;AAAA,EACb,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAMn1B,GAAO;AAGX,WAAO;AAAA,MACL,YAHiB6E,GAAS,MAAM7E,EAAM,KAAK,cAAc,QAAQ,MAAM,MAAM,CAAC;AAAA,IAG9E;AAAA,EAEJ;AACF;;AA3BE,QAAA8J,IAAA1K,EAGO,UAHP;AACE,SAAAC,EAAA,GAAAC,EAFJ,QAAAC,IAEoB;AAAA,IAAA6D,EAAA,cAAA/D,EAAA,uCACQuE,GAAIkG,GAAA;AAAA,MAAG,KAAK;AAAA,MAAA,MAAAlK,EAAA;AAAA;;;;qDCqDlC,EAAA,YAAEw1B,OAAehpB,IAEvBipB,KAAe;AAAA,EACb,YAAY;AAAA,IACV,cAAc9B;AAAA,IACd,YAAA+B;AAAA,IACA,aAAavzB;AAAA,EAAA;AAAA,EAEf,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,mBAAmB;AAAA,MACjB,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,kBAAkB,UAAU,oBAAoB,cAAc;AAAA,EACtE,MAAM/B,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM6wB,IAASjuB,GAAS,IAAI,GACtBwwB,IAAaxwB,GAAI,EAAK,GACtBywB,IAAgB3wB,GAAS,OACtB;AAAA,MACL,UAAU;AAAA,MACV,aAAa;AAAA,MACb,SAAS;AAAA,QACP,SAAS;AAAA,MAAA;AAAA,MAEX,GAAG7E,EAAM;AAAA,IAAA,EAEZ,GAEKy1B,IAAiB,MAAA;;AAAM,cAAAhzB,KAAAxB,IAAA+xB,EAAO,UAAP,gBAAA/xB,EAAc,gBAAd,gBAAAwB,EAA2B;AAAA,OAElD6vB,IAAY,MAAMU,EAAO,MAAM,UAAA,GAE/B0C,IAAW,MAAM;AACrB,UAAIpzB,IAAQgwB,EAAA,EAAY,SAAA;AACxB,YAAM6B,IAAO;AACb,UAAI;AAEF,YADA7xB,IAAQ,IAAI6xB,EAAK,UAAU7xB,CAAK,EAAE,EAAA,GAC9BA,aAAiB;AACnB,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,OAAOgwB,EAAA,EAAY,SAAA;AAAA,UAAS;AAAA,MAGlC,QAAgB;AAAA,MAEhB;AAEA,aAAOhwB;AAAA,IACT,GAEMqzB,IAAa,MAAM;AACvB,YAAMrzB,IAAQozB,EAAA;AACd,MAAApD,EAAA,EAAY,SAAS,OAAOhwB,KAAU,WAAWA,EAAM,KAAA,IAAS,KAAK,UAAUA,GAAO,MAAM,CAAC,CAAC;AAAA,IAChG;AAEA,WAAAszB,GAAY,MAAM;AAChB,MAAA5C,EAAO,MAAM,WAAWA,EAAO,MAAM,WAAW;AAAA,IAClD,CAAC,GAED6C,GAAc,MAAM;AAClB,MAAA7C,EAAO,MAAM,UAAA,EAAY,QAAA;AAAA,IAC3B,CAAC,GAOM;AAAA,MACL,eAAAwC;AAAA,MACA,QAAAxC;AAAA,MACA,WAAAV;AAAA,MACA,gBAAAmD;AAAA,MACA,YAAAF;AAAA,MACA,kBAXuB,CAACjzB,MAAmB;AAC3C,QAAAizB,EAAW,QAAQjzB,GACnBH,EAAK,oBAAoBG,CAAK;AAAA,MAChC;AAAA,MASE,UAAAozB;AAAA,MACA,YAAAC;AAAA,MAAA,YACAP;AAAAA,IAAA;AAAA,EAEJ;AACF,GAhJa71B,KAAA,EAAA,OAAM,2BAAA,GALnByD,KAAA,EAAA,OAAA,UAAA;;yDACE5D,EA8CM,iBAAA,EAAA;;WA7CQsK,GAAU,CAAA,oBAAA,EAAA,yBAAAtG,EAAA,YAAA,CAAA;AAAA,EAAA,GAAA;AAAA,IAF1BA,EAAA,aAGIvD,GAAAC,EA0CM,QA1CN,kBA0CM,EAAA,KAAA,EAAA,GAAA,QAAA,EAAA,IAzCJ0J,GA8BM,IAAA,EA9BN;AAAA,IAAAvG,EACE,OAEM1D,IAFN;AAAA,MAAA0D,EACmC,OAAAD,IAAA;AAAA,QAAAC,EAAA,OAAAQ,IAAA;AAAA,UAEnC5D,GAAAC,EAAA,QAyBM,gBAAA,CAAA,GAAA,QAAA,EAAA;AAAA,QAAA,CAAA;AAAA,QAzB8EmD,EAAA,OAAA;AAAA,UAAA,OAAAyG,GAAA,CAAA,WAAA,EAAA,yBAAAtG,EAAA,WAAA,CAAA,CAAA;AAAA,UAClF,IAAA;AAAA,QAAA,GAEQ;AAAA,UAAAvD,GAAAC,EAAA,QADR,WAQe,CAAA,GAAA,QAAA,EAAA;AAAA,UAAAF,EAlBzB,uDAYoBgE,GAAK2F,GAAA;AAAA,YACb,KAAA;AAAA,YACC,SAAA;AAAA,YACD,WAAO;AAAA,YAAA,cAAAnG,EAAA,WAAA;AAAA,YAfnB,QAAA;AAAA,UAAA,GAAA;AAAA,qBAiB6B1D,EAAO,MAAA;AAAA,cAAAF,EAASs2B,GAAU;AAAA,gBAAA,MAAA;AAAA;cAjBvD,GAAA,MAAA,GAAA,CAAA,SAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAAA,GAAA;AAAA,UAAA,GAmBsB,GAAA,CAAA,YAAA,CAAA,KAAAtsB,GAAZ,IAAA,EAAA;AAAA,UAAA5J,EAEW,qBAAAP,EAAA,GAAAC,EAOM,QAAAqE,IAAA;AAAA,YAAAP,EA5B3B,cAAA/D,EAAA,GA6ByCuE,GAAM2F,GAAA;AAAA,cAAC,KAAA;AAAA,cAAe,SAAS;AAAA,cAAQ,QAAA;AAAA,cAAA,WAAA;AAAA,cA7BhF,cAAAnG,EA8BoG,WAAA;AAAA,YAAA,GAAA;AAAA,uBAArE1D,EAAC,MAAA;AAAA,gBAAAF,EAA2Bs2B,GAAA;AAAA,kBAAA,MAAA;AAAA;gBA9B3D,CAAA;AAAA,cAAA,CAAA;AAAA;YAAA,GAAA,GAAA,CAAA,YAAA,CAAA,WAsBqBlyB,GAAO2F,GAAA;AAAA,cACd,KAAA;AAAA,cACA,QAAA;AAAA,cACC,SAAA;AAAA,cAAA,WAAA;AAAA,cAzBf,cAAAnG,EA2B4F,WAAA;AAAA,YAAA,GAAA;AAAA,cAA7D,SAAA1D,EAAC,MAAa;AAAA,gBAAAF,EAAOs2B,GAAA;AAAA,kBAAA,MAAA;AAAA;gBA3BpD,CAAA;AAAA,cAAA,CAAA;AAAA;YAAA,GAAA,GAAA,CAAA,YAAA,CAAA;AAAA,UAAA,CAAA,KAAAtsB,GAAA,IAAA,EAAA;AAAA,QAmCM,GAAA,CAAA;AAAA,MAAA,CAAA;AAAA,QAEQkrB,GAAQ;AAAA,QACb,KAAK;AAAA,QACL,OAAO;AAAA,QACR,OAAA90B,EAAS;AAAA,QACR,SAAAwD,EAAc;AAAA,QACd,UAAA;AAAA,QACA,kBAAMC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAEwI,EAAK,MAAA,kBAAiBxI,CAAA;AAAA,QAAA,gBAAAD,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAxD,EAAA,MAAA,gBAAAwD,CAAA;AAAA;SAGvB,MAAA,GAAA,CAAA,SAAU,SAAA,CAAA;AAAA,IAAA,CAAA;AAAA,IA9C1BF,EAAA,aAAAvD,GAAAC,EAAA,QAAA,oBAAA,EAAA,KAAA,EAAA,GAAA,QAAA,EAAA,IAAA0J,GAAA,IAAA,EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qECsCAusB,KAAe;AAAA,EACbC,YAAY;AAAA,IACVC,aAAAA;AAAAA;EAEFj2B,OAAO;AAAA,IACLsB,MAAM;AAAA,MACJd,MAAMN;AAAAA,MACNQ,SAASA,OAAO,CAAA;AAAA,IAClB;AAAA;EAEFw1B,MAAMl2B,GAAO;;AACX,UAAM;AAAA,MAAEsuB,SAAAA;AAAAA,QAAYiC,GAAQ,GACtB;AAAA,MAAE4F,WAAAA;AAAAA,MAAWC,WAAAA;AAAAA,MAAWxvB,WAAAA;AAAAA,QAAcQ,GAAS,GAC/C;AAAA,MAAEivB,kBAAAA;AAAAA,MAAkBC,oBAAAA;AAAAA,MAAoBC,iBAAAA;AAAAA,MAAiBC,mBAAAA;AAAAA,QAAsBC,GAAQ,GACvF;AAAA,MAAEC,aAAAA;AAAAA,MAAaC,cAAAA;AAAAA,QAAiBpvB,GAAS,GACzC;AAAA,MAAEF,QAAAA;AAAAA,IAAO,KAAIT,KAAAA,gBAAAA,QAAiB,CAAA,GAE9BjE,IAAQC,GAAS;AAAA,MACrBg0B,iBAAiB;AAAA,IACnB,CAAC,GAEK9lB,MAAazJ,KAAAA,IAAAA,KAAAA,gBAAAA,EAAQyJ,eAARzJ,gBAAAA,EAAqB,OAArBA,gBAAAA,EAAyBxG,YAAW,CAAA,GACjDoF,IAAWpB,GAAS,MAAMvE,EAAQN,EAAMsB,KAAKu1B,MAAO;AAgF1D,WAAO;AAAA,MACLl0B,OAAAA;AAAAA,MACAsD,UAAAA;AAAAA,MACA6wB,QAlBcpwB,CAAAA,MAAa;AAC3B4nB,QAAAA,EAAQ;AAAA,UACNuC,OAAO;AAAA,UACPnpB,SAAS;AAAA,UACTqvB,MAAMA,MAAM;;AAGV,cAFoBZ,IAAAA,KAAAA,gBAAAA,EAAWa,kBAAXb,gBAAAA,EAA0B1R,QAG5C6R,EAAmB;AAAA,cAAEW,mBAAmBvwB;AAAAA,YAAS,CAAC,GAClDc,GAAU,EAAG0vB,WAAU;AAAA,UAE3B;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MAMEC,aAlFmBzwB,CAAAA,MAAa;AAChC/D,QAAAA,EAAMi0B,kBAAkB,IAExBtI,EAAQ;AAAA,UACNuC,OAAO;AAAA,UACPnpB,SAAS;AAAA,YACP/G,SAAS;AACP,qBAAAnB,EAAA,OAAA,MAAA,CAAAA,EAAA43B,IAAA;AAAA,gBAAA,aAAA;AAAA,gBAAA,YAE8Cz0B,EAAMi0B;AAAAA,gBAAe,uBAAAtzB,CAAAA,MAArBX,EAAMi0B,kBAAetzB;AAAAA,cAAA,GAAA,IAAA,CAAA,CAAA;AAAA,YAGrE;AAAA;UAEFyzB,OAAO;;AACL,kBAAM;AAAA,cACJ1vB,QAAQ;AAAA,gBAAEod,IAAAA;AAAAA,gBAAI4S,eAAAA;AAAAA,cAAc;AAAA,kBAC1BjB,KAAAA,IAAAA,EAAU9zB,UAAV8zB,gBAAAA,EAAiBkB,eAAjBlB,gBAAAA,EAAAA,KAAAA,OAAmC,CAAA,GACjCmB,IAAcpf,GAAO,IAAM,CAAA,GAAIzR,GAAU;AAAA,cAC7CA,UAAU/D,EAAMi0B,mBAAmB,GAAGlwB,EAASA,QAAQ,GAAG+d,CAAE;AAAA,cAC5DoS,QAAQ;AAAA,gBACNpS,IAAAA;AAAAA,gBACA4S,eAAAA;AAAAA,gBACA3wB,UAAUA,EAASA;AAAAA,cACrB;AAAA,YACF,CAAC;AAED2vB,YAAAA,EAAiBkB,GAAahB,GAAiB,GAC/C/uB,GAAU,EAAG0vB,WAAU;AAAA,UACzB;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MAoDEM,cAlDoB9wB,CAAAA,MAAa;;AACjC,cAAM;AAAA,UACJW,QAAQ;AAAA,YAAEod,IAAAA;AAAAA,YAAI4S,eAAAA;AAAAA,UAAc;AAAA,cAC1BjB,KAAAA,IAAAA,EAAU9zB,UAAV8zB,gBAAAA,EAAiBkB,eAAjBlB,gBAAAA,EAAAA,KAAAA,OAAmC,CAAA;AAGvC,SAAIp2B,IAAAA,EAAMsB,SAANtB,QAAAA,EAAY62B,UACdP,EAAmB;AAAA,UAAEW,mBAAmBj3B,EAAMsB;AAAAA,QAAK,CAAC,GAGtDoF,EAASmwB,SAAS;AAAA,UAChBpS,IAAAA;AAAAA,UACA4S,eAAAA;AAAAA,UACA3wB,UAAU1G,EAAMsB,KAAKoF;AAAAA;AAGvB,cAAMmwB,IAAS72B,EAAMsB,KAAKu1B,UAAU,CAAA;AACpC32B,eAAOu3B,OAAOZ,GAAQ;AAAA,UAAE,GAAGnwB,EAASmwB;AAAAA,UAAQa,eAAehxB,EAASA;AAAAA,QAAS,CAAC,GAC9ExG,OAAOu3B,OAAOz3B,EAAMsB,MAAM;AAAA,UAAEu1B,QAAAA;AAAAA,QAAO,CAAC,GAEpCL,EAAkB9vB,GAAU1G,EAAMsB,IAAI,GACtCkG,GAAU,EAAG0vB,WAAU;AAAA,MACzB;AAAA,MA6BEpmB,YAAAA;AAAAA,MACA6mB,kBA5BuBA,MAAM;AAC7BhB,QAAAA,EAAaD,EAAYkB,WAAW,EAAEC,KAAMC,CAAAA,MAAQ;AAClDA,UAAAA,EAAIC,iBAAiB;AAAA,YAAEj3B,MAAMy1B,EAAe;AAAA,UAAG,CAAC;AAAA,QAClD,CAAC;AAAA,MACH;AAAA;EA0BF;AACF,GA/IczH,KAAA,CAAAzZ,UAAM,iBAAoB,GAAAA,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z,IAKhC9V,KAAA,EAAA,OAAM,sBAAc,GAIpByD,KAAA,EAAA,OAAA,qBAAA,GAIAS,KAAA,EAAA,OAAA,eAAA,GApBRE,KAAAmrB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAA,QAAA,MAAA,YAAA,EAAA,CAAA;;+BACE7D,EA4Be,cAAA;AA5BwB,SAAAC,EAAa,GAAAuE,GAAA+F,GAAsC;AAAA,IAAE,OAAA;AAAA;IAC/E;;IAEP,WAAAjK,EAAA;QAC8C,OAAA,MAAA;AAAA;UAE9CF,EAAAsK,GAAA,EAEO,MAAA,kBAAA,CAAA;AAAA;;;;MATf,CAAA;AAAA,IAYI,CAAA;AAAA,aACYpK,EAAA,MAAQ;AAAA,cAAlB+D,IAAA;AAAA,UAbN,YAa0BpE,EAAM,GAAAC,EAAW,MAAA;AAAA,UAAE,KAAA;AAAA,iBAAyB;AAAA,qBAChE,CAAA,MAAA+D,EAAA,CAAA,IAGK,CAAAC,MAAAF,EAAA,OAAAxD,EAAA,IAAA;AAAA,WAjBX,MAAA,MAciBP,EAAM,GAAAC,EAAW,MAAA;AAAA,UAAE,KAAA;AAAA;UAC5B,SAAA+D,EAAwC,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAzBF,EAAA,YAAaxD,EAAA,IAAA;AAAA,WAC5B;AAAA;UAEF+D;AAAAA,QAAI,CAAA;AAAA,QAAmBV;;UACrB,SAAAI,EAAoC,CAAA,MAAAA,EAAA,CAAA,IAAA,IAA1BoI,MAAKrI,EAAS,oBAAAA,EAAA,iBAAA,GAAAqI,CAAA;AAAA,WACxB;AAAA;UAEFpC;AAAAA;WAAqC,EAAK,GAAA/J,EAAQiE,IAAA,MAAAC,GAAAJ,EAAA,YAAA,CAAAtC,MAAA;;AAAE,mBAAM,GAAAxB,EAAoB,MAAA;AAAA;YAC5E,OAAA;AAAA,UACY,GAAA;AAAA,cAAZ,QAAA,MAAA4D,GAEOpC,EAAA,QAAA,GAAA,CAAA;AAAA,cA1Bf,eAAA2B,KAAAxB,IAAArB,EAAA,SAAA,gBAAAqB,EAAA,WAAA,gBAAAwB,EAAA,kBAwBmEpD,EAAM,GAAAC,EAAW,QAAA;AAAA,cAAE,KAAA;AAAA,cAA2B,OAEzG;AAAA,cA1BR,SAAA,CAAAgE,MAAAF,EAAA,aAAAtC,CAAA;AAAA;;;OAAA;AAAA;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAYqB,QAAQ,IAAI,aAAa,gBAAgB,OAAO,OAAO,CAAA,CAAE;AACzD,QAAQ,IAAI,aAAa,gBAAgB,OAAO,OAAO,CAAA,CAAE;AA0C9E,MAAMk3B,KAAsB,CAAClkB,MAAO;AAClC,QAAMiV,IAAwB,uBAAO,OAAO,IAAI;AAChD,SAAO,CAACtD,MACMsD,EAAMtD,CAAG,MACNsD,EAAMtD,CAAG,IAAI3R,EAAG2R,CAAG;AAEtC,GASMwS,KAAaD,GAAoB,CAACvS,MAC/BA,EAAI,OAAO,CAAC,EAAE,YAAW,IAAKA,EAAI,MAAM,CAAC,CACjD,GC9CDyS,KAAe;AAAA,EACblC,YAAY;AAAA,IACVC,aAAAA;AAAAA;EAEFj2B,OAAO;AAAA,IACLsB,MAAM;AAAA,MACJd,MAAMN;AAAAA,MACNQ,SAASA,OAAO,CAAA;AAAA,IAClB;AAAA;EAEFw1B,MAAMl2B,GAAO;;AACX,UAAM;AAAA,MAAEsuB,SAAAA;AAAAA,QAAYiC,GAAQ,GACtB;AAAA,MAAE4F,WAAAA;AAAAA,QAAc/uB,GAAS,GACzB;AAAA,MAAE+wB,eAAAA;AAAAA,MAAeC,iBAAAA;AAAAA,MAAiB7B,iBAAAA;AAAAA,MAAiB8B,iBAAAA;AAAAA,QAAoB5B,GAAQ,GAC/E;AAAA,MAAEC,aAAAA;AAAAA,MAAaC,cAAAA;AAAAA,QAAiBpvB,GAAS,GAEzC;AAAA,MAAEF,QAAAA;AAAAA,UAAWD,KAAAA,IAAAA,GAAS,MAATA,gBAAAA,EAAaR,cAAbQ,gBAAAA,EAAAA,KAAAA,OAA8B,CAAA,GAC3CJ,KAASK,KAAAA,gBAAAA,EAAQL,WAAU,CAAA,GAC3BsxB,IAAap4B,OAAOq4B,QAAQvxB,CAAM,EAAE3F,IAAI,CAAC,CAACoR,GAAKnQ,CAAK,OACjD;AAAA,MACLkS,MAAM/B;AAAAA,MACN,GAAGnQ;AAAAA,MAEN;AA0HD,WAAO;AAAA,MACL2D,UA1HepB,GAAS,MAAMvE,EAAQN,EAAMsB,KAAKu1B,MAAO;AAAA,MA2HxDC,QAhBc0B,CAAAA,MAAoB;AAClClK,QAAAA,EAAQ;AAAA,UACNuC,OAAO;AAAA,UACPnpB,SAAS;AAAA,UACTqvB,MAAMA,MAAM;;AAGV,cAFoBZ,IAAAA,KAAAA,gBAAAA,EAAWa,kBAAXb,gBAAAA,EAA0B1R,OAG5C2T,EAAgBI,CAAe;AAAA,UAEnC;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MAKEC,UA1HgBn3B,CAAAA,MAAS;AACzB,cAAMkQ,IAAW5O,GAAS;AAAA,UACxB4R,MAAM;AAAA,QACR,CAAC,GACKpB,IAAU,oBACVlP,IAAQ;AAAA,UACZsQ,MAAM,CAAC;AAAA,YAAEpB,SAAAA;AAAAA,YAAS1L,SAAS;AAAA,WAAmB;AAAA;AAGhD,YAAI8M,IAAO;AAEX,cAAMkkB,IAAcp2B,CAAAA,MAAU;AAC5BkS,UAAAA,IAAOlS;AAAAA,QACT;AAEAgsB,QAAAA,EAAQ;AAAA,UACNuC,OAAO;AAAA,UACP8H,QAAQ;AAAA,UACRjxB,SAAS;AAAA,YACP/G,SAAS;AACP,qBAAAnB,EAAA,OAAA,MAAA,CAAAA,EAAA,OAAA,MAAA,CAAAqC,2BAAArC,EAAA,MAAA,MAAA,IAAA,GAAAA,EAAAo5B,IAAA;AAAA,gBAAA,gBAAA;AAAA,gBAAA,eAAA;AAAA,gBAAA,OAIkDpnB;AAAAA,gBAAQ,OAAStN;AAAAA,cAAK,GAAA;AAAA,gBAAAxD,SAAAA,MAAA,CAAAlB,EAAAq5B,IAAA;AAAA,kBAAA,MAAA;AAAA,gBAAA,GAAA;AAAA,kBAAAn4B,SAAAA,MAAA,CAAAlB,EAAA43B,IAAA;AAAA,oBAAA,YAE5C5lB,EAASgD;AAAAA,oBAAI,uBAAAlR,CAAAA,MAAbkO,EAASgD,OAAIlR;AAAAA,oBAAA,aAAA;AAAA,oBAAA,UAAiCo1B;AAAAA,kBAAU,GAAA,IAAA,CAAA;AAAA,gBAAA,CAAA,CAAA;AAAA,cAAA,CAAA,CAAA,CAAA;AAAA,YAKtF;AAAA;UAEF3B,OAAO;;AACL,gBAAI,CAAC3jB,EAAQ0lB,KAAKtkB,CAAI;AACpB;AAGF,kBAAM;AAAA,cACJnN,QAAQ;AAAA,gBAAEod,IAAAA;AAAAA,gBAAI4S,eAAAA;AAAAA,cAAc;AAAA,YAC9B,MAAIjwB,KAAAA,IAAAA,GAAS,EAAGgvB,UAAU9zB,UAAtB8E,gBAAAA,EAA6BkwB,eAA7BlwB,gBAAAA,EAAAA,KAAAA,OAA+C,CAAA,GAE7C2xB,IAAW5gB,GAAO,IAAM,CAAA,GAAI7W,EAAK03B,WAAW;AAAA,cAChDnC,QAAQ;AAAA,gBACNpS,IAAAA;AAAAA,gBACA4S,eAAAA;AAAAA,gBACAjtB,OAAO9I,EAAKwZ;AAAAA,cACd;AAAA,YACF,CAAC;AAEDqd,YAAAA,EACE;AAAA,cACE3jB,MAAM,KAAKyjB,GAAWzjB,EAAKykB,QAAQ,QAAQ,EAAE,CAAC,CAAC;AAAA,cAC/C7uB,OAAO2uB;AAAAA,YACT,GACAxC,EAAe,CACjB,GAEA8B,EAAgB;AAAA,cACdvd,WAAWtG;AAAAA,cACX0kB,cAAc53B,EAAKyD;AAAAA,YACrB,CAAC;AAAA,UACH;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MA2DEo0B,WAzDgBA,CAACr4B,GAAMQ,MAAS;;AAChC,cAAM;AAAA,UACJ+F,QAAQ;AAAA,YAAEod,IAAAA;AAAAA,YAAI4S,eAAAA;AAAAA,UAAc;AAAA,QAC9B,MAAIjwB,KAAAA,IAAAA,GAAS,EAAGgvB,UAAU9zB,UAAtB8E,gBAAAA,EAA6BkwB,eAA7BlwB,gBAAAA,EAAAA,KAAAA,OAA+C,CAAA;AAInD,QAFqB9F,EAAKk3B,mBAGxBJ,EAAgB92B,EAAKk3B,eAAe;AAGtC,cAAMO,IAAW5gB,GAAO,IAAM,CAAA,GAAI7W,EAAK03B,WAAW;AAAA,UAChDnC,QAAQ;AAAA,YACNpS,IAAAA;AAAAA,YACA4S,eAAAA;AAAAA,YACAjtB,OAAO9I,EAAKwZ;AAAAA,UACd;AAAA,QACF,CAAC;AAEDqd,QAAAA,EACE;AAAA,UACE3jB,MAAM1T,EAAK0T;AAAAA,UACXpK,OAAO2uB;AAAAA,QACT,GACAxC,EAAe,CACjB,GAEA8B,EAAgB;AAAA,UACdvd,WAAWha,EAAK0T;AAAAA,UAChB0kB,cAAc53B,EAAKyD;AAAAA,QACrB,CAAC;AAAA,MACH;AAAA,MA2BEuzB,YAAAA;AAAAA,MACAX,kBA1BuBA,MAAM;AAC7BhB,QAAAA,EAAaD,EAAYkB,WAAW,EAAEC,KAAMC,CAAAA,MAAQ;AAClDA,UAAAA,EAAIC,iBAAiB;AAAA,YAAEj3B,MAAMy1B,EAAe;AAAA,UAAG,CAAC;AAAA,QAClD,CAAC;AAAA,MACH;AAAA;EAwBF;AACF,GA/KQzH,KAAA,CAAAzZ,UAAM,iBAAc,GAAAA,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z,IAL5B9V,KAAAuvB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAA,QAAA,EAAA,OAAA,YAAA,GAAA,KAAA,EAAA,CAAA;;+BACE7D,EAee,cAAA;AAfqB,SAAAC,KAAeuE,GAAK+F,GAAA;AAAA;IAC3C;;;MAFfpK;AAAAA,IAKI,CAAA;AAAA,aACYG,EAAA,MAAQ;AAAA,cAAlBsD,IAAA;AAAA,UANN,YAM0B3D,EAAM,GAAAC,EAAW,MAAA;AAAA,UAAE,KAAA;AAAA,iBAAyC;AAAA,qBAChF,CAAA,MAAA+D,EAAA,CAAA,IAEK,CAAAC,MAAAF,EAAA,OAAAxD,EAAA,KAAA,eAAA;AAAA,WATX,MAAA,MAOiBP,EAAM,GAAAC,EAAqB,MAAA;AAAA,UAAE,KAAA;AAAA;UACtC,SAAA+D,EAAwC,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAzBF,EAAA,SAAaxD,EAAA,IAAA;AAAA,QARpC,GAAA;AAAA;UAUMiC,GAAyD,QAAA;AAAA,QAArD,CAAA;AAAA,QAAmBoB;iBAA6B;AAAA,UACpD,SAAAI,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,IAGKoI,MAAArI,EAdX,oBAWyBA,EAAU,iBAAd,GAAAqI,CAAA;AAAA;WAAsB,EAAK,GAAInM,EAAAiE,IAAA,MAAAC,GAAAJ,EAAA,YAAA,CAAAtC,MAAA;;AAAE,mBAAM,GAAWxB,EAAA,MAAA;AAAA;YAXvE,OAAA;AAAA,UAaoB,GAAA;AAAA,kBAAZwB,EAA2G,IAAA,IAAA,KAAA,CAAA;AAAA,cAbnH,WAAAG,IAAArB,EAAA,SAAA,gBAAAqB,EAAA,oBAayD5B,EAAM,GAAAC,EAAW,QAAA;AAAA,cAAE,KAAA;AAAA,cAA8B,OAAE;AAAA,cAb5G,SAAA,CAAAgE,MAAAF,EAAA,UAAAtC,GAAAlB,EAAA,IAAA;AAAA;;;OAAA;AAAA;;;;uFCeAw5B,KAAe;AAAA,EACb,YAAY;AAAA,IACV,iBAAAnE;AAAA,EAAA;AAAA,EAEF,QAAQ;AACN,UAAM,EAAE,iBAAAsB,EAAA,IAAoBE,GAAA,GACtB,EAAE,aAAAC,GAAa,cAAAC,EAAA,IAAiBpvB,GAAA;AAQtC,WAAO;AAAA,MACL,kBAPuB,MAAM;AAC7B,QAAAovB,EAAaD,EAAY,WAAW,EAAE,KAAK,CAACoB,MAA6D;AACvG,UAAAA,EAAI,iBAAiB,EAAE,MAAMvB,EAAA,GAAmB;AAAA,QAClD,CAAC;AAAA,MACH;AAAA,IAGE;AAAA,EAEJ;AACF;;+BAzBqBn3B,EAAA,kBAPI;SAEnBC,EAAA,GAAAuE,GAGMsxB,GAAA,EAAA,OAAA,iBAAA;AAAA,IAAA,SAHIx1B,EAAC,MAAA;AAAA,MAAAuD,EAAsB,OAAA;AAAA,QAAA,OAAA;AAAA,QAC/B,SAAAI,EAA2C,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAjCoI,MAAKrI,EAAA,oBAAgBA,EAAA,iBAAA,GAAAqI,CAAA;AAAA,MAAA,GAC/B;AAAA,QAAAjM,EAAAsK,GAAA,EAAA,MAAA,iBAAA,CAAA;AAAA;MALR,CAAA;AAAA,IAAA,CAAA;AAAA;;;;;;;;;GC6CMuvB,KACJ;;;;;;;;;;;;;;;;;;;;;;;AAvBF,UAAMr5B,IAAQs5B,GAoBRn3B,IAAOo3B,GAKPC,IAAc,CAACC,MAAW;AAC9B,MAAAt3B,EAAK,SAASs3B,CAAC;AAAA,IACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qEC3CAC,KAAe;AAAA,EACb,OAAO;AAAA;AAAA;AAAA;AAAA,IAIL,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAEJ,GAjBA5K,KAAA,CAAAzZ,OAAA0Z,GAAA,iBAAA,GAAA1Z,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z,IACqB9V,KAAM;AAAA,EAAA,KAAA;AAAA;;;AAAR,QAAAuK,IAAA1K,EAAA,UAAA;AACf,SAAAQ,EAAA,UAAAP,EAAA,GAAgBC,EAAY,OAAAC,IAAA;AAAA,IAAAC,EAAMsK,GAAO;AAAA,MAAA,OAAA;AAAA,MACzC,MAAA;AAAA,IAAA,CAAA;AAAA,IAHJ9G;AAAAA,EAAA,CAAA,KAAAwG,GAAA,IAAA,EAAA;;;;;;;;;;;;;;;;;;;;ACUA,UAAMxJ,IAAQs5B,GAeRn3B,IAAOo3B,GAEPI,IAAa90B,GAAS,MAAM7E,EAAM,SAAS,OAAO,CAACc,MAASd,EAAM,SAAS,KAAK,CAACiI,MAAMnH,EAAK,OAAOmH,EAAE,EAAE,CAAC,CAAC,GAEzG2xB,IAAsB/0B;AAAA,MAAS,MACnC7E,EAAM,SAAS,OAAO,CAACc,MAAS,CAACd,EAAM,SAAS,KAAK,CAACiI,MAAMnH,EAAK,OAAOmH,EAAE,EAAE,CAAC;AAAA,IAAA,GAGzE4xB,IAAch1B,GAAS;AAAA,MAC3B,MAAM;AACJ,eAAO7E,EAAM,SAAS,SAAS,KAAKA,EAAM,SAAS,WAAW25B,EAAW,MAAM;AAAA,MACjF;AAAA,MACA,IAAIr3B,GAAO;AACT,YAAIA;AACF,UAAAH,EAAK,aAAanC,EAAM,SAAS,OAAO45B,EAAoB,KAAK,CAAC;AAAA,aAC7D;AACL,cAAIA,EAAoB,MAAM,QAAQ;AACpC,YAAAz3B,EAAK,aAAay3B,EAAoB,KAAK;AAC3C;AAAA,UACF;AACA,UAAAz3B,EAAK,aAAa,IAAI;AAAA,QACxB;AAAA,MACF;AAAA,IAAA,CACD,GAEK23B,IAAkBj1B,GAAS,MAAM80B,EAAW,MAAM,SAAS,KAAKA,EAAW,MAAM,WAAW35B,EAAM,SAAS,MAAM;;;;;;;;;;;;;ICiEjH+5B,KAAc;AAAA,EAClB,SAAS;AAAA,EACT,MAAM;AAAA,EACN,MAAM;AACR,GAEMV,KACJ,svCAEGxqB,KAAU;AAAA,EACb,YAAY;AAAA,IACV,aAAa9M;AAAA,IACb,oBAAAi4B;AAAA,IACA,WAAAxvB;AAAA,IACA,aAAAyvB;AAAA,IACA,WAAAC;AAAAA;EAEF,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,MAAM,CAAA;AAAA;;;;IAKjB,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAASH,GAAY;AAAA;;;;IAKvB,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA;;;;IAKX,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA;;;;IAKX,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA;;;;IAKX,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA;;;;IAKX,gBAAgB;AAAA,MACd,MAAM;AAAA,MACN,SAAS;AAAA;;IAGX,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA;;IAGX,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA;;IAGX,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA;;IAGX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,MAAM,CAAA;AAAA;IAEjB,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA;EAEF,OAAO,CAAC,SAAS,aAAa,OAAO,eAAe,oBAAoB,aAAa,YAAY,gBAAgB;AAAA,EACjH,MAAM/5B,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM0K,IAAa5H,GAAO,cAAc,CAAA,CAAE,GACpCk1B,IAAal1B,GAAO,cAAc,CAAA,CAAE,GACpCtC,IAAQC,GAAS;AAAA,MACrB,aAAa;AAAA,MACb,MAAMiC,GAAS,MAAM7E,EAAM,IAAI;AAAA,MAC/B,KAAK;AAAA,MACL,OAAO;AAAA,MACP,cAAc,CAAA;AAAA,MACd,aAAa;AAAA,MACb,mBAAmB;AAAA,MACnB,WAAW;AAAA,KACZ,GAEKo6B,IAAQv1B,GAAS,OAAMs1B,KAAA,gBAAAA,EAAY,UAAS,CAAA,CAAE,GAE9CE,IAAgB,CAACxmB,MAAO;AAC5B,aAAOA,EAAG,aAAa;AACrB,QAAAA,IAAKA,EAAG;AAEV,aAAOA;AAAA,IACT,GAEMymB,IAAqB,CAACx5B,GAAMsJ,MAAU;AAC1C,MAAAzH,EAAM,eAAe7B,GAErB6B,EAAM,MAAM,GAAG03B,EAAcjwB,EAAM,MAAM,EAAE,wBAAwB,GAAG,MAEtEzH,EAAM,QAAQ,IACdA,EAAM,cAAc7B,EAAK,IAErB6B,EAAM,sBAAsB7B,EAAK,MACnC,aAAa6B,EAAM,SAAS;AAAA,IAEhC,GAEM43B,IAAY,CAAC,EAAE,OAAAnwB,GAAO,MAAAtJ,GAAM,OAAAX,EAAI,MAAQ;AAC5C,MAAAwC,EAAM,cAAcxC,GAEpBgC,EAAK,aAAarB,CAAI,GAEtBqB,EAAK,aAAa,EAAE,OAAAiI,GAAO,MAAAtJ,GAAM,OAAAX,GAAO,QAAQ,GAAI,CAAG;AAAA,IACzD,GAEMq6B,IAAa,CAAC,EAAE,OAAApwB,GAAO,MAAAtJ,GAAM,OAAAX,EAAI,MAAQ;AAC7C,MAAIH,EAAM,iBACRu6B,EAAU,EAAE,OAAAnwB,GAAO,MAAAtJ,GAAM,OAAAX,EAAI,CAAG,GAGlCgC,EAAK,SAASrB,CAAI;AAAA,IACpB,GAEM25B,IAAY,CAAC,EAAE,OAAArwB,GAAO,MAAAtJ,GAAM,OAAAX,EAAI,MAAQ;AAC5C,MAAAwC,EAAM,cAAcxC,GAEpBgC,EAAK,aAAa,EAAE,OAAAiI,GAAO,MAAAtJ,GAAM,OAAAX,GAAO,QAAQ,GAAG,CAAG;AAAA,IACxD,GAGMu6B,IAAc,MAAM;AACxB,MAAA/3B,EAAM,cAAc;AAAA,IACtB,GAEMg4B,IAAkB,MAAM;AAC5B,MAAAh4B,EAAM,QAAQ;AAAA,IAChB,GAEMi4B,IAAW,CAAC95B,OAAUA,EAAK,YAAY,OAAOA,EAAK,YAAY;AAAA,CAAI,KAAK,OAAOA,EAAK,SAASA,EAAK,YAElG+5B,IAAuB,MAAM;AACjC,MAAAl4B,EAAM,YAAY,WAAW,MAAM;AACjC,QAAAA,EAAM,cAAc,MACpBA,EAAM,oBAAoB;AAAA,MAC5B,GAAG,GAAG;AAAA,IACR,GAEMm4B,IAAyB,MAAM;AACnC,mBAAan4B,EAAM,SAAS;AAAA,IAC9B,GAEMo4B,IAAwB,CAACj6B,MAAS;AACtC,MAAI6B,EAAM,oBACRA,EAAM,oBAAoB,OAE1BA,EAAM,oBAAoB7B,EAAK;AAAA,IAEnC,GAIMk6B,IAAoB,CAACC,GAAWC,MAAU;AAC9C,YAAMC,IAAaF,EAAU,UAAU,CAACn6B,MAASA,EAAK,OAAOo6B,EAAM,EAAE;AACrE,MAAAv4B,EAAM,cAAcw4B;AAAA,IACtB;AAEA,IAAAtyB;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,OAAOi7B,MAAc;AACnB,QAAIA,KAAaj7B,EAAM,iBACrBg7B,EAAkBC,GAAWj7B,EAAM,aAAa;AAAA,MAEpD;AAAA,IACF,GAEA6I;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,OAAOk7B,MAAU;;AACf,QAAIA,OAASj6B,IAAA0B,EAAM,SAAN,QAAA1B,EAAY,WACvB+5B,EAAkBr4B,EAAM,MAAMu4B,CAAK;AAAA,MAEvC;AAAA,IACF;AAEA,UAAME,IAAkB,CAAC5W,MAAU;AACjC,MAAI,MAAM,QAAQA,CAAK,IACrBriB,EAAK,YAAYqiB,CAAK,IAEtBriB,EAAK,gBAAgB;AAAA,IAEzB;AAEA,WAAO;AAAA,MACL,aAAA43B;AAAA,MACA,iBAAiBltB,EAAW;AAAA,MAC5B,OAAAlK;AAAA,MACA,OAAAy3B;AAAA,MACA,UAAAQ;AAAA,MACA,YAAAJ;AAAA,MACA,WAAAC;AAAA,MACA,aAAAC;AAAA,MACA,oBAAAJ;AAAA,MACA,iBAAAK;AAAA,MACA,YAAAtB;AAAA,MACA,sBAAAwB;AAAA,MACA,wBAAAC;AAAA,MACA,uBAAAC;AAAA,MACA,WAAAR;AAAA,MACA,QAAAc;AAAAA,MACA,iBAAAD;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;EA1VA,KAAA;AAAA,EAC8D,OAAM;GAC3Dp4B,KAAA,EAAA,OAAM,eAAc,GAGzBS,KAAAqrB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAgC,OAAA,EAA3B,OAAM,WAAU,GAAC,QAAI,EAAA,CAAA,GAC1BU,KAAAmrB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAgC,OAAA,EAA3B,OAAM,WAAU,GAAC,QAAI,EAAA,CAAA,GAC1BoG,KAAAylB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAqC,OAAA,EAAhC,OAAM,iBAAgB,GAAC,OAAG,EAAA,CAAA,GAavBqG,KAAA,EAAA,OAAM,kBAAiB,GAC7BS,KAAA+kB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAiC,OAAA,EAA5B,OAAM,YAAW,GAAC,QAAI,EAAA,CAAA,GArBjC+G,KAAA,CAAA,aAAA,SAAA,eAAA,aAAA,GA4CasqB,KAAA,EAAA,OAAM,YAAW,GACfC,KAAA,EAAA,OAAM,YAAW;EA7ChC,KAAA;AAAA,EA8CsD,OAAM;;EA9C5D,KAAA;AAAA,EAiDwD,OAAM;;EAjD9D,KAAA;AAAA,EAmDkC,OAAM;GAExB+G,KAAA,EAAA,OAAM,OAAM,GArD5BC,KAAA,CAAA,aAAA,GAAAC,KAAA,CAAA,aAAA,GAyEgBC,KAAA,EAAA,OAAM,OAAM,GAzE5BC,KAAA,CAAA,SAAA,GAAAC,KAAA,CAAA,SAAA;EAAA,KAAA;AAAA,EAyF8E,OAAM;GACzEC,KAAA,EAAA,OAAM,uBAAsB;EA1FvC,KAAA;AAAA,EA2FiD,OAAM;GAG5CC,KAAA,EAAA,OAAM,+BAA8B,GA9F/CC,KAAA,CAAA,KAAA;;;AAAA,SAAAz8B,EAAA,GAAAC,EAAAiE,IAAA,MAAA;AAAA,IACa3D,EAAA,eAAewD,EAAA,YAAY,QAAQxD,EAAA,gBAA9CP,KAAAC,EAOM,OAPNC,IAOM;AAAA,MANJ0D,EAEM,OAFND,IAEM;AAAA,QADJxD,EAAiHu8B,GAAA;AAAA,UAApG,UAAUn8B,EAAA;AAAA,UAAO,UAAUA,EAAA;AAAA,UAAU,gBAAc;AAAA,UAAO,aAAYwD,EAAA;AAAA;;MAErFK;AAAAA,MACAE;AAAAA,MACA0F;AAAAA,UAPJG,GAAA,IAAA,EAAA;AAAA,IAUUpG,EAAA,MAAM,KAAK,UAAUxD,EAAA,sBAD7BN,EA6FK,MAAA;AAAA,MAtGP,KAAA;AAAA,MAWK,OAXLoK,GAAA;AAAA;;2BAWsF9J,EAAA,eAAewD,EAAA,YAAY,KAAI;AAAA,2BAAYA,EAAA,gBAAe;AAAA;MAM3I,cAAUC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAEF,EAAA,MAAM,QAAK;AAAA;MAEdxD,EAAA,sBAAVN,EAGK,MAAA;AAAA,QAtBT,KAAA;AAAA,QAmB6B,OAAM;AAAA,QAAyB,gCAAOQ,EAAA,MAAK,KAAA;AAAA;QAClEmD,EAAqE,QAArEqG,IAAqE;AAAA,UAAvC9J,EAAgCsK,GAAA,EAAtB,MAAK,MAAK,CAAA;AAAA;QAClDC;AAAAA,YArBNP,GAAA,IAAA,EAAA;AAAA,cAuBIlK,EAiEKiE,IAAA,MAxFTC,GAwB8BJ,EAAA,MAAM,MAxBpC,CAwBctC,GAAMX,YADhBb,EAiEK,MAAA;AAAA,QA/DF,KAAKwB,EAAK;AAAA,QACV,WAAS,CAAGlB,EAAA,iBAAiBA,EAAA;AAAA,QAC7B,OA3BP8J,GAAA;AAAA;2BA2B+D9J,EAAA,gBAAe;AAAA,qCAAuCA,EAAA,eAAewD,EAAA,YAAY,KAAI;AAAA;QAK7I,OAAOA,EAAA,SAAStC,CAAI;AAAA,QACpB,aAjCP2wB,UAiC4BruB,EAAA,WAAU,EAAA,OAAUE,GAAQ,MAAAxC,GAAM,OAAAX,EAAK,CAAA,GAAA,CAAA,QAAA,MAAA,CAAA;AAAA,QAC5D,aAlCPsxB,GAAA,CAAAnuB,MAkCuBF,EAAA,mBAAmBtC,GAAMwC,CAAM,GAAA,CAAA,MAAA,CAAA;AAAA,QAC/C,wCAAYF,EAAA,wBAAAA,EAAA,qBAAA,GAAAqI,CAAA;AAAA;QAEb5L,GAkDOC,EAAA,QAAA,WAAA,EAlDA,MAAMgB,EAAI,GAAjB,MAAA;;AAkDO;AAAA,YAjDLtB,EAKyBw8B,GAAA;AAAA,cAJtB,MAAMl7B;AAAA,cACN,iBAAelB,EAAA;AAAA,cACf,SAASA,EAAA,QAAQ,KAAI,CAAEs7B,MAAUA,EAAM,OAAOp6B,EAAK,EAAE;AAAA,cACrD,iBAAelB,EAAA,eAAewD,EAAA,YAAY;AAAA;YAE7CH,EAGM,OAHNqxB,IAGM;AAAA,cAFJrxB,EAAuF,OAAvFsxB,IAAuFrxB,GAA7DpC,EAAK,WAAWA,EAAK,WAASG,IAAAH,EAAK,YAAL,gBAAAG,EAAc,SAAQ,GAAA,CAAA;AAAA,cACnErB,EAAA,eAAewD,EAAA,YAAY,QAAtC/D,EAAA,GAAAC,EAAiG,OAAjG28B,IAAiG/4B,GAAzBpC,EAAK,WAAW,GAAA,CAAA,KA9ClG0I,GAAA,IAAA,EAAA;AAAA;YAiDmB5J,EAAA,iBAAa,CAAKkB,EAAK,qBAAlCxB,EAA8E,OAA9E48B,IAAqE,KAAG,KAjDhF1yB,GAAA,IAAA,EAAA;AAAA,YAmDmB5J,EAAA,iBAAXP,KAAAC,EAeM,OAfN68B,IAeM;AAAA,cAdJl5B,EAaM,OAAA;AAAA,gBAbD,OAAM;AAAA,gBAAgB,aAASI,EAAA,CAAA,MAAAA,EAAA,CAAA,IApD9CouB,aAoDqDruB,EAAA,0BAAAA,EAAA,uBAAA,GAAAqI,CAAA,GAAsB,CAAA,MAAA,CAAA;AAAA,gBAAG,wCAAYrI,EAAA,wBAAAA,EAAA,qBAAA,GAAAqI,CAAA;AAAA;gBAC9ExI,EAWK,MAXLq4B,IAWK;AAAA,kBAVHr4B,EAEK,MAAA;AAAA,oBAFD,OAAM;AAAA,oBAAa,aAtDrCwuB,UAsD0DruB,EAAA,UAAS,EAAA,OAAUE,GAAQ,MAAAxC,GAAM,OAAAX,EAAK,CAAA,GAAA,CAAA,QAAA,MAAA,CAAA;AAAA;oBAChFX,EAAqFkM,GAAA;AAAA,sBAAzE,OAAM;AAAA,sBAAiB,cAAc;AAAA,sBAAO,MAAK;AAAA;kBAvD7E,GAAA,IAAA6vB,EAAA;AAAA,kBAyDct4B,EAMK,MAAA;AAAA,oBALH,OAAM;AAAA,oBACL,aAASI,EAAA,CAAA,MAAAA,EAAA,CAAA,IA3D1BouB,aA2DiCruB,EAAA,mBAAAA,EAAA,gBAAA,GAAAqI,CAAA,GAAe,CAAA,MAAA,CAAA;AAAA,oBAC/B,aA5DjBgmB,UA4DyCruB,EAAA,UAAS,EAAA,OAAUE,GAAQ,MAAAxC,GAAM,OAAAX,EAAK,CAAA,GAAA,CAAA,QAAA,SAAA,CAAA;AAAA;oBAE/DX,EAAqFkM,GAAA;AAAA,sBAAzE,OAAM;AAAA,sBAAiB,cAAc;AAAA,sBAAO,MAAK;AAAA;kBA9D7E,GAAA,IAAA8vB,EAAA;AAAA;;kBAoEqB57B,EAAA,wBADbN,EAmBM,OAAA;AAAA,cAtFd,KAAA;AAAA,cAqEW,OArEXoK,kDAqEiEtG,EAAA,MAAM,gBAAgBtC,EAAK,GAAE,CAAA,CAAA;AAAA,cACpF,OAAM;AAAA;cAENmC,EAaM,OAAA;AAAA,gBAbD,OAAM;AAAA,gBAAgB,aAASI,EAAA,CAAA,MAAAA,EAAA,CAAA,IAxE9CouB,aAwEqDruB,EAAA,0BAAAA,EAAA,uBAAA,GAAAqI,CAAA,GAAsB,CAAA,MAAA,CAAA;AAAA,gBAAG,wCAAYrI,EAAA,wBAAAA,EAAA,qBAAA,GAAAqI,CAAA;AAAA;gBAC9ExI,EAWK,MAXLw4B,IAWK;AAAA,kBAVHj8B,EAIe+J,GAAA;AAAA,oBAJD,SAAQ;AAAA,oBAAO,WAAU;AAAA,oBAAM,QAAO;AAAA;oBA1ElE,SAAA7J,EA2EgB,MAEK;AAAA,sBAFLuD,EAEK,MAAA;AAAA,wBAFD,OAAM;AAAA,wBAAa,SA3EvCwuB,GAAA,CAAAnuB,MA2EmDxD,EAAA,MAAK,oBAAA,EAAuB,MAAAgB,GAAM,OAAAX,EAAK,CAAA,GAAA,CAAA,MAAA,CAAA;AAAA;wBACxEX,EAAsFkM,GAAA;AAAA,0BAA1E,OAAM;AAAA,0BAAiB,cAAc;AAAA,0BAAO,MAAK;AAAA;sBA5E/E,GAAA,GAAAgwB,EAAA;AAAA;oBAAA,GAAA;AAAA;kBA+Ecl8B,EAIe+J,GAAA;AAAA,oBAJD,SAAQ;AAAA,oBAAK,WAAU;AAAA,oBAAM,QAAO;AAAA;oBA/EhE,SAAA7J,EAgFgB,MAEK;AAAA,sBAFLuD,EAEK,MAAA;AAAA,wBAFD,OAAM;AAAA,wBAAa,SAhFvCwuB,GAAA,CAAAnuB,MAgFmDxD,EAAA,MAAK,eAAgBgB,CAAI,GAAA,CAAA,MAAA,CAAA;AAAA;wBAC1DtB,EAAoFkM,GAAA;AAAA,0BAAxE,OAAM;AAAA,0BAAiB,cAAc;AAAA,0BAAO,MAAK;AAAA;sBAjF/E,GAAA,GAAAiwB,EAAA;AAAA;oBAAA,GAAA;AAAA;;;qBAAAnyB,GAAA,IAAA,EAAA;AAAA;;MAAA,GAAA,IAAAQ,EAAA;MAyFepK,EAAA,iBAAiBwD,QAAM,SAASA,EAAA,MAAM,aAAa,cAA9D/D,KAAAC,EAYM,OAZN88B,IAYM;AAAA,QAXJn5B,EAAyE,OAAzE24B,IAAyE14B,GAApCE,EAAA,MAAM,aAAa,KAAK,IAAG,OAAG,CAAA;AAAA,QACxDA,EAAA,MAAM,aAAa,eAA9B/D,KAAAC,EAEM,OAFN+8B,IAEMn5B,GADDE,QAAM,aAAa,WAAW,GAAA,CAAA,KA5FzCoG,GAAA,IAAA,EAAA;AAAA,QA8FMvG,EAMM,OANN44B,IAMM;AAAA,UALJ54B,EAIE,OAAA;AAAA,YAHA,OAAM;AAAA,YACL,KAAKG,EAAA,MAAM,aAAa,cAAcA,EAAA;AAAA,YACtC,gCAAOE,EAAO,OAAO,MAAMF,EAAA;AAAA,UAlGtC,GAAA,MAAA,IAAA04B,EAAA;AAAA;YAAAtyB,GAAA,IAAA,EAAA;AAAA,cAAAA,GAAA,IAAA,EAAA;AAAA,IAuGEhK,EAA+D88B,GAAA;AAAA,MAAhD,SAASl5B,EAAA,MAAM,KAAK,WAAWxD,EAAA;AAAA;;;uFCL1C;AAAA,EAAEw1B,YAAAA;AAAW,IAAIhpB,IAEvBmwB,KAAe;AAAA,EACbvG,YAAY;AAAA,IACVC,aAAaj0B;AAAAA,IACbw6B,eAAelP;AAAAA,IACfmP,YAAYC;AAAAA,IACZC,YAAYpyB;AAAAA,IACZqyB,cAAcrJ;AAAAA,IACd/oB,WAAAA;AAAAA,IACAqyB,eAAAA;AAAAA,IACAC,SAASC,GAAO;AAAA;EAGlB/8B,OAAO;AAAA,IACLg9B,gBAAgB98B;AAAAA,IAChB+8B,QAAQ;AAAA,MACNz8B,MAAMF;AAAAA,MACNI,SAAS;AAAA,IACX;AAAA;EAEFw8B,OAAO,CAAC,wBAAwB,MAAM;AAAA,EACtChH,MAAMl2B,GAAO;AAAA,IAAEmC,MAAAA;AAAAA,EAAK,GAAG;;AACrB,UAAM;AAAA,MAAEmsB,SAAAA;AAAAA,QAAYiC,GAAQ,GACtB;AAAA,MAAE4M,gBAAAA;AAAAA,QAAmBC,GAAO,GAE5BC,KAAaC,IAAAA,GAAa,eAAe,MAA5BA,gBAAAA,EAA+BC,mBAAkBD,IAAAA,GAAa,eAAe,MAA5BA,gBAAAA,EAA+BE,UAE7FC,KAAgBH,IAAAA,GAAa,eAAe,MAA5BA,gBAAAA,EAA+BG,eAAcH,IAAAA,GAAa,eAAe,MAA5BA,gBAAAA,EAA+BE,UAE5F76B,IAAQC,GAAS;AAAA,MACrB86B,aAAa;AAAA,MACbC,sBAAsB;AAAA,MACtB9M,OAAO;AAAA,MACPwM,YAAAA;AAAAA,MACAL,gBAAgB,CAAA;AAAA,MAChBY,aAAa;AAAA,MACbC,UAAU;AAAA,MACVC,cAAc;AAAA,MACdC,oBAAoB;AAAA,IACtB,CAAC;AAED9yB,IAAAA,GAAY,MAAM;AAChBtI,MAAAA,EAAMq6B,iBAAiBh9B,EAAMg9B,kBAAkB,CAAA;AAAA,IACjD,CAAC;AAED,UAAMgB,IAAwB17B,CAAAA,MAAU;AACtC,UAAI,CAACA,GAAO;AACVK,QAAAA,EAAM06B,aAAaA;AACnB;AAAA,MACF;AACA16B,MAAAA,EAAM06B,aAAaA,EAAWjc,OAAQtgB,CAAAA,OAASA,KAAAA,gBAAAA,EAAMm9B,cAAcC,QAAQ57B,EAAM27B,YAAW,MAAM,EAAE;AAAA,IACtG,GAEME,IAAgBA,MAAM;AAC1B,YAAMnH,IAAgB5vB,GAAS,EAAGR,UAAS,GACrCw3B,IAAcjB,EAAc,GAC5B;AAAA,QAAE1Y,IAAAA;AAAAA,QAAI4Z,UAAAA;AAAAA,MAAS,IAAID;AACzB,OAAI3Z,MAAOuS,EAAcvS,MAAM4Z,MAAarH,EAAcqH,cACxDrH,EAAcqG,aAAa16B,EAAMq6B;AAAAA,IAErC,GAEMsB,IAAmB9pB,CAAAA,MAAS;AAChC8Z,MAAAA,EAAQ;AAAA,QACNuC,OAAO;AAAA,QACPnpB,SAAS,UAAU8M,CAAI;AAAA,QACvBuiB,MAAMA,MAAM;AACV,iBAAOp0B,EAAMq6B,eAAexoB,CAAI,GAChC2pB,EAAa;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH,GAEMI,IAAYx5B,GAAI,IAAI,GAEpBy5B,IAAuB19B,CAAAA,MAAS;;AACpC6B,MAAAA,EAAMkuB,QAAQ/vB;AACd,YAAM29B,MAAsBz+B,IAAAA,EAAMg9B,mBAANh9B,gBAAAA,EAAuBc,SAASsG,KAAAA,IAAAA,GAAS,EAAGR,UAAS,MAArBQ,gBAAAA,EAAyBi2B,eAAzBj2B,gBAAAA,EAAsCtG;AAClG6B,MAAAA,EAAMi7B,eACJa,KAAAA,gBAAAA,EAAqBn8B,UACrB,YAAYxB,CAAI,KAAKA,MAAS,UAAU,uCAAuC,EAAE,SACnF6B,EAAMg7B,uBAAuB,IAC7Be,WAAW,MAAM;AACfH,QAAAA,EAAUj8B,MAAMgwB,UAAS,EAAGqM,QAAQ,aAAa,8BAA8B;AAAA,MACjF,CAAC;AAAA,IACH,GAEMC,IAAgBA,MAAM;AAC1B,UAAIj8B,EAAMk7B,UAAU;AAClBgB,QAAAA,GAAU;AAAA,UACRr+B,MAAM;AAAA,UACNkH,SAAS;AAAA,QACX,CAAC;AAED;AAAA,MACF;AAGA,YAAMpF,IAAQ;AAAA,QACZ9B,MAAM;AAAA,QACN8B,OAHkBi8B,EAAUj8B,MAAMgwB,UAAS,EAAGoD,SAAQ;AAAA;AAMxD,MAAK/yB,EAAMq6B,mBACTr6B,EAAMq6B,iBAAiB,CAAA,IAGzBr6B,EAAMq6B,eAAer6B,EAAMkuB,KAAK,IAAIvuB,GACpCK,EAAMg7B,uBAAuB,IAC7BQ,EAAa,GAERn+B,EAAMi9B,SAGT96B,EAAK,wBAAwBQ,EAAMq6B,cAAc,IAFjD76B,EAAK,QAAQQ,EAAMq6B,cAAc;AAAA,IAIrC,GAEM8B,IAAkB9L,CAAAA,MAAW;;AACjC,MAAKuL,EAAUj8B,UAIfK,EAAMo7B,qBAAqBgB,GAAeR,EAAUj8B,MAAM+vB,cAAakM,IAAAA,EAAUj8B,MAAMgwB,UAAS,MAAzBiM,gBAAAA,EAA6BS,UAAU,GAG9Gr8B,EAAMm7B,eAAemB,GAAWjM,GAAQuL,EAAUj8B,MAAM+vB,UAAS,GAAI1vB,CAAK;AAAA,IAC5E,GAEMu8B,IAAqBA,MAAM;AAC/B,UAAI,CAACX,EAAUj8B;AACb;AAGF,YAAM68B,IAAcZ,EAAUj8B,MAAMgwB,UAAS,EAAG0M,SAAQ;AACxDI,MAAAA,GAAKD,GAAax8B,EAAMm7B,YAAY;AAAA,IACtC;AAEA3tB,WAAAA,GAAgB,MAAM;;AACpBxN,OAAAA,KAAAA,IAAAA,EAAMo7B,uBAANp7B,gBAAAA,EAA0B08B,YAA1B18B,QAAAA,EAAAA,KAAAA,GAAqC28B,CAAAA,MAAa;AAChDA,QAAAA,EAASC,QAAO;AAAA,MAClB,KAEA58B,KAAAA,IAAAA,EAAMm7B,iBAANn7B,gBAAAA,EAAoB68B,cAApB78B,QAAAA,EAAAA,KAAAA;AAAAA,IACF,CAAC,GAEM;AAAA,MACLA,OAAAA;AAAAA,MACA86B,eAAAA;AAAAA,MACAc,WAAAA;AAAAA,MACAP,sBAAAA;AAAAA,MACAQ,qBAAAA;AAAAA,MACAF,iBAAAA;AAAAA,MACAM,eAAAA;AAAAA,MACAE,gBAAAA;AAAAA,MACAI,oBAAAA;AAAAA,MACA9J,YAAAA;AAAAA;EAEJ;AACF,GAlQA71B,KAAA,EAAA,OAAA,aAAA,GA4BOyD,KAAA,EAAA,OAAM,eAAA,GAOFS,KAAA,CAAA,SAAM,GAWNE,KAAA,EAAA,OAAM,kBAAA,GACJ0F,KAAA,EAAA,OAAM,0BAAkB,GAGxBC,KAAA,EAAA,OAAM,oBAAiB,uCAlDpCU,KAAA,EAAA,OAAA,kBAAA,GAwD2CsqB,KAAM;AAAA;EACtC,OAAA;AAEC,GA3DZC,KAAA,EAAA,OAAA,sBAAA,GAoEW0H,KAAA,EAAA,OAAM,kBAAA;;wLApEjB3M,IAAAlwB,EAAA,iBAAA;SAEIC,EAwBe,GAAAC,EAAAiE,IAAA,MAAA;AAAA,MAvBJ,OAAAhE,IAAM;AAAA,QAHrBoK,GAAA;AAAA,QAIM,YAAUvG,EAAA,MAAY;AAAA,QACtB,uBAAeC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,MAAA,cAAAE;AAAA,QACf,WAAW;AAAA,QACV,SAAA;AAAA;QAEU,gBAGK,WAAA;AAAA;QAZtB,WAAA5D,EAAA,MAW2C;AAAA,YAAhC8L,GAAgC,EAAA,OAAjB,iBAAK,GAAA;AAAA,YAX/B,SAAA9L,EAAA,MAAA;AAAA;cAAAmC,GAAAqB,GAAAtD,EAAA,SAAA,aAAA,UAAA,GAAA,CAAA;AAAA;;UAAA,CAAA;AAAA,QAcM,CAAA;AAAA,iBACEF,EAAA,MASK;AAAA,mBARHsD,IAAA;AAAA,oBAAA,MAAA;AAAA,eAEG3D,EAAK,EAAK,GAAAC,EAAAiE,IAAA,MAAAC,GAAAJ,EAAA,MAAA,YAAA,CAAAtC,GAAAX,OACLd,OAAa,MAAK;AAAA,gBACvB,KAAAc;AAAA;gBAED,SAAA,CAAAmD,MAAqBF,uBAAb;AAAA,cAtBpB,GAAA;AAAA;;;WAAA;AAAA;;SA4BE,GAAA,CAAA,cAAsD,YAAtD,CAAA;AAAA,KACA;AAAA,IACGH,EAAa,OAAYU,IAAKT,GAAeE,EAAA,aAAA,GAAA,CAAA;AAAA,IAC7C5D,EAAWigC,GAAK;AAAA,MAChB,aAhCL,OAAA,KAAAr8B,EAAA,MAAA,cAgCyC;AAAA;MAE1B,OAAOsG,GAAI,EAAI,2BAAA,OAAA,KAAAtG,EAAA,MAAA,cAAA,EAAA,OAAA,CAAA;AAAA;;QAKfH,EAAW,OAAIoG,IAAAnG,GAAA5B,CAAA,GAAA,CAAA;AAAA;MACX,SAAA5B,EAAc,CAAA,EAAA,MAAA4B,QAAK;AAAA,QAAE9B,EAAKkM,GAAS;AAAA,UAAE,cAAK;AAAA;UACvD,SAAA,CAAApI,MAA4FF,EAAA,oBAAA9B,CAAA;AAAA,QAA/E,GAAA,MAAA,GAAA,CAAA,SAAmB,CAAA;AAAA,QAAE9B,EAAKkM,GAAQ;AAAA,UAAE,cAAK;AAAA;;WAzC5D,MAAA,GAAA,CAAA,SAAA,CAAA;AAAA;MA4CE,GAAA;AAAA,OAAyB,GAAA,CAAA,eAAS,OAAM,CAAA;AAAA,MA5C1C4jB,GAAA;AAAA,MA4CgE,SAAAlsB,EAAU,MAAA;AAAA,MAAE,oBAAiBC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,MAAA,uBAAAE;AAAA,MAAG,YAAA;AAAA;MACjF,kBASH;AAAA,IARN,GAAA;AAAA,aACE5D,EAAA,MAAA;AAAA,QAGAuD,EAAA,WAGM;AAAA,YAF4D,OAAA8G,IAAA7G,GAAAtD,EAAA,SAAA,aAAA,UAAA,GAAA,CAAA;AAAA,UAAnDqD,EAAW,OAAA+G,IAAA;AAAA,YAAExK,EAAOgM,GAAa;AAAA;cAnDxD,SAAApI,EAAA;AAAA,YAAA,GAAA;AAAA;gBAAAvB,GAAA,IAAA;AAAA;cAoDU,GAAA;AAAA,YAAY,GAAA,GAAI,UAAQ,CAAA;AAAA,cAAO6J,GAAA;AAAA;;;;QA8B1B,CAAA;AAAA,MAlFf,CAAA;AAAA,MAwDe,QAAAhM,EAAM,MAAA,EAAA;AAAA,MAAjB,SAAAA,EAAA,MAAA;AAAA,QACE0D,EAAA,MAAA,6BACE9D,EAAsF,OAAAg1B,IAAA;AAAA,UAAzErxB,EAAY,OAAIsxB,IAAA;AAAA,YAAE/0B,EAAAkgC,GAAmB;AAAA;cAClD,yBAAA;AAAA,8CACE,CAAA;AAAA,oBAAAzD,IAAA;AAAA,eAA+C58B,EAAK,EAAK,GAAAC,EAAAiE,IAAA,MAAAC,GAAAJ,EAAA,MAAA,YAAA,CAAAtC,GAAAX,OAAGd,EAAK,GAAEC,EAAA,MAAmB;AAAA;gBACpF,SAAA,CAAAgE,MAGMF,EAAA,oBAAAtC,CAAA;AAAA;;kBAhElB,OAAA4I,GAAA,CAAA,mBA8DwB,EACV,uBAAA5I,MAAAsC,EAAA,MAAA,OAAA,CAAA;AAAA,mBAAgB;AAAA,wBAAmEtC,CAAA,IAAA,KAAA,CAAA;AAAA,wBA/DjGsC,EAAA,MAAA,SA+DoD/D,EAAM,GAAAuE,GAAA+7B,GAA2B;AAAA;oBA/DrF,OAAA;AAAA,wBAAAn2B,GAAA,IAAA,EAAA;AAAA;;YAoEM,CAAA;AAAA;UAEIvG,EAAe,OAAAk5B,IAAA;AAAA,YACf38B,EAAMk1B,GAAmB;AAAA,cACxB,KAAA;AAAA;cAEA,SAAA;AAAA,0BACA;AAAA,cACA;AAAA,cACA,OAAAtxB,EAAA,MAAgB;AAAA;;;UA7E3B,CAAA;AAAA,cAAAoG,GAAA,IAAA,EAAA;AAAA;;;;;uFCmBAo2B,KAAe;AAAA,EACb,YAAY;AAAA,IACV,UAAUC,GAAA;AAAA,EAAS;AAAA,EAErB,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAEJ,GAnBStgC,KAAA,EAAA,OAAM,OAAA;;YATbH,EAYM,WAAA;;IAXJ,OAAAsK,GAIM,QAJN9J,EAIM,IAAA,CAAA;AAAA,EAAA,GAAA;AAAA,IAFkCqD,EAAA,OAAA1D,IAAA;AAAA,MAAAM,GAAAC,EAAA,QAAA,QAAA,CAAA,GAAA,MAAA;AAAA;MAGxC,GAAA,EAAA;AAAA,IAAA,CAAA;AAAA;MAGAD,GAAAC,EAAA,QAAA,WAEM,CAAA,GAAA,QAAA,EAAA;AAAA,IAAA,CAAA;AAAA;;;;;uFCmDVggC,KAAe;AAAA,EACb,YAAY;AAAA,IACV,YAAYC;AAAA,IACZ,YAAYC;AAAA,IACZ,YAAYz1B;AAAA,IACZ,WAAW+G;AAAA,EAAA;AAAA,EAEb,cAAc;AAAA,EACd,OAAO;AAAA,IACL,aAAa;AAAA,IACb,QAAQ;AAAA,IACR,UAAU;AAAA,MACR,MAAM,CAAC,OAAO,MAAM;AAAA,MACpB,SAAS,MAAM,CAAA;AAAA,IAAC;AAAA,IAElB,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,MAAM,CAAC,QAAQ,MAAM;AAAA,IACrB,SAAS;AAAA,EAAA;AAAA,EAEX,MAAMtR,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM89B,IAAcl7B,GAAI/E,EAAM,UAAU,GAClCkgC,IAAen7B,GAAI,EAAK,GACxBo7B,IAAYp7B,GAAS,IAAI,GACzBq7B,IAAWx9B,GAAc,EAAE,GAC3By9B,IAAat7B,GAAW,EAAE;AAEhC,IAAAkG,GAAY,MAAM;;AAEhB,UADAg1B,EAAY,QAAQjgC,EAAM,YACtBA,EAAM,cAAcA,EAAM,SAASA,EAAM,UAAU,GAAG;AACxD,cAAMsgC,IAAWtgC,EAAM,SAASA,EAAM,UAAU,EAAEA,EAAM,WAAW,KAAK,IAClE6vB,IAAgB,CAAA,GAChBvuB,MAAOL,IAAAjB,KAAA,gBAAAA,EAAO,SAAP,gBAAAiB,EAAa,WAAU,CAAA;AAEpC,QAAAq/B,EAAS,QAAQ,cAAc,CAACC,GAAQ9tB,MAAQ;AAC9C,UAAIA,KACFod,EAAO,KAAK,EAAE,MAAMpd,GAAK,OAAOnR,EAAKmR,CAAG,KAAK,IAAI;AAAA,QAErD,CAAC,GACD4tB,EAAW,QAAQxQ;AAAA,MACrB;AAAA,IACF,CAAC;AAED,UAAM2Q,IAAe,CAACl+B,MAAe;AAGnC,MAFgB69B,EAAU,MAAM,MAAM,cAE9B,QAAQ,CAACr/B,MAAc;AAC7B,QAAAA,EAAK,MAAM,UAAUwB,IAAQxB,EAAK,MAAM,QAAQwB,CAAK,IAAI,KAAK;AAAA,MAChE,CAAC;AAAA,IACH,GAEMm+B,IAAa,CAAChuB,MAAgB;AAClC,YAAMnR,IAAOtB,EAAM,SAASyS,CAAG,KAAK,CAAA;AAEpC,MAAAtQ,EAAK,QAAQ,EAAE,GAAGb,GAAM,KAAAmR,GAAK;AAAA,IAC/B,GAEM,EAAE,aAAAikB,GAAa,cAAAC,EAAA,IAAiBpvB,GAAA;AAgCtC,WAAO;AAAA,MACL,WAAA44B;AAAA,MACA,cAAAD;AAAA,MACA,cAAAM;AAAA,MACA,YAAAC;AAAA,MACA,aAAAR;AAAA,MACA,YArCiB,MAAMtJ,EAAaD,EAAY,IAAI;AAAA,MAsCpD,aApCkB,MAAM;AACxB,QAAAgK,KAAe,WAAWN,GAAU,EAAI,GACxCj+B,EAAK,QAAQ,EAAE,GAAGi+B,GAAU,GAC5BF,EAAa,QAAQ;AAAA,MACvB;AAAA,MAiCE,YA/BiB,MAAM;AACvB,cAAMS,IAAU3gC,EAAM,SAASA,EAAM,UAAU;AAE/C,QAAAmC,EAAK,QAAQw+B,EAAQ3gC,EAAM,WAAW,CAAC,GACvCkgC,EAAa,QAAQ;AAAA,MACvB;AAAA,MA2BE,YAAAG;AAAA,MACA,cA1BmB,MAAM;AACzB,cAAMxQ,IAA8B,CAAA;AAEpC,QAAAwQ,EAAW,MAAM,QAAQ,CAAC,EAAE,MAAA7rB,GAAM,OAAAlS,QAAY;AAC5C,UAAAutB,EAAOrb,CAAI,IAAIlS;AAAA,QACjB,CAAC,GACDH,EAAK,QAAQ,EAAE,MAAMy+B,GAAe,MAAM,KAAKX,EAAY,OAAO,QAAApQ,GAAQ;AAAA,MAC5E;AAAA,MAoBE,UAAAuQ;AAAA,MACA,gBAnBqB,MAAM;AAC3B,eAAO,KAAKA,CAAQ,EAAE,QAAQ,CAAC3tB,MAAQ,OAAO2tB,EAAS3tB,CAAG,CAAC,GAC3D2tB,EAAS,MAAM,aAAar8B,GAAM,KAAA,GAClCq8B,EAAS,OAAOQ,GAAe,MAC/BV,EAAa,QAAQ;AAAA,MACvB;AAAA,IAcE;AAAA,EAEJ;AACF,GAxKUpR,KAAC,CAAAzZ,OAAiB0Z,GAAA,iBAAA,GAAA1Z,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z,IAAC9V,KAAM;AAAA,EAAA,KAAA;AAAA;GAmBCyD,KAAM;AAAA,EAAA,KAAA;AAAA;GAW9BS,KAAAqrB,gBAAAA,GAAA,MAAA7rB,gBAAAA,EAAsB,gBAAhB,QAAA,GAAS,WAAA,EAAA,CAAA,GAKIU,KAAA,EAAA,OAAM,iBAAA,QAElBmrB,gBAAAA,GAAY,MAAA7rB,gBAAAA,EAAA,QAAA,MAAA,aAAA,EAAA,CAAA,qCAtC/B8G,KAAA,EAAA,OAAA,aAAA,QAgDiB+kB,gBAAAA,GAAgB,MAAA7rB,gBAAAA,EAAA,SAAA,MAAA,OAAA,EAAA,CAAA;;6EA/C/B7D,EAAA,aAoDM;SAlDFC,EAAA,GAgBcC,EAAA,OAAAC,IAAA;AAAA,IAAAmxB,GAfRztB,EAAW,OAAA,MAAA;AAAA,MAAAzD,EAJvBqhC,GAK4B;AAAA,QAL5B,KAAA;AAAA,QAMQ,YAAWz9B,EAAC;AAAA,QACZ,uBAAUC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,cAAAE;AAAA,QACV,aAAA;AAAA,QACC,YAAA;AAAA,QACA,yBAAQ;AAAA,QAAA,iBAAAF,EAAA;AAAA,QAVjB,UAAAA,EAAA;AAAA,MAAA,GAAA;AAAA;WAcgB/D,EAAA,EAAK,GAAGC,EAAAiE,IAAA,MAAAC,GAAA5D,EAAA,UAAA,CAAAkB,OACRzB,EAAA,MAAqByhC,GAAc;AAAA,YACxC,KAAKhgC,EAAE;AAAA,YAAA,OAAA,GAAAA,EAAAlB,EAAA,WAAA,CAAA,KAAAkB,EAAA,GAAA;AAAA;0CAhBlB,GAAA,GAAA;AAAA,QAAA,CAAA;AAAA,QAoBiB,GAAA;AAAA,MAAA,GAAA,GAAA,CAAA,cAAX,iBAAA,UAAA,CAAA;AAAA,MAAAsC,EACE,WAAgC,iBAChC,OAGMJ,IAAA;AAAA,QAAAS;AAAAA,SAHiCpE,EAAA,EAAM,GAAIC,EAAAiE,IAAA,MAAAC,GAAAJ,EAAA,YAAA,CAAA29B,OAAO1hC,EAAA,GAAcC,EAAA,OAAA;AAAA,UAAA,KAAAyhC,EAAA;AAAA,UACpE,OAAA;AAAA,QAAA,GACA;AAAA,UAAA99B,EAA2B,SAAK,MAAAC,GAAA69B,EAAA,IAAA,GAAA,CAAA;AAAA,UAAAvhC,EAxB1CoS,GAAA;AAAA,YAAA,YAAAmvB,EAAA;AAAA;;WAAA,GAAA,GAAA;AAAA,MAAA,CA2BM,KACEv3B,GAKM,IAAA,EALN;AAAA,MAAA3J,GACqBC,EAAA,QAAM,UAAA,CAAA,GAAA,MAAA;AAAA,QAAAmD,EAAA,OAAzBU,IAAiE;AAAA,UAAA/D,EA7B3E,eA6B6CgE,GAAU4H,GAAA;AAAA,YAAA,KAAA;AAAA,YA7BvD,SAAApI,EAAA;AAAA,UAAA,GAAA;AAAA;cAAAvB,GAAA,MAAA;AAAA,YAAA,CAAA;AAAA,YAAA,GAAA;AAAA,UAAA,GA8BU,GAAA,CAAA,SAEc,MAFD2H,GAAc,IAAA,EAAA;AAAA,UAAAhK,EAASgM,GAAc;AAAA,YAAA,MAAA;AAAA,YA9B5D,SAAApI,EAAA;AAAA,UAAA,GAAA;AAAA;cAAAiG;AAAAA,YAAA,CAAA;AAAA;;;;;MAoCI,CAAAQ,IAAA,CAAAzG,EAAA,YAAA;AAAA,IAAA,CAAA;AAAA,OAEIH,EAAA,OAGMqG,IAAA;AAAA,MAAArG,EAFc,OAAA,MAAA;AAAA,QAAAA,EAClB,OAAA8G,IAA0D;AAAA,UAAAC;AAAA,aAAtB/G,EAAmB,SAAA;AAAA,YAAA,uBAAAI,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,SAAA,MAAAE;AAAA;;;;;SAGpBjE,EAAA,EAAO,GAAAC,EAAIiE,IAAA,MAAAC,GAAA5D,EAAA,SAAA,CAAA+E,OAAOtF,EAAA,GAAaC,EAAA,OAAA;AAAA,UAAA,KAAAqF,EAAA;AAAA,UAClE,OAAA;AAAA,QAAA,GAAA;AAAA,UA5CV1B,EAAA,SAAA,MAAAC,GA6CkCyB,EAAO,KAAK,GAAA,CAAA;AAAA,UAAA+rB,GAASztB,EAAmB,SAAA;AAAA,YAAA,uBA7C1E,CAAAK,MAAAF,EAAA,SAAAuB,EAAA,IAAA,IAAArB;AAAA,YAAA,OAAA;AAAA;;;WAgDM,GAAA,GAAA;AAAA,MAAA,CAAA;AAAA,QAhDN,OAiD8CixB,IAAA;AAAA,QAAA/0B,EAjD9CgM,GAiD8C,EAAA,SAAApI,EAAA,WAAA,GAAA;AAAA,UAAA,SAAA1D,EAAA,MAAA;AAAA,YAjD9CmC,GAAA,OAAA;AAAA,UAAA,CAAA;AAAA,UAkDQ,GAAA;AAAA,QAAA,GAAa,GAAI,UAAC,CAAS;AAAA,QAAArC,EAASgM,GAAW;AAAA,UAAA,MAAA;AAAA,UAlDvD,SAAApI,EAAA;AAAA,QAAA,GAAA;AAAA;YAAAvB,GAAA,OAAA;AAAA,UAAA,CAAA;AAAA;;;;;;;;uFCuFAm/B,KAAe;AAAA,EACb,YAAY;AAAA,IAAA,cACVC;AAAAA,IAAA,YACAtE;AAAAA,IAAA,eACAH;AAAAA,IAAA,UACA5D;AAAAA,IAAA,WACAxB;AAAAA,IAAA,cACAyB;AAAAA,IAAA,aACA5C;AAAAA,IACA,WAAA1C;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,IAEnB,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,OAAO,CAAC,kBAAkB,cAAc;AAAA,EACxC,MAAMvzB,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAM,EAAE,gBAAA++B,MAAmB90B,IACrB+0B,IAAYv+B,GAAS;AAAA,MACzB,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,YAAY;AAAA,IAAA,CACb,GAEKD,IAAQC,GAAS;AAAA,MACrB,gBAAgB;AAAA,MAChB,eAAe;AAAA,MACf,MAAM;AAAA,MACN,cAAc;AAAA,MACd,SAAS;AAAA,IAAA,CACV,GAEKw+B,IAAiBr8B,GAAI,IAAI,GAEzBs8B,IAAY;AAAA,MAChB,YAAY,CAAC,EAAE,UAAU,IAAM,SAAS,MAAM,SAAS,QAAQ;AAAA,MAC/D,SAAS;AAAA,QACP,EAAE,UAAU,IAAM,SAAS,MAAM,SAAS,OAAA;AAAA,QAC1C,EAAE,MAAM,WAAW,SAAS,mBAAmB,SAAS,OAAA;AAAA,MAAO;AAAA,IACjE,GAGIrO,IAASjuB,GAAI,IAAI,GACjBywB,IAAgB;AAAA,MACpB,UAAU;AAAA,MACV,aAAa;AAAA,MACb,SAAS;AAAA,QACP,SAAS;AAAA,MAAA;AAAA,IACX,GAGI8L,IAAiB,CAACpG,MAAe;AACrC,YAAMqG,IAAarG,EAAM,aAAa,CAAA;AAEtC,UAAIsG,IAAgB,SAChBC,IAAa;AACjB,aAAAF,EAAW,QAAQ,CAAC9H,MAA+D;AACjF,cAAMiI,IAAQ,IAAI,KAAKjI,EAAE,UAAU,EAAE,QAAA;AAErC,QAAIiI,IAAQD,MACVA,IAAaC,GACbF,IAAgB/H,EAAE;AAAA,MAEtB,CAAC,GAEM+H,EAAc,QAAQ,QAAQ,CAACG,MAAU,OAAOA,CAAK,IAAI,CAAC;AAAA,IACnE;AAEA,IAAA94B;AAAA,MACE,MAAM7I,EAAM;AAAA,MACZ,CAAC+W,MAAY;AACX,QAAKA,MAILoqB,EAAU,UAAUG,EAAethC,EAAM,KAAK;AAAA,MAChD;AAAA,IAAA;AAGF,UAAM4hC,IAAa,CAAC7qB,MAAqB5U,EAAK,kBAAkB4U,CAAO,GAEjE,EAAE,UAAA8qB,EAAA,IAAaz6B,GAAA,GAEf06B,IAAc,MAAM;;AACxB,YAAMC,IAAetL,GAAA,EAAW,gBAAA;AAChC,eAAOx1B,IAAAjB,EAAM,UAAN,gBAAAiB,EAAa,SAAO8gC,KAAA,gBAAAA,EAAc;AAAA,IAC3C,GAEMC,IAAc,YAAY;AAC9B,MAAAZ,EAAe,MAAM,SAAS,CAACa,MAAe;AAC5C,cAAM,EAAE,cAAAC,EAAA,IAAiBC,GAAWC,GAAS,WAAW;AAExD,YAAIH,GAAO;AACT,gBAAMpS,IAAS;AAAA,YACb,OAAO7vB,EAAM;AAAA,YACb,YAAY;AAAA,YACZ,aAAamhC,EAAU;AAAA,YACvB,SAASA,EAAU;AAAA,YACnB,YAAYA,EAAU;AAAA,UAAA;AAExB,UAAAe,EAAarS,CAAM,GACnB+R,EAAW,EAAK,GACZT,EAAU,cAAcW,OAC1BD,EAAS,EAAI,GAEfV,EAAU,aAAa,IACvBA,EAAU,UAAU,IACpBA,EAAU,aAAa;AAAA,QACzB;AAAA,MACF,CAAC;AAAA,IACH,GAEMkB,IAAgB,OAAO//B,MAAe;AAC1C,YAAMw1B,IAAMqK,GAAWC,GAAS,WAAW;AAE3C,UAAI9/B,GAAO;AACT,cAAM44B,IAAQl7B,EAAM,OACdsiC,IAAS,MAAMxK,EAAI,aAAaoD,KAAA,gBAAAA,EAAO,EAAE,GACzCqH,KAAcD,KAAA,gBAAAA,EAAQ,YAAW,CAAA;AACvC,QAAA3/B,EAAM,eAAe,KAAK,UAAU4/B,GAAa,MAAM,CAAC,GAExD5/B,EAAM,OAAO,KAAK,WAAUu4B,KAAA,gBAAAA,EAAO,YAAW,CAAA,GAAI,MAAM,CAAC,GACzDv4B,EAAM,iBAAiB;AAAA,MACzB;AAAA,IACF,GAEM6/B,IAAa,CAACC,MAAiB;AACnC,MAAI,OAAOA,KAAS,aAGpB9/B,EAAM,UAAU8/B;AAAA,IAClB,GAEMpR,IAAQ,MAAM;AAClB,MAAA1uB,EAAM,gBAAgB,IACtBA,EAAM,iBAAiB;AAAA,IACzB;AAmBA,WAAO;AAAA,MACL,WAAAw+B;AAAA,MACA,OAAAx+B;AAAA,MACA,gBAAAy+B;AAAA,MACA,WAAAC;AAAA,MACA,QAAArO;AAAA,MACA,eAAAwC;AAAA,MACA,YAAAoM;AAAA,MACA,eAAAS;AAAA,MACA,YAAAG;AAAA,MACA,OAAAnR;AAAA,MACA,MA5BW,MAAM;AACjB,YAAI,CAAC1uB,EAAM,SAAS;AAClB,UAAA0uB,EAAA;AACA;AAAA,QACF;AACA,YAAI;AACF,gBAAMqR,IAAY,KAAK,MAAM//B,EAAM,OAAO;AAC1C,UAAAR,EAAK,gBAAgB,EAAE,GAAGugC,GAAW,eAAexB,EAAe,OAAO,GAC1E7P,EAAA;AAAA,QACF,QAAc;AACZwN,UAAAA,GAAU;AAAA,YACR,MAAM;AAAA,YACN,SAAS;AAAA,UAAA,CACV;AAAA,QACH;AAAA,MACF;AAAA,MAcE,aAAAmD;AAAA,IAAA;AAAA,EAEJ;AACF;;uLAlMoB1S,IAAAlwB,EAAA,iBAAA;SAlEXC,EAAA,GAAOuE,GAAA0rB,GAAA;AAAA,IACZ,SAAM1vB,EAAO;AAAA,IACb,OAAA;AAAA,IACA,OAAA;AAAA,IACC,kBAAc;AAAA,IAAA,WAAA;AAAA,IAmCJ,oBAC0DwD,EAAA;AAAA,EAAA,GAAA;AAAA,IAAlD,QAAA1D,EAAC,MAAS;AAAA,MAAAF,EAASgM,GAAW;AAAA,QAAA,MAAA;AAAA,QA3CrD,SAAApI,EAAA;AAAA,MAAA,GAAA;AAAA;UAAAvB,GAAA,MAAA;AAAA,QAAA,CAAA;AAAA,QA4CM,GAAA;AAAA,MAAA,GAAc,GAAA,CAAA,SAAK,CAAA;AAAA,MAAArC,EAAAgM,GAAA;AAAA,QA5CzB,SAAAnI,EAAA,CAAA,MA4CgDA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,WAAA,EAAA;AAAA,MAAA,GAAA;AAAA;UA5ChDvB,GAAA,IAAA;AAAA,QAAA,CAAA;AAAA;MAAA,CAAA;AAAA,IAAA,CAAA;AAAA,IAUU,SAAAnC,EAAA,MAAA;AAAA,MAAAF,EACJiS,GAAqB;AAAA,QACrB,KAAA;AAAA,QACA,kBAAW;AAAA,QACV,eAAO;AAAA,QACP,eAAO;AAAA,QACR,OAAArO,EAAA;AAAA,QAAA,OAAAA,EAAA;AAAA,QAhBN,iBAAA;AAAA,MAAA,GAAA;AAAA,iBAkB2B1D,EAAM,MAAA;AAAA,UAAAF,EAAMmS,GAAS;AAAA,YAAA,OAAA;AAAA,YAlBhD,MAAA;AAAA,UAAA,GAAA;AAAA,qBAAAjS,EAmB6B,MAAA;AAAA,cAAAF,EAnB7BoS,GAAA;AAAA,gBAmBgD,YAAWxO,EAAC,UAAA;AAAA,gBAAA,uBAAAC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,UAAA,UAAAE;AAAA;cAnB5D,GAAA,MAAA,GAAA,CAAA,YAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAqBM,GAAA;AAAA,UAAA,CAAA;AAAA,YAAkCqO,GAAY;AAAA,YAAA,OAAA;AAAA,YArBpD,MAAA;AAAA,UAAA,GAAA;AAAA,qBAAAjS,EAsB6B,MAAA;AAAA,cAAAF,EAtB7BoS,GAAA;AAAA,gBAsBmD,YAAKxO,EAAU,UAAA;AAAA,gBAAC,uBAAYC,EAAa,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,UAAA,aAAAE;AAAA,gBAAA,MAAA;AAAA;cAtB5F,GAAA,MAAA,GAAA,CAAA,YAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YAwBM,GAAA;AAAA,UAAA,CAAA;AAAA,YAAkCqO,GAAY;AAAA,YAAC,OAAM;AAAA,YAAA,MAAA;AAAA,YAxB3D,OAAA;AAAA,UAAA,GAAA;AAAA,qBAAAjS,EAyBgC,MAAA;AAAA,cAAAF,EAzBhCmjC,GAAA;AAAA,gBAAA,YAAAv/B,EAAA,UAAA;AAAA,gBAAA,uBAyBiEC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,UAAA,aAAAE;AAAA,cAAA,GAAA;AAAA;kBAzBjEzB,GAAA,aAAA;AAAA,gBAAA,CAAA;AAAA;cAAA,GAAA,GAAA,CAAA,YAAA,CAAA;AAAA,YAAA,CAAA;AAAA,YA2BM,GAAA;AAAA,UAAA,CAAA;AAAA,YAAuC8P,GAAgB;AAAA,YAAA,OAAA;AAAA,YA3B7D,OAAA;AAAA,UAAA,GAAA;AAAA,qBA4B0BjS,EAAC,MAAA;AAAA,cAAAF,EAAsBgM,GAAM;AAAA,gBAAE,OAAK;AAAA,gBAAA,MAAA;AAAA,gBA5B9D,SAAApI,EAAA;AAAA,cAAA,GAAA;AAAA;kBAAAvB,GAAA,cAAA;AAAA,gBAAA,CAAA;AAAA,gBA6BQ,GAAA;AAAA,cAAA,GACE,GAAA,CAAA,SAAU,CAAA;AAAA,cAAArC,EACFmK,GAAO;AAAA,gBACf,WAAA;AAAA,gBACC,SAAO;AAAA,gBACR,kBAAQ;AAAA,gBAAA,OAAA;AAAA,gBAEG,SAAS;AAAA,cAAA,GAAA;AAAA;kBApC9BnK,EAAAsK,GAAA,EAAA,MAAA,0BAAA,CAAA;AAAA,gBAAA,CAAA;AAAA;cAAA,CAAA;AAAA,YAAA,CAAA;AAAA;UAAA,CAAA;AAAA,QAAA,CAAA;AAAA,QA8CI,GAAA;AAAA,MAAA,GACU,GAAA,CAAA,SAAS,OAAK,CAAC;AAAA,MAAAtK,EA/C7B8vB,GAAA;AAAA,QAgDM,SAAMlsB,EAAA,MAAY;AAAA,QACjB,oBAAYC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,MAAA,iBAAAE;AAAA,QACZ,OAAA;AAAA,QACA,OAAA;AAAA,QACD,YAAM;AAAA,QAAA,kBAAA;AAAA,QAYK,OAAM;AAAA,MAAA,GAAA;AAAA,QACE,QAAA5D,EAAC,MAAS;AAAA,UAAAF,EAASgM,GAAI;AAAA,YAAA,MAAA;AAAA,YAjEhD,SAAApI,EAAA;AAAA,UAAA,GAAA;AAAA;cAAAvB,GAAA,IAAA;AAAA,YAAA,CAAA;AAAA,YAkEQ,GAAA;AAAA,UAAA,GAlER,GAAA,CAAA,SAAA,CAAA;AAAA,UAAArC,EAAAgM,GAkEsC,EAAA,SAAApI,EAAA,MAAA,GAAA;AAAA,YAAA,SAAA1D,EAAA,MAAA;AAAA,cAlEtCmC,GAAA,IAAA;AAAA,YAAA,CAAA;AAAA;UAAA,GAAA,GAAA,CAAA,SAsDM,CASc;AAAA,QAAA,CAAA;AAAA,QATd,SAAAnC,EAAA,MAAA;AAAA,UAAA0D,EAtDN,6BAwDoBQ,GAAAg/B,GAAA;AAAA,YACZ,KAAK;AAAA,YACJ,KAAA;AAAA,YACA,OAAO;AAAA,YACP,YAAO;AAAA,YACP,SAAQx/B,EAAE;AAAA,YACV,OAAAA,EAAQ,MAAA;AAAA,YAAA,UAAAA,EAAA,MAAA;AAAA,YA9DjB,UAAAA,EAAA;AAAA,UAAA,GAAA,MAAA,GAAA,CAAA,WAAA,SAAA,YAAA,UAAA,CAAA,KAAAoG,GAAA,IAAA,EAAA;AAAA,QAAA,CAAA;AAAA;MAAA,GAAA,GAAA,CAAA,SAAA,CAAA;AAAA,IAAA,CAAA;AAAA;;;gGCESjK,KAAA,EAAA,OAAM,UAAK,GACTyD,KAAA,EAAA,OAAM,MAAA,GAGNS,KAAA,EAAA,OAAM,QAAA,8BAIL4F,KAAS;AAAA,EAAC,IAAA;AAAA;AAGb;AAZP,SAAAa,GAAApK,GAAAuD,GAAA;AACE,SAAAhE,EAAA,GAOMC,EAAA,OAAAC,IAAA;AAAA,IANJ0D,EAAA,WAEM;AAAA,QADsB,OAAAQ,IAAA;AAAA;MAE5B,CAAA;AAAA,QAC8B,OAAAE,IAAA;AAAA;;IAGhC,CAAA;AAAA,MAC4B,OAAA0F,IAAA;AAAA;IAE5B,CAAA;AAAA,MAC6B,OAAAC,IAAA;AAAA;;;;uFCX5BuF,KAAU;AAAA,EACb,MAAM;AAAA,EAEN,UAAU;AACR,WAAO;AAAA,MACL,aAAa,KAAK;AAAA,MAClB,WAAW,KAAK;AAAA,MAChB,eAAe,KAAK;AAAA,MACpB,cAAc,KAAK;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,OAAO;AAAA,IACL,YAAY,EAAE,MAAM,QAAM;AAAA,IAC1B,gBAAgB,EAAE,MAAM,SAAS,SAAS;IAC1C,kBAAkB,EAAE,MAAM,SAAS,SAAS;IAC5C,KAAK,EAAE,MAAM,SAAS,SAAS;IAC/B,eAAe,EAAE,MAAM,QAAM;AAAA;EAE/B,OAAO,CAAC,SAAS,UAAU,WAAW,cAAc,iBAAiB,YAAY,eAAe,gBAAgB;AAAA,EAEhH,MAAM,OAAO;AAAA,IACX,OAAO;AAAA,IACP,WAAW;AAAA,IACX,OAAO;AAAA,MACL,UAAU;AAAA,MACV,gBAAgB;AAAA,MAChB,WAAW;AAAA;IAEb,OAAO,CAAA;AAAA,IACP,qBAAqB;AAAA,MACnB,WAAW;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,UAAU;AAAA,IACR,eAAe;AACb,aAAO,KAAK,MAAM,OAAO,CAAC4B,GAAKoyB,OAC7BpyB,EAAIoyB,EAAK,EAAE,IAAIA,GACRpyB,IACN,CAAA,CAAE;AAAA,IACP;AAAA,IACA,aAAa;AACX,aAAO,KAAK,MAAM;AAAA,IACpB;AAAA;EAGF,OAAO;AAAA,IACL,aAAa;AACX,WAAK,4BAA2B;AAAA,IAClC;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,MACN,WAAW;AAAA,MACX,UAAU;AACR,aAAK,4BAA2B;AAAA,MAClC;AAAA;IAEF,gBAAgB;AACd,WAAK,qBAAoB;AAAA,IAC3B;AAAA,IACA,iBAAiBqyB,GAAQ;AAEvB,MADkB,CAAC,GAAG,KAAK,UAAU,iBAAiB,+BAA+B,CAAC,EAC5E,QAAQ,CAAChiC,GAAMmH,MAAM;AAC7B,QAAAnH,EAAK,aAAagiC,IAAS,CAAC14B,MAAU,KAAK,mBAAmBA,GAAOnC,CAAC,IAAI;AAAA,MAC5E,CAAC;AAAA,IACH;AAAA;EAEF,UAAU;AACR,SAAK,YAAY,KAAK,MAAM,WAC5B,KAAK,4BAA2B,GAChC,KAAK,qBAAoB,GACzB,KAAK,sBAAqB,GAC1B,KAAK,MAAM,OAAO,GAClB,KAAK,QAAQ;AAAA,EACf;AAAA,EACA,gBAAgB;AACd,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS;AAAA,IACP,8BAA8B;AAC5B,WAAK,MAAM,QAAQ,CAACnH,MAAS;AAC3B,QAAIA,EAAK,UACPA,EAAK,OAAO;AAAA,UACV,CAAC,KAAK,aAAa,WAAW,OAAO,GAAG,GAAG,KAAK,aAAaA,EAAK,EAAE,EAAE,IAAI;AAAA,SAC3E;AAAA,MAEL,CAAC;AAAA,IACH;AAAA,IACA,aAAa;AACX,eAAS,iBAAiB,aAAa,KAAK,oBAAoB,EAAE,SAAS,IAAO,GAClF,SAAS,iBAAiB,WAAW,KAAK,gBAAgB;AAAA,IAC5D;AAAA,IACA,eAAe;AACb,eAAS,oBAAoB,aAAa,KAAK,oBAAoB,EAAE,SAAS,IAAO,GACrF,SAAS,oBAAoB,WAAW,KAAK,gBAAgB;AAAA,IAC/D;AAAA,IACA,YAAYsJ,GAAO24B,GAAsB;AACvC,WAAK,WAAU,GACf,KAAK,MAAM,YAAY,IACvB,KAAK,MAAM,iBAAiBA;AAAA,IAC9B;AAAA,IAEA,mBAAmB34B,GAAO;AACxB,MAAI,KAAK,MAAM,cACbA,EAAM,eAAc,GACpB,KAAK,MAAM,WAAW,IACtB,KAAK,mBAAmB,KAAK,oBAAoBA,CAAK,CAAC,GACvD,KAAK;AAAA,QACH;AAAA,QACA,KAAK,MAAM,IAAI,CAACy4B,OAAU,EAAE,KAAKA,EAAK,KAAK,KAAKA,EAAK,KAAK,MAAMA,EAAK,KAAG,EAAI;AAAA,MAC9E;AAAA,IAEJ;AAAA,IAEA,mBAAmB;AACjB,MAAI,KAAK,MAAM,YACb,KAAK;AAAA,QACH;AAAA,QACA,KAAK,MAAM,IAAI,CAACA,OAAU,EAAE,KAAKA,EAAK,KAAK,KAAKA,EAAK,KAAK,MAAMA,EAAK,KAAG,EAAI;AAAA,MAC9E,GAEF,KAAK,MAAM,YAAY,IACvB,WAAW,MAAM;AACf,aAAK,MAAM,WAAW,IACtB,KAAK,aAAY;AAAA,MACnB,GAAG,GAAG;AAAA,IACR;AAAA,IACA,gBAAgBz4B,GAAO24B,GAAsB;AAC3C,MAAI,kBAAkB,WACpB34B,EAAM,eAAc,GAChB,KAAK,qBACH,KAAK,oBAAoB,aAAa24B,KACxC,aAAa,KAAK,oBAAoB,SAAS,GAC/C,KAAK,oBAAoB,YAAY,MACrC,KAAK,mBAAmB34B,GAAO24B,CAAoB,GACnD,KAAK,oBAAoB,WAAW,SAEpC,KAAK,oBAAoB,WAAWA,GACpC,KAAK,oBAAoB,YAAY,WAAW,MAAM;AACpD,aAAK,oBAAoB,WAAW;AAAA,MACtC,GAAG,GAAG,MAKP,KAAK,MAAM,YAAU,KAAK,MAAM,kBAAkB,KAAK,MAAMA,CAAoB,CAAC;AAAA,IACzF;AAAA,IACA,mBAAmB34B,GAAO24B,GAAsB;AAC9C,UAAIC,IAAgB;AACpB,WAAK,QAAQ,KAAK,MAAM,IAAI,CAACH,GAAM56B,OACjC46B,EAAK,OAAO56B,MAAM86B,IAAuBF,EAAK,MAAMA,EAAK,KACrD56B,MAAM86B,MAAsBC,KAAiBH,EAAK,MAE/CA,EACR,GACD,KAAK,MAAME,CAAoB,EAAE,QAAQC,GACzC,KAAK,MAAM,iBAAiB,KAAK,MAAMD,CAAoB,CAAC;AAAA,IAC9D;AAAA,IAEA,YAAY34B,GAAO64B,GAAQ;AACzB,WAAK,MAAM,cAAc,KAAK,aAAaA,CAAM,CAAC;AAAA,IACpD;AAAA,IACA,oBAAoB74B,GAAO;AACzB,YAAM8V,IAAO,KAAK,UAAU,sBAAqB,GAC3C,EAAE,SAAAgjB,GAAS,SAAAC,EAAM,IAAM,kBAAkB,UAAU/4B,EAAM,UAAUA,EAAM,QAAQ,CAAC,IAAIA;AAE5F,aAAO;AAAA,QACL,GAAG84B,IAAUhjB,EAAK;AAAA,QAClB,GAAGijB,IAAUjjB,EAAK;AAAA,MACpB;AAAA,IACF;AAAA,IACA,yBAAyBkjB,GAAM;;AAC7B,MAAAA,IAAOA,EAAK,KAAK,aAAa,MAAM,GAAG;AACvC,YAAMC,MAAgBpiC,IAAA,KAAK,cAAL,gBAAAA,EAAiB,KAAK,aAAa,iBAAiB,mBAAkB;AAC5F,aAAI,KAAK,OAAO,CAAC,KAAK,eAAYmiC,IAAOC,IAAgBD,IAEjDA,IAAO,MAAOC;AAAA,IACxB;AAAA,IAEA,mBAAmBD,GAAM;AACvB,YAAML,IAAuB,KAAK,MAAM;AACxC,UAAIO,IAAO;AAAA,QACT,eAAe,KAAK,wBAAwBP,CAAoB;AAAA,QAChE,eAAe,KAAK,wBAAwBA,CAAoB;AAAA,QAChE,4BAA4B;AAAA,QAC5B,4BAA4B;AAAA,MAC9B;AAEA,YAAMQ,IAAiB,KAAK,KAAK,iBAAiB,IAAID,EAAK,gBACrDE,IAAiB,OAAO,KAAK,iBAAiB,IAAIF,EAAK,gBACvDG,IAAwB,KAAK;AAAA,QACjC,KAAK,IAAI,KAAK,yBAAyBL,CAAI,GAAGI,CAAc;AAAA,QAC5DD;AAAA,MACF;AACA,UAAIG,IAAuB,CAACX,GAAsBA,IAAuB,CAAC,GACtEY,IAAoB,KAAK,MAAMD,EAAqB,CAAC,CAAC,KAAK,MAC3DE,IAAmB,KAAK,MAAMF,EAAqB,CAAC,CAAC,KAAK;AAE9D,YAAMG,IACJF,EAAkB,MAAM,OAAOF,KAAyBE,EAAkB,MAAML,EAAK,eACjFQ,IACJF,EAAiB,MAAM,OACvBH,KAAyB,OAAOG,EAAiB,MAAM,KAAK,wBAAwBb,IAAuB,CAAC;AAC9G,UAAIc,KAA+BC,GAA4B;AAC7D,QAAID,KACFF,EAAkB,OAAOA,EAAkB,KAC3CC,EAAiB,OAAO,KAAK,IAAI,MAAMD,EAAkB,MAAML,EAAK,gBAAgBA,EAAK,eAAe,CAAC,MAEzGK,EAAkB,OAAO,KAAK;AAAA,UAC5B,MAAMC,EAAiB,MAAMN,EAAK,gBAAgB,KAAK,wBAAwBP,IAAuB,CAAC;AAAA,UACvG;AAAA,QACF,GACAa,EAAiB,OAAOA,EAAiB;AAE3C;AAAA,MACF;AACA,UAAI,KAAK,gBAAgB;AACvB,cAAMG,IAAO,KAAK,iBAAiBT,GAAMG,CAAqB;AAC9D,YAAI,CAACM,EAAM;AACV,SAAC,EAAE,MAAAT,GAAM,sBAAAI,EAAmB,IAAMK,IACnCJ,IAAoB,KAAK,MAAMD,EAAqB,CAAC,CAAC,KAAK,MAC3DE,IAAmB,KAAK,MAAMF,EAAqB,CAAC,CAAC,KAAK;AAAA,MAC5D;AAEA,MAAIC,MAAsB,SACxBA,EAAkB,OAAO,KAAK;AAAA,QAC5B,KAAK,IAAIF,IAAwBH,EAAK,gBAAgBA,EAAK,4BAA4BK,EAAkB,GAAG;AAAA,QAC5GA,EAAkB;AAAA,MACpB,IAEEC,MAAqB,SACvBA,EAAiB,OAAO,KAAK;AAAA,QAC3B,KAAK;AAAA,UACH,MAAMH,IAAwBH,EAAK,gBAAgBA,EAAK;AAAA,UACxDM,EAAiB;AAAA;QAEnBA,EAAiB;AAAA,MACnB;AAAA,IAEJ;AAAA,IAEA,iBAAiBN,GAAMG,GAAuB;AAC5C,YAAMV,IAAuB,KAAK,MAAM,gBAClCW,IAAuB,CAACX,GAAsBA,IAAuB,CAAC;AAC5E,aAAIU,IAAwBH,EAAK,gBAAgB,KAAK,MAAMI,EAAqB,CAAC,CAAC,EAAE,QACnFA,EAAqB,CAAC,IAAI,KAAK,qBAAqBX,CAAoB,EAAE,OAE1EO,EAAK,6BAA6B,GAC9BI,EAAqB,CAAC,IAAIX,KAC5B,KAAK,MAAM,QAAQ,CAACF,GAAM56B,MAAM;AAC9B,QAAIA,IAAIy7B,EAAqB,CAAC,KAAKz7B,KAAK86B,MACtCF,EAAK,OAAOA,EAAK,KACjBS,EAAK,8BAA8BT,EAAK;AAAA,MAE5C,CAAC,GAEHS,EAAK,gBAAgB,KAAK,wBAAwBI,EAAqB,CAAC,CAAC,GACrEA,EAAqB,CAAC,MAAM,WAC9BJ,EAAK,6BAA6B,GAClC,KAAK,MAAM,CAAC,EAAE,OAAO,KAAK,MAAM,CAAC,EAAE,KACnC,KAAK,MAAM,QAAQ,CAACT,GAAM56B,MAAM;AAC9B,QAAIA,IAAI,KAAKA,KAAK86B,MAChBF,EAAK,OAAOA,EAAK,KACjBS,EAAK,8BAA8BT,EAAK;AAAA,MAE5C,CAAC,GACD,KAAK,MAAMa,EAAqB,CAAC,CAAC,EAAE,OAClC,MAAMJ,EAAK,6BAA6B,KAAK,MAAM,CAAC,EAAE,MAAMA,EAAK,gBAAgBA,EAAK,eACjF,QAGPG,IAAwB,MAAMH,EAAK,gBAAgB,KAAK,MAAMI,EAAqB,CAAC,CAAC,EAAE,QACzFA,EAAqB,CAAC,IAAI,KAAK,qBAAqBX,CAAoB,EAAE,OAC1EO,EAAK,6BAA6B,GAC9BI,EAAqB,CAAC,IAAIX,IAAuB,KACnD,KAAK,MAAM,QAAQ,CAACF,GAAM56B,MAAM;AAC9B,QAAIA,IAAI86B,KAAwB96B,IAAIy7B,EAAqB,CAAC,MACxDb,EAAK,OAAOA,EAAK,KACjBS,EAAK,8BAA8BT,EAAK;AAAA,MAE5C,CAAC,GAEHS,EAAK,gBAAgB,KAAK,wBAAwBI,EAAqB,CAAC,IAAI,CAAC,GACzEA,EAAqB,CAAC,MAAM,WAC9BJ,EAAK,6BAA6B,GAClC,KAAK,MAAM,KAAK,aAAa,CAAC,EAAE,OAAO,KAAK,MAAM,KAAK,aAAa,CAAC,EAAE,KACvE,KAAK,MAAM,QAAQ,CAACT,GAAM56B,MAAM;AAC9B,QAAIA,IAAI,KAAK,aAAa,KAAKA,KAAK86B,IAAuB,MACzDF,EAAK,OAAOA,EAAK,KACjBS,EAAK,8BAA8BT,EAAK;AAAA,MAE5C,CAAC,GACD,KAAK,MAAMa,EAAqB,CAAC,CAAC,EAAE,OAClC,MACAJ,EAAK,gBACLA,EAAK,6BACL,KAAK,MAAM,KAAK,aAAa,CAAC,EAAE,MAChCA,EAAK,eACA,QAGJ,EAAE,MAAAA,GAAM,sBAAAI,EAAmB;AAAA,IACpC;AAAA,IACA,wBAAwBX,GAAsB;AAC5C,aAAO,KAAK,MAAM,OAAO,CAACiB,GAAOnB,GAAM56B,MAAM+7B,KAAS/7B,IAAI86B,IAAuBF,EAAK,OAAO,IAAI,CAAC;AAAA,IACpG;AAAA,IACA,wBAAwBE,GAAsB;AAC5C,aAAO,KAAK,MAAM,OAAO,CAACiB,GAAOnB,GAAM56B,MAAM+7B,KAAS/7B,IAAI86B,IAAuB,IAAIF,EAAK,OAAO,IAAI,CAAC;AAAA,IACxG;AAAA,IACA,qBAAqBE,GAAsB;AAEzC,aADa,CAAC,GAAG,KAAK,KAAK,EAAE,QAAO,EAAG,KAAK,CAACloB,MAAMA,EAAE,QAAQkoB,KAAwBloB,EAAE,OAAOA,EAAE,GAAG,KACpF,CAAA;AAAA,IACjB;AAAA,IACA,qBAAqBkoB,GAAsB;AAEzC,aADa,KAAK,MAAM,KAAK,CAACloB,MAAMA,EAAE,QAAQkoB,IAAuB,KAAKloB,EAAE,OAAOA,EAAE,GAAG,KACzE,CAAA;AAAA,IACjB;AAAA,IACA,8BAA8B;AAE5B,MADiB,MAAM,KAAK,KAAK,UAAU,QAAQ,EAC1C,QAAQ,CAACtB,MAAU;AAC1B,cAAM0qB,IAAS1qB,EAAM,UAAU,SAAS,kBAAkB,GACpD2qB,IAAa3qB,EAAM,UAAU,SAAS,8BAA8B;AAC1E,YAAI,CAAC0qB,KAAU,CAACC,GAAY;AAC1B,UAAA3qB,EAAM,WAAW,YAAYA,CAAK;AAClC;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IAEA,YAAY4qB,GAAWC,GAAcC,IAAc,IAAO;AACxD,YAAMtB,IAAuBoB,IAAY,GACnCG,IAAM,SAAS,cAAc,KAAK;AACxC,MAAAA,EAAI,UAAU,IAAI,8BAA8B,GAE3CD,MACHC,EAAI,cAAc,CAACl6B,MAAU,KAAK,YAAYA,GAAO24B,CAAoB,GAErE,OAAO,SAAW,OAAe,kBAAkB,WACrDuB,EAAI,eAAe,CAACl6B,MAAU,KAAK,YAAYA,GAAO24B,CAAoB,IAE5EuB,EAAI,UAAU,CAACl6B,MAAU,KAAK,gBAAgBA,GAAO24B,IAAuB,CAAC,IAG3E,KAAK,qBACPuB,EAAI,aAAa,CAACl6B,MAAU,KAAK,mBAAmBA,GAAO24B,IAAuB,CAAC,IAGrFqB,EAAa,WAAW,aAAaE,GAAKF,CAAY;AAAA,IACxD;AAAA,IAEA,eAAe1zB,GAAM;AACnB,MAAAA,EAAK,cAAc,QACnBA,EAAK,UAAU,QACfA,EAAK,aAAa,QAClBA,EAAK,WAAW,YAAYA,CAAI;AAAA,IAClC;AAAA,IAEA,uBAAuB;AACrB,YAAM2G,IAAW,MAAM,KAAK,KAAK,UAAU,QAAQ;AACnD,MAAAA,EAAS,QAAQ,CAACxD,MAAO;AACvB,QAAIA,EAAG,UAAU,SAAS,8BAA8B,KAAG,KAAK,eAAeA,CAAE;AAAA,MACnF,CAAC;AACD,UAAIswB,IAAY;AAChB,MAAA9sB,EAAS,QAAQ,CAACxD,MAAO;AACvB,QAAIA,EAAG,UAAU,SAAS,kBAAkB,MACtC,CAACswB,KAAa,KAAK,gBAAe,KAAK,YAAYA,GAAWtwB,GAAI,EAAI,IACjEswB,KAAW,KAAK,YAAYA,GAAWtwB,CAAE,GAClDswB;AAAA,MAEJ,CAAC;AAAA,IACH;AAAA,IACA,cAAc,EAAE,QAAA5xB,GAAQ,GAAG9G,KAAQ;AACjC,YAAMo3B,IAAO,KAAK,aAAatwB,EAAO,EAAE,GAAG;AAC3C,aAAO,QAAQ9G,CAAI,EAAE,QAAQ,CAAC,CAACgH,GAAKnQ,CAAK,MAAM;AAC7C,QAAAugC,EAAKpwB,CAAG,IAAInQ;AAAA,MACd,CAAC;AAAA,IACH;AAAA,IAEA,UAAUugC,GAAM;AACd,UAAI1iC,IAAQ;AACZ,YAAM,KAAK0iC,EAAK,IAAI,WAAW,QAAQ,EAAE,KAAK,CAAChvB,OACzCA,EAAG,UAAU,SAAS,kBAAkB,KAAG1T,KACxC0T,MAAOgvB,EAAK,IACpB;AAED,YAAM0B,IAAM,WAAW1B,EAAK,OAAO,GAC7B2B,IAAM,WAAW3B,EAAK,OAAO;AACnC,WAAK,MAAM,OAAO1iC,GAAO,GAAG;AAAA,QAC1B,OAAAA;AAAA,QACA,IAAI0iC,EAAK,EAAE;AAAA,QACX,KAAK,MAAM2B,CAAG,IAAI,MAAMA;AAAA,QACxB,KAAK,MAAMD,CAAG,IAAI,IAAIA;AAAA,QACtB,WAAW1B,EAAK;AAAA,QAChB,MAAMA,EAAK,SAAS,OAAO,OAAO,WAAWA,EAAK,IAAI;AAAA,QACtD,QAAQA,EAAK;AAAA,OACd,GAED,KAAK,MAAM,QAAQ,CAAChoB,GAAG5S,MAAM;AAC3B,QAAA4S,EAAE,QAAQ5S;AAAA,MACZ,CAAC,GAEG,KAAK,SACP,KAAK,UAAU,MAAM;AACnB,aAAK,qBAAoB,GACzB,KAAK,sBAAsB,EAAE,WAAW,KAAK,MAAM9H,CAAK,EAAA,CAAG,GAC3D,KAAK,MAAM,YAAY;AAAA,UACrB,OAAAA;AAAA,UACA,OAAO,KAAK,MAAM,IAAI,CAAC0iC,OAAU,EAAE,KAAKA,EAAK,KAAK,KAAKA,EAAK,KAAK,MAAMA,EAAK,OAAO;AAAA,SACpF;AAAA,MACH,CAAC;AAAA,IAEL;AAAA,IAEA,aAAaA,GAAM;AACjB,YAAM1iC,IAAQ,KAAK,MAAM,UAAU,CAAC0a,MAAMA,EAAE,OAAOgoB,EAAK,EAAE,GAAG,GACvD1W,IAAU,KAAK,MAAM,OAAOhsB,GAAO,CAAC,EAAE,CAAC;AAC7C,WAAK,MAAM,QAAQ,CAAC0a,GAAG5S,MAAM;AAC3B,QAAA4S,EAAE,QAAQ5S;AAAA,MACZ,CAAC,GAED,KAAK,UAAU,MAAM;AACnB,aAAK,qBAAoB,GAEzB,KAAK,sBAAsB,EAAE,aAAa,EAAE,GAAGkkB,GAAS,OAAAhsB,IAAM,CAAG,GAEjE,KAAK,MAAM,eAAe;AAAA,UACxB,SAAAgsB;AAAA,UACA,OAAO,KAAK,MAAM,IAAI,CAAC0W,OAAU,EAAE,KAAKA,EAAK,KAAK,KAAKA,EAAK,KAAK,MAAMA,EAAK,OAAO;AAAA,SACpF;AAAA,MACH,CAAC;AAAA,IACH;AAAA,IAEA,sBAAsB4B,IAAe,IAAI;AACvC,MAAI,CAACA,EAAa,aAAa,CAACA,EAAa,cAAa,KAAK,mBAAkB,IACxE,KAAK,MAAM,KAAK,CAAC5B,MAASA,EAAK,cAAc,QAAQA,EAAK,OAAOA,EAAK,MAAM,GAAG,IACtF,KAAK,yBAAyB4B,CAAY,IACvC,KAAK,SAAQ,GAEd,KAAK,SACP,KAAK;AAAA,QACH;AAAA,QACA,KAAK,MAAM,IAAI,CAAC5B,OAAU,EAAE,KAAKA,EAAK,KAAK,KAAKA,EAAK,KAAK,MAAMA,EAAK,KAAG,EAAI;AAAA,MAC9E;AAAA,IACJ;AAAA,IAEA,WAAW;AACT,YAAM6B,IAAa,MAAM,KAAK;AAC9B,UAAIC,IAAwB;AAC5B,YAAMC,IAAoB,CAAA,GACpBC,IAAsB,CAAA;AAE5B,WAAK,MAAM,QAAQ,CAAChC,MAAS;AAC3B,QAAAA,EAAK,OAAO,KAAK,IAAI,KAAK,IAAI6B,GAAY7B,EAAK,GAAG,GAAGA,EAAK,GAAG,GAE7D8B,KAAyB9B,EAAK,MAC1BA,EAAK,QAAQA,EAAK,OAAK+B,EAAkB,KAAK/B,EAAK,EAAE,GACrDA,EAAK,QAAQA,EAAK,OAAKgC,EAAoB,KAAKhC,EAAK,EAAE;AAAA,MAC7D,CAAC,GAEG8B,IAAwB,OAAK,KAAK,cAAcA,GAAuBC,GAAmBC,CAAmB;AAAA,IACnH;AAAA,IAEA,qBAAqB;AACnB,UAAIF,IAAwB;AAC5B,YAAMC,IAAoB,CAAA,GACpBC,IAAsB,CAAA;AAC5B,UAAIC,IAAe;AACnB,WAAK,MAAM,QAAQ,CAACjC,MAAS;AAC3B,QAAA8B,KAAyB9B,EAAK,MAC1BA,EAAK,SAAS,QAAMiC,KACpBjC,EAAK,QAAQA,EAAK,OAAK+B,EAAkB,KAAK/B,EAAK,EAAE,GACrDA,EAAK,QAAQA,EAAK,OAAKgC,EAAoB,KAAKhC,EAAK,EAAE;AAAA,MAC7D,CAAC;AAED,UAAIkC,IAAyB;AAC7B,MAAIJ,IAAwB,QAC1B,KAAK,MAAM,QAAQ,CAAC9B,MAAS;AAC3B,QAAIA,EAAK,SAAS,SAChBA,EAAK,OAAO,KAAK,IAAI,KAAK,IAAI8B,KAAyB,KAAK,aAAaG,IAAejC,EAAK,GAAG,GAAGA,EAAK,GAAG,IAE7GkC,KAA0BlC,EAAK;AAAA,MACjC,CAAC,GAEGkC,IAAyB,OAC3B,KAAK,cAAcJ,GAAuBC,GAAmBC,CAAmB;AAAA,IAEtF;AAAA,IAEA,yBAAyB,EAAE,WAAAG,EAAQ,IAAM,IAAI;AAC3C,UAAIN,IAAa,MAAM,KAAK,YACxBC,IAAwB;AAC5B,YAAMC,IAAoB,CAAA,GACpBC,IAAsB,CAAA;AAW5B,MATIG,KAAaA,EAAU,cAAc,SACvCN,KAAc,MAAMM,EAAU,cAAc,KAAK,aAAa,KAEhE,KAAK,MAAM,QAAQ,CAACnC,MAAS;AAC3B,QAAA8B,KAAyB9B,EAAK,MAC1BA,EAAK,QAAQA,EAAK,OAAK+B,EAAkB,KAAK/B,EAAK,EAAE,GACrDA,EAAK,QAAQA,EAAK,OAAKgC,EAAoB,KAAKhC,EAAK,EAAE;AAAA,MAC7D,CAAC,GAEG,OAAK,IAAI8B,CAAqB,IAAI,SAEtC,KAAK,MAAM,QAAQ,CAAC9B,MAAS;AAC3B,QAAMmC,KAAaA,EAAU,cAAc,QAAQA,EAAU,OAAOnC,EAAK,OACvEA,EAAK,OAAO,KAAK,IAAI,KAAK,IAAI6B,GAAY7B,EAAK,GAAG,GAAGA,EAAK,GAAG,IAG/D8B,KAAyB9B,EAAK,MAC1BA,EAAK,QAAQA,EAAK,OAAK+B,EAAkB,KAAK/B,EAAK,EAAE,GACrDA,EAAK,QAAQA,EAAK,OAAKgC,EAAoB,KAAKhC,EAAK,EAAE;AAAA,MAC7D,CAAC,GAEG8B,IAAwB,OAAK,KAAK,cAAcA,GAAuBC,GAAmBC,CAAmB;AAAA,IACnH;AAAA,IACA,cAAcF,GAAuBC,GAAmBC,GAAqB;AAC3E,UAAII;AACJ,MAAIN,IAAwB,IAC1BM,IAA8BN,KAAyB,KAAK,aAAaC,EAAkB,UACxFK,IAA8BN,KAAyB,KAAK,aAAaE,EAAoB,SAElG,KAAK,MAAM,QAAQ,CAAChC,MAAS;AAC3B,YAAI8B,IAAwB,KAAK,CAACC,EAAkB,SAAS/B,EAAK,EAAE,GAAG;AACrE,gBAAMqC,IAAqB,KAAK,IAAI,KAAK,IAAIrC,EAAK,OAAOoC,GAA6BpC,EAAK,GAAG,GAAGA,EAAK,GAAG,GACnGsC,IAAYD,IAAqBrC,EAAK;AAC5C,UAAA8B,KAAyBQ,GACzBtC,EAAK,OAAOqC;AAAA,QACd,WAAW,CAACL,EAAoB,SAAShC,EAAK,EAAE,GAAG;AACjD,gBAAMqC,IAAqB,KAAK,IAAI,KAAK,IAAIrC,EAAK,OAAOoC,GAA6BpC,EAAK,GAAG,GAAGA,EAAK,GAAG,GACnGsC,IAAYD,IAAqBrC,EAAK;AAC5C,UAAA8B,KAAyBQ,GACzBtC,EAAK,OAAOqC;AAAA,QACd;AACA,QAAArC,EAAK,OAAO;AAAA,UACV,CAAC,KAAK,aAAa,WAAW,OAAO,GAAG,GAAG,KAAK,aAAaA,EAAK,EAAE,EAAE,IAAI;AAAA,SAC3E;AAAA,MACH,CAAC,GAEG,KAAK,IAAI8B,CAAqB,IAAI,OACpC,KAAK,UAAU,MAAM;AACnB,QAAI,KAAK,SAEP,QAAQ,KAAK,wEAAwE;AAAA,MAEzF,CAAC;AAAA,IAEL;AAAA;EAGF,SAAS;AACP,WAAO1Z;AAAA,MACL;AAAA,MACA;AAAA,QACE,OAAO;AAAA,UACL,eAAe,KAAK,aAAa,eAAe,UAAU;AAAA,UAC1D;AAAA,UACA;AAAA,YACE,wBAAwB,KAAK,MAAM;AAAA,UACrC;AAAA;QAEF,KAAK;AAAA;MAEP,KAAK,OAAO,QAAO;AAAA,IACrB;AAAA,EACF;AACF,GCrjBKpc,KAAU;AAAA,EACb,MAAM;AAAA,EACN,QAAQ,CAAC,iBAAiB,aAAa,gBAAgB,aAAa;AAAA,EAEpE,OAAO;AAAA,IACL,MAAM,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS;IACzC,SAAS,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS;IAC5C,SAAS,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS,IAAE;AAAA;EAGhD,MAAM,OAAO;AAAA,IACX,OAAO,CAAA;AAAA,EACT;AAAA,EAEA,UAAU;AAAA,IACR,aAAa;AACX,aAAO,KAAK,QAAQ,KAAK,SAAS,IAAI,WAAW,KAAK,IAAI,IAAI;AAAA,IAChE;AAAA,IACA,gBAAgB;AACd,aAAO,WAAW,KAAK,OAAO;AAAA,IAChC;AAAA,IACA,gBAAgB;AACd,aAAO,WAAW,KAAK,OAAO;AAAA,IAChC;AAAA;EAGF,OAAO;AAAA,IACL,WAAWu2B,GAAM;AACf,WAAK,cAAc,EAAE,QAAQ,MAAM,MAAAA,GAAM;AAAA,IAC3C;AAAA,IACA,cAAcb,GAAK;AACjB,WAAK,cAAc,EAAE,QAAQ,MAAM,KAAAA,GAAK;AAAA,IAC1C;AAAA,IACA,cAAcC,GAAK;AACjB,WAAK,cAAc,EAAE,QAAQ,MAAM,KAAAA,GAAK;AAAA,IAC1C;AAAA;EAGF,UAAU;AACR,SAAK,UAAU,IAAI;AAAA,EACrB;AAAA,EAEA,gBAAgB;AACd,SAAK,aAAa,IAAI;AAAA,EACxB;AAAA,EAEA,SAAS;AAAA;AAAA,IAEP,OAAO5vB,GAAO;AACZ,WAAK,QAAQA;AAAA,IACf;AAAA,EACF;AACF;;cA1DEtV,EAEM,OAAA;AAAA,IAFD,OAAM;AAAA,IAAoB,OADjCmK,GACwC3J,EAAA,KAAK;AAAA,IAAG,gCAAOqtB,EAAA,YAAY7pB,GAAQxD,EAAA,EAAE,GAAG;AAAA;IAC5ED,GAAQC,EAAA,QAAA,SAAA;AAAA;;qDCyCZulC,KAAe;AAAA,EACb,MAAM;AAAA,EACN,YAAY;AAAA,IACV,WAAW/zB;AAAA,IACX,UAAAg0B;AAAA,IACA,aAAatjC;AAAA,IACb,WAAWujC,GAAA;AAAA,EAAU;AAAA,EAEvB,cAAc;AAAA,EACd,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAMvlC,GAAO,EAAE,MAAAmC,KAAQ;;AACrB,UAAM,EAAE,iBAAAkE,GAAiB,UAAAm/B,GAAU,cAAAC,EAAA,IAAiB/E,GAAA,GAC9CgF,IAAQ7gC,GAAS,MAAM2gC,GAAU,GACjCG,IAAS9gC,GAAS,MAAA;;AAAM,eAAA5D,IAAAjB,EAAM,eAAN,gBAAAiB,EAAkB,UAAS;AAAA,KAAM,GACzD2kC,IAAa7gC,GAAI,EAAE,GACnB8gC,IAAY9gC,KAAI9D,IAAAjB,EAAM,eAAN,gBAAAiB,EAAkB,QAAO,EAAE,GAC3C6kC,IAAc/gC,GAAI,IAAI,GACtBghC,IAAahhC,GAAI,IAAI;AAE3B,WAAAkG,GAAY,MAAM;;AAChB,MAAA46B,EAAU,UAAQ5kC,IAAAjB,EAAM,eAAN,gBAAAiB,EAAkB,QAAO,IAC3C2kC,EAAW,QAAQlF,GAAA,EAAe,UAAU1gC,EAAM,UAAU;AAAA,IAC9D,CAAC,GAoBM;AAAA,MACL,QAAA2lC;AAAA,MACA,YAAAC;AAAA,MACA,aArBkB,CAACx7B,MAAsC;AACzD,QAAAjI,EAAK,qBAAqBiI,EAAM,OAAO,KAAK;AAAA,MAC9C;AAAA,MAoBE,OAAAs7B;AAAA,MACA,WAAAG;AAAA,MACA,iBAAAx/B;AAAA,MACA,cAAAo/B;AAAA,MACA,SAtBc,CAACnkC,MAAc;AAC7B,QAAAa,EAAK,qBAAqBb,CAAI;AAAA,MAChC;AAAA,MAqBE,aAAAwkC;AAAA,MACA,QApBa,MAAM;AACnB,QAAIA,EAAY,UACdA,EAAY,MAAM,eAAe;AAAA,MAErC;AAAA,MAiBE,cAfmB,MAAM;AACzB,QAAAC,EAAW,MAAM,MAAM,aAAa;AAAA,MACtC;AAAA,MAcE,YAAAA;AAAA,IAAA;AAAA,EAEJ;AACF,GA7FejX,KAAA,CAAAzZ,OAAK0Z,GAAC,iBAAiB,GAAA1Z,IAAAA,EAAA,GAAA2Z,GAAA,GAAA3Z;;+FAXpCjW,EAgCM,YAAA;AA/BS,SAAAC,EAAA,GAAYC,EAAU,OAAAC,IAAA;AAAA,IAAAC,EAAaoS,GAAQhI,GAAA;AAAA,MAAA,YAAexG,EAAG;AAAA,MAC7D,aAAM;AAAA,IAAA,GAAAtD,EACf,QAAA,EA0Be,SAAAsD,EAAA,YAAA,CAAA,GAAA;AAAA,MAAA,QAzBV1D,EAAC,MAAY;AAAA,QAAAF,EACVmK,GAAK;AAAA,UACX,KAAA;AAAA,UACC,OAAA;AAAA,UACD,SAAA;AAAA,UACC,iBAAM;AAAA,UAAA,gBAAA;AAAA,UAiBI,QAAAvG,EAAS;AAAA,QAAA,GAAA;AAAA,UACH,WAAA1D,EAAA,MAAA;AAAA,YAAAF,EA5B3BsK,GAAA;AAAA,cAAA,MAAA;AAAA;eAAA,MAAA,GAAA,CAAA,OAyBgB,CAAA;AAAA,UAAA,CAAA;AAAA,mBAZJpK,EAA4B,MAAA;AAAA,YAAAuD,EACsC,OAAAD,IAAA;AAAA,cAAAS;AAAAA,gBAA3B2rB,GAAY;AAAA,gBAAA,OAAA;AAAA,gBACnD,SAAAhsB,EASa;AAAA,cAAA,GARX,MAAI,GAAA,CAAA,SAAa,CAAA;AAAA,cAAA5D,EAhB/BwmC,GAiBgC;AAAA,gBAjBhC,KAAA;AAAA,gBAkBe,YAAS5iC,EAAE;AAAA,gBACX,uBAASC,EAAM,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAC,MAAAF,EAAA,YAAAE;AAAA,gBACf,aAAaF,EAAA;AAAA,gBACb,WAAMA,EAAA;AAAA,gBACN,aAASA,EAAA;AAAA,gBACT,MAAIxD,EAAE;AAAA,gBAAA,SAAAwD,EAAA,aAAA;AAAA;;YAvBrB,CAAA;AAAA,UAAA,CAAA;AAAA;QAAA,GAAA,GAAA,CAAA,QAAA,CAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCUM,EAAE,WAAA6iC,OAAcliC,IAEtBmiC,KAAe;AAAA,EACb,OAAO;AAAA,IACL,MAAM;AAAA,EAAA;AAAA,EAER,OAAO,CAAC,OAAO;AAAA,EACf,MAAMlmC,GAAO,EAAE,MAAAmC,KAAQ;AACrB,UAAMi0B,IAAY+L,GAAW,eAAe,EAAE;AA6B9C,WAAO;AAAA,MACL,WA5BgB,CAACgE,MAAW;;AAC5B,YAAInmC,EAAM,UAAQiB,IAAAm1B,EAAU,UAAV,QAAAn1B,EAAiB,YAAW;AAC5C,gBAAMK,IAAO2kC,GAAUjmC,EAAM,IAAI;AACjC,UAAAo2B,EAAU,MAAM,UAAU90B,CAAI;AAG9B,gBAAMiR,IAAS4zB,EAAE,OAAO,cAAc,2BAA2B;AACjE,UAAAA,EAAE,aAAa,gBAAgB,QAC/BA,EAAE,aAAa,aAAa5zB,GAAQ,IAAI,EAAE;AAAA,QAC5C;AAAA,MACF;AAAA,MAmBE,SAjBc,CAAC4zB,MAAM;;AAErB,UAAIllC,IAAAklC,EAAE,iBAAF,gBAAAllC,EAAgB,gBAAe,YACjCqE,KAAA7C,IAAA2zB,EAAU,UAAV,gBAAA3zB,EAAiB,YAAjB,QAAA6C,EAAA,KAAA7C;AAAA,MAEJ;AAAA,MAaE,aAXkB,MAAM;AACxB,YAAIzC,EAAM,MAAM;AACd,gBAAMsB,IAAO2kC,GAAUjmC,EAAM,IAAI;AAEjC,UAAAmC,EAAK,SAASb,CAAI;AAAA,QACpB;AAAA,MACF;AAAA,IAKE;AAAA,EAEJ;AACF;SApDO4I,GAAgBpK,GAAAuD,GAAAzD,GAAAwD,GAAA8pB,GAAAC,GAAA;AAAM,SAAA9tB,EAAA,GAAYC,EAAA,OAAA;AAAA,IAAE,WAAS;AAAA,IAAc,OAAA;AAAA,IAAmB,aAAK+D,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAAoI,MAAErI,EAAA,aAAAA,EAAA,UAAA,GAAAqI,CAAA;AAAA,IAAA,WAAApI,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAAoI,MAAArI,EAAA,WAAAA,EAAA,QAAA,GAAAqI,CAAA;AAAA,IACxF,SAAApI,EAAa,CAAA,MAAAA,EAAA,CAAA,IAAA,IAAAoI,MAAArI,EAAA,eAAAA,EAAA,YAAA,GAAAqI,CAAA;AAAA,EAAA,GAAA;AAAA;;;qDCmBjB26B,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAapkC;AAAA,EAAA;AAAA,EAEf,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,EACnB;AAEJ,GAvCAzC,KAAA,EAAA,OAAA,OAAA,GAYyCyD,KAAY;AAAA,EAAA,KAAA;AAAA;;;+BAXnD5D,EAee,cAAA;AAbZ,SAAAC,EAAA,GAAgBuE,GAAA+F,GAAA;AAAA,IACjB,SAAA;AAAA,IACA,cAAA;AAAA,IACC,gBAAS;AAAA,IAAA,kBAAA;AAAA,IAEC,SAAS/J,EAAA;AAAA,EAAA,GAAA;AAAA,eAEhBF,EAAA,MAAA;;AAGO;AAAA,QAAAuD,EAF6B,QAAA1D,IAAvB;AAAA,UAAA0D,EACU,QAAQ2G,GAAA,EAAA,OAAA,gBAAA9J,EAAA,MAAA,GAAA;AAAA,YAAAN,EAAAsK,GAA7B,EAAA,MAAmDlK,EAAnD,KAAA,GAAmD,MAAA,GAAA,CAAA,MAAA,CAAA;AAAA,aAAAqB,IAAArB,EAZ7D,YAY6D,QAAAqB,EAZ7D,YAAA5B,KAAAC,EAAA,QAAA0D,EAAA,KAAAwG,GAAA,IAAA,EAAA;AAAA;QAAA,CAAA;AAAA,MAAA;AAAA,KAAA;AAAA;;;uFCaA68B,KAAe;AAAA,EACb,YAAY;AAAA,IACV,YAAY97B;AAAA,EAAA;AAAA,EAEd,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,EACnB;AAEJ,GA/BAhL,KAAA,EAAA,OAAA,WAAA,GAEmCyD,KAAW;AAAA,EAAA,KAAA;AAAA;;;;+BAD5C5D,EAAA,aAOM;AANJ,SAAAC,EAAA,GAAAC,EAAkD,OAAlDC,IAAkD;AAAA,KAAA0B,IAAArB,EAFtD,YAEsD,QAAAqB,EAFtD,YAGI5B,KAIcC,EAJD,QAAM0D,OAHvBwG,GAIoD,IAAA,EAAA;AAAA,IAAAhK,EAA9BgM,GAAI,EAAA,OAAA,iBAAA,GAAA;AAAA,MAAA,SAAA9L,EAAA,MAApB;AAAA,QAAAE,EAJN,aAImCgE,GAAIkG,GAAA;AAAA,UAAA,KAAA;AAAA,UAJvC,MAAAlK,EAAA;AAAA,QAAA,GAKM,MAAA,GAAA,CAAA,MAA6C,MAC7C4J,GAAa,IAAA,EAAA;AAAA,QAAAvG,EAAA,QAAAQ,IAAAP,GAAAtD,EAAA,OAAA,GAAA,CAAA;AAAA,QANnBC,GAAAC,EAAA,QAAA,WAAA,CAAA,GAAA,QAAA,EAAA;AAAA,MAAA,CAAA;AAAA;;;;uFCiBA+O,KAAe;AAAA,EACb,YAAY;AAAA,IACV,iBAAAy3B;AAAA,IACA,mBAAAC;AAAA,EAAA;AAAA,EAEF,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,OAAO,CAAA;AAAA,IAAC;AAAA,EACnB;AAAA,EAEF,OAAO,CAAC,WAAW;AAAA,EACnB,MAAMvmC,GAAO,EAAE,MAAAmC,KAAQ;AAqBrB,WAAO;AAAA,MACL,OArBYS,GAAS;AAAA,QACrB,MAAMiC,GAAS,MAAM7E,EAAM,IAAI;AAAA,QAC/B,SAAS6E,GAAS,MAAM7E,EAAM,OAAO;AAAA,QACrC,SAAS6E,GAAS,MAAM7E,EAAM,OAAO;AAAA,MAAA,CACtC;AAAA,MAkBC,OAhBY,MAAM;AAClB,QAAAmC,EAAK,WAAW;AAAA,MAClB;AAAA,MAeE,WAbgB,MACZnC,EAAM,QAAQ,eAAe,WACxBumC,KAELvmC,EAAM,QAAQ,eAAe,SACxBsmC,KAEF;AAAA,IAMP;AAAA,EAEJ;AACF;AA/Da,SAAAp8B,GAACpK,GAAAuD,GAAmBzD,GAAAwD,GAAA8pB,GAAAC,GAAA;;SAAE9tB,EAAA,GAAKC,EAAA,QAAA;AAAA,IAAA,OAAA;AAAA,eACpC,CAAA,MAAA+D,EAFJ,CAAA,IAAA,IAAAoI,MAAArI,EAEoB,WAAS,MAF7B,GAAAqI,CAAA;AAAA,EAAA,GAAA;AAAA,UAIQ7H,GAA2BC,GAAAT,EAAA,UAAA,CAAA,GAAAojC,GAAAC,GAAArjC,EAAA,KAAA,CAAA,GAAA;AAAA,MAAA,SAAA1D,EAAA,MAAA;AAAA,QAJnCG,GAAAC,EAAA,QAAA,UAAA,CAAA,GAAA,QAAA,EAAA;AAAA,MAAA,CAAA;AAAA,MAOI,GAAA;AAAA,IAAA,GACY,EAAA;AAAA,IAAAD,GAAAC,EAAA,QAAZ,eAA2E,QAR/E,EAAA;AAAA,KAAAmB,IAAAmC,EAAA,MAAA,YAAA,QAAAnC,EAAA,aAAArB,EAAA,WAAAP,EAAA,GAAAC,EAAA,QAAAC,IAAA2D,GAAAE,EAAA,MAAA,OAAA,GAAA,CAAA,KAAAoG,GAAA,IAAA,EAAA;AAAA;;uFCcM8kB,KAAUA,CAAC;AAAA,EAAEuC,OAAAA;AAAAA,EAAO8H,QAAAA;AAAAA,EAAQjxB,SAAAA;AAAAA,EAASqvB,MAAAA;AAAAA,EAAMrI,QAAAA;AAAAA,EAAQgY,YAAAA,IAAa;AAAqB,MAAM;AAC/FC,EAAAA,GAAMrY,QAAQ;AAAA,IACZuC,OAAAA;AAAAA,IACA8H,QAAAA;AAAAA,IACA+N,YAAAA;AAAAA,IACAh/B,SAASA,MACPlI,EAAA,OAAA;AAAA,MAAA,OAAA;AAAA,IAAA,GAAA,CAAAA,EAAA,OAAA;AAAA,MAAA,OAAA;AAAA,OAAA,CAEuB,OAAOkI,KAAY,WAAWA,IAAOlI,EAAAkI,GAAA,MAAA,IAAA,CAAc,CAAA,CAAA,CAAA;AAAA,EAI9E,CAAC,EAAEmwB,KAAMzM,CAAAA,MAAgB;AACvB,IAAIA,MAAQ,aAAa,OAAO2L,KAAS,aACvCA,EAAI,IACK,OAAOrI,KAAW,cAC3BA,EAAM;AAAA,EAEV,CAAC;AACH,GAIMhnB,KAAUA,CAAC;AAAA,EAAEmpB,OAAAA;AAAAA,EAAO8H,QAAAA;AAAAA,EAAQjxB,SAAAA;AAAAA,EAASqvB,MAAAA;AAAAA,EAAM5gB,OAAAA,IAAQ;AAAsB,MAAM;AACnFwwB,EAAAA,GAAMC,MAAM;AAAA,IACV/V,OAAAA;AAAAA,IACA8H,QAAAA;AAAAA,IACA,qBAAqB;AAAA,MAAEzI,MAAM;AAAA;IAC7B/Z,OAAOA;AAAAA,IACPzO,UAAU;AACR,aAAAlI,EAAA,OAAA;AAAA,QAAA,KAAA;AAAA,QAAA,OAAA;AAAA,MAAA,GAAA,CAAAA,EAAA,OAAA;AAAA,QAAA,OAAA;AAAA,SAAA,CAEuB,OAAOkI,KAAY,WAAWA,IAAOlI,EAAAkI,GAAA,MAAA,IAAA,CAAc,CAAA,CAAA,CAAA;AAAA,IAG5E;AAAA,EACF,CAAC,EAAEmwB,KAAK,MAAM;AACZ,IAAI,OAAOd,KAAS,cAClBA,EAAI;AAAA,EAER,CAAC;AACH,GAEM8P,KAAU3vB,CAAAA,MAA0B;AACxC,QAAMlX,IAAQ;AAAA,IAAE,GAAGkX;AAAAA,IAAS8Z,YAAY;AAAA;AACxC,MAAI8V,IAAS7b,GAAE0b,IAAO3mC,CAAK;AAC3B,QAAM+mC,IAAUC,SAASC,cAAc,KAAK,GAEtC5V,IAAQA,MAAM;;AAClByV,KAAAA,IAAAA,EAAOjzB,OAAPizB,QAAAA,EAAWI,UACXJ,IAAS;AAAA,EACX;AAEAnmC,SAAAA,GAAOmmC,GAAQC,CAAO,GAEf;AAAA,IACLD,QAAAA;AAAAA,IACAzV,OAAAA;AAAAA;AAEJ;AASA8V,OAAON,SAASA;AAChBM,OAAOz/B,UAAUA;AAEjB,MAAAi/B,KAAe;AAAA,EACbrY,SAAAA;AAAAA,EACA5mB,SAAAA;AAAAA,EACAm/B,QAAAA;AACF,GCvFMO,KAAc;AAAA,EAClBlqB,MAAM;AAAA,EACNmqB,SAAS;AAAA,EACTC,SAAS;AAAA,EACTn/B,OAAO;AACT,GAWM02B,KAAa0I,CAAAA,MAA0B;AAC3C,QAAM;AAAA,IAAEC,aAAAA;AAAAA,IAAa3W,OAAAA;AAAAA,IAAOrwB,MAAAA,IAAO;AAAA,IAAQ+O,UAAAA,IAAW;AAAA,IAAa,GAAGk4B;AAAAA,EAAY,IAAIF;AAEtFG,EAAAA,GAAO;AAAA,IACLttB,UAAUgtB,GAAY5mC,CAAI;AAAA,IAC1B,GAAGinC;AAAAA,IACHl4B,UAAAA;AAAAA,IACAshB,OAAAA;AAAAA,IACArwB,MAAAA;AAAAA,IACAgnC,aAAa,GAAGA,CAAW;AAAA,IAC3BG,gBAAgB;AAAA,EAClB,CAAC;AACH,GC+BaC,KAAyB;AAAA,EACpC,SAAS,CAACC,MAAsB;AAK9B,WAAO,QAJkB;AAAA,MACvB,aAAAx3B;AAAA,MACA,YAAAC;AAAA,IAAA,CAE6B,EAAE,QAAQ,CAAC,CAACkE,GAAMtO,CAAS,MAAM;AAC9D,MAAA2hC,EAAI,UAAUrzB,GAAMtO,CAAS;AAAA,IAC/B,CAAC;AAAA,EACH;AACF,GC9DMisB,KAAiB;AAAA,EACrB,cAAc;AAAA,IACZ,YAAY;AAAA;AAAA,MAEV,GAAG2V;AAAA,IAAA;AAAA,EACL;AAEJ,GAGMC,KAAkB,OAAOC,GAAuB9wB,IAAU,OAC7C+wB,GAAY,EAAE,GAAG9V,IAAgB,GAAGjb,GAAS,EAE9C,SAAS8wB,CAAS,GAI9BE,KAAmB,IAAIz8B,MACpB08B,GAAwB,GAAG18B,CAAI,GAUlC28B,KAA2B,OAAOC,GAAiBC,GAA0BC,IAAW,oBAAI,UAAkB;AAClH,QAAMnd,IAAa,CAAA,GAEbod,IAAaC,GAAoBJ,CAAU,GAC3CK,IAAcF,EACjB,OAAO,CAACh0B,MACH+zB,EAAS,IAAI/zB,CAAI,IACZ,MAGT+zB,EAAS,IAAI/zB,CAAI,GAEV,GACR,EACA,IAAI,CAACA,MAAc8zB,EAAoB9zB,CAAI,CAAC,GACzCm0B,IAAa,MAAM,QAAQ,WAAWD,CAAW,GACjDE,IAAmB,CAAA;AAEzB,SAAAD,EAAW,QAAQ,CAAC7nC,MAA2C;;AAC7D,UAAM+nC,KAAY5nC,IAAAH,EAAK,UAAL,gBAAAG,EAAa;AAE/B,QAAIH,EAAK,WAAW,eAAe,CAAC+nC;AAClC;AAGF,UAAMC,IAAYD,KAAA,gBAAAA,EAAW,iBACvBE,KAAgBzjC,KAAA7C,IAAAomC,KAAA,gBAAAA,EAAW,cAAX,gBAAApmC,EAAsB,SAAtB,gBAAA6C,EAAA,KAAA7C,GAA6B,CAACumC,OAAqBA,KAAA,gBAAAA,EAAa,QAAOF;AAE7F,QAAIG,IAAgB;AAQpB,IANIH,MAAaC,KAAA,QAAAA,EAAe,WAC9BE,IAAgBF,EAAc,UAE9BE,IAAgBJ,KAAA,gBAAAA,EAAW,SAGxBI,MAKLA,EAAc,UAAUH,KAAa,IAErCG,EAAc,eAAeT,GAE7Bpd,EAAI,KAAK6d,CAAa,GAEtBL,EAAU,KAAKR,GAAyBa,GAAeX,GAAqBC,CAAQ,CAAC;AAAA,EACvF,CAAC,IACC,MAAM,QAAQ,WAAWK,CAAS,GAAG,QAAQ,CAAC9nC,MAAS;AACvD,IAAIA,EAAK,WAAW,eAAeA,EAAK,SACtCsqB,EAAI,KAAK,GAAGtqB,EAAK,KAAK;AAAA,EAE1B,CAAC,GAEMsqB;AACT,GAEa8d,KAAsB;AAAA,EACjC,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,SAAS,CAAA;AAAA,EACT,MAAM;AAAA,IACJ,qBAAAT;AAAA,IACA,0BAAAL;AAAA,IACA,kBAAAF;AAAA,IACA,iBAAAH;AAAA,EAAA;AAEJ,GCtGMoB,KAAc,MAAM;AACxB,QAAMC,IAAY,IAAI,gBAAgB,SAAS,MAAM,GAC/C3kB,IAAK2kB,EAAU,IAAI,IAAI,GACvBC,IAAUD,EAAU,IAAI,SAAS,GACjCE,IAASF,EAAU,IAAI,QAAQ,GAC/BG,IAAYH,EAAU,IAAI,WAAW,GACrC5oC,IAAO4oC,EAAU,IAAI,MAAM,GAC3Bl2B,IAAUk2B,EAAU,IAAI,SAAS;AAEvC,SAAO;AAAA,IACL,MAAM5oC,KAAQ;AAAA,IACd,IAAAikB;AAAA,IACA,QAAA6kB;AAAA,IACA,WAAAC;AAAA,IACA,SAAAF;AAAA,IACA,SAAAn2B;AAAA,EAAA;AAEJ,GAEMs2B,KAAe;AAAA,EACnB,UAAU;AAAA;AAAA,EAEV,SAAS;AAAA,IACP,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,UAAU;AAAA,IACV,aAAa;AAAA,IACb,SAAS;AAAA,IACT,cAAc;AAAA,IACd,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,OAAO;AAAA,IACP,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY;AAAA,EAAA;AAAA;AAAA,EAGd,SAAS,CAAA;AACX,GAEMC,KAAc,MAEXtH,GAAWuH,GAAa,IAAI,EAChC,IAAI,8BAA8B,EAClC,MAAM,CAACvhC,MAA4B;AAClCooB,EAAAA,GAAA,EAAW,QAAQ,EAAE,SAASpoB,EAAM,SAAS,QAAQ,SAAS;AAChE,CAAC,GAICwhC,KAAe,CAACC,MAAkBzH,GAAWuH,GAAa,IAAI,EAAE,IAAI,+BAA+BE,CAAK,EAAE,GAG1GC,KAAe,CAACC,MACpB3H,GAAWuH,GAAa,IAAI,EAAE,IAAI,6BAA6BI,CAAU,EAAE,GAEvE,EAAE,WAAAC,IAAW,SAAAC,GAAA,IAAYC,GAAA,GAEzBC,KAA6B,CAAC5oC,MAAc0oC,GAAQ,EAAE,OAAO,0BAA0B,MAAA1oC,GAAM,GAO7F6oC,KAAe,CAACta,MAAgC;AACpD,QAAMua,IAAY,CAAC,UAAU,WAAW,WAAW,EAAE,OAAO,CAAC7nC,GAAQ8nC,OACnE9nC,EAAO8nC,CAAK,IAAIA,EAAM,YAAA,GACf9nC,IACN,CAAA,CAAyB,GAEtB+nC,IAAc,OAAO,KAAKza,CAAM,GAChC0a,IAAM,IAAI,IAAI,OAAO,SAAS,IAAI,GAClCC,IAAqB,CAAA;AAE3B,SAAO,QAAQJ,CAAS,EAAE,QAAQ,CAAC,CAACC,GAAOI,CAAW,MAAM;AAC1D,IAAIH,EAAY,SAASD,CAAK,KAAKxa,EAAOwa,CAAK,MAAME,EAAI,aAAa,IAAIE,CAAW,MACnFD,EAAcH,CAAK,IAAIxa,EAAOwa,CAAK;AAAA,EAEvC,CAAC;AAED,QAAMK,IAAqB,OAAO,KAAKF,CAAa;AAEpD,SAAIE,EAAmB,SAAS,QAAQ,KAAKA,EAAmB,SAAS,SAAS,KAChF,OAAOF,EAAc,SAGhBA;AACT,GAQMG,KAAe,CAAC9a,GAAaoJ,IAAmB,OAAU;AAC9D,QAAMuR,IAAgBL,GAAata,CAAM,GACnC0a,IAAM,IAAI,IAAI,OAAO,SAAS,IAAI,GAElC,EAAE,QAAAjB,GAAQ,SAAAD,GAAS,WAAAE,EAAA,IAAciB,GACjCE,IAAqB,OAAO,KAAKF,CAAa;AAEpD,EAAIE,EAAmB,WAAW,MAK9BA,EAAmB,SAAS,QAAQ,KACtCH,EAAI,aAAa,OAAO,SAAS,GACjCA,EAAI,aAAa,IAAI,UAAUjB,CAAM,KAC5BoB,EAAmB,SAAS,SAAS,MAC9CH,EAAI,aAAa,OAAO,QAAQ,GAChCA,EAAI,aAAa,IAAI,WAAWlB,CAAO,IAGrCqB,EAAmB,SAAS,WAAW,MACrCnB,IACFgB,EAAI,aAAa,IAAI,aAAahB,CAAS,IAE3CgB,EAAI,aAAa,OAAO,WAAW,IAInCtR,IACF,OAAO,QAAQ,aAAa,CAAA,GAAI,IAAIsR,CAAG,IAEvC,OAAO,QAAQ,UAAU,CAAA,GAAI,IAAIA,CAAG,GAGtCL,GAA2BM,CAAa;AAC1C,GAEMI,KAAe,CAACtB,MAAmB;AACvC,EAAAqB,GAAa,EAAE,QAAArB,GAAQ;AACzB,GAEMuB,KAAgB,CAACxB,MAAoB;AACzC,EAAAsB,GAAa,EAAE,SAAAtB,GAAS;AAC1B,GAEMyB,KAAkB,CAACvB,GAAmBtQ,IAAU,OAAU;AAC9D,EAAA0R,GAAa,EAAE,WAAApB,EAAA,GAAatQ,CAAO;AACrC,GAEA8R,KAAeC,GAAc;AAAA,EAC3B,IAAItB,GAAa;AAAA,EACjB,MAAM;AAAA,EACN,SAAS;AAAA,IACP,mBAAmB;AAAA,EAAA;AAAA,EACrB,cACAF;AAAAA,EACA,MAAM,CAAC,EAAE,OAAA7mC,GAAO,SAAAuU,QAAc;AAC5B,IAAArO;AAAA,MACE,MAAMlG,EAAM;AAAA,MACZ,CAACsoC,MAAY;AACX,QAAAjB,GAAQ,EAAE,OAAO,oBAAoB,MAAMiB,GAAS;AAAA,MACtD;AAAA,IAAA,GAGFpiC;AAAA,MACE,MAAMlG,EAAM;AAAA,MACZ,CAACuoC,MAAY;AACX,QAAAlB,GAAQ,EAAE,OAAO,oBAAoB,MAAMkB,GAAS;AAAA,MACtD;AAAA,IAAA,GAGFnB,GAAU;AAAA,MACR,OAAO;AAAA,MACP,UAAU,CAACH,MAAkB;AAC3B,YAAI,CAACA,GAAO;AAEV,kBAAQ,MAAM,gDAAgD;AAE9D;AAAA,QACF;AAEA,QAAAD,GAAaC,CAAK,EAAE,KAAK,CAAC/B,MAAa;AACrC,UAAAllC,EAAM,UAAUklC,GAEZ3wB,EAAQ,sBAEV,SAAS,QAAQ,GAAG2wB,EAAI,IAAI;AAAA,QAEhC,CAAC;AAAA,MACH;AAAA,IAAA,CACD,GAEDkC,GAAU;AAAA,MACR,OAAO;AAAA,MACP,UAAU,CAACD,MAAuB;AAChC,YAAI,CAACA,GAAY;AAEf,kBAAQ,MAAM,uDAAuD;AAErE;AAAA,QACF;AACA,QAAAD,GAAaC,CAAU,EAAE,KAAK,CAAClpC,MAAgB;AAC7C,UAAA+B,EAAM,UAAU/B;AAAA,QAClB,CAAC;AAAA,MACH;AAAA,IAAA,CACD,GAED6oC,GAAA,EAAc,KAAK,CAACnoC,MAAc;AAChC,MAAIA,MACFqB,EAAM,WAAWrB,IAEnB0oC,GAAQ,EAAE,OAAO,8BAA8B;AAAA,IACjD,CAAC;AAAA,EACH;AAAA,EACA,MAAM,OAAO;AAAA,IACX,aAAAb;AAAA,IACA,4BAAAe;AAAA,IACA,cAAAS;AAAA,IACA,cAAAC;AAAA,IACA,eAAAC;AAAA,IACA,iBAAAC;AAAA,EAAA;AAEJ,CAAC;0BC5NDK,KAAiB,SAAcr3B,GAAIs3B,GAAS;AAC1C,SAAO,WAAgB;AACrB,WAAOt3B,EAAG,MAAMs3B,GAAS,SAAS;AAAA,EACtC;AACA,GCJID,KAAOE,IAIPC,KAAW,OAAO,UAAU,UAG5BC,KAAU,yBAASxiB,GAAO;AAE5B,SAAO,SAASyiB,GAAO;AACrB,QAAI/lB,IAAM6lB,GAAS,KAAKE,CAAK;AAC7B,WAAOziB,EAAMtD,CAAG,MAAMsD,EAAMtD,CAAG,IAAIA,EAAI,MAAM,GAAG,EAAE,EAAE,YAAW;AAAA,EACnE;AACA,EAAG,uBAAO,OAAO,IAAI,CAAC;AAEtB,SAASgmB,GAAWjrC,GAAM;AACxB,SAAAA,IAAOA,EAAK,YAAW,GAChB,SAAkBgrC,GAAO;AAC9B,WAAOD,GAAOC,CAAK,MAAMhrC;AAAA,EAC7B;AACA;AAQA,SAASkrC,GAAQ7oC,GAAK;AACpB,SAAO,MAAM,QAAQA,CAAG;AAC1B;AAQA,SAAS8oC,GAAY9oC,GAAK;AACxB,SAAO,OAAOA,IAAQ;AACxB;AAQA,SAAS+oC,GAAS/oC,GAAK;AACrB,SAAOA,MAAQ,QAAQ,CAAC8oC,GAAY9oC,CAAG,KAAKA,EAAI,gBAAgB,QAAQ,CAAC8oC,GAAY9oC,EAAI,WAAW,KAC/F,OAAOA,EAAI,YAAY,YAAa,cAAcA,EAAI,YAAY,SAASA,CAAG;AACrF;AASA,IAAIgpC,KAAgBJ,GAAW,aAAa;AAS5C,SAASK,GAAkBjpC,GAAK;AAC9B,MAAIN;AACJ,SAAK,OAAO,cAAgB,OAAiB,YAAY,SACvDA,IAAS,YAAY,OAAOM,CAAG,IAE/BN,IAAUM,KAASA,EAAI,UAAYgpC,GAAchpC,EAAI,MAAM,GAEtDN;AACT;AAQA,SAASwpC,GAASlpC,GAAK;AACrB,SAAO,OAAOA,KAAQ;AACxB;AAQA,SAASmpC,GAASnpC,GAAK;AACrB,SAAO,OAAOA,KAAQ;AACxB;AAQA,SAASkuB,GAASluB,GAAK;AACrB,SAAOA,MAAQ,QAAQ,OAAOA,KAAQ;AACxC;AAQA,SAASopC,GAAcppC,GAAK;AAC1B,MAAI0oC,GAAO1oC,CAAG,MAAM;AAClB,WAAO;AAGT,MAAIqpC,IAAY,OAAO,eAAerpC,CAAG;AACzC,SAAOqpC,MAAc,QAAQA,MAAc,OAAO;AACpD;AAQA,SAASC,GAActpC,GAAK;AAC1B,SAAOA,KAAO,OAAO,KAAKA,CAAG,EAAE,WAAW,KAAK,OAAO,eAAeA,CAAG,MAAM,OAAO;AACvF;AASA,IAAIupC,KAASX,GAAW,MAAM,GAS1BY,KAASZ,GAAW,MAAM,GAS1Ba,KAASb,GAAW,MAAM,GAS1Bc,KAAad,GAAW,UAAU;AAQtC,SAASe,GAAW3pC,GAAK;AACvB,SAAOyoC,GAAS,KAAKzoC,CAAG,MAAM;AAChC;AAQA,SAAS4pC,GAAS5pC,GAAK;AACrB,SAAOkuB,GAASluB,CAAG,KAAK2pC,GAAW3pC,EAAI,IAAI;AAC7C;AAQA,SAAS6pC,GAAWlB,GAAO;AACzB,MAAIp4B,IAAU;AACd,SAAOo4B,MACJ,OAAO,YAAa,cAAcA,aAAiB,YACpDF,GAAS,KAAKE,CAAK,MAAMp4B,KACxBo5B,GAAWhB,EAAM,QAAQ,KAAKA,EAAM,SAAQ,MAAOp4B;AAExD;AAQA,IAAIu5B,KAAoBlB,GAAW,iBAAiB;AAQpD,SAASmB,GAAKnnB,GAAK;AACjB,SAAOA,EAAI,OAAOA,EAAI,KAAI,IAAKA,EAAI,QAAQ,sCAAsC,EAAE;AACrF;AAiBA,SAASonB,KAAuB;AAC9B,MAAIC;AACJ,SAAI,OAAO,YAAc,SACtBA,IAAU,UAAU,aAAa,iBAClCA,MAAY,kBACZA,MAAY,QAEL,KAGF,OAAO,SAAW,OAAe,OAAO,WAAa;AAC9D;AAcA,SAASzN,GAAQ5uB,GAAKqD,GAAI;AAExB,MAAI,EAAArD,MAAQ,QAAQ,OAAOA,IAAQ;AAUnC,QALI,OAAOA,KAAQ,aAEjBA,IAAM,CAACA,CAAG,IAGRi7B,GAAQj7B,CAAG;AAEb,eAASxI,IAAI,GAAG8kC,IAAIt8B,EAAI,QAAQxI,IAAI8kC,GAAG9kC;AACrC,QAAA6L,EAAG,KAAK,MAAMrD,EAAIxI,CAAC,GAAGA,GAAGwI,CAAG;AAAA;AAI9B,eAASgC,KAAOhC;AACd,QAAI,OAAO,UAAU,eAAe,KAAKA,GAAKgC,CAAG,KAC/CqB,EAAG,KAAK,MAAMrD,EAAIgC,CAAG,GAAGA,GAAKhC,CAAG;AAIxC;AAmBA,SAASu8B,KAAmC;AAC1C,MAAIzqC,IAAS,CAAA;AACb,WAAS0qC,EAAYpqC,GAAK4P,GAAK;AAC7B,IAAIw5B,GAAc1pC,EAAOkQ,CAAG,CAAC,KAAKw5B,GAAcppC,CAAG,IACjDN,EAAOkQ,CAAG,IAAIu6B,GAAMzqC,EAAOkQ,CAAG,GAAG5P,CAAG,IAC3BopC,GAAcppC,CAAG,IAC1BN,EAAOkQ,CAAG,IAAIu6B,GAAM,CAAA,GAAInqC,CAAG,IAClB6oC,GAAQ7oC,CAAG,IACpBN,EAAOkQ,CAAG,IAAI5P,EAAI,MAAK,IAEvBN,EAAOkQ,CAAG,IAAI5P;AAAA,EAEpB;AAEE,WAASoF,IAAI,GAAG8kC,IAAI,UAAU,QAAQ9kC,IAAI8kC,GAAG9kC;AAC3C,IAAAo3B,GAAQ,UAAUp3B,CAAC,GAAGglC,CAAW;AAEnC,SAAO1qC;AACT;AAUA,SAAS4V,GAAO+0B,GAAGC,GAAG/B,GAAS;AAC7B,SAAA/L,GAAQ8N,GAAG,SAAqBtqC,GAAK4P,GAAK;AACxC,IAAI24B,KAAW,OAAOvoC,KAAQ,aAC5BqqC,EAAEz6B,CAAG,IAAI04B,GAAKtoC,GAAKuoC,CAAO,IAE1B8B,EAAEz6B,CAAG,IAAI5P;AAAA,EAEf,CAAG,GACMqqC;AACT;AAQA,SAASE,GAASvsC,GAAS;AACzB,SAAIA,EAAQ,WAAW,CAAC,MAAM,UAC5BA,IAAUA,EAAQ,MAAM,CAAC,IAEpBA;AACT;AAUA,SAASwsC,GAASC,GAAaC,GAAkBvtC,GAAOwtC,GAAa;AACnE,EAAAF,EAAY,YAAY,OAAO,OAAOC,EAAiB,WAAWC,CAAW,GAC7EF,EAAY,UAAU,cAAcA,GACpCttC,KAAS,OAAO,OAAOstC,EAAY,WAAWttC,CAAK;AACrD;AAWA,SAASytC,GAAaC,GAAWC,GAASvsB,GAAQwsB,GAAY;AAC5D,MAAI5tC,GACAiI,GACA0M,GACAk5B,IAAS,CAAA;AAIb,MAFAF,IAAUA,KAAW,CAAA,GAEjBD,KAAa,KAAM,QAAOC;AAE9B,KAAG;AAGD,SAFA3tC,IAAQ,OAAO,oBAAoB0tC,CAAS,GAC5CzlC,IAAIjI,EAAM,QACHiI,MAAM;AACX,MAAA0M,IAAO3U,EAAMiI,CAAC,IACT,CAAC2lC,KAAcA,EAAWj5B,GAAM+4B,GAAWC,CAAO,MAAM,CAACE,EAAOl5B,CAAI,MACvEg5B,EAAQh5B,CAAI,IAAI+4B,EAAU/4B,CAAI,GAC9Bk5B,EAAOl5B,CAAI,IAAI;AAGnB,IAAA+4B,IAAYtsB,MAAW,MAAS,OAAO,eAAessB,CAAS;AAAA,EACnE,SAAWA,MAAc,CAACtsB,KAAUA,EAAOssB,GAAWC,CAAO,MAAMD,MAAc,OAAO;AAEtF,SAAOC;AACT;AASA,SAASG,GAASroB,GAAKsoB,GAAcx+B,GAAU;AAC7C,EAAAkW,IAAM,OAAOA,CAAG,IACZlW,MAAa,UAAaA,IAAWkW,EAAI,YAC3ClW,IAAWkW,EAAI,SAEjBlW,KAAYw+B,EAAa;AACzB,MAAIC,IAAYvoB,EAAI,QAAQsoB,GAAcx+B,CAAQ;AAClD,SAAOy+B,MAAc,MAAMA,MAAcz+B;AAC3C;AAQA,SAAS0+B,GAAQzC,GAAO;AACtB,MAAI,CAACA,EAAO,QAAO;AACnB,MAAIE,GAAQF,CAAK,EAAG,QAAOA;AAC3B,MAAIvjC,IAAIujC,EAAM;AACd,MAAI,CAACQ,GAAS/jC,CAAC,EAAG,QAAO;AAEzB,WADI6P,IAAM,IAAI,MAAM7P,CAAC,GACdA,MAAM;AACX,IAAA6P,EAAI7P,CAAC,IAAIujC,EAAMvjC,CAAC;AAElB,SAAO6P;AACT;AAGA,IAAIo2B,KAAgB,yBAASC,GAAY;AAEvC,SAAO,SAAS3C,GAAO;AACrB,WAAO2C,KAAc3C,aAAiB2C;AAAA,EAC1C;AACA,EAAG,OAAO,aAAe,OAAe,OAAO,eAAe,UAAU,CAAC;AAEzE,SAASC,GAAa39B,GAAKqD,GAAI;AAO7B,WANIu6B,IAAY59B,KAAOA,EAAI,OAAO,QAAQ,GAEtC2E,IAAWi5B,EAAU,KAAK59B,CAAG,GAE7BlO,IAEIA,IAAS6S,EAAS,KAAI,MAAO,CAAC7S,EAAO,QAAM;AACjD,QAAI+rC,IAAO/rC,EAAO;AAClB,IAAAuR,EAAG,KAAKrD,GAAK69B,EAAK,CAAC,GAAGA,EAAK,CAAC,CAAC;AAAA,EACjC;AACA;AAEA,SAASC,GAASC,GAAQ/oB,GAAK;AAI7B,WAHIzR,GACA8D,IAAM,CAAA,IAEF9D,IAAUw6B,EAAO,KAAK/oB,CAAG,OAAO;AACtC,IAAA3N,EAAI,KAAK9D,CAAO;AAGlB,SAAO8D;AACT;AAEA,IAAI22B,KAAahD,GAAW,iBAAiB,GAEzCiD,KAAkB,yBAAkBC,GAAiB;AACvD,SAAO,SAASl+B,GAAKkE,GAAM;AACzB,WAAOg6B,EAAgB,KAAKl+B,GAAKkE,CAAI;AAAA,EACzC;AACA,EAAG,OAAO,UAAU,cAAc,GAElC5Q,KAAiB;AAAA,EACf,SAAS2nC;AAAA,EACT,eAAeG;AAAA,EACf,UAAUD;AAAA,EACV,YAAYc;AAAA,EACZ,mBAAmBZ;AAAA,EACnB,UAAUC;AAAA,EACV,UAAUC;AAAA,EACV,UAAUjb;AAAA,EACV,eAAekb;AAAA,EACf,eAAeE;AAAA,EACf,aAAaR;AAAA,EACb,QAAQS;AAAA,EACR,QAAQC;AAAA,EACR,QAAQC;AAAA,EACR,YAAYE;AAAA,EACZ,UAAUC;AAAA,EACV,mBAAmBE;AAAA,EACnB,sBAAsBE;AAAA,EACtB,SAASxN;AAAA,EACT,OAAO2N;AAAA,EACP,QAAQ70B;AAAA,EACR,MAAMy0B;AAAA,EACN,UAAUQ;AAAA,EACV,UAAUC;AAAA,EACV,cAAcI;AAAA,EACd,QAAQlC;AAAA,EACR,YAAYE;AAAA,EACZ,UAAUqC;AAAA,EACV,SAASG;AAAA,EACT,cAAcC;AAAA,EACd,YAAY3B;AAAA,EACZ,cAAc6B;AAAA,EACd,UAAUG;AAAA,EACV,YAAYE;AAAA,EACZ,gBAAgBC;AAClB,GCvgBI3qC,KAAQsnC;AAYZ,SAASuD,GAAWlnC,GAAS+6B,GAAM8E,GAAQsH,GAASC,GAAU;AAC5D,QAAM,KAAK,IAAI,GAEX,MAAM,oBACR,MAAM,kBAAkB,MAAM,KAAK,WAAW,IAE9C,KAAK,QAAS,IAAI,MAAK,EAAI,OAG7B,KAAK,UAAUpnC,GACf,KAAK,OAAO,cACZ+6B,MAAS,KAAK,OAAOA,IACrB8E,MAAW,KAAK,SAASA,IACzBsH,MAAY,KAAK,UAAUA,IAC3BC,MAAa,KAAK,WAAWA;AAC/B;AAEA/qC,GAAM,SAAS6qC,IAAY,OAAO;AAAA,EAChC,QAAQ,WAAkB;AACxB,WAAO;AAAA;AAAA,MAEL,SAAS,KAAK;AAAA,MACd,MAAM,KAAK;AAAA;AAAA,MAEX,aAAa,KAAK;AAAA,MAClB,QAAQ,KAAK;AAAA;AAAA,MAEb,UAAU,KAAK;AAAA,MACf,YAAY,KAAK;AAAA,MACjB,cAAc,KAAK;AAAA,MACnB,OAAO,KAAK;AAAA;AAAA,MAEZ,QAAQ,KAAK;AAAA,MACb,MAAM,KAAK;AAAA,MACX,QAAQ,KAAK,YAAY,KAAK,SAAS,SAAS,KAAK,SAAS,SAAS;AAAA,IAC7E;AAAA,EACA;AACA,CAAC;AAED,IAAI1C,KAAY0C,GAAW,WACvBpB,KAAc,CAAA;AAElB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAEF,EAAE,QAAQ,SAAS/K,GAAM;AACvB,EAAA+K,GAAY/K,CAAI,IAAI,EAAC,OAAOA,EAAI;AAClC,CAAC;AAED,OAAO,iBAAiBmM,IAAYpB,EAAW;AAC/C,OAAO,eAAetB,IAAW,gBAAgB,EAAC,OAAO,GAAI,CAAC;AAG9D0C,GAAW,OAAO,SAASzmC,GAAOs6B,GAAM8E,GAAQsH,GAASC,GAAUC,GAAa;AAC9E,MAAIC,IAAa,OAAO,OAAO9C,EAAS;AAExCnoC,SAAAA,GAAM,aAAaoE,GAAO6mC,GAAY,SAAgBv+B,GAAK;AACzD,WAAOA,MAAQ,MAAM;AAAA,EACzB,CAAG,GAEDm+B,GAAW,KAAKI,GAAY7mC,EAAM,SAASs6B,GAAM8E,GAAQsH,GAASC,CAAQ,GAE1EE,EAAW,QAAQ7mC,GAEnB6mC,EAAW,OAAO7mC,EAAM,MAExB4mC,KAAe,OAAO,OAAOC,GAAYD,CAAW,GAE7CC;AACT;AAEA,IAAAC,KAAiBL,IC7FjBM,KAAiB,OAAO,QAAS,WAAW,KAAK,WAAW,OAAO,UCFnEC,KAAiB9D,ICCbtnC,KAAQsnC,IACRuD,KAAaQ,IACbC,KAAcC;AAElB,SAASC,GAAY/D,GAAO;AAC1B,SAAOznC,GAAM,cAAcynC,CAAK,KAAKznC,GAAM,QAAQynC,CAAK;AAC1D;AAEA,SAASgE,GAAe/8B,GAAK;AAC3B,SAAO1O,GAAM,SAAS0O,GAAK,IAAI,IAAIA,EAAI,MAAM,GAAG,EAAE,IAAIA;AACxD;AAEA,SAASg9B,GAAUC,GAAMj9B,GAAKk9B,GAAM;AAClC,SAAKD,IACEA,EAAK,OAAOj9B,CAAG,EAAE,IAAI,SAAcm9B,GAAO3nC,GAAG;AAElD,WAAA2nC,IAAQJ,GAAeI,CAAK,GACrB,CAACD,KAAQ1nC,IAAI,MAAM2nC,IAAQ,MAAMA;AAAA,EAC5C,CAAG,EAAE,KAAKD,IAAO,MAAM,EAAE,IALLl9B;AAMpB;AAEA,SAASo9B,GAAY/3B,GAAK;AACxB,SAAO/T,GAAM,QAAQ+T,CAAG,KAAK,CAACA,EAAI,KAAKy3B,EAAW;AACpD;AAEA,IAAIO,KAAa/rC,GAAM,aAAaA,IAAO,CAAA,GAAI,MAAM,SAAgB4Q,GAAM;AACzE,SAAO,WAAW,KAAKA,CAAI;AAC7B,CAAC;AAED,SAASo7B,GAAgBvE,GAAO;AAC9B,SAAOA,KAASznC,GAAM,WAAWynC,EAAM,MAAM,KAAKA,EAAM,OAAO,WAAW,MAAM,cAAcA,EAAM,OAAO,QAAQ;AACrH;AAcA,SAASwE,GAAWv/B,GAAKe,GAAU0F,GAAS;AAC1C,MAAI,CAACnT,GAAM,SAAS0M,CAAG;AACrB,UAAM,IAAI,UAAU,0BAA0B;AAIhD,EAAAe,IAAWA,KAAY,KAAK69B,MAAe,UAAQ,GAGnDn4B,IAAUnT,GAAM,aAAamT,GAAS;AAAA,IACpC,YAAY;AAAA,IACZ,MAAM;AAAA,IACN,SAAS;AAAA,EACb,GAAK,IAAO,SAAiB0D,GAAQpI,GAAQ;AAEzC,WAAO,CAACzO,GAAM,YAAYyO,EAAOoI,CAAM,CAAC;AAAA,EAC5C,CAAG;AAED,MAAIq1B,IAAa/4B,EAAQ,YAErBg5B,IAAUh5B,EAAQ,WAAWi5B,GAC7BR,IAAOz4B,EAAQ,MACf4U,IAAU5U,EAAQ,SAClBk5B,IAAQl5B,EAAQ,QAAQ,OAAO,OAAS,OAAe,MACvDm5B,IAAUD,KAASL,GAAgBv+B,CAAQ;AAE/C,MAAI,CAACzN,GAAM,WAAWmsC,CAAO;AAC3B,UAAM,IAAI,UAAU,4BAA4B;AAGlD,WAASI,EAAahuC,GAAO;AAC3B,QAAIA,MAAU,KAAM,QAAO;AAE3B,QAAIyB,GAAM,OAAOzB,CAAK;AACpB,aAAOA,EAAM,YAAW;AAG1B,QAAI,CAAC+tC,KAAWtsC,GAAM,OAAOzB,CAAK;AAChC,YAAM,IAAIssC,GAAW,8CAA8C;AAGrE,WAAI7qC,GAAM,cAAczB,CAAK,KAAKyB,GAAM,aAAazB,CAAK,IACjD+tC,KAAW,OAAO,QAAS,aAAa,IAAI,KAAK,CAAC/tC,CAAK,CAAC,IAAI,OAAO,KAAKA,CAAK,IAG/EA;AAAA,EACX;AAUE,WAAS6tC,EAAe7tC,GAAOmQ,GAAKi9B,GAAM;AACxC,QAAI53B,IAAMxV;AAEV,QAAIA,KAAS,CAACotC,KAAQ,OAAOptC,KAAU;AACrC,UAAIyB,GAAM,SAAS0O,GAAK,IAAI;AAE1B,QAAAA,IAAMw9B,IAAax9B,IAAMA,EAAI,MAAM,GAAG,EAAE,GAExCnQ,IAAQ,KAAK,UAAUA,CAAK;AAAA,eAE3ByB,GAAM,QAAQzB,CAAK,KAAKutC,GAAYvtC,CAAK,KACzCyB,GAAM,WAAWzB,CAAK,KAAKyB,GAAM,SAAS0O,GAAK,IAAI,MAAMqF,IAAM/T,GAAM,QAAQzB,CAAK;AAGnF,eAAAmQ,IAAM+8B,GAAe/8B,CAAG,GAExBqF,EAAI,QAAQ,SAAcjE,GAAI1T,GAAO;AACnC,WAAC4D,GAAM,YAAY8P,CAAE,KAAKrC,EAAS;AAAA;AAAA,YAEjCsa,MAAY,KAAO2jB,GAAU,CAACh9B,CAAG,GAAGtS,GAAOwvC,CAAI,IAAK7jB,MAAY,OAAOrZ,IAAMA,IAAM;AAAA,YACnF69B,EAAaz8B,CAAE;AAAA,UAC3B;AAAA,QACA,CAAS,GACM;AAAA;AAIX,WAAI07B,GAAYjtC,CAAK,IACZ,MAGTkP,EAAS,OAAOi+B,GAAUC,GAAMj9B,GAAKk9B,CAAI,GAAGW,EAAahuC,CAAK,CAAC,GAExD;AAAA,EACX;AAEE,MAAIiuC,IAAQ,CAAA,GAERC,IAAiB,OAAO,OAAOV,IAAY;AAAA,IAC7C,gBAAgBK;AAAA,IAChB,cAAcG;AAAA,IACd,aAAaf;AAAA,EACjB,CAAG;AAED,WAASkB,EAAMnuC,GAAOotC,GAAM;AAC1B,QAAI3rC,CAAAA,GAAM,YAAYzB,CAAK,GAE3B;AAAA,UAAIiuC,EAAM,QAAQjuC,CAAK,MAAM;AAC3B,cAAM,MAAM,oCAAoCotC,EAAK,KAAK,GAAG,CAAC;AAGhE,MAAAa,EAAM,KAAKjuC,CAAK,GAEhByB,GAAM,QAAQzB,GAAO,SAAcuR,GAAIpB,GAAK;AAC1C,YAAIlQ,IAAS,CAACwB,GAAM,YAAY8P,CAAE,KAAKq8B,EAAQ;AAAA,UAC7C1+B;AAAA,UAAUqC;AAAA,UAAI9P,GAAM,SAAS0O,CAAG,IAAIA,EAAI,KAAI,IAAKA;AAAA,UAAKi9B;AAAA,UAAMc;AAAA,QACpE;AAEM,QAAIjuC,MAAW,MACbkuC,EAAM58B,GAAI67B,IAAOA,EAAK,OAAOj9B,CAAG,IAAI,CAACA,CAAG,CAAC;AAAA,MAEjD,CAAK,GAED89B,EAAM,IAAG;AAAA;AAAA,EACb;AAEE,MAAI,CAACxsC,GAAM,SAAS0M,CAAG;AACrB,UAAM,IAAI,UAAU,wBAAwB;AAG9C,SAAAggC,EAAMhgC,CAAG,GAEFe;AACT;AAEA,IAAAk/B,KAAiBV,IChLbA,KAAa3E;AAEjB,SAASsF,GAAOlrB,GAAK;AACnB,MAAImrB,IAAU;AAAA,IACZ,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,OAAO;AAAA,IACP,OAAO;AAAA,EACX;AACE,SAAO,mBAAmBnrB,CAAG,EAAE,QAAQ,sBAAsB,SAAkBkc,GAAO;AACpF,WAAOiP,EAAQjP,CAAK;AAAA,EACxB,CAAG;AACH;AAEA,SAASkP,GAAqBhhB,GAAQ3Y,GAAS;AAC7C,OAAK,SAAS,CAAA,GAEd2Y,KAAUmgB,GAAWngB,GAAQ,MAAM3Y,CAAO;AAC5C;AAEA,IAAIg1B,KAAY2E,GAAqB;AAErC3E,GAAU,SAAS,SAAgB13B,GAAMlS,GAAO;AAC9C,OAAK,OAAO,KAAK,CAACkS,GAAMlS,CAAK,CAAC;AAChC;AAEA4pC,GAAU,WAAW,SAAkB4E,GAAS;AAC9C,MAAIC,IAAUD,IAAU,SAASxuC,GAAO;AACtC,WAAOwuC,EAAQ,KAAK,MAAMxuC,GAAOquC,EAAM;AAAA,EAC3C,IAAMA;AAEJ,SAAO,KAAK,OAAO,IAAI,SAAcrC,GAAM;AACzC,WAAOyC,EAAQzC,EAAK,CAAC,CAAC,IAAI,MAAMyC,EAAQzC,EAAK,CAAC,CAAC;AAAA,EACnD,GAAK,EAAE,EAAE,KAAK,GAAG;AACjB;AAEA,IAAA0C,KAAiBH,ICvCb9sC,KAAQsnC,IACRwF,KAAuBzB;AAE3B,SAASuB,GAAO9tC,GAAK;AACnB,SAAO,mBAAmBA,CAAG,EAC3B,QAAQ,SAAS,GAAG,EACpB,QAAQ,QAAQ,GAAG,EACnB,QAAQ,SAAS,GAAG,EACpB,QAAQ,QAAQ,GAAG,EACnB,QAAQ,SAAS,GAAG,EACpB,QAAQ,SAAS,GAAG;AACxB;IAUAouC,KAAiB,SAAkB1G,GAAK1a,GAAQ3Y,GAAS;AAEvD,MAAI,CAAC2Y;AACH,WAAO0a;AAGT,MAAI2G,IAAgB3G,EAAI,QAAQ,GAAG;AAEnC,EAAI2G,MAAkB,OACpB3G,IAAMA,EAAI,MAAM,GAAG2G,CAAa;AAGlC,MAAIH,IAAU75B,KAAWA,EAAQ,UAAUy5B,IAEvCQ,IAAmBptC,GAAM,kBAAkB8rB,CAAM,IACnDA,EAAO,SAAQ,IACf,IAAIghB,GAAqBhhB,GAAQ3Y,CAAO,EAAE,SAAS65B,CAAO;AAE5D,SAAII,MACF5G,MAAQA,EAAI,QAAQ,GAAG,MAAM,KAAK,MAAM,OAAO4G,IAG1C5G;AACT,GC5CIxmC,KAAQsnC;AAEZ,SAAS+F,KAAqB;AAC5B,OAAK,WAAW,CAAA;AAClB;AAUAA,GAAmB,UAAU,MAAM,SAAaC,GAAWC,GAAUp6B,GAAS;AAC5E,cAAK,SAAS,KAAK;AAAA,IACjB,WAAWm6B;AAAA,IACX,UAAUC;AAAA,IACV,aAAap6B,IAAUA,EAAQ,cAAc;AAAA,IAC7C,SAASA,IAAUA,EAAQ,UAAU;AAAA,EACzC,CAAG,GACM,KAAK,SAAS,SAAS;AAChC;AAOAk6B,GAAmB,UAAU,QAAQ,SAAe3sB,GAAI;AACtD,EAAI,KAAK,SAASA,CAAE,MAClB,KAAK,SAASA,CAAE,IAAI;AAExB;AAKA2sB,GAAmB,UAAU,QAAQ,WAAiB;AACpD,EAAI,KAAK,aACP,KAAK,WAAW,CAAA;AAEpB;AAUAA,GAAmB,UAAU,UAAU,SAAiBt9B,GAAI;AAC1D/P,EAAAA,GAAM,QAAQ,KAAK,UAAU,SAAwBknB,GAAG;AACtD,IAAIA,MAAM,QACRnX,EAAGmX,CAAC;AAAA,EAEV,CAAG;AACH;AAEA,IAAAsmB,KAAiBH,IC5DbrtC,KAAQsnC,IAEZmG,KAAiB,SAA6BC,GAASC,GAAgB;AACrE3tC,EAAAA,GAAM,QAAQ0tC,GAAS,SAAuBnvC,GAAOkS,GAAM;AACzD,IAAIA,MAASk9B,KAAkBl9B,EAAK,YAAW,MAAOk9B,EAAe,kBACnED,EAAQC,CAAc,IAAIpvC,GAC1B,OAAOmvC,EAAQj9B,CAAI;AAAA,EAEzB,CAAG;AACH,GCTAm9B,KAAiB;AAAA,EACf,mBAAmB;AAAA,EACnB,mBAAmB;AAAA,EACnB,qBAAqB;AACvB,GCJId,KAAuBxF,IAE3BuG,KAAiB,OAAO,kBAAoB,MAAc,kBAAkBf,ICF5EgB,KAAiB,UCAjB3C,KAAiB;AAAA,EAEf,SAAS;AAAA,IACP,iBAAiB7D;AAAAA,IACjB,UAAU+D;AAAAA,IACV;AAAA,EACJ;AAAA,EACE,WAAW,CAAC,QAAQ,SAAS,QAAQ,QAAQ,OAAO,MAAM;AAC5D,GCRA0C,KAAiBzG,ICAbtnC,KAAQsnC,IACR2E,KAAaZ,IACb0C,KAAWxC,IAEfyC,KAAiB,SAA0BzwC,GAAM4V,GAAS;AACxD,SAAO84B,GAAW1uC,GAAM,IAAIwwC,GAAS,QAAQ,gBAAe,GAAI,OAAO,OAAO;AAAA,IAC5E,SAAS,SAASxvC,GAAOmQ,GAAKi9B,GAAMsC,GAAS;AAC3C,aAAIF,GAAS,UAAU/tC,GAAM,SAASzB,CAAK,KACzC,KAAK,OAAOmQ,GAAKnQ,EAAM,SAAS,QAAQ,CAAC,GAClC,MAGF0vC,EAAQ,eAAe,MAAM,MAAM,SAAS;AAAA,IACzD;AAAA,EACA,GAAK96B,CAAO,CAAC;AACb,GCfInT,KAAQsnC;AAEZ,SAAS4G,GAAcz9B,GAAM;AAK3B,SAAOzQ,GAAM,SAAS,iBAAiByQ,CAAI,EAAE,IAAI,SAASmtB,GAAO;AAC/D,WAAOA,EAAM,CAAC,MAAM,OAAO,KAAKA,EAAM,CAAC,KAAKA,EAAM,CAAC;AAAA,EACvD,CAAG;AACH;AAEA,SAASuQ,GAAcp6B,GAAK;AAC1B,MAAIrH,IAAM,CAAA,GACN0B,IAAO,OAAO,KAAK2F,CAAG,GACtB7P,GACAkqC,IAAMhgC,EAAK,QACXM;AACJ,OAAKxK,IAAI,GAAGA,IAAIkqC,GAAKlqC;AACnB,IAAAwK,IAAMN,EAAKlK,CAAC,GACZwI,EAAIgC,CAAG,IAAIqF,EAAIrF,CAAG;AAEpB,SAAOhC;AACT;AAEA,SAAS2hC,GAAe5gC,GAAU;AAChC,WAAS6gC,EAAU3C,GAAMptC,GAAOiQ,GAAQpS,GAAO;AAC7C,QAAIqU,IAAOk7B,EAAKvvC,GAAO,GACnBmyC,IAAe,OAAO,SAAS,CAAC99B,CAAI,GACpC+9B,IAASpyC,KAASuvC,EAAK;AAG3B,QAFAl7B,IAAO,CAACA,KAAQzQ,GAAM,QAAQwO,CAAM,IAAIA,EAAO,SAASiC,GAEpD+9B;AACF,aAAIxuC,GAAM,eAAewO,GAAQiC,CAAI,IACnCjC,EAAOiC,CAAI,IAAI,CAACjC,EAAOiC,CAAI,GAAGlS,CAAK,IAEnCiQ,EAAOiC,CAAI,IAAIlS,GAGV,CAACgwC;AAGV,KAAI,CAAC//B,EAAOiC,CAAI,KAAK,CAACzQ,GAAM,SAASwO,EAAOiC,CAAI,CAAC,OAC/CjC,EAAOiC,CAAI,IAAI,CAAA;AAGjB,QAAIjS,IAAS8vC,EAAU3C,GAAMptC,GAAOiQ,EAAOiC,CAAI,GAAGrU,CAAK;AAEvD,WAAIoC,KAAUwB,GAAM,QAAQwO,EAAOiC,CAAI,CAAC,MACtCjC,EAAOiC,CAAI,IAAI09B,GAAc3/B,EAAOiC,CAAI,CAAC,IAGpC,CAAC89B;AAAA,EACZ;AAEE,MAAIvuC,GAAM,WAAWyN,CAAQ,KAAKzN,GAAM,WAAWyN,EAAS,OAAO,GAAG;AACpE,QAAIf,IAAM,CAAA;AAEV1M,WAAAA,GAAM,aAAayN,GAAU,SAASgD,GAAMlS,GAAO;AACjD,MAAA+vC,EAAUJ,GAAcz9B,CAAI,GAAGlS,GAAOmO,GAAK,CAAC;AAAA,IAClD,CAAK,GAEMA;AAAA,EACX;AAEE,SAAO;AACT;AAEA,IAAA+hC,KAAiBJ;;;;ACpEjB,MAAIxD,IAAavD;AASjB,SAAAoH,KAAiB,SAAgBC,GAASC,GAAQ7D,GAAU;AAC1D,QAAI8D,IAAiB9D,EAAS,OAAO;AACrC,IAAI,CAACA,EAAS,UAAU,CAAC8D,KAAkBA,EAAe9D,EAAS,MAAM,IACvE4D,EAAQ5D,CAAQ,IAEhB6D,EAAO,IAAI/D;AAAA,MACT,qCAAqCE,EAAS;AAAA,MAC9C,CAACF,EAAW,iBAAiBA,EAAW,gBAAgB,EAAE,KAAK,MAAME,EAAS,SAAS,GAAG,IAAI,CAAC;AAAA,MAC/FA,EAAS;AAAA,MACTA,EAAS;AAAA,MACTA;AAAA,IACN,CAAK;AAAA,EAEL;;;;;;ACtBA,MAAI/qC,IAAQsnC;AAEZ,SAAAwH,KACE9uC,EAAM,qBAAoB;AAAA;AAAA,IAGvB,2BAA8B;AAC7B,aAAO;AAAA,QACL,OAAO,SAAeyQ,GAAMlS,GAAOwwC,GAASpD,GAAMqD,GAAQC,GAAQ;AAChE,cAAIC,IAAS,CAAA;AACb,UAAAA,EAAO,KAAKz+B,IAAO,MAAM,mBAAmBlS,CAAK,CAAC,GAE9CyB,EAAM,SAAS+uC,CAAO,KACxBG,EAAO,KAAK,aAAa,IAAI,KAAKH,CAAO,EAAE,aAAa,GAGtD/uC,EAAM,SAAS2rC,CAAI,KACrBuD,EAAO,KAAK,UAAUvD,CAAI,GAGxB3rC,EAAM,SAASgvC,CAAM,KACvBE,EAAO,KAAK,YAAYF,CAAM,GAG5BC,MAAW,MACbC,EAAO,KAAK,QAAQ,GAGtB,SAAS,SAASA,EAAO,KAAK,IAAI;AAAA,QAC5C;AAAA,QAEQ,MAAM,SAAcz+B,GAAM;AACxB,cAAImtB,IAAQ,SAAS,OAAO,MAAM,IAAI,OAAO,eAAentB,IAAO,WAAW,CAAC;AAC/E,iBAAQmtB,IAAQ,mBAAmBA,EAAM,CAAC,CAAC,IAAI;AAAA,QACzD;AAAA,QAEQ,QAAQ,SAAgBntB,GAAM;AAC5B,eAAK,MAAMA,GAAM,IAAI,KAAK,IAAG,IAAK,KAAQ;AAAA,QACpD;AAAA,MACA;AAAA,IACA,EAAK;AAAA;AAAA;AAAA,IAGA,2BAAiC;AAChC,aAAO;AAAA,QACL,OAAO,WAAiB;AAAA,QAAA;AAAA,QACxB,MAAM,WAAgB;AAAE,iBAAO;AAAA,QAAK;AAAA,QACpC,QAAQ,WAAkB;AAAA,QAAA;AAAA,MAClC;AAAA,IACA,EAAK;AAAA;;AC3CL,IAAA0+B,KAAiB,SAAuB3I,GAAK;AAI3C,SAAO,8BAA8B,KAAKA,CAAG;AAC/C,GCJA4I,KAAiB,SAAqBC,GAASC,GAAa;AAC1D,SAAOA,IACHD,EAAQ,QAAQ,QAAQ,EAAE,IAAI,MAAMC,EAAY,QAAQ,QAAQ,EAAE,IAClED;AACN,GCXIF,KAAgB7H,IAChB8H,KAAc/D,IAWlBkE,KAAiB,SAAuBF,GAASG,GAAc;AAC7D,SAAIH,KAAW,CAACF,GAAcK,CAAY,IACjCJ,GAAYC,GAASG,CAAY,IAEnCA;AACT;;;;ACjBA,MAAIxvC,IAAQsnC,IAIRmI,IAAoB;AAAA,IACtB;AAAA,IAAO;AAAA,IAAiB;AAAA,IAAkB;AAAA,IAAgB;AAAA,IAC1D;AAAA,IAAW;AAAA,IAAQ;AAAA,IAAQ;AAAA,IAAqB;AAAA,IAChD;AAAA,IAAiB;AAAA,IAAY;AAAA,IAAgB;AAAA,IAC7C;AAAA,IAAW;AAAA,IAAe;AAAA,EAC5B;AAeA,SAAAC,KAAiB,SAAsBhC,GAAS;AAC9C,QAAIiC,IAAS,CAAA,GACTjhC,GACA5P,GACA;AAEJ,WAAK4uC,KAEL1tC,EAAM,QAAQ0tC,EAAQ,MAAM;AAAA,CAAI,GAAG,SAAgBkC,GAAM;AAKvD,UAJA,IAAIA,EAAK,QAAQ,GAAG,GACpBlhC,IAAM1O,EAAM,KAAK4vC,EAAK,MAAM,GAAG,CAAC,CAAC,EAAE,YAAW,GAC9C9wC,IAAMkB,EAAM,KAAK4vC,EAAK,MAAM,IAAI,CAAC,CAAC,GAE9BlhC,GAAK;AACP,YAAIihC,EAAOjhC,CAAG,KAAK+gC,EAAkB,QAAQ/gC,CAAG,KAAK;AACnD;AAEF,QAAIA,MAAQ,eACVihC,EAAOjhC,CAAG,KAAKihC,EAAOjhC,CAAG,IAAIihC,EAAOjhC,CAAG,IAAI,CAAA,GAAI,OAAO,CAAC5P,CAAG,CAAC,IAE3D6wC,EAAOjhC,CAAG,IAAIihC,EAAOjhC,CAAG,IAAIihC,EAAOjhC,CAAG,IAAI,OAAO5P,IAAMA;AAAA,MAE/D;AAAA,IACA,CAAG,GAEM6wC;AAAA,EACT;;;;;;AClDA,MAAI3vC,IAAQsnC;AAEZ,SAAAuI,KACE7vC,EAAM,qBAAoB;AAAA;AAAA;AAAA,IAIvB,WAA8B;AAC7B,UAAI8vC,IAAO,kBAAkB,KAAK,UAAU,SAAS,GACjDC,IAAiB,SAAS,cAAc,GAAG,GAC3CC;AAQJ,eAASC,EAAWzJ,GAAK;AACvB,YAAI0J,IAAO1J;AAEX,eAAIsJ,MAEFC,EAAe,aAAa,QAAQG,CAAI,GACxCA,IAAOH,EAAe,OAGxBA,EAAe,aAAa,QAAQG,CAAI,GAGjC;AAAA,UACL,MAAMH,EAAe;AAAA,UACrB,UAAUA,EAAe,WAAWA,EAAe,SAAS,QAAQ,MAAM,EAAE,IAAI;AAAA,UAChF,MAAMA,EAAe;AAAA,UACrB,QAAQA,EAAe,SAASA,EAAe,OAAO,QAAQ,OAAO,EAAE,IAAI;AAAA,UAC3E,MAAMA,EAAe,OAAOA,EAAe,KAAK,QAAQ,MAAM,EAAE,IAAI;AAAA,UACpE,UAAUA,EAAe;AAAA,UACzB,MAAMA,EAAe;AAAA,UACrB,UAAWA,EAAe,SAAS,OAAO,CAAC,MAAM,MAC/CA,EAAe,WACf,MAAMA,EAAe;AAAA,QACjC;AAAA,MACA;AAEM,aAAAC,IAAYC,EAAW,OAAO,SAAS,IAAI,GAQpC,SAAyBE,GAAY;AAC1C,YAAIR,IAAU3vC,EAAM,SAASmwC,CAAU,IAAKF,EAAWE,CAAU,IAAIA;AACrE,eAAQR,EAAO,aAAaK,EAAU,YAClCL,EAAO,SAASK,EAAU;AAAA,MACtC;AAAA,IACA,EAAK;AAAA;AAAA;AAAA,IAGA,2BAAiC;AAChC,aAAO,WAA2B;AAChC,eAAO;AAAA,MACf;AAAA,IACA,EAAK;AAAA;;;;;;AChEL,MAAInF,IAAavD,IACbtnC,IAAQqrC;AAUZ,WAAS+E,EAAczsC,GAAS6/B,GAAQsH,GAAS;AAE/C,IAAAD,EAAW,KAAK,MAAMlnC,KAAkB,YAAsBknC,EAAW,cAAcrH,GAAQsH,CAAO,GACtG,KAAK,OAAO;AAAA,EACd;AAEA,SAAA9qC,EAAM,SAASowC,GAAevF,GAAY;AAAA,IACxC,YAAY;AAAA,EACd,CAAC,GAEDwF,KAAiBD;;;;wBCrBjBE,KAAiB,SAAuB9J,GAAK;AAC3C,QAAI5I,IAAQ,4BAA4B,KAAK4I,CAAG;AAChD,WAAO5I,KAASA,EAAM,CAAC,KAAK;AAAA,EAC9B;;;;;;ACHA,MAAI59B,IAAQsnC,IACRoH,IAASrD,GAAA,GACTyD,IAAUvD,GAAA,GACV2B,IAAWqD,IACXhB,IAAgBiB,IAChBd,IAAee,GAAA,GACfZ,IAAkBa,GAAA,GAClBC,IAAuBC,IACvB/F,IAAagG,IACbT,IAAgBU,GAAA,GAChBR,IAAgBS,GAAA,GAChBhD,IAAWiD;AAEf,SAAAC,KAAiB,SAAoBzN,GAAQ;AAC3C,WAAO,IAAI,QAAQ,SAA4BmL,GAASC,GAAQ;AAC9D,UAAIsC,IAAc1N,EAAO,MACrB2N,IAAiB3N,EAAO,SACxB4N,IAAe5N,EAAO,cACtB6N,IAAgB7N,EAAO,eACvB8N;AACJ,eAASC,IAAO;AACd,QAAI/N,EAAO,eACTA,EAAO,YAAY,YAAY8N,CAAU,GAGvC9N,EAAO,UACTA,EAAO,OAAO,oBAAoB,SAAS8N,CAAU;AAAA,MAE7D;AAEI,MAAItxC,EAAM,WAAWkxC,CAAW,KAAKlxC,EAAM,qBAAoB,KAC7D,OAAOmxC,EAAe,cAAc;AAGtC,UAAIrG,IAAU,IAAI,eAAc;AAGhC,UAAItH,EAAO,MAAM;AACf,YAAIgO,IAAWhO,EAAO,KAAK,YAAY,IACnCiO,IAAWjO,EAAO,KAAK,WAAW,SAAS,mBAAmBA,EAAO,KAAK,QAAQ,CAAC,IAAI;AAC3F,QAAA2N,EAAe,gBAAgB,WAAW,KAAKK,IAAW,MAAMC,CAAQ;AAAA,MAC9E;AAEI,UAAIC,IAAWnC,EAAc/L,EAAO,SAASA,EAAO,GAAG;AAEvD,MAAAsH,EAAQ,KAAKtH,EAAO,OAAO,YAAW,GAAI0J,EAASwE,GAAUlO,EAAO,QAAQA,EAAO,gBAAgB,GAAG,EAAI,GAG1GsH,EAAQ,UAAUtH,EAAO;AAEzB,eAASmO,IAAY;AACnB,YAAK7G,GAIL;AAAA,cAAI8G,IAAkB,2BAA2B9G,IAAU4E,EAAa5E,EAAQ,sBAAqB,CAAE,IAAI,MACvG+G,IAAe,CAACT,KAAgBA,MAAiB,UAAWA,MAAiB,SAC/EtG,EAAQ,eAAeA,EAAQ,UAC7BC,KAAW;AAAA,YACb,MAAM8G;AAAA,YACN,QAAQ/G,EAAQ;AAAA,YAChB,YAAYA,EAAQ;AAAA,YACpB,SAAS8G;AAAA,YACT,QAAQpO;AAAA,YACR,SAASsH;AAAA,UACjB;AAEM,UAAA4D,EAAO,SAAkBnwC,IAAO;AAC9B,YAAAowC,EAAQpwC,EAAK,GACbgzC,EAAI;AAAA,UACZ,GAAS,SAAiBO,IAAK;AACvB,YAAAlD,EAAOkD,EAAG,GACVP,EAAI;AAAA,UACZ,GAASxG,EAAQ,GAGXD,IAAU;AAAA;AAAA,MAChB;AAmEI,UAjEI,eAAeA,IAEjBA,EAAQ,YAAY6G,IAGpB7G,EAAQ,qBAAqB,WAAsB;AACjD,QAAI,CAACA,KAAWA,EAAQ,eAAe,KAQnCA,EAAQ,WAAW,KAAK,EAAEA,EAAQ,eAAeA,EAAQ,YAAY,QAAQ,OAAO,MAAM,MAK9F,WAAW6G,CAAS;AAAA,MAC5B,GAII7G,EAAQ,UAAU,WAAuB;AACvC,QAAKA,MAIL8D,EAAO,IAAI/D,EAAW,mBAAmBA,EAAW,cAAcrH,GAAQsH,CAAO,CAAC,GAGlFA,IAAU;AAAA,MAChB,GAGIA,EAAQ,UAAU,WAAuB;AAGvC,QAAA8D,EAAO,IAAI/D,EAAW,iBAAiBA,EAAW,aAAarH,GAAQsH,CAAO,CAAC,GAG/EA,IAAU;AAAA,MAChB,GAGIA,EAAQ,YAAY,WAAyB;AAC3C,YAAIiH,IAAsBvO,EAAO,UAAU,gBAAgBA,EAAO,UAAU,gBAAgB,oBACxFoK,KAAepK,EAAO,gBAAgBmN;AAC1C,QAAInN,EAAO,wBACTuO,IAAsBvO,EAAO,sBAE/BoL,EAAO,IAAI/D;AAAA,UACTkH;AAAA,UACAnE,GAAa,sBAAsB/C,EAAW,YAAYA,EAAW;AAAA,UACrErH;AAAA,UACAsH;AAAA,QAAO,CAAC,GAGVA,IAAU;AAAA,MAChB,GAKQ9qC,EAAM,2BAERqxC,KAAiBrxC,EAAM,WAAWqxC,CAAa,MAAMA,IAAgBA,EAAc7N,CAAM,IACrF6N,KAAkBA,MAAkB,MAASxB,EAAgB6B,CAAQ,IAAI;AAE3E,YAAIM,IAAYxO,EAAO,kBAAkBA,EAAO,kBAAkBsL,EAAQ,KAAKtL,EAAO,cAAc;AACpG,QAAIwO,MACFb,EAAe3N,EAAO,cAAc,IAAIwO;AAAA,MAElD;AAII,MAAI,sBAAsBlH,KACxB9qC,EAAM,QAAQmxC,GAAgB,SAA0BryC,GAAK4P,IAAK;AAChE,QAAI,OAAOwiC,IAAgB,OAAexiC,GAAI,YAAW,MAAO,iBAE9D,OAAOyiC,EAAeziC,EAAG,IAGzBo8B,EAAQ,iBAAiBp8B,IAAK5P,CAAG;AAAA,MAE3C,CAAO,GAIEkB,EAAM,YAAYwjC,EAAO,eAAe,MAC3CsH,EAAQ,kBAAkB,CAAC,CAACtH,EAAO,kBAIjC4N,KAAgBA,MAAiB,WACnCtG,EAAQ,eAAetH,EAAO,eAI5B,OAAOA,EAAO,sBAAuB,cACvCsH,EAAQ,iBAAiB,YAAYtH,EAAO,kBAAkB,GAI5D,OAAOA,EAAO,oBAAqB,cAAcsH,EAAQ,UAC3DA,EAAQ,OAAO,iBAAiB,YAAYtH,EAAO,gBAAgB,IAGjEA,EAAO,eAAeA,EAAO,YAG/B8N,IAAa,SAAS3mB,GAAQ;AAC5B,QAAKmgB,MAGL8D,EAAO,CAACjkB,KAAUA,EAAO,OAAO,IAAIylB,EAAc,MAAM5M,GAAQ,GAAG,IAAI7Y,CAAM,GAC7EmgB,EAAQ,MAAK,GACbA,IAAU;AAAA,MAClB,GAEMtH,EAAO,eAAeA,EAAO,YAAY,UAAU8N,CAAU,GACzD9N,EAAO,WACTA,EAAO,OAAO,UAAU8N,EAAU,IAAK9N,EAAO,OAAO,iBAAiB,SAAS8N,CAAU,KAKzF,CAACJ,KAAeA,MAAgB,MAASA,MAAgB,KAAKA,MAAgB,OAChFA,IAAc;AAGhB,UAAIe,IAAW3B,EAAcoB,CAAQ;AAErC,UAAIO,KAAYlE,EAAS,UAAU,QAAQkE,CAAQ,MAAM,IAAI;AAC3D,QAAArD,EAAO,IAAI/D,EAAW,0BAA0BoH,IAAW,KAAKpH,EAAW,iBAAiBrH,CAAM,CAAC;AACnG;AAAA,MACN;AAII,MAAAsH,EAAQ,KAAKoG,CAAW;AAAA,IAC5B,CAAG;AAAA,EACH;;AC/NA,IAAIlxC,KAAQsnC,IACRmG,KAAsBpC,IACtBR,KAAaU,IACboF,KAAuBJ,IACvBtE,KAAauE,IACbxC,KAAmByC,IACnB1C,KAAW2C,IACXrC,KAAiBuC,IAEjBsB,KAAuB;AAAA,EACzB,gBAAgB;AAClB;AAEA,SAASC,GAAsBzE,GAASnvC,GAAO;AAC7C,EAAI,CAACyB,GAAM,YAAY0tC,CAAO,KAAK1tC,GAAM,YAAY0tC,EAAQ,cAAc,CAAC,MAC1EA,EAAQ,cAAc,IAAInvC;AAE9B;AAEA,SAAS6zC,KAAoB;AAC3B,MAAIC;AACJ,UAAI,OAAO,iBAAmB,OAGnB,OAAO,UAAY,OAAe,OAAO,UAAU,SAAS,KAAK,OAAO,MAAM,wBAEvFA,IAAUvB,GAAA,IAELuB;AACT;AAEA,SAASC,GAAgBC,GAAUC,GAAQzF,GAAS;AAClD,MAAI/sC,GAAM,SAASuyC,CAAQ;AACzB,QAAI;AACF,cAACC,KAAU,KAAK,OAAOD,CAAQ,GACxBvyC,GAAM,KAAKuyC,CAAQ;AAAA,IAChC,SAAanQ,GAAG;AACV,UAAIA,EAAE,SAAS;AACb,cAAMA;AAAA,IAEd;AAGE,UAAQ2K,KAAW,KAAK,WAAWwF,CAAQ;AAC7C;AAEA,IAAI77B,KAAW;AAAA,EAEb,cAAci6B;AAAA,EAEd,SAASyB,GAAiB;AAAA,EAE1B,kBAAkB,CAAC,SAA0B70C,GAAMmwC,GAAS;AAC1DD,IAAAA,GAAoBC,GAAS,QAAQ,GACrCD,GAAoBC,GAAS,cAAc;AAE3C,QAAI+E,IAAc/E,KAAWA,EAAQ,cAAc,KAAK,IACpDgF,IAAqBD,EAAY,QAAQ,kBAAkB,IAAI,IAC/DE,IAAkB3yC,GAAM,SAASzC,CAAI;AAEzC,IAAIo1C,KAAmB3yC,GAAM,WAAWzC,CAAI,MAC1CA,IAAO,IAAI,SAASA,CAAI;AAG1B,QAAIorC,IAAa3oC,GAAM,WAAWzC,CAAI;AAEtC,QAAIorC;AACF,aAAO+J,IAAqB,KAAK,UAAUrE,GAAe9wC,CAAI,CAAC,IAAIA;AAGrE,QAAIyC,GAAM,cAAczC,CAAI,KAC1ByC,GAAM,SAASzC,CAAI,KACnByC,GAAM,SAASzC,CAAI,KACnByC,GAAM,OAAOzC,CAAI,KACjByC,GAAM,OAAOzC,CAAI;AAEjB,aAAOA;AAET,QAAIyC,GAAM,kBAAkBzC,CAAI;AAC9B,aAAOA,EAAK;AAEd,QAAIyC,GAAM,kBAAkBzC,CAAI;AAC9B,aAAA40C,GAAsBzE,GAAS,iDAAiD,GACzEnwC,EAAK,SAAQ;AAGtB,QAAIirC;AAEJ,QAAImK,GAAiB;AACnB,UAAIF,EAAY,QAAQ,mCAAmC,MAAM;AAC/D,eAAOzE,GAAiBzwC,GAAM,KAAK,cAAc,EAAE,SAAQ;AAG7D,WAAKirC,IAAaxoC,GAAM,WAAWzC,CAAI,MAAMk1C,EAAY,QAAQ,qBAAqB,IAAI,IAAI;AAC5F,YAAIG,IAAY,KAAK,OAAO,KAAK,IAAI;AAErC,eAAO3G;AAAA,UACLzD,IAAa,EAAC,WAAWjrC,EAAI,IAAIA;AAAA,UACjCq1C,KAAa,IAAIA,EAAS;AAAA,UAC1B,KAAK;AAAA,QACf;AAAA,MACA;AAAA,IACA;AAEI,WAAID,KAAmBD,KACrBP,GAAsBzE,GAAS,kBAAkB,GAC1C4E,GAAgB/0C,CAAI,KAGtBA;AAAA,EACX,CAAG;AAAA,EAED,mBAAmB,CAAC,SAA2BA,GAAM;AACnD,QAAIqwC,IAAe,KAAK,gBAAgBl3B,GAAS,cAC7Cm8B,IAAoBjF,KAAgBA,EAAa,mBACjDkF,IAAgB,KAAK,iBAAiB;AAE1C,QAAIv1C,KAAQyC,GAAM,SAASzC,CAAI,MAAOs1C,KAAqB,CAAC,KAAK,gBAAiBC,IAAgB;AAChG,UAAIC,IAAoBnF,KAAgBA,EAAa,mBACjDoF,IAAoB,CAACD,KAAqBD;AAE9C,UAAI;AACF,eAAO,KAAK,MAAMv1C,CAAI;AAAA,MAC9B,SAAe6kC,GAAG;AACV,YAAI4Q;AACF,gBAAI5Q,EAAE,SAAS,gBACPyI,GAAW,KAAKzI,GAAGyI,GAAW,kBAAkB,MAAM,MAAM,KAAK,QAAQ,IAE3EzI;AAAA,MAEhB;AAAA,IACA;AAEI,WAAO7kC;AAAA,EACX,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,SAAS;AAAA,EAET,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAEhB,kBAAkB;AAAA,EAClB,eAAe;AAAA,EAEf,KAAK;AAAA,IACH,UAAUwwC,GAAS,QAAQ;AAAA,IAC3B,MAAMA,GAAS,QAAQ;AAAA,EAC3B;AAAA,EAEE,gBAAgB,SAAwBnZ,GAAQ;AAC9C,WAAOA,KAAU,OAAOA,IAAS;AAAA,EACrC;AAAA,EAEE,SAAS;AAAA,IACP,QAAQ;AAAA,MACN,QAAU;AAAA,IAChB;AAAA,EACA;AACA;AAEA50B,GAAM,QAAQ,CAAC,UAAU,OAAO,MAAM,GAAG,SAA6BizC,GAAQ;AAC5Ev8B,EAAAA,GAAS,QAAQu8B,CAAM,IAAI,CAAA;AAC7B,CAAC;AAEDjzC,GAAM,QAAQ,CAAC,QAAQ,OAAO,OAAO,GAAG,SAA+BizC,GAAQ;AAC7Ev8B,EAAAA,GAAS,QAAQu8B,CAAM,IAAIjzC,GAAM,MAAMkyC,EAAoB;AAC7D,CAAC;AAED,IAAAgB,KAAiBx8B,IC5Kb1W,KAAQsnC,IACR5wB,KAAW20B,IAWf8H,KAAiB,SAAuB51C,GAAMmwC,GAAS9Y,GAAQwe,GAAK;AAClE,MAAIvqB,IAAU,QAAQnS;AAEtB1W,SAAAA,GAAM,QAAQozC,GAAK,SAAmBrjC,GAAI;AACxC,IAAAxS,IAAOwS,EAAG,KAAK8Y,GAAStrB,GAAMmwC,GAAS9Y,CAAM;AAAA,EACjD,CAAG,GAEMr3B;AACT;;wBCpBA81C,KAAiB,SAAkB90C,GAAO;AACxC,WAAO,CAAC,EAAEA,KAASA,EAAM;AAAA,EAC3B;;ACFA,IAAIyB,KAAQsnC,IACR6L,KAAgB9H,IAChBgI,KAAW9H,GAAA,GACX70B,KAAW65B,IACXH,KAAgBI,GAAA,GAChB/C,KAAsBgD;AAK1B,SAAS6C,GAA6B9P,GAAQ;AAK5C,MAJIA,EAAO,eACTA,EAAO,YAAY,iBAAgB,GAGjCA,EAAO,UAAUA,EAAO,OAAO;AACjC,UAAM,IAAI4M,GAAa;AAE3B;AAQA,IAAAmD,KAAiB,SAAyB/P,GAAQ;AAChD,EAAA8P,GAA6B9P,CAAM,GAGnCA,EAAO,UAAUA,EAAO,WAAW,CAAA,GAGnCA,EAAO,OAAO2P,GAAc;AAAA,IAC1B3P;AAAA,IACAA,EAAO;AAAA,IACPA,EAAO;AAAA,IACP;AAAA,IACAA,EAAO;AAAA,EACX,GAEEiK,GAAoBjK,EAAO,SAAS,QAAQ,GAC5CiK,GAAoBjK,EAAO,SAAS,cAAc,GAGlDA,EAAO,UAAUxjC,GAAM;AAAA,IACrBwjC,EAAO,QAAQ,UAAU,CAAA;AAAA,IACzBA,EAAO,QAAQA,EAAO,MAAM,KAAK,CAAA;AAAA,IACjCA,EAAO;AAAA,EACX,GAEExjC,GAAM;AAAA,IACJ,CAAC,UAAU,OAAO,QAAQ,QAAQ,OAAO,SAAS,QAAQ;AAAA,IAC1D,SAA2BizC,GAAQ;AACjC,aAAOzP,EAAO,QAAQyP,CAAM;AAAA,IAClC;AAAA,EACA;AAEE,MAAIZ,IAAU7O,EAAO,WAAW9sB,GAAS;AAEzC,SAAO27B,EAAQ7O,CAAM,EAAE,KAAK,SAA6BuH,GAAU;AACjE,WAAAuI,GAA6B9P,CAAM,GAGnCuH,EAAS,OAAOoI,GAAc;AAAA,MAC5B3P;AAAA,MACAuH,EAAS;AAAA,MACTA,EAAS;AAAA,MACTA,EAAS;AAAA,MACTvH,EAAO;AAAA,IACb,GAEWuH;AAAA,EACX,GAAK,SAA4ByI,GAAQ;AACrC,WAAKH,GAASG,CAAM,MAClBF,GAA6B9P,CAAM,GAG/BgQ,KAAUA,EAAO,aACnBA,EAAO,SAAS,OAAOL,GAAc;AAAA,MACnC3P;AAAA,MACAgQ,EAAO,SAAS;AAAA,MAChBA,EAAO,SAAS;AAAA,MAChBA,EAAO,SAAS;AAAA,MAChBhQ,EAAO;AAAA,IACjB,KAIW,QAAQ,OAAOgQ,CAAM;AAAA,EAChC,CAAG;AACH,GC3FIxzC,KAAQsnC,IAUZmM,KAAiB,SAAqBC,GAASC,GAAS;AAEtD,EAAAA,IAAUA,KAAW,CAAA;AACrB,MAAInQ,IAAS,CAAA;AAEb,WAASoQ,EAAeplC,GAAQC,GAAQ;AACtC,WAAIzO,GAAM,cAAcwO,CAAM,KAAKxO,GAAM,cAAcyO,CAAM,IACpDzO,GAAM,MAAMwO,GAAQC,CAAM,IACxBzO,GAAM,cAAcyO,CAAM,IAC5BzO,GAAM,MAAM,CAAA,GAAIwO,CAAM,IACpBxO,GAAM,cAAcyO,CAAM,IAC5BzO,GAAM,MAAM,CAAA,GAAIyO,CAAM,IACpBzO,GAAM,QAAQyO,CAAM,IACtBA,EAAO,MAAK,IAEdA;AAAA,EACX;AAGE,WAASolC,EAAoBjjC,GAAM;AACjC,QAAK5Q,GAAM,YAAY2zC,EAAQ/iC,CAAI,CAAC;AAE7B,UAAI,CAAC5Q,GAAM,YAAY0zC,EAAQ9iC,CAAI,CAAC;AACzC,eAAOgjC,EAAe,QAAWF,EAAQ9iC,CAAI,CAAC;AAAA,UAF9C,QAAOgjC,EAAeF,EAAQ9iC,CAAI,GAAG+iC,EAAQ/iC,CAAI,CAAC;AAAA,EAIxD;AAGE,WAASkjC,EAAiBljC,GAAM;AAC9B,QAAI,CAAC5Q,GAAM,YAAY2zC,EAAQ/iC,CAAI,CAAC;AAClC,aAAOgjC,EAAe,QAAWD,EAAQ/iC,CAAI,CAAC;AAAA,EAEpD;AAGE,WAASmjC,EAAiBnjC,GAAM;AAC9B,QAAK5Q,GAAM,YAAY2zC,EAAQ/iC,CAAI,CAAC;AAE7B,UAAI,CAAC5Q,GAAM,YAAY0zC,EAAQ9iC,CAAI,CAAC;AACzC,eAAOgjC,EAAe,QAAWF,EAAQ9iC,CAAI,CAAC;AAAA,UAF9C,QAAOgjC,EAAe,QAAWD,EAAQ/iC,CAAI,CAAC;AAAA,EAIpD;AAGE,WAASojC,EAAgBpjC,GAAM;AAC7B,QAAIA,KAAQ+iC;AACV,aAAOC,EAAeF,EAAQ9iC,CAAI,GAAG+iC,EAAQ/iC,CAAI,CAAC;AAC7C,QAAIA,KAAQ8iC;AACjB,aAAOE,EAAe,QAAWF,EAAQ9iC,CAAI,CAAC;AAAA,EAEpD;AAEE,MAAIqjC,IAAW;AAAA,IACb,KAAOH;AAAA,IACP,QAAUA;AAAA,IACV,MAAQA;AAAA,IACR,SAAWC;AAAA,IACX,kBAAoBA;AAAA,IACpB,mBAAqBA;AAAA,IACrB,kBAAoBA;AAAA,IACpB,SAAWA;AAAA,IACX,gBAAkBA;AAAA,IAClB,iBAAmBA;AAAA,IACnB,eAAiBA;AAAA,IACjB,SAAWA;AAAA,IACX,cAAgBA;AAAA,IAChB,gBAAkBA;AAAA,IAClB,gBAAkBA;AAAA,IAClB,kBAAoBA;AAAA,IACpB,oBAAsBA;AAAA,IACtB,YAAcA;AAAA,IACd,kBAAoBA;AAAA,IACpB,eAAiBA;AAAA,IACjB,gBAAkBA;AAAA,IAClB,WAAaA;AAAA,IACb,WAAaA;AAAA,IACb,YAAcA;AAAA,IACd,aAAeA;AAAA,IACf,YAAcA;AAAA,IACd,kBAAoBA;AAAA,IACpB,gBAAkBC;AAAA,EACtB;AAEEh0C,SAAAA,GAAM,QAAQ,OAAO,KAAK0zC,CAAO,EAAE,OAAO,OAAO,KAAKC,CAAO,CAAC,GAAG,SAA4B/iC,GAAM;AACjG,QAAIq4B,IAAQgL,EAASrjC,CAAI,KAAKijC,GAC1BK,IAAcjL,EAAMr4B,CAAI;AAC5B,IAAC5Q,GAAM,YAAYk0C,CAAW,KAAKjL,MAAU+K,MAAqBxQ,EAAO5yB,CAAI,IAAIsjC;AAAA,EACrF,CAAG,GAEM1Q;AACT;;wBCtGAjmC,KAAiB;AAAA,IACf,SAAW;AAAA;;ACCb,IAAI42C,KAAU7M,GAAA,EAAuB,SACjCuD,KAAaQ,IAEb+I,KAAa,CAAA;AAGjB,CAAC,UAAU,WAAW,UAAU,YAAY,UAAU,QAAQ,EAAE,QAAQ,SAAS33C,GAAMyH,GAAG;AACxFkwC,EAAAA,GAAW33C,CAAI,IAAI,SAAmBgrC,GAAO;AAC3C,WAAO,OAAOA,MAAUhrC,KAAQ,OAAOyH,IAAI,IAAI,OAAO,OAAOzH;AAAA,EACjE;AACA,CAAC;AAED,IAAI43C,KAAqB,CAAA;AASzBD,GAAW,eAAe,SAAsBE,GAAWnlC,GAASxL,GAAS;AAC3E,WAAS4wC,EAAcC,GAAKC,GAAM;AAChC,WAAO,aAAaN,KAAU,4BAA6BK,IAAM,MAAOC,KAAQ9wC,IAAU,OAAOA,IAAU;AAAA,EAC/G;AAGE,SAAO,SAASpF,GAAOi2C,GAAKE,GAAM;AAChC,QAAIJ,MAAc;AAChB,YAAM,IAAIzJ;AAAA,QACR0J,EAAcC,GAAK,uBAAuBrlC,IAAU,SAASA,IAAU,GAAG;AAAA,QAC1E07B,GAAW;AAAA,MACnB;AAGI,WAAI17B,KAAW,CAACklC,GAAmBG,CAAG,MACpCH,GAAmBG,CAAG,IAAI,IAE1B,QAAQ;AAAA,MACND;AAAA,QACEC;AAAA,QACA,iCAAiCrlC,IAAU;AAAA,MACrD;AAAA,IACA,IAGWmlC,IAAYA,EAAU/1C,GAAOi2C,GAAKE,CAAI,IAAI;AAAA,EACrD;AACA;AASA,SAASC,GAAcxhC,GAAS7P,GAAQsxC,GAAc;AACpD,MAAI,OAAOzhC,KAAY;AACrB,UAAM,IAAI03B,GAAW,6BAA6BA,GAAW,oBAAoB;AAInF,WAFIz8B,IAAO,OAAO,KAAK+E,CAAO,GAC1BjP,IAAIkK,EAAK,QACNlK,MAAM,KAAG;AACd,QAAIswC,IAAMpmC,EAAKlK,CAAC,GACZowC,IAAYhxC,EAAOkxC,CAAG;AAC1B,QAAIF,GAAW;AACb,UAAI/1C,IAAQ4U,EAAQqhC,CAAG,GACnBh2C,IAASD,MAAU,UAAa+1C,EAAU/1C,GAAOi2C,GAAKrhC,CAAO;AACjE,UAAI3U,MAAW;AACb,cAAM,IAAIqsC,GAAW,YAAY2J,IAAM,cAAch2C,GAAQqsC,GAAW,oBAAoB;AAE9F;AAAA,IACN;AACI,QAAI+J,MAAiB;AACnB,YAAM,IAAI/J,GAAW,oBAAoB2J,GAAK3J,GAAW,cAAc;AAAA,EAE7E;AACA;AAEA,IAAAyJ,KAAiB;AAAA,EACf,eAAeK;AAAA,EACf,YAAYP;AACd,GCnFIp0C,KAAQsnC,IACR4F,KAAW7B,IACXgC,KAAqB9B,IACrBgI,KAAkBhD,IAClBkD,KAAcjD,IACdjB,KAAgBkB,IAChB6D,KAAY5D,IAEZ0D,KAAaE,GAAU;AAM3B,SAASO,GAAMC,GAAgB;AAC7B,OAAK,WAAWA,GAChB,KAAK,eAAe;AAAA,IAClB,SAAS,IAAIzH,GAAkB;AAAA,IAC/B,UAAU,IAAIA,GAAkB;AAAA,EACpC;AACA;AAQAwH,GAAM,UAAU,UAAU,SAAiBE,GAAavR,GAAQ;AAG9D,EAAI,OAAOuR,KAAgB,YACzBvR,IAASA,KAAU,CAAA,GACnBA,EAAO,MAAMuR,KAEbvR,IAASuR,KAAe,CAAA,GAG1BvR,IAASiQ,GAAY,KAAK,UAAUjQ,CAAM,GAGtCA,EAAO,SACTA,EAAO,SAASA,EAAO,OAAO,YAAW,IAChC,KAAK,SAAS,SACvBA,EAAO,SAAS,KAAK,SAAS,OAAO,YAAW,IAEhDA,EAAO,SAAS;AAGlB,MAAIoK,IAAepK,EAAO;AAE1B,EAAIoK,MAAiB,UACnB0G,GAAU,cAAc1G,GAAc;AAAA,IACpC,mBAAmBwG,GAAW,aAAaA,GAAW,OAAO;AAAA,IAC7D,mBAAmBA,GAAW,aAAaA,GAAW,OAAO;AAAA,IAC7D,qBAAqBA,GAAW,aAAaA,GAAW,OAAO;AAAA,EACrE,GAAO,EAAK;AAGV,MAAIY,IAAmBxR,EAAO;AAE9BxjC,EAAAA,GAAM,WAAWg1C,CAAgB,MAAMxR,EAAO,mBAAmB,EAAC,WAAWwR,EAAgB;AAG7F,MAAIC,IAA0B,CAAA,GAC1BC,IAAiC;AACrC,OAAK,aAAa,QAAQ,QAAQ,SAAoCC,GAAa;AACjF,IAAI,OAAOA,EAAY,WAAY,cAAcA,EAAY,QAAQ3R,CAAM,MAAM,OAIjF0R,IAAiCA,KAAkCC,EAAY,aAE/EF,EAAwB,QAAQE,EAAY,WAAWA,EAAY,QAAQ;AAAA,EAC/E,CAAG;AAED,MAAIC,IAA2B,CAAA;AAC/B,OAAK,aAAa,SAAS,QAAQ,SAAkCD,GAAa;AAChF,IAAAC,EAAyB,KAAKD,EAAY,WAAWA,EAAY,QAAQ;AAAA,EAC7E,CAAG;AAED,MAAIE;AAEJ,MAAI,CAACH,GAAgC;AACnC,QAAII,IAAQ,CAAC/B,IAAiB,MAAS;AAMvC,SAJA,MAAM,UAAU,QAAQ,MAAM+B,GAAOL,CAAuB,GAC5DK,IAAQA,EAAM,OAAOF,CAAwB,GAE7CC,IAAU,QAAQ,QAAQ7R,CAAM,GACzB8R,EAAM;AACX,MAAAD,IAAUA,EAAQ,KAAKC,EAAM,SAASA,EAAM,OAAO;AAGrD,WAAOD;AAAA,EACX;AAIE,WADIE,IAAY/R,GACTyR,EAAwB,UAAQ;AACrC,QAAIO,IAAcP,EAAwB,MAAK,GAC3CQ,IAAaR,EAAwB,MAAK;AAC9C,QAAI;AACF,MAAAM,IAAYC,EAAYD,CAAS;AAAA,IACvC,SAAanxC,GAAO;AACd,MAAAqxC,EAAWrxC,CAAK;AAChB;AAAA,IACN;AAAA,EACA;AAEE,MAAI;AACF,IAAAixC,IAAU9B,GAAgBgC,CAAS;AAAA,EACvC,SAAWnxC,GAAO;AACd,WAAO,QAAQ,OAAOA,CAAK;AAAA,EAC/B;AAEE,SAAOgxC,EAAyB;AAC9B,IAAAC,IAAUA,EAAQ,KAAKD,EAAyB,SAASA,EAAyB,OAAO;AAG3F,SAAOC;AACT;AAEAR,GAAM,UAAU,SAAS,SAAgBrR,GAAQ;AAC/C,EAAAA,IAASiQ,GAAY,KAAK,UAAUjQ,CAAM;AAC1C,MAAIkO,IAAWnC,GAAc/L,EAAO,SAASA,EAAO,GAAG;AACvD,SAAO0J,GAASwE,GAAUlO,EAAO,QAAQA,EAAO,gBAAgB;AAClE;AAGAxjC,GAAM,QAAQ,CAAC,UAAU,OAAO,QAAQ,SAAS,GAAG,SAA6BizC,GAAQ;AAEvF4B,EAAAA,GAAM,UAAU5B,CAAM,IAAI,SAASzM,GAAKhD,GAAQ;AAC9C,WAAO,KAAK,QAAQiQ,GAAYjQ,KAAU,CAAA,GAAI;AAAA,MAC5C,QAAQyP;AAAA,MACR,KAAKzM;AAAA,MACL,OAAOhD,KAAU,IAAI;AAAA,IAC3B,CAAK,CAAC;AAAA,EACN;AACA,CAAC;AAEDxjC,GAAM,QAAQ,CAAC,QAAQ,OAAO,OAAO,GAAG,SAA+BizC,GAAQ;AAG7E,WAASyC,EAAmBC,GAAQ;AAClC,WAAO,SAAoBnP,GAAKjpC,GAAMimC,GAAQ;AAC5C,aAAO,KAAK,QAAQiQ,GAAYjQ,KAAU,CAAA,GAAI;AAAA,QAC5C,QAAQyP;AAAA,QACR,SAAS0C,IAAS;AAAA,UAChB,gBAAgB;AAAA,QAC1B,IAAY,CAAA;AAAA,QACJ,KAAKnP;AAAA,QACL,MAAMjpC;AAAA,MACd,CAAO,CAAC;AAAA,IACR;AAAA,EACA;AAEEs3C,EAAAA,GAAM,UAAU5B,CAAM,IAAIyC,EAAkB,GAE5Cb,GAAM,UAAU5B,IAAS,MAAM,IAAIyC,EAAmB,EAAI;AAC5D,CAAC;AAED,IAAAE,KAAiBf;;;;AClKjB,MAAIzE,IAAgB9I,GAAA;AAQpB,WAASuO,EAAYC,GAAU;AAC7B,QAAI,OAAOA,KAAa;AACtB,YAAM,IAAI,UAAU,8BAA8B;AAGpD,QAAIC;AAEJ,SAAK,UAAU,IAAI,QAAQ,SAAyBpH,GAAS;AAC3D,MAAAoH,IAAiBpH;AAAA,IACrB,CAAG;AAED,QAAI9C,IAAQ;AAGZ,SAAK,QAAQ,KAAK,SAASlhB,GAAQ;AACjC,UAAKkhB,EAAM,YAIX;AAAA,iBAFI3nC,IAAI2nC,EAAM,WAAW,QAElB3nC,MAAM;AACX,UAAA2nC,EAAM,WAAW3nC,CAAC,EAAEymB,CAAM;AAE5B,QAAAkhB,EAAM,aAAa;AAAA;AAAA,IACvB,CAAG,GAGD,KAAK,QAAQ,OAAO,SAASmK,GAAa;AACxC,UAAIC,GAEAZ,IAAU,IAAI,QAAQ,SAAS1G,GAAS;AAC1C,QAAA9C,EAAM,UAAU8C,CAAO,GACvBsH,IAAWtH;AAAA,MACjB,CAAK,EAAE,KAAKqH,CAAW;AAEnB,aAAAX,EAAQ,SAAS,WAAkB;AACjC,QAAAxJ,EAAM,YAAYoK,CAAQ;AAAA,MAChC,GAEWZ;AAAA,IACX,GAEES,EAAS,SAAgBnyC,GAAS6/B,GAAQsH,GAAS;AACjD,MAAIe,EAAM,WAKVA,EAAM,SAAS,IAAIuE,EAAczsC,GAAS6/B,GAAQsH,CAAO,GACzDiL,EAAelK,EAAM,MAAM;AAAA,IAC/B,CAAG;AAAA,EACH;AAKA,SAAAgK,EAAY,UAAU,mBAAmB,WAA4B;AACnE,QAAI,KAAK;AACP,YAAM,KAAK;AAAA,EAEf,GAMAA,EAAY,UAAU,YAAY,SAAmBK,GAAU;AAC7D,QAAI,KAAK,QAAQ;AACf,MAAAA,EAAS,KAAK,MAAM;AACpB;AAAA,IACJ;AAEE,IAAI,KAAK,aACP,KAAK,WAAW,KAAKA,CAAQ,IAE7B,KAAK,aAAa,CAACA,CAAQ;AAAA,EAE/B,GAMAL,EAAY,UAAU,cAAc,SAAqBK,GAAU;AACjE,QAAK,KAAK,YAGV;AAAA,UAAI95C,IAAQ,KAAK,WAAW,QAAQ85C,CAAQ;AAC5C,MAAI95C,MAAU,MACZ,KAAK,WAAW,OAAOA,GAAO,CAAC;AAAA;AAAA,EAEnC,GAMAy5C,EAAY,SAAS,WAAkB;AACrC,QAAIlrB,GACAkhB,IAAQ,IAAIgK,EAAY,SAAkBzwB,GAAG;AAC/C,MAAAuF,IAASvF;AAAA,IACb,CAAG;AACD,WAAO;AAAA,MACL,OAAOymB;AAAA,MACP,QAAQlhB;AAAA,IACZ;AAAA,EACA,GAEAwrB,KAAiBN;;;;wBC/FjBO,KAAiB,SAAgBxhC,GAAU;AACzC,WAAO,SAAcb,GAAK;AACxB,aAAOa,EAAS,MAAM,MAAMb,CAAG;AAAA,IACnC;AAAA,EACA;;;;;;ACxBA,MAAI/T,IAAQsnC;AAQZ,SAAA+O,KAAiB,SAAsBC,GAAS;AAC9C,WAAOt2C,EAAM,SAASs2C,CAAO,KAAMA,EAAQ,iBAAiB;AAAA,EAC9D;;ACVA,IAAIt2C,KAAQsnC,IACRF,KAAOiE,IACPwJ,KAAQtJ,IACRkI,KAAclD,IACd75B,KAAW85B,IACXnC,KAAiBoC;AAOrB,SAAS8F,GAAeC,GAAe;AACrC,MAAI3tB,IAAU,IAAIgsB,GAAM2B,CAAa,GACjCC,IAAWrP,GAAKyN,GAAM,UAAU,SAAShsB,CAAO;AAGpD,SAAA7oB,GAAM,OAAOy2C,GAAU5B,GAAM,WAAWhsB,CAAO,GAG/C7oB,GAAM,OAAOy2C,GAAU5tB,CAAO,GAG9B4tB,EAAS,SAAS,SAAgB3B,GAAgB;AAChD,WAAOyB,GAAe9C,GAAY+C,GAAe1B,CAAc,CAAC;AAAA,EACpE,GAES2B;AACT;AAGA,IAAIC,KAAQH,GAAe7/B,EAAQ;AAGnCggC,GAAM,QAAQ7B;AAGd6B,GAAM,gBAAgBhG,GAAA;AACtBgG,GAAM,cAAc9F,GAAA;AACpB8F,GAAM,WAAW7F,GAAA;AACjB6F,GAAM,UAAU5F,GAAA,EAAsB;AACtC4F,GAAM,aAAa3F;AAGnB2F,GAAM,aAAa1F;AAGnB0F,GAAM,SAASA,GAAM;AAGrBA,GAAM,MAAM,SAAaC,GAAU;AACjC,SAAO,QAAQ,IAAIA,CAAQ;AAC7B;AACAD,GAAM,SAASE,GAAA;AAGfF,GAAM,eAAeG,GAAA;AAErBH,GAAM,aAAa,SAASjP,GAAO;AACjC,SAAO4G,GAAeruC,GAAM,WAAWynC,CAAK,IAAI,IAAI,SAASA,CAAK,IAAIA,CAAK;AAC7E;AAEAqP,GAAA,UAAiBJ;AAGjBI,GAAA,QAAA,UAAyBJ;qBCnEzBA,KAAiBpP;;ACGjB,IAAIyP,KAAO;AAEX,MAAMC,KACJ,CAACD,MACD,CAAC,EAAE,MAAAx5C,GAAM,MAAAd,QAAW;AAClB,MAAI,OAAOc,KAAS,YAAY;AAC9B,IAAAw5C,EAAK,aAAat6C,CAAI,EAAE,IAAIc,CAAI;AAEhC;AAAA,EACF;AAEA,EAAI,MAAM,QAAQA,CAAI,KACpBA,EAAK,QAAQ,CAACR,MAAS;AACrB,QAAKA,GAEL;AAAA,UAAI,MAAM,QAAQA,CAAI,GAAG;AACvB,QAAAg6C,EAAK,aAAat6C,CAAI,EAAE,IAAI,GAAGM,CAAI;AAEnC;AAAA,MACF;AAEA,MAAI,OAAOA,KAAS,cAClBg6C,EAAK,aAAat6C,CAAI,EAAE,IAAIM,CAAI;AAAA;AAAA,EAEpC,CAAC;AAEL,GAEFk6C,KAAehQ,GAAc;AAAA,EAC3B,IAAItB,GAAa;AAAA,EACjB,MAAM;AAAA,EACN,SAAS;AAAA,IACP,aAAa;AAAA;AAAA,MAEX,SAAS;AAAA,MACT,iBAAiB;AAAA;AAAA,MACjB,SAAS,CAAA;AAAA;AAAA,IACf;AAAA,IACI,cAAc;AAAA;AAAA,MAEZ,SAAS,CAAA;AAAA;AAAA,MACT,UAAU,CAAA;AAAA;AAAA,IAChB;AAAA,EACA;AAAA,EACE,MAAM,CAAC,EAAE,SAAAxyB,IAAU,CAAA,QAAS;AAC1B,UAAM,EAAE,aAAA+jC,IAAc,CAAA,GAAI,cAAAC,IAAe,CAAA,EAAE,IAAKhkC,GAC1C,EAAE,SAAA23B,IAAU,CAAA,GAAI,UAAAC,IAAW,CAAA,EAAE,IAAKoM;AAExC,IAAAJ,KAAOL,GAAM,OAAOQ,CAAW;AAC/B,UAAME,IAAkBJ,GAAyBD,EAAI;AACrD,IAAAK,EAAgB,EAAE,MAAMtM,GAAS,MAAM,UAAS,CAAE,GAClDsM,EAAgB,EAAE,MAAMrM,GAAU,MAAM,WAAU,CAAE;AAAA,EACtD;AAAA,EACA,MAAM,OAAO;AAAA,IACX,SAAS,MAAMgM;AAAA,IACf,KAAK,IAAIrvC,MAASqvC,MAAA,gBAAAA,GAAM,IAAI,GAAGrvC;AAAA,IAC/B,MAAM,IAAIA,MAASqvC,MAAA,gBAAAA,GAAM,KAAK,GAAGrvC;AAAA,IACjC,SAAS,IAAIA,MAASqvC,MAAA,gBAAAA,GAAM,QAAQ,GAAGrvC;AAAA,IACvC,KAAK,IAAIA,MAASqvC,MAAA,gBAAAA,GAAM,IAAI,GAAGrvC;AAAA,IAC/B,QAAQ,IAAIA,MAASqvC,MAAA,gBAAAA,GAAM,OAAO,GAAGrvC;AAAA,EACzC;AACA,CAAC;AChEM,IAAI2vC;AAAAA,CACV,SAAUA,GAAM;AACb,EAAAA,EAAK,cAAc,CAAClyB,MAAM;AAAA,EAAE;AAC5B,WAASmyB,EAASC,GAAM;AAAA,EAAE;AAC1B,EAAAF,EAAK,WAAWC;AAChB,WAASE,EAAYC,GAAI;AACrB,UAAM,IAAI,MAAK;AAAA,EACnB;AACA,EAAAJ,EAAK,cAAcG,GACnBH,EAAK,cAAc,CAAC52B,MAAU;AAC1B,UAAM/T,IAAM,CAAA;AACZ,eAAW3P,KAAQ0jB;AACf,MAAA/T,EAAI3P,CAAI,IAAIA;AAEhB,WAAO2P;AAAA,EACX,GACA2qC,EAAK,qBAAqB,CAAC3qC,MAAQ;AAC/B,UAAMgrC,IAAYL,EAAK,WAAW3qC,CAAG,EAAE,OAAO,CAACirC,MAAM,OAAOjrC,EAAIA,EAAIirC,CAAC,CAAC,KAAM,QAAQ,GAC9EC,IAAW,CAAA;AACjB,eAAWD,KAAKD;AACZ,MAAAE,EAASD,CAAC,IAAIjrC,EAAIirC,CAAC;AAEvB,WAAON,EAAK,aAAaO,CAAQ;AAAA,EACrC,GACAP,EAAK,eAAe,CAAC3qC,MACV2qC,EAAK,WAAW3qC,CAAG,EAAE,IAAI,SAAU01B,GAAG;AACzC,WAAO11B,EAAI01B,CAAC;AAAA,EAChB,CAAC,GAELiV,EAAK,aAAa,OAAO,OAAO,QAAS,aACnC,CAAC3qC,MAAQ,OAAO,KAAKA,CAAG,IACxB,CAACwB,MAAW;AACV,UAAME,IAAO,CAAA;AACb,eAAWM,KAAOR;AACd,MAAI,OAAO,UAAU,eAAe,KAAKA,GAAQQ,CAAG,KAChDN,EAAK,KAAKM,CAAG;AAGrB,WAAON;AAAA,EACX,GACJipC,EAAK,OAAO,CAACtjC,GAAK8jC,MAAY;AAC1B,eAAW96C,KAAQgX;AACf,UAAI8jC,EAAQ96C,CAAI;AACZ,eAAOA;AAAA,EAGnB,GACAs6C,EAAK,YAAY,OAAO,OAAO,aAAc,aACvC,CAACv4C,MAAQ,OAAO,UAAUA,CAAG,IAC7B,CAACA,MAAQ,OAAOA,KAAQ,YAAY,OAAO,SAASA,CAAG,KAAK,KAAK,MAAMA,CAAG,MAAMA;AACtF,WAASg5C,EAAWC,GAAOC,IAAY,OAAO;AAC1C,WAAOD,EAAM,IAAI,CAACj5C,MAAS,OAAOA,KAAQ,WAAW,IAAIA,CAAG,MAAMA,CAAI,EAAE,KAAKk5C,CAAS;AAAA,EAC1F;AACA,EAAAX,EAAK,aAAaS,GAClBT,EAAK,wBAAwB,CAAClyB,GAAG5mB,MACzB,OAAOA,KAAU,WACVA,EAAM,SAAQ,IAElBA;AAEf,GAAG84C,OAASA,KAAO,CAAA,EAAG;AACf,IAAIY;AAAA,CACV,SAAUA,GAAY;AACnB,EAAAA,EAAW,cAAc,CAACC,GAAOC,OACtB;AAAA,IACH,GAAGD;AAAA,IACH,GAAGC;AAAA;AAAA,EACf;AAEA,GAAGF,OAAeA,KAAa,CAAA,EAAG;AAC3B,MAAMG,IAAgBf,GAAK,YAAY;AAAA,EAC1C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC,GACYgB,KAAgB,CAAC96C,MAAS;AAEnC,UADU,OAAOA,GACR;AAAA,IACL,KAAK;AACD,aAAO66C,EAAc;AAAA,IACzB,KAAK;AACD,aAAOA,EAAc;AAAA,IACzB,KAAK;AACD,aAAO,OAAO,MAAM76C,CAAI,IAAI66C,EAAc,MAAMA,EAAc;AAAA,IAClE,KAAK;AACD,aAAOA,EAAc;AAAA,IACzB,KAAK;AACD,aAAOA,EAAc;AAAA,IACzB,KAAK;AACD,aAAOA,EAAc;AAAA,IACzB,KAAK;AACD,aAAOA,EAAc;AAAA,IACzB,KAAK;AACD,aAAI,MAAM,QAAQ76C,CAAI,IACX66C,EAAc,QAErB76C,MAAS,OACF66C,EAAc,OAErB76C,EAAK,QAAQ,OAAOA,EAAK,QAAS,cAAcA,EAAK,SAAS,OAAOA,EAAK,SAAU,aAC7E66C,EAAc,UAErB,OAAO,MAAQ,OAAe76C,aAAgB,MACvC66C,EAAc,MAErB,OAAO,MAAQ,OAAe76C,aAAgB,MACvC66C,EAAc,MAErB,OAAO,OAAS,OAAe76C,aAAgB,OACxC66C,EAAc,OAElBA,EAAc;AAAA,IACzB;AACI,aAAOA,EAAc;AAAA,EACjC;AACA,GCnIaE,IAAejB,GAAK,YAAY;AAAA,EACzC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC;AAKM,MAAMkB,WAAiB,MAAM;AAAA,EAChC,IAAI,SAAS;AACT,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,YAAYC,GAAQ;AAChB,UAAK,GACL,KAAK,SAAS,CAAA,GACd,KAAK,WAAW,CAACC,MAAQ;AACrB,WAAK,SAAS,CAAC,GAAG,KAAK,QAAQA,CAAG;AAAA,IACtC,GACA,KAAK,YAAY,CAACC,IAAO,OAAO;AAC5B,WAAK,SAAS,CAAC,GAAG,KAAK,QAAQ,GAAGA,CAAI;AAAA,IAC1C;AACA,UAAMC,IAAc,WAAW;AAC/B,IAAI,OAAO,iBAEP,OAAO,eAAe,MAAMA,CAAW,IAGvC,KAAK,YAAYA,GAErB,KAAK,OAAO,YACZ,KAAK,SAASH;AAAA,EAClB;AAAA,EACA,OAAOI,GAAS;AACZ,UAAMC,IAASD,KACX,SAAUE,GAAO;AACb,aAAOA,EAAM;AAAA,IACjB,GACEC,IAAc,EAAE,SAAS,GAAE,GAC3BC,IAAe,CAAC50C,MAAU;AAC5B,iBAAW00C,KAAS10C,EAAM;AACtB,YAAI00C,EAAM,SAAS;AACf,UAAAA,EAAM,YAAY,IAAIE,CAAY;AAAA,iBAE7BF,EAAM,SAAS;AACpB,UAAAE,EAAaF,EAAM,eAAe;AAAA,iBAE7BA,EAAM,SAAS;AACpB,UAAAE,EAAaF,EAAM,cAAc;AAAA,iBAE5BA,EAAM,KAAK,WAAW;AAC3B,UAAAC,EAAY,QAAQ,KAAKF,EAAOC,CAAK,CAAC;AAAA,aAErC;AACD,cAAIG,IAAOF,GACP70C,IAAI;AACR,iBAAOA,IAAI40C,EAAM,KAAK,UAAQ;AAC1B,kBAAMhpC,IAAKgpC,EAAM,KAAK50C,CAAC;AAEvB,YADiBA,MAAM40C,EAAM,KAAK,SAAS,KAYvCG,EAAKnpC,CAAE,IAAImpC,EAAKnpC,CAAE,KAAK,EAAE,SAAS,GAAE,GACpCmpC,EAAKnpC,CAAE,EAAE,QAAQ,KAAK+oC,EAAOC,CAAK,CAAC,KAXnCG,EAAKnpC,CAAE,IAAImpC,EAAKnpC,CAAE,KAAK,EAAE,SAAS,GAAE,GAaxCmpC,IAAOA,EAAKnpC,CAAE,GACd5L;AAAA,UACJ;AAAA,QACJ;AAAA,IAER;AACA,WAAA80C,EAAa,IAAI,GACVD;AAAA,EACX;AAAA,EACA,OAAO,OAAOx6C,GAAO;AACjB,QAAI,EAAEA,aAAiBg6C;AACnB,YAAM,IAAI,MAAM,mBAAmBh6C,CAAK,EAAE;AAAA,EAElD;AAAA,EACA,WAAW;AACP,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,UAAU,KAAK,QAAQ84C,GAAK,uBAAuB,CAAC;AAAA,EACpE;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,OAAO,WAAW;AAAA,EAClC;AAAA,EACA,QAAQwB,IAAS,CAACC,MAAUA,EAAM,SAAS;AACvC,UAAMC,IAAc,CAAA,GACdG,IAAa,CAAA;AACnB,eAAWT,KAAO,KAAK;AACnB,UAAIA,EAAI,KAAK,SAAS,GAAG;AACrB,cAAMU,IAAUV,EAAI,KAAK,CAAC;AAC1B,QAAAM,EAAYI,CAAO,IAAIJ,EAAYI,CAAO,KAAK,CAAA,GAC/CJ,EAAYI,CAAO,EAAE,KAAKN,EAAOJ,CAAG,CAAC;AAAA,MACzC;AAEI,QAAAS,EAAW,KAAKL,EAAOJ,CAAG,CAAC;AAGnC,WAAO,EAAE,YAAAS,GAAY,aAAAH,EAAW;AAAA,EACpC;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAO;AAAA,EACvB;AACJ;AACAR,GAAS,SAAS,CAACC,MACD,IAAID,GAASC,CAAM;AChIrC,MAAMY,KAAW,CAACN,GAAO/8C,MAAS;AAC9B,MAAI4H;AACJ,UAAQm1C,EAAM,MAAI;AAAA,IACd,KAAKR,EAAa;AACd,MAAIQ,EAAM,aAAaV,EAAc,YACjCz0C,IAAU,aAGVA,IAAU,YAAYm1C,EAAM,QAAQ,cAAcA,EAAM,QAAQ;AAEpE;AAAA,IACJ,KAAKR,EAAa;AACd,MAAA30C,IAAU,mCAAmC,KAAK,UAAUm1C,EAAM,UAAUzB,GAAK,qBAAqB,CAAC;AACvG;AAAA,IACJ,KAAKiB,EAAa;AACd,MAAA30C,IAAU,kCAAkC0zC,GAAK,WAAWyB,EAAM,MAAM,IAAI,CAAC;AAC7E;AAAA,IACJ,KAAKR,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU,yCAAyC0zC,GAAK,WAAWyB,EAAM,OAAO,CAAC;AACjF;AAAA,IACJ,KAAKR,EAAa;AACd,MAAA30C,IAAU,gCAAgC0zC,GAAK,WAAWyB,EAAM,OAAO,CAAC,eAAeA,EAAM,QAAQ;AACrG;AAAA,IACJ,KAAKR,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAI,OAAOQ,EAAM,cAAe,WACxB,cAAcA,EAAM,cACpBn1C,IAAU,gCAAgCm1C,EAAM,WAAW,QAAQ,KAC/D,OAAOA,EAAM,WAAW,YAAa,aACrCn1C,IAAU,GAAGA,CAAO,sDAAsDm1C,EAAM,WAAW,QAAQ,OAGlG,gBAAgBA,EAAM,aAC3Bn1C,IAAU,mCAAmCm1C,EAAM,WAAW,UAAU,MAEnE,cAAcA,EAAM,aACzBn1C,IAAU,iCAAiCm1C,EAAM,WAAW,QAAQ,MAGpEzB,GAAK,YAAYyB,EAAM,UAAU,IAGhCA,EAAM,eAAe,UAC1Bn1C,IAAU,WAAWm1C,EAAM,UAAU,KAGrCn1C,IAAU;AAEd;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAIQ,EAAM,SAAS,UACfn1C,IAAU,sBAAsBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,aAAa,WAAW,IAAIA,EAAM,OAAO,gBAChHA,EAAM,SAAS,WACpBn1C,IAAU,uBAAuBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,aAAa,MAAM,IAAIA,EAAM,OAAO,kBAC5GA,EAAM,SAAS,WACpBn1C,IAAU,kBAAkBm1C,EAAM,QAAQ,sBAAsBA,EAAM,YAAY,8BAA8B,eAAe,GAAGA,EAAM,OAAO,KAC1IA,EAAM,SAAS,WACpBn1C,IAAU,kBAAkBm1C,EAAM,QAAQ,sBAAsBA,EAAM,YAAY,8BAA8B,eAAe,GAAGA,EAAM,OAAO,KAC1IA,EAAM,SAAS,SACpBn1C,IAAU,gBAAgBm1C,EAAM,QAAQ,sBAAsBA,EAAM,YAAY,8BAA8B,eAAe,GAAG,IAAI,KAAK,OAAOA,EAAM,OAAO,CAAC,CAAC,KAE/Jn1C,IAAU;AACd;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAIQ,EAAM,SAAS,UACfn1C,IAAU,sBAAsBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,YAAY,WAAW,IAAIA,EAAM,OAAO,gBAC/GA,EAAM,SAAS,WACpBn1C,IAAU,uBAAuBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,YAAY,OAAO,IAAIA,EAAM,OAAO,kBAC5GA,EAAM,SAAS,WACpBn1C,IAAU,kBAAkBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,0BAA0B,WAAW,IAAIA,EAAM,OAAO,KACzHA,EAAM,SAAS,WACpBn1C,IAAU,kBAAkBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,0BAA0B,WAAW,IAAIA,EAAM,OAAO,KACzHA,EAAM,SAAS,SACpBn1C,IAAU,gBAAgBm1C,EAAM,QAAQ,YAAYA,EAAM,YAAY,6BAA6B,cAAc,IAAI,IAAI,KAAK,OAAOA,EAAM,OAAO,CAAC,CAAC,KAEpJn1C,IAAU;AACd;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ,KAAK20C,EAAa;AACd,MAAA30C,IAAU,gCAAgCm1C,EAAM,UAAU;AAC1D;AAAA,IACJ,KAAKR,EAAa;AACd,MAAA30C,IAAU;AACV;AAAA,IACJ;AACI,MAAAA,IAAU5H,EAAK,cACfs7C,GAAK,YAAYyB,CAAK;AAAA,EAClC;AACI,SAAO,EAAE,SAAAn1C,EAAO;AACpB;AC1GA,IAAI01C,KAAmBC;AAKhB,SAASC,KAAc;AAC1B,SAAOF;AACX;ACNO,MAAMG,KAAY,CAAC1tB,MAAW;AACjC,QAAM,EAAE,MAAAvuB,GAAM,MAAAouC,GAAM,WAAA8N,GAAW,WAAAC,EAAS,IAAK5tB,GACvC4lB,IAAW,CAAC,GAAG/F,GAAM,GAAI+N,EAAU,QAAQ,CAAA,CAAG,GAC9CC,IAAY;AAAA,IACd,GAAGD;AAAA,IACH,MAAMhI;AAAA,EACd;AACI,MAAIgI,EAAU,YAAY;AACtB,WAAO;AAAA,MACH,GAAGA;AAAA,MACH,MAAMhI;AAAA,MACN,SAASgI,EAAU;AAAA,IAC/B;AAEI,MAAIE,IAAe;AACnB,QAAMC,IAAOJ,EACR,OAAO,CAACK,MAAM,CAAC,CAACA,CAAC,EACjB,MAAK,EACL,QAAO;AACZ,aAAWx8C,KAAOu8C;AACd,IAAAD,IAAet8C,EAAIq8C,GAAW,EAAE,MAAAp8C,GAAM,cAAcq8C,EAAY,CAAE,EAAE;AAExE,SAAO;AAAA,IACH,GAAGF;AAAA,IACH,MAAMhI;AAAA,IACN,SAASkI;AAAA,EACjB;AACA;AAEO,SAASG,EAAkB1pC,GAAKqpC,GAAW;AAC9C,QAAMM,IAAcT,GAAW,GACzBT,IAAQU,GAAU;AAAA,IACpB,WAAWE;AAAA,IACX,MAAMrpC,EAAI;AAAA,IACV,MAAMA,EAAI;AAAA,IACV,WAAW;AAAA,MACPA,EAAI,OAAO;AAAA;AAAA,MACXA,EAAI;AAAA;AAAA,MACJ2pC;AAAA;AAAA,MACAA,MAAgBV,KAAkB,SAAYA;AAAAA;AAAAA,IAC1D,EAAU,OAAO,CAAChuC,MAAM,CAAC,CAACA,CAAC;AAAA,EAC3B,CAAK;AACD,EAAA+E,EAAI,OAAO,OAAO,KAAKyoC,CAAK;AAChC;AACO,MAAMmB,GAAY;AAAA,EACrB,cAAc;AACV,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,QAAQ;AACJ,IAAI,KAAK,UAAU,YACf,KAAK,QAAQ;AAAA,EACrB;AAAA,EACA,QAAQ;AACJ,IAAI,KAAK,UAAU,cACf,KAAK,QAAQ;AAAA,EACrB;AAAA,EACA,OAAO,WAAWrlB,GAAQslB,GAAS;AAC/B,UAAMC,IAAa,CAAA;AACnB,eAAWnzB,KAAKkzB,GAAS;AACrB,UAAIlzB,EAAE,WAAW;AACb,eAAOozB;AACX,MAAIpzB,EAAE,WAAW,WACb4N,EAAO,MAAK,GAChBulB,EAAW,KAAKnzB,EAAE,KAAK;AAAA,IAC3B;AACA,WAAO,EAAE,QAAQ4N,EAAO,OAAO,OAAOulB,EAAU;AAAA,EACpD;AAAA,EACA,aAAa,iBAAiBvlB,GAAQylB,GAAO;AACzC,UAAMC,IAAY,CAAA;AAClB,eAAW/P,KAAQ8P,GAAO;AACtB,YAAM3rC,IAAM,MAAM67B,EAAK,KACjBhsC,IAAQ,MAAMgsC,EAAK;AACzB,MAAA+P,EAAU,KAAK;AAAA,QACX,KAAA5rC;AAAA,QACA,OAAAnQ;AAAA,MAChB,CAAa;AAAA,IACL;AACA,WAAO07C,GAAY,gBAAgBrlB,GAAQ0lB,CAAS;AAAA,EACxD;AAAA,EACA,OAAO,gBAAgB1lB,GAAQylB,GAAO;AAClC,UAAME,IAAc,CAAA;AACpB,eAAWhQ,KAAQ8P,GAAO;AACtB,YAAM,EAAE,KAAA3rC,GAAK,OAAAnQ,EAAK,IAAKgsC;AAGvB,UAFI77B,EAAI,WAAW,aAEfnQ,EAAM,WAAW;AACjB,eAAO67C;AACX,MAAI1rC,EAAI,WAAW,WACfkmB,EAAO,MAAK,GACZr2B,EAAM,WAAW,WACjBq2B,EAAO,MAAK,GACZlmB,EAAI,UAAU,gBAAgB,OAAOnQ,EAAM,QAAU,OAAegsC,EAAK,eACzEgQ,EAAY7rC,EAAI,KAAK,IAAInQ,EAAM;AAAA,IAEvC;AACA,WAAO,EAAE,QAAQq2B,EAAO,OAAO,OAAO2lB,EAAW;AAAA,EACrD;AACJ;AACO,MAAMH,KAAU,OAAO,OAAO;AAAA,EACjC,QAAQ;AACZ,CAAC,GACYI,KAAQ,CAACj8C,OAAW,EAAE,QAAQ,SAAS,OAAAA,EAAK,IAC5Ck8C,KAAK,CAACl8C,OAAW,EAAE,QAAQ,SAAS,OAAAA,EAAK,IACzCm8C,KAAY,CAACpvC,MAAMA,EAAE,WAAW,WAChCqvC,KAAU,CAACrvC,MAAMA,EAAE,WAAW,SAC9BsvC,KAAU,CAACtvC,MAAMA,EAAE,WAAW,SAC9BuvC,KAAU,CAACvvC,MAAM,OAAO,UAAY,OAAeA,aAAa;AC5GtE,IAAIwvC;AAAA,CACV,SAAUA,GAAW;AAClB,EAAAA,EAAU,WAAW,CAACn3C,MAAY,OAAOA,KAAY,WAAW,EAAE,SAAAA,MAAYA,KAAW,CAAA,GAEzFm3C,EAAU,WAAW,CAACn3C,MAAY,OAAOA,KAAY,WAAWA,IAAUA,KAAA,gBAAAA,EAAS;AACvF,GAAGm3C,OAAcA,KAAY,CAAA,EAAG;ACAhC,MAAMC,GAAmB;AAAA,EACrB,YAAYnoC,GAAQrU,GAAOotC,GAAMj9B,GAAK;AAClC,SAAK,cAAc,CAAA,GACnB,KAAK,SAASkE,GACd,KAAK,OAAOrU,GACZ,KAAK,QAAQotC,GACb,KAAK,OAAOj9B;AAAA,EAChB;AAAA,EACA,IAAI,OAAO;AACP,WAAK,KAAK,YAAY,WACd,MAAM,QAAQ,KAAK,IAAI,IACvB,KAAK,YAAY,KAAK,GAAG,KAAK,OAAO,GAAG,KAAK,IAAI,IAGjD,KAAK,YAAY,KAAK,GAAG,KAAK,OAAO,KAAK,IAAI,IAG/C,KAAK;AAAA,EAChB;AACJ;AACA,MAAMssC,KAAe,CAAC3qC,GAAK7R,MAAW;AAClC,MAAIo8C,GAAQp8C,CAAM;AACd,WAAO,EAAE,SAAS,IAAM,MAAMA,EAAO,MAAK;AAG1C,MAAI,CAAC6R,EAAI,OAAO,OAAO;AACnB,UAAM,IAAI,MAAM,2CAA2C;AAE/D,SAAO;AAAA,IACH,SAAS;AAAA,IACT,IAAI,QAAQ;AACR,UAAI,KAAK;AACL,eAAO,KAAK;AAChB,YAAMjM,IAAQ,IAAIm0C,GAASloC,EAAI,OAAO,MAAM;AAC5C,kBAAK,SAASjM,GACP,KAAK;AAAA,IAChB;AAAA,EACZ;AAEA;AACA,SAAS62C,GAAoBnvB,GAAQ;AACjC,MAAI,CAACA;AACD,WAAO,CAAA;AACX,QAAM,EAAE,UAAAstB,GAAU,oBAAA8B,GAAoB,gBAAAC,GAAgB,aAAAC,EAAW,IAAKtvB;AACtE,MAAIstB,MAAa8B,KAAsBC;AACnC,UAAM,IAAI,MAAM,0FAA0F;AAE9G,SAAI/B,IACO,EAAE,UAAUA,GAAU,aAAAgC,EAAW,IAarC,EAAE,UAZS,CAACC,GAAKhrC,MAAQ;AAC5B,UAAM,EAAE,SAAA1M,EAAO,IAAKmoB;AACpB,WAAIuvB,EAAI,SAAS,uBACN,EAAE,SAAS13C,KAAW0M,EAAI,aAAY,IAE7C,OAAOA,EAAI,OAAS,MACb,EAAE,SAAS1M,KAAWw3C,KAAkB9qC,EAAI,aAAY,IAE/DgrC,EAAI,SAAS,iBACN,EAAE,SAAShrC,EAAI,aAAY,IAC/B,EAAE,SAAS1M,KAAWu3C,KAAsB7qC,EAAI,aAAY;AAAA,EACvE,GAC8B,aAAA+qC,EAAW;AAC7C;AACO,MAAME,GAAQ;AAAA,EACjB,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,SAASC,GAAO;AACZ,WAAOlD,GAAckD,EAAM,IAAI;AAAA,EACnC;AAAA,EACA,gBAAgBA,GAAOlrC,GAAK;AACxB,WAAQA,KAAO;AAAA,MACX,QAAQkrC,EAAM,OAAO;AAAA,MACrB,MAAMA,EAAM;AAAA,MACZ,YAAYlD,GAAckD,EAAM,IAAI;AAAA,MACpC,gBAAgB,KAAK,KAAK;AAAA,MAC1B,MAAMA,EAAM;AAAA,MACZ,QAAQA,EAAM;AAAA,IAC1B;AAAA,EACI;AAAA,EACA,oBAAoBA,GAAO;AACvB,WAAO;AAAA,MACH,QAAQ,IAAItB,GAAW;AAAA,MACvB,KAAK;AAAA,QACD,QAAQsB,EAAM,OAAO;AAAA,QACrB,MAAMA,EAAM;AAAA,QACZ,YAAYlD,GAAckD,EAAM,IAAI;AAAA,QACpC,gBAAgB,KAAK,KAAK;AAAA,QAC1B,MAAMA,EAAM;AAAA,QACZ,QAAQA,EAAM;AAAA,MAC9B;AAAA,IACA;AAAA,EACI;AAAA,EACA,WAAWA,GAAO;AACd,UAAM/8C,IAAS,KAAK,OAAO+8C,CAAK;AAChC,QAAIV,GAAQr8C,CAAM;AACd,YAAM,IAAI,MAAM,wCAAwC;AAE5D,WAAOA;AAAA,EACX;AAAA,EACA,YAAY+8C,GAAO;AACf,UAAM/8C,IAAS,KAAK,OAAO+8C,CAAK;AAChC,WAAO,QAAQ,QAAQ/8C,CAAM;AAAA,EACjC;AAAA,EACA,MAAMjB,GAAMuuB,GAAQ;AAChB,UAAMttB,IAAS,KAAK,UAAUjB,GAAMuuB,CAAM;AAC1C,QAAIttB,EAAO;AACP,aAAOA,EAAO;AAClB,UAAMA,EAAO;AAAA,EACjB;AAAA,EACA,UAAUjB,GAAMuuB,GAAQ;AACpB,UAAMzb,IAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAA;AAAA,QACR,QAAOyb,KAAA,gBAAAA,EAAQ,UAAS;AAAA,QACxB,oBAAoBA,KAAA,gBAAAA,EAAQ;AAAA,MAC5C;AAAA,MACY,OAAMA,KAAA,gBAAAA,EAAQ,SAAQ,CAAA;AAAA,MACtB,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR,MAAAvuB;AAAA,MACA,YAAY86C,GAAc96C,CAAI;AAAA,IAC1C,GACciB,IAAS,KAAK,WAAW,EAAE,MAAAjB,GAAM,MAAM8S,EAAI,MAAM,QAAQA,GAAK;AACpE,WAAO2qC,GAAa3qC,GAAK7R,CAAM;AAAA,EACnC;AAAA,EACA,YAAYjB,GAAM;;AACd,UAAM8S,IAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAA;AAAA,QACR,OAAO,CAAC,CAAC,KAAK,WAAW,EAAE;AAAA,MAC3C;AAAA,MACY,MAAM,CAAA;AAAA,MACN,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR,MAAA9S;AAAA,MACA,YAAY86C,GAAc96C,CAAI;AAAA,IAC1C;AACQ,QAAI,CAAC,KAAK,WAAW,EAAE;AACnB,UAAI;AACA,cAAMiB,IAAS,KAAK,WAAW,EAAE,MAAAjB,GAAM,MAAM,CAAA,GAAI,QAAQ8S,GAAK;AAC9D,eAAOuqC,GAAQp8C,CAAM,IACf;AAAA,UACE,OAAOA,EAAO;AAAA,QACtC,IACsB;AAAA,UACE,QAAQ6R,EAAI,OAAO;AAAA,QAC3C;AAAA,MACY,SACOyhC,GAAK;AACR,SAAIpzC,KAAAxB,IAAA40C,KAAA,gBAAAA,EAAK,YAAL,gBAAA50C,EAAc,kBAAd,QAAAwB,EAA6B,SAAS,mBACtC,KAAK,WAAW,EAAE,QAAQ,KAE9B2R,EAAI,SAAS;AAAA,UACT,QAAQ,CAAA;AAAA,UACR,OAAO;AAAA,QAC3B;AAAA,MACY;AAEJ,WAAO,KAAK,YAAY,EAAE,MAAA9S,GAAM,MAAM,CAAA,GAAI,QAAQ8S,EAAG,CAAE,EAAE,KAAK,CAAC7R,MAAWo8C,GAAQp8C,CAAM,IAClF;AAAA,MACE,OAAOA,EAAO;AAAA,IAC9B,IACc;AAAA,MACE,QAAQ6R,EAAI,OAAO;AAAA,IACnC,CAAa;AAAA,EACT;AAAA,EACA,MAAM,WAAW9S,GAAMuuB,GAAQ;AAC3B,UAAMttB,IAAS,MAAM,KAAK,eAAejB,GAAMuuB,CAAM;AACrD,QAAIttB,EAAO;AACP,aAAOA,EAAO;AAClB,UAAMA,EAAO;AAAA,EACjB;AAAA,EACA,MAAM,eAAejB,GAAMuuB,GAAQ;AAC/B,UAAMzb,IAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAA;AAAA,QACR,oBAAoByb,KAAA,gBAAAA,EAAQ;AAAA,QAC5B,OAAO;AAAA,MACvB;AAAA,MACY,OAAMA,KAAA,gBAAAA,EAAQ,SAAQ,CAAA;AAAA,MACtB,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR,MAAAvuB;AAAA,MACA,YAAY86C,GAAc96C,CAAI;AAAA,IAC1C,GACci+C,IAAmB,KAAK,OAAO,EAAE,MAAAj+C,GAAM,MAAM8S,EAAI,MAAM,QAAQA,GAAK,GACpE7R,IAAS,OAAOq8C,GAAQW,CAAgB,IAAIA,IAAmB,QAAQ,QAAQA,CAAgB;AACrG,WAAOR,GAAa3qC,GAAK7R,CAAM;AAAA,EACnC;AAAA,EACA,OAAOi9C,GAAO93C,GAAS;AACnB,UAAM+3C,IAAqB,CAAC58C,MACpB,OAAO6E,KAAY,YAAY,OAAOA,IAAY,MAC3C,EAAE,SAAAA,EAAO,IAEX,OAAOA,KAAY,aACjBA,EAAQ7E,CAAG,IAGX6E;AAGf,WAAO,KAAK,YAAY,CAAC7E,GAAKuR,MAAQ;AAClC,YAAM7R,IAASi9C,EAAM38C,CAAG,GAClB68C,IAAW,MAAMtrC,EAAI,SAAS;AAAA,QAChC,MAAMioC,EAAa;AAAA,QACnB,GAAGoD,EAAmB58C,CAAG;AAAA,MACzC,CAAa;AACD,aAAI,OAAO,UAAY,OAAeN,aAAkB,UAC7CA,EAAO,KAAK,CAACjB,MACXA,IAKM,MAJPo+C,EAAQ,GACD,GAKd,IAEAn9C,IAKM,MAJPm9C,EAAQ,GACD;AAAA,IAKf,CAAC;AAAA,EACL;AAAA,EACA,WAAWF,GAAOG,GAAgB;AAC9B,WAAO,KAAK,YAAY,CAAC98C,GAAKuR,MACrBorC,EAAM38C,CAAG,IAKH,MAJPuR,EAAI,SAAS,OAAOurC,KAAmB,aAAaA,EAAe98C,GAAKuR,CAAG,IAAIurC,CAAc,GACtF,GAKd;AAAA,EACL;AAAA,EACA,YAAYC,GAAY;AACpB,WAAO,IAAIC,GAAW;AAAA,MAClB,QAAQ;AAAA,MACR,UAAUC,EAAsB;AAAA,MAChC,QAAQ,EAAE,MAAM,cAAc,YAAAF,EAAU;AAAA,IACpD,CAAS;AAAA,EACL;AAAA,EACA,YAAYA,GAAY;AACpB,WAAO,KAAK,YAAYA,CAAU;AAAA,EACtC;AAAA,EACA,YAAYG,GAAK;AAEb,SAAK,MAAM,KAAK,gBAChB,KAAK,OAAOA,GACZ,KAAK,QAAQ,KAAK,MAAM,KAAK,IAAI,GACjC,KAAK,YAAY,KAAK,UAAU,KAAK,IAAI,GACzC,KAAK,aAAa,KAAK,WAAW,KAAK,IAAI,GAC3C,KAAK,iBAAiB,KAAK,eAAe,KAAK,IAAI,GACnD,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,GAC7B,KAAK,SAAS,KAAK,OAAO,KAAK,IAAI,GACnC,KAAK,aAAa,KAAK,WAAW,KAAK,IAAI,GAC3C,KAAK,cAAc,KAAK,YAAY,KAAK,IAAI,GAC7C,KAAK,WAAW,KAAK,SAAS,KAAK,IAAI,GACvC,KAAK,WAAW,KAAK,SAAS,KAAK,IAAI,GACvC,KAAK,UAAU,KAAK,QAAQ,KAAK,IAAI,GACrC,KAAK,QAAQ,KAAK,MAAM,KAAK,IAAI,GACjC,KAAK,UAAU,KAAK,QAAQ,KAAK,IAAI,GACrC,KAAK,KAAK,KAAK,GAAG,KAAK,IAAI,GAC3B,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,GAC7B,KAAK,YAAY,KAAK,UAAU,KAAK,IAAI,GACzC,KAAK,QAAQ,KAAK,MAAM,KAAK,IAAI,GACjC,KAAK,UAAU,KAAK,QAAQ,KAAK,IAAI,GACrC,KAAK,QAAQ,KAAK,MAAM,KAAK,IAAI,GACjC,KAAK,WAAW,KAAK,SAAS,KAAK,IAAI,GACvC,KAAK,OAAO,KAAK,KAAK,KAAK,IAAI,GAC/B,KAAK,WAAW,KAAK,SAAS,KAAK,IAAI,GACvC,KAAK,aAAa,KAAK,WAAW,KAAK,IAAI,GAC3C,KAAK,aAAa,KAAK,WAAW,KAAK,IAAI,GAC3C,KAAK,WAAW,IAAI;AAAA,MAChB,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,UAAU,CAACz+C,MAAS,KAAK,WAAW,EAAEA,CAAI;AAAA,IACtD;AAAA,EACI;AAAA,EACA,WAAW;AACP,WAAO0+C,GAAY,OAAO,MAAM,KAAK,IAAI;AAAA,EAC7C;AAAA,EACA,WAAW;AACP,WAAOC,GAAY,OAAO,MAAM,KAAK,IAAI;AAAA,EAC7C;AAAA,EACA,UAAU;AACN,WAAO,KAAK,SAAQ,EAAG,SAAQ;AAAA,EACnC;AAAA,EACA,QAAQ;AACJ,WAAOC,GAAS,OAAO,IAAI;AAAA,EAC/B;AAAA,EACA,UAAU;AACN,WAAOC,GAAW,OAAO,MAAM,KAAK,IAAI;AAAA,EAC5C;AAAA,EACA,GAAGvlC,GAAQ;AACP,WAAOwlC,GAAS,OAAO,CAAC,MAAMxlC,CAAM,GAAG,KAAK,IAAI;AAAA,EACpD;AAAA,EACA,IAAIylC,GAAU;AACV,WAAOC,GAAgB,OAAO,MAAMD,GAAU,KAAK,IAAI;AAAA,EAC3D;AAAA,EACA,UAAUrrC,GAAW;AACjB,WAAO,IAAI6qC,GAAW;AAAA,MAClB,GAAGb,GAAoB,KAAK,IAAI;AAAA,MAChC,QAAQ;AAAA,MACR,UAAUc,EAAsB;AAAA,MAChC,QAAQ,EAAE,MAAM,aAAa,WAAA9qC,EAAS;AAAA,IAClD,CAAS;AAAA,EACL;AAAA,EACA,QAAQ+qC,GAAK;AACT,UAAMQ,IAAmB,OAAOR,KAAQ,aAAaA,IAAM,MAAMA;AACjE,WAAO,IAAIS,GAAW;AAAA,MAClB,GAAGxB,GAAoB,KAAK,IAAI;AAAA,MAChC,WAAW;AAAA,MACX,cAAcuB;AAAA,MACd,UAAUT,EAAsB;AAAA,IAC5C,CAAS;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAO,IAAIW,GAAW;AAAA,MAClB,UAAUX,EAAsB;AAAA,MAChC,MAAM;AAAA,MACN,GAAGd,GAAoB,KAAK,IAAI;AAAA,IAC5C,CAAS;AAAA,EACL;AAAA,EACA,MAAMe,GAAK;AACP,UAAMW,IAAiB,OAAOX,KAAQ,aAAaA,IAAM,MAAMA;AAC/D,WAAO,IAAIY,GAAS;AAAA,MAChB,GAAG3B,GAAoB,KAAK,IAAI;AAAA,MAChC,WAAW;AAAA,MACX,YAAY0B;AAAA,MACZ,UAAUZ,EAAsB;AAAA,IAC5C,CAAS;AAAA,EACL;AAAA,EACA,SAASX,GAAa;AAClB,UAAMyB,IAAO,KAAK;AAClB,WAAO,IAAIA,EAAK;AAAA,MACZ,GAAG,KAAK;AAAA,MACR,aAAAzB;AAAA,IACZ,CAAS;AAAA,EACL;AAAA,EACA,KAAK5sC,GAAQ;AACT,WAAOsuC,GAAY,OAAO,MAAMtuC,CAAM;AAAA,EAC1C;AAAA,EACA,WAAW;AACP,WAAOuuC,GAAY,OAAO,IAAI;AAAA,EAClC;AAAA,EACA,aAAa;AACT,WAAO,KAAK,UAAU,MAAS,EAAE;AAAA,EACrC;AAAA,EACA,aAAa;AACT,WAAO,KAAK,UAAU,IAAI,EAAE;AAAA,EAChC;AACJ;AACA,MAAMC,KAAY,kBACZC,KAAa,eACbC,KAAY,6BAGZC,KAAY,0FACZC,KAAc,qBACdC,KAAW,oDACXC,KAAgB,4SAahBC,KAAa,sFAIbC,KAAc;AACpB,IAAIC;AAEJ,MAAMC,KAAY,uHACZC,KAAgB,4IAGhBC,KAAY,ypBACZC,KAAgB,2rBAEhBC,KAAc,oEAEdC,KAAiB,0EAMjBC,KAAkB,qMAClBC,KAAY,IAAI,OAAO,IAAID,EAAe,GAAG;AACnD,SAASE,GAAgBx2C,GAAM;AAC3B,MAAIy2C,IAAqB;AACzB,EAAIz2C,EAAK,YACLy2C,IAAqB,GAAGA,CAAkB,UAAUz2C,EAAK,SAAS,MAE7DA,EAAK,aAAa,SACvBy2C,IAAqB,GAAGA,CAAkB;AAE9C,QAAMC,IAAoB12C,EAAK,YAAY,MAAM;AACjD,SAAO,8BAA8By2C,CAAkB,IAAIC,CAAiB;AAChF;AACA,SAASC,GAAU32C,GAAM;AACrB,SAAO,IAAI,OAAO,IAAIw2C,GAAgBx2C,CAAI,CAAC,GAAG;AAClD;AAEO,SAAS42C,GAAc52C,GAAM;AAChC,MAAIud,IAAQ,GAAG+4B,EAAe,IAAIE,GAAgBx2C,CAAI,CAAC;AACvD,QAAMgtC,IAAO,CAAA;AACb,SAAAA,EAAK,KAAKhtC,EAAK,QAAQ,OAAO,GAAG,GAC7BA,EAAK,UACLgtC,EAAK,KAAK,sBAAsB,GACpCzvB,IAAQ,GAAGA,CAAK,IAAIyvB,EAAK,KAAK,GAAG,CAAC,KAC3B,IAAI,OAAO,IAAIzvB,CAAK,GAAG;AAClC;AACA,SAASs5B,GAAUC,GAAIrvC,GAAS;AAI5B,SAHK,IAAAA,MAAY,QAAQ,CAACA,MAAYuuC,GAAU,KAAKc,CAAE,MAGlDrvC,MAAY,QAAQ,CAACA,MAAYyuC,GAAU,KAAKY,CAAE;AAI3D;AACA,SAASC,GAAWC,GAAKC,GAAK;AAC1B,MAAI,CAACtB,GAAS,KAAKqB,CAAG;AAClB,WAAO;AACX,MAAI;AACA,UAAM,CAACE,CAAM,IAAIF,EAAI,MAAM,GAAG;AAC9B,QAAI,CAACE;AACD,aAAO;AAEX,UAAMC,IAASD,EACV,QAAQ,MAAM,GAAG,EACjB,QAAQ,MAAM,GAAG,EACjB,OAAOA,EAAO,UAAW,IAAKA,EAAO,SAAS,KAAM,GAAI,GAAG,GAC1DE,IAAU,KAAK,MAAM,KAAKD,CAAM,CAAC;AAOvC,WANI,SAAOC,KAAY,YAAYA,MAAY,QAE3C,SAASA,MAAWA,KAAA,gBAAAA,EAAS,SAAQ,SAErC,CAACA,EAAQ,OAETH,KAAOG,EAAQ,QAAQH;AAAA,EAG/B,QACM;AACF,WAAO;AAAA,EACX;AACJ;AACA,SAASI,GAAYP,GAAIrvC,GAAS;AAI9B,SAHK,IAAAA,MAAY,QAAQ,CAACA,MAAYwuC,GAAc,KAAKa,CAAE,MAGtDrvC,MAAY,QAAQ,CAACA,MAAY0uC,GAAc,KAAKW,CAAE;AAI/D;AACO,MAAMQ,WAAkB1D,GAAQ;AAAA,EACnC,OAAOC,GAAO;AAKV,QAJI,KAAK,KAAK,WACVA,EAAM,OAAO,OAAOA,EAAM,IAAI,IAEf,KAAK,SAASA,CAAK,MACnBnD,EAAc,QAAQ;AACrC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,UAAMxlB,IAAS,IAAIqlB,GAAW;AAC9B,QAAI5pC;AACJ,eAAWorC,KAAS,KAAK,KAAK;AAC1B,UAAIA,EAAM,SAAS;AACf,QAAIF,EAAM,KAAK,SAASE,EAAM,UAC1BprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,UACf,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAASA,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAIF,EAAM,KAAK,SAASE,EAAM,UAC1BprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,UACf,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAASA,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS,UAAU;AAC9B,cAAMwD,IAAS1D,EAAM,KAAK,SAASE,EAAM,OACnCyD,IAAW3D,EAAM,KAAK,SAASE,EAAM;AAC3C,SAAIwD,KAAUC,OACV7uC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACjC4uC,IACAlF,EAAkB1pC,GAAK;AAAA,UACnB,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,UACf,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAASA,EAAM;AAAA,QAC3C,CAAyB,IAEIyD,KACLnF,EAAkB1pC,GAAK;AAAA,UACnB,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,UACf,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAASA,EAAM;AAAA,QAC3C,CAAyB,GAEL7mB,EAAO,MAAK;AAAA,MAEpB,WACS6mB,EAAM,SAAS;AACpB,QAAK8B,GAAW,KAAKhC,EAAM,IAAI,MAC3BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAKgC,OACDA,KAAa,IAAI,OAAOD,IAAa,GAAG,IAEvCC,GAAW,KAAKlC,EAAM,IAAI,MAC3BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAK0B,GAAU,KAAK5B,EAAM,IAAI,MAC1BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAK2B,GAAY,KAAK7B,EAAM,IAAI,MAC5BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAKuB,GAAU,KAAKzB,EAAM,IAAI,MAC1BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAKwB,GAAW,KAAK1B,EAAM,IAAI,MAC3BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,QAAKyB,GAAU,KAAK3B,EAAM,IAAI,MAC1BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,UACnB,YAAY;AAAA,UACZ,MAAMioC,EAAa;AAAA,UACnB,SAASmD,EAAM;AAAA,QACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,eAGX6mB,EAAM,SAAS;AACpB,YAAI;AACA,cAAI,IAAIF,EAAM,IAAI;AAAA,QACtB,QACM;AACF,UAAAlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAMioC,EAAa;AAAA,YACnB,SAASmD,EAAM;AAAA,UACvC,CAAqB,GACD7mB,EAAO,MAAK;AAAA,QAChB;AAAA,UAEC,CAAI6mB,EAAM,SAAS,WACpBA,EAAM,MAAM,YAAY,GACLA,EAAM,MAAM,KAAKF,EAAM,IAAI,MAE1ClrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,MAGX6mB,EAAM,SAAS,SACpBF,EAAM,OAAOA,EAAM,KAAK,KAAI,IAEvBE,EAAM,SAAS,aACfF,EAAM,KAAK,SAASE,EAAM,OAAOA,EAAM,QAAQ,MAChDprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY,EAAE,UAAUmD,EAAM,OAAO,UAAUA,EAAM,SAAQ;AAAA,QAC7D,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,gBACpBF,EAAM,OAAOA,EAAM,KAAK,YAAW,IAE9BE,EAAM,SAAS,gBACpBF,EAAM,OAAOA,EAAM,KAAK,YAAW,IAE9BE,EAAM,SAAS,eACfF,EAAM,KAAK,WAAWE,EAAM,KAAK,MAClCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY,EAAE,YAAYmD,EAAM,MAAK;AAAA,QACrC,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,aACfF,EAAM,KAAK,SAASE,EAAM,KAAK,MAChCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY,EAAE,UAAUmD,EAAM,MAAK;AAAA,QACnC,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,aACN6C,GAAc7C,CAAK,EACtB,KAAKF,EAAM,IAAI,MACtBlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY;AAAA,QACZ,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACNwC,GACH,KAAK1C,EAAM,IAAI,MACtBlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY;AAAA,QACZ,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACN4C,GAAU5C,CAAK,EAClB,KAAKF,EAAM,IAAI,MACtBlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAY;AAAA,QACZ,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,aACf6B,GAAc,KAAK/B,EAAM,IAAI,MAC9BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,OACf8C,GAAUhD,EAAM,MAAME,EAAM,OAAO,MACpCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,QACfgD,GAAWlD,EAAM,MAAME,EAAM,GAAG,MACjCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACfsD,GAAYxD,EAAM,MAAME,EAAM,OAAO,MACtCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,WACfqC,GAAY,KAAKvC,EAAM,IAAI,MAC5BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,cACfsC,GAAe,KAAKxC,EAAM,IAAI,MAC/BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,YAAY;AAAA,QACZ,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAIhByiB,GAAK,YAAYoE,CAAK;AAG9B,WAAO,EAAE,QAAQ7mB,EAAO,OAAO,OAAO2mB,EAAM,KAAI;AAAA,EACpD;AAAA,EACA,OAAOt2B,GAAOk6B,GAAYx7C,GAAS;AAC/B,WAAO,KAAK,WAAW,CAACpG,MAAS0nB,EAAM,KAAK1nB,CAAI,GAAG;AAAA,MAC/C,YAAA4hD;AAAA,MACA,MAAM7G,EAAa;AAAA,MACnB,GAAGwC,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,UAAU83C,GAAO;AACb,WAAO,IAAIuD,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQvD,CAAK;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,MAAM93C,GAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC3E;AAAA,EACA,IAAIA,GAAS;AACT,WAAO,KAAK,UAAU,EAAE,MAAM,OAAO,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EACzE;AAAA,EACA,MAAMA,GAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC3E;AAAA,EACA,KAAKA,GAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC1E;AAAA,EACA,OAAOA,GAAS;AACZ,WAAO,KAAK,UAAU,EAAE,MAAM,UAAU,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC5E;AAAA,EACA,KAAKA,GAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC1E;AAAA,EACA,MAAMA,GAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC3E;AAAA,EACA,KAAKA,GAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC1E;AAAA,EACA,OAAOA,GAAS;AACZ,WAAO,KAAK,UAAU,EAAE,MAAM,UAAU,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC5E;AAAA,EACA,UAAUA,GAAS;AAEf,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,GAAGm3C,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,IAAIwP,GAAS;AACT,WAAO,KAAK,UAAU,EAAE,MAAM,OAAO,GAAG2nC,GAAU,SAAS3nC,CAAO,GAAG;AAAA,EACzE;AAAA,EACA,GAAGA,GAAS;AACR,WAAO,KAAK,UAAU,EAAE,MAAM,MAAM,GAAG2nC,GAAU,SAAS3nC,CAAO,GAAG;AAAA,EACxE;AAAA,EACA,KAAKA,GAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAG2nC,GAAU,SAAS3nC,CAAO,GAAG;AAAA,EAC1E;AAAA,EACA,SAASA,GAAS;AACd,WAAI,OAAOA,KAAY,WACZ,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,SAASA;AAAA,IACzB,CAAa,IAEE,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW,QAAOA,KAAA,gBAAAA,EAAS,aAAc,MAAc,OAAOA,KAAA,gBAAAA,EAAS;AAAA,MACvE,SAAQA,KAAA,gBAAAA,EAAS,WAAU;AAAA,MAC3B,QAAOA,KAAA,gBAAAA,EAAS,UAAS;AAAA,MACzB,GAAG2nC,GAAU,SAAS3nC,KAAA,gBAAAA,EAAS,OAAO;AAAA,IAClD,CAAS;AAAA,EACL;AAAA,EACA,KAAKxP,GAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,SAAAA,EAAO,CAAE;AAAA,EACnD;AAAA,EACA,KAAKwP,GAAS;AACV,WAAI,OAAOA,KAAY,WACZ,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,SAASA;AAAA,IACzB,CAAa,IAEE,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW,QAAOA,KAAA,gBAAAA,EAAS,aAAc,MAAc,OAAOA,KAAA,gBAAAA,EAAS;AAAA,MACvE,GAAG2nC,GAAU,SAAS3nC,KAAA,gBAAAA,EAAS,OAAO;AAAA,IAClD,CAAS;AAAA,EACL;AAAA,EACA,SAASxP,GAAS;AACd,WAAO,KAAK,UAAU,EAAE,MAAM,YAAY,GAAGm3C,GAAU,SAASn3C,CAAO,GAAG;AAAA,EAC9E;AAAA,EACA,MAAMshB,GAAOthB,GAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOshB;AAAA,MACP,GAAG61B,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,SAASpF,GAAO4U,GAAS;AACrB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO5U;AAAA,MACP,UAAU4U,KAAA,gBAAAA,EAAS;AAAA,MACnB,GAAG2nC,GAAU,SAAS3nC,KAAA,gBAAAA,EAAS,OAAO;AAAA,IAClD,CAAS;AAAA,EACL;AAAA,EACA,WAAW5U,GAAOoF,GAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOpF;AAAA,MACP,GAAGu8C,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,SAASpF,GAAOoF,GAAS;AACrB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOpF;AAAA,MACP,GAAGu8C,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,IAAIy7C,GAAWz7C,GAAS;AACpB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOy7C;AAAA,MACP,GAAGtE,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,IAAI07C,GAAW17C,GAAS;AACpB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO07C;AAAA,MACP,GAAGvE,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA,EACA,OAAOyqC,GAAKzqC,GAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOyqC;AAAA,MACP,GAAG0M,GAAU,SAASn3C,CAAO;AAAA,IACzC,CAAS;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,SAASA,GAAS;AACd,WAAO,KAAK,IAAI,GAAGm3C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EAClD;AAAA,EACA,OAAO;AACH,WAAO,IAAIq7C,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,QAAQ;AAAA,IAC1D,CAAS;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAIA,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,eAAe;AAAA,IACjE,CAAS;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAIA,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,eAAe;AAAA,IACjE,CAAS;AAAA,EACL;AAAA,EACA,IAAI,aAAa;AACb,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACM,MAAOA,EAAG,SAAS,UAAU;AAAA,EACjE;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,aAAa;AACb,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,UAAU;AAAA,EACjE;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,KAAK;AAAA,EAC5D;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,WAAW;AACX,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,QAAQ;AAAA,EAC/D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,OAAO;AACP,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,IAAI;AAAA,EAC3D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,WAAW;AACX,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,QAAQ;AAAA,EAC/D;AAAA,EACA,IAAI,cAAc;AAEd,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAACA,MAAOA,EAAG,SAAS,WAAW;AAAA,EAClE;AAAA,EACA,IAAI,YAAY;AACZ,QAAI9e,IAAM;AACV,eAAW8e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR9e,MAAQ,QAAQ8e,EAAG,QAAQ9e,OAC3BA,IAAM8e,EAAG;AAGrB,WAAO9e;AAAA,EACX;AAAA,EACA,IAAI,YAAY;AACZ,QAAIC,IAAM;AACV,eAAW6e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR7e,MAAQ,QAAQ6e,EAAG,QAAQ7e,OAC3BA,IAAM6e,EAAG;AAGrB,WAAO7e;AAAA,EACX;AACJ;AACAue,GAAU,SAAS,CAAClzB,MACT,IAAIkzB,GAAU;AAAA,EACjB,QAAQ,CAAA;AAAA,EACR,UAAUjD,EAAsB;AAAA,EAChC,SAAQjwB,KAAA,gBAAAA,EAAQ,WAAU;AAAA,EAC1B,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAGL,SAASyzB,GAAmBzgD,GAAK0gD,GAAM;AACnC,QAAMC,KAAe3gD,EAAI,SAAQ,EAAG,MAAM,GAAG,EAAE,CAAC,KAAK,IAAI,QACnD4gD,KAAgBF,EAAK,SAAQ,EAAG,MAAM,GAAG,EAAE,CAAC,KAAK,IAAI,QACrDG,IAAWF,IAAcC,IAAeD,IAAcC,GACtDE,IAAS,OAAO,SAAS9gD,EAAI,QAAQ6gD,CAAQ,EAAE,QAAQ,KAAK,EAAE,CAAC,GAC/DE,IAAU,OAAO,SAASL,EAAK,QAAQG,CAAQ,EAAE,QAAQ,KAAK,EAAE,CAAC;AACvE,SAAQC,IAASC,IAAW,MAAMF;AACtC;AACO,MAAMG,WAAkBxE,GAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS,GAClB,KAAK,MAAM,KAAK,KAChB,KAAK,MAAM,KAAK,KAChB,KAAK,OAAO,KAAK;AAAA,EACrB;AAAA,EACA,OAAOC,GAAO;AAKV,QAJI,KAAK,KAAK,WACVA,EAAM,OAAO,OAAOA,EAAM,IAAI,IAEf,KAAK,SAASA,CAAK,MACnBnD,EAAc,QAAQ;AACrC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,QAAI/pC;AACJ,UAAMukB,IAAS,IAAIqlB,GAAW;AAC9B,eAAWwB,KAAS,KAAK,KAAK;AAC1B,MAAIA,EAAM,SAAS,QACVpE,GAAK,UAAUkE,EAAM,IAAI,MAC1BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAU;AAAA,QACV,UAAU;AAAA,QACV,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACHA,EAAM,YAAYF,EAAM,OAAOE,EAAM,QAAQF,EAAM,QAAQE,EAAM,WAE9EprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,QACf,MAAM;AAAA,QACN,WAAWA,EAAM;AAAA,QACjB,OAAO;AAAA,QACP,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACLA,EAAM,YAAYF,EAAM,OAAOE,EAAM,QAAQF,EAAM,QAAQE,EAAM,WAE5EprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,QACf,MAAM;AAAA,QACN,WAAWA,EAAM;AAAA,QACjB,OAAO;AAAA,QACP,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,eAChB8D,GAAmBhE,EAAM,MAAME,EAAM,KAAK,MAAM,MAChDprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAYmD,EAAM;AAAA,QAClB,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,WACf,OAAO,SAASF,EAAM,IAAI,MAC3BlrC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAIhByiB,GAAK,YAAYoE,CAAK;AAG9B,WAAO,EAAE,QAAQ7mB,EAAO,OAAO,OAAO2mB,EAAM,KAAI;AAAA,EACpD;AAAA,EACA,IAAIh9C,GAAOoF,GAAS;AAChB,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAMu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAGpF,GAAOoF,GAAS;AACf,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAOu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACzE;AAAA,EACA,IAAIpF,GAAOoF,GAAS;AAChB,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAMu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAGpF,GAAOoF,GAAS;AACf,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAOu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACzE;AAAA,EACA,SAASo8C,GAAMxhD,GAAOyhD,GAAWr8C,GAAS;AACtC,WAAO,IAAIm8C,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ;AAAA,QACJ,GAAG,KAAK,KAAK;AAAA,QACb;AAAA,UACI,MAAAC;AAAA,UACA,OAAAxhD;AAAA,UACA,WAAAyhD;AAAA,UACA,SAASlF,GAAU,SAASn3C,CAAO;AAAA,QACvD;AAAA,MACA;AAAA,IACA,CAAS;AAAA,EACL;AAAA,EACA,UAAU83C,GAAO;AACb,WAAO,IAAIqE,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQrE,CAAK;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI93C,GAAS;AACT,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,SAASA,GAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,SAASA,GAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,YAAYA,GAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,YAAYA,GAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,WAAWpF,GAAOoF,GAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOpF;AAAA,MACP,SAASu8C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,OAAOA,GAAS;AACZ,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,KAAKA,GAAS;AACV,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO,OAAO;AAAA,MACd,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS,EAAE,UAAU;AAAA,MACT,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO,OAAO;AAAA,MACd,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI,WAAW;AACX,QAAI68B,IAAM;AACV,eAAW8e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR9e,MAAQ,QAAQ8e,EAAG,QAAQ9e,OAC3BA,IAAM8e,EAAG;AAGrB,WAAO9e;AAAA,EACX;AAAA,EACA,IAAI,WAAW;AACX,QAAIC,IAAM;AACV,eAAW6e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR7e,MAAQ,QAAQ6e,EAAG,QAAQ7e,OAC3BA,IAAM6e,EAAG;AAGrB,WAAO7e;AAAA,EACX;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC6e,MAAOA,EAAG,SAAS,SAAUA,EAAG,SAAS,gBAAgBjI,GAAK,UAAUiI,EAAG,KAAK,CAAE;AAAA,EACtH;AAAA,EACA,IAAI,WAAW;AACX,QAAI7e,IAAM,MACND,IAAM;AACV,eAAW8e,KAAM,KAAK,KAAK,QAAQ;AAC/B,UAAIA,EAAG,SAAS,YAAYA,EAAG,SAAS,SAASA,EAAG,SAAS;AACzD,eAAO;AAEN,MAAIA,EAAG,SAAS,SACb9e,MAAQ,QAAQ8e,EAAG,QAAQ9e,OAC3BA,IAAM8e,EAAG,SAERA,EAAG,SAAS,UACb7e,MAAQ,QAAQ6e,EAAG,QAAQ7e,OAC3BA,IAAM6e,EAAG;AAAA,IAErB;AACA,WAAO,OAAO,SAAS9e,CAAG,KAAK,OAAO,SAASC,CAAG;AAAA,EACtD;AACJ;AACAqf,GAAU,SAAS,CAACh0B,MACT,IAAIg0B,GAAU;AAAA,EACjB,QAAQ,CAAA;AAAA,EACR,UAAU/D,EAAsB;AAAA,EAChC,SAAQjwB,KAAA,gBAAAA,EAAQ,WAAU;AAAA,EAC1B,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMm0B,WAAkB3E,GAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS,GAClB,KAAK,MAAM,KAAK,KAChB,KAAK,MAAM,KAAK;AAAA,EACpB;AAAA,EACA,OAAOC,GAAO;AACV,QAAI,KAAK,KAAK;AACV,UAAI;AACA,QAAAA,EAAM,OAAO,OAAOA,EAAM,IAAI;AAAA,MAClC,QACM;AACF,eAAO,KAAK,iBAAiBA,CAAK;AAAA,MACtC;AAGJ,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc;AAC7B,aAAO,KAAK,iBAAiBmD,CAAK;AAEtC,QAAIlrC;AACJ,UAAMukB,IAAS,IAAIqlB,GAAW;AAC9B,eAAWwB,KAAS,KAAK,KAAK;AAC1B,MAAIA,EAAM,SAAS,SACEA,EAAM,YAAYF,EAAM,OAAOE,EAAM,QAAQF,EAAM,QAAQE,EAAM,WAE9EprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,MAAM;AAAA,QACN,SAASmD,EAAM;AAAA,QACf,WAAWA,EAAM;AAAA,QACjB,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,SACLA,EAAM,YAAYF,EAAM,OAAOE,EAAM,QAAQF,EAAM,QAAQE,EAAM,WAE5EprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,MAAM;AAAA,QACN,SAASmD,EAAM;AAAA,QACf,WAAWA,EAAM;AAAA,QACjB,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,eAChBF,EAAM,OAAOE,EAAM,UAAU,OAAO,CAAC,MACrCprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,YAAYmD,EAAM;AAAA,QAClB,SAASA,EAAM;AAAA,MACvC,CAAqB,GACD7mB,EAAO,MAAK,KAIhByiB,GAAK,YAAYoE,CAAK;AAG9B,WAAO,EAAE,QAAQ7mB,EAAO,OAAO,OAAO2mB,EAAM,KAAI;AAAA,EACpD;AAAA,EACA,iBAAiBA,GAAO;AACpB,UAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,WAAAxB,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,UAAUF,EAAc;AAAA,MACxB,UAAU/nC,EAAI;AAAA,IAC1B,CAAS,GACM+pC;AAAA,EACX;AAAA,EACA,IAAI77C,GAAOoF,GAAS;AAChB,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAMu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAGpF,GAAOoF,GAAS;AACf,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAOu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACzE;AAAA,EACA,IAAIpF,GAAOoF,GAAS;AAChB,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAMu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAGpF,GAAOoF,GAAS;AACf,WAAO,KAAK,SAAS,OAAOpF,GAAO,IAAOu8C,GAAU,SAASn3C,CAAO,CAAC;AAAA,EACzE;AAAA,EACA,SAASo8C,GAAMxhD,GAAOyhD,GAAWr8C,GAAS;AACtC,WAAO,IAAIs8C,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ;AAAA,QACJ,GAAG,KAAK,KAAK;AAAA,QACb;AAAA,UACI,MAAAF;AAAA,UACA,OAAAxhD;AAAA,UACA,WAAAyhD;AAAA,UACA,SAASlF,GAAU,SAASn3C,CAAO;AAAA,QACvD;AAAA,MACA;AAAA,IACA,CAAS;AAAA,EACL;AAAA,EACA,UAAU83C,GAAO;AACb,WAAO,IAAIwE,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQxE,CAAK;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,SAAS93C,GAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,SAASA,GAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,YAAYA,GAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,YAAYA,GAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAASm3C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,WAAWpF,GAAOoF,GAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAApF;AAAA,MACA,SAASu8C,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI,WAAW;AACX,QAAI68B,IAAM;AACV,eAAW8e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR9e,MAAQ,QAAQ8e,EAAG,QAAQ9e,OAC3BA,IAAM8e,EAAG;AAGrB,WAAO9e;AAAA,EACX;AAAA,EACA,IAAI,WAAW;AACX,QAAIC,IAAM;AACV,eAAW6e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR7e,MAAQ,QAAQ6e,EAAG,QAAQ7e,OAC3BA,IAAM6e,EAAG;AAGrB,WAAO7e;AAAA,EACX;AACJ;AACAwf,GAAU,SAAS,CAACn0B,MACT,IAAIm0B,GAAU;AAAA,EACjB,QAAQ,CAAA;AAAA,EACR,UAAUlE,EAAsB;AAAA,EAChC,SAAQjwB,KAAA,gBAAAA,EAAQ,WAAU;AAAA,EAC1B,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMo0B,WAAmB5E,GAAQ;AAAA,EACpC,OAAOC,GAAO;AAKV,QAJI,KAAK,KAAK,WACVA,EAAM,OAAO,EAAQA,EAAM,OAEZ,KAAK,SAASA,CAAK,MACnBnD,EAAc,SAAS;AACtC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACA2E,GAAW,SAAS,CAACp0B,MACV,IAAIo0B,GAAW;AAAA,EAClB,UAAUnE,EAAsB;AAAA,EAChC,SAAQjwB,KAAA,gBAAAA,EAAQ,WAAU;AAAA,EAC1B,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMq0B,WAAgB7E,GAAQ;AAAA,EACjC,OAAOC,GAAO;AAKV,QAJI,KAAK,KAAK,WACVA,EAAM,OAAO,IAAI,KAAKA,EAAM,IAAI,IAEjB,KAAK,SAASA,CAAK,MACnBnD,EAAc,MAAM;AACnC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,QAAI,OAAO,MAAMmB,EAAM,KAAK,QAAO,CAAE,GAAG;AACpC,YAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,MACnC,CAAa,GACM8B;AAAA,IACX;AACA,UAAMxlB,IAAS,IAAIqlB,GAAW;AAC9B,QAAI5pC;AACJ,eAAWorC,KAAS,KAAK,KAAK;AAC1B,MAAIA,EAAM,SAAS,QACXF,EAAM,KAAK,QAAO,IAAKE,EAAM,UAC7BprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,QACf,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAASA,EAAM;AAAA,QACf,MAAM;AAAA,MAC9B,CAAqB,GACD7mB,EAAO,MAAK,KAGX6mB,EAAM,SAAS,QAChBF,EAAM,KAAK,QAAO,IAAKE,EAAM,UAC7BprC,IAAM,KAAK,gBAAgBkrC,GAAOlrC,CAAG,GACrC0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAASmD,EAAM;AAAA,QACf,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAASA,EAAM;AAAA,QACf,MAAM;AAAA,MAC9B,CAAqB,GACD7mB,EAAO,MAAK,KAIhByiB,GAAK,YAAYoE,CAAK;AAG9B,WAAO;AAAA,MACH,QAAQ7mB,EAAO;AAAA,MACf,OAAO,IAAI,KAAK2mB,EAAM,KAAK,QAAO,CAAE;AAAA,IAChD;AAAA,EACI;AAAA,EACA,UAAUE,GAAO;AACb,WAAO,IAAI0E,GAAQ;AAAA,MACf,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ1E,CAAK;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI2E,GAASz8C,GAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAOy8C,EAAQ,QAAO;AAAA,MACtB,SAAStF,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI08C,GAAS18C,GAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO08C,EAAQ,QAAO;AAAA,MACtB,SAASvF,GAAU,SAASn3C,CAAO;AAAA,IAC/C,CAAS;AAAA,EACL;AAAA,EACA,IAAI,UAAU;AACV,QAAI68B,IAAM;AACV,eAAW8e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR9e,MAAQ,QAAQ8e,EAAG,QAAQ9e,OAC3BA,IAAM8e,EAAG;AAGrB,WAAO9e,KAAO,OAAO,IAAI,KAAKA,CAAG,IAAI;AAAA,EACzC;AAAA,EACA,IAAI,UAAU;AACV,QAAIC,IAAM;AACV,eAAW6e,KAAM,KAAK,KAAK;AACvB,MAAIA,EAAG,SAAS,UACR7e,MAAQ,QAAQ6e,EAAG,QAAQ7e,OAC3BA,IAAM6e,EAAG;AAGrB,WAAO7e,KAAO,OAAO,IAAI,KAAKA,CAAG,IAAI;AAAA,EACzC;AACJ;AACA0f,GAAQ,SAAS,CAACr0B,MACP,IAAIq0B,GAAQ;AAAA,EACf,QAAQ,CAAA;AAAA,EACR,SAAQr0B,KAAA,gBAAAA,EAAQ,WAAU;AAAA,EAC1B,UAAUiwB,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMw0B,WAAkBhF,GAAQ;AAAA,EACnC,OAAOC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,QAAQ;AACrC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACA+E,GAAU,SAAS,CAACx0B,MACT,IAAIw0B,GAAU;AAAA,EACjB,UAAUvE,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMy0B,WAAqBjF,GAAQ;AAAA,EACtC,OAAOC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,WAAW;AACxC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACAgF,GAAa,SAAS,CAACz0B,MACZ,IAAIy0B,GAAa;AAAA,EACpB,UAAUxE,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM00B,WAAgBlF,GAAQ;AAAA,EACjC,OAAOC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,MAAM;AACnC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACAiF,GAAQ,SAAS,CAAC10B,MACP,IAAI00B,GAAQ;AAAA,EACf,UAAUzE,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM20B,WAAenF,GAAQ;AAAA,EAChC,cAAc;AACV,UAAM,GAAG,SAAS,GAElB,KAAK,OAAO;AAAA,EAChB;AAAA,EACA,OAAOC,GAAO;AACV,WAAOd,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACAkF,GAAO,SAAS,CAAC30B,MACN,IAAI20B,GAAO;AAAA,EACd,UAAU1E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM40B,WAAmBpF,GAAQ;AAAA,EACpC,cAAc;AACV,UAAM,GAAG,SAAS,GAElB,KAAK,WAAW;AAAA,EACpB;AAAA,EACA,OAAOC,GAAO;AACV,WAAOd,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACAmF,GAAW,SAAS,CAAC50B,MACV,IAAI40B,GAAW;AAAA,EAClB,UAAU3E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM60B,WAAiBrF,GAAQ;AAAA,EAClC,OAAOC,GAAO;AACV,UAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,WAAAxB,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,UAAUF,EAAc;AAAA,MACxB,UAAU/nC,EAAI;AAAA,IAC1B,CAAS,GACM+pC;AAAA,EACX;AACJ;AACAuG,GAAS,SAAS,CAAC70B,MACR,IAAI60B,GAAS;AAAA,EAChB,UAAU5E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM80B,WAAgBtF,GAAQ;AAAA,EACjC,OAAOC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,WAAW;AACxC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AACJ;AACAqF,GAAQ,SAAS,CAAC90B,MACP,IAAI80B,GAAQ;AAAA,EACf,UAAU7E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMqwB,WAAiBb,GAAQ;AAAA,EAClC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,GAAK,QAAAukB,EAAM,IAAK,KAAK,oBAAoB2mB,CAAK,GAChDS,IAAM,KAAK;AACjB,QAAI3rC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,QAAI4B,EAAI,gBAAgB,MAAM;AAC1B,YAAMiD,IAAS5uC,EAAI,KAAK,SAAS2rC,EAAI,YAAY,OAC3CkD,IAAW7uC,EAAI,KAAK,SAAS2rC,EAAI,YAAY;AACnD,OAAIiD,KAAUC,OACVnF,EAAkB1pC,GAAK;AAAA,QACnB,MAAM4uC,IAAS3G,EAAa,UAAUA,EAAa;AAAA,QACnD,SAAU4G,IAAWlD,EAAI,YAAY,QAAQ;AAAA,QAC7C,SAAUiD,IAASjD,EAAI,YAAY,QAAQ;AAAA,QAC3C,MAAM;AAAA,QACN,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAASA,EAAI,YAAY;AAAA,MAC7C,CAAiB,GACDpnB,EAAO,MAAK;AAAA,IAEpB;AA2BA,QA1BIonB,EAAI,cAAc,QACd3rC,EAAI,KAAK,SAAS2rC,EAAI,UAAU,UAChCjC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS0D,EAAI,UAAU;AAAA,MACvB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO;AAAA,MACP,SAASA,EAAI,UAAU;AAAA,IAC3C,CAAiB,GACDpnB,EAAO,MAAK,IAGhBonB,EAAI,cAAc,QACd3rC,EAAI,KAAK,SAAS2rC,EAAI,UAAU,UAChCjC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS0D,EAAI,UAAU;AAAA,MACvB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO;AAAA,MACP,SAASA,EAAI,UAAU;AAAA,IAC3C,CAAiB,GACDpnB,EAAO,MAAK,IAGhBvkB,EAAI,OAAO;AACX,aAAO,QAAQ,IAAI,CAAC,GAAGA,EAAI,IAAI,EAAE,IAAI,CAACtT,GAAM,MACjCi/C,EAAI,KAAK,YAAY,IAAIjB,GAAmB1qC,GAAKtT,GAAMsT,EAAI,MAAM,CAAC,CAAC,CAC7E,CAAC,EAAE,KAAK,CAAC7R,MACCy7C,GAAY,WAAWrlB,GAAQp2B,CAAM,CAC/C;AAEL,UAAMA,IAAS,CAAC,GAAG6R,EAAI,IAAI,EAAE,IAAI,CAACtT,GAAM,MAC7Bi/C,EAAI,KAAK,WAAW,IAAIjB,GAAmB1qC,GAAKtT,GAAMsT,EAAI,MAAM,CAAC,CAAC,CAC5E;AACD,WAAO4pC,GAAY,WAAWrlB,GAAQp2B,CAAM;AAAA,EAChD;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI4gD,GAAWz7C,GAAS;AACpB,WAAO,IAAIw4C,GAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,WAAW,EAAE,OAAOiD,GAAW,SAAStE,GAAU,SAASn3C,CAAO,EAAC;AAAA,IAC/E,CAAS;AAAA,EACL;AAAA,EACA,IAAI07C,GAAW17C,GAAS;AACpB,WAAO,IAAIw4C,GAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,WAAW,EAAE,OAAOkD,GAAW,SAASvE,GAAU,SAASn3C,CAAO,EAAC;AAAA,IAC/E,CAAS;AAAA,EACL;AAAA,EACA,OAAOyqC,GAAKzqC,GAAS;AACjB,WAAO,IAAIw4C,GAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,aAAa,EAAE,OAAO/N,GAAK,SAAS0M,GAAU,SAASn3C,CAAO,EAAC;AAAA,IAC3E,CAAS;AAAA,EACL;AAAA,EACA,SAASA,GAAS;AACd,WAAO,KAAK,IAAI,GAAGA,CAAO;AAAA,EAC9B;AACJ;AACAw4C,GAAS,SAAS,CAAC74C,GAAQwoB,MAChB,IAAIqwB,GAAS;AAAA,EAChB,MAAM74C;AAAA,EACN,WAAW;AAAA,EACX,WAAW;AAAA,EACX,aAAa;AAAA,EACb,UAAUy4C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEL,SAAS+0B,GAAev9C,GAAQ;AAC5B,MAAIA,aAAkBw9C,IAAW;AAC7B,UAAMC,IAAW,CAAA;AACjB,eAAWryC,KAAOpL,EAAO,OAAO;AAC5B,YAAM09C,IAAc19C,EAAO,MAAMoL,CAAG;AACpC,MAAAqyC,EAASryC,CAAG,IAAIutC,GAAY,OAAO4E,GAAeG,CAAW,CAAC;AAAA,IAClE;AACA,WAAO,IAAIF,GAAU;AAAA,MACjB,GAAGx9C,EAAO;AAAA,MACV,OAAO,MAAMy9C;AAAA,IACzB,CAAS;AAAA,EACL,MACK,QAAIz9C,aAAkB64C,KAChB,IAAIA,GAAS;AAAA,IAChB,GAAG74C,EAAO;AAAA,IACV,MAAMu9C,GAAev9C,EAAO,OAAO;AAAA,EAC/C,CAAS,IAEIA,aAAkB24C,KAChBA,GAAY,OAAO4E,GAAev9C,EAAO,OAAM,CAAE,CAAC,IAEpDA,aAAkB44C,KAChBA,GAAY,OAAO2E,GAAev9C,EAAO,OAAM,CAAE,CAAC,IAEpDA,aAAkB29C,KAChBA,GAAS,OAAO39C,EAAO,MAAM,IAAI,CAACvG,MAAS8jD,GAAe9jD,CAAI,CAAC,CAAC,IAGhEuG;AAEf;AACO,MAAMw9C,WAAkBxF,GAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS,GAClB,KAAK,UAAU,MAKf,KAAK,YAAY,KAAK,aAqCtB,KAAK,UAAU,KAAK;AAAA,EACxB;AAAA,EACA,aAAa;AACT,QAAI,KAAK,YAAY;AACjB,aAAO,KAAK;AAChB,UAAM4F,IAAQ,KAAK,KAAK,MAAK,GACvB9yC,IAAOipC,GAAK,WAAW6J,CAAK;AAClC,gBAAK,UAAU,EAAE,OAAAA,GAAO,MAAA9yC,EAAI,GACrB,KAAK;AAAA,EAChB;AAAA,EACA,OAAOmtC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,QAAQ;AACrC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,UAAM,EAAE,QAAAxlB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GAChD,EAAE,OAAA2F,GAAO,MAAMC,EAAS,IAAK,KAAK,WAAU,GAC5CC,IAAY,CAAA;AAClB,QAAI,EAAE,KAAK,KAAK,oBAAoBT,MAAY,KAAK,KAAK,gBAAgB;AACtE,iBAAWjyC,KAAO2B,EAAI;AAClB,QAAK8wC,EAAU,SAASzyC,CAAG,KACvB0yC,EAAU,KAAK1yC,CAAG;AAI9B,UAAM2rC,IAAQ,CAAA;AACd,eAAW3rC,KAAOyyC,GAAW;AACzB,YAAME,IAAeH,EAAMxyC,CAAG,GACxBnQ,IAAQ8R,EAAI,KAAK3B,CAAG;AAC1B,MAAA2rC,EAAM,KAAK;AAAA,QACP,KAAK,EAAE,QAAQ,SAAS,OAAO3rC,EAAG;AAAA,QAClC,OAAO2yC,EAAa,OAAO,IAAItG,GAAmB1qC,GAAK9R,GAAO8R,EAAI,MAAM3B,CAAG,CAAC;AAAA,QAC5E,WAAWA,KAAO2B,EAAI;AAAA,MACtC,CAAa;AAAA,IACL;AACA,QAAI,KAAK,KAAK,oBAAoBswC,IAAU;AACxC,YAAMW,IAAc,KAAK,KAAK;AAC9B,UAAIA,MAAgB;AAChB,mBAAW5yC,KAAO0yC;AACd,UAAA/G,EAAM,KAAK;AAAA,YACP,KAAK,EAAE,QAAQ,SAAS,OAAO3rC,EAAG;AAAA,YAClC,OAAO,EAAE,QAAQ,SAAS,OAAO2B,EAAI,KAAK3B,CAAG,EAAC;AAAA,UACtE,CAAqB;AAAA,eAGA4yC,MAAgB;AACrB,QAAIF,EAAU,SAAS,MACnBrH,EAAkB1pC,GAAK;AAAA,UACnB,MAAMioC,EAAa;AAAA,UACnB,MAAM8I;AAAA,QAC9B,CAAqB,GACDxsB,EAAO,MAAK;AAAA,eAGX0sB,MAAgB,QAGrB,OAAM,IAAI,MAAM,sDAAsD;AAAA,IAE9E,OACK;AAED,YAAMC,IAAW,KAAK,KAAK;AAC3B,iBAAW7yC,KAAO0yC,GAAW;AACzB,cAAM7iD,IAAQ8R,EAAI,KAAK3B,CAAG;AAC1B,QAAA2rC,EAAM,KAAK;AAAA,UACP,KAAK,EAAE,QAAQ,SAAS,OAAO3rC,EAAG;AAAA,UAClC,OAAO6yC,EAAS;AAAA,YAAO,IAAIxG,GAAmB1qC,GAAK9R,GAAO8R,EAAI,MAAM3B,CAAG;AAAA;AAAA,UAC3F;AAAA,UACoB,WAAWA,KAAO2B,EAAI;AAAA,QAC1C,CAAiB;AAAA,MACL;AAAA,IACJ;AACA,WAAIA,EAAI,OAAO,QACJ,QAAQ,QAAO,EACjB,KAAK,YAAY;AAClB,YAAMiqC,IAAY,CAAA;AAClB,iBAAW/P,KAAQ8P,GAAO;AACtB,cAAM3rC,IAAM,MAAM67B,EAAK,KACjBhsC,IAAQ,MAAMgsC,EAAK;AACzB,QAAA+P,EAAU,KAAK;AAAA,UACX,KAAA5rC;AAAA,UACA,OAAAnQ;AAAA,UACA,WAAWgsC,EAAK;AAAA,QACxC,CAAqB;AAAA,MACL;AACA,aAAO+P;AAAA,IACX,CAAC,EACI,KAAK,CAACA,MACAL,GAAY,gBAAgBrlB,GAAQ0lB,CAAS,CACvD,IAGML,GAAY,gBAAgBrlB,GAAQylB,CAAK;AAAA,EAExD;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK,MAAK;AAAA,EAC1B;AAAA,EACA,OAAO12C,GAAS;AACZ,WAAAm3C,GAAU,UACH,IAAIgG,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,MACb,GAAIn9C,MAAY,SACV;AAAA,QACE,UAAU,CAACm1C,GAAOzoC,MAAQ;;AACtB,gBAAMmxC,MAAe9iD,KAAAxB,IAAA,KAAK,MAAK,aAAV,gBAAAwB,EAAA,KAAAxB,GAAqB47C,GAAOzoC,GAAK,YAAWA,EAAI;AACrE,iBAAIyoC,EAAM,SAAS,sBACR;AAAA,YACH,SAASgC,GAAU,SAASn3C,CAAO,EAAE,WAAW69C;AAAA,UAChF,IAC+B;AAAA,YACH,SAASA;AAAA,UACrC;AAAA,QACoB;AAAA,MACpB,IACkB;IAClB,CAAS;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAO,IAAIV,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,IACzB,CAAS;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAIA,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,IACzB,CAAS;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBA,OAAOW,GAAc;AACjB,WAAO,IAAIX,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,OAAO;AAAA,QACV,GAAG,KAAK,KAAK,MAAK;AAAA,QAClB,GAAGW;AAAA,MACnB;AAAA,IACA,CAAS;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAMC,GAAS;AAUX,WATe,IAAIZ,GAAU;AAAA,MACzB,aAAaY,EAAQ,KAAK;AAAA,MAC1B,UAAUA,EAAQ,KAAK;AAAA,MACvB,OAAO,OAAO;AAAA,QACV,GAAG,KAAK,KAAK,MAAK;AAAA,QAClB,GAAGA,EAAQ,KAAK,MAAK;AAAA,MACrC;AAAA,MACY,UAAU3F,EAAsB;AAAA,IAC5C,CAAS;AAAA,EAEL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoCA,OAAOrtC,GAAKpL,GAAQ;AAChB,WAAO,KAAK,QAAQ,EAAE,CAACoL,CAAG,GAAGpL,EAAM,CAAE;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsBA,SAASlH,GAAO;AACZ,WAAO,IAAI0kD,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,UAAU1kD;AAAA,IACtB,CAAS;AAAA,EACL;AAAA,EACA,KAAKulD,GAAM;AACP,UAAMT,IAAQ,CAAA;AACd,eAAWxyC,KAAO2oC,GAAK,WAAWsK,CAAI;AAClC,MAAIA,EAAKjzC,CAAG,KAAK,KAAK,MAAMA,CAAG,MAC3BwyC,EAAMxyC,CAAG,IAAI,KAAK,MAAMA,CAAG;AAGnC,WAAO,IAAIoyC,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAMI;AAAA,IACzB,CAAS;AAAA,EACL;AAAA,EACA,KAAKS,GAAM;AACP,UAAMT,IAAQ,CAAA;AACd,eAAWxyC,KAAO2oC,GAAK,WAAW,KAAK,KAAK;AACxC,MAAKsK,EAAKjzC,CAAG,MACTwyC,EAAMxyC,CAAG,IAAI,KAAK,MAAMA,CAAG;AAGnC,WAAO,IAAIoyC,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAMI;AAAA,IACzB,CAAS;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,cAAc;AACV,WAAOL,GAAe,IAAI;AAAA,EAC9B;AAAA,EACA,QAAQc,GAAM;AACV,UAAMZ,IAAW,CAAA;AACjB,eAAWryC,KAAO2oC,GAAK,WAAW,KAAK,KAAK,GAAG;AAC3C,YAAM2J,IAAc,KAAK,MAAMtyC,CAAG;AAClC,MAAIizC,KAAQ,CAACA,EAAKjzC,CAAG,IACjBqyC,EAASryC,CAAG,IAAIsyC,IAGhBD,EAASryC,CAAG,IAAIsyC,EAAY,SAAQ;AAAA,IAE5C;AACA,WAAO,IAAIF,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAMC;AAAA,IACzB,CAAS;AAAA,EACL;AAAA,EACA,SAASY,GAAM;AACX,UAAMZ,IAAW,CAAA;AACjB,eAAWryC,KAAO2oC,GAAK,WAAW,KAAK,KAAK;AACxC,UAAIsK,KAAQ,CAACA,EAAKjzC,CAAG;AACjB,QAAAqyC,EAASryC,CAAG,IAAI,KAAK,MAAMA,CAAG;AAAA,WAE7B;AAED,YAAIkzC,IADgB,KAAK,MAAMlzC,CAAG;AAElC,eAAOkzC,aAAoB3F;AACvB,UAAA2F,IAAWA,EAAS,KAAK;AAE7B,QAAAb,EAASryC,CAAG,IAAIkzC;AAAA,MACpB;AAEJ,WAAO,IAAId,GAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAMC;AAAA,IACzB,CAAS;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAOc,GAAcxK,GAAK,WAAW,KAAK,KAAK,CAAC;AAAA,EACpD;AACJ;AACAyJ,GAAU,SAAS,CAACI,GAAOp1B,MAChB,IAAIg1B,GAAU;AAAA,EACjB,OAAO,MAAMI;AAAA,EACb,aAAa;AAAA,EACb,UAAUP,GAAS,OAAM;AAAA,EACzB,UAAU5E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAELg1B,GAAU,eAAe,CAACI,GAAOp1B,MACtB,IAAIg1B,GAAU;AAAA,EACjB,OAAO,MAAMI;AAAA,EACb,aAAa;AAAA,EACb,UAAUP,GAAS,OAAM;AAAA,EACzB,UAAU5E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAELg1B,GAAU,aAAa,CAACI,GAAOp1B,MACpB,IAAIg1B,GAAU;AAAA,EACjB,OAAAI;AAAA,EACA,aAAa;AAAA,EACb,UAAUP,GAAS,OAAM;AAAA,EACzB,UAAU5E,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMuwB,WAAiBf,GAAQ;AAAA,EAClC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GACxCpoC,IAAU,KAAK,KAAK;AAC1B,aAAS2uC,EAAc5H,GAAS;AAE5B,iBAAW17C,KAAU07C;AACjB,YAAI17C,EAAO,OAAO,WAAW;AACzB,iBAAOA,EAAO;AAGtB,iBAAWA,KAAU07C;AACjB,YAAI17C,EAAO,OAAO,WAAW;AAEzB,iBAAA6R,EAAI,OAAO,OAAO,KAAK,GAAG7R,EAAO,IAAI,OAAO,MAAM,GAC3CA,EAAO;AAItB,YAAMujD,IAAc7H,EAAQ,IAAI,CAAC17C,MAAW,IAAI+5C,GAAS/5C,EAAO,IAAI,OAAO,MAAM,CAAC;AAClF,aAAAu7C,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,aAAAyJ;AAAA,MAChB,CAAa,GACM3H;AAAA,IACX;AACA,QAAI/pC,EAAI,OAAO;AACX,aAAO,QAAQ,IAAI8C,EAAQ,IAAI,OAAO0D,MAAW;AAC7C,cAAMmrC,IAAW;AAAA,UACb,GAAG3xC;AAAA,UACH,QAAQ;AAAA,YACJ,GAAGA,EAAI;AAAA,YACP,QAAQ,CAAA;AAAA,UAChC;AAAA,UACoB,QAAQ;AAAA,QAC5B;AACgB,eAAO;AAAA,UACH,QAAQ,MAAMwG,EAAO,YAAY;AAAA,YAC7B,MAAMxG,EAAI;AAAA,YACV,MAAMA,EAAI;AAAA,YACV,QAAQ2xC;AAAA,UAChC,CAAqB;AAAA,UACD,KAAKA;AAAA,QACzB;AAAA,MACY,CAAC,CAAC,EAAE,KAAKF,CAAa;AAErB;AACD,UAAIG;AACJ,YAAMzJ,IAAS,CAAA;AACf,iBAAW3hC,KAAU1D,GAAS;AAC1B,cAAM6uC,IAAW;AAAA,UACb,GAAG3xC;AAAA,UACH,QAAQ;AAAA,YACJ,GAAGA,EAAI;AAAA,YACP,QAAQ,CAAA;AAAA,UAChC;AAAA,UACoB,QAAQ;AAAA,QAC5B,GACsB7R,IAASqY,EAAO,WAAW;AAAA,UAC7B,MAAMxG,EAAI;AAAA,UACV,MAAMA,EAAI;AAAA,UACV,QAAQ2xC;AAAA,QAC5B,CAAiB;AACD,YAAIxjD,EAAO,WAAW;AAClB,iBAAOA;AAEN,QAAIA,EAAO,WAAW,WAAW,CAACyjD,MACnCA,IAAQ,EAAE,QAAAzjD,GAAQ,KAAKwjD,EAAQ,IAE/BA,EAAS,OAAO,OAAO,UACvBxJ,EAAO,KAAKwJ,EAAS,OAAO,MAAM;AAAA,MAE1C;AACA,UAAIC;AACA,eAAA5xC,EAAI,OAAO,OAAO,KAAK,GAAG4xC,EAAM,IAAI,OAAO,MAAM,GAC1CA,EAAM;AAEjB,YAAMF,IAAcvJ,EAAO,IAAI,CAACA,MAAW,IAAID,GAASC,CAAM,CAAC;AAC/D,aAAAuB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,aAAAyJ;AAAA,MAChB,CAAa,GACM3H;AAAA,IACX;AAAA,EACJ;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAiC,GAAS,SAAS,CAAC/9C,GAAOwtB,MACf,IAAIuwB,GAAS;AAAA,EAChB,SAAS/9C;AAAA,EACT,UAAUy9C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AASL,MAAMo2B,KAAmB,CAACzlD,MAClBA,aAAgB0lD,KACTD,GAAiBzlD,EAAK,MAAM,IAE9BA,aAAgBq/C,KACdoG,GAAiBzlD,EAAK,WAAW,IAEnCA,aAAgB2lD,KACd,CAAC3lD,EAAK,KAAK,IAEbA,aAAgB4lD,KACd5lD,EAAK,UAEPA,aAAgB6lD,KAEdjL,GAAK,aAAa56C,EAAK,IAAI,IAE7BA,aAAgBggD,KACdyF,GAAiBzlD,EAAK,KAAK,SAAS,IAEtCA,aAAgB8jD,KACd,CAAC,MAAS,IAEZ9jD,aAAgB+jD,KACd,CAAC,IAAI,IAEP/jD,aAAgBw/C,KACd,CAAC,QAAW,GAAGiG,GAAiBzlD,EAAK,OAAM,CAAE,CAAC,IAEhDA,aAAgBy/C,KACd,CAAC,MAAM,GAAGgG,GAAiBzlD,EAAK,OAAM,CAAE,CAAC,IAE3CA,aAAgBigD,MAGhBjgD,aAAgBsgD,KAFdmF,GAAiBzlD,EAAK,QAAQ,IAKhCA,aAAgBmgD,KACdsF,GAAiBzlD,EAAK,KAAK,SAAS,IAGpC,CAAA;AAGR,MAAM8lD,WAA8BjH,GAAQ;AAAA,EAC/C,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AAC9C,QAAIlrC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,UAAMoI,IAAgB,KAAK,eACrBC,IAAqBpyC,EAAI,KAAKmyC,CAAa,GAC3C3rC,IAAS,KAAK,WAAW,IAAI4rC,CAAkB;AACrD,WAAK5rC,IAQDxG,EAAI,OAAO,QACJwG,EAAO,YAAY;AAAA,MACtB,MAAMxG,EAAI;AAAA,MACV,MAAMA,EAAI;AAAA,MACV,QAAQA;AAAA,IACxB,CAAa,IAGMwG,EAAO,WAAW;AAAA,MACrB,MAAMxG,EAAI;AAAA,MACV,MAAMA,EAAI;AAAA,MACV,QAAQA;AAAA,IACxB,CAAa,KAnBD0pC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS,MAAM,KAAK,KAAK,WAAW,KAAI,CAAE;AAAA,MAC1C,MAAM,CAACkK,CAAa;AAAA,IACpC,CAAa,GACMpI;AAAA,EAgBf;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,OAAO,OAAOoI,GAAervC,GAAS2Y,GAAQ;AAE1C,UAAM42B,IAAa,oBAAI,IAAG;AAE1B,eAAWjmD,KAAQ0W,GAAS;AACxB,YAAMwvC,IAAsBT,GAAiBzlD,EAAK,MAAM+lD,CAAa,CAAC;AACtE,UAAI,CAACG,EAAoB;AACrB,cAAM,IAAI,MAAM,mCAAmCH,CAAa,mDAAmD;AAEvH,iBAAWjkD,KAASokD,GAAqB;AACrC,YAAID,EAAW,IAAInkD,CAAK;AACpB,gBAAM,IAAI,MAAM,0BAA0B,OAAOikD,CAAa,CAAC,wBAAwB,OAAOjkD,CAAK,CAAC,EAAE;AAE1G,QAAAmkD,EAAW,IAAInkD,GAAO9B,CAAI;AAAA,MAC9B;AAAA,IACJ;AACA,WAAO,IAAI8lD,GAAsB;AAAA,MAC7B,UAAUxG,EAAsB;AAAA,MAChC,eAAAyG;AAAA,MACA,SAAArvC;AAAA,MACA,YAAAuvC;AAAA,MACA,GAAGzH,GAAoBnvB,CAAM;AAAA,IACzC,CAAS;AAAA,EACL;AACJ;AACA,SAAS82B,GAAYzZ,GAAGC,GAAG;AACvB,QAAMyZ,IAAQxK,GAAclP,CAAC,GACvB2Z,IAAQzK,GAAcjP,CAAC;AAC7B,MAAID,MAAMC;AACN,WAAO,EAAE,OAAO,IAAM,MAAMD,EAAC;AAE5B,MAAI0Z,MAAUzK,EAAc,UAAU0K,MAAU1K,EAAc,QAAQ;AACvE,UAAM2K,IAAQ1L,GAAK,WAAWjO,CAAC,GACzB4Z,IAAa3L,GAAK,WAAWlO,CAAC,EAAE,OAAO,CAACz6B,MAAQq0C,EAAM,QAAQr0C,CAAG,MAAM,EAAE,GACzEu0C,IAAS,EAAE,GAAG9Z,GAAG,GAAGC,EAAC;AAC3B,eAAW16B,KAAOs0C,GAAY;AAC1B,YAAME,IAAcN,GAAYzZ,EAAEz6B,CAAG,GAAG06B,EAAE16B,CAAG,CAAC;AAC9C,UAAI,CAACw0C,EAAY;AACb,eAAO,EAAE,OAAO,GAAK;AAEzB,MAAAD,EAAOv0C,CAAG,IAAIw0C,EAAY;AAAA,IAC9B;AACA,WAAO,EAAE,OAAO,IAAM,MAAMD,EAAM;AAAA,EACtC,WACSJ,MAAUzK,EAAc,SAAS0K,MAAU1K,EAAc,OAAO;AACrE,QAAIjP,EAAE,WAAWC,EAAE;AACf,aAAO,EAAE,OAAO,GAAK;AAEzB,UAAM+Z,IAAW,CAAA;AACjB,aAAS/mD,IAAQ,GAAGA,IAAQ+sC,EAAE,QAAQ/sC,KAAS;AAC3C,YAAMgnD,IAAQja,EAAE/sC,CAAK,GACfinD,IAAQja,EAAEhtC,CAAK,GACf8mD,IAAcN,GAAYQ,GAAOC,CAAK;AAC5C,UAAI,CAACH,EAAY;AACb,eAAO,EAAE,OAAO,GAAK;AAEzB,MAAAC,EAAS,KAAKD,EAAY,IAAI;AAAA,IAClC;AACA,WAAO,EAAE,OAAO,IAAM,MAAMC,EAAQ;AAAA,EACxC,MACK,QAAIN,MAAUzK,EAAc,QAAQ0K,MAAU1K,EAAc,QAAQ,CAACjP,KAAM,CAACC,IACtE,EAAE,OAAO,IAAM,MAAMD,EAAC,IAGtB,EAAE,OAAO,GAAK;AAE7B;AACO,MAAMoT,WAAwBjB,GAAQ;AAAA,EACzC,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GAChD+H,IAAe,CAACC,GAAYC,MAAgB;AAC9C,UAAI9I,GAAU6I,CAAU,KAAK7I,GAAU8I,CAAW;AAC9C,eAAOpJ;AAEX,YAAMtQ,IAAS8Y,GAAYW,EAAW,OAAOC,EAAY,KAAK;AAC9D,aAAK1Z,EAAO,UAMR6Q,GAAQ4I,CAAU,KAAK5I,GAAQ6I,CAAW,MAC1C5uB,EAAO,MAAK,GAET,EAAE,QAAQA,EAAO,OAAO,OAAOkV,EAAO,KAAI,MAR7CiQ,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,MACvC,CAAiB,GACM8B;AAAA,IAMf;AACA,WAAI/pC,EAAI,OAAO,QACJ,QAAQ,IAAI;AAAA,MACf,KAAK,KAAK,KAAK,YAAY;AAAA,QACvB,MAAMA,EAAI;AAAA,QACV,MAAMA,EAAI;AAAA,QACV,QAAQA;AAAA,MAC5B,CAAiB;AAAA,MACD,KAAK,KAAK,MAAM,YAAY;AAAA,QACxB,MAAMA,EAAI;AAAA,QACV,MAAMA,EAAI;AAAA,QACV,QAAQA;AAAA,MAC5B,CAAiB;AAAA,IACjB,CAAa,EAAE,KAAK,CAAC,CAAC2B,GAAME,CAAK,MAAMoxC,EAAatxC,GAAME,CAAK,CAAC,IAG7CoxC,EAAa,KAAK,KAAK,KAAK,WAAW;AAAA,MAC1C,MAAMjzC,EAAI;AAAA,MACV,MAAMA,EAAI;AAAA,MACV,QAAQA;AAAA,IACxB,CAAa,GAAG,KAAK,KAAK,MAAM,WAAW;AAAA,MAC3B,MAAMA,EAAI;AAAA,MACV,MAAMA,EAAI;AAAA,MACV,QAAQA;AAAA,IACxB,CAAa,CAAC;AAAA,EAEV;AACJ;AACAksC,GAAgB,SAAS,CAACvqC,GAAME,GAAO4Z,MAC5B,IAAIywB,GAAgB;AAAA,EACvB,MAAMvqC;AAAA,EACN,OAAOE;AAAA,EACP,UAAU6pC,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAGE,MAAMm1B,WAAiB3F,GAAQ;AAAA,EAClC,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AACtD,QAAIlrC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,QAAI/pC,EAAI,KAAK,SAAS,KAAK,KAAK,MAAM;AAClC,aAAA0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,SAAS,KAAK,KAAK,MAAM;AAAA,QACzB,WAAW;AAAA,QACX,OAAO;AAAA,QACP,MAAM;AAAA,MACtB,CAAa,GACM8B;AAGX,IAAI,CADS,KAAK,KAAK,QACV/pC,EAAI,KAAK,SAAS,KAAK,KAAK,MAAM,WAC3C0pC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS,KAAK,KAAK,MAAM;AAAA,MACzB,WAAW;AAAA,MACX,OAAO;AAAA,MACP,MAAM;AAAA,IACtB,CAAa,GACD1jB,EAAO,MAAK;AAEhB,UAAMnU,IAAQ,CAAC,GAAGpQ,EAAI,IAAI,EACrB,IAAI,CAACtT,GAAMgC,MAAc;AAC1B,YAAMuE,IAAS,KAAK,KAAK,MAAMvE,CAAS,KAAK,KAAK,KAAK;AACvD,aAAKuE,IAEEA,EAAO,OAAO,IAAIy3C,GAAmB1qC,GAAKtT,GAAMsT,EAAI,MAAMtR,CAAS,CAAC,IADhE;AAAA,IAEf,CAAC,EACI,OAAO,CAACuM,MAAM,CAAC,CAACA,CAAC;AACtB,WAAI+E,EAAI,OAAO,QACJ,QAAQ,IAAIoQ,CAAK,EAAE,KAAK,CAACy5B,MACrBD,GAAY,WAAWrlB,GAAQslB,CAAO,CAChD,IAGMD,GAAY,WAAWrlB,GAAQnU,CAAK;AAAA,EAEnD;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,KAAKgjC,GAAM;AACP,WAAO,IAAIxC,GAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,MAAAwC;AAAA,IACZ,CAAS;AAAA,EACL;AACJ;AACAxC,GAAS,SAAS,CAACyC,GAAS53B,MAAW;AACnC,MAAI,CAAC,MAAM,QAAQ43B,CAAO;AACtB,UAAM,IAAI,MAAM,uDAAuD;AAE3E,SAAO,IAAIzC,GAAS;AAAA,IAChB,OAAOyC;AAAA,IACP,UAAU3H,EAAsB;AAAA,IAChC,MAAM;AAAA,IACN,GAAGd,GAAoBnvB,CAAM;AAAA,EACrC,CAAK;AACL;AACO,MAAM63B,WAAkBrI,GAAQ;AAAA,EACnC,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AACtD,QAAIlrC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,UAAMC,IAAQ,CAAA,GACRuJ,IAAU,KAAK,KAAK,SACpBC,IAAY,KAAK,KAAK;AAC5B,eAAWn1C,KAAO2B,EAAI;AAClB,MAAAgqC,EAAM,KAAK;AAAA,QACP,KAAKuJ,EAAQ,OAAO,IAAI7I,GAAmB1qC,GAAK3B,GAAK2B,EAAI,MAAM3B,CAAG,CAAC;AAAA,QACnE,OAAOm1C,EAAU,OAAO,IAAI9I,GAAmB1qC,GAAKA,EAAI,KAAK3B,CAAG,GAAG2B,EAAI,MAAM3B,CAAG,CAAC;AAAA,QACjF,WAAWA,KAAO2B,EAAI;AAAA,MACtC,CAAa;AAEL,WAAIA,EAAI,OAAO,QACJ4pC,GAAY,iBAAiBrlB,GAAQylB,CAAK,IAG1CJ,GAAY,gBAAgBrlB,GAAQylB,CAAK;AAAA,EAExD;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAOnC,GAAOC,GAAQ2L,GAAO;AAChC,WAAI3L,aAAkBmD,KACX,IAAIqI,GAAU;AAAA,MACjB,SAASzL;AAAA,MACT,WAAWC;AAAA,MACX,UAAU4D,EAAsB;AAAA,MAChC,GAAGd,GAAoB6I,CAAK;AAAA,IAC5C,CAAa,IAEE,IAAIH,GAAU;AAAA,MACjB,SAAS3E,GAAU,OAAM;AAAA,MACzB,WAAW9G;AAAA,MACX,UAAU6D,EAAsB;AAAA,MAChC,GAAGd,GAAoB9C,CAAM;AAAA,IACzC,CAAS;AAAA,EACL;AACJ;AACO,MAAM4L,WAAezI,GAAQ;AAAA,EAChC,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AACtD,QAAIlrC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,UAAMwJ,IAAU,KAAK,KAAK,SACpBC,IAAY,KAAK,KAAK,WACtBxJ,IAAQ,CAAC,GAAGhqC,EAAI,KAAK,QAAO,CAAE,EAAE,IAAI,CAAC,CAAC3B,GAAKnQ,CAAK,GAAGnC,OAC9C;AAAA,MACH,KAAKwnD,EAAQ,OAAO,IAAI7I,GAAmB1qC,GAAK3B,GAAK2B,EAAI,MAAM,CAACjU,GAAO,KAAK,CAAC,CAAC;AAAA,MAC9E,OAAOynD,EAAU,OAAO,IAAI9I,GAAmB1qC,GAAK9R,GAAO8R,EAAI,MAAM,CAACjU,GAAO,OAAO,CAAC,CAAC;AAAA,IACtG,EACS;AACD,QAAIiU,EAAI,OAAO,OAAO;AAClB,YAAM2zC,IAAW,oBAAI,IAAG;AACxB,aAAO,QAAQ,UAAU,KAAK,YAAY;AACtC,mBAAWzZ,KAAQ8P,GAAO;AACtB,gBAAM3rC,IAAM,MAAM67B,EAAK,KACjBhsC,IAAQ,MAAMgsC,EAAK;AACzB,cAAI77B,EAAI,WAAW,aAAanQ,EAAM,WAAW;AAC7C,mBAAO67C;AAEX,WAAI1rC,EAAI,WAAW,WAAWnQ,EAAM,WAAW,YAC3Cq2B,EAAO,MAAK,GAEhBovB,EAAS,IAAIt1C,EAAI,OAAOnQ,EAAM,KAAK;AAAA,QACvC;AACA,eAAO,EAAE,QAAQq2B,EAAO,OAAO,OAAOovB,EAAQ;AAAA,MAClD,CAAC;AAAA,IACL,OACK;AACD,YAAMA,IAAW,oBAAI,IAAG;AACxB,iBAAWzZ,KAAQ8P,GAAO;AACtB,cAAM3rC,IAAM67B,EAAK,KACXhsC,IAAQgsC,EAAK;AACnB,YAAI77B,EAAI,WAAW,aAAanQ,EAAM,WAAW;AAC7C,iBAAO67C;AAEX,SAAI1rC,EAAI,WAAW,WAAWnQ,EAAM,WAAW,YAC3Cq2B,EAAO,MAAK,GAEhBovB,EAAS,IAAIt1C,EAAI,OAAOnQ,EAAM,KAAK;AAAA,MACvC;AACA,aAAO,EAAE,QAAQq2B,EAAO,OAAO,OAAOovB,EAAQ;AAAA,IAClD;AAAA,EACJ;AACJ;AACAD,GAAO,SAAS,CAACH,GAASC,GAAW/3B,MAC1B,IAAIi4B,GAAO;AAAA,EACd,WAAAF;AAAA,EACA,SAAAD;AAAA,EACA,UAAU7H,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMm4B,WAAe3I,GAAQ;AAAA,EAChC,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AACtD,QAAIlrC,EAAI,eAAe+nC,EAAc;AACjC,aAAA2B,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,UAAM4B,IAAM,KAAK;AACjB,IAAIA,EAAI,YAAY,QACZ3rC,EAAI,KAAK,OAAO2rC,EAAI,QAAQ,UAC5BjC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS0D,EAAI,QAAQ;AAAA,MACrB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO;AAAA,MACP,SAASA,EAAI,QAAQ;AAAA,IACzC,CAAiB,GACDpnB,EAAO,MAAK,IAGhBonB,EAAI,YAAY,QACZ3rC,EAAI,KAAK,OAAO2rC,EAAI,QAAQ,UAC5BjC,EAAkB1pC,GAAK;AAAA,MACnB,MAAMioC,EAAa;AAAA,MACnB,SAAS0D,EAAI,QAAQ;AAAA,MACrB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO;AAAA,MACP,SAASA,EAAI,QAAQ;AAAA,IACzC,CAAiB,GACDpnB,EAAO,MAAK;AAGpB,UAAMivB,IAAY,KAAK,KAAK;AAC5B,aAASK,EAAYC,GAAU;AAC3B,YAAMC,IAAY,oBAAI,IAAG;AACzB,iBAAWriC,KAAWoiC,GAAU;AAC5B,YAAIpiC,EAAQ,WAAW;AACnB,iBAAOq4B;AACX,QAAIr4B,EAAQ,WAAW,WACnB6S,EAAO,MAAK,GAChBwvB,EAAU,IAAIriC,EAAQ,KAAK;AAAA,MAC/B;AACA,aAAO,EAAE,QAAQ6S,EAAO,OAAO,OAAOwvB,EAAS;AAAA,IACnD;AACA,UAAMD,IAAW,CAAC,GAAG9zC,EAAI,KAAK,QAAQ,EAAE,IAAI,CAACtT,GAAMmH,MAAM2/C,EAAU,OAAO,IAAI9I,GAAmB1qC,GAAKtT,GAAMsT,EAAI,MAAMnM,CAAC,CAAC,CAAC;AACzH,WAAImM,EAAI,OAAO,QACJ,QAAQ,IAAI8zC,CAAQ,EAAE,KAAK,CAACA,MAAaD,EAAYC,CAAQ,CAAC,IAG9DD,EAAYC,CAAQ;AAAA,EAEnC;AAAA,EACA,IAAIE,GAAS1gD,GAAS;AAClB,WAAO,IAAIsgD,GAAO;AAAA,MACd,GAAG,KAAK;AAAA,MACR,SAAS,EAAE,OAAOI,GAAS,SAASvJ,GAAU,SAASn3C,CAAO,EAAC;AAAA,IAC3E,CAAS;AAAA,EACL;AAAA,EACA,IAAI2gD,GAAS3gD,GAAS;AAClB,WAAO,IAAIsgD,GAAO;AAAA,MACd,GAAG,KAAK;AAAA,MACR,SAAS,EAAE,OAAOK,GAAS,SAASxJ,GAAU,SAASn3C,CAAO,EAAC;AAAA,IAC3E,CAAS;AAAA,EACL;AAAA,EACA,KAAK09B,GAAM19B,GAAS;AAChB,WAAO,KAAK,IAAI09B,GAAM19B,CAAO,EAAE,IAAI09B,GAAM19B,CAAO;AAAA,EACpD;AAAA,EACA,SAASA,GAAS;AACd,WAAO,KAAK,IAAI,GAAGA,CAAO;AAAA,EAC9B;AACJ;AACAsgD,GAAO,SAAS,CAACJ,GAAW/3B,MACjB,IAAIm4B,GAAO;AAAA,EACd,WAAAJ;AAAA,EACA,SAAS;AAAA,EACT,SAAS;AAAA,EACT,UAAU9H,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAoHE,MAAMq2B,WAAgB7G,GAAQ;AAAA,EACjC,IAAI,SAAS;AACT,WAAO,KAAK,KAAK,OAAM;AAAA,EAC3B;AAAA,EACA,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AAE9C,WADmB,KAAK,KAAK,OAAM,EACjB,OAAO,EAAE,MAAMlrC,EAAI,MAAM,MAAMA,EAAI,MAAM,QAAQA,EAAG,CAAE;AAAA,EAC5E;AACJ;AACA8xC,GAAQ,SAAS,CAACoC,GAAQz4B,MACf,IAAIq2B,GAAQ;AAAA,EACf,QAAQoC;AAAA,EACR,UAAUxI,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMs2B,WAAmB9G,GAAQ;AAAA,EACpC,OAAOC,GAAO;AACV,QAAIA,EAAM,SAAS,KAAK,KAAK,OAAO;AAChC,YAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,UAAUA,EAAI;AAAA,QACd,MAAMioC,EAAa;AAAA,QACnB,UAAU,KAAK,KAAK;AAAA,MACpC,CAAa,GACM8B;AAAA,IACX;AACA,WAAO,EAAE,QAAQ,SAAS,OAAOmB,EAAM,KAAI;AAAA,EAC/C;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA6G,GAAW,SAAS,CAAC7jD,GAAOutB,MACjB,IAAIs2B,GAAW;AAAA,EAClB,OAAO7jD;AAAA,EACP,UAAUw9C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEL,SAAS+1B,GAAc2C,GAAQ14B,GAAQ;AACnC,SAAO,IAAIu2B,GAAQ;AAAA,IACf,QAAAmC;AAAA,IACA,UAAUzI,EAAsB;AAAA,IAChC,GAAGd,GAAoBnvB,CAAM;AAAA,EACrC,CAAK;AACL;AACO,MAAMu2B,WAAgB/G,GAAQ;AAAA,EACjC,OAAOC,GAAO;AACV,QAAI,OAAOA,EAAM,QAAS,UAAU;AAChC,YAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK,GAChCkJ,IAAiB,KAAK,KAAK;AACjC,aAAA1K,EAAkB1pC,GAAK;AAAA,QACnB,UAAUgnC,GAAK,WAAWoN,CAAc;AAAA,QACxC,UAAUp0C,EAAI;AAAA,QACd,MAAMioC,EAAa;AAAA,MACnC,CAAa,GACM8B;AAAA,IACX;AAIA,QAHK,KAAK,WACN,KAAK,SAAS,IAAI,IAAI,KAAK,KAAK,MAAM,IAEtC,CAAC,KAAK,OAAO,IAAImB,EAAM,IAAI,GAAG;AAC9B,YAAMlrC,IAAM,KAAK,gBAAgBkrC,CAAK,GAChCkJ,IAAiB,KAAK,KAAK;AACjC,aAAA1K,EAAkB1pC,GAAK;AAAA,QACnB,UAAUA,EAAI;AAAA,QACd,MAAMioC,EAAa;AAAA,QACnB,SAASmM;AAAA,MACzB,CAAa,GACMrK;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,OAAO;AACP,UAAMmJ,IAAa,CAAA;AACnB,eAAW5lD,KAAO,KAAK,KAAK;AACxB,MAAA4lD,EAAW5lD,CAAG,IAAIA;AAEtB,WAAO4lD;AAAA,EACX;AAAA,EACA,IAAI,SAAS;AACT,UAAMA,IAAa,CAAA;AACnB,eAAW5lD,KAAO,KAAK,KAAK;AACxB,MAAA4lD,EAAW5lD,CAAG,IAAIA;AAEtB,WAAO4lD;AAAA,EACX;AAAA,EACA,IAAI,OAAO;AACP,UAAMA,IAAa,CAAA;AACnB,eAAW5lD,KAAO,KAAK,KAAK;AACxB,MAAA4lD,EAAW5lD,CAAG,IAAIA;AAEtB,WAAO4lD;AAAA,EACX;AAAA,EACA,QAAQF,GAAQG,IAAS,KAAK,MAAM;AAChC,WAAOtC,GAAQ,OAAOmC,GAAQ;AAAA,MAC1B,GAAG,KAAK;AAAA,MACR,GAAGG;AAAA,IACf,CAAS;AAAA,EACL;AAAA,EACA,QAAQH,GAAQG,IAAS,KAAK,MAAM;AAChC,WAAOtC,GAAQ,OAAO,KAAK,QAAQ,OAAO,CAAC7N,MAAQ,CAACgQ,EAAO,SAAShQ,CAAG,CAAC,GAAG;AAAA,MACvE,GAAG,KAAK;AAAA,MACR,GAAGmQ;AAAA,IACf,CAAS;AAAA,EACL;AACJ;AACAtC,GAAQ,SAASR;AACV,MAAMS,WAAsBhH,GAAQ;AAAA,EACvC,OAAOC,GAAO;AACV,UAAMqJ,IAAmBvN,GAAK,mBAAmB,KAAK,KAAK,MAAM,GAC3DhnC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,QAAIlrC,EAAI,eAAe+nC,EAAc,UAAU/nC,EAAI,eAAe+nC,EAAc,QAAQ;AACpF,YAAMqM,IAAiBpN,GAAK,aAAauN,CAAgB;AACzD,aAAA7K,EAAkB1pC,GAAK;AAAA,QACnB,UAAUgnC,GAAK,WAAWoN,CAAc;AAAA,QACxC,UAAUp0C,EAAI;AAAA,QACd,MAAMioC,EAAa;AAAA,MACnC,CAAa,GACM8B;AAAA,IACX;AAIA,QAHK,KAAK,WACN,KAAK,SAAS,IAAI,IAAI/C,GAAK,mBAAmB,KAAK,KAAK,MAAM,CAAC,IAE/D,CAAC,KAAK,OAAO,IAAIkE,EAAM,IAAI,GAAG;AAC9B,YAAMkJ,IAAiBpN,GAAK,aAAauN,CAAgB;AACzD,aAAA7K,EAAkB1pC,GAAK;AAAA,QACnB,UAAUA,EAAI;AAAA,QACd,MAAMioC,EAAa;AAAA,QACnB,SAASmM;AAAA,MACzB,CAAa,GACMrK;AAAA,IACX;AACA,WAAOK,GAAGc,EAAM,IAAI;AAAA,EACxB;AAAA,EACA,IAAI,OAAO;AACP,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA+G,GAAc,SAAS,CAACkC,GAAQ14B,MACrB,IAAIw2B,GAAc;AAAA,EACrB,QAAQkC;AAAA,EACR,UAAUzI,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMswB,WAAmBd,GAAQ;AAAA,EACpC,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AAC9C,QAAIlrC,EAAI,eAAe+nC,EAAc,WAAW/nC,EAAI,OAAO,UAAU;AACjE,aAAA0pC,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAEX,UAAMyK,IAAcx0C,EAAI,eAAe+nC,EAAc,UAAU/nC,EAAI,OAAO,QAAQ,QAAQA,EAAI,IAAI;AAClG,WAAOoqC,GAAGoK,EAAY,KAAK,CAACtnD,MACjB,KAAK,KAAK,KAAK,WAAWA,GAAM;AAAA,MACnC,MAAM8S,EAAI;AAAA,MACV,UAAUA,EAAI,OAAO;AAAA,IACrC,CAAa,CACJ,CAAC;AAAA,EACN;AACJ;AACA+rC,GAAW,SAAS,CAAC94C,GAAQwoB,MAClB,IAAIswB,GAAW;AAAA,EAClB,MAAM94C;AAAA,EACN,UAAUy4C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMgwB,WAAmBR,GAAQ;AAAA,EACpC,YAAY;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,aAAa;AACT,WAAO,KAAK,KAAK,OAAO,KAAK,aAAaS,EAAsB,aAC1D,KAAK,KAAK,OAAO,WAAU,IAC3B,KAAK,KAAK;AAAA,EACpB;AAAA,EACA,OAAOR,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GAChDuJ,IAAS,KAAK,KAAK,UAAU,MAC7BC,IAAW;AAAA,MACb,UAAU,CAACC,MAAQ;AACf,QAAAjL,EAAkB1pC,GAAK20C,CAAG,GACtBA,EAAI,QACJpwB,EAAO,MAAK,IAGZA,EAAO,MAAK;AAAA,MAEpB;AAAA,MACA,IAAI,OAAO;AACP,eAAOvkB,EAAI;AAAA,MACf;AAAA,IACZ;AAEQ,QADA00C,EAAS,WAAWA,EAAS,SAAS,KAAKA,CAAQ,GAC/CD,EAAO,SAAS,cAAc;AAC9B,YAAMG,IAAYH,EAAO,UAAUz0C,EAAI,MAAM00C,CAAQ;AACrD,UAAI10C,EAAI,OAAO;AACX,eAAO,QAAQ,QAAQ40C,CAAS,EAAE,KAAK,OAAOA,MAAc;AACxD,cAAIrwB,EAAO,UAAU;AACjB,mBAAOwlB;AACX,gBAAM57C,IAAS,MAAM,KAAK,KAAK,OAAO,YAAY;AAAA,YAC9C,MAAMymD;AAAA,YACN,MAAM50C,EAAI;AAAA,YACV,QAAQA;AAAA,UAChC,CAAqB;AACD,iBAAI7R,EAAO,WAAW,YACX47C,KACP57C,EAAO,WAAW,WAElBo2B,EAAO,UAAU,UACV4lB,GAAMh8C,EAAO,KAAK,IACtBA;AAAA,QACX,CAAC;AAEA;AACD,YAAIo2B,EAAO,UAAU;AACjB,iBAAOwlB;AACX,cAAM57C,IAAS,KAAK,KAAK,OAAO,WAAW;AAAA,UACvC,MAAMymD;AAAA,UACN,MAAM50C,EAAI;AAAA,UACV,QAAQA;AAAA,QAC5B,CAAiB;AACD,eAAI7R,EAAO,WAAW,YACX47C,KACP57C,EAAO,WAAW,WAElBo2B,EAAO,UAAU,UACV4lB,GAAMh8C,EAAO,KAAK,IACtBA;AAAA,MACX;AAAA,IACJ;AACA,QAAIsmD,EAAO,SAAS,cAAc;AAC9B,YAAMI,IAAoB,CAACC,MAAQ;AAC/B,cAAM3mD,IAASsmD,EAAO,WAAWK,GAAKJ,CAAQ;AAC9C,YAAI10C,EAAI,OAAO;AACX,iBAAO,QAAQ,QAAQ7R,CAAM;AAEjC,YAAIA,aAAkB;AAClB,gBAAM,IAAI,MAAM,2FAA2F;AAE/G,eAAO2mD;AAAA,MACX;AACA,UAAI90C,EAAI,OAAO,UAAU,IAAO;AAC5B,cAAM+0C,IAAQ,KAAK,KAAK,OAAO,WAAW;AAAA,UACtC,MAAM/0C,EAAI;AAAA,UACV,MAAMA,EAAI;AAAA,UACV,QAAQA;AAAA,QAC5B,CAAiB;AACD,eAAI+0C,EAAM,WAAW,YACVhL,MACPgL,EAAM,WAAW,WACjBxwB,EAAO,MAAK,GAEhBswB,EAAkBE,EAAM,KAAK,GACtB,EAAE,QAAQxwB,EAAO,OAAO,OAAOwwB,EAAM,MAAK;AAAA,MACrD;AAEI,eAAO,KAAK,KAAK,OAAO,YAAY,EAAE,MAAM/0C,EAAI,MAAM,MAAMA,EAAI,MAAM,QAAQA,EAAG,CAAE,EAAE,KAAK,CAAC+0C,MACnFA,EAAM,WAAW,YACVhL,MACPgL,EAAM,WAAW,WACjBxwB,EAAO,MAAK,GACTswB,EAAkBE,EAAM,KAAK,EAAE,KAAK,OAChC,EAAE,QAAQxwB,EAAO,OAAO,OAAOwwB,EAAM,MAAK,EACpD,EACJ;AAAA,IAET;AACA,QAAIN,EAAO,SAAS;AAChB,UAAIz0C,EAAI,OAAO,UAAU,IAAO;AAC5B,cAAMg1C,IAAO,KAAK,KAAK,OAAO,WAAW;AAAA,UACrC,MAAMh1C,EAAI;AAAA,UACV,MAAMA,EAAI;AAAA,UACV,QAAQA;AAAA,QAC5B,CAAiB;AACD,YAAI,CAACuqC,GAAQyK,CAAI;AACb,iBAAOjL;AACX,cAAM57C,IAASsmD,EAAO,UAAUO,EAAK,OAAON,CAAQ;AACpD,YAAIvmD,aAAkB;AAClB,gBAAM,IAAI,MAAM,iGAAiG;AAErH,eAAO,EAAE,QAAQo2B,EAAO,OAAO,OAAOp2B,EAAM;AAAA,MAChD;AAEI,eAAO,KAAK,KAAK,OAAO,YAAY,EAAE,MAAM6R,EAAI,MAAM,MAAMA,EAAI,MAAM,QAAQA,EAAG,CAAE,EAAE,KAAK,CAACg1C,MAClFzK,GAAQyK,CAAI,IAEV,QAAQ,QAAQP,EAAO,UAAUO,EAAK,OAAON,CAAQ,CAAC,EAAE,KAAK,CAACvmD,OAAY;AAAA,UAC7E,QAAQo2B,EAAO;AAAA,UACf,OAAOp2B;AAAA,QAC/B,EAAsB,IAJS47C,EAKd;AAGT/C,IAAAA,GAAK,YAAYyN,CAAM;AAAA,EAC3B;AACJ;AACAhJ,GAAW,SAAS,CAACx4C,GAAQwhD,GAAQh5B,MAC1B,IAAIgwB,GAAW;AAAA,EAClB,QAAAx4C;AAAA,EACA,UAAUy4C,EAAsB;AAAA,EAChC,QAAA+I;AAAA,EACA,GAAG7J,GAAoBnvB,CAAM;AACrC,CAAK;AAELgwB,GAAW,uBAAuB,CAACwJ,GAAYhiD,GAAQwoB,MAC5C,IAAIgwB,GAAW;AAAA,EAClB,QAAAx4C;AAAA,EACA,QAAQ,EAAE,MAAM,cAAc,WAAWgiD,EAAU;AAAA,EACnD,UAAUvJ,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAGE,MAAMmwB,WAAoBX,GAAQ;AAAA,EACrC,OAAOC,GAAO;AAEV,WADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,YACtBqC,GAAG,MAAS,IAEhB,KAAK,KAAK,UAAU,OAAOc,CAAK;AAAA,EAC3C;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAU,GAAY,SAAS,CAACx/C,GAAMqvB,MACjB,IAAImwB,GAAY;AAAA,EACnB,WAAWx/C;AAAA,EACX,UAAUs/C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAMowB,WAAoBZ,GAAQ;AAAA,EACrC,OAAOC,GAAO;AAEV,WADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,OACtBqC,GAAG,IAAI,IAEX,KAAK,KAAK,UAAU,OAAOc,CAAK;AAAA,EAC3C;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAW,GAAY,SAAS,CAACz/C,GAAMqvB,MACjB,IAAIowB,GAAY;AAAA,EACnB,WAAWz/C;AAAA,EACX,UAAUs/C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM2wB,WAAmBnB,GAAQ;AAAA,EACpC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AAC9C,QAAIh+C,IAAO8S,EAAI;AACf,WAAIA,EAAI,eAAe+nC,EAAc,cACjC76C,IAAO,KAAK,KAAK,aAAY,IAE1B,KAAK,KAAK,UAAU,OAAO;AAAA,MAC9B,MAAAA;AAAA,MACA,MAAM8S,EAAI;AAAA,MACV,QAAQA;AAAA,IACpB,CAAS;AAAA,EACL;AAAA,EACA,gBAAgB;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAosC,GAAW,SAAS,CAAChgD,GAAMqvB,MAChB,IAAI2wB,GAAW;AAAA,EAClB,WAAWhgD;AAAA,EACX,UAAUs/C,EAAsB;AAAA,EAChC,cAAc,OAAOjwB,EAAO,WAAY,aAAaA,EAAO,UAAU,MAAMA,EAAO;AAAA,EACnF,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM8wB,WAAiBtB,GAAQ;AAAA,EAClC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GAExCgK,IAAS;AAAA,MACX,GAAGl1C;AAAA,MACH,QAAQ;AAAA,QACJ,GAAGA,EAAI;AAAA,QACP,QAAQ,CAAA;AAAA,MACxB;AAAA,IACA,GACc7R,IAAS,KAAK,KAAK,UAAU,OAAO;AAAA,MACtC,MAAM+mD,EAAO;AAAA,MACb,MAAMA,EAAO;AAAA,MACb,QAAQ;AAAA,QACJ,GAAGA;AAAA,MACnB;AAAA,IACA,CAAS;AACD,WAAI1K,GAAQr8C,CAAM,IACPA,EAAO,KAAK,CAACA,OACT;AAAA,MACH,QAAQ;AAAA,MACR,OAAOA,EAAO,WAAW,UACnBA,EAAO,QACP,KAAK,KAAK,WAAW;AAAA,QACnB,IAAI,QAAQ;AACR,iBAAO,IAAI+5C,GAASgN,EAAO,OAAO,MAAM;AAAA,QAC5C;AAAA,QACA,OAAOA,EAAO;AAAA,MAC1C,CAAyB;AAAA,IACzB,EACa,IAGM;AAAA,MACH,QAAQ;AAAA,MACR,OAAO/mD,EAAO,WAAW,UACnBA,EAAO,QACP,KAAK,KAAK,WAAW;AAAA,QACnB,IAAI,QAAQ;AACR,iBAAO,IAAI+5C,GAASgN,EAAO,OAAO,MAAM;AAAA,QAC5C;AAAA,QACA,OAAOA,EAAO;AAAA,MACtC,CAAqB;AAAA,IACrB;AAAA,EAEI;AAAA,EACA,cAAc;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA3I,GAAS,SAAS,CAACngD,GAAMqvB,MACd,IAAI8wB,GAAS;AAAA,EAChB,WAAWngD;AAAA,EACX,UAAUs/C,EAAsB;AAAA,EAChC,YAAY,OAAOjwB,EAAO,SAAU,aAAaA,EAAO,QAAQ,MAAMA,EAAO;AAAA,EAC7E,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAEE,MAAM05B,WAAelK,GAAQ;AAAA,EAChC,OAAOC,GAAO;AAEV,QADmB,KAAK,SAASA,CAAK,MACnBnD,EAAc,KAAK;AAClC,YAAM/nC,IAAM,KAAK,gBAAgBkrC,CAAK;AACtC,aAAAxB,EAAkB1pC,GAAK;AAAA,QACnB,MAAMioC,EAAa;AAAA,QACnB,UAAUF,EAAc;AAAA,QACxB,UAAU/nC,EAAI;AAAA,MAC9B,CAAa,GACM+pC;AAAA,IACX;AACA,WAAO,EAAE,QAAQ,SAAS,OAAOmB,EAAM,KAAI;AAAA,EAC/C;AACJ;AACAiK,GAAO,SAAS,CAAC15B,MACN,IAAI05B,GAAO;AAAA,EACd,UAAUzJ,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAGE,MAAM4wB,WAAmBpB,GAAQ;AAAA,EACpC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GACxCh+C,IAAO8S,EAAI;AACjB,WAAO,KAAK,KAAK,KAAK,OAAO;AAAA,MACzB,MAAA9S;AAAA,MACA,MAAM8S,EAAI;AAAA,MACV,QAAQA;AAAA,IACpB,CAAS;AAAA,EACL;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACO,MAAMysC,WAAoBxB,GAAQ;AAAA,EACrC,OAAOC,GAAO;AACV,UAAM,EAAE,QAAA3mB,GAAQ,KAAAvkB,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK;AACtD,QAAIlrC,EAAI,OAAO;AAqBX,cApBoB,YAAY;AAC5B,cAAMo1C,IAAW,MAAM,KAAK,KAAK,GAAG,YAAY;AAAA,UAC5C,MAAMp1C,EAAI;AAAA,UACV,MAAMA,EAAI;AAAA,UACV,QAAQA;AAAA,QAC5B,CAAiB;AACD,eAAIo1C,EAAS,WAAW,YACbrL,KACPqL,EAAS,WAAW,WACpB7wB,EAAO,MAAK,GACL4lB,GAAMiL,EAAS,KAAK,KAGpB,KAAK,KAAK,IAAI,YAAY;AAAA,UAC7B,MAAMA,EAAS;AAAA,UACf,MAAMp1C,EAAI;AAAA,UACV,QAAQA;AAAA,QAChC,CAAqB;AAAA,MAET,GACkB;AAEjB;AACD,YAAMo1C,IAAW,KAAK,KAAK,GAAG,WAAW;AAAA,QACrC,MAAMp1C,EAAI;AAAA,QACV,MAAMA,EAAI;AAAA,QACV,QAAQA;AAAA,MACxB,CAAa;AACD,aAAIo1C,EAAS,WAAW,YACbrL,KACPqL,EAAS,WAAW,WACpB7wB,EAAO,MAAK,GACL;AAAA,QACH,QAAQ;AAAA,QACR,OAAO6wB,EAAS;AAAA,MACpC,KAGuB,KAAK,KAAK,IAAI,WAAW;AAAA,QAC5B,MAAMA,EAAS;AAAA,QACf,MAAMp1C,EAAI;AAAA,QACV,QAAQA;AAAA,MAC5B,CAAiB;AAAA,IAET;AAAA,EACJ;AAAA,EACA,OAAO,OAAO84B,GAAGC,GAAG;AAChB,WAAO,IAAI0T,GAAY;AAAA,MACnB,IAAI3T;AAAA,MACJ,KAAKC;AAAA,MACL,UAAU2S,EAAsB;AAAA,IAC5C,CAAS;AAAA,EACL;AACJ;AACO,MAAMgB,WAAoBzB,GAAQ;AAAA,EACrC,OAAOC,GAAO;AACV,UAAM/8C,IAAS,KAAK,KAAK,UAAU,OAAO+8C,CAAK,GACzCmK,IAAS,CAACnoD,OACRq9C,GAAQr9C,CAAI,MACZA,EAAK,QAAQ,OAAO,OAAOA,EAAK,KAAK,IAElCA;AAEX,WAAOs9C,GAAQr8C,CAAM,IAAIA,EAAO,KAAK,CAACjB,MAASmoD,EAAOnoD,CAAI,CAAC,IAAImoD,EAAOlnD,CAAM;AAAA,EAChF;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAu+C,GAAY,SAAS,CAACtgD,GAAMqvB,MACjB,IAAIixB,GAAY;AAAA,EACnB,WAAWtgD;AAAA,EACX,UAAUs/C,EAAsB;AAAA,EAChC,GAAGd,GAAoBnvB,CAAM;AACrC,CAAK;AAmDE,IAAIiwB;AAAA,CACV,SAAUA,GAAuB;AAC9B,EAAAA,EAAsB,YAAe,aACrCA,EAAsB,YAAe,aACrCA,EAAsB,SAAY,UAClCA,EAAsB,YAAe,aACrCA,EAAsB,aAAgB,cACtCA,EAAsB,UAAa,WACnCA,EAAsB,YAAe,aACrCA,EAAsB,eAAkB,gBACxCA,EAAsB,UAAa,WACnCA,EAAsB,SAAY,UAClCA,EAAsB,aAAgB,cACtCA,EAAsB,WAAc,YACpCA,EAAsB,UAAa,WACnCA,EAAsB,WAAc,YACpCA,EAAsB,YAAe,aACrCA,EAAsB,WAAc,YACpCA,EAAsB,wBAA2B,yBACjDA,EAAsB,kBAAqB,mBAC3CA,EAAsB,WAAc,YACpCA,EAAsB,YAAe,aACrCA,EAAsB,SAAY,UAClCA,EAAsB,SAAY,UAClCA,EAAsB,cAAiB,eACvCA,EAAsB,UAAa,WACnCA,EAAsB,aAAgB,cACtCA,EAAsB,UAAa,WACnCA,EAAsB,aAAgB,cACtCA,EAAsB,gBAAmB,iBACzCA,EAAsB,cAAiB,eACvCA,EAAsB,cAAiB,eACvCA,EAAsB,aAAgB,cACtCA,EAAsB,WAAc,YACpCA,EAAsB,aAAgB,cACtCA,EAAsB,aAAgB,cACtCA,EAAsB,cAAiB,eACvCA,EAAsB,cAAiB;AAC3C,GAAGA,MAA0BA,IAAwB,CAAA,EAAG;AAUxD,MAAM4J,IAAa3G,GAAU,QACvB4G,KAAa9F,GAAU,QAGvB+F,KAAc3F,GAAW,QAKzB4F,KAAUrF,GAAO,QACjBsF,KAAcrF,GAAW;AACbC,GAAS;AAE3B,MAAMqF,IAAY7J,GAAS,QACrB8J,IAAanF,GAAU,QAEvBoF,KAAY7J,GAAS,QACrB8J,KAAyB5D,GAAsB;AAC5BhG,GAAgB;AACvB0E,GAAS;AAC3B,MAAMmF,KAAazC,GAAU,QAKvB0C,KAAcjE,GAAW,QACzBkE,KAAWjE,GAAQ;AAELjG,GAAW;AAE/B,MAAMmK,IAAetK,GAAY;AACZC,GAAY;AC1lH1B,MAAMsK,KAA0B,cAE1BC,KAA8B;AAAA,EACvCD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,GAEaE,KAAkB,OAIlBC,KAAsBC,GAAQ,CAACC,EAAQ,GAAIC,GAAQ,EAAG,IAAG,CAAE,CAAC,GAI5DC,KAAeF,EAAQ,GAC9BG,KAAoBC,EACd;AAAA;AAAA;AAAA;AAAA,EAIR,eAAeC,EAAWP,EAAmB;AACjD,CAAC,EACI,YAAW,GACVQ,KAA0BF,EACpB;AAAA,EACR,OAAOC,EAAWF,EAAiB;AACvC,CAAC,EACI,YAAW,GACHI,KAAgBC,EAAS;AAAA,EAClC,QAAQR,EAAQ;AAAA,EAChB,QAAQK,EAAWC,EAAuB;AAC9C,CAAC,GACKG,KAA+BL,EACzB;AAAA;AAAA;AAAA;AAAA;AAAA,EAKR,OAAOC,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GACHE,KAAqBF,EAAS;AAAA,EACvC,QAAQR,EAAQ;AAAA,EAChB,QAAQK,EAAWI,EAA4B;AACnD,CAAC,GACYE,KAAeP,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA,EAKR,OAAOC,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAIHI,KAAkBb,GAAQ,CAACC,EAAQ,GAAIC,GAAQ,EAAG,IAAG,CAAE,CAAC,GAIxDY,KAAuBT,EACxB;AAAA,EACR,SAASU,GAAUjB,EAAe;AAAA,EAClC,IAAIe;AACR,CAAC,EACI,MAAML,EAAa,EACnB,OAAM,GACEQ,KAAmB,CAACrpD,MAAUmpD,GAAqB,UAAUnpD,CAAK,EAAE,SAIpEspD,KAA4BZ,EAC7B;AAAA,EACR,SAASU,GAAUjB,EAAe;AACtC,CAAC,EACI,MAAMa,EAAkB,EACxB,OAAM,GACEO,KAAwB,CAACvpD,MAAUspD,GAA0B,UAAUtpD,CAAK,EAAE,SAI9EwpD,KAAwBd,EACzB;AAAA,EACR,SAASU,GAAUjB,EAAe;AAAA,EAClC,IAAIe;AAAA,EACJ,QAAQD;AACZ,CAAC,EACI,OAAM,GACEQ,KAAoB,CAACzpD,MAAUwpD,GAAsB,UAAUxpD,CAAK,EAAE;AAI5E,IAAI0pD;AAAA,CACV,SAAUA,GAAW;AAElB,EAAAA,EAAUA,EAAU,mBAAsB,KAAM,IAAI,oBACpDA,EAAUA,EAAU,iBAAoB,MAAM,IAAI,kBAElDA,EAAUA,EAAU,aAAgB,MAAM,IAAI,cAC9CA,EAAUA,EAAU,iBAAoB,MAAM,IAAI,kBAClDA,EAAUA,EAAU,iBAAoB,MAAM,IAAI,kBAClDA,EAAUA,EAAU,gBAAmB,MAAM,IAAI,iBACjDA,EAAUA,EAAU,gBAAmB,MAAM,IAAI;AACrD,GAAGA,OAAcA,KAAY,CAAA,EAAG;AAIzB,MAAMC,KAAqBjB,EACtB;AAAA,EACR,SAASU,GAAUjB,EAAe;AAAA,EAClC,IAAIe;AAAA,EACJ,OAAOJ,EAAS;AAAA;AAAA;AAAA;AAAA,IAIZ,MAAMP,GAAQ,EAAG,IAAG;AAAA;AAAA;AAAA;AAAA,IAIpB,SAASD,EAAQ;AAAA;AAAA;AAAA;AAAA,IAIjB,MAAMK,EAAWiB,IAAW;AAAA,EACpC,CAAK;AACL,CAAC,EACI,OAAM,GACEC,KAAiB,CAAC7pD,MAAU2pD,GAAmB,UAAU3pD,CAAK,EAAE,SAChE8pD,KAAuBzB,GAAQ;AAAA,EACxCc;AAAA,EACAG;AAAA,EACAE;AAAA,EACAG;AACJ,CAAC,GAKYI,KAAoBd,GAAa,OAAM,GAWvCe,KAA8BhB,GAAmB,OAAO;AAAA,EACjE,QAAQI,GAAU,yBAAyB;AAAA,EAC3C,QAAQL,GAA6B,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMxC,WAAWG;AAAA;AAAA;AAAA;AAAA,IAIX,QAAQZ,EAAQ,EAAG,SAAQ;AAAA,EACnC,CAAK;AACL,CAAC,GAKY2B,KAAqBvB,EACtB;AAAA;AAAA,EAER,MAAMJ,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASd,OAAOK,EAAWL,GAAU;AAChC,CAAC,EACI,YAAW,GAKH4B,KAAuBD,GAAmB,OAAO;AAAA,EAC1D,SAAS3B,EAAQ;AACrB,CAAC,GAIY6B,KAA2BzB,EAC5B;AAAA;AAAA;AAAA;AAAA,EAIR,cAAcC,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAInD,UAAUH,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAI/C,aAAaH,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAIlD,OAAOH,EAAWyB,EACN;AAAA;AAAA;AAAA;AAAA,IAIR,aAAazB,EAAW0B,IAAW;AAAA,EAC3C,CAAK,EACI,aAAa;AACtB,CAAC,EACI,YAAW,GAIHC,KAA0BzB,GAAc,OAAO;AAAA,EACxD,QAAQO,GAAU,YAAY;AAAA,EAC9B,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,iBAAiBN,EAAQ;AAAA,IACzB,cAAc6B;AAAA,IACd,YAAYD;AAAA,EACpB,CAAK;AACL,CAAC,GAKYK,KAA2B7B,EAC5B;AAAA;AAAA;AAAA;AAAA,EAIR,cAAcC,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAInD,SAASH,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAI9C,aAAaH,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,EAIlD,SAASH,EAAWyB,EACR;AAAA;AAAA;AAAA;AAAA,IAIR,aAAazB,EAAW0B,IAAW;AAAA,EAC3C,CAAK,EACI,aAAa;AAAA;AAAA;AAAA;AAAA,EAIlB,WAAW1B,EAAWyB,EACV;AAAA;AAAA;AAAA;AAAA,IAIR,WAAWzB,EAAW0B,IAAW;AAAA;AAAA;AAAA;AAAA,IAIjC,aAAa1B,EAAW0B,IAAW;AAAA,EAC3C,CAAK,EACI,aAAa;AAAA;AAAA;AAAA;AAAA,EAIlB,OAAO1B,EAAWyB,EACN;AAAA;AAAA;AAAA;AAAA,IAIR,aAAazB,EAAW0B,IAAW;AAAA,EAC3C,CAAK,EACI,aAAa;AACtB,CAAC,EACI,YAAW,GAIHG,KAAyBvB,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA,EAItD,iBAAiBX,EAAQ;AAAA,EACzB,cAAciC;AAAA,EACd,YAAYL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMZ,cAAcvB,EAAWL,GAAU;AACvC,CAAC,GAIYmC,KAAgCzB,GAAmB,OAAO;AAAA,EACnE,QAAQI,GAAU,2BAA2B;AACjD,CAAC,GACYsB,KAA4B,CAAC1qD,MAAUyqD,GAA8B,UAAUzqD,CAAK,EAAE,SAKtF2qD,KAAoB9B,GAAc,OAAO;AAAA,EAClD,QAAQO,GAAU,MAAM;AAC5B,CAAC,GAEYwB,KAAiBlC,EAClB;AAAA;AAAA;AAAA;AAAA,EAIR,UAAUH,GAAQ;AAAA;AAAA;AAAA;AAAA,EAIlB,OAAOI,EAAWJ,IAAU;AAAA;AAAA;AAAA;AAAA,EAI5B,SAASI,EAAWL,GAAU;AAClC,CAAC,EACI,YAAW,GAIHuC,KAA6B7B,GAAmB,OAAO;AAAA,EAChE,QAAQI,GAAU,wBAAwB;AAAA,EAC1C,QAAQL,GAA6B,MAAM6B,EAAc,EAAE,OAAO;AAAA;AAAA;AAAA;AAAA,IAI9D,eAAexC;AAAA,EACvB,CAAK;AACL,CAAC,GAEY0C,KAAyBjC,GAAc,OAAO;AAAA,EACvD,QAAQD,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,IAKnC,QAAQD,EAAWH,EAAY;AAAA,EACvC,CAAK,EAAE,SAAQ;AACf,CAAC,GACYuC,KAAwB9B,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKrD,YAAYN,EAAWH,EAAY;AACvC,CAAC,GAKYwC,KAAyBtC,EAC1B;AAAA;AAAA;AAAA;AAAA,EAIR,KAAKJ,EAAQ;AAAA;AAAA;AAAA;AAAA,EAIb,UAAUK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAK/B,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GACHmC,KAA6BD,GAAuB,OAAO;AAAA;AAAA;AAAA;AAAA,EAIpE,MAAM1C,EAAQ;AAClB,CAAC,GAMK4C,KAAe5C,EAAQ,EAAG,OAAO,CAAC/nD,MAAQ;AAC5C,MAAI;AAGA,gBAAKA,CAAG,GACD;AAAA,EACX,QACW;AACP,WAAO;AAAA,EACX;AACJ,GAAG,EAAE,SAAS,yBAAyB,GAC1B4qD,KAA6BH,GAAuB,OAAO;AAAA;AAAA;AAAA;AAAA,EAIpE,MAAME;AACV,CAAC,GAIYE,KAAiBnB,GAAmB,OAAO;AAAA;AAAA;AAAA;AAAA,EAIpD,KAAK3B,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,aAAaK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,EAIlC,UAAUK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAK/B,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,GAIYuC,KAAyBpB,GAAmB,OAAO;AAAA;AAAA;AAAA;AAAA,EAI5D,aAAa3B,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMrB,aAAaK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,EAIlC,UAAUK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAK/B,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,GAIYwC,KAA6BR,GAAuB,OAAO;AAAA,EACpE,QAAQ1B,GAAU,gBAAgB;AACtC,CAAC,GAIYmC,KAA4BR,GAAsB,OAAO;AAAA,EAClE,WAAWS,EAAQJ,EAAc;AACrC,CAAC,GAIYK,KAAqCX,GAAuB,OAAO;AAAA,EAC5E,QAAQ1B,GAAU,0BAA0B;AAChD,CAAC,GAIYsC,KAAoCX,GAAsB,OAAO;AAAA,EAC1E,mBAAmBS,EAAQH,EAAsB;AACrD,CAAC,GAIYM,KAA4B9C,GAAc,OAAO;AAAA,EAC1D,QAAQO,GAAU,gBAAgB;AAAA,EAClC,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,KAAKN,EAAQ;AAAA,EACrB,CAAK;AACL,CAAC,GAIYsD,KAA2B3C,GAAa,OAAO;AAAA,EACxD,UAAUuC,EAAQnD,GAAQ,CAAC4C,IAA4BE,EAA0B,CAAC,CAAC;AACvF,CAAC,GAIYU,KAAwC7C,GAAmB,OAAO;AAAA,EAC3E,QAAQI,GAAU,sCAAsC;AAC5D,CAAC,GAIY0C,KAAyBjD,GAAc,OAAO;AAAA,EACvD,QAAQO,GAAU,qBAAqB;AAAA,EACvC,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,KAAKN,EAAQ;AAAA,EACrB,CAAK;AACL,CAAC,GAIYyD,KAA2BlD,GAAc,OAAO;AAAA,EACzD,QAAQO,GAAU,uBAAuB;AAAA,EACzC,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,KAAKN,EAAQ;AAAA,EACrB,CAAK;AACL,CAAC,GAIY0D,KAAoChD,GAAmB,OAAO;AAAA,EACvE,QAAQI,GAAU,iCAAiC;AAAA,EACnD,QAAQL,GAA6B,OAAO;AAAA;AAAA;AAAA;AAAA,IAIxC,KAAKT,EAAQ;AAAA,EACrB,CAAK;AACL,CAAC,GAKY2D,KAAuBvD,EACxB;AAAA;AAAA;AAAA;AAAA,EAIR,MAAMJ,EAAQ;AAAA;AAAA;AAAA;AAAA,EAId,aAAaK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,EAIlC,UAAUK,EAAW0B,IAAW;AACpC,CAAC,EACI,YAAW,GAIH6B,KAAejC,GAAmB,OAAO;AAAA;AAAA;AAAA;AAAA,EAIlD,aAAatB,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,EAIlC,WAAWK,EAAW6C,EAAQS,EAAoB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAKnD,OAAOtD,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,GAIYqD,KAA2BrB,GAAuB,OAAO;AAAA,EAClE,QAAQ1B,GAAU,cAAc;AACpC,CAAC,GAIYgD,KAA0BrB,GAAsB,OAAO;AAAA,EAChE,SAASS,EAAQU,EAAY;AACjC,CAAC,GAIYG,KAAyBxD,GAAc,OAAO;AAAA,EACvD,QAAQO,GAAU,aAAa;AAAA,EAC/B,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,MAAMN,EAAQ;AAAA;AAAA;AAAA;AAAA,IAId,WAAWK,EAAW2D,GAAShE,EAAQ,CAAE,CAAC;AAAA,EAClD,CAAK;AACL,CAAC,GAIYiE,KAAoB7D,EACrB;AAAA,EACR,MAAMU,GAAU,MAAM;AAAA;AAAA;AAAA;AAAA,EAItB,MAAMd,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,EAKd,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAIH0D,KAAqB9D,EACtB;AAAA,EACR,MAAMU,GAAU,OAAO;AAAA;AAAA;AAAA;AAAA,EAIvB,MAAM8B;AAAA;AAAA;AAAA;AAAA,EAIN,UAAU5C,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,EAKlB,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAIH2D,KAAqB/D,EACtB;AAAA,EACR,MAAMU,GAAU,OAAO;AAAA;AAAA;AAAA;AAAA,EAIvB,MAAM8B;AAAA;AAAA;AAAA;AAAA,EAIN,UAAU5C,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,EAKlB,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAIH4D,KAAyBhE,EAC1B;AAAA,EACR,MAAMU,GAAU,UAAU;AAAA,EAC1B,UAAUf,GAAQ,CAAC4C,IAA4BE,EAA0B,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAK1E,OAAOxC,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAMH6D,KAAqBvB,GAAe,OAAO;AAAA,EACpD,MAAMhC,GAAU,eAAe;AACnC,CAAC,GAIYwD,KAAqBvE,GAAQ;AAAA,EACtCkE;AAAA,EACAC;AAAA,EACAC;AAAA,EACAE;AAAA,EACAD;AACJ,CAAC,GAIYG,KAAsBnE,EACvB;AAAA,EACR,MAAMoE,GAAO,CAAC,QAAQ,WAAW,CAAC;AAAA,EAClC,SAASF;AACb,CAAC,EACI,YAAW,GAIHG,KAAwB9D,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA,EAIrD,aAAaN,EAAWL,GAAU;AAAA,EAClC,UAAUkD,EAAQqB,EAAmB;AACzC,CAAC,GAIYG,KAAsChE,GAAmB,OAAO;AAAA,EACzE,QAAQI,GAAU,oCAAoC;AAC1D,CAAC,GAYY6D,KAAwBvE,EACzB;AAAA;AAAA;AAAA;AAAA,EAIR,OAAOC,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM5B,cAAcK,EAAW0B,IAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASpC,iBAAiB1B,EAAW0B,IAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASvC,gBAAgB1B,EAAW0B,IAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAStC,eAAe1B,EAAW0B,IAAW;AACzC,CAAC,EACI,YAAW,GAIH6C,KAAajD,GAAmB,OAAO;AAAA;AAAA;AAAA;AAAA,EAIhD,aAAatB,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,EAIlC,aAAa8B,EACD;AAAA,IACR,MAAMhB,GAAU,QAAQ;AAAA,IACxB,YAAYT,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA,IACjD,UAAUH,EAAW6C,EAAQlD,EAAQ,CAAE,CAAC;AAAA,EAChD,CAAK,EACI,YAAW;AAAA;AAAA;AAAA;AAAA;AAAA,EAKhB,cAAcK,EAAWG,EAAS;AAAA,IAC9B,MAAMM,GAAU,QAAQ;AAAA,IACxB,YAAYT,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA,IACjD,UAAUH,EAAW6C,EAAQlD,EAAQ,CAAE,CAAC;AAAA,EAChD,CAAK,EACI,aAAa;AAAA;AAAA;AAAA;AAAA,EAIlB,aAAaK,EAAWsE,EAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,EAK7C,OAAOtE,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,GAIYqE,KAAyBrC,GAAuB,OAAO;AAAA,EAChE,QAAQ1B,GAAU,YAAY;AAClC,CAAC,GAIYgE,KAAwBrC,GAAsB,OAAO;AAAA,EAC9D,OAAOS,EAAQ0B,EAAU;AAC7B,CAAC,GAIYG,KAAuBpE,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOpD,SAASuC,EAAQoB,EAAkB,EAAE,QAAQ,CAAA,CAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM/C,mBAAmB9D,EAAS,CAAA,CAAE,EAAE,YAAW,EAAG,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAetD,SAASH,EAAW0B,IAAW;AACnC,CAAC;AAIgDgD,GAAqB,GAAGpE,GAAa,OAAO;AAAA,EACzF,YAAYW,GAAS;AACzB,CAAC,CAAC;AAIK,MAAM0D,KAAwBzE,GAAc,OAAO;AAAA,EACtD,QAAQO,GAAU,YAAY;AAAA,EAC9B,QAAQR,GAAwB,OAAO;AAAA,IACnC,MAAMN,EAAQ;AAAA,IACd,WAAWK,EAAW2D,GAAS1C,GAAS,CAAE,CAAC;AAAA,EACnD,CAAK;AACL,CAAC,GAIY2D,KAAoCvE,GAAmB,OAAO;AAAA,EACvE,QAAQI,GAAU,kCAAkC;AACxD,CAAC,GAKYoE,KAAqBV,GAAO;AAAA,EACrC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC,GAIYW,KAAwB5E,GAAc,OAAO;AAAA,EACtD,QAAQO,GAAU,kBAAkB;AAAA,EACpC,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,OAAO4E;AAAA,EACf,CAAK;AACL,CAAC,GAIYE,KAAmC1E,GAAmB,OAAO;AAAA,EACtE,QAAQI,GAAU,uBAAuB;AAAA,EACzC,QAAQL,GAA6B,OAAO;AAAA;AAAA;AAAA;AAAA,IAIxC,OAAOyE;AAAA;AAAA;AAAA;AAAA,IAIP,QAAQ7E,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,IAI7B,MAAMsB,GAAS;AAAA,EACvB,CAAK;AACL,CAAC,GAKY+D,KAAkBjF,EACnB;AAAA;AAAA;AAAA;AAAA,EAIR,MAAMJ,EAAQ,EAAG,SAAQ;AAC7B,CAAC,EACI,YAAW,GAIHsF,KAAyBlF,EAC1B;AAAA;AAAA;AAAA;AAAA,EAIR,OAAOC,EAAW6C,EAAQmC,EAAe,CAAC;AAAA;AAAA;AAAA;AAAA,EAI1C,cAAchF,EAAWJ,KAAW,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,EAIjD,eAAeI,EAAWJ,KAAW,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,EAIlD,sBAAsBI,EAAWJ,KAAW,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AAC7D,CAAC,EACI,YAAW,GAIHsF,KAAwBnF,EACzB;AAAA,EACR,MAAMoE,GAAO,CAAC,QAAQ,WAAW,CAAC;AAAA,EAClC,SAASzE,GAAQ,CAACkE,IAAmBC,IAAoBC,EAAkB,CAAC;AAChF,CAAC,EACI,YAAW,GAIHqB,KAA6BjF,GAAc,OAAO;AAAA,EAC3D,QAAQO,GAAU,wBAAwB;AAAA,EAC1C,QAAQR,GAAwB,OAAO;AAAA,IACnC,UAAU4C,EAAQqC,EAAqB;AAAA;AAAA;AAAA;AAAA,IAIvC,cAAclF,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA,IAInC,gBAAgBK,EAAWmE,GAAO,CAAC,QAAQ,cAAc,YAAY,CAAC,CAAC;AAAA,IACvE,aAAanE,EAAWJ,IAAU;AAAA;AAAA;AAAA;AAAA,IAIlC,WAAWA,GAAQ,EAAG,IAAG;AAAA,IACzB,eAAeI,EAAW6C,EAAQlD,EAAQ,CAAE,CAAC;AAAA;AAAA;AAAA;AAAA,IAI7C,UAAUK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAAA;AAAA;AAAA;AAAA,IAI/C,kBAAkBH,EAAWiF,EAAsB;AAAA,EAC3D,CAAK;AACL,CAAC,GAIYG,KAA4B9E,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA,EAIzD,OAAOX,EAAQ;AAAA;AAAA;AAAA;AAAA,EAIf,YAAYK,EAAWmE,GAAO,CAAC,WAAW,gBAAgB,WAAW,CAAC,EAAE,GAAGxE,EAAQ,CAAE,CAAC;AAAA,EACtF,MAAMwE,GAAO,CAAC,QAAQ,WAAW,CAAC;AAAA,EAClC,SAASkB,GAAqB,QAAQ;AAAA,IAClCzB;AAAA,IACAC;AAAA,IACAC;AAAA,EACR,CAAK;AACL,CAAC,GAKYwB,KAAsBvF,EACvB;AAAA,EACR,MAAMU,GAAU,SAAS;AAAA,EACzB,OAAOT,EAAWL,GAAU;AAAA,EAC5B,aAAaK,EAAWL,GAAU;AAAA,EAClC,SAASK,EAAW0B,IAAW;AACnC,CAAC,EACI,YAAW,GAIH6D,KAAqBxF,EACtB;AAAA,EACR,MAAMU,GAAU,QAAQ;AAAA,EACxB,OAAOT,EAAWL,GAAU;AAAA,EAC5B,aAAaK,EAAWL,GAAU;AAAA,EAClC,WAAWK,EAAWJ,IAAU;AAAA,EAChC,WAAWI,EAAWJ,IAAU;AAAA,EAChC,QAAQI,EAAWmE,GAAO,CAAC,SAAS,OAAO,QAAQ,WAAW,CAAC,CAAC;AACpE,CAAC,EACI,YAAW,GAIHqB,KAAqBzF,EACtB;AAAA,EACR,MAAMoE,GAAO,CAAC,UAAU,SAAS,CAAC;AAAA,EAClC,OAAOnE,EAAWL,GAAU;AAAA,EAC5B,aAAaK,EAAWL,GAAU;AAAA,EAClC,SAASK,EAAWJ,IAAU;AAAA,EAC9B,SAASI,EAAWJ,IAAU;AAClC,CAAC,EACI,YAAW,GAIH6F,KAAmB1F,EACpB;AAAA,EACR,MAAMU,GAAU,QAAQ;AAAA,EACxB,OAAOT,EAAWL,GAAU;AAAA,EAC5B,aAAaK,EAAWL,GAAU;AAAA,EAClC,MAAMkD,EAAQlD,GAAU;AAAA,EACxB,WAAWK,EAAW6C,EAAQlD,EAAQ,CAAE,CAAC;AAC7C,CAAC,EACI,YAAW,GAIH+F,KAAkChG,GAAQ;AAAA,EACnD4F;AAAA,EACAC;AAAA,EACAC;AAAA,EACAC;AACJ,CAAC,GAKYE,KAAsBzF,GAAc,OAAO;AAAA,EACpD,QAAQO,GAAU,oBAAoB;AAAA,EACtC,QAAQR,GAAwB,OAAO;AAAA;AAAA;AAAA;AAAA,IAInC,SAASN,EAAQ;AAAA;AAAA;AAAA;AAAA,IAIjB,iBAAiBiG,EACL;AAAA,MACR,MAAMnF,GAAU,QAAQ;AAAA,MACxB,YAAYkD,GAAShE,EAAQ,GAAI+F,EAA+B;AAAA,MAChE,UAAU1F,EAAW6C,EAAQlD,EAAQ,CAAE,CAAC;AAAA,IACpD,CAAS,EACI,YAAW;AAAA,EACxB,CAAK;AACL,CAAC,GAIYkG,KAAqBvF,GAAa,OAAO;AAAA;AAAA;AAAA;AAAA,EAIlD,QAAQ6D,GAAO,CAAC,UAAU,WAAW,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,EAI9C,SAASnE,EAAW2D,GAAShE,EAAQ,GAAIsB,GAAS,CAAE,CAAC;AACzD,CAAC,GAKY6E,KAAkC/F,EACnC;AAAA,EACR,MAAMU,GAAU,cAAc;AAAA;AAAA;AAAA;AAAA,EAI9B,KAAKd,EAAQ;AACjB,CAAC,EACI,YAAW,GAQHoG,KAAwBhG,EACzB;AAAA,EACR,MAAMU,GAAU,YAAY;AAAA;AAAA;AAAA;AAAA,EAI5B,MAAMd,EAAQ;AAClB,CAAC,EACI,YAAW,GAIHqG,KAAwB9F,GAAc,OAAO;AAAA,EACtD,QAAQO,GAAU,qBAAqB;AAAA,EACvC,QAAQR,GAAwB,OAAO;AAAA,IACnC,KAAKP,GAAQ,CAACqG,IAAuBD,EAA+B,CAAC;AAAA;AAAA;AAAA;AAAA,IAIrE,UAAUF,EACE;AAAA;AAAA;AAAA;AAAA,MAIR,MAAMjG,EAAQ;AAAA;AAAA;AAAA;AAAA,MAId,OAAOA,EAAQ;AAAA,IAC3B,CAAS,EACI,YAAW;AAAA,IAChB,SAASK,EAAWG,EAAS;AAAA;AAAA;AAAA;AAAA,MAIzB,WAAWH,EAAW2D,GAAShE,EAAQ,GAAIA,EAAQ,CAAE,CAAC;AAAA,IAClE,CAAS,CAAC;AAAA,EACV,CAAK;AACL,CAAC,GAIYsG,KAAuB3F,GAAa,OAAO;AAAA,EACpD,YAAYmB,EACA;AAAA;AAAA;AAAA;AAAA,IAIR,QAAQoB,EAAQlD,EAAQ,CAAE,EAAE,IAAI,GAAG;AAAA;AAAA;AAAA;AAAA,IAInC,OAAOK,EAAWJ,GAAQ,EAAG,IAAG,CAAE;AAAA;AAAA;AAAA;AAAA,IAIlC,SAASI,EAAW0B,IAAW;AAAA,EACvC,CAAK,EACI,YAAW;AACpB,CAAC,GAKYwE,KAAanG,EACd;AAAA;AAAA;AAAA;AAAA,EAIR,KAAKJ,EAAQ,EAAG,WAAW,SAAS;AAAA;AAAA;AAAA;AAAA,EAIpC,MAAMK,EAAWL,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAK3B,OAAOK,EAAWG,EAAS,CAAA,CAAE,EAAE,YAAW,CAAE;AAChD,CAAC,EACI,YAAW,GAIHgG,KAAyBjG,GAAc,OAAO;AAAA,EACvD,QAAQO,GAAU,YAAY;AAClC,CAAC,GAIY2F,KAAwB9F,GAAa,OAAO;AAAA,EACrD,OAAOuC,EAAQqD,EAAU;AAC7B,CAAC,GAIYG,KAAqChG,GAAmB,OAAO;AAAA,EACxE,QAAQI,GAAU,kCAAkC;AACxD,CAAC;AAEkCf,GAAQ;AAAA,EACvCsC;AAAA,EACAL;AAAA,EACAqE;AAAA,EACAlB;AAAA,EACApB;AAAA,EACAF;AAAA,EACAb;AAAA,EACAG;AAAA,EACAE;AAAA,EACAG;AAAA,EACAC;AAAA,EACAuB;AAAA,EACAH;AACJ,CAAC;AACuC9E,GAAQ;AAAA,EAC5C2B;AAAA,EACAa;AAAA,EACAJ;AAAA,EACAuE;AACJ,CAAC;AACiC3G,GAAQ;AAAA,EACtC0B;AAAA,EACAgE;AAAA,EACAS;AAAA,EACAO;AACJ,CAAC;AAEkC1G,GAAQ;AAAA,EACvCsC;AAAA,EACAmD;AAAA,EACAQ;AAAA,EACAQ;AACJ,CAAC;AACuCzG,GAAQ;AAAA,EAC5C2B;AAAA,EACAa;AAAA,EACA6C;AAAA,EACA1B;AAAA,EACAH;AAAA,EACA0B;AAAA,EACAP;AACJ,CAAC;AACiC3E,GAAQ;AAAA,EACtC0B;AAAA,EACAS;AAAA,EACAoE;AAAA,EACA7B;AAAA,EACAX;AAAA,EACAb;AAAA,EACAG;AAAA,EACAE;AAAA,EACAyB;AAAA,EACAD;AACJ,CAAC;AACM,MAAM6B,WAAiB,MAAM;AAAA,EAChC,YAAY9uB,GAAM/6B,GAASpG,GAAM;AAC7B,UAAM,aAAamhC,CAAI,KAAK/6B,CAAO,EAAE,GACrC,KAAK,OAAO+6B,GACZ,KAAK,OAAOnhC,GACZ,KAAK,OAAO;AAAA,EAChB;AACJ;ACzxCO,MAAMkwD,KAA+B;AAKrC,MAAMC,GAAS;AAAA,EAClB,YAAYC,GAAU;AAClB,SAAK,WAAWA,GAChB,KAAK,oBAAoB,GACzB,KAAK,mBAAmB,oBAAI,IAAG,GAC/B,KAAK,kCAAkC,oBAAI,IAAG,GAC9C,KAAK,wBAAwB,oBAAI,IAAG,GACpC,KAAK,oBAAoB,oBAAI,IAAG,GAChC,KAAK,oBAAoB,oBAAI,IAAG,GAChC,KAAK,eAAe,oBAAI,IAAG,GAC3B,KAAK,iCAAiC,oBAAI,IAAG,GAC7C,KAAK,uBAAuBpF,IAA6B,CAACqF,MAAiB;AACvE,YAAMC,IAAa,KAAK,gCAAgC,IAAID,EAAa,OAAO,SAAS;AACzF,MAAAC,KAAe,QAAyCA,EAAW,MAAMD,EAAa,OAAO,MAAM;AAAA,IACvG,CAAC,GACD,KAAK,uBAAuBxE,IAA4B,CAACwE,MAAiB;AACtE,WAAK,YAAYA,CAAY;AAAA,IACjC,CAAC,GACD,KAAK;AAAA,MAAkB1E;AAAA;AAAA,MAEvB,CAAC4E,OAAc,CAAA;AAAA,IAAG;AAAA,EACtB;AAAA,EACA,cAAcC,GAAWC,GAASC,GAAiBC,GAAWC,IAAyB,IAAO;AAC1F,SAAK,aAAa,IAAIJ,GAAW;AAAA,MAC7B,WAAW,WAAWG,GAAWF,CAAO;AAAA,MACxC,WAAW,KAAK,IAAG;AAAA,MACnB,SAAAA;AAAA,MACA,iBAAAC;AAAA,MACA,wBAAAE;AAAA,MACA,WAAAD;AAAA,IACZ,CAAS;AAAA,EACL;AAAA,EACA,cAAcH,GAAW;AACrB,UAAM50C,IAAO,KAAK,aAAa,IAAI40C,CAAS;AAC5C,QAAI,CAAC50C;AACD,aAAO;AACX,UAAMi1C,IAAe,KAAK,IAAG,IAAKj1C,EAAK;AACvC,QAAIA,EAAK,mBAAmBi1C,KAAgBj1C,EAAK;AAC7C,iBAAK,aAAa,OAAO40C,CAAS,GAC5B,IAAIP,GAASvF,GAAU,gBAAgB,kCAAkC,EAAE,iBAAiB9uC,EAAK,iBAAiB,cAAAi1C,GAAc;AAE1I,wBAAaj1C,EAAK,SAAS,GAC3BA,EAAK,YAAY,WAAWA,EAAK,WAAWA,EAAK,OAAO,GACjD;AAAA,EACX;AAAA,EACA,gBAAgB40C,GAAW;AACvB,UAAM50C,IAAO,KAAK,aAAa,IAAI40C,CAAS;AAC5C,IAAI50C,MACA,aAAaA,EAAK,SAAS,GAC3B,KAAK,aAAa,OAAO40C,CAAS;AAAA,EAE1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,QAAQM,GAAW;AACrB,QAAInxD,GAAIwB,GAAI6C;AACZ,SAAK,aAAa8sD;AAClB,UAAMC,KAAYpxD,IAAK,KAAK,eAAe,QAAQA,MAAO,SAAS,SAASA,EAAG;AAC/E,SAAK,WAAW,UAAU,MAAM;AAC5B,MAAAoxD,KAAa,QAAuCA,EAAQ,GAC5D,KAAK,SAAQ;AAAA,IACjB;AACA,UAAMC,KAAY7vD,IAAK,KAAK,eAAe,QAAQA,MAAO,SAAS,SAASA,EAAG;AAC/E,SAAK,WAAW,UAAU,CAAC0F,MAAU;AACjC,MAAAmqD,KAAa,QAAuCA,EAASnqD,CAAK,GAClE,KAAK,SAASA,CAAK;AAAA,IACvB;AACA,UAAMoqD,KAAcjtD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAClF,SAAK,WAAW,YAAY,CAACoC,GAASib,MAAU;AAC5C,MAAA4vC,KAAe,QAAyCA,EAAW7qD,GAASib,CAAK,GAC7EopC,GAAkBrkD,CAAO,KAAKykD,GAAezkD,CAAO,IACpD,KAAK,YAAYA,CAAO,IAEnBikD,GAAiBjkD,CAAO,IAC7B,KAAK,WAAWA,GAASib,CAAK,IAEzBkpC,GAAsBnkD,CAAO,IAClC,KAAK,gBAAgBA,CAAO,IAG5B,KAAK,SAAS,IAAI,MAAM,yBAAyB,KAAK,UAAUA,CAAO,CAAC,EAAE,CAAC;AAAA,IAEnF,GACA,MAAM,KAAK,WAAW,MAAK;AAAA,EAC/B;AAAA,EACA,WAAW;AACP,QAAIzG;AACJ,UAAMuxD,IAAmB,KAAK;AAC9B,SAAK,oBAAoB,oBAAI,IAAG,GAChC,KAAK,kBAAkB,MAAK,GAC5B,KAAK,+BAA+B,MAAK,GACzC,KAAK,aAAa,SACjBvxD,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,IAAI;AACrE,UAAMkH,IAAQ,IAAIopD,GAASvF,GAAU,kBAAkB,mBAAmB;AAC1E,eAAWyG,KAAWD,EAAiB;AACnC,MAAAC,EAAQtqD,CAAK;AAAA,EAErB;AAAA,EACA,SAASA,GAAO;AACZ,QAAIlH;AACJ,KAACA,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK;AAAA,EAChF;AAAA,EACA,gBAAgBwpD,GAAc;AAC1B,QAAI1wD;AACJ,UAAMwxD,KAAWxxD,IAAK,KAAK,sBAAsB,IAAI0wD,EAAa,MAAM,OAAO,QAAQ1wD,MAAO,SAASA,IAAK,KAAK;AAEjH,IAAIwxD,MAAY,UAIhB,QAAQ,QAAO,EACV,KAAK,MAAMA,EAAQd,CAAY,CAAC,EAChC,MAAM,CAACxpD,MAAU,KAAK,SAAS,IAAI,MAAM,2CAA2CA,CAAK,EAAE,CAAC,CAAC;AAAA,EACtG;AAAA,EACA,WAAW0mC,GAASlsB,GAAO;AACvB,QAAI1hB,GAAIwB,GAAI6C,GAAIE;AAChB,UAAMitD,KAAWxxD,IAAK,KAAK,iBAAiB,IAAI4tC,EAAQ,MAAM,OAAO,QAAQ5tC,MAAO,SAASA,IAAK,KAAK;AACvG,QAAIwxD,MAAY,QAAW;AACvB,OAAChwD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,UAAkBA,EAAG,KAAK;AAAA,QAChE,SAAS;AAAA,QACT,IAAIosC,EAAQ;AAAA,QACZ,OAAO;AAAA,UACH,MAAMmd,GAAU;AAAA,UAChB,SAAS;AAAA,QAC7B;AAAA,MACA,CAAa,EAAE,MAAM,CAAC7jD,MAAU,KAAK,SAAS,IAAI,MAAM,qCAAqCA,CAAK,EAAE,CAAC,CAAC;AAC1F;AAAA,IACJ;AACA,UAAMuqD,IAAkB,IAAI,gBAAe;AAC3C,SAAK,gCAAgC,IAAI7jB,EAAQ,IAAI6jB,CAAe;AACpE,UAAMC,IAAY;AAAA,MACd,QAAQD,EAAgB;AAAA,MACxB,YAAYptD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAAA,MAC1E,QAAQE,IAAKqpC,EAAQ,YAAY,QAAQrpC,MAAO,SAAS,SAASA,EAAG;AAAA,MACrE,kBAAkB,CAACmsD,MAAiB,KAAK,aAAaA,GAAc,EAAE,kBAAkB9iB,EAAQ,IAAI;AAAA,MACpG,aAAa,CAAC+jB,GAAGC,GAAc37C,MAAY,KAAK,QAAQ07C,GAAGC,GAAc,EAAE,GAAG37C,GAAS,kBAAkB23B,EAAQ,GAAE,CAAE;AAAA,MACrH,UAAUlsB,KAAU,OAA2B,SAASA,EAAM;AAAA,MAC9D,WAAWksB,EAAQ;AAAA,MACnB,aAAalsB,KAAU,OAA2B,SAASA,EAAM;AAAA,IAC7E;AAEQ,YAAQ,QAAO,EACV,KAAK,MAAM8vC,EAAQ5jB,GAAS8jB,CAAS,CAAC,EACtC,KAAK,CAACpwD,MAAW;AAClB,UAAItB;AACJ,UAAI,CAAAyxD,EAAgB,OAAO;AAG3B,gBAAQzxD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,SAAS,SAASA,EAAG,KAAK;AAAA,UACvE,QAAAsB;AAAA,UACA,SAAS;AAAA,UACT,IAAIssC,EAAQ;AAAA,QAC5B,CAAa;AAAA,IACL,GAAG,CAAC1mC,MAAU;AACV,UAAIlH,GAAIwB;AACR,UAAI,CAAAiwD,EAAgB,OAAO;AAG3B,gBAAQzxD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,SAAS,SAASA,EAAG,KAAK;AAAA,UACvE,SAAS;AAAA,UACT,IAAI4tC,EAAQ;AAAA,UACZ,OAAO;AAAA,YACH,MAAM,OAAO,cAAc1mC,EAAM,IAAO,IAClCA,EAAM,OACN6jD,GAAU;AAAA,YAChB,UAAUvpD,IAAK0F,EAAM,aAAa,QAAQ1F,MAAO,SAASA,IAAK;AAAA,UACnF;AAAA,QACA,CAAa;AAAA,IACL,CAAC,EACI,MAAM,CAAC0F,MAAU,KAAK,SAAS,IAAI,MAAM,4BAA4BA,CAAK,EAAE,CAAC,CAAC,EAC9E,QAAQ,MAAM;AACf,WAAK,gCAAgC,OAAO0mC,EAAQ,EAAE;AAAA,IAC1D,CAAC;AAAA,EACL;AAAA,EACA,YAAY8iB,GAAc;AACtB,UAAM,EAAE,eAAAmB,GAAe,GAAGjjC,EAAM,IAAK8hC,EAAa,QAC5CG,IAAY,OAAOgB,CAAa,GAChCL,IAAU,KAAK,kBAAkB,IAAIX,CAAS;AACpD,QAAI,CAACW,GAAS;AACV,WAAK,SAAS,IAAI,MAAM,0DAA0D,KAAK,UAAUd,CAAY,CAAC,EAAE,CAAC;AACjH;AAAA,IACJ;AACA,UAAMoB,IAAkB,KAAK,kBAAkB,IAAIjB,CAAS,GACtDkB,IAAc,KAAK,aAAa,IAAIlB,CAAS;AACnD,QAAIkB,KAAeD,KAAmBC,EAAY;AAC9C,UAAI;AACA,aAAK,cAAclB,CAAS;AAAA,MAChC,SACO3pD,GAAO;AACV,QAAA4qD,EAAgB5qD,CAAK;AACrB;AAAA,MACJ;AAEJ,IAAAsqD,EAAQ5iC,CAAM;AAAA,EAClB;AAAA,EACA,YAAYif,GAAU;AAClB,UAAMgjB,IAAY,OAAOhjB,EAAS,EAAE,GAC9B2jB,IAAU,KAAK,kBAAkB,IAAIX,CAAS;AACpD,QAAIW,MAAY,QAAW;AACvB,WAAK,SAAS,IAAI,MAAM,kDAAkD,KAAK,UAAU3jB,CAAQ,CAAC,EAAE,CAAC;AACrG;AAAA,IACJ;AAIA,QAHA,KAAK,kBAAkB,OAAOgjB,CAAS,GACvC,KAAK,kBAAkB,OAAOA,CAAS,GACvC,KAAK,gBAAgBA,CAAS,GAC1B/F,GAAkBjd,CAAQ;AAC1B,MAAA2jB,EAAQ3jB,CAAQ;AAAA,SAEf;AACD,YAAM3mC,IAAQ,IAAIopD,GAASziB,EAAS,MAAM,MAAMA,EAAS,MAAM,SAASA,EAAS,MAAM,IAAI;AAC3F,MAAA2jB,EAAQtqD,CAAK;AAAA,IACjB;AAAA,EACJ;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,QAAQ;AACV,QAAIlH;AACJ,YAAQA,IAAK,KAAK,gBAAgB,QAAQA,MAAO,SAAS,SAASA,EAAG;EAC1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ4tC,GAASgkB,GAAc37C,GAAS;AACpC,UAAM,EAAE,kBAAA+7C,GAAkB,iBAAAC,GAAiB,mBAAAC,EAAiB,IAAKj8C,KAAmD,CAAA;AACpH,WAAO,IAAI,QAAQ,CAACw7B,GAASC,MAAW;AACpC,UAAI1xC,GAAIwB,GAAI6C,GAAIE,GAAID,GAAIO;AACxB,UAAI,CAAC,KAAK,YAAY;AAClB,QAAA6sC,EAAO,IAAI,MAAM,eAAe,CAAC;AACjC;AAAA,MACJ;AACA,QAAM1xC,IAAK,KAAK,cAAc,QAAQA,MAAO,SAAS,SAASA,EAAG,+BAA+B,MAC7F,KAAK,0BAA0B4tC,EAAQ,MAAM,IAEhDpsC,IAAKyU,KAAY,OAA6B,SAASA,EAAQ,YAAY,QAAQzU,MAAO,UAAkBA,EAAG,eAAc;AAC9H,YAAMqvD,IAAY,KAAK,qBACjBsB,IAAiB;AAAA,QACnB,GAAGvkB;AAAA,QACH,SAAS;AAAA,QACT,IAAIijB;AAAA,MACpB;AACY,MAAI56C,KAAY,QAAsCA,EAAQ,eAC1D,KAAK,kBAAkB,IAAI46C,GAAW56C,EAAQ,UAAU,GACxDk8C,EAAe,SAAS;AAAA,QACpB,GAAGvkB,EAAQ;AAAA,QACX,OAAO;AAAA,UACH,KAAMvpC,IAAKupC,EAAQ,YAAY,QAAQvpC,MAAO,SAAS,SAASA,EAAG,UAAU,CAAA;AAAA,UAC7E,eAAewsD;AAAA,QACvC;AAAA,MACA;AAEY,YAAMpjC,IAAS,CAAC6oB,MAAW;AACvB,YAAIt2C;AACJ,aAAK,kBAAkB,OAAO6wD,CAAS,GACvC,KAAK,kBAAkB,OAAOA,CAAS,GACvC,KAAK,gBAAgBA,CAAS,IAC7B7wD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,UAAkBA,EAAG,KAAK;AAAA,UAChE,SAAS;AAAA,UACT,QAAQ;AAAA,UACR,QAAQ;AAAA,YACJ,WAAW6wD;AAAA,YACX,QAAQ,OAAOva,CAAM;AAAA,UAC7C;AAAA,QACA,GAAmB,EAAE,kBAAA0b,GAAkB,iBAAAC,GAAiB,mBAAAC,EAAiB,CAAE,EAAE,MAAM,CAAChrD,MAAU,KAAK,SAAS,IAAI,MAAM,gCAAgCA,CAAK,EAAE,CAAC,CAAC,GAC/IwqC,EAAO4E,CAAM;AAAA,MACjB;AACA,WAAK,kBAAkB,IAAIua,GAAW,CAAChjB,MAAa;AAChD,YAAI7tC;AACJ,YAAK,KAAAA,IAAKiW,KAAY,OAA6B,SAASA,EAAQ,YAAY,QAAQjW,MAAO,WAAkBA,EAAG,UAGpH;AAAA,cAAI6tC,aAAoB;AACpB,mBAAO6D,EAAO7D,CAAQ;AAE1B,cAAI;AACA,kBAAMvsC,IAASswD,EAAa,MAAM/jB,EAAS,MAAM;AACjD,YAAA4D,EAAQnwC,CAAM;AAAA,UAClB,SACO4F,GAAO;AACV,YAAAwqC,EAAOxqC,CAAK;AAAA,UAChB;AAAA;AAAA,MACJ,CAAC,IACA3C,IAAK0R,KAAY,OAA6B,SAASA,EAAQ,YAAY,QAAQ1R,MAAO,UAAkBA,EAAG,iBAAiB,SAAS,MAAM;AAC5I,YAAIvE;AACJ,QAAAytB,GAAQztB,IAAKiW,KAAY,OAA6B,SAASA,EAAQ,YAAY,QAAQjW,MAAO,SAAS,SAASA,EAAG,MAAM;AAAA,MACjI,CAAC;AACD,YAAM8wD,KAAWxsD,IAAK2R,KAAY,OAA6B,SAASA,EAAQ,aAAa,QAAQ3R,MAAO,SAASA,IAAKisD,IACpH6B,IAAiB,MAAM3kC,EAAO,IAAI6iC,GAASvF,GAAU,gBAAgB,qBAAqB,EAAE,SAAA+F,EAAO,CAAE,CAAC;AAC5G,WAAK,cAAcD,GAAWC,GAAS76C,KAAY,OAA6B,SAASA,EAAQ,iBAAiBm8C,IAAiBvtD,IAAKoR,KAAY,OAA6B,SAASA,EAAQ,4BAA4B,QAAQpR,MAAO,SAASA,IAAK,EAAK,GAChQ,KAAK,WAAW,KAAKstD,GAAgB,EAAE,kBAAAH,GAAkB,iBAAAC,GAAiB,mBAAAC,EAAiB,CAAE,EAAE,MAAM,CAAChrD,MAAU;AAC5G,aAAK,gBAAgB2pD,CAAS,GAC9Bnf,EAAOxqC,CAAK;AAAA,MAChB,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,aAAawpD,GAAcz6C,GAAS;AACtC,QAAIjW,GAAIwB;AACR,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,eAAe;AASnC,QAPA,KAAK,6BAA6BkvD,EAAa,MAAM,KAC3BlvD,KAAMxB,IAAK,KAAK,cAAc,QAAQA,MAAO,SAAS,SAASA,EAAG,kCAAkC,QAAQwB,MAAO,SAASA,IAAK,CAAA,GAGtH,SAASkvD,EAAa,MAAM,KAC1D,CAACA,EAAa,UACd,EAAEz6C,KAAY,QAAsCA,EAAQ,mBAClD;AAEb,UAAI,KAAK,+BAA+B,IAAIy6C,EAAa,MAAM;AAC3D;AAGJ,WAAK,+BAA+B,IAAIA,EAAa,MAAM,GAG3D,QAAQ,UAAU,KAAK,MAAM;AACzB,YAAI1wD;AAIJ,YAFA,KAAK,+BAA+B,OAAO0wD,EAAa,MAAM,GAE1D,CAAC,KAAK;AACN;AAEJ,cAAM2B,IAAsB;AAAA,UACxB,GAAG3B;AAAA,UACH,SAAS;AAAA,QAC7B;AAGgB,SAAC1wD,IAAK,KAAK,gBAAgB,QAAQA,MAAO,UAAkBA,EAAG,KAAKqyD,GAAqBp8C,CAAO,EAAE,MAAM,CAAA/O,MAAS,KAAK,SAASA,CAAK,CAAC;AAAA,MACzI,CAAC;AAED;AAAA,IACJ;AACA,UAAMmrD,IAAsB;AAAA,MACxB,GAAG3B;AAAA,MACH,SAAS;AAAA,IACrB;AACQ,UAAM,KAAK,WAAW,KAAK2B,GAAqBp8C,CAAO;AAAA,EAC3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,kBAAkBq8C,GAAed,GAAS;AACtC,UAAMzb,IAASuc,EAAc,MAAM,OAAO;AAC1C,SAAK,+BAA+Bvc,CAAM,GAC1C,KAAK,iBAAiB,IAAIA,GAAQ,CAACnI,GAASlsB,MACjC,QAAQ,QAAQ8vC,EAAQc,EAAc,MAAM1kB,CAAO,GAAGlsB,CAAK,CAAC,CACtE;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,qBAAqBq0B,GAAQ;AACzB,SAAK,iBAAiB,OAAOA,CAAM;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA,EAIA,2BAA2BA,GAAQ;AAC/B,QAAI,KAAK,iBAAiB,IAAIA,CAAM;AAChC,YAAM,IAAI,MAAM,yBAAyBA,CAAM,4CAA4C;AAAA,EAEnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,uBAAuBwc,GAAoBf,GAAS;AAChD,SAAK,sBAAsB,IAAIe,EAAmB,MAAM,OAAO,OAAO,CAAC7B,MAAiB,QAAQ,QAAQc,EAAQe,EAAmB,MAAM7B,CAAY,CAAC,CAAC,CAAC;AAAA,EAC5J;AAAA;AAAA;AAAA;AAAA,EAIA,0BAA0B3a,GAAQ;AAC9B,SAAK,sBAAsB,OAAOA,CAAM;AAAA,EAC5C;AACJ;AACO,SAASyc,GAAkBrK,GAAMsK,GAAY;AAChD,SAAO,OAAO,QAAQA,CAAU,EAAE,OAAO,CAACxK,GAAK,CAACz2C,GAAKnQ,CAAK,OAClDA,KAAS,OAAOA,KAAU,WAC1B4mD,EAAIz2C,CAAG,IAAIy2C,EAAIz2C,CAAG,IAAI,EAAE,GAAGy2C,EAAIz2C,CAAG,GAAG,GAAGnQ,EAAK,IAAKA,IAGlD4mD,EAAIz2C,CAAG,IAAInQ,GAER4mD,IACR,EAAE,GAAGE,GAAM;AAClB;;;;AC3ZA,GAAC,SAAUuK,GAAQC,GAAS;AACoC,IAAAA,EAAQC,CAAO;AAAA,EAG/E,GAAEC,IAAO,SAAUD,GAAS;AAE5B,aAAS7mB,IAAQ;AACb,eAASjnB,IAAO,UAAU,QAAQguC,IAAO,MAAMhuC,CAAI,GAAGC,IAAO,GAAGA,IAAOD,GAAMC;AACzE,QAAA+tC,EAAK/tC,CAAI,IAAI,UAAUA,CAAI;AAG/B,UAAI+tC,EAAK,SAAS,GAAG;AACjB,QAAAA,EAAK,CAAC,IAAIA,EAAK,CAAC,EAAE,MAAM,GAAG,EAAE;AAE7B,iBADIC,IAAKD,EAAK,SAAS,GACd1kD,IAAI,GAAGA,IAAI2kD,GAAI,EAAE3kD;AACtB,UAAA0kD,EAAK1kD,CAAC,IAAI0kD,EAAK1kD,CAAC,EAAE,MAAM,GAAG,EAAE;AAEjC,eAAA0kD,EAAKC,CAAE,IAAID,EAAKC,CAAE,EAAE,MAAM,CAAC,GACpBD,EAAK,KAAK,EAAE;AAAA,MAC3B;AACQ,eAAOA,EAAK,CAAC;AAAA,IAErB;AACA,aAASE,EAAOxuC,GAAK;AACjB,aAAO,QAAQA,IAAM;AAAA,IACzB;AACA,aAAS7d,EAAOssD,GAAG;AACf,aAAOA,MAAM,SAAY,cAAcA,MAAM,OAAO,SAAS,OAAO,UAAU,SAAS,KAAKA,CAAC,EAAE,MAAM,GAAG,EAAE,IAAG,EAAG,MAAM,GAAG,EAAE,MAAK,EAAG,YAAW;AAAA,IAClJ;AACA,aAASC,EAAY1uC,GAAK;AACtB,aAAOA,EAAI,YAAW;AAAA,IAC1B;AACA,aAASwoB,EAAQx9B,GAAK;AAClB,aAA4BA,KAAQ,OAAOA,aAAe,QAAQA,IAAM,OAAOA,EAAI,UAAW,YAAYA,EAAI,SAASA,EAAI,eAAeA,EAAI,OAAO,CAACA,CAAG,IAAI,MAAM,UAAU,MAAM,KAAKA,CAAG,IAAI,CAAA;AAAA,IACnM;AACA,aAASgnB,EAAOllB,GAAQC,GAAQ;AAC5B,UAAI/B,IAAM8B;AACV,UAAIC;AACA,iBAASC,KAAOD;AACZ,UAAA/B,EAAIgC,CAAG,IAAID,EAAOC,CAAG;AAG7B,aAAOhC;AAAA,IACX;AAEA,aAAS2jD,EAAUC,GAAO;AACtB,UAAIC,IAAU,YAEVC,IAAU,SAEVC,IAAWxnB,EAAMunB,GAAS,UAAU,GAIpCE,IAAeR,EAAOA,EAAO,YAAYO,IAAW,MAAMA,IAAWA,IAAW,MAAMA,IAAWA,CAAQ,IAAI,MAAMP,EAAO,gBAAgBO,IAAW,MAAMA,IAAWA,CAAQ,IAAI,MAAMP,EAAO,MAAMO,IAAWA,CAAQ,CAAC,GAE7NE,KAAe,2BACXC,KAAe,uCACfC,KAAa5nB,EAAM0nB,IAAcC,EAAY,GAC7CE,KAAYR,IAAQ,gFAAgF,MAExGS,KAAaT,IAAQ,sBAAsB,MAE3CU,KAAe/nB,EAAMsnB,GAASC,GAAS,kBAAkBM,EAAS;AACpD,MAAAZ,EAAOK,IAAUtnB,EAAMsnB,GAASC,GAAS,aAAa,IAAI,GAAG,GAC3DN,EAAOA,EAAOQ,IAAe,MAAMznB,EAAM+nB,IAAcJ,IAAc,OAAO,CAAC,IAAI,GAAG;AACxG,UACQK,KAAqBf,EAAOA,EAAO,SAAS,IAAI,MAAMA,EAAO,WAAWM,CAAO,IAAI,MAAMN,EAAO,MAAMM,IAAUA,CAAO,IAAI,MAAMN,EAAO,YAAYM,CAAO,IAAI,UAAUA,CAAO,GAEpLU,KAAehB,EAAOe,KAAqB,QAAQA,KAAqB,QAAQA,KAAqB,QAAQA,EAAkB,GAC3HE,KAAOjB,EAAOO,IAAW,OAAO,GAChCW,KAAQlB,EAAOA,EAAOiB,KAAO,QAAQA,EAAI,IAAI,MAAMD,EAAY,GAC/DG,KAAgBnB,EAAOA,EAAOiB,KAAO,KAAK,IAAI,QAAQC,EAAK,GAE/DE,KAAgBpB,EAAO,WAAWA,EAAOiB,KAAO,KAAK,IAAI,QAAQC,EAAK,GAEtEG,KAAgBrB,EAAOA,EAAOiB,EAAI,IAAI,YAAYjB,EAAOiB,KAAO,KAAK,IAAI,QAAQC,EAAK,GAEtFI,KAAgBtB,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,YAAYjB,EAAOiB,KAAO,KAAK,IAAI,QAAQC,EAAK,GAEvHK,KAAgBvB,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,YAAYjB,EAAOiB,KAAO,KAAK,IAAI,QAAQC,EAAK,GAEvHM,KAAgBxB,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,YAAYA,KAAO,QAAQC,EAAK,GAEvGO,KAAgBzB,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,YAAYC,EAAK,GAExFQ,KAAgB1B,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,YAAYA,EAAI,GAEvFU,KAAgB3B,EAAOA,EAAOA,EAAOiB,KAAO,KAAK,IAAI,UAAUA,EAAI,IAAI,SAAS,GAEhFW,KAAe5B,EAAO,CAACmB,IAAeC,IAAeC,IAAeC,IAAeC,IAAeC,IAAeC,IAAeC,IAAeC,EAAa,EAAE,KAAK,GAAG,CAAC,GACnKE,KAAU7B,EAAOA,EAAOc,KAAe,MAAMN,CAAY,IAAI,GAAG;AAMvD,MAAAR,EAAO,SAASO,IAAW,SAASxnB,EAAM+nB,IAAcJ,IAAc,OAAO,IAAI,GAAG,GAGrFV,EAAOA,EAAOQ,IAAe,MAAMznB,EAAM+nB,IAAcJ,EAAY,CAAC,IAAI,GAAG;AAC3F,UAGQoB,KAAS9B,EAAOQ,IAAe,MAAMznB,EAAM+nB,IAAcJ,IAAc,UAAU,CAAC;AAGjE,aAAAV,EAAOA,EAAOQ,IAAe,MAAMznB,EAAM+nB,IAAcJ,IAAc,OAAO,CAAC,IAAI,GAAG,GAU5FV,EAAOA,EAAO8B,KAAS,MAAM/oB,EAAM,YAAY8nB,EAAU,CAAC,IAAI,GAAG,GAavE;AAAA,QACH,YAAY,IAAI,OAAO9nB,EAAM,OAAOsnB,GAASC,GAAS,aAAa,GAAG,GAAG;AAAA,QACzE,cAAc,IAAI,OAAOvnB,EAAM,aAAa+nB,IAAcJ,EAAY,GAAG,GAAG;AAAA,QAC5E,UAAU,IAAI,OAAO3nB,EAAM,mBAAmB+nB,IAAcJ,EAAY,GAAG,GAAG;AAAA,QAC9E,UAAU,IAAI,OAAO3nB,EAAM,mBAAmB+nB,IAAcJ,EAAY,GAAG,GAAG;AAAA,QAC9E,mBAAmB,IAAI,OAAO3nB,EAAM,gBAAgB+nB,IAAcJ,EAAY,GAAG,GAAG;AAAA,QACpF,WAAW,IAAI,OAAO3nB,EAAM,UAAU+nB,IAAcJ,IAAc,kBAAkBG,EAAU,GAAG,GAAG;AAAA,QACpG,cAAc,IAAI,OAAO9nB,EAAM,UAAU+nB,IAAcJ,IAAc,gBAAgB,GAAG,GAAG;AAAA,QAC3F,QAAQ,IAAI,OAAO3nB,EAAM,OAAO+nB,IAAcJ,EAAY,GAAG,GAAG;AAAA,QAChE,YAAY,IAAI,OAAOI,IAAc,GAAG;AAAA,QACxC,aAAa,IAAI,OAAO/nB,EAAM,UAAU+nB,IAAcH,EAAU,GAAG,GAAG;AAAA,QACtE,aAAa,IAAI,OAAOH,GAAc,GAAG;AAAA,QACzC,aAAa,IAAI,OAAO,OAAOQ,KAAe,IAAI;AAAA,QAClD,aAAa,IAAI,OAAO,WAAWY,KAAe,MAAM5B,EAAOA,EAAO,iBAAiBO,IAAW,MAAM,IAAI,MAAMsB,KAAU,GAAG,IAAI,QAAQ;AAAA;AAAA,MACnJ;AAAA,IACA;AACA,QAAIE,IAAe5B,EAAU,EAAK,GAE9B6B,IAAe7B,EAAU,EAAI,GAE7B8B,IAAgB,2BAAY;AAC9B,eAASC,EAAcr+C,GAAK7P,GAAG;AAC7B,YAAImuD,IAAO,CAAA,GACPC,IAAK,IACL7wD,KAAK,IACLD,KAAK;AAET,YAAI;AACF,mBAAS+wD,KAAKx+C,EAAI,OAAO,QAAQ,EAAC,GAAIy+C,IAAI,EAAEF,KAAME,KAAKD,GAAG,KAAI,GAAI,UAChEF,EAAK,KAAKG,GAAG,KAAK,GAEd,EAAAtuD,KAAKmuD,EAAK,WAAWnuD,KAH8CouD,IAAK;AAG5E;AAAA,QAER,SAAaxgB,IAAK;AACZ,UAAArwC,KAAK,IACLD,KAAKswC;AAAA,QACX,UAAK;AACC,cAAI;AACF,YAAI,CAACwgB,KAAMC,GAAG,UAAWA,GAAG,OAAS;AAAA,UAC7C,UAAO;AACC,gBAAI9wD,GAAI,OAAMD;AAAA,UACtB;AAAA,QACA;AAEI,eAAO6wD;AAAA,MACX;AAEE,aAAO,SAAUt+C,GAAK7P,GAAG;AACvB,YAAI,MAAM,QAAQ6P,CAAG;AACnB,iBAAOA;AACF,YAAI,OAAO,YAAY,OAAOA,CAAG;AACtC,iBAAOq+C,EAAcr+C,GAAK7P,CAAC;AAE3B,cAAM,IAAI,UAAU,sDAAsD;AAAA,MAEhF;AAAA,IACA,EAAC,GAcGuuD,IAAoB,SAAU1+C,GAAK;AACrC,UAAI,MAAM,QAAQA,CAAG,GAAG;AACtB,iBAAS7P,IAAI,GAAGwuD,IAAO,MAAM3+C,EAAI,MAAM,GAAG7P,IAAI6P,EAAI,QAAQ7P,IAAK,CAAAwuD,EAAKxuD,CAAC,IAAI6P,EAAI7P,CAAC;AAE9E,eAAOwuD;AAAA,MACX;AACI,eAAO,MAAM,KAAK3+C,CAAG;AAAA,IAEzB,GAII4+C,IAAS,YAGTtN,IAAO,IACPuN,IAAO,GACPC,IAAO,IACPC,IAAO,IACPC,IAAO,KACPC,IAAc,IACdC,IAAW,KACXC,IAAY,KAGZC,IAAgB,SAChBC,IAAgB,cAChBC,IAAkB,6BAGlBC,IAAS;AAAA,MACZ,UAAY;AAAA,MACZ,aAAa;AAAA,MACb,iBAAiB;AAAA,IAClB,GAGIC,IAAgBlO,IAAOuN,GACvBY,IAAQ,KAAK,OACbC,IAAqB,OAAO;AAUhC,aAASC,EAAQj3D,GAAM;AACtB,YAAM,IAAI,WAAW62D,EAAO72D,CAAI,CAAC;AAAA,IAClC;AAUA,aAASa,EAAIy6C,GAAOhoC,GAAI;AAGvB,eAFIvR,IAAS,CAAA,GACTpB,IAAS26C,EAAM,QACZ36C;AACN,QAAAoB,EAAOpB,CAAM,IAAI2S,EAAGgoC,EAAM36C,CAAM,CAAC;AAElC,aAAOoB;AAAA,IACR;AAYA,aAASm1D,GAAUC,GAAQ7jD,GAAI;AAC9B,UAAI8jD,IAAQD,EAAO,MAAM,GAAG,GACxBp1D,IAAS;AACb,MAAIq1D,EAAM,SAAS,MAGlBr1D,IAASq1D,EAAM,CAAC,IAAI,KACpBD,IAASC,EAAM,CAAC,IAGjBD,IAASA,EAAO,QAAQP,GAAiB,GAAM;AAC/C,UAAIS,IAASF,EAAO,MAAM,GAAG,GACzBG,KAAUz2D,EAAIw2D,GAAQ/jD,CAAE,EAAE,KAAK,GAAG;AACtC,aAAOvR,IAASu1D;AAAA,IACjB;AAeA,aAASC,GAAWJ,GAAQ;AAI3B,eAHIK,IAAS,CAAA,GACTC,IAAU,GACV92D,IAASw2D,EAAO,QACbM,IAAU92D,KAAQ;AACxB,YAAImB,IAAQq1D,EAAO,WAAWM,GAAS;AACvC,YAAI31D,KAAS,SAAUA,KAAS,SAAU21D,IAAU92D,GAAQ;AAE3D,cAAIwhB,KAAQg1C,EAAO,WAAWM,GAAS;AACvC,WAAKt1C,KAAQ,UAAW,QAEvBq1C,EAAO,OAAO11D,IAAQ,SAAU,OAAOqgB,KAAQ,QAAS,KAAO,KAI/Dq1C,EAAO,KAAK11D,CAAK,GACjB21D;AAAA,QAEJ;AACG,UAAAD,EAAO,KAAK11D,CAAK;AAAA,MAEpB;AACC,aAAO01D;AAAA,IACR;AAUA,QAAIE,KAAa,SAAoBpc,GAAO;AAC3C,aAAO,OAAO,cAAc,MAAM,QAAQ0a,EAAkB1a,CAAK,CAAC;AAAA,IACnE,GAWIqc,KAAe,SAAsBC,GAAW;AACnD,aAAIA,IAAY,KAAO,KACfA,IAAY,KAEhBA,IAAY,KAAO,KACfA,IAAY,KAEhBA,IAAY,KAAO,KACfA,IAAY,KAEbhP;AAAA,IACR,GAaIiP,KAAe,SAAsBC,GAAOC,GAAM;AAGrD,aAAOD,IAAQ,KAAK,MAAMA,IAAQ,QAAQC,KAAQ,MAAM;AAAA,IACzD,GAOIC,KAAQ,SAAeC,GAAOC,GAAWC,GAAW;AACvD,UAAIjd,IAAI;AAGR;AAAA,QAFA+c,IAAQE,IAAYpB,EAAMkB,IAAQ3B,CAAI,IAAI2B,KAAS,GACnDA,KAASlB,EAAMkB,IAAQC,CAAS;AAAA;AAAA,QACFD,IAAQnB,IAAgBV,KAAQ;AAAA,QAAGlb,KAAK0N;AAAA;AACrE,QAAAqP,IAAQlB,EAAMkB,IAAQnB,CAAa;AAEpC,aAAOC,EAAM7b,KAAK4b,IAAgB,KAAKmB,KAASA,IAAQ5B,EAAK;AAAA,IAC9D,GASI+B,KAAS,SAAgBtZ,GAAO;AAEnC,UAAI0Y,IAAS,CAAA,GACTa,IAAcvZ,EAAM,QACpBr3C,IAAI,GACJoN,KAAI2hD,GACJ8B,KAAO/B,GAMPgC,KAAQzZ,EAAM,YAAY2X,CAAS;AACvC,MAAI8B,KAAQ,MACXA,KAAQ;AAGT,eAASC,KAAI,GAAGA,KAAID,IAAO,EAAEC;AAE5B,QAAI1Z,EAAM,WAAW0Z,EAAC,KAAK,OAC1BvB,EAAQ,WAAW,GAEpBO,EAAO,KAAK1Y,EAAM,WAAW0Z,EAAC,CAAC;AAMhC,eAAS74D,KAAQ44D,KAAQ,IAAIA,KAAQ,IAAI,GAAG54D,KAAQ04D,KAAuC;AAQ1F;AAAA,cADII,KAAOhxD,GACFixD,KAAI,GAAGxd,KAAI0N;AAAA;AAAA;AAAA,UAAyB1N,MAAK0N;AAAA,UAAM;AAEvD,UAAIjpD,MAAS04D,KACZpB,EAAQ,eAAe;AAGxB,cAAIa,KAAQH,GAAa7Y,EAAM,WAAWn/C,IAAO,CAAC;AAElD,WAAIm4D,MAASlP,KAAQkP,KAAQf,GAAOb,IAASzuD,KAAKixD,EAAC,MAClDzB,EAAQ,UAAU,GAGnBxvD,KAAKqwD,KAAQY;AACb,cAAIx0D,KAAIg3C,MAAKod,KAAOnC,IAAOjb,MAAKod,KAAOlC,IAAOA,IAAOlb,KAAIod;AAEzD,cAAIR,KAAQ5zD;AACX;AAGD,cAAIy0D,KAAa/P,IAAO1kD;AACxB,UAAIw0D,KAAI3B,EAAMb,IAASyC,EAAU,KAChC1B,EAAQ,UAAU,GAGnByB,MAAKC;AAAA,QACR;AAEE,YAAIC,KAAMpB,EAAO,SAAS;AAC1B,QAAAc,KAAON,GAAMvwD,IAAIgxD,IAAMG,IAAKH,MAAQ,CAAC,GAIjC1B,EAAMtvD,IAAImxD,EAAG,IAAI1C,IAASrhD,MAC7BoiD,EAAQ,UAAU,GAGnBpiD,MAAKkiD,EAAMtvD,IAAImxD,EAAG,GAClBnxD,KAAKmxD,IAGLpB,EAAO,OAAO/vD,KAAK,GAAGoN,EAAC;AAAA,MACzB;AAEC,aAAO,OAAO,cAAc,MAAM,QAAQ2iD,CAAM;AAAA,IACjD,GASIrnB,IAAS,SAAgB2O,GAAO;AACnC,UAAI0Y,IAAS,CAAA;AAGb,MAAA1Y,IAAQyY,GAAWzY,CAAK;AAGxB,UAAIuZ,IAAcvZ,EAAM,QAGpBjqC,IAAI2hD,GACJyB,KAAQ,GACRK,KAAO/B,GAGPsC,KAA4B,IAC5BC,KAAoB,IACpBC,KAAiB;AAErB,UAAI;AACH,iBAASC,KAAYla,EAAM,OAAO,QAAQ,EAAC,GAAIma,IAAO,EAAEJ,MAA6BI,KAAQD,GAAU,KAAI,GAAI,OAAOH,KAA4B,IAAM;AACvJ,cAAIK,KAAiBD,GAAM;AAE3B,UAAIC,KAAiB,OACpB1B,EAAO,KAAKR,EAAmBkC,EAAc,CAAC;AAAA,QAElD;AAAA,MACA,SAAU7jB,IAAK;AACb,QAAAyjB,KAAoB,IACpBC,KAAiB1jB;AAAA,MACnB,UAAE;AACA,YAAI;AACH,UAAI,CAACwjB,MAA6BG,GAAU,UAC3CA,GAAU,OAAM;AAAA,QAEpB,UAAG;AACA,cAAIF;AACH,kBAAMC;AAAA,QAEV;AAAA,MACA;AAEC,UAAII,KAAc3B,EAAO,QACrB4B,KAAiBD;AAWrB,WALIA,MACH3B,EAAO,KAAKf,CAAS,GAIf2C,KAAiBf,KAAa;AAIpC,YAAIhb,KAAI6Y,GACJmD,KAA6B,IAC7BC,KAAqB,IACrBC,KAAkB;AAEtB,YAAI;AACH,mBAASC,KAAa1a,EAAM,OAAO,QAAQ,EAAC,GAAI2a,IAAQ,EAAEJ,MAA8BI,KAASD,GAAW,KAAI,GAAI,OAAOH,KAA6B,IAAM;AAC7J,gBAAI5mC,KAAegnC,GAAO;AAE1B,YAAIhnC,MAAgB5d,KAAK4d,KAAe4qB,OACvCA,KAAI5qB;AAAA,UAET;AAAA,QAIA,SAAW4iB,IAAK;AACb,UAAAikB,KAAqB,IACrBC,KAAkBlkB;AAAA,QACrB,UAAG;AACA,cAAI;AACH,YAAI,CAACgkB,MAA8BG,GAAW,UAC7CA,GAAW,OAAM;AAAA,UAEtB,UAAI;AACA,gBAAIF;AACH,oBAAMC;AAAA,UAEX;AAAA,QACA;AAEE,YAAIG,KAAwBN,KAAiB;AAC7C,QAAI/b,KAAIxoC,IAAIkiD,GAAOb,IAAS+B,MAASyB,EAAqB,KACzDzC,EAAQ,UAAU,GAGnBgB,OAAU5a,KAAIxoC,KAAK6kD,IACnB7kD,IAAIwoC;AAEJ,YAAIsc,KAA6B,IAC7BC,KAAqB,IACrBC,KAAkB;AAEtB,YAAI;AACH,mBAASC,KAAahb,EAAM,OAAO,QAAQ,EAAC,GAAIib,IAAQ,EAAEJ,MAA8BI,KAASD,GAAW,KAAI,GAAI,OAAOH,KAA6B,IAAM;AAC7J,gBAAIK,KAAgBD,GAAO;AAK3B,gBAHIC,KAAgBnlD,KAAK,EAAEojD,KAAQ/B,KAClCe,EAAQ,UAAU,GAEf+C,MAAiBnlD,GAAG;AAGvB;AAAA,oBADIolD,KAAIhC,IACC/c,KAAI0N;AAAA;AAAA;AAAA,gBAAyB1N,MAAK0N;AAAA,gBAAM;AAChD,oBAAI1kD,KAAIg3C,MAAKod,KAAOnC,IAAOjb,MAAKod,KAAOlC,IAAOA,IAAOlb,KAAIod;AACzD,oBAAI2B,KAAI/1D;AACP;AAED,oBAAIg2D,KAAUD,KAAI/1D,IACdy0D,KAAa/P,IAAO1kD;AACxB,gBAAAszD,EAAO,KAAKR,EAAmBa,GAAa3zD,KAAIg2D,KAAUvB,IAAY,CAAC,CAAC,CAAC,GACzEsB,KAAIlD,EAAMmD,KAAUvB,EAAU;AAAA,cACpC;AAEK,cAAAnB,EAAO,KAAKR,EAAmBa,GAAaoC,IAAG,CAAC,CAAC,CAAC,GAClD3B,KAAON,GAAMC,IAAOyB,IAAuBN,MAAkBD,EAAW,GACxElB,KAAQ,GACR,EAAEmB;AAAA,YACP;AAAA,UACA;AAAA,QACA,SAAW/jB,IAAK;AACb,UAAAukB,KAAqB,IACrBC,KAAkBxkB;AAAA,QACrB,UAAG;AACA,cAAI;AACH,YAAI,CAACskB,MAA8BG,GAAW,UAC7CA,GAAW,OAAM;AAAA,UAEtB,UAAI;AACA,gBAAIF;AACH,oBAAMC;AAAA,UAEX;AAAA,QACA;AAEE,UAAE5B,IACF,EAAEpjD;AAAA,MACJ;AACC,aAAO2iD,EAAO,KAAK,EAAE;AAAA,IACtB,GAaI2C,IAAY,SAAmBrb,GAAO;AACzC,aAAOoY,GAAUpY,GAAO,SAAUqY,GAAQ;AACzC,eAAOT,EAAc,KAAKS,CAAM,IAAIiB,GAAOjB,EAAO,MAAM,CAAC,EAAE,YAAW,CAAE,IAAIA;AAAA,MAC9E,CAAE;AAAA,IACF,GAaIiD,KAAU,SAAiBtb,GAAO;AACrC,aAAOoY,GAAUpY,GAAO,SAAUqY,GAAQ;AACzC,eAAOR,EAAc,KAAKQ,CAAM,IAAI,SAAShnB,EAAOgnB,CAAM,IAAIA;AAAA,MAChE,CAAE;AAAA,IACF,GAKIkD,KAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMd,SAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQX,MAAQ;AAAA,QACP,QAAU9C;AAAA,QACV,QAAUG;AAAA;MAEX,QAAUU;AAAA,MACV,QAAUjoB;AAAA,MACV,SAAWiqB;AAAA,MACX,WAAaD;AAAA,IACd,GAoCIG,KAAU,CAAA;AACd,aAASC,GAAWC,GAAK;AACrB,UAAI7xC,IAAI6xC,EAAI,WAAW,CAAC,GACpB70B,IAAI;AACR,aAAIhd,IAAI,KAAIgd,IAAI,OAAOhd,EAAE,SAAS,EAAE,EAAE,YAAW,IAAYA,IAAI,MAAKgd,IAAI,MAAMhd,EAAE,SAAS,EAAE,EAAE,YAAW,IAAYA,IAAI,OAAMgd,IAAI,OAAOhd,KAAK,IAAI,KAAK,SAAS,EAAE,EAAE,YAAW,IAAK,OAAOA,IAAI,KAAK,KAAK,SAAS,EAAE,EAAE,YAAW,IAAQgd,IAAI,OAAOhd,KAAK,KAAK,KAAK,SAAS,EAAE,EAAE,gBAAgB,OAAOA,KAAK,IAAI,KAAK,KAAK,SAAS,EAAE,EAAE,YAAW,IAAK,OAAOA,IAAI,KAAK,KAAK,SAAS,EAAE,EAAE,YAAW,GAC/Xgd;AAAA,IACX;AACA,aAAS80B,GAAYx1C,GAAK;AAItB,eAHIy1C,IAAS,IACTjzD,IAAI,GACJkzD,IAAK11C,EAAI,QACNxd,IAAIkzD,KAAI;AACX,YAAIhyC,IAAI,SAAS1D,EAAI,OAAOxd,IAAI,GAAG,CAAC,GAAG,EAAE;AACzC,YAAIkhB,IAAI;AACJ,UAAA+xC,KAAU,OAAO,aAAa/xC,CAAC,GAC/BlhB,KAAK;AAAA,iBACEkhB,KAAK,OAAOA,IAAI,KAAK;AAC5B,cAAIgyC,IAAKlzD,KAAK,GAAG;AACb,gBAAImzD,KAAK,SAAS31C,EAAI,OAAOxd,IAAI,GAAG,CAAC,GAAG,EAAE;AAC1C,YAAAizD,KAAU,OAAO,cAAc/xC,IAAI,OAAO,IAAIiyC,KAAK,EAAE;AAAA,UACrE;AACgB,YAAAF,KAAUz1C,EAAI,OAAOxd,GAAG,CAAC;AAE7B,UAAAA,KAAK;AAAA,QACjB,WAAmBkhB,KAAK,KAAK;AACjB,cAAIgyC,IAAKlzD,KAAK,GAAG;AACb,gBAAI3C,KAAK,SAASmgB,EAAI,OAAOxd,IAAI,GAAG,CAAC,GAAG,EAAE,GACtCozD,KAAK,SAAS51C,EAAI,OAAOxd,IAAI,GAAG,CAAC,GAAG,EAAE;AAC1C,YAAAizD,KAAU,OAAO,cAAc/xC,IAAI,OAAO,MAAM7jB,KAAK,OAAO,IAAI+1D,KAAK,EAAE;AAAA,UACvF;AACgB,YAAAH,KAAUz1C,EAAI,OAAOxd,GAAG,CAAC;AAE7B,UAAAA,KAAK;AAAA,QACjB;AACY,UAAAizD,KAAUz1C,EAAI,OAAOxd,GAAG,CAAC,GACzBA,KAAK;AAAA,MAEjB;AACI,aAAOizD;AAAA,IACX;AACA,aAASI,GAA4BtlC,GAAYggB,GAAU;AACvD,eAASulB,EAAiB91C,GAAK;AAC3B,YAAI+1C,IAASP,GAAYx1C,CAAG;AAC5B,eAAQ+1C,EAAO,MAAMxlB,EAAS,UAAU,IAAUwlB,IAAN/1C;AAAA,MACpD;AACI,aAAIuQ,EAAW,WAAQA,EAAW,SAAS,OAAOA,EAAW,MAAM,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,YAAW,EAAG,QAAQvlB,EAAS,YAAY,EAAE,IAC9JhgB,EAAW,aAAa,WAAWA,EAAW,WAAW,OAAOA,EAAW,QAAQ,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,QAAQvlB,EAAS,cAAc+kB,EAAU,EAAE,QAAQ/kB,EAAS,aAAame,CAAW,IACzNn+B,EAAW,SAAS,WAAWA,EAAW,OAAO,OAAOA,EAAW,IAAI,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,YAAW,EAAG,QAAQvlB,EAAS,UAAU+kB,EAAU,EAAE,QAAQ/kB,EAAS,aAAame,CAAW,IACvNn+B,EAAW,SAAS,WAAWA,EAAW,OAAO,OAAOA,EAAW,IAAI,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,QAAQvlC,EAAW,SAASggB,EAAS,WAAWA,EAAS,mBAAmB+kB,EAAU,EAAE,QAAQ/kB,EAAS,aAAame,CAAW,IAC1Pn+B,EAAW,UAAU,WAAWA,EAAW,QAAQ,OAAOA,EAAW,KAAK,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,QAAQvlB,EAAS,WAAW+kB,EAAU,EAAE,QAAQ/kB,EAAS,aAAame,CAAW,IAC7Mn+B,EAAW,aAAa,WAAWA,EAAW,WAAW,OAAOA,EAAW,QAAQ,EAAE,QAAQggB,EAAS,aAAaulB,CAAgB,EAAE,QAAQvlB,EAAS,cAAc+kB,EAAU,EAAE,QAAQ/kB,EAAS,aAAame,CAAW,IACtNn+B;AAAA,IACX;AAEA,aAASylC,GAAmBh2C,GAAK;AAC7B,aAAOA,EAAI,QAAQ,WAAW,IAAI,KAAK;AAAA,IAC3C;AACA,aAASi2C,GAAeC,GAAM3lB,GAAU;AACpC,UAAIhiC,IAAU2nD,EAAK,MAAM3lB,EAAS,WAAW,KAAK,CAAA,GAE9C4lB,IAAW1F,EAAcliD,GAAS,CAAC,GACnC6nD,IAAUD,EAAS,CAAC;AAExB,aAAIC,IACOA,EAAQ,MAAM,GAAG,EAAE,IAAIJ,EAAkB,EAAE,KAAK,GAAG,IAEnDE;AAAA,IAEf;AACA,aAASG,GAAeH,GAAM3lB,GAAU;AACpC,UAAIhiC,IAAU2nD,EAAK,MAAM3lB,EAAS,WAAW,KAAK,CAAA,GAE9C+lB,IAAY7F,EAAcliD,GAAS,CAAC,GACpC6nD,IAAUE,EAAU,CAAC,GACrBC,KAAOD,EAAU,CAAC;AAEtB,UAAIF,GAAS;AAYT,iBAXII,KAAwBJ,EAAQ,YAAW,EAAG,MAAM,IAAI,EAAE,QAAO,GACjEK,KAAyBhG,EAAc+F,IAAuB,CAAC,GAC/DzkD,KAAO0kD,GAAuB,CAAC,GAC/BjgB,KAAQigB,GAAuB,CAAC,GAEhCC,KAAclgB,KAAQA,GAAM,MAAM,GAAG,EAAE,IAAIwf,EAAkB,IAAI,CAAA,GACjEW,KAAa5kD,GAAK,MAAM,GAAG,EAAE,IAAIikD,EAAkB,GACnDY,KAAyBrmB,EAAS,YAAY,KAAKomB,GAAWA,GAAW,SAAS,CAAC,CAAC,GACpFE,KAAaD,KAAyB,IAAI,GAC1CE,KAAkBH,GAAW,SAASE,IACtCE,KAAS,MAAMF,EAAU,GACpBjtD,KAAI,GAAGA,KAAIitD,IAAY,EAAEjtD;AAC9B,UAAAmtD,GAAOntD,EAAC,IAAI8sD,GAAY9sD,EAAC,KAAK+sD,GAAWG,KAAkBltD,EAAC,KAAK;AAErE,QAAIgtD,OACAG,GAAOF,KAAa,CAAC,IAAIZ,GAAec,GAAOF,KAAa,CAAC,GAAGtmB,CAAQ;AAE5E,YAAIymB,KAAgBD,GAAO,OAAO,SAAUtT,IAAK7e,IAAOlqC,IAAO;AAC3D,cAAI,CAACkqC,MAASA,OAAU,KAAK;AACzB,gBAAIqyB,KAAcxT,GAAIA,GAAI,SAAS,CAAC;AACpC,YAAIwT,MAAeA,GAAY,QAAQA,GAAY,WAAWv8D,KAC1Du8D,GAAY,WAEZxT,GAAI,KAAK,EAAE,OAAO/oD,IAAO,QAAQ,GAAG;AAAA,UAExD;AACY,iBAAO+oD;AAAA,QACnB,GAAW,CAAA,CAAE,GACDyT,KAAoBF,GAAc,KAAK,SAAUvvB,IAAGC,IAAG;AACvD,iBAAOA,GAAE,SAASD,GAAE;AAAA,QAChC,CAAS,EAAE,CAAC,GACA0vB,KAAU;AACd,YAAID,MAAqBA,GAAkB,SAAS,GAAG;AACnD,cAAIE,KAAWL,GAAO,MAAM,GAAGG,GAAkB,KAAK,GAClDG,KAAUN,GAAO,MAAMG,GAAkB,QAAQA,GAAkB,MAAM;AAC7E,UAAAC,KAAUC,GAAS,KAAK,GAAG,IAAI,OAAOC,GAAQ,KAAK,GAAG;AAAA,QAClE;AACY,UAAAF,KAAUJ,GAAO,KAAK,GAAG;AAE7B,eAAIR,OACAY,MAAW,MAAMZ,KAEdY;AAAA,MACf;AACQ,eAAOjB;AAAA,IAEf;AACA,QAAIoB,KAAY,mIACZC,KAAwB,GAAG,MAAM,OAAO,EAAE,CAAC,MAAM;AACrD,aAASC,GAAMC,GAAW;AACtB,UAAIhmD,IAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAA,GAE9E8e,IAAa,CAAA,GACbggB,IAAW9+B,EAAQ,QAAQ,KAAQ++C,IAAeD;AACtD,MAAI9+C,EAAQ,cAAc,aAAUgmD,KAAahmD,EAAQ,SAASA,EAAQ,SAAS,MAAM,MAAM,OAAOgmD;AACtG,UAAIlpD,IAAUkpD,EAAU,MAAMH,EAAS;AACvC,UAAI/oD,GAAS;AACT,QAAIgpD,MAEAhnC,EAAW,SAAShiB,EAAQ,CAAC,GAC7BgiB,EAAW,WAAWhiB,EAAQ,CAAC,GAC/BgiB,EAAW,OAAOhiB,EAAQ,CAAC,GAC3BgiB,EAAW,OAAO,SAAShiB,EAAQ,CAAC,GAAG,EAAE,GACzCgiB,EAAW,OAAOhiB,EAAQ,CAAC,KAAK,IAChCgiB,EAAW,QAAQhiB,EAAQ,CAAC,GAC5BgiB,EAAW,WAAWhiB,EAAQ,CAAC,GAE3B,MAAMgiB,EAAW,IAAI,MACrBA,EAAW,OAAOhiB,EAAQ,CAAC,OAK/BgiB,EAAW,SAAShiB,EAAQ,CAAC,KAAK,QAClCgiB,EAAW,WAAWknC,EAAU,QAAQ,GAAG,MAAM,KAAKlpD,EAAQ,CAAC,IAAI,QACnEgiB,EAAW,OAAOknC,EAAU,QAAQ,IAAI,MAAM,KAAKlpD,EAAQ,CAAC,IAAI,QAChEgiB,EAAW,OAAO,SAAShiB,EAAQ,CAAC,GAAG,EAAE,GACzCgiB,EAAW,OAAOhiB,EAAQ,CAAC,KAAK,IAChCgiB,EAAW,QAAQknC,EAAU,QAAQ,GAAG,MAAM,KAAKlpD,EAAQ,CAAC,IAAI,QAChEgiB,EAAW,WAAWknC,EAAU,QAAQ,GAAG,MAAM,KAAKlpD,EAAQ,CAAC,IAAI,QAE/D,MAAMgiB,EAAW,IAAI,MACrBA,EAAW,OAAOknC,EAAU,MAAM,+BAA+B,IAAIlpD,EAAQ,CAAC,IAAI,UAGtFgiB,EAAW,SAEXA,EAAW,OAAO8lC,GAAeJ,GAAe1lC,EAAW,MAAMggB,CAAQ,GAAGA,CAAQ,IAGpFhgB,EAAW,WAAW,UAAaA,EAAW,aAAa,UAAaA,EAAW,SAAS,UAAaA,EAAW,SAAS,UAAa,CAACA,EAAW,QAAQA,EAAW,UAAU,SACnLA,EAAW,YAAY,kBAChBA,EAAW,WAAW,SAC7BA,EAAW,YAAY,aAChBA,EAAW,aAAa,SAC/BA,EAAW,YAAY,aAEvBA,EAAW,YAAY,OAGvB9e,EAAQ,aAAaA,EAAQ,cAAc,YAAYA,EAAQ,cAAc8e,EAAW,cACxFA,EAAW,QAAQA,EAAW,SAAS,kBAAkB9e,EAAQ,YAAY;AAGjF,YAAIimD,KAAgBrC,IAAS5jD,EAAQ,UAAU8e,EAAW,UAAU,IAAI,aAAa;AAErF,YAAI,CAAC9e,EAAQ,mBAAmB,CAACimD,MAAiB,CAACA,GAAc,iBAAiB;AAE9E,cAAInnC,EAAW,SAAS9e,EAAQ,cAAcimD,MAAiBA,GAAc;AAEzE,gBAAI;AACA,cAAAnnC,EAAW,OAAO6kC,GAAS,QAAQ7kC,EAAW,KAAK,QAAQggB,EAAS,aAAailB,EAAW,EAAE,YAAW,CAAE;AAAA,YAC/H,SAAyB90B,IAAG;AACR,cAAAnQ,EAAW,QAAQA,EAAW,SAAS,oEAAoEmQ;AAAA,YAC/H;AAGY,UAAAm1B,GAA4BtlC,GAAYggC,CAAY;AAAA,QAChE;AAEY,UAAAsF,GAA4BtlC,GAAYggB,CAAQ;AAGpD,QAAImnB,MAAiBA,GAAc,SAC/BA,GAAc,MAAMnnC,GAAY9e,CAAO;AAAA,MAEnD;AACQ,QAAA8e,EAAW,QAAQA,EAAW,SAAS;AAE3C,aAAOA;AAAA,IACX;AAEA,aAASonC,GAAoBpnC,GAAY9e,GAAS;AAC9C,UAAI8+B,IAAW9+B,EAAQ,QAAQ,KAAQ++C,IAAeD,GAClDqH,IAAY,CAAA;AAChB,aAAIrnC,EAAW,aAAa,WACxBqnC,EAAU,KAAKrnC,EAAW,QAAQ,GAClCqnC,EAAU,KAAK,GAAG,IAElBrnC,EAAW,SAAS,UAEpBqnC,EAAU,KAAKvB,GAAeJ,GAAe,OAAO1lC,EAAW,IAAI,GAAGggB,CAAQ,GAAGA,CAAQ,EAAE,QAAQA,EAAS,aAAa,SAAU9sB,GAAGo0C,IAAIC,IAAI;AAC1I,eAAO,MAAMD,MAAMC,KAAK,QAAQA,KAAK,MAAM;AAAA,MACvD,CAAS,CAAC,IAEF,OAAOvnC,EAAW,QAAS,YAAY,OAAOA,EAAW,QAAS,cAClEqnC,EAAU,KAAK,GAAG,GAClBA,EAAU,KAAK,OAAOrnC,EAAW,IAAI,CAAC,IAEnCqnC,EAAU,SAASA,EAAU,KAAK,EAAE,IAAI;AAAA,IACnD;AAEA,QAAIG,KAAO,YACPC,KAAO,eACPC,KAAO,iBACPC,KAAO;AACX,aAASC,GAAkBte,GAAO;AAE9B,eADI0Y,IAAS,CAAA,GACN1Y,EAAM;AACT,YAAIA,EAAM,MAAMke,EAAI;AAChB,UAAAle,IAAQA,EAAM,QAAQke,IAAM,EAAE;AAAA,iBACvBle,EAAM,MAAMme,EAAI;AACvB,UAAAne,IAAQA,EAAM,QAAQme,IAAM,GAAG;AAAA,iBACxBne,EAAM,MAAMoe,EAAI;AACvB,UAAApe,IAAQA,EAAM,QAAQoe,IAAM,GAAG,GAC/B1F,EAAO,IAAG;AAAA,iBACH1Y,MAAU,OAAOA,MAAU;AAClC,UAAAA,IAAQ;AAAA,aACL;AACH,cAAIue,IAAKve,EAAM,MAAMqe,EAAI;AACzB,cAAIE,GAAI;AACJ,gBAAI9yC,IAAI8yC,EAAG,CAAC;AACZ,YAAAve,IAAQA,EAAM,MAAMv0B,EAAE,MAAM,GAC5BitC,EAAO,KAAKjtC,CAAC;AAAA,UAC7B;AACgB,kBAAM,IAAI,MAAM,kCAAkC;AAAA,QAElE;AAEI,aAAOitC,EAAO,KAAK,EAAE;AAAA,IACzB;AAEA,aAAS8F,GAAU9nC,GAAY;AAC3B,UAAI9e,IAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAA,GAE9E8+B,IAAW9+B,EAAQ,MAAM++C,IAAeD,GACxCqH,IAAY,CAAA,GAEZF,IAAgBrC,IAAS5jD,EAAQ,UAAU8e,EAAW,UAAU,IAAI,aAAa;AAGrF,UADImnC,KAAiBA,EAAc,aAAWA,EAAc,UAAUnnC,GAAY9e,CAAO,GACrF8e,EAAW,QAEP,CAAAggB,EAAS,YAAY,KAAKhgB,EAAW,IAAI;AAIxC,YAAI9e,EAAQ,cAAcimD,KAAiBA,EAAc;AAEtD,cAAI;AACA,YAAAnnC,EAAW,OAAQ9e,EAAQ,MAAmG2jD,GAAS,UAAU7kC,EAAW,IAAI,IAA/H6kC,GAAS,QAAQ7kC,EAAW,KAAK,QAAQggB,EAAS,aAAailB,EAAW,EAAE,YAAW,CAAE;AAAA,UAC9I,SAAyB90B,IAAG;AACR,YAAAnQ,EAAW,QAAQA,EAAW,SAAS,iDAAkD9e,EAAQ,MAAgB,YAAV,WAAuB,oBAAoBivB;AAAA,UACtK;AAAA;AAII,MAAAm1B,GAA4BtlC,GAAYggB,CAAQ,GAC5C9+B,EAAQ,cAAc,YAAY8e,EAAW,WAC7CqnC,EAAU,KAAKrnC,EAAW,MAAM,GAChCqnC,EAAU,KAAK,GAAG;AAEtB,UAAIU,KAAYX,GAAoBpnC,GAAY9e,CAAO;AAUvD,UATI6mD,OAAc,WACV7mD,EAAQ,cAAc,YACtBmmD,EAAU,KAAK,IAAI,GAEvBA,EAAU,KAAKU,EAAS,GACpB/nC,EAAW,QAAQA,EAAW,KAAK,OAAO,CAAC,MAAM,OACjDqnC,EAAU,KAAK,GAAG,IAGtBrnC,EAAW,SAAS,QAAW;AAC/B,YAAIjL,KAAIiL,EAAW;AACnB,QAAI,CAAC9e,EAAQ,iBAAiB,CAACimD,KAAiB,CAACA,EAAc,kBAC3DpyC,KAAI6yC,GAAkB7yC,EAAC,IAEvBgzC,OAAc,WACdhzC,KAAIA,GAAE,QAAQ,SAAS,MAAM,IAEjCsyC,EAAU,KAAKtyC,EAAC;AAAA,MACxB;AACI,aAAIiL,EAAW,UAAU,WACrBqnC,EAAU,KAAK,GAAG,GAClBA,EAAU,KAAKrnC,EAAW,KAAK,IAE/BA,EAAW,aAAa,WACxBqnC,EAAU,KAAK,GAAG,GAClBA,EAAU,KAAKrnC,EAAW,QAAQ,IAE/BqnC,EAAU,KAAK,EAAE;AAAA,IAC5B;AAEA,aAASW,GAAkB5U,GAAM6U,GAAU;AACvC,UAAI/mD,IAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAA,GAC9EgnD,IAAoB,UAAU,CAAC,GAE/B3rD,IAAS,CAAA;AACb,aAAK2rD,MACD9U,IAAO6T,GAAMa,GAAU1U,GAAMlyC,CAAO,GAAGA,CAAO,GAC9C+mD,IAAWhB,GAAMa,GAAUG,GAAU/mD,CAAO,GAAGA,CAAO,IAE1DA,IAAUA,KAAW,CAAA,GACjB,CAACA,EAAQ,YAAY+mD,EAAS,UAC9B1rD,EAAO,SAAS0rD,EAAS,QAEzB1rD,EAAO,WAAW0rD,EAAS,UAC3B1rD,EAAO,OAAO0rD,EAAS,MACvB1rD,EAAO,OAAO0rD,EAAS,MACvB1rD,EAAO,OAAOqrD,GAAkBK,EAAS,QAAQ,EAAE,GACnD1rD,EAAO,QAAQ0rD,EAAS,UAEpBA,EAAS,aAAa,UAAaA,EAAS,SAAS,UAAaA,EAAS,SAAS,UAEpF1rD,EAAO,WAAW0rD,EAAS,UAC3B1rD,EAAO,OAAO0rD,EAAS,MACvB1rD,EAAO,OAAO0rD,EAAS,MACvB1rD,EAAO,OAAOqrD,GAAkBK,EAAS,QAAQ,EAAE,GACnD1rD,EAAO,QAAQ0rD,EAAS,UAEnBA,EAAS,QAQNA,EAAS,KAAK,OAAO,CAAC,MAAM,MAC5B1rD,EAAO,OAAOqrD,GAAkBK,EAAS,IAAI,MAExC7U,EAAK,aAAa,UAAaA,EAAK,SAAS,UAAaA,EAAK,SAAS,WAAc,CAACA,EAAK,OAC7F72C,EAAO,OAAO,MAAM0rD,EAAS,OACrB7U,EAAK,OAGb72C,EAAO,OAAO62C,EAAK,KAAK,MAAM,GAAGA,EAAK,KAAK,YAAY,GAAG,IAAI,CAAC,IAAI6U,EAAS,OAF5E1rD,EAAO,OAAO0rD,EAAS,MAI3B1rD,EAAO,OAAOqrD,GAAkBrrD,EAAO,IAAI,IAE/CA,EAAO,QAAQ0rD,EAAS,UAnBxB1rD,EAAO,OAAO62C,EAAK,MACf6U,EAAS,UAAU,SACnB1rD,EAAO,QAAQ0rD,EAAS,QAExB1rD,EAAO,QAAQ62C,EAAK,QAkB5B72C,EAAO,WAAW62C,EAAK,UACvB72C,EAAO,OAAO62C,EAAK,MACnB72C,EAAO,OAAO62C,EAAK,OAEvB72C,EAAO,SAAS62C,EAAK,SAEzB72C,EAAO,WAAW0rD,EAAS,UACpB1rD;AAAA,IACX;AAEA,aAASmgC,GAAQyrB,GAASC,GAAalnD,GAAS;AAC5C,UAAImnD,IAAoB5mC,EAAO,EAAE,QAAQ,OAAM,GAAIvgB,CAAO;AAC1D,aAAO4mD,GAAUE,GAAkBf,GAAMkB,GAASE,CAAiB,GAAGpB,GAAMmB,GAAaC,CAAiB,GAAGA,GAAmB,EAAI,GAAGA,CAAiB;AAAA,IAC5J;AAEA,aAASC,GAAUC,GAAKrnD,GAAS;AAC7B,aAAI,OAAOqnD,KAAQ,WACfA,IAAMT,GAAUb,GAAMsB,GAAKrnD,CAAO,GAAGA,CAAO,IACrCtP,EAAO22D,CAAG,MAAM,aACvBA,IAAMtB,GAAMa,GAAUS,GAAKrnD,CAAO,GAAGA,CAAO,IAEzCqnD;AAAA,IACX;AAEA,aAASC,GAAMC,GAAMC,GAAMxnD,GAAS;AAChC,aAAI,OAAOunD,KAAS,WAChBA,IAAOX,GAAUb,GAAMwB,GAAMvnD,CAAO,GAAGA,CAAO,IACvCtP,EAAO62D,CAAI,MAAM,aACxBA,IAAOX,GAAUW,GAAMvnD,CAAO,IAE9B,OAAOwnD,KAAS,WAChBA,IAAOZ,GAAUb,GAAMyB,GAAMxnD,CAAO,GAAGA,CAAO,IACvCtP,EAAO82D,CAAI,MAAM,aACxBA,IAAOZ,GAAUY,GAAMxnD,CAAO,IAE3BunD,MAASC;AAAA,IACpB;AAEA,aAASC,GAAgBl5C,GAAKvO,GAAS;AACnC,aAAOuO,KAAOA,EAAI,SAAQ,EAAG,QAAQ,CAACvO,KAAW,CAACA,EAAQ,MAAM8+C,EAAa,SAASC,EAAa,QAAQ8E,EAAU;AAAA,IACzH;AAEA,aAAS6D,GAAkBn5C,GAAKvO,GAAS;AACrC,aAAOuO,KAAOA,EAAI,SAAQ,EAAG,QAAQ,CAACvO,KAAW,CAACA,EAAQ,MAAM8+C,EAAa,cAAcC,EAAa,aAAagF,EAAW;AAAA,IACpI;AAEA,QAAIxI,KAAU;AAAA,MACV,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,OAAO,SAAez8B,GAAY9e,GAAS;AAEvC,eAAK8e,EAAW,SACZA,EAAW,QAAQA,EAAW,SAAS,gCAEpCA;AAAA,MACf;AAAA,MACI,WAAW,SAAmBA,GAAY9e,GAAS;AAC/C,YAAI87B,IAAS,OAAOhd,EAAW,MAAM,EAAE,YAAW,MAAO;AAEzD,gBAAIA,EAAW,UAAUgd,IAAS,MAAM,OAAOhd,EAAW,SAAS,QAC/DA,EAAW,OAAO,SAGjBA,EAAW,SACZA,EAAW,OAAO,MAKfA;AAAA,MACf;AAAA,IACA,GAEI6oC,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,YAAYpM,GAAQ;AAAA,MACpB,OAAOA,GAAQ;AAAA,MACf,WAAWA,GAAQ;AAAA,IACvB;AAEA,aAASqM,GAASC,GAAc;AAC5B,aAAO,OAAOA,EAAa,UAAW,YAAYA,EAAa,SAAS,OAAOA,EAAa,MAAM,EAAE,YAAW,MAAO;AAAA,IAC1H;AAEA,QAAIC,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,OAAO,SAAehpC,GAAY9e,GAAS;AACvC,YAAI6nD,IAAe/oC;AAEnB,eAAA+oC,EAAa,SAASD,GAASC,CAAY,GAE3CA,EAAa,gBAAgBA,EAAa,QAAQ,QAAQA,EAAa,QAAQ,MAAMA,EAAa,QAAQ,KAC1GA,EAAa,OAAO,QACpBA,EAAa,QAAQ,QACdA;AAAA,MACf;AAAA,MACI,WAAW,SAAmBA,GAAc7nD,GAAS;AAWjD,aATI6nD,EAAa,UAAUD,GAASC,CAAY,IAAI,MAAM,OAAOA,EAAa,SAAS,QACnFA,EAAa,OAAO,SAGpB,OAAOA,EAAa,UAAW,cAC/BA,EAAa,SAASA,EAAa,SAAS,QAAQ,MACpDA,EAAa,SAAS,SAGtBA,EAAa,cAAc;AAC3B,cAAIE,IAAwBF,EAAa,aAAa,MAAM,GAAG,GAC3DG,IAAyBhJ,EAAc+I,GAAuB,CAAC,GAC/DvvB,KAAOwvB,EAAuB,CAAC,GAC/BC,KAAQD,EAAuB,CAAC;AAEpC,UAAAH,EAAa,OAAOrvB,MAAQA,OAAS,MAAMA,KAAO,QAClDqvB,EAAa,QAAQI,IACrBJ,EAAa,eAAe;AAAA,QACxC;AAEQ,eAAAA,EAAa,WAAW,QACjBA;AAAA,MACf;AAAA,IACA,GAEIK,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,YAAYJ,GAAU;AAAA,MACtB,OAAOA,GAAU;AAAA,MACjB,WAAWA,GAAU;AAAA,IACzB,GAEIK,KAAI,CAAA,GAGJtK,KAAe,oGACfP,KAAW,eACXC,KAAeR,EAAOA,EAAO,YAAYO,KAAW,MAAMA,KAAWA,KAAW,MAAMA,KAAWA,EAAQ,IAAI,MAAMP,EAAO,gBAAgBO,KAAW,MAAMA,KAAWA,EAAQ,IAAI,MAAMP,EAAO,MAAMO,KAAWA,EAAQ,CAAC,GAYzN8K,KAAU,yDACVC,KAAU,8DACVC,KAAUxyB,EAAMuyB,IAAS,WAAY,GACrCE,KAAgB,uCAChBC,KAAa,IAAI,OAAO3K,IAAc,GAAG,GACzC4K,KAAc,IAAI,OAAOlL,IAAc,GAAG,GAC1CmL,KAAiB,IAAI,OAAO5yB,EAAM,OAAOsyB,IAAS,SAAS,SAASE,EAAO,GAAG,GAAG,GACjFK,KAAa,IAAI,OAAO7yB,EAAM,OAAO+nB,IAAc0K,EAAa,GAAG,GAAG,GACtEK,KAAcD;AAClB,aAAStE,GAAiB91C,GAAK;AAC3B,UAAI+1C,IAASP,GAAYx1C,CAAG;AAC5B,aAAQ+1C,EAAO,MAAMkE,EAAU,IAAUlE,IAAN/1C;AAAA,IACvC;AACA,QAAIs6C,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,OAAO,SAAkB/pC,GAAY9e,GAAS;AAC1C,YAAI8oD,IAAmBhqC,GACnBxV,IAAKw/C,EAAiB,KAAKA,EAAiB,OAAOA,EAAiB,KAAK,MAAM,GAAG,IAAI,CAAA;AAE1F,YADAA,EAAiB,OAAO,QACpBA,EAAiB,OAAO;AAIxB,mBAHIC,KAAiB,IACjBxuB,KAAU,CAAA,GACVyuB,KAAUF,EAAiB,MAAM,MAAM,GAAG,GACrC3wD,KAAI,GAAG2kD,KAAKkM,GAAQ,QAAQ7wD,KAAI2kD,IAAI,EAAE3kD,IAAG;AAC9C,gBAAI8wD,KAASD,GAAQ7wD,EAAC,EAAE,MAAM,GAAG;AACjC,oBAAQ8wD,GAAO,CAAC,GAAC;AAAA,cACb,KAAK;AAED,yBADIC,KAAUD,GAAO,CAAC,EAAE,MAAM,GAAG,GACxB3kB,KAAK,GAAG6kB,KAAMD,GAAQ,QAAQ5kB,KAAK6kB,IAAK,EAAE7kB;AAC/C,kBAAAh7B,EAAG,KAAK4/C,GAAQ5kB,EAAE,CAAC;AAEvB;AAAA,cACJ,KAAK;AACD,gBAAAwkB,EAAiB,UAAUpB,GAAkBuB,GAAO,CAAC,GAAGjpD,CAAO;AAC/D;AAAA,cACJ,KAAK;AACD,gBAAA8oD,EAAiB,OAAOpB,GAAkBuB,GAAO,CAAC,GAAGjpD,CAAO;AAC5D;AAAA,cACJ;AACI,gBAAA+oD,KAAiB,IACjBxuB,GAAQmtB,GAAkBuB,GAAO,CAAC,GAAGjpD,CAAO,CAAC,IAAI0nD,GAAkBuB,GAAO,CAAC,GAAGjpD,CAAO;AACrF;AAAA;UAExB;AACY,UAAI+oD,OAAgBD,EAAiB,UAAUvuB;AAAA,QAC3D;AACQ,QAAAuuB,EAAiB,QAAQ;AACzB,iBAASM,KAAM,GAAGC,KAAO//C,EAAG,QAAQ8/C,KAAMC,IAAM,EAAED,IAAK;AACnD,cAAIE,KAAOhgD,EAAG8/C,EAAG,EAAE,MAAM,GAAG;AAE5B,cADAE,GAAK,CAAC,IAAI5B,GAAkB4B,GAAK,CAAC,CAAC,GAC9BtpD,EAAQ;AAQT,YAAAspD,GAAK,CAAC,IAAI5B,GAAkB4B,GAAK,CAAC,GAAGtpD,CAAO,EAAE,YAAW;AAAA;AANzD,gBAAI;AACA,cAAAspD,GAAK,CAAC,IAAI3F,GAAS,QAAQ+D,GAAkB4B,GAAK,CAAC,GAAGtpD,CAAO,EAAE,YAAW,CAAE;AAAA,YAChG,SAAyBivB,IAAG;AACR,cAAA65B,EAAiB,QAAQA,EAAiB,SAAS,6EAA6E75B;AAAA,YACpJ;AAIY,UAAA3lB,EAAG8/C,EAAG,IAAIE,GAAK,KAAK,GAAG;AAAA,QACnC;AACQ,eAAOR;AAAA,MACf;AAAA,MACI,WAAW,SAAsBA,GAAkB9oD,GAAS;AACxD,YAAI8e,IAAagqC,GACbx/C,IAAKytB,EAAQ+xB,EAAiB,EAAE;AACpC,YAAIx/C,GAAI;AACJ,mBAASnR,KAAI,GAAG2kD,KAAKxzC,EAAG,QAAQnR,KAAI2kD,IAAI,EAAE3kD,IAAG;AACzC,gBAAIoxD,KAAS,OAAOjgD,EAAGnR,EAAC,CAAC,GACrBqxD,KAAQD,GAAO,YAAY,GAAG,GAC9BE,KAAYF,GAAO,MAAM,GAAGC,EAAK,EAAE,QAAQf,IAAapE,EAAgB,EAAE,QAAQoE,IAAaxL,CAAW,EAAE,QAAQyL,IAAgB7E,EAAU,GAC9IhoB,KAAS0tB,GAAO,MAAMC,KAAQ,CAAC;AAEnC,gBAAI;AACA,cAAA3tB,KAAU77B,EAAQ,MAA2E2jD,GAAS,UAAU9nB,EAAM,IAA9F8nB,GAAS,QAAQ+D,GAAkB7rB,IAAQ77B,CAAO,EAAE,YAAW,CAAE;AAAA,YAC7G,SAAyBivB,IAAG;AACR,cAAAnQ,EAAW,QAAQA,EAAW,SAAS,0DAA2D9e,EAAQ,MAAgB,YAAV,WAAuB,oBAAoBivB;AAAA,YAC/K;AACgB,YAAA3lB,EAAGnR,EAAC,IAAIsxD,KAAY,MAAM5tB;AAAA,UAC1C;AACY,UAAA/c,EAAW,OAAOxV,EAAG,KAAK,GAAG;AAAA,QACzC;AACQ,YAAIixB,KAAUuuB,EAAiB,UAAUA,EAAiB,WAAW,CAAA;AACrE,QAAIA,EAAiB,YAASvuB,GAAQ,UAAauuB,EAAiB,UAChEA,EAAiB,SAAMvuB,GAAQ,OAAUuuB,EAAiB;AAC9D,YAAIxD,KAAS,CAAA;AACb,iBAAShoD,MAAQi9B;AACb,UAAIA,GAAQj9B,EAAI,MAAM6qD,GAAE7qD,EAAI,KACxBgoD,GAAO,KAAKhoD,GAAK,QAAQmrD,IAAapE,EAAgB,EAAE,QAAQoE,IAAaxL,CAAW,EAAE,QAAQ0L,IAAY9E,EAAU,IAAI,MAAMtpB,GAAQj9B,EAAI,EAAE,QAAQmrD,IAAapE,EAAgB,EAAE,QAAQoE,IAAaxL,CAAW,EAAE,QAAQ2L,IAAa/E,EAAU,CAAC;AAGjQ,eAAIyB,GAAO,WACPxmC,EAAW,QAAQwmC,GAAO,KAAK,GAAG,IAE/BxmC;AAAA,MACf;AAAA,IACA,GAEI4qC,KAAY,mBAEZC,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,OAAO,SAAkB7qC,GAAY9e,GAAS;AAC1C,YAAIlD,IAAUgiB,EAAW,QAAQA,EAAW,KAAK,MAAM4qC,EAAS,GAC5DE,IAAgB9qC;AACpB,YAAIhiB,GAAS;AACT,cAAI+sD,KAAS7pD,EAAQ,UAAU4pD,EAAc,UAAU,OACnDE,KAAMhtD,EAAQ,CAAC,EAAE,YAAW,GAC5BitD,KAAMjtD,EAAQ,CAAC,GACfktD,KAAYH,KAAS,OAAO7pD,EAAQ,OAAO8pD,KAC3C7D,KAAgBrC,GAAQoG,EAAS;AACrC,UAAAJ,EAAc,MAAME,IACpBF,EAAc,MAAMG,IACpBH,EAAc,OAAO,QACjB3D,OACA2D,IAAgB3D,GAAc,MAAM2D,GAAe5pD,CAAO;AAAA,QAE1E;AACY,UAAA4pD,EAAc,QAAQA,EAAc,SAAS;AAEjD,eAAOA;AAAA,MACf;AAAA,MACI,WAAW,SAAsBA,GAAe5pD,GAAS;AACrD,YAAI6pD,IAAS7pD,EAAQ,UAAU4pD,EAAc,UAAU,OACnDE,IAAMF,EAAc,KACpBI,KAAYH,IAAS,OAAO7pD,EAAQ,OAAO8pD,IAC3C7D,KAAgBrC,GAAQoG,EAAS;AACrC,QAAI/D,OACA2D,IAAgB3D,GAAc,UAAU2D,GAAe5pD,CAAO;AAElE,YAAIiqD,KAAgBL,GAChBG,KAAMH,EAAc;AACxB,eAAAK,GAAc,QAAQH,KAAO9pD,EAAQ,OAAO,MAAM+pD,IAC3CE;AAAA,MACf;AAAA,IACA,GAEIC,KAAO,4DAEPC,KAAY;AAAA,MACZ,QAAQ;AAAA,MACR,OAAO,SAAeP,GAAe5pD,GAAS;AAC1C,YAAIoqD,IAAiBR;AACrB,eAAAQ,EAAe,OAAOA,EAAe,KACrCA,EAAe,MAAM,QACjB,CAACpqD,EAAQ,aAAa,CAACoqD,EAAe,QAAQ,CAACA,EAAe,KAAK,MAAMF,EAAI,OAC7EE,EAAe,QAAQA,EAAe,SAAS,uBAE5CA;AAAA,MACf;AAAA,MACI,WAAW,SAAmBA,GAAgBpqD,GAAS;AACnD,YAAI4pD,IAAgBQ;AAEpB,eAAAR,EAAc,OAAOQ,EAAe,QAAQ,IAAI,YAAW,GACpDR;AAAA,MACf;AAAA,IACA;AAEA,IAAAhG,GAAQrI,GAAQ,MAAM,IAAIA,IAC1BqI,GAAQ+D,GAAU,MAAM,IAAIA,IAC5B/D,GAAQkE,GAAU,MAAM,IAAIA,IAC5BlE,GAAQsE,GAAU,MAAM,IAAIA,IAC5BtE,GAAQiF,GAAU,MAAM,IAAIA,IAC5BjF,GAAQ+F,GAAU,MAAM,IAAIA,IAC5B/F,GAAQuG,GAAU,MAAM,IAAIA,IAE5BxN,EAAQ,UAAUiH,IAClBjH,EAAQ,aAAakH,IACrBlH,EAAQ,cAAcoH,IACtBpH,EAAQ,QAAQoJ,IAChBpJ,EAAQ,oBAAoB+J,IAC5B/J,EAAQ,YAAYiK,IACpBjK,EAAQ,oBAAoBmK,IAC5BnK,EAAQ,UAAUnhB,IAClBmhB,EAAQ,YAAYyK,IACpBzK,EAAQ,QAAQ2K,IAChB3K,EAAQ,kBAAkB8K,IAC1B9K,EAAQ,oBAAoB+K,IAE5B,OAAO,eAAe/K,GAAS,cAAc,EAAE,OAAO,IAAM;AAAA,EAE5D,CAAC;;qBC35CD0N,KAAiB,SAAS/C,EAAMtxB,GAAGC,GAAG;AACpC,MAAID,MAAMC,EAAG,QAAO;AAEpB,MAAID,KAAKC,KAAK,OAAOD,KAAK,YAAY,OAAOC,KAAK,UAAU;AAC1D,QAAID,EAAE,gBAAgBC,EAAE,YAAa,QAAO;AAE5C,QAAIhsC,GAAQ8G,GAAGkK;AACf,QAAI,MAAM,QAAQ+6B,CAAC,GAAG;AAEpB,UADA/rC,IAAS+rC,EAAE,QACP/rC,KAAUgsC,EAAE,OAAQ,QAAO;AAC/B,WAAKllC,IAAI9G,GAAQ8G,QAAQ;AACvB,YAAI,CAACu2D,EAAMtxB,EAAEjlC,CAAC,GAAGklC,EAAEllC,CAAC,CAAC,EAAG,QAAO;AACjC,aAAO;AAAA,IACb;AAII,QAAIilC,EAAE,gBAAgB,OAAQ,QAAOA,EAAE,WAAWC,EAAE,UAAUD,EAAE,UAAUC,EAAE;AAC5E,QAAID,EAAE,YAAY,OAAO,UAAU,QAAS,QAAOA,EAAE,QAAO,MAAOC,EAAE,QAAO;AAC5E,QAAID,EAAE,aAAa,OAAO,UAAU,SAAU,QAAOA,EAAE,SAAQ,MAAOC,EAAE,SAAQ;AAIhF,QAFAh7B,IAAO,OAAO,KAAK+6B,CAAC,GACpB/rC,IAASgR,EAAK,QACVhR,MAAW,OAAO,KAAKgsC,CAAC,EAAE,OAAQ,QAAO;AAE7C,SAAKllC,IAAI9G,GAAQ8G,QAAQ;AACvB,UAAI,CAAC,OAAO,UAAU,eAAe,KAAKklC,GAAGh7B,EAAKlK,CAAC,CAAC,EAAG,QAAO;AAEhE,SAAKA,IAAI9G,GAAQ8G,QAAQ,KAAI;AAC3B,UAAIwK,IAAMN,EAAKlK,CAAC;AAEhB,UAAI,CAACu2D,EAAMtxB,EAAEz6B,CAAG,GAAG06B,EAAE16B,CAAG,CAAC,EAAG,QAAO;AAAA,IACzC;AAEI,WAAO;AAAA,EACX;AAGE,SAAOy6B,MAAIA,KAAKC,MAAIA;AACtB,GCzCAq0B,KAAiB,SAAoB/7C,GAAK;AAKxC,WAJItkB,IAAS,GACTgxC,IAAM1sB,EAAI,QACVg8C,IAAM,GACNn/D,GACGm/D,IAAMtvB;AACX,IAAAhxC,KACAmB,IAAQmjB,EAAI,WAAWg8C,GAAK,GACxBn/D,KAAS,SAAUA,KAAS,SAAUm/D,IAAMtvB,MAE9C7vC,IAAQmjB,EAAI,WAAWg8C,CAAG,IACrBn/D,IAAQ,UAAW,SAAQm/D;AAGpC,SAAOtgE;AACT,GChBAi6C,KAAiB;AAAA,EACf,MAAMsmB;AAAA,EACN,eAAeC;AAAA,EACf,gBAAgBC;AAAA,EAChB,eAAeC;AAAA,EACf,QAAQC;AAAAA,EACR,aAAaC;AAAA,EACb,cAAcC;AAAA,EACd,OAAO32B;AAAAA,EACP,YAAY+D;AAAAA,EACZ,eAAe6yB;AAAA,EACf,YAAYC;AAAA,EACZ,gBAAgBC;AAAA,EAChB,sBAAsBC;AAAA,EACtB,oBAAoBC;AAAA,EACpB,gBAAgBC;AAAA,EAChB,aAAaC;AAAA,EACb,SAASC;AAAA,EACT,SAASC;AAAA,EACT,kBAAkBC;AAAA,EAClB,qBAAqBC;AAAA,EACrB,gBAAgBC;AAAA,EAChB,mBAAmBC;AACrB;AAGA,SAASnB,GAAKxN,GAAG1zC,GAAI;AACnB,EAAAA,IAAKA,KAAM,CAAA;AACX,WAAS/N,KAAOyhD,EAAG,CAAA1zC,EAAG/N,CAAG,IAAIyhD,EAAEzhD,CAAG;AAClC,SAAO+N;AACT;AAGA,SAASmhD,GAAc7tC,GAAUxyB,GAAMwhE,GAAeC,GAAQ;AAC5D,MAAIC,IAAQD,IAAS,UAAU,SAC3BE,IAAMF,IAAS,SAAS,QACxBvkB,IAAKukB,IAAS,MAAM,IACpBG,IAAMH,IAAS,KAAK;AACxB,UAAQjvC,GAAQ;AAAA,IACd,KAAK;AAAQ,aAAOxyB,IAAO0hE,IAAQ;AAAA,IACnC,KAAK;AAAS,aAAOxkB,IAAK,mBAAmBl9C,IAAO;AAAA,IACpD,KAAK;AAAU,aAAO,MAAMk9C,IAAKl9C,IAAO2hE,IAClB,YAAY3hE,IAAO0hE,IAAQ,aAAaC,IACxCC,IAAM,mBAAmB5hE,IAAO;AAAA,IACtD,KAAK;AAAW,aAAO,aAAaA,IAAO0hE,IAAQ,aAAaC,IACzCC,IAAM,MAAM5hE,IAAO,UACnB2hE,IAAM3hE,IAAO0hE,IAAQ1hE,KACpBwhE,IAAiBG,IAAMzkB,IAAK,cAAcl9C,IAAO,MAAO,MAAM;AAAA,IACtF,KAAK;AAAU,aAAO,aAAaA,IAAO0hE,IAAQ,MAAMlvC,IAAW,OAC5CgvC,IAAiBG,IAAMzkB,IAAK,cAAcl9C,IAAO,MAAO,MAAM;AAAA,IACrF;AAAS,aAAO,YAAYA,IAAO0hE,IAAQ,MAAMlvC,IAAW;AAAA,EAChE;AACA;AAGA,SAAS8tC,GAAeuB,GAAW7hE,GAAMwhE,GAAe;AACtD,UAAQK,EAAU,QAAM;AAAA,IACtB,KAAK;AAAG,aAAOxB,GAAcwB,EAAU,CAAC,GAAG7hE,GAAMwhE,GAAe,EAAI;AAAA,IACpE;AACE,UAAIrgC,IAAO,IACPpgC,IAAQy/D,GAAOqB,CAAS;AAC5B,MAAI9gE,EAAM,SAASA,EAAM,WACvBogC,IAAOpgC,EAAM,OAAO,MAAK,OAAOf,IAAO,QACvCmhC,KAAQ,YAAYnhC,IAAO,kBAC3B,OAAOe,EAAM,MACb,OAAOA,EAAM,OACb,OAAOA,EAAM,SAEXA,EAAM,UAAQ,OAAOA,EAAM;AAC/B,eAASqC,KAAKrC;AACZ,QAAAogC,MAASA,IAAO,SAAS,MAAOk/B,GAAcj9D,GAAGpD,GAAMwhE,GAAe,EAAI;AAE5E,aAAOrgC;AAAA,EACb;AACA;AAGA,IAAI2gC,KAAkBtB,GAAO,CAAE,UAAU,UAAU,WAAW,WAAW,OAAQ;AACjF,SAASD,GAAcwB,GAAmBF,GAAW;AACnD,MAAI,MAAM,QAAQA,CAAS,GAAG;AAE5B,aADI9gE,IAAQ,CAAA,GACH4F,IAAE,GAAGA,IAAEk7D,EAAU,QAAQl7D,KAAK;AACrC,UAAIvD,IAAIy+D,EAAUl7D,CAAC;AACnB,OAAIm7D,GAAgB1+D,CAAC,KACZ2+D,MAAsB,WAAW3+D,MAAM,aAASrC,EAAMA,EAAM,MAAM,IAAIqC;AAAA,IACrF;AACI,QAAIrC,EAAM,OAAQ,QAAOA;AAAA,EAC7B,OAAS;AAAA,QAAI+gE,GAAgBD,CAAS;AAClC,aAAO,CAACA,CAAS;AACZ,QAAIE,MAAsB,WAAWF,MAAc;AACxD,aAAO,CAAC,OAAO;AAAA;AAEnB;AAGA,SAASrB,GAAOhqD,GAAK;AAEnB,WADIwrD,IAAO,CAAA,GACFr7D,IAAE,GAAGA,IAAE6P,EAAI,QAAQ7P,IAAK,CAAAq7D,EAAKxrD,EAAI7P,CAAC,CAAC,IAAI;AAChD,SAAOq7D;AACT;AAGA,IAAIC,KAAa,yBACbC,KAAe;AACnB,SAASzB,GAAYtvD,GAAK;AACxB,SAAO,OAAOA,KAAO,WACX,MAAMA,IAAM,MACZ8wD,GAAW,KAAK9wD,CAAG,IACjB,MAAMA,IACN,OAAOuvD,GAAavvD,CAAG,IAAI;AACzC;AAGA,SAASuvD,GAAav8C,GAAK;AACzB,SAAOA,EAAI,QAAQ+9C,IAAc,MAAM,EAC5B,QAAQ,OAAO,KAAK,EACpB,QAAQ,OAAO,KAAK,EACpB,QAAQ,OAAO,KAAK,EACpB,QAAQ,OAAO,KAAK;AACjC;AAGA,SAASvB,GAAcx8C,GAAKg+C,GAAS;AACnC,EAAAA,KAAW;AACX,MAAIzvD,IAAUyR,EAAI,MAAM,IAAI,OAAOg+C,GAAS,GAAG,CAAC;AAChD,SAAOzvD,IAAUA,EAAQ,SAAS;AACpC;AAGA,SAASkuD,GAAWz8C,GAAKg+C,GAASC,GAAM;AACtC,SAAAD,KAAW,YACXC,IAAOA,EAAK,QAAQ,OAAO,MAAM,GAC1Bj+C,EAAI,QAAQ,IAAI,OAAOg+C,GAAS,GAAG,GAAGC,IAAO,IAAI;AAC1D;AAGA,SAASvB,GAAe96D,GAAQnD,GAAO;AACrC,MAAI,OAAOmD,KAAU,UAAW,QAAO,CAACA;AACxC,WAASoL,KAAOpL,EAAQ,KAAInD,EAAMuO,CAAG,EAAG,QAAO;AACjD;AAGA,SAAS2vD,GAAqB/6D,GAAQnD,GAAOy/D,GAAe;AAC1D,MAAI,OAAOt8D,KAAU,UAAW,QAAO,CAACA,KAAUs8D,KAAiB;AACnE,WAASlxD,KAAOpL,EAAQ,KAAIoL,KAAOkxD,KAAiBz/D,EAAMuO,CAAG,EAAG,QAAO;AACzE;AAGA,SAAS4vD,GAAmBh7D,GAAQnD,GAAO;AACzC,MAAI,OAAOmD,KAAU;AACrB,aAASoL,KAAOpL,EAAQ,KAAI,CAACnD,EAAMuO,CAAG,EAAG,QAAOA;AAAA;AAClD;AAGA,SAAS6vD,GAAe78C,GAAK;AAC3B,SAAO,MAAOu8C,GAAav8C,CAAG,IAAI;AACpC;AAGA,SAAS88C,GAAYqB,GAAaF,GAAMG,GAAc73B,GAAU;AAC9D,MAAI0D,IAAOm0B,IACG,WAAaH,KAAQ13B,IAAW,KAAK,gDACpCA,IAAW,WAAa03B,IAAO,WAAa,cAAiBA,IAAO;AACnF,SAAOI,GAAUF,GAAal0B,CAAI;AACpC;AAGA,SAAS8yB,GAAQoB,GAAajvD,GAAMkvD,GAAc;AAChD,MAAIn0B,IACU4yB,GADHuB,IACkB,MAAMhB,GAAkBluD,CAAI,IAC5BotD,GAAYptD,CAAI,CADa;AAE1D,SAAOmvD,GAAUF,GAAal0B,CAAI;AACpC;AAGA,IAAIq0B,KAAe,uBACfC,KAAwB;AAC5B,SAASvB,GAAQv1C,GAAO+2C,GAAKC,GAAO;AAClC,MAAIC,GAAIC,GAAa9iE,GAAM0S;AAC3B,MAAIkZ,MAAU,GAAI,QAAO;AACzB,MAAIA,EAAM,CAAC,KAAK,KAAK;AACnB,QAAI,CAAC62C,GAAa,KAAK72C,CAAK,EAAG,OAAM,IAAI,MAAM,2BAA2BA,CAAK;AAC/E,IAAAk3C,IAAcl3C,GACd5rB,IAAO;AAAA,EACX,OAAS;AAEL,QADA0S,IAAUkZ,EAAM,MAAM82C,EAAqB,GACvC,CAAChwD,EAAS,OAAM,IAAI,MAAM,2BAA2BkZ,CAAK;AAG9D,QAFAi3C,IAAK,CAACnwD,EAAQ,CAAC,GACfowD,IAAcpwD,EAAQ,CAAC,GACnBowD,KAAe,KAAK;AACtB,UAAID,KAAMF,EAAK,OAAM,IAAI,MAAM,kCAAkCE,IAAK,kCAAkCF,CAAG;AAC3G,aAAOC,EAAMD,IAAME,CAAE;AAAA,IAC3B;AAEI,QAAIA,IAAKF,EAAK,OAAM,IAAI,MAAM,wBAAwBE,IAAK,kCAAkCF,CAAG;AAEhG,QADA3iE,IAAO,UAAW2iE,IAAME,KAAO,KAC3B,CAACC,EAAa,QAAO9iE;AAAA,EAC7B;AAIE,WAFIoiE,IAAOpiE,GACP+iE,IAAWD,EAAY,MAAM,GAAG,GAC3Bn8D,IAAE,GAAGA,IAAEo8D,EAAS,QAAQp8D,KAAK;AACpC,QAAIq8D,IAAUD,EAASp8D,CAAC;AACxB,IAAIq8D,MACFhjE,KAAQygE,GAAYY,GAAoB2B,CAAO,CAAC,GAChDZ,KAAQ,SAASpiE;AAAA,EAEvB;AACE,SAAOoiE;AACT;AAGA,SAASI,GAAW52B,GAAGC,GAAG;AACxB,SAAID,KAAK,OAAaC,KACdD,IAAI,QAAQC,GAAG,QAAQ,kBAAkB,IAAI;AACvD;AAGA,SAASu1B,GAAiBj9C,GAAK;AAC7B,SAAOk9C,GAAoB,mBAAmBl9C,CAAG,CAAC;AACpD;AAGA,SAASm9C,GAAen9C,GAAK;AAC3B,SAAO,mBAAmBo9C,GAAkBp9C,CAAG,CAAC;AAClD;AAGA,SAASo9C,GAAkBp9C,GAAK;AAC9B,SAAOA,EAAI,QAAQ,MAAM,IAAI,EAAE,QAAQ,OAAO,IAAI;AACpD;AAGA,SAASk9C,GAAoBl9C,GAAK;AAChC,SAAOA,EAAI,QAAQ,OAAO,GAAG,EAAE,QAAQ,OAAO,GAAG;AACnD;AC5OA,IAAI21B,KAAO/P,IAEXk5B,KAAiBC;AAEjB,SAASA,GAAa/zD,GAAK;AACzB2qC,EAAAA,GAAK,KAAK3qC,GAAK,IAAI;AACrB;0BCNIg0D,KAAWC,GAAA,UAAiB,SAAUr9D,GAAQoxC,GAAMksB,GAAI;AAE1D,EAAI,OAAOlsB,KAAQ,eACjBksB,IAAKlsB,GACLA,IAAO,CAAA,IAGTksB,IAAKlsB,EAAK,MAAMksB;AAChB,MAAIC,IAAO,OAAOD,KAAM,aAAcA,IAAKA,EAAG,OAAO,WAAW;AAAA,KAC5DE,IAAOF,EAAG,QAAQ,WAAW;AAAA,EAAA;AAEjC,EAAAG,GAAUrsB,GAAMmsB,GAAKC,GAAMx9D,GAAQ,IAAIA,CAAM;AAC/C;AAGAo9D,GAAS,WAAW;AAAA,EAClB,iBAAiB;AAAA,EACjB,OAAO;AAAA,EACP,UAAU;AAAA,EACV,sBAAsB;AAAA,EACtB,eAAe;AAAA,EACf,KAAK;AACP;AAEAA,GAAS,gBAAgB;AAAA,EACvB,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO;AACT;AAEAA,GAAS,gBAAgB;AAAA,EACvB,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,mBAAmB;AAAA,EACnB,cAAc;AAChB;AAEAA,GAAS,eAAe;AAAA,EACtB,SAAS;AAAA,EACT,MAAM;AAAA,EACN,OAAO;AAAA,EACP,UAAU;AAAA,EACV,SAAS;AAAA,EACT,SAAS;AAAA,EACT,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,WAAW;AAAA,EACX,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,UAAU;AAAA,EACV,aAAa;AAAA,EACb,eAAe;AAAA,EACf,eAAe;AACjB;AAGA,SAASK,GAAUrsB,GAAMmsB,GAAKC,GAAMx9D,GAAQ09D,GAASC,GAAYC,GAAeC,GAAeC,GAAcC,GAAU;AACrH,MAAI/9D,KAAU,OAAOA,KAAU,YAAY,CAAC,MAAM,QAAQA,CAAM,GAAG;AACjE,IAAAu9D,EAAIv9D,GAAQ09D,GAASC,GAAYC,GAAeC,GAAeC,GAAcC,CAAQ;AACrF,aAAS3yD,KAAOpL,GAAQ;AACtB,UAAIg+D,IAAMh+D,EAAOoL,CAAG;AACpB,UAAI,MAAM,QAAQ4yD,CAAG;AACnB,YAAI5yD,KAAOgyD,GAAS;AAClB,mBAASx8D,IAAE,GAAGA,IAAEo9D,EAAI,QAAQp9D;AAC1B,YAAA68D,GAAUrsB,GAAMmsB,GAAKC,GAAMQ,EAAIp9D,CAAC,GAAG88D,IAAU,MAAMtyD,IAAM,MAAMxK,GAAG+8D,GAAYD,GAAStyD,GAAKpL,GAAQY,CAAC;AAAA,iBAEhGwK,KAAOgyD,GAAS;AACzB,YAAIY,KAAO,OAAOA,KAAO;AACvB,mBAAS1wD,KAAQ0wD;AACf,YAAAP,GAAUrsB,GAAMmsB,GAAKC,GAAMQ,EAAI1wD,CAAI,GAAGowD,IAAU,MAAMtyD,IAAM,MAAM6yD,GAAc3wD,CAAI,GAAGqwD,GAAYD,GAAStyD,GAAKpL,GAAQsN,CAAI;AAAA,YAE5H,EAAIlC,KAAOgyD,GAAS,YAAahsB,EAAK,WAAW,EAAEhmC,KAAOgyD,GAAS,kBACxEK,GAAUrsB,GAAMmsB,GAAKC,GAAMQ,GAAKN,IAAU,MAAMtyD,GAAKuyD,GAAYD,GAAStyD,GAAKpL,CAAM;AAAA,IAE7F;AACI,IAAAw9D,EAAKx9D,GAAQ09D,GAASC,GAAYC,GAAeC,GAAeC,GAAcC,CAAQ;AAAA,EAC1F;AACA;AAGA,SAASE,GAAc7/C,GAAK;AAC1B,SAAOA,EAAI,QAAQ,MAAM,IAAI,EAAE,QAAQ,OAAO,IAAI;AACpD;qBCtFI8/C,KAAMl6B,IACNmzB,KAAQpvB,IACRgM,KAAO9L,IACPk1B,KAAelwB,IACfmwB,KAAWlwB,IAEfixB,KAAiB9yB;AAEjBA,GAAQ,cAAc+yB;AACtB/yB,GAAQ,WAAWgzB;AACnBhzB,GAAQ,MAAMizB;AACdjzB,GAAQ,MAAMkzB;AACdlzB,GAAQ,YAAYmzB;AACpBnzB,GAAQ,SAASozB;AAUjB,SAASpzB,GAAQqzB,GAASpgD,GAAM5gB,GAAK;AAEnC,MAAIihE,IAAS,KAAK,MAAMjhE,CAAG;AAC3B,MAAI,OAAOihE,KAAU;AACnB,QAAI,KAAK,MAAMA,CAAM,EAAG,CAAAA,IAAS,KAAK,MAAMA,CAAM;AAAA,QAC7C,QAAOtzB,GAAQ,KAAK,MAAMqzB,GAASpgD,GAAMqgD,CAAM;AAItD,MADAA,IAASA,KAAU,KAAK,SAASjhE,CAAG,GAChCihE,aAAkBxB;AACpB,WAAOqB,GAAUG,EAAO,QAAQ,KAAK,MAAM,UAAU,IAC3CA,EAAO,SACPA,EAAO,YAAY,KAAK,SAASA,CAAM;AAGnD,MAAI56C,IAAM06C,GAAc,KAAK,MAAMngD,GAAM5gB,CAAG,GACxCsC,GAAQoyB,GAAGwsC;AACf,SAAI76C,MACF/jB,IAAS+jB,EAAI,QACbzF,IAAOyF,EAAI,MACX66C,IAAS76C,EAAI,SAGX/jB,aAAkBm9D,KACpB/qC,IAAIpyB,EAAO,YAAY0+D,EAAQ,KAAK,MAAM1+D,EAAO,QAAQse,GAAM,QAAWsgD,CAAM,IACvE5+D,MAAW,WACpBoyB,IAAIosC,GAAUx+D,GAAQ,KAAK,MAAM,UAAU,IACrCA,IACA0+D,EAAQ,KAAK,MAAM1+D,GAAQse,GAAM,QAAWsgD,CAAM,IAGnDxsC;AACT;AAUA,SAASqsC,GAAcngD,GAAM5gB,GAAK;AAEhC,MAAI8V,IAAI0qD,GAAI,MAAMxgE,CAAG,GACjBmhE,IAAUC,GAAatrD,CAAC,GACxBorD,IAASP,GAAY,KAAK,OAAO//C,EAAK,MAAM,CAAC;AACjD,MAAI,OAAO,KAAKA,EAAK,MAAM,EAAE,WAAW,KAAKugD,MAAYD,GAAQ;AAC/D,QAAIxhD,IAAKghD,GAAYS,CAAO,GACxBF,IAAS,KAAK,MAAMvhD,CAAE;AAC1B,QAAI,OAAOuhD,KAAU;AACnB,aAAOI,GAAiB,KAAK,MAAMzgD,GAAMqgD,GAAQnrD,CAAC;AAC7C,QAAImrD,aAAkBxB;AAC3B,MAAKwB,EAAO,YAAU,KAAK,SAASA,CAAM,GAC1CrgD,IAAOqgD;AAAA,aAEPA,IAAS,KAAK,SAASvhD,CAAE,GACrBuhD,aAAkBxB,IAAc;AAElC,UADKwB,EAAO,YAAU,KAAK,SAASA,CAAM,GACtCvhD,KAAMghD,GAAY1gE,CAAG;AACvB,eAAO,EAAE,QAAQihE,GAAQ,MAAMrgD,GAAM,QAAQsgD,EAAM;AACrD,MAAAtgD,IAAOqgD;AAAA,IACf;AACQ;AAGJ,QAAI,CAACrgD,EAAK,OAAQ;AAClB,IAAAsgD,IAASP,GAAY,KAAK,OAAO//C,EAAK,MAAM,CAAC;AAAA,EACjD;AACE,SAAO0gD,GAAe,KAAK,MAAMxrD,GAAGorD,GAAQtgD,EAAK,QAAQA,CAAI;AAC/D;AAIA,SAASygD,GAAiBzgD,GAAM5gB,GAAKuhE,GAAW;AAE9C,MAAIl7C,IAAM06C,GAAc,KAAK,MAAMngD,GAAM5gB,CAAG;AAC5C,MAAIqmB,GAAK;AACP,QAAI/jB,IAAS+jB,EAAI,QACb66C,IAAS76C,EAAI;AACjB,IAAAzF,IAAOyF,EAAI;AACX,QAAI3G,IAAK,KAAK,OAAOpd,CAAM;AAC3B,WAAIod,MAAIwhD,IAASN,GAAWM,GAAQxhD,CAAE,IAC/B4hD,GAAe,KAAK,MAAMC,GAAWL,GAAQ5+D,GAAQse,CAAI;AAAA,EACpE;AACA;AAGA,IAAI4gD,KAAuBnrB,GAAK,OAAO,CAAC,cAAc,qBAAqB,QAAQ,gBAAgB,aAAa,CAAC;AAEjH,SAASirB,GAAeC,GAAWL,GAAQ5+D,GAAQse,GAAM;AAGvD,MADA2gD,EAAU,WAAWA,EAAU,YAAY,IACvCA,EAAU,SAAS,MAAM,GAAE,CAAC,KAAK,KAGrC;AAAA,aAFI1O,IAAQ0O,EAAU,SAAS,MAAM,GAAG,GAE/Br+D,IAAI,GAAGA,IAAI2vD,EAAM,QAAQ3vD,KAAK;AACrC,UAAIu+D,IAAO5O,EAAM3vD,CAAC;AAClB,UAAIu+D,GAAM;AAGR,YAFAA,IAAOprB,GAAK,iBAAiBorB,CAAI,GACjCn/D,IAASA,EAAOm/D,CAAI,GAChBn/D,MAAW,OAAW;AAC1B,YAAIod;AACJ,YAAI,CAAC8hD,GAAqBC,CAAI,MAC5B/hD,IAAK,KAAK,OAAOpd,CAAM,GACnBod,MAAIwhD,IAASN,GAAWM,GAAQxhD,CAAE,IAClCpd,EAAO,OAAM;AACf,cAAIo/D,IAAOd,GAAWM,GAAQ5+D,EAAO,IAAI,GACrC+jB,IAAM06C,GAAc,KAAK,MAAMngD,GAAM8gD,CAAI;AAC7C,UAAIr7C,MACF/jB,IAAS+jB,EAAI,QACbzF,IAAOyF,EAAI,MACX66C,IAAS76C,EAAI;AAAA,QAEzB;AAAA,MAEA;AAAA,IACA;AACE,QAAI/jB,MAAW,UAAaA,MAAWse,EAAK;AAC1C,aAAO,EAAE,QAAQte,GAAQ,MAAMse,GAAM,QAAQsgD,EAAM;AAAA;AACvD;AAGA,IAAIS,KAAiBtrB,GAAK,OAAO;AAAA,EAC/B;AAAA,EAAQ;AAAA,EAAU;AAAA,EAClB;AAAA,EAAa;AAAA,EACb;AAAA,EAAiB;AAAA,EACjB;AAAA,EAAY;AAAA,EACZ;AAAA,EAAW;AAAA,EACX;AAAA,EAAe;AAAA,EACf;AAAA,EAAY;AACd,CAAC;AACD,SAASyqB,GAAUx+D,GAAQs/D,GAAO;AAChC,MAAIA,MAAU,GAAO,QAAO;AAC5B,MAAIA,MAAU,UAAaA,MAAU,GAAM,QAAOC,GAAWv/D,CAAM;AAC9D,MAAIs/D,EAAO,QAAOE,GAAUx/D,CAAM,KAAKs/D;AAC9C;AAGA,SAASC,GAAWv/D,GAAQ;AAC1B,MAAIvG;AACJ,MAAI,MAAM,QAAQuG,CAAM;AACtB,aAASY,IAAE,GAAGA,IAAEZ,EAAO,QAAQY;AAE7B,UADAnH,IAAOuG,EAAOY,CAAC,GACX,OAAOnH,KAAQ,YAAY,CAAC8lE,GAAW9lE,CAAI,EAAG,QAAO;AAAA;AAG3D,aAAS2R,KAAOpL;AAGd,UAFIoL,KAAO,WACX3R,IAAOuG,EAAOoL,CAAG,GACb,OAAO3R,KAAQ,YAAY,CAAC8lE,GAAW9lE,CAAI,GAAG,QAAO;AAG7D,SAAO;AACT;AAGA,SAAS+lE,GAAUx/D,GAAQ;AACzB,MAAIy/D,IAAQ,GAAGhmE;AACf,MAAI,MAAM,QAAQuG,CAAM;AACtB,aAASY,IAAE,GAAGA,IAAEZ,EAAO,QAAQY;AAG7B,UAFAnH,IAAOuG,EAAOY,CAAC,GACX,OAAOnH,KAAQ,aAAUgmE,KAASD,GAAU/lE,CAAI,IAChDgmE,KAAS,MAAU,QAAO;AAAA;AAGhC,aAASr0D,KAAOpL,GAAQ;AACtB,UAAIoL,KAAO,OAAQ,QAAO;AAC1B,UAAIi0D,GAAej0D,CAAG;AACpB,QAAAq0D;AAAA,eAEAhmE,IAAOuG,EAAOoL,CAAG,GACb,OAAO3R,KAAQ,aAAUgmE,KAASD,GAAU/lE,CAAI,IAAI,IACpDgmE,KAAS,MAAU,QAAO;AAAA,IAEtC;AAEE,SAAOA;AACT;AAGA,SAASpB,GAAYjhD,GAAI65C,GAAW;AAClC,EAAIA,MAAc,OAAO75C,IAAKghD,GAAYhhD,CAAE;AAC5C,MAAI5J,IAAI0qD,GAAI,MAAM9gD,CAAE;AACpB,SAAO0hD,GAAatrD,CAAC;AACvB;AAGA,SAASsrD,GAAatrD,GAAG;AACvB,SAAO0qD,GAAI,UAAU1qD,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,IAAI;AAC1C;AAGA,IAAIksD,KAAsB;AAC1B,SAAStB,GAAYhhD,GAAI;AACvB,SAAOA,IAAKA,EAAG,QAAQsiD,IAAqB,EAAE,IAAI;AACpD;AAGA,SAASpB,GAAWM,GAAQxhD,GAAI;AAC9B,SAAAA,IAAKghD,GAAYhhD,CAAE,GACZ8gD,GAAI,QAAQU,GAAQxhD,CAAE;AAC/B;AAIA,SAASmhD,GAAWv+D,GAAQ;AAC1B,MAAI2/D,IAAWvB,GAAY,KAAK,OAAOp+D,CAAM,CAAC,GAC1C4/D,IAAU,EAAC,IAAID,EAAQ,GACvBE,IAAY,EAAC,IAAIxB,GAAYsB,GAAU,EAAK,EAAC,GAC7CG,IAAY,CAAA,GACZC,IAAO;AAEX,SAAA3C,GAASp9D,GAAQ,EAAC,SAAS,GAAI,GAAG,SAASg+D,GAAKN,GAASC,GAAYC,GAAeC,GAAeC,GAAcC,GAAU;AACzH,QAAIL,MAAY,IAChB;AAAA,UAAItgD,IAAK2iD,EAAK,OAAO/B,CAAG,GACpBY,IAASgB,EAAQhC,CAAa,GAC9BxvB,IAAWyxB,EAAUjC,CAAa,IAAI,MAAMC;AAIhD,UAHIE,MAAa,WACf3vB,KAAY,OAAO,OAAO2vB,KAAY,WAAWA,IAAWhqB,GAAK,eAAegqB,CAAQ,KAEtF,OAAO3gD,KAAM,UAAU;AACzB,QAAAA,IAAKwhD,IAASR,GAAYQ,IAASV,GAAI,QAAQU,GAAQxhD,CAAE,IAAIA,CAAE;AAE/D,YAAIuhD,IAASoB,EAAK,MAAM3iD,CAAE;AAE1B,YADI,OAAOuhD,KAAU,aAAUA,IAASoB,EAAK,MAAMpB,CAAM,IACrDA,KAAUA,EAAO;AACnB,cAAI,CAACxH,GAAM6G,GAAKW,EAAO,MAAM;AAC3B,kBAAM,IAAI,MAAM,SAASvhD,IAAK,oCAAoC;AAAA,mBAC3DA,KAAMghD,GAAYhwB,CAAQ;AACnC,cAAIhxB,EAAG,CAAC,KAAK,KAAK;AAChB,gBAAI0iD,EAAU1iD,CAAE,KAAK,CAAC+5C,GAAM6G,GAAK8B,EAAU1iD,CAAE,CAAC;AAC5C,oBAAM,IAAI,MAAM,SAASA,IAAK,oCAAoC;AACpE,YAAA0iD,EAAU1iD,CAAE,IAAI4gD;AAAA,UAC1B;AACU,YAAA+B,EAAK,MAAM3iD,CAAE,IAAIgxB;AAAA,MAG3B;AACI,MAAAwxB,EAAQlC,CAAO,IAAIkB,GACnBiB,EAAUnC,CAAO,IAAItvB;AAAA;AAAA,EACzB,CAAG,GAEM0xB;AACT;AC3QA,IAAIz0B,KAAUrH,IAEdg8B,KAAiB;AAAA,EACf,YAAYC,GAAcC,EAAe;AAAA,EACzC,YAAYD,GAAcE,EAAe;AAC3C;AAGA,SAASD,GAAgBlQ,GAAQ;AAC/B,OAAK,UAAU,qBACf,KAAK,SAASA,GACd,KAAK,MAAM,KAAK,aAAa;AAC/B;AAGAmQ,GAAgB,UAAU,SAAUvB,GAAQlhE,GAAK;AAC/C,SAAO,6BAA8BA,IAAM,cAAckhE;AAC3D;AAGA,SAASuB,GAAgBvB,GAAQlhE,GAAK2C,GAAS;AAC7C,OAAK,UAAUA,KAAW8/D,GAAgB,QAAQvB,GAAQlhE,CAAG,GAC7D,KAAK,aAAa2tC,GAAQ,IAAIuzB,GAAQlhE,CAAG,GACzC,KAAK,gBAAgB2tC,GAAQ,YAAYA,GAAQ,SAAS,KAAK,UAAU,CAAC;AAC5E;AAGA,SAAS40B,GAAcG,GAAU;AAC/B,SAAAA,EAAS,YAAY,OAAO,OAAO,MAAM,SAAS,GAClDA,EAAS,UAAU,cAAcA,GAC1BA;AACT;AC/BA,IAAAC,KAAiB,SAAUpmE,GAAMm3C,GAAM;AACnC,EAAKA,MAAMA,IAAO,CAAA,IACd,OAAOA,KAAS,eAAYA,IAAO,EAAE,KAAKA,EAAI;AAClD,MAAIkvB,IAAU,OAAOlvB,EAAK,UAAW,YAAaA,EAAK,SAAS,IAE5DmvB,IAAMnvB,EAAK,OAAQ,yBAAUovB,GAAG;AAChC,WAAO,SAAUn3D,GAAM;AACnB,aAAO,SAAUw8B,GAAGC,GAAG;AACnB,YAAI26B,IAAO,EAAE,KAAK56B,GAAG,OAAOx8B,EAAKw8B,CAAC,EAAC,GAC/B66B,IAAO,EAAE,KAAK56B,GAAG,OAAOz8B,EAAKy8B,CAAC,EAAC;AACnC,eAAO06B,EAAEC,GAAMC,CAAI;AAAA,MACnC;AAAA,IACA;AAAA,EACA,EAAOtvB,EAAK,GAAG,GAEPuvB,IAAO,CAAA;AACX,SAAQ,SAASC,EAAWv3D,GAAM;AAK9B,QAJIA,KAAQA,EAAK,UAAU,OAAOA,EAAK,UAAW,eAC9CA,IAAOA,EAAK,OAAM,IAGlBA,MAAS,QACb;AAAA,UAAI,OAAOA,KAAQ,SAAU,QAAO,SAASA,CAAI,IAAI,KAAKA,IAAO;AACjE,UAAI,OAAOA,KAAS,SAAU,QAAO,KAAK,UAAUA,CAAI;AAExD,UAAI,GAAG0oD;AACP,UAAI,MAAM,QAAQ1oD,CAAI,GAAG;AAErB,aADA0oD,IAAM,KACD,IAAI,GAAG,IAAI1oD,EAAK,QAAQ;AACzB,UAAI,MAAG0oD,KAAO,MACdA,KAAO6O,EAAUv3D,EAAK,CAAC,CAAC,KAAK;AAEjC,eAAO0oD,IAAM;AAAA,MACzB;AAEQ,UAAI1oD,MAAS,KAAM,QAAO;AAE1B,UAAIs3D,EAAK,QAAQt3D,CAAI,MAAM,IAAI;AAC3B,YAAIi3D,EAAQ,QAAO,KAAK,UAAU,WAAW;AAC7C,cAAM,IAAI,UAAU,uCAAuC;AAAA,MACvE;AAEQ,UAAIO,IAAYF,EAAK,KAAKt3D,CAAI,IAAI,GAC9ByB,IAAO,OAAO,KAAKzB,CAAI,EAAE,KAAKk3D,KAAOA,EAAIl3D,CAAI,CAAC;AAElD,WADA0oD,IAAM,IACD,IAAI,GAAG,IAAIjnD,EAAK,QAAQ,KAAK;AAC9B,YAAIM,IAAMN,EAAK,CAAC,GACZ7P,IAAQ2lE,EAAUv3D,EAAK+B,CAAG,CAAC;AAE/B,QAAKnQ,MACD82D,MAAKA,KAAO,MAChBA,KAAO,KAAK,UAAU3mD,CAAG,IAAI,MAAMnQ;AAAA,MAC/C;AACQ,aAAA0lE,EAAK,OAAOE,GAAW,CAAC,GACjB,MAAM9O,IAAM;AAAA;AAAA,EAC3B,EAAO93D,CAAI;AACX,GCzDA6mE,KAAiB,SAA2BC,GAAIC,GAAUC,GAAW;AACnE,MAAIlP,IAAM,IACNmP,IAASH,EAAG,OAAO,WAAW,IAChCI,IAAeJ,EAAG,KAAK,qBAAqBA,EAAG,QAAQA,EAAG,MAAM,KAAK,MAAM,GAC3EK,IAAML,EAAG,KAAK,OAAOA,EAAG,MAAM;AAChC,MAAIA,EAAG,KAAK,gBAAgB;AAC1B,QAAIM,IAAcN,EAAG,KAAK,mBAAmBA,EAAG,QAAQA,EAAG,MAAM,QAAQ;AACzE,QAAIM,GAAa;AACf,UAAIC,IAAe,sBAAsBD;AACzC,UAAIN,EAAG,KAAK,mBAAmB,MAAO,CAAAA,EAAG,OAAO,KAAKO,CAAY;AAAA,UAC5D,OAAM,IAAI,MAAMA,CAAY;AAAA,IACvC;AAAA,EACA;AAYE,MAXIP,EAAG,UACLhP,KAAO,oBACHmP,MACFH,EAAG,QAAQ,IACXhP,KAAO,WAETA,KAAO,uFACHqP,MAAQL,EAAG,KAAK,cAAcA,EAAG,KAAK,iBACxChP,KAAO,OAAO,mBAAoBqP,IAAM,SAAS,OAGjD,OAAOL,EAAG,UAAU,aAAa,EAAEI,KAAgBJ,EAAG,OAAO,OAAO;AACtE,QAAIC,IAAW,gBACXO,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP;AACvB,QAAIR,EAAG,WAAW,IAAO;AACvB,MAAIA,EAAG,QACLa,IAAgB,KAEhB7P,KAAO,UAAW+P,IAAU;AAE9B,UAAIC,IAAaA,KAAc,CAAA;AAC/B,MAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,kBAAkB,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBACnLZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,2CAELgP,EAAG,KAAK,YACVhP,KAAO,qDAAsDgP,EAAG,aAAc,cAAel7C,IAAS,MAExGksC,KAAO,SAEPA,KAAO;AAET,UAAIiQ,IAAQjQ;AACZ,MAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS;AAAA,IAEzC;AACM,MAAIjB,EAAG,QACDG,IACFnP,KAAO,mBAEPA,KAAO,2CAGTA,KAAO,UAAW+P,IAAU;AAGhC,WAAIf,EAAG,UACLhP,KAAO,0BAEFA;AAAA,EACX;AACE,MAAIgP,EAAG,OAAO;AACZ,QAAIkB,IAAOlB,EAAG,OACZQ,IAAOR,EAAG,QAAQ,GAClBS,IAAWT,EAAG,YAAY,GAC1Bl7C,IAAQ;AAKV,QAJAk7C,EAAG,SAASA,EAAG,QAAQ,SAASA,EAAG,KAAK,OAAOA,EAAG,KAAK,MAAM,CAAC,GAC9DA,EAAG,SAASA,EAAG,UAAUA,EAAG,QAC5B,OAAOA,EAAG,OACVA,EAAG,cAAc,CAAC,EAAE,GAChBA,EAAG,OAAO,YAAY,UAAaA,EAAG,KAAK,eAAeA,EAAG,KAAK,gBAAgB;AACpF,UAAImB,IAAc;AAClB,UAAInB,EAAG,KAAK,mBAAmB,MAAO,CAAAA,EAAG,OAAO,KAAKmB,CAAW;AAAA,UAC3D,OAAM,IAAI,MAAMA,CAAW;AAAA,IACtC;AACI,IAAAnQ,KAAO,yBACPA,KAAO,yBACPA,KAAO;AAAA,EACX,OAAS;AACL,QAAIwP,IAAOR,EAAG,OACZS,IAAWT,EAAG,WACdl7C,IAAQ,UAAU27C,KAAY;AAEhC,QADIJ,MAAKL,EAAG,SAASA,EAAG,QAAQ,IAAIA,EAAG,QAAQK,CAAG,IAC9CF,KAAU,CAACH,EAAG,MAAO,OAAM,IAAI,MAAM,6BAA6B;AACtE,IAAAhP,KAAO,eAAgBwP,IAAQ;AAAA,EACnC;AACE,MAAIO,IAAS,UAAUP,GACrBK,IAAgB,CAACb,EAAG,KAAK,WACzBoB,IAAkB,IAClBC,IAAkB,IAChBP,GACAQ,IAActB,EAAG,OAAO,MAC1BuB,IAAe,MAAM,QAAQD,CAAW;AAa1C,MAZIA,KAAetB,EAAG,KAAK,YAAYA,EAAG,OAAO,aAAa,OACxDuB,IACED,EAAY,QAAQ,MAAM,KAAK,OAAIA,IAAcA,EAAY,OAAO,MAAM,KACrEA,KAAe,WACxBA,IAAc,CAACA,GAAa,MAAM,GAClCC,IAAe,MAGfA,KAAgBD,EAAY,UAAU,MACxCA,IAAcA,EAAY,CAAC,GAC3BC,IAAe,KAEbvB,EAAG,OAAO,QAAQI,GAAc;AAClC,QAAIJ,EAAG,KAAK,cAAc;AACxB,YAAM,IAAI,MAAM,uDAAuDA,EAAG,gBAAgB,2BAA2B;AAChH,IAAIA,EAAG,KAAK,eAAe,OAChCI,IAAe,IACfJ,EAAG,OAAO,KAAK,+CAA+CA,EAAG,gBAAgB,GAAG;AAAA,EAE1F;AAIE,MAHIA,EAAG,OAAO,YAAYA,EAAG,KAAK,aAChChP,KAAO,MAAOgP,EAAG,MAAM,IAAI,SAAS,KAAKA,GAAI,UAAU,IAErDsB,GAAa;AACf,QAAItB,EAAG,KAAK;AACV,UAAIwB,IAAiBxB,EAAG,KAAK,cAAcA,EAAG,KAAK,aAAasB,CAAW;AAE7E,QAAIG,IAAczB,EAAG,MAAM,MAAMsB,CAAW;AAC5C,QAAIE,KAAkBD,KAAgBE,MAAgB,MAASA,KAAe,CAACC,GAAgBD,CAAW,GAAI;AAC5G,UAAId,IAAcX,EAAG,aAAa,SAChCY,IAAiBZ,EAAG,gBAAgB,SAClCW,IAAcX,EAAG,aAAa,SAChCY,IAAiBZ,EAAG,gBAAgB,SACpC2B,IAAUJ,IAAe,mBAAmB;AAE9C,UADAvQ,KAAO,UAAWgP,EAAG,KAAK2B,CAAO,EAAEL,GAAax8C,GAAOk7C,EAAG,KAAK,eAAe,EAAI,IAAK,QACnFwB,GAAgB;AAClB,YAAII,IAAY,aAAapB,GAC3BqB,IAAW,YAAYrB;AACzB,QAAAxP,KAAO,UAAW4Q,IAAa,eAAgB98C,IAAS,WAAY+8C,IAAY,kBAC5E7B,EAAG,KAAK,eAAe,YACzBhP,KAAO,UAAW4Q,IAAa,mCAAsC98C,IAAS,UAAWA,IAAS,qBAAsBA,IAAS,QAASA,IAAS,UAAW88C,IAAa,eAAgB98C,IAAS,WAAYk7C,EAAG,KAAK,cAAcA,EAAG,OAAO,MAAMl7C,GAAOk7C,EAAG,KAAK,aAAa,IAAK,OAAQ6B,IAAY,QAAS/8C,IAAS,SAE/TksC,KAAO,UAAW6Q,IAAY;AAC9B,YAAIC,KAAON;AACX,YAAIM;AAGF,mBAFIC,IAAOC,KAAK,IACdC,KAAKH,GAAK,SAAS,GACdE,KAAKC;AACV,YAAAF,KAAQD,GAAKE,MAAM,CAAC,GAChBD,MAAS,WACX/Q,KAAO,eAAgB4Q,IAAa,qBAAwBA,IAAa,oBAAuBC,IAAY,aAAgB/8C,IAAS,gBAAiBA,IAAS,gBAAiB+8C,IAAY,YACnLE,MAAS,YAAYA,MAAS,aACvC/Q,KAAO,eAAgB4Q,IAAa,sBAAyB98C,IAAS,mBAAoB88C,IAAa,qBAAwB98C,IAAS,SAAUA,IAAS,UAAWA,IAAS,KAC3Ki9C,MAAS,cACX/Q,KAAO,WAAYlsC,IAAS,UAE9BksC,KAAO,QAAS6Q,IAAY,SAAU/8C,IAAS,QACtCi9C,MAAS,YAClB/Q,KAAO,eAAgBlsC,IAAS,qBAAwBA,IAAS,eAAgBA,IAAS,gBAAiB+8C,IAAY,wBAAyB/8C,IAAS,oBAAuBA,IAAS,aAAc+8C,IAAY,cAC1ME,MAAS,SAClB/Q,KAAO,eAAgBlsC,IAAS,gBAAmBA,IAAS,eAAgBA,IAAS,iBAAkB+8C,IAAY,cAC1G7B,EAAG,KAAK,eAAe,WAAW+B,MAAS,YACpD/Q,KAAO,eAAgB4Q,IAAa,qBAAwBA,IAAa,qBAAwBA,IAAa,sBAAyB98C,IAAS,eAAgB+8C,IAAY,SAAU/8C,IAAS;AAIrM,QAAAksC,KAAO;AACP,YAAIgQ,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,UAAU,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,wBAC3KW,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,QACHgP,EAAG,KAAK,aAAa,OACvBhP,KAAO,2BACHuQ,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,IAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,YAAa6Q,IAAY;AAChC,YAAIK,KAAczB,IAAW,UAAWA,IAAW,KAAM,MAAM,cAC7D0B,KAAsB1B,IAAWT,EAAG,YAAYS,CAAQ,IAAI;AAC9D,QAAAzP,KAAO,MAAOlsC,IAAS,QAAS+8C,IAAY,MACvCpB,MACHzP,KAAO,SAAUkR,KAAe,oBAElClR,KAAO,MAAOkR,KAAe,MAAOC,KAAuB,SAAUN,IAAY;AAAA,MACzF,OAAa;AACL,YAAIb,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,UAAU,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,wBAC3KW,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,QACHgP,EAAG,KAAK,aAAa,OACvBhP,KAAO,2BACHuQ,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,IAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS;AAAA,MAE3C;AACM,MAAAjQ,KAAO;AAAA,IACb;AAAA,EACA;AACE,MAAIgP,EAAG,OAAO,QAAQ,CAACI;AACrB,IAAApP,KAAO,MAAOgP,EAAG,MAAM,IAAI,KAAK,KAAKA,GAAI,MAAM,IAAK,KAChDa,MACF7P,KAAO,sBACHkQ,IACFlQ,KAAO,MAEPA,KAAO,UAAWwP,GAEpBxP,KAAO,QACPqQ,KAAmB;AAAA,OAEhB;AACL,QAAIhT,KAAO2R,EAAG;AACd,QAAI3R;AAGF,eAFIoT,GAAaW,IAAK,IACpBC,IAAKhU,GAAK,SAAS,GACd+T,IAAKC;AAEV,YADAZ,IAAcpT,GAAK+T,KAAM,CAAC,GACtBV,GAAgBD,CAAW,GAAG;AAIhC,cAHIA,EAAY,SACdzQ,KAAO,UAAWgP,EAAG,KAAK,cAAcyB,EAAY,MAAM38C,GAAOk7C,EAAG,KAAK,aAAa,IAAK,SAEzFA,EAAG,KAAK;AACV,gBAAIyB,EAAY,QAAQ,YAAYzB,EAAG,OAAO,YAAY;AACxD,kBAAIU,IAAUV,EAAG,OAAO,YACtBsC,KAAc,OAAO,KAAK5B,CAAO,GAC/B6B,KAAOD;AACX,kBAAIC;AAGF,yBAFIC,IAAcC,KAAK,IACrBC,KAAKH,GAAK,SAAS,GACdE,KAAKC,MAAI;AACd,kBAAAF,KAAeD,GAAKE,MAAM,CAAC;AAC3B,sBAAIE,KAAOjC,EAAQ8B,EAAY;AAC/B,sBAAIG,GAAK,YAAY,QAAW;AAC9B,wBAAIC,KAAY99C,IAAQk7C,EAAG,KAAK,YAAYwC,EAAY;AACxD,wBAAIxC,EAAG;AACL,0BAAIA,EAAG,KAAK,gBAAgB;AAC1B,4BAAImB,IAAc,6BAA6ByB;AAC/C,4BAAI5C,EAAG,KAAK,mBAAmB,MAAO,CAAAA,EAAG,OAAO,KAAKmB,CAAW;AAAA,4BAC3D,OAAM,IAAI,MAAMA,CAAW;AAAA,sBACxD;AAAA;AAEsB,sBAAAnQ,KAAO,UAAW4R,KAAa,mBAC3B5C,EAAG,KAAK,eAAe,YACzBhP,KAAO,SAAU4R,KAAa,kBAAmBA,KAAa,aAEhE5R,KAAO,QAAS4R,KAAa,OACzB5C,EAAG,KAAK,eAAe,WACzBhP,KAAO,MAAOgP,EAAG,WAAW2C,GAAK,OAAO,IAAK,MAE7C3R,KAAO,MAAO,KAAK,UAAU2R,GAAK,OAAO,IAAK,KAEhD3R,KAAO;AAAA,kBAE7B;AAAA,gBACA;AAAA,YAEA,WAAuByQ,EAAY,QAAQ,WAAW,MAAM,QAAQzB,EAAG,OAAO,KAAK,GAAG;AACxE,kBAAI6C,KAAO7C,EAAG,OAAO;AACrB,kBAAI6C;AAGF,yBAFIF,IAAMX,KAAK,IACbc,KAAKD,GAAK,SAAS,GACdb,KAAKc;AAEV,sBADAH,KAAOE,GAAKb,MAAM,CAAC,GACfW,GAAK,YAAY,QAAW;AAC9B,wBAAIC,KAAY99C,IAAQ,MAAMk9C,KAAK;AACnC,wBAAIhC,EAAG;AACL,0BAAIA,EAAG,KAAK,gBAAgB;AAC1B,4BAAImB,IAAc,6BAA6ByB;AAC/C,4BAAI5C,EAAG,KAAK,mBAAmB,MAAO,CAAAA,EAAG,OAAO,KAAKmB,CAAW;AAAA,4BAC3D,OAAM,IAAI,MAAMA,CAAW;AAAA,sBACxD;AAAA;AAEsB,sBAAAnQ,KAAO,UAAW4R,KAAa,mBAC3B5C,EAAG,KAAK,eAAe,YACzBhP,KAAO,SAAU4R,KAAa,kBAAmBA,KAAa,aAEhE5R,KAAO,QAAS4R,KAAa,OACzB5C,EAAG,KAAK,eAAe,WACzBhP,KAAO,MAAOgP,EAAG,WAAW2C,GAAK,OAAO,IAAK,MAE7C3R,KAAO,MAAO,KAAK,UAAU2R,GAAK,OAAO,IAAK,KAEhD3R,KAAO;AAAA,kBAE7B;AAAA;AAAA,YAGA;AAAA;AAEU,cAAI+R,KAAOtB,EAAY;AACvB,cAAIsB;AAGF,qBAFIC,IAAOC,KAAK,IACdC,KAAKH,GAAK,SAAS,GACdE,KAAKC;AAEV,kBADAF,KAAQD,GAAKE,MAAM,CAAC,GAChBE,GAAeH,EAAK,GAAG;AACzB,oBAAII,KAAQJ,GAAM,KAAKhD,GAAIgD,GAAM,SAASvB,EAAY,IAAI;AAC1D,gBAAI2B,OACFpS,KAAO,MAAOoS,KAAS,KACnBvC,MACFO,KAAmB;AAAA,cAGvC;AAAA;AAOU,cAJIP,MACF7P,KAAO,MAAOoQ,IAAmB,KACjCA,IAAkB,KAEhBK,EAAY,SACdzQ,KAAO,OACHsQ,KAAeA,MAAgBG,EAAY,QAAQ,CAACD,IAAgB;AACtE,YAAAxQ,KAAO;AACP,gBAAI2P,IAAcX,EAAG,aAAa,SAChCY,IAAiBZ,EAAG,gBAAgB,SAClCgB,IAAaA,KAAc,CAAA;AAC/B,YAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,UAAU,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,wBAC3KW,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,QACHgP,EAAG,KAAK,aAAa,OACvBhP,KAAO,2BACHuQ,IACFvQ,KAAO,KAAMsQ,EAAY,KAAK,GAAG,IAEjCtQ,KAAO,KAAMsQ,GAEftQ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,gBAAIiQ,IAAQjQ;AACZ,YAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO;AAAA,UACrB;AAEU,UAAI6P,MACF7P,KAAO,oBACHkQ,IACFlQ,KAAO,MAEPA,KAAO,UAAWwP,GAEpBxP,KAAO,QACPqQ,KAAmB;AAAA,QAE/B;AAAA;AAAA,EAGA;AACE,EAAIR,MACF7P,KAAO,MAAOqQ,IAAmB,MAE/BH,KACEf,KACFnP,KAAO,8CACPA,KAAO,iDAEPA,KAAO,gCACPA,KAAO,iCAETA,KAAO,0BAEPA,KAAO,UAAW+P,IAAU,wBAAyBP,IAAQ;AAG/D,WAASkB,GAAgBD,IAAa;AAEpC,aADI3lE,KAAQ2lE,GAAY,OACf5hE,KAAI,GAAGA,KAAI/D,GAAM,QAAQ+D;AAChC,UAAIsjE,GAAernE,GAAM+D,EAAC,CAAC,EAAG,QAAO;AAAA,EAC3C;AAEE,WAASsjE,GAAeH,IAAO;AAC7B,WAAOhD,EAAG,OAAOgD,GAAM,OAAO,MAAM,UAAcA,GAAM,cAAcK,GAA2BL,EAAK;AAAA,EAC1G;AAEE,WAASK,GAA2BL,IAAO;AAEzC,aADIM,KAAON,GAAM,YACRnjE,KAAI,GAAGA,KAAIyjE,GAAK,QAAQzjE;AAC/B,UAAImgE,EAAG,OAAOsD,GAAKzjE,EAAC,CAAC,MAAM,OAAW,QAAO;AAAA,EACnD;AACE,SAAOmxD;AACT,GC/dI1mB,KAAUrH,IACV+P,KAAOhM,IACPu8B,KAAer8B,IACfs8B,KAAkBt3B,IAElBu3B,KAAoBt3B,IAMpBitB,KAAapmB,GAAK,YAClBojB,KAAQhqB,IAGR+yB,KAAkBoE,GAAa,YAEnCG,KAAiB/F;AAYjB,SAASA,GAAQ1+D,GAAQse,GAAMwhD,GAAWlB,GAAQ;AAGhD,MAAImB,IAAO,MACP3uB,IAAO,KAAK,OACZutB,IAAS,CAAE,MAAS,GACpB+F,IAAO,CAAA,GACPC,IAAW,CAAA,GACXC,IAAe,CAAA,GACfxxD,IAAW,CAAA,GACXyxD,IAAe,CAAA,GACfC,IAAc,CAAA;AAElB,EAAAxmD,IAAOA,KAAQ,EAAE,QAAQte,GAAQ,QAAQ2+D,GAAQ,MAAM+F,EAAI;AAE3D,MAAI5iD,IAAIijD,GAAe,KAAK,MAAM/kE,GAAQse,GAAMsgD,CAAM,GAClDoG,IAAc,KAAK,cAAcljD,EAAE,KAAK;AAC5C,MAAIA,EAAE,UAAW,QAAQkjD,EAAY,eAAeC;AAEpD,MAAIC,IAAU,KAAK,UACfC,IAAQ,KAAK;AAEjB,MAAI;AACF,QAAI/yC,IAAIgzC,EAAaplE,GAAQse,GAAMwhD,GAAWlB,CAAM;AACpD,IAAAoG,EAAY,WAAW5yC;AACvB,QAAIizC,IAAKL,EAAY;AACrB,WAAIK,MACFA,EAAG,SAASjzC,EAAE,QACdizC,EAAG,SAAS,MACZA,EAAG,OAAOjzC,EAAE,MACZizC,EAAG,SAASjzC,EAAE,QACdizC,EAAG,OAAOjzC,EAAE,MACZizC,EAAG,SAASjzC,EAAE,QACVgf,EAAK,eAAYi0B,EAAG,SAASjzC,EAAE,UAE9BA;AAAA,EACX,UAAG;AACC,IAAAkzC,GAAa,KAAK,MAAMtlE,GAAQse,GAAMsgD,CAAM;AAAA,EAChD;AAGE,WAASqG,IAAe;AAEtB,QAAInE,IAAWkE,EAAY,UACvB9pE,IAAS4lE,EAAS,MAAM,MAAM,SAAS;AAC3C,WAAAmE,EAAa,SAASnE,EAAS,QACxB5lE;AAAA,EACX;AAEE,WAASkqE,EAAaG,GAASC,GAAO1F,GAAWlB,IAAQ;AACvD,QAAI6G,KAAS,CAACD,KAAUA,KAASA,EAAM,UAAUD;AACjD,QAAIC,EAAM,UAAUlnD,EAAK;AACvB,aAAOogD,GAAQ,KAAKqB,GAAMwF,GAASC,GAAO1F,GAAWlB,EAAM;AAE7D,QAAIsC,KAASqE,EAAQ,WAAW,IAE5BG,KAAalB,GAAkB;AAAA,MACjC,OAAO;AAAA,MACP,QAAQe;AAAA,MACR,QAAQE;AAAA,MACR,QAAQ7G;AAAA,MACR,MAAM4G;AAAA,MACN,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,WAAW;AAAA,MACX,iBAAiBlB,GAAa;AAAA,MAC9B,OAAOa;AAAA,MACP,UAAUX;AAAA,MACV,MAAMzwB;AAAAA,MACN,SAAS1I;AAAAA,MACT,YAAYs6B;AAAA,MACZ,YAAYC;AAAA,MACZ,YAAYC;AAAA,MACZ,eAAeC;AAAA,MACf,MAAM10B;AAAA,MACN,SAAS8zB;AAAA,MACT,QAAQnF,EAAK;AAAA,MACb,MAAMA;AAAA,IACZ,CAAK;AAED,IAAA2F,KAAahpC,GAAKiiC,GAAQoH,EAAU,IAAIrpC,GAAKioC,GAAUqB,EAAW,IACjDtpC,GAAKtpB,GAAU6yD,EAAW,IAAIvpC,GAAKooC,GAAaoB,EAAc,IAC9DR,IAEbt0B,EAAK,gBAAas0B,KAAat0B,EAAK,YAAYs0B,IAAYH,CAAO;AAEvE,QAAIzE;AACJ,QAAI;AACF,UAAIqF,KAAe,IAAI;AAAA,QACrB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACAT;AAAA,MACR;AAEM,MAAA5E,KAAWqF;AAAA,QACTpG;AAAA,QACAoF;AAAA,QACAD;AAAA,QACA5mD;AAAA,QACAqgD;AAAA,QACAvrD;AAAA,QACA0xD;AAAA,QACA3N;AAAA,QACAgD;AAAA,QACA+F;AAAA,MACR,GAEMvB,EAAO,CAAC,IAAImC;AAAA,IAClB,SAAYhiC,IAAG;AACT,YAAAihC,EAAK,OAAO,MAAM,0CAA0C2F,EAAU,GAChE5mC;AAAA,IACZ;AAEI,WAAAgiC,GAAS,SAASyE,GAClBzE,GAAS,SAAS,MAClBA,GAAS,OAAO4D,GAChB5D,GAAS,SAASnC,GAClBmC,GAAS,OAAO2E,KAAS3E,KAAW0E,GAChCtE,OAAQJ,GAAS,SAAS,KAC1B1vB,EAAK,eAAe,OACtB0vB,GAAS,SAAS;AAAA,MAChB,MAAM4E;AAAA,MACN,UAAUf;AAAA,MACV,UAAUvxD;AAAA,IAClB,IAGW0tD;AAAA,EACX;AAEE,WAAS6E,EAAW/G,GAAQlhE,GAAK+nE,GAAQ;AACvC,IAAA/nE,IAAM2tC,GAAQ,IAAIuzB,GAAQlhE,CAAG;AAC7B,QAAI0oE,KAAW1B,EAAKhnE,CAAG,GACnB2oE,IAASC;AACb,QAAIF,OAAa;AACf,aAAAC,KAAU1H,EAAOyH,EAAQ,GACzBE,KAAU,YAAYF,KAAW,KAC1BG,EAAYF,IAASC,EAAO;AAErC,QAAI,CAACb,KAAUnnD,EAAK,MAAM;AACxB,UAAIkoD,KAAYloD,EAAK,KAAK5gB,CAAG;AAC7B,UAAI8oE,OAAc;AAChB,eAAAH,KAAU/nD,EAAK,OAAOkoD,EAAS,GAC/BF,KAAUG,EAAY/oE,GAAK2oE,EAAO,GAC3BE,EAAYF,IAASC,EAAO;AAAA,IAE3C;AAEI,IAAAA,KAAUG,EAAY/oE,CAAG;AACzB,QAAI00B,KAAIiZ,GAAQ,KAAK00B,GAAMqF,GAAc9mD,GAAM5gB,CAAG;AAClD,QAAI00B,OAAM,QAAW;AACnB,UAAIs0C,KAAc5G,KAAaA,EAAUpiE,CAAG;AAC5C,MAAIgpE,OACFt0C,KAAIiZ,GAAQ,UAAUq7B,IAAat1B,EAAK,UAAU,IAC5Cs1B,KACAhI,GAAQ,KAAKqB,GAAM2G,IAAapoD,GAAMwhD,GAAWlB,CAAM;AAAA,IAErE;AAEI,QAAIxsC,OAAM;AACR,MAAAu0C,EAAejpE,CAAG;AAAA;AAElB,aAAAkpE,EAAgBlpE,GAAK00B,EAAC,GACfm0C,EAAYn0C,IAAGk0C,EAAO;AAAA,EAEnC;AAEE,WAASG,EAAY/oE,GAAK00B,GAAG;AAC3B,QAAIy0C,IAAQlI,EAAO;AACnB,WAAAA,EAAOkI,CAAK,IAAIz0C,GAChBsyC,EAAKhnE,CAAG,IAAImpE,GACL,WAAWA;AAAA,EACtB;AAEE,WAASF,EAAejpE,GAAK;AAC3B,WAAOgnE,EAAKhnE,CAAG;AAAA,EACnB;AAEE,WAASkpE,EAAgBlpE,GAAK00B,GAAG;AAC/B,QAAIy0C,IAAQnC,EAAKhnE,CAAG;AACpB,IAAAihE,EAAOkI,CAAK,IAAIz0C;AAAA,EACpB;AAEE,WAASm0C,EAAY5H,GAAQvjC,GAAM;AACjC,WAAO,OAAOujC,KAAU,YAAY,OAAOA,KAAU,YAC3C,EAAE,MAAMvjC,GAAM,QAAQujC,GAAQ,QAAQ,GAAI,IAC1C,EAAE,MAAMvjC,GAAM,QAAQujC,KAAU,CAAC,CAACA,EAAO,OAAM;AAAA,EAC7D;AAEE,WAASiH,EAAWkB,GAAU;AAC5B,QAAIhuE,IAAQ8rE,EAAakC,CAAQ;AACjC,WAAIhuE,MAAU,WACZA,IAAQ8rE,EAAakC,CAAQ,IAAInC,EAAS,QAC1CA,EAAS7rE,CAAK,IAAIguE,IAEb,YAAYhuE;AAAA,EACvB;AAEE,WAAS+sE,EAAW5qE,GAAO;AACzB,YAAQ,OAAOA,GAAK;AAAA,MAClB,KAAK;AAAA,MACL,KAAK;AACH,eAAO,KAAKA;AAAA,MACd,KAAK;AACH,eAAO84C,GAAK,eAAe94C,CAAK;AAAA,MAClC,KAAK;AACH,YAAIA,MAAU,KAAM,QAAO;AAC3B,YAAI8rE,IAAWxC,GAAgBtpE,CAAK,GAChCnC,IAAQ+rE,EAAakC,CAAQ;AACjC,eAAIjuE,MAAU,WACZA,IAAQ+rE,EAAakC,CAAQ,IAAI3zD,EAAS,QAC1CA,EAASta,CAAK,IAAImC,IAEb,YAAYnC;AAAA,IAC3B;AAAA,EACA;AAEE,WAASgtE,EAAcjlE,GAAMb,GAAQ89D,GAAciD,IAAI;AACrD,QAAIhB,EAAK,MAAM,mBAAmB,IAAO;AACvC,UAAIiH,KAAOnmE,EAAK,WAAW;AAC3B,UAAImmE,MAAQ,CAACA,GAAK,MAAM,SAASC,IAAS;AACxC,eAAO,OAAO,UAAU,eAAe,KAAKnJ,GAAcmJ,EAAO;AAAA,MACzE,CAAO;AACC,cAAM,IAAI,MAAM,oDAAoDD,GAAK,KAAK,GAAG,CAAC;AAEpF,UAAIE,KAAiBrmE,EAAK,WAAW;AACrC,UAAIqmE,IAAgB;AAClB,YAAItsC,KAAQssC,GAAelnE,CAAM;AACjC,YAAI,CAAC46B,IAAO;AACV,cAAIv6B,KAAU,gCAAgC0/D,EAAK,WAAWmH,GAAe,MAAM;AACnF,cAAInH,EAAK,MAAM,kBAAkB,MAAO,CAAAA,EAAK,OAAO,MAAM1/D,EAAO;AAAA,cAC5D,OAAM,IAAI,MAAMA,EAAO;AAAA,QACtC;AAAA,MACA;AAAA,IACA;AAEI,QAAIq+D,KAAU79D,EAAK,WAAW,SAC1BsmE,KAAStmE,EAAK,WAAW,QACzBumE,IAAQvmE,EAAK,WAAW,OAExBigE;AACJ,QAAIpC;AACF,MAAAoC,IAAWpC,GAAQ,KAAKqB,GAAM//D,GAAQ89D,GAAciD,EAAE;AAAA,aAC7CqG;AACT,MAAAtG,IAAWsG,EAAM,KAAKrH,GAAM//D,GAAQ89D,GAAciD,EAAE,GAChD3vB,EAAK,mBAAmB,MAAO2uB,EAAK,eAAee,GAAU,EAAI;AAAA,aAC5DqG;AACT,MAAArG,IAAWqG,GAAO,KAAKpH,GAAMgB,IAAIlgE,EAAK,SAASb,GAAQ89D,CAAY;AAAA,aAEnEgD,IAAWjgE,EAAK,WAAW,UACvB,CAACigE,EAAU;AAGjB,QAAIA,MAAa;AACf,YAAM,IAAI,MAAM,qBAAqBjgE,EAAK,UAAU,oBAAoB;AAE1E,QAAI/H,KAAQgsE,EAAY;AACxB,WAAAA,EAAYhsE,EAAK,IAAIgoE,GAEd;AAAA,MACL,MAAM,eAAehoE;AAAA,MACrB,UAAUgoE;AAAA,IAChB;AAAA,EACA;AACA;AAWA,SAASiE,GAAe/kE,GAAQse,GAAMsgD,GAAQ;AAE5C,MAAI9lE,IAAQuuE,GAAU,KAAK,MAAMrnE,GAAQse,GAAMsgD,CAAM;AACrD,SAAI9lE,KAAS,IAAU,EAAE,OAAOA,GAAO,WAAW,GAAI,KACtDA,IAAQ,KAAK,cAAc,QAC3B,KAAK,cAAcA,CAAK,IAAI;AAAA,IAC1B,QAAQkH;AAAA,IACR,MAAMse;AAAA,IACN,QAAQsgD;AAAA,EACZ,GACS,EAAE,OAAO9lE,GAAO,WAAW,GAAK;AACzC;AAUA,SAASwsE,GAAatlE,GAAQse,GAAMsgD,GAAQ;AAE1C,MAAIh+D,IAAIymE,GAAU,KAAK,MAAMrnE,GAAQse,GAAMsgD,CAAM;AACjD,EAAIh+D,KAAK,KAAG,KAAK,cAAc,OAAOA,GAAG,CAAC;AAC5C;AAWA,SAASymE,GAAUrnE,GAAQse,GAAMsgD,GAAQ;AAEvC,WAASh+D,IAAE,GAAGA,IAAE,KAAK,cAAc,QAAQA,KAAK;AAC9C,QAAIkhB,IAAI,KAAK,cAAclhB,CAAC;AAC5B,QAAIkhB,EAAE,UAAU9hB,KAAU8hB,EAAE,QAAQxD,KAAQwD,EAAE,UAAU88C,EAAQ,QAAOh+D;AAAA,EAC3E;AACE,SAAO;AACT;AAGA,SAASolE,GAAYplE,GAAG+jE,GAAU;AAChC,SAAO,gBAAgB/jE,IAAI,mBAAmBmzC,GAAK,eAAe4wB,EAAS/jE,CAAC,CAAC,IAAI;AACnF;AAGA,SAASqlE,GAAYrlE,GAAG;AACtB,SAAO,gBAAgBA,IAAI,iBAAiBA,IAAI;AAClD;AAGA,SAASmlE,GAAWnlE,GAAG+9D,GAAQ;AAC7B,SAAOA,EAAO/9D,CAAC,MAAM,SAAY,KAAK,eAAeA,IAAI,eAAeA,IAAI;AAC9E;AAGA,SAASslE,GAAetlE,GAAG;AACzB,SAAO,mBAAmBA,IAAI,oBAAoBA,IAAI;AACxD;AAGA,SAAS87B,GAAKjsB,GAAK62D,GAAW;AAC5B,MAAI,CAAC72D,EAAI,OAAQ,QAAO;AAExB,WADI2qB,IAAO,IACFx6B,IAAE,GAAGA,IAAE6P,EAAI,QAAQ7P;AAC1B,IAAAw6B,KAAQksC,EAAU1mE,GAAG6P,CAAG;AAC1B,SAAO2qB;AACT;0BC/XImsC,KAAQC,GAAA,UAAiB,WAAiB;AAC5C,OAAK,SAAS,CAAA;AAChB;AAGAD,GAAM,UAAU,MAAM,SAAmBn8D,GAAKnQ,GAAO;AACnD,OAAK,OAAOmQ,CAAG,IAAInQ;AACrB;AAGAssE,GAAM,UAAU,MAAM,SAAmBn8D,GAAK;AAC5C,SAAO,KAAK,OAAOA,CAAG;AACxB;AAGAm8D,GAAM,UAAU,MAAM,SAAmBn8D,GAAK;AAC5C,SAAO,KAAK,OAAOA,CAAG;AACxB;AAGAm8D,GAAM,UAAU,QAAQ,WAAuB;AAC7C,OAAK,SAAS,CAAA;AAChB;qBCvBIxzB,KAAO/P,IAEPyjC,KAAO,8BACPC,KAAO,CAAC,GAAE,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,EAAE,GAC7CC,KAAO,2DACPC,KAAW,yGACX1J,KAAM,goCACN2J,KAAS,0oCAETC,KAAc,qLAKdC,KAAM,irDACNhO,KAAO,gEACP2C,KAAe,6BACfsL,KAA4B,gEAC5BrL,KAAwB,oDAG5BsL,KAAiB/C;AAEjB,SAASA,GAAQgD,GAAM;AACrB,SAAAA,IAAOA,KAAQ,SAAS,SAAS,QAC1Bn0B,GAAK,KAAKmxB,GAAQgD,CAAI,CAAC;AAChC;AAGAhD,GAAQ,OAAO;AAAA;AAAA,EAEb,MAAM;AAAA;AAAA,EAEN,MAAM;AAAA,EACN,aAAa;AAAA;AAAA,EAEb,KAAK;AAAA,EACL,iBAAiB;AAAA,EACjB,gBAAgB4C;AAAA,EAChB,KAAKC;AAAAA;AAAAA;AAAAA;AAAAA,EAIL,OAAO;AAAA,EACP,UAAUH;AAAA;AAAA,EAEV,MAAM;AAAA;AAAA,EAEN,MAAM;AAAA,EACN,OAAOjmD;AAAA;AAAA,EAEP,MAAMo4C;AAAA;AAAA;AAAA,EAGN,gBAAgB2C;AAAA,EAChB,6BAA6BsL;AAAA;AAAA,EAE7B,yBAAyBrL;AAC3B;AAGAuI,GAAQ,OAAO;AAAA,EACb,MAAMiD;AAAA,EACN,MAAM51D;AAAA,EACN,aAAa61D;AAAA,EACb,KAAKlR;AAAA,EACL,iBAAiB2Q;AAAA,EACjB,gBAAgBC;AAAA,EAChB,KAAKC;AAAAA,EACL,OAAO;AAAA,EACP,UAAUH;AAAA,EACV,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAOjmD;AAAA,EACP,MAAMo4C;AAAA,EACN,gBAAgB2C;AAAA,EAChB,6BAA6BsL;AAAA,EAC7B,yBAAyBrL;AAC3B;AAGA,SAAS0L,GAAWC,GAAM;AAExB,SAAOA,IAAO,MAAM,MAAMA,IAAO,QAAQ,KAAKA,IAAO,QAAQ;AAC/D;AAGA,SAASH,GAAK/pD,GAAK;AAEjB,MAAIzR,IAAUyR,EAAI,MAAMqpD,EAAI;AAC5B,MAAI,CAAC96D,EAAS,QAAO;AAErB,MAAI27D,IAAO,CAAC37D,EAAQ,CAAC,GACjB47D,IAAQ,CAAC57D,EAAQ,CAAC,GAClB67D,IAAM,CAAC77D,EAAQ,CAAC;AAEpB,SAAO47D,KAAS,KAAKA,KAAS,MAAMC,KAAO,KACnCA,MAAQD,KAAS,KAAKF,GAAWC,CAAI,IAAI,KAAKZ,GAAKa,CAAK;AAClE;AAGA,SAASh2D,GAAK6L,GAAKqqD,GAAM;AACvB,MAAI97D,IAAUyR,EAAI,MAAMupD,EAAI;AAC5B,MAAI,CAACh7D,EAAS,QAAO;AAErB,MAAI+7D,IAAO/7D,EAAQ,CAAC,GAChBg8D,IAASh8D,EAAQ,CAAC,GAClBkoC,IAASloC,EAAQ,CAAC,GAClBi8D,IAAWj8D,EAAQ,CAAC;AACxB,UAAS+7D,KAAQ,MAAMC,KAAU,MAAM9zB,KAAU,MACxC6zB,KAAQ,MAAMC,KAAU,MAAM9zB,KAAU,QACzC,CAAC4zB,KAAQG;AACnB;AAGA,IAAIC,KAAsB;AAC1B,SAAST,GAAUhqD,GAAK;AAEtB,MAAI0qD,IAAW1qD,EAAI,MAAMyqD,EAAmB;AAC5C,SAAOC,EAAS,UAAU,KAAKX,GAAKW,EAAS,CAAC,CAAC,KAAKv2D,GAAKu2D,EAAS,CAAC,GAAG,EAAI;AAC5E;AAGA,IAAIC,KAAmB;AACvB,SAAS7R,GAAI94C,GAAK;AAEhB,SAAO2qD,GAAiB,KAAK3qD,CAAG,KAAK8/C,GAAI,KAAK9/C,CAAG;AACnD;AAGA,IAAI4qD,KAAW;AACf,SAASrnD,GAAMvD,GAAK;AAClB,MAAI4qD,GAAS,KAAK5qD,CAAG,EAAG,QAAO;AAC/B,MAAI;AACF,eAAI,OAAOA,CAAG,GACP;AAAA,EACX,QAAa;AACT,WAAO;AAAA,EACX;AACA;IC5IA1gB,KAAiB,SAAsBqjE,GAAIC,GAAUC,GAAW;AAC9D,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBL,GAAQ+H;AACZ,MAAIxH,KAAW,OAAOA,KAAW;AAC/B,IAAIV,EAAG,UACLG,IAASH,EAAG,OACZkI,IAAW,eAEX/H,IAASH,EAAG,KAAK,OAAO,WAAW,IACnCkI,IAAW;AAAA,OAER;AACL,QAAIC,IAAUnI,EAAG,WAAWA,EAAG,QAAQU,GAASV,EAAG,MAAM;AACzD,QAAImI,MAAY,QAAW;AACzB,UAAIC,IAAWpI,EAAG,gBAAgB,QAAQA,EAAG,QAAQU,CAAO;AAC5D,UAAIV,EAAG,KAAK,eAAe,QAAQ;AACjC,QAAAA,EAAG,OAAO,MAAMoI,CAAQ;AACxB,YAAIpH,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,uDAAwEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,wBAA0BZ,EAAG,KAAK,aAAaU,CAAO,IAAK,QACrNV,EAAG,KAAK,aAAa,OACvBhP,KAAO,4CAA+CgP,EAAG,KAAK,aAAaU,CAAO,IAAK,OAErFV,EAAG,KAAK,YACVhP,KAAO,gBAAiBgP,EAAG,KAAK,eAAeU,CAAO,IAAK,qCAAsCV,EAAG,aAAc,cAAel7C,IAAS,MAE5IksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,IAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAE/BJ,MACF7P,KAAO;AAAA,MAEjB,WAAiBgP,EAAG,KAAK,eAAe;AAChC,QAAAA,EAAG,OAAO,KAAKoI,CAAQ,GACnBvH,MACF7P,KAAO;AAAA;AAGT,cAAM,IAAIgP,EAAG,gBAAgBA,EAAG,QAAQU,GAAS0H,CAAQ;AAAA,IAEjE,WAAeD,EAAQ,QAAQ;AACzB,UAAIE,IAAMrI,EAAG,KAAK,KAAKA,CAAE;AACzB,MAAAqI,EAAI;AACJ,UAAIC,IAAa,UAAUD,EAAI;AAC/B,MAAAA,EAAI,SAASF,EAAQ,QACrBE,EAAI,aAAa,IACjBA,EAAI,gBAAgB3H;AACpB,UAAI0C,IAAQpD,EAAG,SAASqI,CAAG,EAAE,QAAQ,qBAAqBF,EAAQ,IAAI;AACtE,MAAAnX,KAAO,MAAOoS,IAAS,KACnBvC,MACF7P,KAAO,UAAWsX,IAAc;AAAA,IAExC;AACM,MAAAnI,IAASgI,EAAQ,WAAW,MAASnI,EAAG,SAASmI,EAAQ,WAAW,IACpED,IAAWC,EAAQ;AAAA,EAEzB;AACE,MAAID,GAAU;AACZ,QAAIlH,IAAaA,KAAc,CAAA;AAC/B,IAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,KAAK,cACVhP,KAAO,MAAOkX,IAAY,iBAE1BlX,KAAO,MAAOkX,IAAY,MAE5BlX,KAAO,MAAOlsC,IAAS,sBACnBk7C,EAAG,aAAa,SAClBhP,KAAO,QAASgP,EAAG;AAErB,QAAIkC,IAAczB,IAAW,UAAWA,IAAW,KAAM,MAAM,cAC7D0B,IAAsB1B,IAAWT,EAAG,YAAYS,CAAQ,IAAI;AAC9D,IAAAzP,KAAO,QAASkR,IAAe,QAASC,IAAuB;AAC/D,QAAIoG,IAAiBvX;AAErB,QADAA,IAAMgQ,EAAW,IAAG,GAChBb,GAAQ;AACV,UAAI,CAACH,EAAG,MAAO,OAAM,IAAI,MAAM,wCAAwC;AACvE,MAAIa,MACF7P,KAAO,UAAW+P,IAAU,OAE9B/P,KAAO,kBAAmBuX,IAAkB,MACxC1H,MACF7P,KAAO,MAAO+P,IAAU,cAE1B/P,KAAO,6KACH6P,MACF7P,KAAO,MAAO+P,IAAU,eAE1B/P,KAAO,OACH6P,MACF7P,KAAO,UAAW+P,IAAU;AAAA,IAEpC;AACM,MAAA/P,KAAO,WAAYuX,IAAkB,yCAA0CL,IAAY,4CAA6CA,IAAY,yCAChJrH,MACF7P,KAAO;AAAA,EAGf;AACE,SAAOA;AACT,GC1HAwX,KAAiB,SAAwBxI,GAAIC,GAAUC,GAAW;AAChE,MAAIlP,IAAM,KACN0P,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBqI,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BK,IAAiBL,EAAI,QACvBM,IAAmB,IACjB7G,IAAOpB;AACX,MAAIoB;AAGF,aAFIa,GAAMX,IAAK,IACbC,IAAKH,EAAK,SAAS,GACdE,IAAKC;AACV,MAAAU,IAAOb,EAAKE,KAAM,CAAC,IACdhC,EAAG,KAAK,iBAAkB,OAAO2C,KAAQ,YAAY,OAAO,KAAKA,CAAI,EAAE,SAAS,KAAMA,MAAS,KAAQ3C,EAAG,KAAK,eAAe2C,GAAM3C,EAAG,MAAM,GAAG,OACnJ2I,IAAmB,IACnBN,EAAI,SAAS1F,GACb0F,EAAI,aAAa1H,IAAc,MAAMqB,IAAK,KAC1CqG,EAAI,gBAAgBzH,IAAiB,MAAMoB,GAC3ChR,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,GACT7H,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAK1B,SAAI5H,MACE8H,IACF3X,KAAO,kBAEPA,KAAO,MAAOyX,EAAe,MAAM,GAAG,EAAE,IAAK,MAG1CzX;AACT,GCxCA4X,KAAiB,SAAwB5I,GAAIC,GAAUC,GAAW;AAChE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BS,IAAiBpI,EAAQ,MAAM,SAASiC,GAAM;AAChD,WAAQ3C,EAAG,KAAK,iBAAkB,OAAO2C,KAAQ,YAAY,OAAO,KAAKA,CAAI,EAAE,SAAS,KAAMA,MAAS,KAAQ3C,EAAG,KAAK,eAAe2C,GAAM3C,EAAG,MAAM,GAAG;AAAA,EAC5J,CAAG;AACD,MAAI8I,GAAgB;AAClB,QAAIJ,IAAiBL,EAAI;AACzB,IAAArX,KAAO,UAAW6X,IAAS,oBAAqB9H,IAAU;AAC1D,QAAIgI,IAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB;AACvC,QAAIvG,IAAOpB;AACX,QAAIoB;AAGF,eAFIa,GAAMX,IAAK,IACbC,IAAKH,EAAK,SAAS,GACdE,IAAKC;AACV,QAAAU,IAAOb,EAAKE,KAAM,CAAC,GACnBqG,EAAI,SAAS1F,GACb0F,EAAI,aAAa1H,IAAc,MAAMqB,IAAK,KAC1CqG,EAAI,gBAAgBzH,IAAiB,MAAMoB,GAC3ChR,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,GACb1X,KAAO,MAAO+P,IAAU,QAASA,IAAU,SAAUuH,IAAc,YAAavH,IAAU,QAC1F0H,KAAkB;AAGtB,IAAAzI,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACvC/X,KAAO,MAAOyX,IAAkB,WAAY1H,IAAU,sBAClDf,EAAG,iBAAiB,MACtBhP,KAAO,wDAAyEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBAC3JZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,qDAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH,CAACgP,EAAG,iBAAiBa,MAEnBb,EAAG,QACLhP,KAAO,0CAEPA,KAAO,+CAGXA,KAAO,yBAA0B6X,IAAS,mCAAoCA,IAAS,wBAAyBA,IAAS,6BACrH7I,EAAG,KAAK,cACVhP,KAAO;AAAA,EAEb;AACI,IAAI6P,MACF7P,KAAO;AAGX,SAAOA;AACT,GCvEAgY,KAAiB,SAA0BhJ,GAAIC,GAAUC,GAAW;AAClE,MAAIlP,IAAM,KACN0P,IAAUV,EAAG,OAAOC,CAAQ,GAC5BW,IAAiBZ,EAAG,gBAAgB,MAAMC;AAC1B,EAACD,EAAG,KAAK;AAC7B,MAAIiJ,IAAWjJ,EAAG,KAAK,eAAeU,CAAO;AAC7C,SAAIV,EAAG,KAAK,aAAa,KACvBhP,KAAO,kBAAmBiY,IAAY,OAC7B,OAAOjJ,EAAG,KAAK,YAAY,eACpChP,KAAO,0BAA2BiY,IAAY,OAAQjJ,EAAG,KAAK,eAAeY,CAAc,IAAK,6BAE3F5P;AACT,GCZAkY,KAAiB,SAAwBlJ,GAAIC,GAAUC,GAAW;AAChE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnB2I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ;AAElD,EAAIyI,MACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,OAKlGmJ,MACHnY,KAAO,gBAAiBwP,IAAQ,uBAAwBG,IAAe,MAEzE3P,KAAO,SAAU+P,IAAU,cAAej8C,IAAS,aAAc07C,IAAQ,aAAcO,IAAU;AACjG,MAAIC,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,wDAAyEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,sCAAuCJ,IAAQ,OAC1MR,EAAG,KAAK,aAAa,OACvBhP,KAAO,+CAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GCtDAoY,KAAiB,SAA2BpJ,GAAIC,GAAUC,GAAW;AACnE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BgB,IAAO,MAAM7I,GACf8I,IAAWjB,EAAI,YAAYrI,EAAG,YAAY,GAC1CuJ,IAAY,SAASD,GACrBZ,IAAiB1I,EAAG,QACpBwJ,IAAmBxJ,EAAG,KAAK,iBAAkB,OAAOU,KAAW,YAAY,OAAO,KAAKA,CAAO,EAAE,SAAS,KAAMA,MAAY,KAAQV,EAAG,KAAK,eAAeU,GAASV,EAAG,MAAM,GAAG;AAEjL,MADAhP,KAAO,SAAU6X,IAAS,mBAAoB9H,IAAU,KACpDyI,GAAiB;AACnB,QAAIT,IAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB,IACvCA,EAAI,SAAS3H,GACb2H,EAAI,aAAa1H,GACjB0H,EAAI,gBAAgBzH,GACpB5P,KAAO,UAAWsX,IAAc,wBAAyBe,IAAQ,WAAYA,IAAQ,QAASvkD,IAAS,cAAeukD,IAAQ,UAC9HhB,EAAI,YAAYrI,EAAG,KAAK,YAAYA,EAAG,WAAWqJ,GAAMrJ,EAAG,KAAK,cAAc,EAAI;AAClF,QAAI4C,IAAY99C,IAAQ,MAAMukD,IAAO;AACrC,IAAAhB,EAAI,YAAYiB,CAAQ,IAAID;AAC5B,QAAIjG,IAAQpD,EAAG,SAASqI,CAAG;AAC3B,IAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,GAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,GAAOmG,GAAW3G,CAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,IAAa,OAAQQ,IAAS,KAExEpS,KAAO,UAAWsX,IAAc,gBAChCtI,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACvC/X,KAAO,MAAOyX,IAAkB,WAAYH,IAAc;AAAA,EAC9D;AACI,IAAAtX,KAAO,UAAWlsC,IAAS;AAE7B,MAAIk8C,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBAC9JZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,+CAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,cACHwY,MACFxY,KAAO,gBAAiB6X,IAAS,mCAAoCA,IAAS,wBAAyBA,IAAS,8BAE9G7I,EAAG,KAAK,cACVhP,KAAO,QAEFA;AACT,GC/EAyY,KAAiB,SAA+BzJ,GAAIC,GAAUC,GAAW;AACvE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BoI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BqB,IAAc,CAAA,GAChBC,IAAgB,CAAA,GAChBC,IAAiB5J,EAAG,KAAK;AAC3B,OAAK6J,KAAanJ;AAChB,QAAImJ,KAAa,aACjB;AAAA,UAAIlH,IAAOjC,EAAQmJ,CAAS,GACxBC,IAAQ,MAAM,QAAQnH,CAAI,IAAIgH,IAAgBD;AAClD,MAAAI,EAAMD,CAAS,IAAIlH;AAAA;AAErB,EAAA3R,KAAO,SAAU6X,IAAS;AAC1B,MAAIkB,IAAoB/J,EAAG;AAC3B,EAAAhP,KAAO,gBAAiBwP,IAAQ;AAChC,WAASqJ,KAAaF;AAEpB,QADAG,IAAQH,EAAcE,CAAS,GAC3BC,EAAM,QAAQ;AAKhB,UAJA9Y,KAAO,WAAYlsC,IAAUk7C,EAAG,KAAK,YAAY6J,CAAS,IAAK,mBAC3DD,MACF5Y,KAAO,8CAA+ClsC,IAAS,QAAUk7C,EAAG,KAAK,aAAa6J,CAAS,IAAK,QAE1GhJ,GAAe;AACjB,QAAA7P,KAAO;AACP,YAAI8Q,IAAOgI;AACX,YAAIhI;AAGF,mBAFIU,GAAcR,IAAK,IACrBC,IAAKH,EAAK,SAAS,GACdE,IAAKC,KAAI;AACd,YAAAO,IAAeV,EAAKE,KAAM,CAAC,GACvBA,MACFhR,KAAO;AAET,gBAAIgZ,IAAQhK,EAAG,KAAK,YAAYwC,CAAY,GAC1CyH,IAAWnlD,IAAQklD;AACrB,YAAAhZ,KAAO,UAAWiZ,IAAY,mBAC1BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,CAAY,IAAK,QAEnHxR,KAAO,kBAAmBwP,IAAQ,QAASR,EAAG,KAAK,eAAeA,EAAG,KAAK,eAAewC,IAAewH,CAAK,IAAK;AAAA,UAC9H;AAEQ,QAAAhZ,KAAO;AACP,YAAIkZ,IAAgB,YAAY1J,GAC9B2J,IAAmB,SAAUD,IAAgB;AAC/C,QAAIlK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,eAAeA,EAAG,KAAK,YAAY+J,GAAmBG,GAAe,EAAI,IAAIH,IAAoB,QAAQG;AAElI,YAAIlJ,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,+DAAgFgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,6BAA+BZ,EAAG,KAAK,aAAa6J,CAAS,IAAK,0BAA6BM,IAAoB,mBAAqBL,EAAM,SAAU,cAAgB9J,EAAG,KAAK,aAAa8J,EAAM,UAAU,IAAIA,EAAM,CAAC,IAAIA,EAAM,KAAK,IAAI,CAAC,IAAK,QACnZ9J,EAAG,KAAK,aAAa,OACvBhP,KAAO,6BACH8Y,EAAM,UAAU,IAClB9Y,KAAO,cAAegP,EAAG,KAAK,aAAa8J,EAAM,CAAC,CAAC,IAEnD9Y,KAAO,gBAAiBgP,EAAG,KAAK,aAAa8J,EAAM,KAAK,IAAI,CAAC,GAE/D9Y,KAAO,oBAAqBgP,EAAG,KAAK,aAAa6J,CAAS,IAAK,kBAE7D7J,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,KAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,KAAS,SAElDjQ,KAAO,yBAA0BiQ,KAAS,sBAG5CjQ,KAAO,gBAAiBiQ,KAAS;AAAA,MAE3C,OAAa;AACL,QAAAjQ,KAAO;AACP,YAAI3C,KAAOyb;AACX,YAAIzb;AAGF,mBAFImU,GAAcJ,KAAK,IACrBC,KAAKhU,GAAK,SAAS,GACd+T,KAAKC,MAAI;AACd,YAAAG,IAAenU,GAAK+T,MAAM,CAAC;AAC3B,gBAAI4H,IAAQhK,EAAG,KAAK,YAAYwC,CAAY,GAC1C2H,IAAmBnK,EAAG,KAAK,aAAawC,CAAY,GACpDyH,IAAWnlD,IAAQklD;AACrB,YAAIhK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,QAAQ+J,GAAmBvH,GAAcxC,EAAG,KAAK,YAAY,IAEtFhP,KAAO,WAAYiZ,IAAY,mBAC3BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,CAAY,IAAK,QAEnHxR,KAAO,qBACHgP,EAAG,iBAAiB,MACtBhP,KAAO,+DAAgFgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,6BAA+BZ,EAAG,KAAK,aAAa6J,CAAS,IAAK,0BAA6BM,IAAoB,mBAAqBL,EAAM,SAAU,cAAgB9J,EAAG,KAAK,aAAa8J,EAAM,UAAU,IAAIA,EAAM,CAAC,IAAIA,EAAM,KAAK,IAAI,CAAC,IAAK,QACnZ9J,EAAG,KAAK,aAAa,OACvBhP,KAAO,6BACH8Y,EAAM,UAAU,IAClB9Y,KAAO,cAAegP,EAAG,KAAK,aAAa8J,EAAM,CAAC,CAAC,IAEnD9Y,KAAO,gBAAiBgP,EAAG,KAAK,aAAa8J,EAAM,KAAK,IAAI,CAAC,GAE/D9Y,KAAO,oBAAqBgP,EAAG,KAAK,aAAa6J,CAAS,IAAK,kBAE7D7J,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO;AAAA,UACnB;AAAA,MAEA;AACM,MAAAA,KAAO,SACH6P,MACF4H,KAAkB,KAClBzX,KAAO;AAAA,IAEf;AAEE,EAAAgP,EAAG,YAAY+J;AACf,MAAIrB,KAAiBL,EAAI;AACzB,WAASwB,KAAaH,GAAa;AACjC,QAAI/G,IAAO+G,EAAYG,CAAS;AAChC,KAAK7J,EAAG,KAAK,iBAAkB,OAAO2C,KAAQ,YAAY,OAAO,KAAKA,CAAI,EAAE,SAAS,KAAMA,MAAS,KAAQ3C,EAAG,KAAK,eAAe2C,GAAM3C,EAAG,MAAM,GAAG,OACnJhP,KAAO,MAAOsX,IAAc,mBAAoBxjD,IAAUk7C,EAAG,KAAK,YAAY6J,CAAS,IAAK,mBACxFD,MACF5Y,KAAO,8CAA+ClsC,IAAS,QAAUk7C,EAAG,KAAK,aAAa6J,CAAS,IAAK,QAE9G7Y,KAAO,QACPqX,EAAI,SAAS1F,GACb0F,EAAI,aAAa1H,IAAcX,EAAG,KAAK,YAAY6J,CAAS,GAC5DxB,EAAI,gBAAgBzH,IAAiB,MAAMZ,EAAG,KAAK,eAAe6J,CAAS,GAC3E7Y,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,IACb1X,KAAO,QACH6P,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,EAG1B;AACE,SAAI5H,MACF7P,KAAO,QAASyX,IAAkB,UAAWI,IAAS,kBAEjD7X;AACT,GCtKAoZ,KAAiB,SAAuBpK,GAAIC,GAAUC,GAAW;AAC/D,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnB2I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ;AAElD,EAAIyI,MACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK;AAKvG,MAAIgC,IAAK,MAAMxB,GACb6J,IAAW,WAAW7J;AACxB,EAAK2I,MACHnY,KAAO,UAAWqZ,IAAY,uBAAwB1J,IAAe,MAEvE3P,KAAO,SAAU+P,IAAU,KACvBoI,MACFnY,KAAO,gBAAiBwP,IAAQ,qBAAsBO,IAAU,4CAA6CP,IAAQ,QAASO,IAAU,qBAE1I/P,KAAO,KAAM+P,IAAU,uBAAwBiB,IAAM,SAAUA,IAAM,MAAOqI,IAAY,cAAerI,IAAM,mBAAoBl9C,IAAS,OAAQulD,IAAY,MAAOrI,IAAM,WAAYjB,IAAU,qBAC7LoI,MACFnY,KAAO,UAETA,KAAO,WAAY+P,IAAU;AAC7B,MAAIC,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,uDAAwEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,uCAAwCJ,IAAQ,OAC1MR,EAAG,KAAK,aAAa,OACvBhP,KAAO,gEAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GChEA/9B,KAAiB,SAAyB+sC,GAAIC,GAAUC,GAAW;AACjE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY;AAClC,MAAIT,EAAG,KAAK,WAAW;AACrB,WAAIa,MACF7P,KAAO,kBAEFA;AAET,MAAImY,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AACF,EAAInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J;AAEjB,MAAI6J,IAAkBvK,EAAG,KAAK,gBAC5BwK,IAAgB,MAAM,QAAQD,CAAe;AAC/C,MAAIpB,GAAS;AACX,QAAIsB,IAAU,WAAWjK,GACvBkK,IAAY,aAAalK,GACzBmK,IAAc,eAAenK;AAC/B,IAAAxP,KAAO,UAAWyZ,IAAW,gBAAiBH,IAAgB,YAAaI,IAAa,eAAgBD,IAAW,uBAA0BA,IAAW,4BAA6BA,IAAW,oBAAqBE,IAAe,QAASD,IAAa,SAAUD,IAAW,4BAA+BC,IAAa,QACvT1K,EAAG,UACLhP,KAAO,eAAgBwP,IAAQ,QAASiK,IAAW,aAErDzZ,KAAO,MAAOyZ,IAAW,QAASA,IAAW,uBACzCtB,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,MACHuZ,KAAmB,aACrBvZ,KAAO,OAAQsZ,IAAgB,UAAWG,IAAW,KACjDD,MACFxZ,KAAO,2CAA4CsZ,IAAgB,aAErEtZ,KAAO,UAETA,KAAO,OAAQyZ,IAAW,SAAUE,IAAe,UAAYzK,IAAa,mBAAqBuK,IAAW,qBACxGzK,EAAG,QACLhP,KAAO,YAAawP,IAAQ,cAAeiK,IAAW,MAAO3lD,IAAS,SAAU2lD,IAAW,MAAO3lD,IAAS,QAE3GksC,KAAO,MAAOyZ,IAAW,MAAO3lD,IAAS,MAE3CksC,KAAO,QAASyZ,IAAW,WAAY3lD,IAAS;AAAA,EACpD,OAAS;AACL,QAAI2lD,IAAUzK,EAAG,QAAQU,CAAO;AAChC,QAAI,CAAC+J,GAAS;AACZ,UAAIF,KAAmB;AACrB,eAAAvK,EAAG,OAAO,KAAK,qBAAqBU,IAAU,kCAAkCV,EAAG,gBAAgB,GAAG,GAClGa,MACF7P,KAAO,kBAEFA;AACF,UAAIwZ,KAAiBD,EAAgB,QAAQ7J,CAAO,KAAK;AAC9D,eAAIG,MACF7P,KAAO,kBAEFA;AAEP,YAAM,IAAI,MAAM,qBAAqB0P,IAAU,kCAAkCV,EAAG,gBAAgB,GAAG;AAAA,IAE/G;AACI,QAAI0K,IAAY,OAAOD,KAAW,YAAY,EAAEA,aAAmB,WAAWA,EAAQ,UAClFE,IAAcD,KAAaD,EAAQ,QAAQ;AAC/C,QAAIC,GAAW;AACb,UAAIvK,IAASsK,EAAQ,UAAU;AAC/B,MAAAA,IAAUA,EAAQ;AAAA,IACxB;AACI,QAAIE,KAAezK;AACjB,aAAIW,MACF7P,KAAO,kBAEFA;AAET,QAAImP,GAAQ;AACV,UAAI,CAACH,EAAG,MAAO,OAAM,IAAI,MAAM,6BAA6B;AAC5D,UAAI4K,IAAa,YAAY5K,EAAG,KAAK,YAAYU,CAAO,IAAI;AAC5D,MAAA1P,KAAO,kBAAmB4Z,IAAc,MAAO9lD,IAAS;AAAA,IAC9D,OAAW;AACL,MAAAksC,KAAO;AACP,UAAI4Z,IAAa,YAAY5K,EAAG,KAAK,YAAYU,CAAO;AACxD,MAAIgK,MAAWE,KAAc,cACzB,OAAOH,KAAW,aACpBzZ,KAAO,MAAO4Z,IAAc,MAAO9lD,IAAS,OAE5CksC,KAAO,MAAO4Z,IAAc,WAAY9lD,IAAS,MAEnDksC,KAAO;AAAA,IACb;AAAA,EACA;AACE,MAAIgQ,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,yDAA0EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,0BAC5JuI,IACFnY,KAAO,KAAMsZ,IAEbtZ,KAAO,KAAMgP,EAAG,KAAK,eAAeU,CAAO,GAE7C1P,KAAO,QACHgP,EAAG,KAAK,aAAa,OACvBhP,KAAO,sCACHmY,IACFnY,KAAO,SAAWsZ,IAAgB,SAElCtZ,KAAO,KAAMgP,EAAG,KAAK,aAAaU,CAAO,GAE3C1P,KAAO,QAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAMgP,EAAG,KAAK,eAAeU,CAAO,GAE7C1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,OACH6P,MACF7P,KAAO,aAEFA;AACT,GCpJA6Z,KAAiB,SAAqB7K,GAAIC,GAAUC,GAAW;AAC7D,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE;AACzB,EAAAqI,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3ByC,IAAW9K,EAAG,OAAO,MACvB+K,IAAW/K,EAAG,OAAO,MACrBgL,IAAeF,MAAa,WAAc9K,EAAG,KAAK,iBAAkB,OAAO8K,KAAY,YAAY,OAAO,KAAKA,CAAQ,EAAE,SAAS,KAAMA,MAAa,KAAQ9K,EAAG,KAAK,eAAe8K,GAAU9K,EAAG,MAAM,GAAG,IAC1MiL,IAAeF,MAAa,WAAc/K,EAAG,KAAK,iBAAkB,OAAO+K,KAAY,YAAY,OAAO,KAAKA,CAAQ,EAAE,SAAS,KAAMA,MAAa,KAAQ/K,EAAG,KAAK,eAAe+K,GAAU/K,EAAG,MAAM,GAAG,IAC1M0I,IAAiBL,EAAI;AACvB,MAAI2C,KAAgBC,GAAc;AAChC,QAAIC;AACJ,IAAA7C,EAAI,eAAe,IACnBA,EAAI,SAAS3H,GACb2H,EAAI,aAAa1H,GACjB0H,EAAI,gBAAgBzH,GACpB5P,KAAO,UAAW6X,IAAS,oBAAqB9H,IAAU;AAC1D,QAAIgI,IAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB,IACvCrX,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,GACbL,EAAI,eAAe,IACnBrX,KAAO,gBAAiB6X,IAAS,mCAAoCA,IAAS,wBAAyBA,IAAS,8BAChH7I,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACnCiC,KACFha,KAAO,UAAWsX,IAAc,SAChCD,EAAI,SAASrI,EAAG,OAAO,MACvBqI,EAAI,aAAarI,EAAG,aAAa,SACjCqI,EAAI,gBAAgBrI,EAAG,gBAAgB,SACvChP,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,GACb1X,KAAO,MAAO+P,IAAU,QAASuH,IAAc,MAC3C0C,KAAgBC,KAClBC,IAAY,aAAa1K,GACzBxP,KAAO,UAAWka,IAAa,iBAE/BA,IAAY,UAEdla,KAAO,OACHia,MACFja,KAAO,eAGTA,KAAO,WAAYsX,IAAc,QAE/B2C,MACF5C,EAAI,SAASrI,EAAG,OAAO,MACvBqI,EAAI,aAAarI,EAAG,aAAa,SACjCqI,EAAI,gBAAgBrI,EAAG,gBAAgB,SACvChP,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,GACb1X,KAAO,MAAO+P,IAAU,QAASuH,IAAc,MAC3C0C,KAAgBC,KAClBC,IAAY,aAAa1K,GACzBxP,KAAO,UAAWka,IAAa,iBAE/BA,IAAY,UAEdla,KAAO,QAETA,KAAO,WAAY+P,IAAU,sBACzBf,EAAG,iBAAiB,MACtBhP,KAAO,qDAAsEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kCAAmCsK,IAAa,OACxMlL,EAAG,KAAK,aAAa,OACvBhP,KAAO,oCAAuCka,IAAa,mBAEzDlL,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH,CAACgP,EAAG,iBAAiBa,MAEnBb,EAAG,QACLhP,KAAO,0CAEPA,KAAO,+CAGXA,KAAO,SACH6P,MACF7P,KAAO;AAAA,EAEb;AACI,IAAI6P,MACF7P,KAAO;AAGX,SAAOA;AACT,GCrGA50C,KAAiB,SAAwB4jD,GAAIC,GAAUC,GAAW;AAChE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BgB,IAAO,MAAM7I,GACf8I,IAAWjB,EAAI,YAAYrI,EAAG,YAAY,GAC1CuJ,IAAY,SAASD,GACrBZ,IAAiB1I,EAAG;AAEtB,MADAhP,KAAO,SAAU6X,IAAS,mBAAoB9H,IAAU,KACpD,MAAM,QAAQL,CAAO,GAAG;AAC1B,QAAIyK,IAAmBnL,EAAG,OAAO;AACjC,QAAImL,MAAqB,IAAO;AAC9B,MAAAna,KAAO,MAAO+P,IAAU,QAASj8C,IAAS,gBAAiB47C,EAAQ,SAAU;AAC7E,UAAI0K,IAAqBxK;AACzB,MAAAA,IAAiBZ,EAAG,gBAAgB,oBACpChP,KAAO,YAAa+P,IAAU;AAC9B,UAAIC,IAAaA,KAAc,CAAA;AAC/B,MAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,kEAAmFgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,yBAA0BF,EAAQ,SAAU,OACjNV,EAAG,KAAK,aAAa,OACvBhP,KAAO,4CAA8C0P,EAAQ,SAAU,aAErEV,EAAG,KAAK,YACVhP,KAAO,qDAAsDgP,EAAG,aAAc,cAAel7C,IAAS,MAExGksC,KAAO,SAEPA,KAAO;AAET,UAAIiQ,IAAQjQ;AACZ,MAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,OACP4P,IAAiBwK,GACbvK,MACF4H,KAAkB,KAClBzX,KAAO;AAAA,IAEf;AACI,QAAI8Q,IAAOpB;AACX,QAAIoB;AAGF,eAFIa,GAAMX,IAAK,IACbC,IAAKH,EAAK,SAAS,GACdE,IAAKC;AAEV,YADAU,IAAOb,EAAKE,KAAM,CAAC,GACdhC,EAAG,KAAK,iBAAkB,OAAO2C,KAAQ,YAAY,OAAO,KAAKA,CAAI,EAAE,SAAS,KAAMA,MAAS,KAAQ3C,EAAG,KAAK,eAAe2C,GAAM3C,EAAG,MAAM,GAAG,GAAI;AACvJ,UAAAhP,KAAO,MAAOsX,IAAc,kBAAmBxjD,IAAS,eAAgBk9C,IAAM;AAC9E,cAAIY,IAAY99C,IAAQ,MAAMk9C,IAAK;AACnC,UAAAqG,EAAI,SAAS1F,GACb0F,EAAI,aAAa1H,IAAc,MAAMqB,IAAK,KAC1CqG,EAAI,gBAAgBzH,IAAiB,MAAMoB,GAC3CqG,EAAI,YAAYrI,EAAG,KAAK,YAAYA,EAAG,WAAWgC,GAAIhC,EAAG,KAAK,cAAc,EAAI,GAChFqI,EAAI,YAAYiB,CAAQ,IAAItH;AAC5B,cAAIoB,IAAQpD,EAAG,SAASqI,CAAG;AAC3B,UAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,GAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,GAAOmG,GAAW3G,CAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,IAAa,OAAQQ,IAAS,KAExEpS,KAAO,QACH6P,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,QAE9B;AAAA;AAGI,QAAI,OAAO0C,KAAoB,aAAanL,EAAG,KAAK,iBAAkB,OAAOmL,KAAoB,YAAY,OAAO,KAAKA,CAAgB,EAAE,SAAS,KAAMA,MAAqB,KAAQnL,EAAG,KAAK,eAAemL,GAAkBnL,EAAG,MAAM,GAAG,IAAI;AAC9O,MAAAqI,EAAI,SAAS8C,GACb9C,EAAI,aAAarI,EAAG,aAAa,oBACjCqI,EAAI,gBAAgBrI,EAAG,gBAAgB,oBACvChP,KAAO,MAAOsX,IAAc,kBAAmBxjD,IAAS,eAAgB47C,EAAQ,SAAU,mBAAoB2I,IAAQ,QAAS3I,EAAQ,SAAU,OAAQ2I,IAAQ,QAASvkD,IAAS,cAAeukD,IAAQ,UAC1MhB,EAAI,YAAYrI,EAAG,KAAK,YAAYA,EAAG,WAAWqJ,GAAMrJ,EAAG,KAAK,cAAc,EAAI;AAClF,UAAI4C,IAAY99C,IAAQ,MAAMukD,IAAO;AACrC,MAAAhB,EAAI,YAAYiB,CAAQ,IAAID;AAC5B,UAAIjG,IAAQpD,EAAG,SAASqI,CAAG;AAC3B,MAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,GAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,GAAOmG,GAAW3G,CAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,IAAa,OAAQQ,IAAS,KAEpEvC,MACF7P,KAAO,WAAYsX,IAAc,cAEnCtX,KAAO,UACH6P,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,IAE1B;AAAA,EACA,WAAczI,EAAG,KAAK,iBAAkB,OAAOU,KAAW,YAAY,OAAO,KAAKA,CAAO,EAAE,SAAS,KAAMA,MAAY,KAAQV,EAAG,KAAK,eAAeU,GAASV,EAAG,MAAM,GAAG,GAAI;AAC1K,IAAAqI,EAAI,SAAS3H,GACb2H,EAAI,aAAa1H,GACjB0H,EAAI,gBAAgBzH,GACpB5P,KAAO,gBAAiBqY,IAAQ,WAAsBA,IAAQ,QAASvkD,IAAS,cAAeukD,IAAQ,UACvGhB,EAAI,YAAYrI,EAAG,KAAK,YAAYA,EAAG,WAAWqJ,GAAMrJ,EAAG,KAAK,cAAc,EAAI;AAClF,QAAI4C,IAAY99C,IAAQ,MAAMukD,IAAO;AACrC,IAAAhB,EAAI,YAAYiB,CAAQ,IAAID;AAC5B,QAAIjG,IAAQpD,EAAG,SAASqI,CAAG;AAC3B,IAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,GAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,GAAOmG,GAAW3G,CAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,IAAa,OAAQQ,IAAS,KAEpEvC,MACF7P,KAAO,WAAYsX,IAAc,cAEnCtX,KAAO;AAAA,EACX;AACE,SAAI6P,MACF7P,KAAO,MAAOyX,IAAkB,UAAWI,IAAS,kBAE/C7X;AACT,GC1IAqa,KAAiB,SAAyBrL,GAAIC,GAAUC,GAAW;AACjE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AACF,EAAInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J;AAEjB,MAAI4K,IAASrL,KAAY,WACvBsL,IAAoBD,IAAS,qBAAqB,oBAClDE,IAAcxL,EAAG,OAAOuL,CAAiB,GACzCE,IAAczL,EAAG,KAAK,SAASwL,KAAeA,EAAY,OAC1DE,IAAMJ,IAAS,MAAM,KACrBK,IAASL,IAAS,MAAM,KACxBxK,IAAgB;AAClB,MAAI,EAAEqI,KAAW,OAAOzI,KAAW,YAAYA,MAAY;AACzD,UAAM,IAAI,MAAMT,IAAW,iBAAiB;AAE9C,MAAI,EAAEwL,KAAeD,MAAgB,UAAa,OAAOA,KAAe,YAAY,OAAOA,KAAe;AACxG,UAAM,IAAI,MAAMD,IAAoB,4BAA4B;AAElE,MAAIE,GAAa;AACf,QAAIG,IAAmB5L,EAAG,KAAK,QAAQwL,EAAY,OAAO/K,GAAUT,EAAG,WAAW,GAChF6L,IAAa,cAAcrL,GAC3BsL,IAAY,aAAatL,GACzBuL,IAAgB,iBAAiBvL,GACjCwL,IAAU,OAAOxL,GACjByL,IAAS,SAAUD,IAAU;AAC/B,IAAAhb,KAAO,oBAAqBwP,IAAQ,QAASoL,IAAoB,MACjEA,IAAmB,eAAepL,GAClCxP,KAAO,UAAW6a,IAAc,WAAYC,IAAa,eAAgBF,IAAoB,WAAYE,IAAa,sBAAyBA,IAAa,wBAA2BA,IAAa;AACpM,QAAIhL,IAAgByK,GAChBvK,IAAaA,KAAc,CAAA;AAC/B,IAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,qBAAqB,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBACtLZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,kBAAoBua,IAAqB,yBAE9CvL,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,QAAIiQ,IAAQjQ;AACZ,IAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,iBACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,MAAO8a,IAAa,uBAA0BD,IAAc,QAASvB,IAAgB,uBAAwBsB,IAAoB,MAAOF,IAAO,OAAQpB,IAAgB,SAAUxlD,IAAS,MAAO6mD,IAAU,OAAQC,IAAoB,QAAS9mD,IAAS,MAAO6mD,IAAU,MAAOrB,IAAgB,aAAcuB,IAAc,QAASD,IAAoB,kBAAmB9mD,IAAS,MAAO6mD,IAAU,OAAQrB,IAAgB,QAASxlD,IAAS,MAAO6mD,IAAU,MAAOrB,IAAgB,WAAYxlD,IAAS,UAAWA,IAAS,eAAgB07C,IAAQ,QAASqL,IAAc,SAAWH,IAAO,UAAaA,IAAO,QAC1lBhL,MAAY,WACdI,IAAgByK,GAChB3K,IAAiBZ,EAAG,gBAAgB,MAAMuL,GAC1CjB,IAAesB,GACfzC,IAAUsC;AAAA,EAEhB,OAAS;AACL,QAAIM,IAAgB,OAAOP,KAAe,UACxCS,IAASP;AACX,QAAIK,KAAiB5C,GAAS;AAC5B,UAAI6C,IAAU,MAAOC,IAAS;AAC9B,MAAAjb,KAAO,UACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,QAASsZ,IAAgB,uBAAwBkB,IAAe,MAAOE,IAAO,OAAQpB,IAAgB,QAASxlD,IAAS,MAAO6mD,IAAU,OAAQH,IAAe,QAAS1mD,IAAS,MAAO6mD,IAAU,MAAOrB,IAAgB,WAAYxlD,IAAS,UAAWA,IAAS;AAAA,IAChR,OAAW;AACL,MAAIinD,KAAiBrL,MAAY,UAC/BmL,IAAa,IACb/K,IAAgByK,GAChB3K,IAAiBZ,EAAG,gBAAgB,MAAMuL,GAC1CjB,IAAekB,GACfG,KAAU,QAENI,MAAezB,IAAe,KAAKgB,IAAS,QAAQ,KAAK,EAAEE,GAAa9K,CAAO,IAC/E8K,OAAiBO,IAAgBzB,IAAe,OAClDuB,IAAa,IACb/K,IAAgByK,GAChB3K,IAAiBZ,EAAG,gBAAgB,MAAMuL,GAC1CI,KAAU,QAEVE,IAAa,IACbI,KAAU;AAGd,UAAID,IAAU,MAAOC,IAAS;AAC9B,MAAAjb,KAAO,UACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,MAAOlsC,IAAS,MAAO6mD,IAAU,MAAOrB,IAAgB,SAAUxlD,IAAS,UAAWA,IAAS;AAAA,IAC5G;AAAA,EACA;AACE,EAAAg8C,IAAgBA,KAAiBb;AACjC,MAAIe,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,YAAY,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,8BAA+BoL,IAAW,cAAe1B,IAAgB,kBAAmBuB,IAAc,OACvR7L,EAAG,KAAK,aAAa,OACvBhP,KAAO,4BAA8Bib,IAAU,KAC3C9C,IACFnY,KAAO,SAAWsZ,IAElBtZ,KAAO,KAAMsZ,IAAgB,MAG7BtK,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,OACH6P,MACF7P,KAAO,aAEFA;AACT,GCjKAkb,KAAiB,SAA8BlM,GAAIC,GAAUC,GAAW;AACtE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AAOF,MANInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J,GAEb,EAAEyI,KAAW,OAAOzI,KAAW;AACjC,UAAM,IAAI,MAAMT,IAAW,iBAAiB;AAE9C,MAAIyL,IAAMzL,KAAY,aAAa,MAAM;AACzC,EAAAjP,KAAO,SACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,MAAOlsC,IAAS,aAAc4mD,IAAO,MAAOpB,IAAgB;AACnE,MAAIxJ,IAAgBb,GAChBe,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,iBAAiB,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,yBAA0B0J,IAAgB,OAC5NtK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iCACHiP,KAAY,aACdjP,KAAO,SAEPA,KAAO,SAETA,KAAO,UACHmY,IACFnY,KAAO,SAAWsZ,IAAgB,SAElCtZ,KAAO,KAAM0P,GAEf1P,KAAO,aAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GC9EAmb,KAAiB,SAA+BnM,GAAIC,GAAUC,GAAW;AACvE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AAOF,MANInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J,GAEb,EAAEyI,KAAW,OAAOzI,KAAW;AACjC,UAAM,IAAI,MAAMT,IAAW,iBAAiB;AAE9C,MAAIyL,IAAMzL,KAAY,cAAc,MAAM;AAC1C,EAAAjP,KAAO,SACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAE5EtK,EAAG,KAAK,YAAY,KACtBhP,KAAO,MAAOlsC,IAAS,aAEvBksC,KAAO,iBAAkBlsC,IAAS,MAEpCksC,KAAO,MAAO0a,IAAO,MAAOpB,IAAgB;AAC5C,MAAIxJ,IAAgBb,GAChBe,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,kBAAkB,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,yBAA0B0J,IAAgB,OAC7NtK,EAAG,KAAK,aAAa,OACvBhP,KAAO,+BACHiP,KAAY,cACdjP,KAAO,WAEPA,KAAO,WAETA,KAAO,UACHmY,IACFnY,KAAO,SAAWsZ,IAAgB,SAElCtZ,KAAO,KAAM0P,GAEf1P,KAAO,kBAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GCnFAob,KAAiB,SAAmCpM,GAAIC,GAAUC,GAAW;AAC3E,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AAOF,MANInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J,GAEb,EAAEyI,KAAW,OAAOzI,KAAW;AACjC,UAAM,IAAI,MAAMT,IAAW,iBAAiB;AAE9C,MAAIyL,IAAMzL,KAAY,kBAAkB,MAAM;AAC9C,EAAAjP,KAAO,SACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,kBAAmBlsC,IAAS,cAAe4mD,IAAO,MAAOpB,IAAgB;AAChF,MAAIxJ,IAAgBb,GAChBe,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,sBAAsB,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,yBAA0B0J,IAAgB,OACjOtK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iCACHiP,KAAY,kBACdjP,KAAO,SAEPA,KAAO,SAETA,KAAO,UACHmY,IACFnY,KAAO,SAAWsZ,IAAgB,SAElCtZ,KAAO,KAAM0P,GAEf1P,KAAO,kBAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GC9EAqb,KAAiB,SAA6BrM,GAAIC,GAAUC,GAAW;AACrE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AAOF,MANInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J,GAEb,EAAEyI,KAAW,OAAOzI,KAAW;AACjC,UAAM,IAAI,MAAMT,IAAW,iBAAiB;AAE9C,EAAAjP,KAAO,iBAAkBwP,IAAQ,SAC7B2I,MACFnY,KAAO,MAAOsZ,IAAgB,gCAAiCA,IAAgB,qBAEjFtZ,KAAO,eAAgBwP,IAAQ,QAAS17C,IAAS,QAASwlD,IAAgB,MACtEtK,EAAG,KAAK,sBACVhP,KAAO,kCAAmCwP,IAAQ,iBAAkBA,IAAQ,YAAaR,EAAG,KAAK,sBAAuB,MAExHhP,KAAO,cAAewP,IAAQ,2BAA4BA,IAAQ,MAEpExP,KAAO,OACHmY,MACFnY,KAAO,UAETA,KAAO;AACP,MAAIgQ,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,6DAA8EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,8BAA+B0J,IAAgB,OAC/MtK,EAAG,KAAK,aAAa,OACvBhP,KAAO,uCACHmY,IACFnY,KAAO,SAAWsZ,IAElBtZ,KAAO,KAAMsZ,IAAgB,MAG7BtK,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GC9EAsb,KAAiB,SAAsBtM,GAAIC,GAAUC,GAAW;AAC9D,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BoI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE;AACzB,EAAAqI,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI;AAC/B,MAAKrI,EAAG,KAAK,iBAAkB,OAAOU,KAAW,YAAY,OAAO,KAAKA,CAAO,EAAE,SAAS,KAAMA,MAAY,KAAQV,EAAG,KAAK,eAAeU,GAASV,EAAG,MAAM,GAAG,GAAI;AACnK,IAAAqI,EAAI,SAAS3H,GACb2H,EAAI,aAAa1H,GACjB0H,EAAI,gBAAgBzH,GACpB5P,KAAO,UAAW6X,IAAS;AAC3B,QAAIE,IAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB,IACvCA,EAAI,eAAe;AACnB,QAAIkE;AACJ,IAAIlE,EAAI,KAAK,cACXkE,IAAmBlE,EAAI,KAAK,WAC5BA,EAAI,KAAK,YAAY,KAEvBrX,KAAO,MAAOgP,EAAG,SAASqI,CAAG,IAAK,KAClCA,EAAI,eAAe,IACfkE,MAAkBlE,EAAI,KAAK,YAAYkE,IAC3CvM,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACvC/X,KAAO,UAAWsX,IAAc;AAChC,QAAItH,IAAaA,KAAc,CAAA;AAC/B,IAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,sDAAuEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBACzJZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,uCAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,QAAIiQ,IAAQjQ;AACZ,IAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,yBAA0B6X,IAAS,mCAAoCA,IAAS,wBAAyBA,IAAS,6BACrH7I,EAAG,KAAK,cACVhP,KAAO;AAAA,EAEb;AACI,IAAAA,KAAO,kBACHgP,EAAG,iBAAiB,MACtBhP,KAAO,sDAAuEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kBACzJZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,uCAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH6P,MACF7P,KAAO;AAGX,SAAOA;AACT,GClFAwb,KAAiB,SAAwBxM,GAAIC,GAAUC,GAAW;AAChE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BK,IAAiBL,EAAI,QACvBoE,IAAa,cAAcjM,GAC3BkM,IAAkB,mBAAmBlM;AACvC,EAAAxP,KAAO,SAAU6X,IAAS,iBAAkB4D,IAAc,gBAAiB1L,IAAU,gBAAiB2L,IAAmB;AACzH,MAAI3D,IAAgB/I,EAAG;AACvB,EAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB;AACvC,MAAIvG,IAAOpB;AACX,MAAIoB;AAGF,aAFIa,GAAMX,IAAK,IACbC,IAAKH,EAAK,SAAS,GACdE,IAAKC;AACV,MAAAU,IAAOb,EAAKE,KAAM,CAAC,IACdhC,EAAG,KAAK,iBAAkB,OAAO2C,KAAQ,YAAY,OAAO,KAAKA,CAAI,EAAE,SAAS,KAAMA,MAAS,KAAQ3C,EAAG,KAAK,eAAe2C,GAAM3C,EAAG,MAAM,GAAG,MACnJqI,EAAI,SAAS1F,GACb0F,EAAI,aAAa1H,IAAc,MAAMqB,IAAK,KAC1CqG,EAAI,gBAAgBzH,IAAiB,MAAMoB,GAC3ChR,KAAO,OAAQgP,EAAG,SAASqI,CAAG,IAAK,KACnCA,EAAI,SAASK,KAEb1X,KAAO,UAAWsX,IAAc,aAE9BtG,MACFhR,KAAO,UAAWsX,IAAc,SAAUmE,IAAc,SAAU1L,IAAU,eAAgB2L,IAAmB,SAAUA,IAAmB,OAAQ1K,IAAM,gBAC1JyG,KAAkB,MAEpBzX,KAAO,UAAWsX,IAAc,SAAUvH,IAAU,QAAS0L,IAAc,cAAeC,IAAmB,QAAS1K,IAAM;AAGhI,SAAAhC,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACvC/X,KAAO,KAAMyX,IAAkB,UAAW1H,IAAU,sBAChDf,EAAG,iBAAiB,MACtBhP,KAAO,wDAAyEgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,kCAAmC8L,IAAmB,OACjN1M,EAAG,KAAK,aAAa,OACvBhP,KAAO,4DAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH,CAACgP,EAAG,iBAAiBa,MAEnBb,EAAG,QACLhP,KAAO,0CAEPA,KAAO,+CAGXA,KAAO,wBAAyB6X,IAAS,mCAAoCA,IAAS,wBAAyBA,IAAS,4BACpH7I,EAAG,KAAK,cACVhP,KAAO,QAEFA;AACT,GCvEAhmD,KAAiB,SAA0Bg1D,GAAIC,GAAUC,GAAW;AAClE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9B0I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AACF,EAAInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J;AAEjB,MAAIiM,IAAUxD,IAAU,iBAAiBmB,IAAe,OAAOtK,EAAG,WAAWU,CAAO;AACpF,EAAA1P,KAAO,SACHmY,MACFnY,KAAO,OAAQsZ,IAAgB,8BAA+BA,IAAgB,sBAEhFtZ,KAAO,OAAQ2b,IAAW,WAAY7nD,IAAS;AAC/C,MAAIk8C,IAAaA,KAAc,CAAA;AAC/B,EAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,0DAA2EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,2BAC7JuI,IACFnY,KAAO,KAAMsZ,IAEbtZ,KAAO,KAAMgP,EAAG,KAAK,eAAeU,CAAO,GAE7C1P,KAAO,QACHgP,EAAG,KAAK,aAAa,OACvBhP,KAAO,uCACHmY,IACFnY,KAAO,SAAWsZ,IAAgB,SAElCtZ,KAAO,KAAMgP,EAAG,KAAK,aAAaU,CAAO,GAE3C1P,KAAO,QAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAMgP,EAAG,KAAK,eAAeU,CAAO,GAE7C1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,MAAIiQ,IAAQjQ;AACZ,SAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,MACH6P,MACF7P,KAAO,aAEFA;AACT,GCzEAtoD,KAAiB,SAA6Bs3D,GAAIC,GAAUC,GAAW;AACrE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BoI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI,OAC3BuE,IAAO,QAAQpM,GACjB6I,IAAO,QAAQ7I,GACf8I,IAAWjB,EAAI,YAAYrI,EAAG,YAAY,GAC1CuJ,IAAY,SAASD,GACrBuD,IAAkB,mBAAmBrM,GACnC8B,IAAc,OAAO,KAAK5B,KAAW,EAAE,EAAE,OAAOoM,EAAQ,GAC1DC,IAAe/M,EAAG,OAAO,qBAAqB,CAAA,GAC9CgN,IAAiB,OAAO,KAAKD,CAAY,EAAE,OAAOD,EAAQ,GAC1DG,IAAejN,EAAG,OAAO,sBACzBkN,IAAkB5K,EAAY,UAAU0K,EAAe,QACvDG,IAAgBF,MAAiB,IACjCG,IAAsB,OAAOH,KAAgB,YAAY,OAAO,KAAKA,CAAY,EAAE,QACnFI,IAAoBrN,EAAG,KAAK,kBAC5BsN,IAAmBH,KAAiBC,KAAuBC,GAC3DzD,IAAiB5J,EAAG,KAAK,eACzB0I,IAAiB1I,EAAG,QAClBuN,KAAYvN,EAAG,OAAO;AAC1B,MAAIuN,MAAa,EAAEvN,EAAG,KAAK,SAASuN,GAAU,UAAUA,GAAU,SAASvN,EAAG,KAAK;AACjF,QAAIwN,KAAgBxN,EAAG,KAAK,OAAOuN,EAAS;AAG9C,WAAST,GAASr6D,IAAG;AACnB,WAAOA,OAAM;AAAA,EACjB;AAKE,MAJAu+C,KAAO,SAAU6X,IAAS,mBAAoBP,IAAc,YACxDsB,MACF5Y,KAAO,UAAW6b,IAAmB,kBAEnCS,GAAkB;AAMpB,QALI1D,IACF5Y,KAAO,MAAO6b,IAAmB,QAASA,IAAmB,qBAAsB/nD,IAAS,iBAAkBukD,IAAQ,SAAUA,IAAQ,MAAOwD,IAAmB,cAAexD,IAAQ,eAAgBuD,IAAQ,QAASC,IAAmB,MAAOxD,IAAQ,QAE5PrY,KAAO,eAAgB4b,IAAQ,SAAU9nD,IAAS,QAEhDooD,GAAiB;AAEnB,UADAlc,KAAO,sBAAuBwP,IAAQ,eAClC8B,EAAY;AACd,YAAIA,EAAY,SAAS;AACvB,UAAAtR,KAAO,wBAAyB2P,IAAe,qBAAsBiM,IAAQ;AAAA,aACxE;AACL,cAAI9K,KAAOQ;AACX,cAAIR;AAGF,qBAFIU,IAAciL,KAAK,IACrBxL,KAAKH,GAAK,SAAS,GACd2L,KAAKxL;AACV,cAAAO,KAAeV,GAAK2L,MAAM,CAAC,GAC3Bzc,KAAO,SAAU4b,IAAQ,SAAU5M,EAAG,KAAK,eAAewC,EAAY,IAAK;AAAA,QAGzF;AAEM,UAAIwK,EAAe,QAAQ;AACzB,YAAI3e,IAAO2e;AACX,YAAI3e;AAGF,mBAFIqf,GAAY1L,KAAK,IACnBK,KAAKhU,EAAK,SAAS,GACd2T,KAAKK;AACV,YAAAqL,IAAarf,EAAK2T,MAAM,CAAC,GACzBhR,KAAO,SAAUgP,EAAG,WAAW0N,CAAU,IAAK,WAAYd,IAAQ;AAAA,MAG9E;AACM,MAAA5b,KAAO,yBAA0BwP,IAAQ;AAAA,IAC/C;AACI,QAAI6M,KAAqB;AACvB,MAAArc,KAAO,aAAclsC,IAAS,MAAO8nD,IAAQ;AAAA,SACxC;AACL,UAAI7C,KAAoB/J,EAAG,WACvB2N,KAAsB,SAAUf,IAAO;AAI3C,UAHI5M,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,YAAYA,EAAG,WAAW4M,GAAM5M,EAAG,KAAK,YAAY,IAEzEmN;AACF,YAAIE;AACF,UAAArc,KAAO,aAAclsC,IAAS,MAAO8nD,IAAQ;AAAA,aACxC;AACL,UAAA5b,KAAO,MAAOsX,IAAc;AAC5B,cAAI8C,KAAqBxK;AACzB,UAAAA,IAAiBZ,EAAG,gBAAgB;AACpC,cAAIgB,KAAaA,MAAc,CAAA;AAC/B,UAAAA,GAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,uEAAwFgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,uCAAyC+M,KAAuB,QAC1O3N,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,sCAEPA,KAAO,yCAETA,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,qDAAsDgP,EAAG,aAAc,cAAel7C,IAAS,MAExGksC,KAAO,SAEPA,KAAO;AAET,cAAIiQ,KAAQjQ;AACZ,UAAAA,IAAMgQ,GAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,KAAS,SAElDjQ,KAAO,yBAA0BiQ,KAAS,sBAG5CjQ,KAAO,gBAAiBiQ,KAAS,gFAEnCL,IAAiBwK,IACbvK,MACF7P,KAAO;AAAA,QAEnB;AAAA,eACiBoc;AACT,YAAIC,KAAqB,WAAW;AAClC,UAAArc,KAAO,UAAW6X,IAAS;AAC3B,cAAIE,KAAgB/I,EAAG;AACvB,UAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB,IACvCA,EAAI,SAAS4E,GACb5E,EAAI,aAAarI,EAAG,aAAa,yBACjCqI,EAAI,gBAAgBrI,EAAG,gBAAgB,yBACvCqI,EAAI,YAAYrI,EAAG,KAAK,yBAAyBA,EAAG,YAAYA,EAAG,KAAK,YAAYA,EAAG,WAAW4M,GAAM5M,EAAG,KAAK,YAAY;AAC5H,cAAI4C,KAAY99C,IAAQ,MAAM8nD,IAAO;AACrC,UAAAvE,EAAI,YAAYiB,CAAQ,IAAIsD;AAC5B,cAAIxJ,KAAQpD,EAAG,SAASqI,CAAG;AAC3B,UAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,IAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,IAAOmG,GAAW3G,EAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,KAAa,OAAQQ,KAAS,KAExEpS,KAAO,WAAYsX,IAAc,kBAAmBO,IAAS,0HAA2H/jD,IAAS,MAAO8nD,IAAQ,UAChN5M,EAAG,gBAAgBqI,EAAI,gBAAgBU;AAAA,QACjD,OAAe;AACL,UAAAV,EAAI,SAAS4E,GACb5E,EAAI,aAAarI,EAAG,aAAa,yBACjCqI,EAAI,gBAAgBrI,EAAG,gBAAgB,yBACvCqI,EAAI,YAAYrI,EAAG,KAAK,yBAAyBA,EAAG,YAAYA,EAAG,KAAK,YAAYA,EAAG,WAAW4M,GAAM5M,EAAG,KAAK,YAAY;AAC5H,cAAI4C,KAAY99C,IAAQ,MAAM8nD,IAAO;AACrC,UAAAvE,EAAI,YAAYiB,CAAQ,IAAIsD;AAC5B,cAAIxJ,KAAQpD,EAAG,SAASqI,CAAG;AAC3B,UAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,IAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,IAAOmG,GAAW3G,EAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,KAAa,OAAQQ,KAAS,KAEpEvC,MACF7P,KAAO,WAAYsX,IAAc;AAAA,QAE7C;AAEM,MAAAtI,EAAG,YAAY+J;AAAA,IACrB;AACI,IAAImD,MACFlc,KAAO,QAETA,KAAO,QACH6P,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,EAExB;AACE,MAAImF,KAAe5N,EAAG,KAAK,eAAe,CAACA,EAAG;AAC9C,MAAIsC,EAAY,QAAQ;AACtB,QAAIC,KAAOD;AACX,QAAIC;AAGF,eAFIC,IAAcC,KAAK,IACrBC,KAAKH,GAAK,SAAS,GACdE,KAAKC,MAAI;AACd,QAAAF,KAAeD,GAAKE,MAAM,CAAC;AAC3B,YAAIE,KAAOjC,EAAQ8B,EAAY;AAC/B,YAAKxC,EAAG,KAAK,iBAAkB,OAAO2C,MAAQ,YAAY,OAAO,KAAKA,EAAI,EAAE,SAAS,KAAMA,OAAS,KAAQ3C,EAAG,KAAK,eAAe2C,IAAM3C,EAAG,MAAM,GAAG,GAAI;AACvJ,cAAIgK,KAAQhK,EAAG,KAAK,YAAYwC,EAAY,GAC1CI,KAAY99C,IAAQklD,IACpB6D,KAAcD,MAAgBjL,GAAK,YAAY;AACjD,UAAA0F,EAAI,SAAS1F,IACb0F,EAAI,aAAa1H,IAAcqJ,IAC/B3B,EAAI,gBAAgBzH,IAAiB,MAAMZ,EAAG,KAAK,eAAewC,EAAY,GAC9E6F,EAAI,YAAYrI,EAAG,KAAK,QAAQA,EAAG,WAAWwC,IAAcxC,EAAG,KAAK,YAAY,GAChFqI,EAAI,YAAYiB,CAAQ,IAAItJ,EAAG,KAAK,eAAewC,EAAY;AAC/D,cAAIY,KAAQpD,EAAG,SAASqI,CAAG;AAE3B,cADAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,IAAOmG,CAAS,IAAI,GAAG;AAC/C,YAAAnG,KAAQpD,EAAG,KAAK,WAAWoD,IAAOmG,GAAW3G,EAAS;AACtD,gBAAIqH,KAAWrH;AAAA,UAC3B,OAAiB;AACL,gBAAIqH,KAAWV;AACf,YAAAvY,KAAO,UAAWuY,IAAa,QAAS3G,KAAa;AAAA,UACjE;AACU,cAAIiL;AACF,YAAA7c,KAAO,MAAOoS,KAAS;AAAA,eAClB;AACL,gBAAIoK,MAAiBA,GAAchL,EAAY,GAAG;AAChD,cAAAxR,KAAO,WAAYiZ,KAAY,mBAC3BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,EAAY,IAAK,QAEnHxR,KAAO,SAAUsX,IAAc;AAC/B,kBAAIyB,KAAoB/J,EAAG,WACzBoL,KAAqBxK,GACrBuJ,KAAmBnK,EAAG,KAAK,aAAawC,EAAY;AACtD,cAAIxC,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,QAAQ+J,IAAmBvH,IAAcxC,EAAG,KAAK,YAAY,IAEtFY,IAAiBZ,EAAG,gBAAgB;AACpC,kBAAIgB,KAAaA,MAAc,CAAA;AAC/B,cAAAA,GAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,KAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,KAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,kBAAIiQ,KAAQjQ;AACZ,cAAAA,IAAMgQ,GAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,KAAS,SAElDjQ,KAAO,yBAA0BiQ,KAAS,sBAG5CjQ,KAAO,gBAAiBiQ,KAAS,gFAEnCL,IAAiBwK,IACjBpL,EAAG,YAAY+J,IACf/Y,KAAO;AAAA,YACrB;AACc,cAAI6P,KACF7P,KAAO,WAAYiZ,KAAY,mBAC3BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,EAAY,IAAK,QAEnHxR,KAAO,SAAUsX,IAAc,yBAE/BtX,KAAO,UAAWiZ,KAAY,mBAC1BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,EAAY,IAAK,QAEnHxR,KAAO;AAGX,YAAAA,KAAO,MAAOoS,KAAS;AAAA,UACnC;AAAA,QACA;AACQ,QAAIvC,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,MAE5B;AAAA,EAEA;AACE,MAAIuE,EAAe,QAAQ;AACzB,QAAInK,KAAOmK;AACX,QAAInK;AAGF,eAFI6K,GAAYI,KAAK,IACnBhL,KAAKD,GAAK,SAAS,GACdiL,KAAKhL,MAAI;AACd,QAAA4K,IAAa7K,GAAKiL,MAAM,CAAC;AACzB,YAAInL,KAAOoK,EAAaW,CAAU;AAClC,YAAK1N,EAAG,KAAK,iBAAkB,OAAO2C,MAAQ,YAAY,OAAO,KAAKA,EAAI,EAAE,SAAS,KAAMA,OAAS,KAAQ3C,EAAG,KAAK,eAAe2C,IAAM3C,EAAG,MAAM,GAAG,GAAI;AACvJ,UAAAqI,EAAI,SAAS1F,IACb0F,EAAI,aAAarI,EAAG,aAAa,uBAAuBA,EAAG,KAAK,YAAY0N,CAAU,GACtFrF,EAAI,gBAAgBrI,EAAG,gBAAgB,wBAAwBA,EAAG,KAAK,eAAe0N,CAAU,GAC5F9D,IACF5Y,KAAO,MAAO6b,IAAmB,QAASA,IAAmB,qBAAsB/nD,IAAS,iBAAkBukD,IAAQ,SAAUA,IAAQ,MAAOwD,IAAmB,cAAexD,IAAQ,eAAgBuD,IAAQ,QAASC,IAAmB,MAAOxD,IAAQ,QAE5PrY,KAAO,eAAgB4b,IAAQ,SAAU9nD,IAAS,QAEpDksC,KAAO,UAAWgP,EAAG,WAAW0N,CAAU,IAAK,WAAYd,IAAQ,SACnEvE,EAAI,YAAYrI,EAAG,KAAK,YAAYA,EAAG,WAAW4M,GAAM5M,EAAG,KAAK,YAAY;AAC5E,cAAI4C,KAAY99C,IAAQ,MAAM8nD,IAAO;AACrC,UAAAvE,EAAI,YAAYiB,CAAQ,IAAIsD;AAC5B,cAAIxJ,KAAQpD,EAAG,SAASqI,CAAG;AAC3B,UAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,IAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,IAAOmG,GAAW3G,EAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,KAAa,OAAQQ,KAAS,KAEpEvC,MACF7P,KAAO,WAAYsX,IAAc,cAEnCtX,KAAO,OACH6P,MACF7P,KAAO,WAAYsX,IAAc,cAEnCtX,KAAO,QACH6P,MACF7P,KAAO,UAAWsX,IAAc,QAChCG,KAAkB;AAAA,QAE9B;AAAA,MACA;AAAA,EAEA;AACE,SAAI5H,MACF7P,KAAO,MAAOyX,IAAkB,UAAWI,IAAS,kBAE/C7X;AACT,GC7UA+c,KAAiB,SAAgC/N,GAAIC,GAAUC,GAAW;AACxE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BoI,IAAQ,WAAWrI,GACnB6H,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,EAAAJ,EAAI;AACJ,MAAIC,IAAa,UAAUD,EAAI;AAE/B,MADArX,KAAO,SAAU6X,IAAS,cACrB7I,EAAG,KAAK,iBAAkB,OAAOU,KAAW,YAAY,OAAO,KAAKA,CAAO,EAAE,SAAS,KAAMA,MAAY,KAAQV,EAAG,KAAK,eAAeU,GAASV,EAAG,MAAM,GAAG,GAAI;AACnK,IAAAqI,EAAI,SAAS3H,GACb2H,EAAI,aAAa1H,GACjB0H,EAAI,gBAAgBzH;AACpB,QAAIgM,IAAO,QAAQpM,GACjB6I,IAAO,QAAQ7I,GACfwB,IAAK,MAAMxB,GACXwN,IAAe,SAAUpB,IAAO,QAChCtD,IAAWjB,EAAI,YAAYrI,EAAG,YAAY,GAC1CuJ,IAAY,SAASD,GACrBuD,IAAkB,mBAAmBrM,GACrCoJ,IAAiB5J,EAAG,KAAK,eACzB0I,IAAiB1I,EAAG;AACtB,IAAI4J,MACF5Y,KAAO,UAAW6b,IAAmB,mBAEnCjD,IACF5Y,KAAO,MAAO6b,IAAmB,QAASA,IAAmB,qBAAsB/nD,IAAS,iBAAkBukD,IAAQ,SAAUA,IAAQ,MAAOwD,IAAmB,cAAexD,IAAQ,eAAgBuD,IAAQ,QAASC,IAAmB,MAAOxD,IAAQ,QAE5PrY,KAAO,eAAgB4b,IAAQ,SAAU9nD,IAAS,QAEpDksC,KAAO,mBAAoBwP,IAAQ;AACnC,QAAIoC,IAAYgK,GACZ7D,IAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB;AACvC,QAAIjF,IAAQpD,EAAG,SAASqI,CAAG;AAC3B,IAAAA,EAAI,SAASK,GACT1I,EAAG,KAAK,cAAcoD,GAAOmG,CAAS,IAAI,IAC5CvY,KAAO,MAAOgP,EAAG,KAAK,WAAWoD,GAAOmG,GAAW3G,CAAS,IAAK,MAEjE5R,KAAO,UAAWuY,IAAa,QAAS3G,IAAa,OAAQQ,IAAS,KAExEpD,EAAG,gBAAgBqI,EAAI,gBAAgBU,GACvC/X,KAAO,WAAYsX,IAAc,kBAAmBtG,IAAM,eAAgBxB,IAAQ,OAAQwB,IAAM,cAAeA,IAAM,mBAAoBA,IAAM,sBAAuB4K,IAAQ,sBAC1K5M,EAAG,iBAAiB,MACtBhP,KAAO,gEAAiFgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,iCAAmCoN,IAAgB,QACtNhO,EAAG,KAAK,aAAa,OACvBhP,KAAO,mCAAsCgd,IAAgB,qBAE3DhO,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH,CAACgP,EAAG,iBAAiBa,MAEnBb,EAAG,QACLhP,KAAO,0CAEPA,KAAO,+CAGP6P,MACF7P,KAAO,aAETA,KAAO;AAAA,EACX;AACE,SAAI6P,MACF7P,KAAO,MAAOyX,IAAkB,UAAWI,IAAS,kBAE/C7X;AACT,GC/EAn1D,KAAiB,SAA2BmkE,GAAIC,GAAUC,GAAW;AACnE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnB2I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ;AAElD,EAAIyI,MACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK;AAKvG,MAAIqK,IAAW,WAAW7J;AAC1B,MAAI,CAAC2I;AACH,QAAIzI,EAAQ,SAASV,EAAG,KAAK,gBAAgBA,EAAG,OAAO,cAAc,OAAO,KAAKA,EAAG,OAAO,UAAU,EAAE,QAAQ;AAC7G,UAAIuN,IAAY,CAAA,GACZzL,IAAOpB;AACX,UAAIoB;AAGF,iBAFI+H,GAAW4D,IAAK,IAClBxL,IAAKH,EAAK,SAAS,GACd2L,IAAKxL,KAAI;AACd,UAAA4H,IAAY/H,EAAK2L,KAAM,CAAC;AACxB,cAAIQ,IAAejO,EAAG,OAAO,WAAW6J,CAAS;AACjD,UAAMoE,MAAiBjO,EAAG,KAAK,iBAAkB,OAAOiO,KAAgB,YAAY,OAAO,KAAKA,CAAY,EAAE,SAAS,KAAMA,MAAiB,KAAQjO,EAAG,KAAK,eAAeiO,GAAcjO,EAAG,MAAM,GAAG,OACrMuN,EAAUA,EAAU,MAAM,IAAI1D;AAAA,QAE1C;AAAA,IAEA;AACM,UAAI0D,IAAY7M;AAGpB,MAAIyI,KAAWoE,EAAU,QAAQ;AAC/B,QAAIxD,IAAoB/J,EAAG,WACzBkO,IAAgB/E,KAAWoE,EAAU,UAAUvN,EAAG,KAAK,cACvD4J,IAAiB5J,EAAG,KAAK;AAC3B,QAAIa;AAEF,UADA7P,KAAO,iBAAkBwP,IAAQ,MAC7B0N,GAAe;AACjB,QAAK/E,MACHnY,KAAO,UAAWqZ,IAAY,uBAAwB1J,IAAe;AAEvE,YAAIqB,IAAK,MAAMxB,GACb0J,IAAgB,WAAW1J,IAAO,MAAMwB,IAAK,KAC7CmI,IAAmB,SAAUD,IAAgB;AAC/C,QAAIlK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,YAAY+J,GAAmBG,GAAelK,EAAG,KAAK,YAAY,IAE3FhP,KAAO,UAAW+P,IAAU,aACxBoI,MACFnY,KAAO,gBAAiBwP,IAAQ,qBAAsBO,IAAU,4CAA6CP,IAAQ,QAASO,IAAU,qBAE1I/P,KAAO,eAAgBgR,IAAM,WAAYA,IAAM,QAASqI,IAAY,cAAerI,IAAM,WAAYjB,IAAU,QAASj8C,IAAS,MAAOulD,IAAY,MAAOrI,IAAM,qBAC7J4H,MACF5Y,KAAO,gDAAiDlsC,IAAS,OAAQulD,IAAY,MAAOrI,IAAM,QAEpGhR,KAAO,YAAa+P,IAAU,eAC1BoI,MACFnY,KAAO,UAETA,KAAO,YAAa+P,IAAU;AAC9B,YAAIC,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,IAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,IAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,IAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO;AAAA,MACf,OAAa;AACL,QAAAA,KAAO;AACP,YAAI3C,IAAOkf;AACX,YAAIlf;AAGF,mBAFImU,GAAcR,IAAK,IACrBK,IAAKhU,EAAK,SAAS,GACd2T,IAAKK,KAAI;AACd,YAAAG,IAAenU,EAAK2T,KAAM,CAAC,GACvBA,MACFhR,KAAO;AAET,gBAAIgZ,KAAQhK,EAAG,KAAK,YAAYwC,CAAY,GAC1CyH,KAAWnlD,IAAQklD;AACrB,YAAAhZ,KAAO,UAAWiZ,KAAY,mBAC1BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,CAAY,IAAK,QAEnHxR,KAAO,kBAAmBwP,IAAQ,QAASR,EAAG,KAAK,eAAeA,EAAG,KAAK,eAAewC,IAAewH,EAAK,IAAK;AAAA,UAC9H;AAEQ,QAAAhZ,KAAO;AACP,YAAIkZ,IAAgB,YAAY1J,GAC9B2J,IAAmB,SAAUD,IAAgB;AAC/C,QAAIlK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,eAAeA,EAAG,KAAK,YAAY+J,GAAmBG,GAAe,EAAI,IAAIH,IAAoB,QAAQG;AAElI,YAAIlJ,IAAaA,KAAc,CAAA;AAC/B,QAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,IAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,IAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,YAAIiQ,IAAQjQ;AACZ,QAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO;AAAA,MACf;AAAA,aAEUkd,GAAe;AACjB,MAAK/E,MACHnY,KAAO,UAAWqZ,IAAY,uBAAwB1J,IAAe;AAEvE,UAAIqB,IAAK,MAAMxB,GACb0J,IAAgB,WAAW1J,IAAO,MAAMwB,IAAK,KAC7CmI,IAAmB,SAAUD,IAAgB;AAC/C,MAAIlK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,YAAY+J,GAAmBG,GAAelK,EAAG,KAAK,YAAY,IAEvFmJ,MACFnY,KAAO,UAAWqZ,IAAY,wBAAyBA,IAAY,sBAC/DrK,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,IAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,IAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,4FAA6FqZ,IAAY,uBAElHrZ,KAAO,eAAgBgR,IAAM,WAAYA,IAAM,QAASqI,IAAY,cAAerI,IAAM,eAAgBl9C,IAAS,MAAOulD,IAAY,MAAOrI,IAAM,qBAC9I4H,MACF5Y,KAAO,gDAAiDlsC,IAAS,OAAQulD,IAAY,MAAOrI,IAAM,QAEpGhR,KAAO,qBACHgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,IAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,IAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,oFACHmY,MACFnY,KAAO;AAAA,IAEjB,OAAa;AACL,UAAIuR,KAAOgL;AACX,UAAIhL;AAGF,iBAFIC,GAAcC,KAAK,IACrBC,KAAKH,GAAK,SAAS,GACdE,KAAKC,MAAI;AACd,UAAAF,IAAeD,GAAKE,MAAM,CAAC;AAC3B,cAAIuH,KAAQhK,EAAG,KAAK,YAAYwC,CAAY,GAC1C2H,IAAmBnK,EAAG,KAAK,aAAawC,CAAY,GACpDyH,KAAWnlD,IAAQklD;AACrB,UAAIhK,EAAG,KAAK,2BACVA,EAAG,YAAYA,EAAG,KAAK,QAAQ+J,GAAmBvH,GAAcxC,EAAG,KAAK,YAAY,IAEtFhP,KAAO,WAAYiZ,KAAY,mBAC3BL,MACF5Y,KAAO,gDAAiDlsC,IAAS,QAAUk7C,EAAG,KAAK,aAAawC,CAAY,IAAK,QAEnHxR,KAAO,qBACHgP,EAAG,iBAAiB,MACtBhP,KAAO,2DAA4EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,oCAAsCuJ,IAAoB,QACxNnK,EAAG,KAAK,aAAa,OACvBhP,KAAO,iBACHgP,EAAG,KAAK,yBACVhP,KAAO,2BAEPA,KAAO,sCAAwCmZ,IAAoB,OAErEnZ,KAAO,OAELgP,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO;AAAA,QACnB;AAAA,IAEA;AAEI,IAAAgP,EAAG,YAAY+J;AAAA,EACnB,MAAS,CAAIlJ,MACT7P,KAAO;AAET,SAAOA;AACT,GC5QAmd,KAAiB,SAA8BnO,GAAIC,GAAUC,GAAW;AACtE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBl7C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnB2I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AAOF,MANInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J,IAEZA,KAAWyI,MAAYnJ,EAAG,KAAK,gBAAgB,IAAO;AACzD,IAAImJ,MACFnY,KAAO,UAAW+P,IAAU,WAAYuJ,IAAgB,mBAAoBA,IAAgB,qBAAsBvJ,IAAU,8BAA+BuJ,IAAgB,oBAAuBvJ,IAAU,sBAE9M/P,KAAO,cAAelsC,IAAS,eAAgBi8C,IAAU;AACzD,QAAIqN,IAAYpO,EAAG,OAAO,SAASA,EAAG,OAAO,MAAM,MACjDuB,IAAe,MAAM,QAAQ6M,CAAS;AACxC,QAAI,CAACA,KAAaA,KAAa,YAAYA,KAAa,WAAY7M,MAAiB6M,EAAU,QAAQ,QAAQ,KAAK,KAAKA,EAAU,QAAQ,OAAO,KAAK;AACrJ,MAAApd,KAAO,yDAA0DlsC,IAAS,UAAWA,IAAS,aAAci8C,IAAU;AAAA,SACjH;AACL,MAAA/P,KAAO,2DAA4DlsC,IAAS;AAC5E,UAAI68C,IAAU,mBAAmBJ,IAAe,MAAM;AACtD,MAAAvQ,KAAO,UAAWgP,EAAG,KAAK2B,CAAO,EAAEyM,GAAW,QAAQpO,EAAG,KAAK,eAAe,EAAI,IAAK,gBAClFuB,MACFvQ,KAAO,sDAETA,KAAO,kDAAqD+P,IAAU;AAAA,IAC5E;AACI,IAAA/P,KAAO,OACHmY,MACFnY,KAAO,UAETA,KAAO,WAAY+P,IAAU;AAC7B,QAAIC,IAAaA,KAAc,CAAA;AAC/B,IAAAA,EAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,8DAA+EgP,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,8BACjKZ,EAAG,KAAK,aAAa,OACvBhP,KAAO,oGAELgP,EAAG,KAAK,YACVhP,KAAO,gBACHmY,IACFnY,KAAO,oBAAqB2P,IAE5B3P,KAAO,KAAM0P,GAEf1P,KAAO,6CAA8CgP,EAAG,aAAc,cAAel7C,IAAS,MAEhGksC,KAAO,SAEPA,KAAO;AAET,QAAIiQ,IAAQjQ;AACZ,IAAAA,IAAMgQ,EAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS,gFAEnCjQ,KAAO,OACH6P,MACF7P,KAAO;AAAA,EAEb;AACI,IAAI6P,MACF7P,KAAO;AAGX,SAAOA;AACT,GClFAqd,KAAiB;AAAA,EACf,MAAQprC;AAAAA,EACR,OAAO+D;AAAAA,EACP,OAAOE;AAAAA,EACP,UAAYgF;AAAAA,EACZ,OAAOC;AAAAA,EACP,UAAUC;AAAAA,EACV,cAAcC;AAAAA,EACd,MAAQE;AAAAA,EACR,QAAQC;AAAAA,EACR,IAAMC;AAAAA,EACN,OAAOC;AAAAA,EACP,SAASC;AAAAA,EACT,SAASA;AAAAA,EACT,UAAU4F;AAAAA,EACV,UAAUA;AAAAA,EACV,WAAWC;AAAAA,EACX,WAAWA;AAAAA,EACX,eAAe87B;AAAAA,EACf,eAAeA;AAAAA,EACf,YAAYC;AAAAA,EACZ,KAAKC;AAAAA,EACL,OAAOC;AAAAA,EACP,SAASC;AAAAA,EACT,YAAYC;AAAAA,EACZ,eAAeC;AAAAA,EACf,UAAUC;AAAAA,EACV,aAAaC;AAAAA,EACb,UAAUC;AACZ,GC9BIC,KAAc/rC,IACdy2B,KAAS1yB,GAAkB,QAE/BlrC,KAAiB,WAAiB;AAChC,MAAIsoE,IAAQ;AAAA,IACV;AAAA,MAAE,MAAM;AAAA,MACN,OAAO;AAAA,QAAE,EAAE,SAAW,CAAC,kBAAkB,EAAC;AAAA,QACjC,EAAE,SAAW,CAAC,kBAAkB,EAAC;AAAA,QAAI;AAAA,QAAc;AAAA,MAAQ;AAAA,IAAC;AAAA,IACvE;AAAA,MAAE,MAAM;AAAA,MACN,OAAO,CAAE,aAAa,aAAa,WAAW,QAAQ;AAAA,IAAE;AAAA,IAC1D;AAAA,MAAE,MAAM;AAAA,MACN,OAAO,CAAE,YAAY,YAAY,SAAS,YAAY;IAAe;AAAA,IACvE;AAAA,MAAE,MAAM;AAAA,MACN,OAAO;AAAA,QAAE;AAAA,QAAiB;AAAA,QAAiB;AAAA,QAAY;AAAA,QAAgB;AAAA,QAC9D,EAAE,YAAc,CAAC,wBAAwB,mBAAmB,EAAC;AAAA,MAAE;AAAA,IAAE;AAAA,IAC5E,EAAE,OAAO,CAAE,QAAQ,SAAS,QAAQ,OAAO,SAAS,SAAS,SAAS,IAAI,EAAE;AAAA,EAChF,GAEM6K,IAAM,CAAE,QAAQ,UAAU,GAC1BC,IAAW;AAAA,IACb;AAAA,IAAW;AAAA,IAAO;AAAA,IAAM;AAAA,IAAS;AAAA,IAAU;AAAA,IAC3C;AAAA,IAAe;AAAA,IAAW;AAAA,IAC1B;AAAA,IAAY;AAAA,IAAY;AAAA,IACxB;AAAA,IAAoB;AAAA,IACpB;AAAA,IAAmB;AAAA,IAAQ;AAAA,EAC/B,GACMzvE,IAAQ,CAAE,UAAU,WAAW,UAAU,SAAS,UAAU,WAAW,MAAM;AACjF,SAAA2kE,EAAM,MAAM1K,GAAOuV,CAAG,GACtB7K,EAAM,QAAQ1K,GAAOj6D,CAAK,GAE1B2kE,EAAM,QAAQ,SAAUvsE,GAAO;AAC7B,IAAAA,EAAM,QAAQA,EAAM,MAAM,IAAI,SAAUquE,GAAS;AAC/C,UAAIiJ;AACJ,UAAI,OAAOjJ,KAAW,UAAU;AAC9B,YAAI77D,IAAM,OAAO,KAAK67D,CAAO,EAAE,CAAC;AAChC,QAAAiJ,IAAejJ,EAAQ77D,CAAG,GAC1B67D,IAAU77D,GACV8kE,EAAa,QAAQ,SAAU77B,GAAG;AAChC,UAAA27B,EAAI,KAAK37B,CAAC,GACV8wB,EAAM,IAAI9wB,CAAC,IAAI;AAAA,QACzB,CAAS;AAAA,MACT;AACM,MAAA27B,EAAI,KAAK/I,CAAO;AAChB,UAAIpmE,IAAOskE,EAAM,IAAI8B,CAAO,IAAI;AAAA,QAC9B,SAASA;AAAA,QACT,MAAM8I,GAAY9I,CAAO;AAAA,QACzB,YAAYiJ;AAAA,MACpB;AACM,aAAOrvE;AAAA,IACb,CAAK,GAEDskE,EAAM,IAAI,WAAW;AAAA,MACnB,SAAS;AAAA,MACT,MAAM4K,GAAY;AAAA,IACxB,GAEQn3E,EAAM,SAAMusE,EAAM,MAAMvsE,EAAM,IAAI,IAAIA;AAAA,EAC9C,CAAG,GAEDusE,EAAM,WAAW1K,GAAOuV,EAAI,OAAOC,CAAQ,CAAC,GAC5C9K,EAAM,SAAS,CAAA,GAERA;AACT,GC/DI8K,KAAW;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAEAh2E,KAAiB,SAAUk2E,GAAYC,GAAsB;AAC3D,WAASxvE,IAAE,GAAGA,IAAEwvE,EAAqB,QAAQxvE,KAAK;AAChD,IAAAuvE,IAAa,KAAK,MAAM,KAAK,UAAUA,CAAU,CAAC;AAClD,QAAInT,IAAWoT,EAAqBxvE,CAAC,EAAE,MAAM,GAAG,GAC5CyvE,IAAWF,GACXxe;AACJ,SAAKA,IAAE,GAAGA,IAAEqL,EAAS,QAAQrL;AAC3B,MAAA0e,IAAWA,EAASrT,EAASrL,CAAC,CAAC;AAEjC,SAAKA,IAAE,GAAGA,IAAEse,GAAS,QAAQte,KAAK;AAChC,UAAIvmD,IAAM6kE,GAASte,CAAC,GAChB3xD,IAASqwE,EAASjlE,CAAG;AACzB,MAAIpL,MACFqwE,EAASjlE,CAAG,IAAI;AAAA,QACd,OAAO;AAAA,UACLpL;AAAA,UACA,EAAE,MAAM,iFAAgF;AAAA,QACpG;AAAA,MACA;AAAA,IAEA;AAAA,EACA;AAEE,SAAOmwE;AACT,GC9CIhQ,KAAkBn8B,GAA2B,YAEjDssC,KAAiBC;AAYjB,SAASA,GAAavwE,GAAQwwE,GAAMl/D,GAAU;AAI5C,MAAIyuD,IAAO;AACX,MAAI,OAAO,KAAK,MAAM,cAAc;AAClC,UAAM,IAAI,MAAM,yCAAyC;AAE3D,EAAI,OAAOyQ,KAAQ,eACjBl/D,IAAWk/D,GACXA,IAAO;AAGT,MAAIh9D,IAAIi9D,EAAiBzwE,CAAM,EAAE,KAAK,WAAY;AAChD,QAAI0wE,IAAY3Q,EAAK,WAAW//D,GAAQ,QAAWwwE,CAAI;AACvD,WAAOE,EAAU,YAAYC,EAAcD,CAAS;AAAA,EACxD,CAAG;AAED,SAAIp/D,KACFkC,EAAE;AAAA,IACA,SAAS4e,GAAG;AAAE,MAAA9gB,EAAS,MAAM8gB,CAAC;AAAA,IAAE;AAAA,IAChC9gB;AAAA,EACN,GAGSkC;AAGP,WAASi9D,EAAiBzS,GAAK;AAC7B,QAAIyD,IAAUzD,EAAI;AAClB,WAAOyD,KAAW,CAAC1B,EAAK,UAAU0B,CAAO,IAC/B8O,GAAa,KAAKxQ,GAAM,EAAE,MAAM0B,EAAO,GAAI,EAAI,IAC/C,QAAQ,QAAO;AAAA,EAC7B;AAGE,WAASkP,EAAcD,GAAW;AAChC,QAAI;AAAE,aAAO3Q,EAAK,SAAS2Q,CAAS;AAAA,IAAE,SAChC5xC,GAAG;AACP,UAAIA,aAAaqhC,GAAiB,QAAOyQ,EAAkB9xC,CAAC;AAC5D,YAAMA;AAAA,IACZ;AAGI,aAAS8xC,EAAkB9xC,GAAG;AAC5B,UAAIphC,IAAMohC,EAAE;AACZ,UAAIja,EAAMnnB,CAAG,EAAG,OAAM,IAAI,MAAM,YAAYA,IAAM,oBAAoBohC,EAAE,aAAa,qBAAqB;AAE1G,UAAI+xC,IAAgB9Q,EAAK,gBAAgBriE,CAAG;AAC5C,aAAKmzE,MACHA,IAAgB9Q,EAAK,gBAAgBriE,CAAG,IAAIqiE,EAAK,MAAM,WAAWriE,CAAG,GACrEmzE,EAAc,KAAKC,GAAeA,CAAa,IAG1CD,EAAc,KAAK,SAAU7S,GAAK;AACvC,YAAI,CAACn5C,EAAMnnB,CAAG;AACZ,iBAAO+yE,EAAiBzS,CAAG,EAAE,KAAK,WAAY;AAC5C,YAAKn5C,EAAMnnB,CAAG,KAAGqiE,EAAK,UAAU/B,GAAKtgE,GAAK,QAAW8yE,CAAI;AAAA,UACrE,CAAW;AAAA,MAEX,CAAO,EAAE,KAAK,WAAW;AACjB,eAAOG,EAAcD,CAAS;AAAA,MACtC,CAAO;AAED,eAASI,IAAgB;AACvB,eAAO/Q,EAAK,gBAAgBriE,CAAG;AAAA,MACvC;AAEM,eAASmnB,EAAMnnB,GAAK;AAClB,eAAOqiE,EAAK,MAAMriE,CAAG,KAAKqiE,EAAK,SAASriE,CAAG;AAAA,MACnD;AAAA,IACA;AAAA,EACA;AACA;ICxFAqzE,KAAiB,SAAyBhQ,GAAIC,GAAUC,GAAW;AACjE,MAAIlP,IAAM,KACNwP,IAAOR,EAAG,OACVS,IAAWT,EAAG,WACdU,IAAUV,EAAG,OAAOC,CAAQ,GAC5BU,IAAcX,EAAG,aAAaA,EAAG,KAAK,YAAYC,CAAQ,GAC1DW,IAAiBZ,EAAG,gBAAgB,MAAMC,GAC1CY,IAAgB,CAACb,EAAG,KAAK,WACzBc,GACAh8C,IAAQ,UAAU27C,KAAY,KAC9BM,IAAS,UAAUP,GACnBqI,IAAQ,WAAWrI,GACnB2I,IAAUnJ,EAAG,KAAK,SAASU,KAAWA,EAAQ,OAChD4J;AACF,EAAInB,KACFnY,KAAO,gBAAiBwP,IAAQ,QAASR,EAAG,KAAK,QAAQU,EAAQ,OAAOD,GAAUT,EAAG,WAAW,IAAK,MACrGsK,IAAe,WAAW9J,KAE1B8J,IAAe5J;AAEjB,MAAIsC,IAAQ,MACViN,IAAc,eAAezP,GAC7B0P,IAAQlN,EAAM,YACdyF,IAAiB,IACf0H,GAAUC,GAASC,GAAQC,GAAeC;AAC9C,MAAIpH,KAAW+G,EAAM,OAAO;AAC1B,IAAAK,IAAgB,oBAAoB/P;AACpC,QAAIgQ,IAAkBN,EAAM;AAC5B,IAAAlf,KAAO,UAAWif,IAAe,sBAAwBhQ,IAAY,wBAA0BsQ,IAAiB,QAASN,IAAe;AAAA,EAC5I,OAAS;AAEL,QADAK,IAAgBtQ,EAAG,cAAcgD,GAAOtC,GAASV,EAAG,QAAQA,CAAE,GAC1D,CAACsQ,EAAe;AACpB,IAAAhG,IAAe,oBAAoB3J,GACnC4P,IAAgBD,EAAc,MAC9BH,IAAWD,EAAM,SACjBE,IAAUF,EAAM,QAChBG,IAASH,EAAM;AAAA,EACnB;AACE,MAAIO,IAAYF,IAAgB,WAC9BvO,IAAK,MAAMxB,GACXkQ,IAAW,YAAYlQ,GACvBmQ,IAAgBT,EAAM;AACxB,MAAIS,KAAiB,CAAC3Q,EAAG,MAAO,OAAM,IAAI,MAAM,8BAA8B;AAa9E,MAZMoQ,KAAWC,MACfrf,KAAO,KAAMyf,IAAa,aAE5Bzf,KAAO,SAAU6X,IAAS,mBAAoB9H,IAAU,KACpDoI,KAAW+G,EAAM,UACnBzH,KAAkB,KAClBzX,KAAO,UAAWsZ,IAAgB,uBAAwBvJ,IAAU,sBAChEyP,MACF/H,KAAkB,KAClBzX,KAAO,MAAO+P,IAAU,QAASkP,IAAe,qBAAsB3F,IAAgB,YAAavJ,IAAU,UAG7GqP;AACF,IAAIF,EAAM,aACRlf,KAAO,MAAOsf,EAAc,WAAY,MAExCtf,KAAO,MAAO+P,IAAU,QAASuP,EAAc,WAAY;AAAA,WAEpDD,GAAQ;AACjB,QAAIhI,IAAMrI,EAAG,KAAK,KAAKA,CAAE,GACrByI,IAAiB;AACrB,IAAAJ,EAAI;AACJ,QAAIC,KAAa,UAAUD,EAAI;AAC/B,IAAAA,EAAI,SAASiI,EAAc,UAC3BjI,EAAI,aAAa;AACjB,QAAIU,KAAgB/I,EAAG;AACvB,IAAAA,EAAG,gBAAgBqI,EAAI,gBAAgB;AACvC,QAAIjF,KAAQpD,EAAG,SAASqI,CAAG,EAAE,QAAQ,qBAAqBkI,CAAa;AACvE,IAAAvQ,EAAG,gBAAgBqI,EAAI,gBAAgBU,IACvC/X,KAAO,MAAOoS;AAAA,EAClB,OAAS;AACL,QAAIpC,KAAaA,MAAc,CAAA;AAC/B,IAAAA,GAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACNA,KAAO,OAAQuf,IAAiB,WAC5BvQ,EAAG,KAAK,cACVhP,KAAO,SAEPA,KAAO,QAELmf,KAAYD,EAAM,WAAW,KAC/Blf,KAAO,QAASlsC,IAAS,MAEzBksC,KAAO,QAASsZ,IAAgB,QAASxlD,IAAS,uBAAwBk7C,EAAG,aAAc,KAE7FhP,KAAO,uBACHgP,EAAG,aAAa,SAClBhP,KAAO,QAASgP,EAAG;AAErB,QAAIkC,KAAczB,IAAW,UAAWA,IAAW,KAAM,MAAM,cAC7D0B,KAAsB1B,IAAWT,EAAG,YAAYS,CAAQ,IAAI;AAC9D,IAAAzP,KAAO,QAASkR,KAAe,QAASC,KAAuB;AAC/D,QAAIyO,KAAuB5f;AAC3B,IAAAA,IAAMgQ,GAAW,IAAG,GAChBkP,EAAM,WAAW,MACnBlf,KAAO,MAAO+P,IAAU,OACpB4P,MACF3f,KAAO,WAETA,KAAO,KAAM4f,KAAwB,QAEjCD,KACFF,IAAY,iBAAiBjQ,GAC7BxP,KAAO,UAAWyf,IAAa,oBAAqB1P,IAAU,cAAe6P,KAAwB,qBAAsB7P,IAAU,iDAAkD0P,IAAa,mCAEpMzf,KAAO,MAAOyf,IAAa,cAAe1P,IAAU,QAAS6P,KAAwB;AAAA,EAG7F;AAKE,MAJIV,EAAM,cACRlf,KAAO,UAAWkR,KAAe,OAAQp9C,IAAS,QAASo9C,KAAe,MAAOC,KAAuB,OAE1GnR,KAAO,KAAMyX,GACTyH,EAAM;AACR,IAAIrP,MACF7P,KAAO;AAAA,OAEJ;AACL,IAAAA,KAAO,UACHkf,EAAM,UAAU,UAClBlf,KAAO,MACHqf,IACFrf,KAAO,KAAMsX,KAEbtX,KAAO,KAAM+P,KAGf/P,KAAO,MAAO,CAACkf,EAAM,QAAS,KAEhClf,KAAO,QACP8P,IAAgBkC,EAAM;AACtB,QAAIhC,KAAaA,MAAc,CAAA;AAC/B,IAAAA,GAAW,KAAKhQ,CAAG,GACnBA,IAAM;AACN,QAAIgQ,KAAaA,MAAc,CAAA;AAC/B,IAAAA,GAAW,KAAKhQ,CAAG,GACnBA,IAAM,IACFgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,YAAY,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,4BAA8BoC,EAAM,UAAW,QAC5NhD,EAAG,KAAK,aAAa,OACvBhP,KAAO,+BAAiCgS,EAAM,UAAW,2BAEvDhD,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO;AAET,QAAIiQ,IAAQjQ;AACZ,IAAAA,IAAMgQ,GAAW,IAAG,GAChB,CAAChB,EAAG,iBAAiBa,IAEnBb,EAAG,QACLhP,KAAO,iCAAkCiQ,IAAS,SAElDjQ,KAAO,yBAA0BiQ,IAAS,sBAG5CjQ,KAAO,gBAAiBiQ,IAAS;AAEnC,QAAI4P,IAAkB7f;AACtB,IAAAA,IAAMgQ,GAAW,IAAG,GAChBoP,IACEF,EAAM,SACJA,EAAM,UAAU,WAClBlf,KAAO,gBAAiBgR,IAAM,MAAO6G,IAAS,OAAQ7G,IAAM,cAAeA,IAAM,eAAgB0O,IAAY,gBAAiB1O,IAAM,YAAa0O,IAAY,8BAA+BA,IAAY,oCAAuC1Q,EAAG,YAAa,WAAY0Q,IAAY,kCAAmCA,IAAY,oBAAqB9P,IAAkB,SACzWZ,EAAG,KAAK,YACVhP,KAAO,MAAO0f,IAAY,eAAgBpG,IAAgB,OAAQoG,IAAY,aAAc5rD,IAAS,OAEvGksC,KAAO,SAGLkf,EAAM,WAAW,KACnBlf,KAAO,MAAO6f,IAAmB,OAEjC7f,KAAO,UAAW6X,IAAS,mBAAoBgI,IAAmB,yBAA0B7O,IAAM,MAAO6G,IAAS,OAAQ7G,IAAM,cAAeA,IAAM,eAAgB0O,IAAY,gBAAiB1O,IAAM,YAAa0O,IAAY,8BAA+BA,IAAY,oCAAuC1Q,EAAG,YAAa,WAAY0Q,IAAY,kCAAmCA,IAAY,oBAAqB9P,IAAkB,SAC7aZ,EAAG,KAAK,YACVhP,KAAO,MAAO0f,IAAY,eAAgBpG,IAAgB,OAAQoG,IAAY,aAAc5rD,IAAS,OAEvGksC,KAAO,WAGFqf,KACTrf,KAAO,mBACHgP,EAAG,iBAAiB,MACtBhP,KAAO,mBAAoB8P,KAAiB,YAAY,sCAA0Cd,EAAG,YAAa,oBAAqBA,EAAG,KAAK,eAAeY,CAAc,IAAK,4BAA8BoC,EAAM,UAAW,QAC5NhD,EAAG,KAAK,aAAa,OACvBhP,KAAO,+BAAiCgS,EAAM,UAAW,2BAEvDhD,EAAG,KAAK,YACVhP,KAAO,+BAAgC2P,IAAe,qCAAsCX,EAAG,aAAc,cAAel7C,IAAS,MAEvIksC,KAAO,SAEPA,KAAO,QAETA,KAAO,gFACH,CAACgP,EAAG,iBAAiBa,MAEnBb,EAAG,QACLhP,KAAO,0CAEPA,KAAO,iDAIPkf,EAAM,WAAW,KACnBlf,KAAO,MAAO6f,IAAmB,OAEjC7f,KAAO,wBAAyByf,IAAa,0CAA2CA,IAAa,qCAAsCA,IAAa,2CAA4CzO,IAAM,MAAO6G,IAAS,OAAQ7G,IAAM,cAAeA,IAAM,eAAgB0O,IAAY,gBAAiB1O,IAAM,YAAa0O,IAAY,8BAA+BA,IAAY,oCAAuC1Q,EAAG,YAAa,QAAS0Q,IAAY,oBAAqB9P,IAAkB,QACneZ,EAAG,KAAK,YACVhP,KAAO,MAAO0f,IAAY,eAAgBpG,IAAgB,OAAQoG,IAAY,aAAc5rD,IAAS,OAEvGksC,KAAO,iBAAkB6f,IAAmB,QAGhD7f,KAAO,OACH6P,MACF7P,KAAO;AAAA,EAEb;AACE,SAAOA;AACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjOA,IAAIoe,KAAansC,IAEjB6tC,KAAiB;AAAA,EACf,KAAK;AAAA,EACL,aAAa;AAAA,IACX,aAAa1B,GAAW,YAAY;AAAA,EACxC;AAAA,EACE,MAAM;AAAA,EACN,cAAc;AAAA,IACZ,QAAQ,CAAC,UAAU;AAAA,IACnB,OAAO,CAAC,UAAU;AAAA,IAClB,YAAY,CAAC,QAAQ;AAAA,IACrB,OAAO,EAAC,KAAK,EAAC,UAAU,CAAC,OAAO,EAAC,EAAC;AAAA,EACtC;AAAA,EACE,YAAY;AAAA,IACV,MAAMA,GAAW,WAAW;AAAA,IAC5B,QAAQ,EAAC,MAAM,UAAS;AAAA,IACxB,YAAY,EAAC,MAAM,UAAS;AAAA,IAC5B,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,OAAO,EAAC,MAAM,SAAQ;AAAA,IAC5B;AAAA,IACI,YAAY,EAAC,MAAM,SAAQ;AAAA,IAC3B,WAAW,EAAC,MAAM,UAAS;AAAA,IAC3B,OAAO,EAAC,MAAM,UAAS;AAAA,IACvB,OAAO,EAAC,MAAM,UAAS;AAAA,IACvB,OAAO,EAAC,MAAM,UAAS;AAAA,IACvB,QAAQ;AAAA,MACN,OAAO;AAAA,QACL,EAAC,MAAM,UAAS;AAAA,QAChB,EAAC,OAAO,OAAM;AAAA,MACtB;AAAA,IACA;AAAA,EACA;AACA,GClCIjU,KAAa,0BACbgK,KAAiBliC,IACjB8tC,KAAmB/pC,IAEvBk/B,KAAiB;AAAA,EACf,KAAK8K;AAAA,EACL,KAAKC;AAAA,EACL,QAAQC;AAAA,EACR,UAAUC;AACZ;AAUA,SAASH,GAAW9K,GAASkL,GAAY;AAGvC,MAAIhN,IAAQ,KAAK;AACjB,MAAIA,EAAM,SAAS8B,CAAO;AACxB,UAAM,IAAI,MAAM,aAAaA,IAAU,qBAAqB;AAE9D,MAAI,CAAC/K,GAAW,KAAK+K,CAAO;AAC1B,UAAM,IAAI,MAAM,aAAaA,IAAU,4BAA4B;AAErE,MAAIkL,GAAY;AACd,SAAK,gBAAgBA,GAAY,EAAI;AAErC,QAAI1lD,IAAW0lD,EAAW;AAC1B,QAAI,MAAM,QAAQ1lD,CAAQ;AACxB,eAAS7rB,IAAE,GAAGA,IAAE6rB,EAAS,QAAQ7rB;AAC/B,QAAAwxE,EAASnL,GAASx6C,EAAS7rB,CAAC,GAAGuxE,CAAU;AAAA;AAE3C,MAAAC,EAASnL,GAASx6C,GAAU0lD,CAAU;AAGxC,QAAIhC,IAAagC,EAAW;AAC5B,IAAIhC,MACEgC,EAAW,SAAS,KAAK,MAAM,UACjChC,IAAa;AAAA,MACX,OAAO;AAAA,QACLA;AAAA,QACA,EAAE,MAAQ,iFAAgF;AAAA,MACtG;AAAA,IACA,IAEMgC,EAAW,iBAAiB,KAAK,QAAQhC,GAAY,EAAI;AAAA,EAE/D;AAEE,EAAAhL,EAAM,SAAS8B,CAAO,IAAI9B,EAAM,IAAI8B,CAAO,IAAI;AAG/C,WAASmL,EAASnL,GAASx6C,GAAU0lD,GAAY;AAE/C,aADIE,GACKzxE,IAAE,GAAGA,IAAEukE,EAAM,QAAQvkE,KAAK;AACjC,UAAI0xE,IAAKnN,EAAMvkE,CAAC;AAChB,UAAI0xE,EAAG,QAAQ7lD,GAAU;AACvB,QAAA4lD,IAAYC;AACZ;AAAA,MACR;AAAA,IACA;AAEI,IAAKD,MACHA,IAAY,EAAE,MAAM5lD,GAAU,OAAO,CAAA,EAAE,GACvC04C,EAAM,KAAKkN,CAAS;AAGtB,QAAIxxE,IAAO;AAAA,MACT,SAASomE;AAAA,MACT,YAAYkL;AAAA,MACZ,QAAQ;AAAA,MACR,MAAMjM;AAAA,MACN,YAAYiM,EAAW;AAAA,IAC7B;AACI,IAAAE,EAAU,MAAM,KAAKxxE,CAAI,GACzBskE,EAAM,OAAO8B,CAAO,IAAIpmE;AAAA,EAC5B;AAEE,SAAO;AACT;AASA,SAASmxE,GAAW/K,GAAS;AAE3B,MAAIpmE,IAAO,KAAK,MAAM,OAAOomE,CAAO;AACpC,SAAOpmE,IAAOA,EAAK,aAAa,KAAK,MAAM,SAASomE,CAAO,KAAK;AAClE;AASA,SAASgL,GAAchL,GAAS;AAE9B,MAAI9B,IAAQ,KAAK;AACjB,SAAOA,EAAM,SAAS8B,CAAO,GAC7B,OAAO9B,EAAM,IAAI8B,CAAO,GACxB,OAAO9B,EAAM,OAAO8B,CAAO;AAC3B,WAASrmE,IAAE,GAAGA,IAAEukE,EAAM,QAAQvkE;AAE5B,aADI/D,IAAQsoE,EAAMvkE,CAAC,EAAE,OACZ+wD,IAAE,GAAGA,IAAE90D,EAAM,QAAQ80D;AAC5B,UAAI90D,EAAM80D,CAAC,EAAE,WAAWsV,GAAS;AAC/B,QAAApqE,EAAM,OAAO80D,GAAG,CAAC;AACjB;AAAA,MACR;AAGE,SAAO;AACT;AAUA,SAASugB,GAAgBC,GAAYI,GAAY;AAC/C,EAAAL,GAAgB,SAAS;AACzB,MAAI9/C,IAAI,KAAK,mBAAmB,KAAK,oBACF,KAAK,QAAQ0/C,IAAkB,EAAI;AAEtE,MAAI1/C,EAAE+/C,CAAU,EAAG,QAAO;AAE1B,MADAD,GAAgB,SAAS9/C,EAAE,QACvBmgD;AACF,UAAM,IAAI,MAAM,2CAA4C,KAAK,WAAWngD,EAAE,MAAM,CAAC;AAErF,SAAO;AACX;;;;;;;;;;;;;;;;;;;;;;;;AC/IA,IAAIogD,KAAgBxuC,IAChBqH,KAAUtD,IACVw/B,KAAQt/B,IACRk1B,KAAelwB,IACfs3B,KAAkBr3B,IAClBg4B,KAAU/3B,IACVtwC,KAAQuwC,IACRqlC,KAAkBnlC,IAClByG,KAAOxG,IAEXmlC,KAAiBC;AAEjBA,GAAI,UAAU,WAAW7R;AACzB6R,GAAI,UAAU,UAAUjU;AACxBiU,GAAI,UAAU,YAAYC;AAC1BD,GAAI,UAAU,gBAAgBE;AAC9BF,GAAI,UAAU,iBAAiBzL;AAC/ByL,GAAI,UAAU,YAAYpzE;AAC1BozE,GAAI,UAAU,eAAeG;AAC7BH,GAAI,UAAU,YAAYI;AAC1BJ,GAAI,UAAU,aAAaK;AAE3BL,GAAI,UAAU,aAAaM;AAC3BN,GAAI,UAAU,WAAWO;AAEzBP,GAAI,UAAU,eAAenlC;AAC7B,IAAI2lC,KAAgB1lC;AACpBklC,GAAI,UAAU,aAAaQ,GAAc;AACzCR,GAAI,UAAU,aAAaQ,GAAc;AACzCR,GAAI,UAAU,gBAAgBQ,GAAc;AAC5CR,GAAI,UAAU,kBAAkBQ,GAAc;AAE9C,IAAI7O,KAAe52B;AACnBilC,GAAI,kBAAkBrO,GAAa;AACnCqO,GAAI,kBAAkBrO,GAAa;AACnCqO,GAAI,kBAAkBF;AAEtB,IAAIW,KAAiB,0CAEjBC,KAAsB,CAAE,oBAAoB,eAAe,eAAe,gBAAgB,GAC1FC,KAAoB,CAAC,aAAa;AAQtC,SAASX,GAAIvhC,GAAM;AACjB,MAAI,EAAE,gBAAgBuhC,IAAM,QAAO,IAAIA,GAAIvhC,CAAI;AAC/C,EAAAA,IAAO,KAAK,QAAQ2C,GAAK,KAAK3C,CAAI,KAAK,CAAA,GACvCmiC,GAAU,IAAI,GACd,KAAK,WAAW,CAAA,GAChB,KAAK,QAAQ,CAAA,GACb,KAAK,aAAa,CAAA,GAClB,KAAK,WAAWrO,GAAQ9zB,EAAK,MAAM,GAEnC,KAAK,SAASA,EAAK,SAAS,IAAIm2B,MAChC,KAAK,kBAAkB,CAAA,GACvB,KAAK,gBAAgB,CAAA,GACrB,KAAK,QAAQ1qE,GAAK,GAClB,KAAK,SAAS22E,GAAYpiC,CAAI,GAE9BA,EAAK,eAAeA,EAAK,gBAAgB,OACrCA,EAAK,iBAAiB,eAAYA,EAAK,yBAAyB,KAChEA,EAAK,cAAc,WAAWA,EAAK,YAAYmzB,KACnD,KAAK,YAAYkP,GAAqB,IAAI,GAEtCriC,EAAK,WAASsiC,GAAkB,IAAI,GACpCtiC,EAAK,YAAUuiC,GAAmB,IAAI,GAC1CC,GAAqB,IAAI,GACrB,OAAOxiC,EAAK,QAAQ,YAAU,KAAK,cAAcA,EAAK,IAAI,GAC1DA,EAAK,YAAU,KAAK,WAAW,YAAY,EAAC,YAAY,EAAC,MAAM,UAAS,EAAC,CAAC,GAC9EyiC,GAAkB,IAAI;AACxB;AAYA,SAAS/S,GAASgT,GAAc75E,GAAM;AACpC,MAAIm4B;AACJ,MAAI,OAAO0hD,KAAgB;AAEzB,QADA1hD,IAAI,KAAK,UAAU0hD,CAAY,GAC3B,CAAC1hD,EAAG,OAAM,IAAI,MAAM,gCAAgC0hD,IAAe,GAAG;AAAA,SACrE;AACL,QAAIpD,IAAY,KAAK,WAAWoD,CAAY;AAC5C,IAAA1hD,IAAIs+C,EAAU,YAAY,KAAK,SAASA,CAAS;AAAA,EACrD;AAEE,MAAI91C,IAAQxI,EAAEn4B,CAAI;AAClB,SAAIm4B,EAAE,WAAW,OAAM,KAAK,SAASA,EAAE,SAChCwI;AACT;AAUA,SAAS8jC,GAAQ1+D,GAAQ+zE,GAAO;AAC9B,MAAIrD,IAAY,KAAK,WAAW1wE,GAAQ,QAAW+zE,CAAK;AACxD,SAAOrD,EAAU,YAAY,KAAK,SAASA,CAAS;AACtD;AAYA,SAASkC,GAAU5yE,GAAQoL,GAAK4oE,GAAiBD,GAAO;AACtD,MAAI,MAAM,QAAQ/zE,CAAM,GAAE;AACxB,aAASY,IAAE,GAAGA,IAAEZ,EAAO,QAAQY,IAAK,MAAK,UAAUZ,EAAOY,CAAC,GAAG,QAAWozE,GAAiBD,CAAK;AAC/F,WAAO;AAAA,EACX;AACE,MAAI32D,IAAK,KAAK,OAAOpd,CAAM;AAC3B,MAAIod,MAAO,UAAa,OAAOA,KAAM;AACnC,UAAM,IAAI,MAAM,0BAA0B;AAC5C,SAAAhS,IAAMigC,GAAQ,YAAYjgC,KAAOgS,CAAE,GACnC62D,GAAY,MAAM7oE,CAAG,GACrB,KAAK,SAASA,CAAG,IAAI,KAAK,WAAWpL,GAAQg0E,GAAiBD,GAAO,EAAI,GAClE;AACT;AAYA,SAASlB,GAAc7yE,GAAQoL,GAAK8oE,GAAgB;AAClD,cAAK,UAAUl0E,GAAQoL,GAAK8oE,GAAgB,EAAI,GACzC;AACT;AAUA,SAAShN,GAAelnE,GAAQm0E,GAAiB;AAC/C,MAAI1S,IAAUzhE,EAAO;AACrB,MAAIyhE,MAAY,UAAa,OAAOA,KAAW;AAC7C,UAAM,IAAI,MAAM,0BAA0B;AAE5C,MADAA,IAAUA,KAAW,KAAK,MAAM,eAAe2S,GAAY,IAAI,GAC3D,CAAC3S;AACH,gBAAK,OAAO,KAAK,2BAA2B,GAC5C,KAAK,SAAS,MACP;AAET,MAAI7mC,IAAQ,KAAK,SAAS6mC,GAASzhE,CAAM;AACzC,MAAI,CAAC46B,KAASu5C,GAAiB;AAC7B,QAAI9zE,IAAU,wBAAwB,KAAK,WAAU;AACrD,QAAI,KAAK,MAAM,kBAAkB,MAAO,MAAK,OAAO,MAAMA,CAAO;AAAA,QAC5D,OAAM,IAAI,MAAMA,CAAO;AAAA,EAChC;AACE,SAAOu6B;AACT;AAGA,SAASw5C,GAAYrU,GAAM;AACzB,MAAIyQ,IAAOzQ,EAAK,MAAM;AACtB,SAAAA,EAAK,MAAM,cAAc,OAAOyQ,KAAQ,WACZzQ,EAAK,OAAOyQ,CAAI,KAAKA,IACrBzQ,EAAK,UAAUqT,EAAc,IAC3BA,KACA,QACvBrT,EAAK,MAAM;AACpB;AASA,SAASxgE,GAAU80E,GAAQ;AACzB,MAAI3D,IAAY4D,GAAc,MAAMD,CAAM;AAC1C,UAAQ,OAAO3D,GAAS;AAAA,IACtB,KAAK;AAAU,aAAOA,EAAU,YAAY,KAAK,SAASA,CAAS;AAAA,IACnE,KAAK;AAAU,aAAO,KAAK,UAAUA,CAAS;AAAA,IAC9C,KAAK;AAAa,aAAO6D,GAAmB,MAAMF,CAAM;AAAA,EAC5D;AACA;AAGA,SAASE,GAAmBxU,GAAMriE,GAAK;AACrC,MAAIqmB,IAAMsnB,GAAQ,OAAO,KAAK00B,GAAM,EAAE,QAAQ,GAAE,GAAIriE,CAAG;AACvD,MAAIqmB,GAAK;AACP,QAAI/jB,IAAS+jB,EAAI,QACbzF,IAAOyF,EAAI,MACX66C,IAAS76C,EAAI,QACbqO,IAAIogD,GAAc,KAAKzS,GAAM//D,GAAQse,GAAM,QAAWsgD,CAAM;AAChE,WAAAmB,EAAK,WAAWriE,CAAG,IAAI,IAAIy/D,GAAa;AAAA,MACtC,KAAKz/D;AAAA,MACL,UAAU;AAAA,MACV,QAAQsC;AAAA,MACR,MAAMse;AAAA,MACN,QAAQsgD;AAAA,MACR,UAAUxsC;AAAA,IAChB,CAAK,GACMA;AAAA,EACX;AACA;AAGA,SAASkiD,GAAcvU,GAAMsU,GAAQ;AACnC,SAAAA,IAAShpC,GAAQ,YAAYgpC,CAAM,GAC5BtU,EAAK,SAASsU,CAAM,KAAKtU,EAAK,MAAMsU,CAAM,KAAKtU,EAAK,WAAWsU,CAAM;AAC9E;AAYA,SAASvB,GAAagB,GAAc;AAClC,MAAIA,aAAwB;AAC1B,WAAAU,GAAkB,MAAM,KAAK,UAAUV,CAAY,GACnDU,GAAkB,MAAM,KAAK,OAAOV,CAAY,GACzC;AAET,UAAQ,OAAOA,GAAY;AAAA,IACzB,KAAK;AACH,aAAAU,GAAkB,MAAM,KAAK,QAAQ,GACrCA,GAAkB,MAAM,KAAK,KAAK,GAClC,KAAK,OAAO,MAAK,GACV;AAAA,IACT,KAAK;AACH,UAAI9D,IAAY4D,GAAc,MAAMR,CAAY;AAChD,aAAIpD,KAAW,KAAK,OAAO,IAAIA,EAAU,QAAQ,GACjD,OAAO,KAAK,SAASoD,CAAY,GACjC,OAAO,KAAK,MAAMA,CAAY,GACvB;AAAA,IACT,KAAK;AACH,UAAIrd,IAAY,KAAK,MAAM,WACvBge,IAAWhe,IAAYA,EAAUqd,CAAY,IAAIA;AACrD,WAAK,OAAO,IAAIW,CAAQ;AACxB,UAAIr3D,IAAK,KAAK,OAAO02D,CAAY;AACjC,MAAI12D,MACFA,IAAKiuB,GAAQ,YAAYjuB,CAAE,GAC3B,OAAO,KAAK,SAASA,CAAE,GACvB,OAAO,KAAK,MAAMA,CAAE;AAAA,EAE5B;AACE,SAAO;AACT;AAGA,SAASo3D,GAAkBzU,GAAM3f,GAASz+B,GAAO;AAC/C,WAAS0yD,KAAUj0B,GAAS;AAC1B,QAAIswB,IAAYtwB,EAAQi0B,CAAM;AAC9B,IAAI,CAAC3D,EAAU,SAAS,CAAC/uD,KAASA,EAAM,KAAK0yD,CAAM,OACjDtU,EAAK,OAAO,IAAI2Q,EAAU,QAAQ,GAClC,OAAOtwB,EAAQi0B,CAAM;AAAA,EAE3B;AACA;AAIA,SAASpB,GAAWjzE,GAAQk0E,GAAgB1D,GAAMkE,GAAiB;AACjE,MAAI,OAAO10E,KAAU,YAAY,OAAOA,KAAU;AAChD,UAAM,IAAI,MAAM,oCAAoC;AACtD,MAAIy2D,IAAY,KAAK,MAAM,WACvBge,IAAWhe,IAAYA,EAAUz2D,CAAM,IAAIA,GAC3CyhB,IAAS,KAAK,OAAO,IAAIgzD,CAAQ;AACrC,MAAIhzD,EAAQ,QAAOA;AAEnB,EAAAizD,IAAkBA,KAAmB,KAAK,MAAM,kBAAkB;AAElE,MAAIt3D,IAAKiuB,GAAQ,YAAY,KAAK,OAAOrrC,CAAM,CAAC;AAChD,EAAIod,KAAMs3D,KAAiBT,GAAY,MAAM72D,CAAE;AAE/C,MAAIu3D,IAAe,KAAK,MAAM,mBAAmB,MAAS,CAACT,GACvDU;AACJ,EAAID,KAAgB,EAAEC,IAAgBx3D,KAAMA,KAAMiuB,GAAQ,YAAYrrC,EAAO,OAAO,MAClF,KAAK,eAAeA,GAAQ,EAAI;AAElC,MAAI8/D,IAAYz0B,GAAQ,IAAI,KAAK,MAAMrrC,CAAM,GAEzC0wE,IAAY,IAAIvT,GAAa;AAAA,IAC/B,IAAI//C;AAAA,IACJ,QAAQpd;AAAA,IACR,WAAW8/D;AAAA,IACX,UAAU2U;AAAA,IACV,MAAMjE;AAAA,EACV,CAAG;AAED,SAAIpzD,EAAG,CAAC,KAAK,OAAOs3D,MAAiB,KAAK,MAAMt3D,CAAE,IAAIszD,IACtD,KAAK,OAAO,IAAI+D,GAAU/D,CAAS,GAE/BiE,KAAgBC,KAAe,KAAK,eAAe50E,GAAQ,EAAI,GAE5D0wE;AACT;AAIA,SAASwC,GAASxC,GAAWpyD,GAAM;AACjC,MAAIoyD,EAAU;AACZ,WAAAA,EAAU,WAAWzL,GACrBA,EAAa,SAASyL,EAAU,QAChCzL,EAAa,SAAS,MACtBA,EAAa,OAAO3mD,KAAc2mD,GAC9ByL,EAAU,OAAO,WAAW,OAC9BzL,EAAa,SAAS,KACjBA;AAET,EAAAyL,EAAU,YAAY;AAEtB,MAAImE;AACJ,EAAInE,EAAU,SACZmE,IAAc,KAAK,OACnB,KAAK,QAAQ,KAAK;AAGpB,MAAIziD;AACJ,MAAI;AAAE,IAAAA,IAAIogD,GAAc,KAAK,MAAM9B,EAAU,QAAQpyD,GAAMoyD,EAAU,SAAS;AAAA,EAAE,SAC1E5xC,GAAG;AACP,iBAAO4xC,EAAU,UACX5xC;AAAA,EACV,UACA;AACI,IAAA4xC,EAAU,YAAY,IAClBA,EAAU,SAAM,KAAK,QAAQmE;AAAA,EACrC;AAEE,SAAAnE,EAAU,WAAWt+C,GACrBs+C,EAAU,OAAOt+C,EAAE,MACnBs+C,EAAU,SAASt+C,EAAE,QACrBs+C,EAAU,OAAOt+C,EAAE,MACZA;AAIP,WAAS6yC,IAAe;AAEtB,QAAI6P,IAAYpE,EAAU,UACtBx1E,IAAS45E,EAAU,MAAM,MAAM,SAAS;AAC5C,WAAA7P,EAAa,SAAS6P,EAAU,QACzB55E;AAAA,EACX;AACA;AAGA,SAASs4E,GAAYpiC,GAAM;AACzB,UAAQA,EAAK,UAAQ;AAAA,IACnB,KAAK;AAAQ,aAAO2jC;AAAA,IACpB,KAAK;AAAM,aAAOC;AAAA,IAClB;AAAS,aAAOC;AAAA,EACpB;AACA;AAGA,SAASD,GAAOh1E,GAAQ;AACtB,SAAIA,EAAO,OAAK,KAAK,OAAO,KAAK,sBAAsBA,EAAO,GAAG,GAC1DA,EAAO;AAChB;AAGA,SAASi1E,GAAQj1E,GAAQ;AACvB,SAAIA,EAAO,MAAI,KAAK,OAAO,KAAK,qBAAqBA,EAAO,EAAE,GACvDA,EAAO;AAChB;AAGA,SAAS+0E,GAAY/0E,GAAQ;AAC3B,MAAIA,EAAO,OAAOA,EAAO,MAAMA,EAAO,OAAOA,EAAO;AAClD,UAAM,IAAI,MAAM,iCAAiC;AACnD,SAAOA,EAAO,OAAOA,EAAO;AAC9B;AAUA,SAASgzE,GAAWhjB,GAAQngD,GAAS;AAEnC,MADAmgD,IAASA,KAAU,KAAK,QACpB,CAACA,EAAQ,QAAO;AACpB,EAAAngD,IAAUA,KAAW,CAAA;AAKrB,WAJI6kC,IAAY7kC,EAAQ,cAAc,SAAY,OAAOA,EAAQ,WAC7DusD,IAAUvsD,EAAQ,YAAY,SAAY,SAASA,EAAQ,SAE3DgZ,IAAO,IACFjoB,IAAE,GAAGA,IAAEovD,EAAO,QAAQpvD,KAAK;AAClC,QAAIk+B,IAAIkxB,EAAOpvD,CAAC;AAChB,IAAIk+B,MAAGjW,KAAQuzC,IAAUt9B,EAAE,WAAW,MAAMA,EAAE,UAAU4V;AAAA,EAC5D;AACE,SAAO7rB,EAAK,MAAM,GAAG,CAAC6rB,EAAU,MAAM;AACxC;AAUA,SAASq+B,GAAU5lE,GAAM6mB,GAAQ;AAC/B,SAAI,OAAOA,KAAU,aAAUA,IAAS,IAAI,OAAOA,CAAM,IACzD,KAAK,SAAS7mB,CAAI,IAAI6mB,GACf;AACT;AAGA,SAAS4/C,GAAqB7T,GAAM;AAClC,MAAImV;AAKJ,MAJInV,EAAK,MAAM,UACbmV,IAAc5hC,IACdysB,EAAK,cAAcmV,GAAaA,EAAY,KAAK,EAAI,IAEnDnV,EAAK,MAAM,SAAS,IACxB;AAAA,QAAIoQ,IAAa58B;AACjB,IAAIwsB,EAAK,MAAM,UAAOoQ,IAAasC,GAAgBtC,GAAYmD,EAAiB,IAChFvT,EAAK,cAAcoQ,GAAYiD,IAAgB,EAAI,GACnDrT,EAAK,MAAM,+BAA+B,IAAIqT;AAAA;AAChD;AAGA,SAASS,GAAkB9T,GAAM;AAC/B,MAAIoV,IAAcpV,EAAK,MAAM;AAC7B,MAAKoV;AACL,QAAI,MAAM,QAAQA,CAAW,EAAG,CAAApV,EAAK,UAAUoV,CAAW;AAAA,QACrD,UAAS/pE,KAAO+pE,EAAa,CAAApV,EAAK,UAAUoV,EAAY/pE,CAAG,GAAGA,CAAG;AACxE;AAGA,SAASsoE,GAAkB3T,GAAM;AAC/B,WAAS5yD,KAAQ4yD,EAAK,MAAM,SAAS;AACnC,QAAI/rC,IAAS+rC,EAAK,MAAM,QAAQ5yD,CAAI;AACpC,IAAA4yD,EAAK,UAAU5yD,GAAM6mB,CAAM;AAAA,EAC/B;AACA;AAGA,SAAS2/C,GAAmB5T,GAAM;AAChC,WAAS5yD,KAAQ4yD,EAAK,MAAM,UAAU;AACpC,QAAIkH,IAAUlH,EAAK,MAAM,SAAS5yD,CAAI;AACtC,IAAA4yD,EAAK,WAAW5yD,GAAM85D,CAAO;AAAA,EACjC;AACA;AAGA,SAASgN,GAAYlU,GAAM3iD,GAAI;AAC7B,MAAI2iD,EAAK,SAAS3iD,CAAE,KAAK2iD,EAAK,MAAM3iD,CAAE;AACpC,UAAM,IAAI,MAAM,4BAA4BA,IAAK,kBAAkB;AACvE;AAGA,SAASq2D,GAAqB1T,GAAM;AAElC,WADIqV,IAAWrhC,GAAK,KAAKgsB,EAAK,KAAK,GAC1Bn/D,IAAE,GAAGA,IAAEyyE,GAAoB,QAAQzyE;AAC1C,WAAOw0E,EAAS/B,GAAoBzyE,CAAC,CAAC;AACxC,SAAOw0E;AACT;AAGA,SAAS7B,GAAUxT,GAAM;AACvB,MAAIsV,IAAStV,EAAK,MAAM;AACxB,MAAIsV,MAAW;AACb,IAAAtV,EAAK,SAAS,EAAC,KAAKuV,IAAM,MAAMA,IAAM,OAAOA,GAAI;AAAA,OAC5C;AAEL,QADID,MAAW,WAAWA,IAAS,UAC/B,EAAE,OAAOA,KAAU,YAAYA,EAAO,OAAOA,EAAO,QAAQA,EAAO;AACrE,YAAM,IAAI,MAAM,mDAAmD;AACrE,IAAAtV,EAAK,SAASsV;AAAA,EAClB;AACA;AAGA,SAASC,KAAO;AAAA;;AC7dT,MAAMC,WAAenrB,GAAS;AAAA;AAAA;AAAA;AAAA,EAIjC,YAAYorB,GAAa3lE,GAAS;AAC9B,QAAIjW;AACJ,UAAMiW,CAAO,GACb,KAAK,cAAc2lE,GACnB,KAAK,8BAA8B,oBAAI,IAAG,GAC1C,KAAK,iBAAiB57E,IAAKiW,KAAY,OAA6B,SAASA,EAAQ,kBAAkB,QAAQjW,MAAO,SAASA,IAAK,CAAA,GACpI,KAAK,OAAO,IAAI+4E,GAAG;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,qBAAqB8C,GAAc;AAC/B,QAAI,KAAK;AACL,YAAM,IAAI,MAAM,4DAA4D;AAEhF,SAAK,gBAAgBrpB,GAAkB,KAAK,eAAeqpB,CAAY;AAAA,EAC3E;AAAA,EACA,iBAAiBC,GAAY/lC,GAAQ;AACjC,QAAI/1C;AACJ,QAAI,EAAG,GAAAA,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG87E,CAAU;AACpF,YAAM,IAAI,MAAM,2BAA2BA,CAAU,kBAAkB/lC,CAAM,GAAG;AAAA,EAExF;AAAA,EACA,MAAM,QAAQob,GAAWl7C,GAAS;AAI9B,QAHA,MAAM,MAAM,QAAQk7C,CAAS,GAGzBA,EAAU,cAAc;AAG5B,UAAI;AACA,cAAM7vD,IAAS,MAAM,KAAK,QAAQ;AAAA,UAC9B,QAAQ;AAAA,UACR,QAAQ;AAAA,YACJ,iBAAiBgoD;AAAA,YACjB,cAAc,KAAK;AAAA,YACnB,YAAY,KAAK;AAAA,UACrC;AAAA,QACA,GAAeuC,IAAwB51C,CAAO;AAClC,YAAI3U,MAAW;AACX,gBAAM,IAAI,MAAM,0CAA0CA,CAAM,EAAE;AAEtE,YAAI,CAACioD,GAA4B,SAASjoD,EAAO,eAAe;AAC5D,gBAAM,IAAI,MAAM,+CAA+CA,EAAO,eAAe,EAAE;AAE3F,aAAK,sBAAsBA,EAAO,cAClC,KAAK,iBAAiBA,EAAO,YAEzB6vD,EAAU,sBACVA,EAAU,mBAAmB7vD,EAAO,eAAe,GAEvD,KAAK,gBAAgBA,EAAO,cAC5B,MAAM,KAAK,aAAa;AAAA,UACpB,QAAQ;AAAA,QACxB,CAAa;AAAA,MACL,SACO4F,GAAO;AAEV,cAAK,KAAK,MAAK,GACTA;AAAA,MACV;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,wBAAwB;AACpB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAIA,mBAAmB;AACf,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAIA,kBAAkB;AACd,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,0BAA0B6uC,GAAQ;AAC9B,QAAI/1C,GAAIwB,GAAI6C,GAAIE,GAAID;AACpB,YAAQyxC,GAAM;AAAA,MACV,KAAK;AACD,YAAI,EAAG,GAAA/1C,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,iDAAiD+1C,CAAM,GAAG;AAE9E;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,YAAI,EAAG,GAAAv0C,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,iDAAiDu0C,CAAM,GAAG;AAE9E;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,YAAI,EAAG,GAAA1xC,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,mDAAmD0xC,CAAM,GAAG;AAEhF,YAAIA,MAAW,yBACX,CAAC,KAAK,oBAAoB,UAAU;AACpC,gBAAM,IAAI,MAAM,gEAAgEA,CAAM,GAAG;AAE7F;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,YAAI,EAAG,GAAAxxC,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,+CAA+CwxC,CAAM,GAAG;AAE5E;AAAA,MACJ,KAAK;AACD,YAAI,EAAG,GAAAzxC,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,qDAAqDyxC,CAAM,GAAG;AAElF;AAAA,IAOhB;AAAA,EACI;AAAA,EACA,6BAA6BA,GAAQ;AACjC,QAAI/1C;AACJ,YAAQ+1C,GAAM;AAAA,MACV,KAAK;AACD,YAAI,EAAG,GAAA/1C,IAAK,KAAK,cAAc,WAAW,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,0EAA0E+1C,CAAM,GAAG;AAEvG;AAAA,IAUhB;AAAA,EACI;AAAA,EACA,+BAA+BA,GAAQ;AACnC,YAAQA,GAAM;AAAA,MACV,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,6DAA6DA,CAAM,GAAG;AAE1F;AAAA,MACJ,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,gEAAgEA,CAAM,GAAG;AAE7F;AAAA,MACJ,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,0DAA0DA,CAAM,GAAG;AAEvF;AAAA,IAIhB;AAAA,EACI;AAAA,EACA,MAAM,KAAK9/B,GAAS;AAChB,WAAO,KAAK,QAAQ,EAAE,QAAQ,OAAM,GAAIm1C,IAAmBn1C,CAAO;AAAA,EACtE;AAAA,EACA,MAAM,SAAS2Y,GAAQ3Y,GAAS;AAC5B,WAAO,KAAK,QAAQ,EAAE,QAAQ,uBAAuB,QAAA2Y,EAAM,GAAIqhC,IAAsBh6C,CAAO;AAAA,EAChG;AAAA,EACA,MAAM,gBAAgB8lE,GAAO9lE,GAAS;AAClC,WAAO,KAAK,QAAQ,EAAE,QAAQ,oBAAoB,QAAQ,EAAE,OAAA8lE,EAAK,EAAE,GAAI3wB,IAAmBn1C,CAAO;AAAA,EACrG;AAAA,EACA,MAAM,UAAU2Y,GAAQ3Y,GAAS;AAC7B,WAAO,KAAK,QAAQ,EAAE,QAAQ,eAAe,QAAA2Y,EAAM,GAAIw/B,IAAuBn4C,CAAO;AAAA,EACzF;AAAA,EACA,MAAM,YAAY2Y,GAAQ3Y,GAAS;AAC/B,WAAO,KAAK,QAAQ,EAAE,QAAQ,gBAAgB,QAAA2Y,EAAM,GAAI6+B,IAAyBx3C,CAAO;AAAA,EAC5F;AAAA,EACA,MAAM,cAAc2Y,GAAQ3Y,GAAS;AACjC,WAAO,KAAK,QAAQ,EAAE,QAAQ,kBAAkB,QAAA2Y,EAAM,GAAIg+B,IAA2B32C,CAAO;AAAA,EAChG;AAAA,EACA,MAAM,sBAAsB2Y,GAAQ3Y,GAAS;AACzC,WAAO,KAAK,QAAQ,EAAE,QAAQ,4BAA4B,QAAA2Y,EAAM,GAAIm+B,IAAmC92C,CAAO;AAAA,EAClH;AAAA,EACA,MAAM,aAAa2Y,GAAQ3Y,GAAS;AAChC,WAAO,KAAK,QAAQ,EAAE,QAAQ,kBAAkB,QAAA2Y,EAAM,GAAIq+B,IAA0Bh3C,CAAO;AAAA,EAC/F;AAAA,EACA,MAAM,kBAAkB2Y,GAAQ3Y,GAAS;AACrC,WAAO,KAAK,QAAQ,EAAE,QAAQ,uBAAuB,QAAA2Y,EAAM,GAAIw8B,IAAmBn1C,CAAO;AAAA,EAC7F;AAAA,EACA,MAAM,oBAAoB2Y,GAAQ3Y,GAAS;AACvC,WAAO,KAAK,QAAQ,EAAE,QAAQ,yBAAyB,QAAA2Y,EAAM,GAAIw8B,IAAmBn1C,CAAO;AAAA,EAC/F;AAAA,EACA,MAAM,SAAS2Y,GAAQgjC,IAAelD,IAAsBz4C,GAAS;AACjE,UAAM3U,IAAS,MAAM,KAAK,QAAQ,EAAE,QAAQ,cAAc,QAAAstB,EAAM,GAAIgjC,GAAc37C,CAAO,GAEnFmhC,IAAY,KAAK,uBAAuBxoB,EAAO,IAAI;AACzD,QAAIwoB,GAAW;AAEX,UAAI,CAAC91C,EAAO,qBAAqB,CAACA,EAAO;AACrC,cAAM,IAAIgvD,GAASvF,GAAU,gBAAgB,QAAQn8B,EAAO,IAAI,6DAA6D;AAGjI,UAAIttB,EAAO;AACP,YAAI;AAGA,cAAI,CADY81C,EAAU91C,EAAO,iBAAiB;AAE9C,kBAAM,IAAIgvD,GAASvF,GAAU,eAAe,+DAA+D,KAAK,KAAK,WAAW3T,EAAU,MAAM,CAAC,EAAE;AAAA,QAE3J,SACOlwC,GAAO;AACV,gBAAIA,aAAiBopD,KACXppD,IAEJ,IAAIopD,GAASvF,GAAU,eAAe,0CAA0C7jD,aAAiB,QAAQA,EAAM,UAAU,OAAOA,CAAK,CAAC,EAAE;AAAA,QAClJ;AAAA,IAER;AACA,WAAO5F;AAAA,EACX;AAAA,EACA,uBAAuB06E,GAAO;AAC1B,SAAK,4BAA4B,MAAK;AACtC,eAAWC,KAAQD;AAEf,UAAIC,EAAK;AACL,YAAI;AACA,gBAAM7kC,IAAY,KAAK,KAAK,QAAQ6kC,EAAK,YAAY;AACrD,eAAK,4BAA4B,IAAIA,EAAK,MAAM7kC,CAAS;AAAA,QAC7D,QACW;AAAA,QAEX;AAAA,EAGZ;AAAA,EACA,uBAAuB8kC,GAAU;AAC7B,WAAO,KAAK,4BAA4B,IAAIA,CAAQ;AAAA,EACxD;AAAA,EACA,MAAM,UAAUttD,GAAQ3Y,GAAS;AAC7B,UAAM3U,IAAS,MAAM,KAAK,QAAQ,EAAE,QAAQ,cAAc,QAAAstB,EAAM,GAAI6/B,IAAuBx4C,CAAO;AAElG,gBAAK,uBAAuB3U,EAAO,KAAK,GACjCA;AAAA,EACX;AAAA,EACA,MAAM,uBAAuB;AACzB,WAAO,KAAK,aAAa,EAAE,QAAQ,mCAAkC,CAAE;AAAA,EAC3E;AACJ;AC9RA,MAAM66E,WAAmB,MAAM;AAAA,EAC7B,YAAY11E,GAASwP,GAAS;AAC5B,UAAMxP,CAAO,GAAG,KAAK,OAAO,cAAc,KAAK,OAAOwP,EAAQ,MAAM,KAAK,QAAQA,EAAQ,OAAO,KAAK,QAAQA,EAAQ,OAAO,KAAK,OAAOA,EAAQ;AAAA,EAClJ;AACF;AACA,SAASylE,GAAKrhC,GAAM;AACpB;AACA,SAAS+hC,GAAaC,GAAW;AAC/B,MAAI,OAAOA,KAAa;AACtB,UAAM,IAAI;AAAA,MACR;AAAA,IACN;AACE,QAAM,EAAE,SAAAC,IAAUZ,IAAM,SAAAa,IAAUb,IAAM,SAAAc,IAAUd,IAAM,WAAAe,EAAS,IAAKJ;AACtE,MAAIK,IAAiB,IAAIC,IAAe,IAAIn5D,GAAInjB,IAAO,IAAIu8E,IAAY;AACvE,WAASC,EAAKC,GAAU;AACtB,UAAMC,IAAQJ,IAAeG,EAAS,QAAQ,iBAAiB,EAAE,IAAIA,GAAU,CAACE,GAAUC,CAAU,IAAIC,GAAW,GAAGR,CAAc,GAAGK,CAAK,EAAE;AAC9I,eAAWrqC,KAAQsqC;AACjB,MAAAG,EAAUzqC,CAAI;AAChB,IAAAgqC,IAAiBO,GAAYN,IAAe;AAAA,EAC9C;AACA,WAASQ,EAAUzqC,GAAM;AACvB,QAAIA,MAAS,IAAI;AACf,MAAAr4B,EAAa;AACb;AAAA,IACF;AACA,QAAIq4B,EAAK,WAAW,GAAG,GAAG;AACxB,MAAA+pC,KAAaA,EAAU/pC,EAAK,MAAMA,EAAK,WAAW,IAAI,IAAI,IAAI,CAAC,CAAC;AAChE;AAAA,IACF;AACA,UAAM0qC,IAAsB1qC,EAAK,QAAQ,GAAG;AAC5C,QAAI0qC,MAAwB,IAAI;AAC9B,YAAMh0C,IAAQsJ,EAAK,MAAM,GAAG0qC,CAAmB,GAAGC,IAAS3qC,EAAK0qC,IAAsB,CAAC,MAAM,MAAM,IAAI,GAAG/7E,IAAQqxC,EAAK,MAAM0qC,IAAsBC,CAAM;AACzJ,MAAAC,EAAal0C,GAAO/nC,GAAOqxC,CAAI;AAC/B;AAAA,IACF;AACA,IAAA4qC,EAAa5qC,GAAM,IAAIA,CAAI;AAAA,EAC7B;AACA,WAAS4qC,EAAal0C,GAAO/nC,GAAOqxC,GAAM;AACxC,YAAQtJ,GAAK;AAAA,MACX,KAAK;AACH,QAAAwzC,IAAYv7E;AACZ;AAAA,MACF,KAAK;AACH,QAAAhB,IAAO,GAAGA,CAAI,GAAGgB,CAAK;AAAA;AAEtB;AAAA,MACF,KAAK;AACH,QAAAmiB,IAAKniB,EAAM,SAAS,IAAI,IAAI,SAASA;AACrC;AAAA,MACF,KAAK;AACH,gBAAQ,KAAKA,CAAK,IAAIm7E,EAAQ,SAASn7E,GAAO,EAAE,CAAC,IAAIk7E;AAAA,UACnD,IAAIJ,GAAW,6BAA6B96E,CAAK,KAAK;AAAA,YACpD,MAAM;AAAA,YACN,OAAAA;AAAA,YACA,MAAAqxC;AAAA,UACZ,CAAW;AAAA,QACX;AACQ;AAAA,MACF;AACE,QAAA6pC;AAAA,UACE,IAAIJ;AAAA,YACF,kBAAkB/yC,EAAM,SAAS,KAAK,GAAGA,EAAM,MAAM,GAAG,EAAE,CAAC,MAAWA,CAAK;AAAA,YAC3E,EAAE,MAAM,iBAAiB,OAAAA,GAAO,OAAA/nC,GAAO,MAAAqxC,EAAI;AAAA,UACvD;AAAA,QACA;AACQ;AAAA,IACR;AAAA,EACE;AACA,WAASr4B,IAAgB;AACvB,IAAAha,EAAK,SAAS,KAAKi8E,EAAQ;AAAA,MACzB,IAAA94D;AAAA,MACA,OAAOo5D,KAAa;AAAA;AAAA;AAAA,MAGpB,MAAMv8E,EAAK,SAAS;AAAA,CACzB,IAAIA,EAAK,MAAM,GAAG,EAAE,IAAIA;AAAA,IACzB,CAAK,GAAGmjB,IAAK,QAAQnjB,IAAO,IAAIu8E,IAAY;AAAA,EAC1C;AACA,WAASW,EAAMtnE,IAAU,IAAI;AAC3B,IAAAymE,KAAkBzmE,EAAQ,WAAWknE,EAAUT,CAAc,GAAGC,IAAe,IAAIn5D,IAAK,QAAQnjB,IAAO,IAAIu8E,IAAY,IAAIF,IAAiB;AAAA,EAC9I;AACA,SAAO,EAAE,MAAAG,GAAM,OAAAU,EAAK;AACtB;AACA,SAASL,GAAWH,GAAO;AACzB,QAAMS,IAAQ,CAAA;AACd,MAAId,IAAiB,IAAIe,IAAc;AACvC,SAAOA,IAAcV,EAAM,UAAU;AACnC,UAAMW,IAAUX,EAAM,QAAQ,MAAMU,CAAW,GAAGE,IAAUZ,EAAM,QAAQ;AAAA,GAC3EU,CAAW;AACV,QAAIG,IAAU;AACd,QAAIF,MAAY,MAAMC,MAAY,KAAKC,IAAU,KAAK,IAAIF,GAASC,CAAO,IAAID,MAAY,KAAKE,IAAUF,IAAUC,MAAY,OAAOC,IAAUD,IAAUC,MAAY,IAAI;AACxK,MAAAlB,IAAiBK,EAAM,MAAMU,CAAW;AACxC;AAAA,IACF,OAAO;AACL,YAAM/qC,IAAOqqC,EAAM,MAAMU,GAAaG,CAAO;AAC7C,MAAAJ,EAAM,KAAK9qC,CAAI,GAAG+qC,IAAcG,IAAU,GAAGb,EAAMU,IAAc,CAAC,MAAM,QAAQV,EAAMU,CAAW,MAAM;AAAA,KACxGA;AAAA,IACD;AAAA,EACF;AACA,SAAO,CAACD,GAAOd,CAAc;AAC/B;ACnGA,MAAMmB,WAAmB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ7B,YAAYt+E,GAAMu+E,GAAoB;AACpC,QAAI99E,GAAIwB;AACR,UAAMjC,CAAI,GAAG,KAAK,QAAQS,IAAK89E,KAAsB,OAAO,SAASA,EAAmB,SAAS,OAAO99E,IAAK,QAAQ,KAAK,WAAWwB,IAAKs8E,KAAsB,OAAO,SAASA,EAAmB,YAAY,OAAOt8E,IAAK;AAAA,EAC7N;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaA,CAAC,OAAO,IAAI,4BAA4B,CAAC,EAAEu8E,GAAQ9nE,GAAS+nE,GAAS;AACnE,WAAOA,EAAQC,GAAiB,IAAI,GAAGhoE,CAAO;AAAA,EAChD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,CAAC,OAAO,IAAI,oBAAoB,CAAC,EAAE+nE,GAAS/nE,GAAS;AACnD,WAAO+nE,EAAQC,GAAiB,IAAI,GAAGhoE,CAAO;AAAA,EAChD;AACF;AACA,SAASioE,GAAYz3E,GAAS;AAC5B,QAAM03E,IAAe,WAAW;AAChC,SAAO,OAAOA,KAAgB,aAAa,IAAIA,EAAa13E,GAAS,aAAa,IAAI,IAAI,YAAYA,CAAO;AAC/G;AACA,SAAS23E,GAAaxpC,GAAK;AACzB,SAAOA,aAAe,QAAQ,YAAYA,KAAO,MAAM,QAAQA,EAAI,MAAM,IAAIA,EAAI,OAAO,IAAIwpC,EAAY,EAAE,KAAK,IAAI,IAAI,WAAWxpC,KAAOA,EAAI,iBAAiB,QAAQ,GAAGA,CAAG,KAAKwpC,GAAaxpC,EAAI,KAAK,CAAC,KAAKA,EAAI,UAAU,GAAGA,CAAG;AACnO;AACA,SAASqpC,GAAiBrpC,GAAK;AAC7B,SAAO;AAAA,IACL,MAAMA,EAAI;AAAA,IACV,SAASA,EAAI;AAAA,IACb,MAAMA,EAAI;AAAA,IACV,kBAAkBA,EAAI;AAAA,IACtB,YAAYA,EAAI;AAAA,IAChB,WAAWA,EAAI;AAAA,EACnB;AACA;AACA,IAAIypC,KAAc,CAACC,MAAQ;AACzB,QAAM,UAAUA,CAAG;AACrB,GAAGC,KAAgB,CAAC/uE,GAAKgvE,GAAQF,MAAQE,EAAO,IAAIhvE,CAAG,KAAK6uE,GAAY,YAAYC,CAAG,GAAGG,KAAe,CAACjvE,GAAKgvE,GAAQn3B,OAAYk3B,GAAc/uE,GAAKgvE,GAAQ,yBAAyB,GAAGn3B,IAASA,EAAO,KAAK73C,CAAG,IAAIgvE,EAAO,IAAIhvE,CAAG,IAAIkvE,KAAe,CAAClvE,GAAKgvE,GAAQn9E,MAAUm9E,EAAO,IAAIhvE,CAAG,IAAI6uE,GAAY,mDAAmD,IAAIG,aAAkB,UAAUA,EAAO,IAAIhvE,CAAG,IAAIgvE,EAAO,IAAIhvE,GAAKnO,CAAK,GAAGs9E,KAAe,CAACnvE,GAAKgvE,GAAQn9E,GAAOu9E,OAAYL,GAAc/uE,GAAKgvE,GAAQ,wBAAwB,GAAGA,EAAO,IAAIhvE,GAAKnO,CAAK,GAAGA,IAAQw9E,KAAkB,CAACrvE,GAAKgvE,GAAQzoC,OAAYwoC,GAAc/uE,GAAKgvE,GAAQ,uBAAuB,GAAGzoC,IAAS+oC,IAAaC,IAAMC,IAAcC,IAAkBC,IAAQC,IAAoBC,IAAiBC,IAAcC,IAAaC,IAASC,IAAUC,IAAYC,IAASC,IAAwBC,IAAYC,IAAkBC,IAAeC,IAAsBC,IAAUC,IAAgBC,IAAmBC,IAAsBC;AAC39B,MAAMC,WAAoB,YAAY;AAAA,EACpC,YAAY/2C,GAAKg3C,GAAqB;AACpC,QAAItgF,GAAIwB;AACR,UAAK,GAAIk9E,GAAa,MAAMiB,EAAsB,GAAG,KAAK,aAAa,GAAG,KAAK,OAAO,GAAG,KAAK,SAAS,GAAGjB,GAAa,MAAMI,EAAW,GAAGJ,GAAa,MAAMK,EAAI,GAAGL,GAAa,MAAMM,EAAY,GAAGN,GAAa,MAAMO,EAAgB,GAAGP,GAAa,MAAMQ,EAAM,GAAGR,GAAa,MAAMS,EAAkB,GAAGT,GAAa,MAAMU,EAAe,GAAGV,GAAa,MAAMW,IAAc,IAAI,GAAGX,GAAa,MAAMY,EAAW,GAAGZ,GAAa,MAAMa,EAAO,GAAGb,GAAa,MAAMc,IAAU,IAAI,GAAGd,GAAa,MAAMe,IAAY,IAAI,GAAGf,GAAa,MAAMgB,IAAS,IAAI,GAAGhB,GAAa,MAAMmB,IAAkB,OAAOhyC,MAAa;AAChmB,UAAI0yC;AACJ,MAAA9B,GAAa,MAAMc,EAAO,EAAE,MAAK;AACjC,YAAM,EAAE,MAAAiB,GAAM,YAAAC,GAAY,QAAA/oD,GAAQ,SAAA8Y,EAAO,IAAK3C;AAC9C,UAAInW,MAAW,KAAK;AAClB,QAAAmnD,GAAgB,MAAMc,IAAwBO,EAAiB,EAAE,KAAK,MAAM,0CAA0C,GAAG,GAAG,KAAK,MAAK;AACtI;AAAA,MACF;AACA,UAAIO,IAAa9B,GAAa,MAAMK,IAAc,IAAI,IAAInxC,EAAS,GAAG,CAAC,IAAI8wC,GAAa,MAAMK,IAAc,MAAM,GAAGtnD,MAAW,KAAK;AACnI,QAAAmnD,GAAgB,MAAMc,IAAwBO,EAAiB,EAAE,KAAK,MAAM,wBAAwBxoD,CAAM,KAAKA,CAAM;AACrH;AAAA,MACF;AACA,UAAI,EAAE8Y,EAAQ,IAAI,cAAc,KAAK,IAAI,WAAW,mBAAmB,GAAG;AACxE,QAAAquC,GAAgB,MAAMc,IAAwBO,EAAiB,EAAE,KAAK,MAAM,sDAAsDxoD,CAAM;AACxI;AAAA,MACF;AACA,UAAI+mD,GAAa,MAAMK,EAAW,MAAM,KAAK;AAC3C;AACF,MAAAH,GAAa,MAAMG,IAAa,KAAK,IAAI;AACzC,YAAM4B,IAAY,IAAI,MAAM,MAAM;AAClC,WAAKH,IAAM9B,GAAa,MAAMiB,EAAO,MAAM,QAAQa,EAAI,KAAK,MAAMG,CAAS,GAAG,KAAK,cAAcA,CAAS,GAAG,OAAOF,KAAQ,YAAY,CAACA,KAAQ,EAAE,eAAeA,IAAO;AACvK,QAAA3B,GAAgB,MAAMc,IAAwBO,EAAiB,EAAE,KAAK,MAAM,wDAAwDxoD,CAAM,GAAG,KAAK,MAAK;AACvJ;AAAA,MACF;AACA,YAAMipD,IAAU,IAAI,YAAW,GAAIC,IAASJ,EAAK,UAAS;AAC1D,UAAI1tD,IAAO;AACX,SAAG;AACD,cAAM,EAAE,MAAAuhB,GAAM,OAAAhzC,EAAK,IAAK,MAAMu/E,EAAO,KAAI;AACzC,QAAAv/E,KAASo9E,GAAa,MAAMc,EAAO,EAAE,KAAKoB,EAAQ,OAAOt/E,GAAO,EAAE,QAAQ,CAACgzC,EAAI,CAAE,CAAC,GAAGA,MAASvhB,IAAO,IAAI2rD,GAAa,MAAMc,EAAO,EAAE,MAAK,GAAIV,GAAgB,MAAMc,IAAwBQ,EAAoB,EAAE,KAAK,IAAI;AAAA,MAC7N,SAASrtD;AAAA,IACX,CAAC,GAAG4rD,GAAa,MAAMoB,IAAe,CAAClrC,MAAQ;AAC7C,MAAA+pC,GAAa,MAAMW,IAAa,MAAM,GAAG,EAAE1qC,EAAI,SAAS,gBAAgBA,EAAI,SAAS,cAAciqC,GAAgB,MAAMc,IAAwBQ,EAAoB,EAAE,KAAK,MAAM/B,GAAaxpC,CAAG,CAAC;AAAA,IACrM,CAAC,GAAG8pC,GAAa,MAAMsB,IAAU,CAAC72E,MAAU;AAC1C,aAAOA,EAAM,MAAM,YAAYw1E,GAAa,MAAMU,IAAcl2E,EAAM,EAAE;AACxE,YAAM03E,IAAe,IAAI,aAAa13E,EAAM,SAAS,WAAW;AAAA,QAC9D,MAAMA,EAAM;AAAA,QACZ,QAAQs1E,GAAa,MAAMO,EAAY,IAAIP,GAAa,MAAMO,EAAY,EAAE,SAASP,GAAa,MAAMM,EAAI,EAAE;AAAA,QAC9G,aAAa51E,EAAM,MAAM;AAAA,MACjC,CAAO;AACD,MAAAs1E,GAAa,MAAMgB,EAAU,MAAM,CAACt2E,EAAM,SAASA,EAAM,UAAU,cAAcs1E,GAAa,MAAMgB,EAAU,EAAE,KAAK,MAAMoB,CAAY,GAAG,KAAK,cAAcA,CAAY;AAAA,IAC3K,CAAC,GAAGnC,GAAa,MAAMuB,IAAgB,CAAC5+E,MAAU;AAChD,MAAAs9E,GAAa,MAAMQ,IAAoB99E,CAAK;AAAA,IAC9C,CAAC,GAAGq9E,GAAa,MAAM0B,IAAY,MAAM;AACvC,MAAAzB,GAAa,MAAMS,IAAiB,MAAM,GAAGX,GAAa,MAAMK,EAAW,MAAM,KAAK,cAAcD,GAAgB,MAAMc,IAAwBC,EAAU,EAAE,KAAK,IAAI;AAAA,IACzK,CAAC;AACD,QAAI;AACF,UAAIt2C,aAAe;AACjB,QAAAq1C,GAAa,MAAMI,IAAMz1C,CAAG;AAAA,eACrB,OAAOA,KAAO;AACrB,QAAAq1C,GAAa,MAAMI,IAAM,IAAI,IAAIz1C,GAAKw3C,GAAU,CAAE,CAAC;AAAA;AAEnD,cAAM,IAAI,MAAM,aAAa;AAAA,IACjC,QAAQ;AACN,YAAM5C,GAAY,4CAA4C;AAAA,IAChE;AACA,IAAAS,GAAa,MAAMY,IAASnD,GAAa;AAAA,MACvC,SAASqC,GAAa,MAAMuB,EAAQ;AAAA,MACpC,SAASvB,GAAa,MAAMwB,EAAc;AAAA,IAChD,CAAK,CAAC,GAAGtB,GAAa,MAAMG,IAAa,KAAK,UAAU,GAAGH,GAAa,MAAMQ,IAAoB,GAAG,GAAGR,GAAa,MAAMO,KAASl/E,IAAKsgF,KAAuB,OAAO,SAASA,EAAoB,UAAU,OAAOtgF,IAAK,WAAW,KAAK,GAAG2+E,GAAa,MAAMM,KAAmBz9E,IAAK8+E,KAAuB,OAAO,SAASA,EAAoB,oBAAoB,OAAO9+E,IAAK,EAAE,GAAGq9E,GAAgB,MAAMc,IAAwBC,EAAU,EAAE,KAAK,IAAI;AAAA,EACzb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,IAAI,aAAa;AACf,WAAOnB,GAAa,MAAMK,EAAW;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,IAAI,MAAM;AACR,WAAOL,GAAa,MAAMM,EAAI,EAAE;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,IAAI,kBAAkB;AACpB,WAAON,GAAa,MAAMQ,EAAgB;AAAA,EAC5C;AAAA;AAAA,EAEA,IAAI,UAAU;AACZ,WAAOR,GAAa,MAAMe,EAAQ;AAAA,EACpC;AAAA,EACA,IAAI,QAAQn+E,GAAO;AACjB,IAAAs9E,GAAa,MAAMa,IAAUn+E,CAAK;AAAA,EACpC;AAAA;AAAA,EAEA,IAAI,YAAY;AACd,WAAOo9E,GAAa,MAAMgB,EAAU;AAAA,EACtC;AAAA,EACA,IAAI,UAAUp+E,GAAO;AACnB,IAAAs9E,GAAa,MAAMc,IAAYp+E,CAAK;AAAA,EACtC;AAAA;AAAA,EAEA,IAAI,SAAS;AACX,WAAOo9E,GAAa,MAAMiB,EAAO;AAAA,EACnC;AAAA,EACA,IAAI,OAAOr+E,GAAO;AAChB,IAAAs9E,GAAa,MAAMe,IAASr+E,CAAK;AAAA,EACnC;AAAA,EACA,iBAAiB9B,GAAMy5C,GAAU/iC,GAAS;AACxC,UAAM8qE,IAAS/nC;AACf,UAAM,iBAAiBz5C,GAAMwhF,GAAQ9qE,CAAO;AAAA,EAC9C;AAAA,EACA,oBAAoB1W,GAAMy5C,GAAU/iC,GAAS;AAC3C,UAAM8qE,IAAS/nC;AACf,UAAM,oBAAoBz5C,GAAMwhF,GAAQ9qE,CAAO;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,QAAQ;AACN,IAAAwoE,GAAa,MAAMW,EAAe,KAAK,aAAaX,GAAa,MAAMW,EAAe,CAAC,GAAGX,GAAa,MAAMK,EAAW,MAAM,KAAK,WAAWL,GAAa,MAAMa,EAAW,KAAKb,GAAa,MAAMa,EAAW,EAAE,MAAK,GAAIX,GAAa,MAAMG,IAAa,KAAK,MAAM,GAAGH,GAAa,MAAMW,IAAa,MAAM;AAAA,EAChT;AACF;AACAR,KAA8B,oBAAI,QAAO,GAAIC,KAAuB,oBAAI,QAAO,GAAIC,KAA+B,oBAAI,QAAO,GAAIC,KAAmC,oBAAI,WAAWC,KAAyB,oBAAI,QAAO,GAAIC,KAAqC,oBAAI,QAAO,GAAIC,KAAkC,oBAAI,QAAO,GAAIC,KAA+B,oBAAI,QAAO,GAAIC,KAA8B,oBAAI,QAAO,GAAIC,KAA0B,oBAAI,QAAO,GAAIC,KAA2B,oBAAI,WAAWC,KAA6B,oBAAI,WAAWC,KAA0B,oBAAI,QAAO,GAAIC,KAAyC,oBAAI,QAAO;AAAA;AAAA;AAAA;AAAA;AAKvnBC,KAAa,WAAW;AACtB,EAAAjB,GAAa,MAAMG,IAAa,KAAK,UAAU,GAAGH,GAAa,MAAMW,IAAa,IAAI,gBAAe,CAAE,GAAGb,GAAa,MAAMS,EAAM,EAAET,GAAa,MAAMM,EAAI,GAAGF,GAAgB,MAAMc,IAAwBI,EAAoB,EAAE,KAAK,IAAI,CAAC,EAAE,KAAKtB,GAAa,MAAMoB,EAAgB,CAAC,EAAE,MAAMpB,GAAa,MAAMqB,EAAa,CAAC;AACnU,GAAGD,KAAmC,oBAAI,QAAO,GAAIC,KAAgC,oBAAI,QAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAMhGC,KAAuB,WAAW;AAChC,MAAI//E;AACJ,QAAMghF,IAAO;AAAA;AAAA;AAAA,IAGX,MAAM;AAAA,IACN,UAAU;AAAA,IACV,SAAS,EAAE,QAAQ,qBAAqB,GAAGvC,GAAa,MAAMY,EAAY,IAAI,EAAE,iBAAiBZ,GAAa,MAAMY,EAAY,EAAC,IAAK,OAAM;AAAA,IAC5I,OAAO;AAAA,IACP,SAASr/E,IAAKy+E,GAAa,MAAMa,EAAW,MAAM,OAAO,SAASt/E,EAAG;AAAA,EACzE;AACE,SAAO,YAAY,eAAeghF,EAAK,cAAc,KAAK,kBAAkB,YAAY,gBAAgBA;AAC1G,GAAGhB,KAA2B,oBAAI,QAAO,GAAIC,KAAiC,oBAAI,QAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOzFC,KAAoB,SAASz5E,GAAS+6B,GAAM;AAC1C,MAAIxhC;AACJ,EAAAy+E,GAAa,MAAMK,EAAW,MAAM,KAAK,UAAUH,GAAa,MAAMG,IAAa,KAAK,MAAM;AAC9F,QAAMmC,IAAa,IAAIpD,GAAW,SAAS,EAAE,MAAAr8C,GAAM,SAAA/6B,GAAS;AAC5D,GAACzG,IAAKy+E,GAAa,MAAMe,EAAQ,MAAM,QAAQx/E,EAAG,KAAK,MAAMihF,CAAU,GAAG,KAAK,cAAcA,CAAU;AACzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOAd,KAAuB,SAAS15E,GAAS+6B,GAAM;AAC7C,MAAIxhC;AACJ,MAAIy+E,GAAa,MAAMK,EAAW,MAAM,KAAK;AAC3C;AACF,EAAAH,GAAa,MAAMG,IAAa,KAAK,UAAU;AAC/C,QAAMmC,IAAa,IAAIpD,GAAW,SAAS,EAAE,MAAAr8C,GAAM,SAAA/6B,GAAS;AAC5D,GAACzG,IAAKy+E,GAAa,MAAMe,EAAQ,MAAM,QAAQx/E,EAAG,KAAK,MAAMihF,CAAU,GAAG,KAAK,cAAcA,CAAU,GAAGtC,GAAa,MAAMS,IAAiB,WAAWX,GAAa,MAAM2B,EAAU,GAAG3B,GAAa,MAAMU,EAAkB,CAAC,CAAC;AAClO,GAAGiB,KAA6B,oBAAI,QAAO;AAAA;AAAA;AAAA;AAAA;AAK3CC,GAAY,aAAa;AAAA;AAAA;AAAA;AAAA;AAKzBA,GAAY,OAAO;AAAA;AAAA;AAAA;AAAA;AAKnBA,GAAY,SAAS;AACrB,SAASS,KAAa;AACpB,QAAMI,IAAM,cAAc,aAAa,WAAW,WAAW;AAC7D,SAAOA,KAAO,OAAOA,KAAO,YAAY,aAAaA,KAAO,OAAOA,EAAI,WAAW,WAAWA,EAAI,UAAU;AAC7G;AC3QA,IAAIC;AACJA,KAAS,WAAW;AAMpB,eAAeC,GAAgBj9C,GAAM;AACjC,UAAQ,MAAMg9C,IAAQ,gBAAgB,IAAI,WAAWh9C,CAAI,CAAC;AAC9D;AAKA,eAAek9C,GAAOl9C,GAAM;AACxB,QAAMsgB,IAAO;AACb,MAAInjD,IAAS;AACb,QAAMggF,IAAc,MAAMF,GAAgBj9C,CAAI;AAC9C,WAASn9B,IAAI,GAAGA,IAAIm9B,GAAMn9B,KAAK;AAE3B,UAAMu6E,IAAcD,EAAYt6E,CAAC,IAAIy9C,EAAK;AAC1C,IAAAnjD,KAAUmjD,EAAK88B,CAAW;AAAA,EAC9B;AACA,SAAOjgF;AACX;AAKA,eAAekgF,GAAiBthF,GAAQ;AACpC,SAAO,MAAMmhF,GAAOnhF,CAAM;AAC9B;AAKO,eAAeuhF,GAAkBC,GAAe;AACnD,QAAMC,IAAS,OAAO,MAAMR,IAAQ,OAAO,OAAO,WAAW,IAAI,YAAW,EAAG,OAAOO,CAAa,CAAC;AAIpG,SAAO,KAAK,OAAO,aAAa,GAAG,IAAI,WAAWC,CAAM,CAAC,CAAC,EACrD,QAAQ,OAAO,GAAG,EAClB,QAAQ,OAAO,GAAG,EAClB,QAAQ,MAAM,EAAE;AACzB;AAKe,eAAeC,GAAc1hF,GAAQ;AAGhD,MAFKA,MACDA,IAAS,KACTA,IAAS,MAAMA,IAAS;AACxB,UAAM,kDAAkDA,CAAM;AAElE,QAAM2hF,IAAW,MAAML,GAAiBthF,CAAM,GACxC4hF,IAAY,MAAML,GAAkBI,CAAQ;AAClD,SAAO;AAAA,IACH,eAAeA;AAAA,IACf,gBAAgBC;AAAA,EACxB;AACA;AC1DO,MAAMC,KAAuCh4B,EACxC;AAAA,EACR,UAAUJ,EAAQ,EAAG,IAAG;AAAA,EACxB,uBAAuBkD,EAAQlD,EAAQ,EAAG,IAAG,CAAE,EAAE,SAAQ;AAAA,EACzD,UAAUA,EAAQ,EAAG,IAAG,EAAG,SAAQ;AAAA,EACnC,kBAAkBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC9C,0BAA0BkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtD,uCAAuCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnE,eAAeA,EAAQ,EAAG,SAAQ;AAAA,EAClC,wBAAwBA,EAAQ,EAAG,SAAQ;AAAA,EAC3C,qBAAqBA,EAAQ,EAAG,IAAG,EAAG,SAAQ;AAAA,EAC9C,kBAAkBA,EAAQ,EAAG,IAAG,EAAG,SAAQ;AAAA,EAC3C,4CAA4C+B,GAAS,EAAG,SAAQ;AAAA,EAChE,uCAAuCmB,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnE,mCAAmCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC/D,mCAAmC+B,GAAS,EAAG,SAAQ;AAC3D,CAAC,EACI,YAAW,GAIHs2B,KAAsBj4B,EACvB;AAAA,EACR,QAAQJ,EAAQ;AAAA,EAChB,wBAAwBA,EAAQ;AAAA,EAChC,gBAAgBA,EAAQ;AAAA,EACxB,uBAAuBA,EAAQ,EAAG,SAAQ;AAAA,EAC1C,kBAAkBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC9C,0BAA0BkD,EAAQlD,GAAU;AAAA,EAC5C,0BAA0BkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtD,uBAAuBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnD,uCAAuCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnE,kDAAkDs4B,EACvCt4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,uBAAuBA,EAAQ,EAAG,SAAQ;AAAA,EAC1C,qBAAqBA,EAAQ,EAAG,SAAQ;AAAA,EACxC,4CAA4CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACxE,uDAAuDs4B,EAC5Ct4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,wBAAwBA,EAAQ,EAAG,SAAQ;AAAA,EAC3C,+CAA+Cs4B,EACpCt4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,0DAA0Ds4B,EAC/Ct4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,kCAAkCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAClE,CAAC,EACI,YAAW,GAKHu4B,KAA+Bn4B,EAChC;AAAA,EACR,QAAQJ,EAAQ;AAAA,EAChB,wBAAwBA,EAAQ;AAAA,EAChC,gBAAgBA,EAAQ;AAAA,EACxB,mBAAmBA,EAAQ,EAAG,SAAQ;AAAA,EACtC,UAAUA,EAAQ;AAAA,EAClB,uBAAuBA,EAAQ,EAAG,SAAQ;AAAA,EAC1C,kBAAkBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC9C,0BAA0BkD,EAAQlD,GAAU;AAAA,EAC5C,0BAA0BkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtD,uBAAuBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnD,sBAAsBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAClD,yBAAyBkD,EAAQlD,GAAU;AAAA,EAC3C,uCAAuCkD,EAAQlD,GAAU;AAAA,EACzD,0CAA0CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtE,0CAA0CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtE,uCAAuCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnE,0CAA0CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtE,0CAA0CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtE,6CAA6CkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACzE,gDAAgDs4B,EACrCt4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,gDAAgDs4B,EACrCt4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,uCAAuCkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnE,kDAAkDs4B,EACvCt4B,EAAQ,CAAE,EAChB,SAAQ;AAAA,EACb,0BAA0BkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtD,uBAAuBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACnD,kBAAkBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC9C,uBAAuBA,EAAQ,EAAG,SAAQ;AAAA,EAC1C,0BAA0BkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtD,sBAAsBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAClD,4BAA4B+B,GAAS,EAAG,SAAQ;AAAA,EAChD,6BAA6BA,GAAS,EAAG,SAAQ;AAAA,EACjD,iCAAiCA,GAAS,EAAG,SAAQ;AAAA,EACrD,kCAAkCA,GAAS,EAAG,SAAQ;AAAA,EACtD,eAAe/B,EAAQ,EAAG,SAAQ;AAAA,EAClC,YAAYA,EAAQ,EAAG,SAAQ;AACnC,CAAC,EACI,YAAW,GAMHw4B,KAAwCD,GAA6B,MAAMF,GAAoB,KAAK;AAAA,EAC7G,kCAAkC;AACtC,CAAC,CAAC,GAIWI,KAAoBr4B,EACrB;AAAA,EACR,cAAcJ,EAAQ;AAAA,EACtB,UAAUA,EAAQ,EAAG,SAAQ;AAAA;AAAA,EAC7B,YAAYA,EAAQ;AAAA,EACpB,YAAYC,GAAQ,EAAG,SAAQ;AAAA,EAC/B,OAAOD,EAAQ,EAAG,SAAQ;AAAA,EAC1B,eAAeA,EAAQ,EAAG,SAAQ;AACtC,CAAC,EACI,MAAK,GAIG04B,KAA2Bt4B,EAC5B;AAAA,EACR,OAAOJ,EAAQ;AAAA,EACf,mBAAmBA,EAAQ,EAAG,SAAQ;AAAA,EACtC,WAAWA,EAAQ,EAAG,SAAQ;AAClC,CAAC,GAIY24B,KAA4Bn4B,EAAS;AAAA,EAC9C,eAAe0C,EAAQlD,EAAQ,CAAE,EAAE,OAAO,CAAC44B,MAASA,EAAK,MAAM,CAACjlB,MAAQ,IAAI,SAASA,CAAG,CAAC,GAAG,EAAE,SAAS,yCAAyC;AAAA,EAChJ,4BAA4B3T,EAAQ,EAAG,SAAQ;AAAA,EAC/C,aAAakD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACzC,gBAAgBkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EAC5C,aAAaA,EAAQ,EAAG,SAAQ;AAAA,EAChC,YAAYA,EAAQ,EAAG,SAAQ;AAAA,EAC/B,UAAUA,EAAQ,EAAG,SAAQ;AAAA,EAC7B,OAAOA,EAAQ,EAAG,SAAQ;AAAA,EAC1B,UAAUkD,EAAQlD,EAAQ,CAAE,EAAE,SAAQ;AAAA,EACtC,SAASA,EAAQ,EAAG,SAAQ;AAAA,EAC5B,YAAYA,EAAQ,EAAG,SAAQ;AAAA,EAC/B,UAAUA,EAAQ,EAAG,SAAQ;AAAA,EAC7B,MAAM64B,GAAK,EAAG,SAAQ;AAAA,EACtB,aAAa74B,EAAQ,EAAG,SAAQ;AAAA,EAChC,kBAAkBA,EAAQ,EAAG,SAAQ;AAAA,EACrC,oBAAoBA,EAAQ,EAAG,SAAQ;AAC3C,CAAC,EAAE,MAAK,GAIK84B,KAA+Bt4B,EAAS;AAAA,EACjD,WAAWR,EAAQ;AAAA,EACnB,eAAeA,EAAQ,EAAG,SAAQ;AAAA,EAClC,qBAAqBC,GAAQ,EAAG,SAAQ;AAAA,EACxC,0BAA0BA,GAAQ,EAAG,SAAQ;AACjD,CAAC,EAAE,MAAK,GAIK84B,KAAmCJ,GAA0B,MAAMG,EAA4B;AAI1Dt4B,EAAS;AAAA,EACvD,OAAOR,EAAQ;AAAA,EACf,mBAAmBA,EAAQ,EAAG,SAAQ;AAC1C,CAAC,EAAE,MAAK;AAIyCQ,EAAS;AAAA,EACtD,OAAOR,EAAQ;AAAA,EACf,iBAAiBA,EAAQ,EAAG,SAAQ;AACxC,CAAC,EAAE,MAAK;AC7KD,SAASg5B,GAAyBr5C,GAAK;AAC1C,QAAMs5C,IAAc,OAAOt5C,KAAQ,WAAW,IAAI,IAAIA,CAAG,IAAI,IAAI,IAAIA,EAAI,IAAI;AAC7E,SAAAs5C,EAAY,OAAO,IACZA;AACX;AAUO,SAASC,GAAqB,EAAE,mBAAAC,GAAmB,oBAAAC,KAAsB;AAC5E,QAAMC,IAAY,OAAOF,KAAsB,WAAW,IAAI,IAAIA,CAAiB,IAAI,IAAI,IAAIA,EAAkB,IAAI,GAC/GG,IAAa,OAAOF,KAAuB,WAAW,IAAI,IAAIA,CAAkB,IAAI,IAAI,IAAIA,EAAmB,IAAI;AAMzH,MAJIC,EAAU,WAAWC,EAAW,UAIhCD,EAAU,SAAS,SAASC,EAAW,SAAS;AAChD,WAAO;AAQX,QAAMC,IAAgBF,EAAU,SAAS,SAAS,GAAG,IAAIA,EAAU,WAAWA,EAAU,WAAW,KAC7FG,IAAiBF,EAAW,SAAS,SAAS,GAAG,IAAIA,EAAW,WAAWA,EAAW,WAAW;AACvG,SAAOC,EAAc,WAAWC,CAAc;AAClD;ACvCO,MAAMC,WAAmB,MAAM;AAAA,EAClC,YAAY38E,GAAS48E,GAAU;AAC3B,UAAM58E,CAAO,GACb,KAAK,WAAW48E,GAChB,KAAK,OAAO,KAAK,YAAY;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA,EAIA,mBAAmB;AACf,UAAMx1C,IAAW;AAAA,MACb,OAAO,KAAK;AAAA,MACZ,mBAAmB,KAAK;AAAA,IACpC;AACQ,WAAI,KAAK,aACLA,EAAS,YAAY,KAAK,WAEvBA;AAAA,EACX;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK,YAAY;AAAA,EAC5B;AACJ;AAMO,MAAMy1C,WAA4BF,GAAW;AACpD;AACAE,GAAoB,YAAY;AAKzB,MAAMC,WAA2BH,GAAW;AACnD;AACAG,GAAmB,YAAY;AAMxB,MAAMC,WAA0BJ,GAAW;AAClD;AACAI,GAAkB,YAAY;AAKvB,MAAMC,WAAgCL,GAAW;AACxD;AACAK,GAAwB,YAAY;AAK7B,MAAMC,WAAkCN,GAAW;AAC1D;AACAM,GAA0B,YAAY;AAK/B,MAAMC,WAA0BP,GAAW;AAClD;AACAO,GAAkB,YAAY;AAIvB,MAAMC,WAA0BR,GAAW;AAClD;AACAQ,GAAkB,YAAY;AAKvB,MAAMC,WAAoBT,GAAW;AAC5C;AACAS,GAAY,YAAY;AAKjB,MAAMC,WAAoCV,GAAW;AAC5D;AACAU,GAA4B,YAAY;AAKjC,MAAMC,WAAqCX,GAAW;AAC7D;AACAW,GAA6B,YAAY;AAKlC,MAAMC,WAAkCZ,GAAW;AAC1D;AACAY,GAA0B,YAAY;AAK/B,MAAMC,WAA0Bb,GAAW;AAClD;AACAa,GAAkB,YAAY;AAKvB,MAAMC,WAA8Bd,GAAW;AACtD;AACAc,GAAsB,YAAY;AAK3B,MAAMC,WAA6Bf,GAAW;AACrD;AACAe,GAAqB,YAAY;AAK1B,MAAMC,WAAmChB,GAAW;AAC3D;AACAgB,GAA2B,YAAY;AAIhC,MAAMC,WAA+BjB,GAAW;AACvD;AACAiB,GAAuB,YAAY;AAgB5B,MAAMC,KAAe;AAAA,EACxB,CAAChB,GAAoB,SAAS,GAAGA;AAAA,EACjC,CAACC,GAAmB,SAAS,GAAGA;AAAA,EAChC,CAACC,GAAkB,SAAS,GAAGA;AAAA,EAC/B,CAACC,GAAwB,SAAS,GAAGA;AAAA,EACrC,CAACC,GAA0B,SAAS,GAAGA;AAAA,EACvC,CAACC,GAAkB,SAAS,GAAGA;AAAA,EAC/B,CAACC,GAAkB,SAAS,GAAGA;AAAA,EAC/B,CAACC,GAAY,SAAS,GAAGA;AAAA,EACzB,CAACC,GAA4B,SAAS,GAAGA;AAAA,EACzC,CAACC,GAA6B,SAAS,GAAGA;AAAA,EAC1C,CAACC,GAA0B,SAAS,GAAGA;AAAA,EACvC,CAACC,GAAkB,SAAS,GAAGA;AAAA,EAC/B,CAACC,GAAsB,SAAS,GAAGA;AAAA,EACnC,CAACC,GAAqB,SAAS,GAAGA;AAAA,EAClC,CAACC,GAA2B,SAAS,GAAGA;AAAA,EACxC,CAACC,GAAuB,SAAS,GAAGA;AACxC;ACpKO,MAAME,WAA0B,MAAM;AAAA,EACzC,YAAY99E,GAAS;AACjB,UAAMA,KAAmD,cAAc;AAAA,EAC3E;AACJ;AAaA,SAAS+9E,GAAuBC,GAAmBC,GAAkB;AACjE,QAAMC,IAAkBF,EAAkB,kBAAkB;AAE5D,SAAIC,EAAiB,WAAW,IACrBC,IAAkB,uBAAuB,SAGhDA,KAAmBD,EAAiB,SAAS,qBAAqB,IAC3D,wBAEPC,KAAmBD,EAAiB,SAAS,oBAAoB,IAC1D,uBAEPA,EAAiB,SAAS,MAAM,IACzB,SAGJC,IAAkB,uBAAuB;AACpD;AAeA,SAASC,GAA0B7uC,GAAQ0uC,GAAmBj0C,GAAS5hB,GAAQ;AAC3E,QAAM,EAAE,WAAAi2D,GAAW,eAAAC,EAAa,IAAKL;AACrC,UAAQ1uC,GAAM;AAAA,IACV,KAAK;AACD,MAAAgvC,GAAeF,GAAWC,GAAet0C,CAAO;AAChD;AAAA,IACJ,KAAK;AACD,MAAAw0C,GAAcH,GAAWC,GAAel2D,CAAM;AAC9C;AAAA,IACJ,KAAK;AACD,MAAAq2D,GAAgBJ,GAAWj2D,CAAM;AACjC;AAAA,IACJ;AACI,YAAM,IAAI,MAAM,6CAA6CmnB,CAAM,EAAE;AAAA,EACjF;AACA;AAIA,SAASgvC,GAAeG,GAAUC,GAAc30C,GAAS;AACrD,MAAI,CAAC20C;AACD,UAAM,IAAI,MAAM,6DAA6D;AAEjF,QAAMC,IAAc,KAAK,GAAGF,CAAQ,IAAIC,CAAY,EAAE;AACtD,EAAA30C,EAAQ,IAAI,iBAAiB,SAAS40C,CAAW,EAAE;AACvD;AAIA,SAASJ,GAAcE,GAAUC,GAAcv2D,GAAQ;AACnD,EAAAA,EAAO,IAAI,aAAas2D,CAAQ,GAC5BC,KACAv2D,EAAO,IAAI,iBAAiBu2D,CAAY;AAEhD;AAIA,SAASF,GAAgBC,GAAUt2D,GAAQ;AACvC,EAAAA,EAAO,IAAI,aAAas2D,CAAQ;AACpC;AAYO,eAAeG,GAAmBhnC,GAAO;AAC5C,QAAMinC,IAAajnC,aAAiB,WAAWA,EAAM,SAAS,QACxDmiC,IAAOniC,aAAiB,WAAW,MAAMA,EAAM,KAAI,IAAKA;AAC9D,MAAI;AACA,UAAM/8C,IAAS+gF,GAAyB,MAAM,KAAK,MAAM7B,CAAI,CAAC,GACxD,EAAE,OAAAt5E,GAAO,mBAAAq+E,GAAmB,WAAAC,EAAS,IAAKlkF,GAC1CmkF,IAAanB,GAAap9E,CAAK,KAAK28E;AAC1C,WAAO,IAAI4B,EAAWF,KAAqB,IAAIC,CAAS;AAAA,EAC5D,SACOt+E,GAAO;AAEV,UAAMw1C,IAAe,GAAG4oC,IAAa,QAAQA,CAAU,OAAO,EAAE,iCAAiCp+E,CAAK,eAAes5E,CAAI;AACzH,WAAO,IAAIqD,GAAYnnC,CAAY;AAAA,EACvC;AACJ;AAOO,eAAegpC,GAAKrnD,GAAUpoB,GAAS;AAC1C,MAAIjW,GAAIwB;AACR,MAAI;AACA,WAAO,MAAMmkF,GAAatnD,GAAUpoB,CAAO;AAAA,EAC/C,SACO/O,GAAO;AAEV,QAAIA,aAAiBq8E,MAAsBr8E,aAAiBu8E;AACxD,qBAAQzjF,IAAKq+B,EAAS,2BAA2B,QAAQr+B,MAAO,SAAS,SAASA,EAAG,KAAKq+B,GAAU,KAAK,IAClG,MAAMsnD,GAAatnD,GAAUpoB,CAAO;AAE1C,QAAI/O,aAAiBs8E;AACtB,qBAAQhiF,IAAK68B,EAAS,2BAA2B,QAAQ78B,MAAO,SAAS,SAASA,EAAG,KAAK68B,GAAU,QAAQ,IACrG,MAAMsnD,GAAatnD,GAAUpoB,CAAO;AAG/C,UAAM/O;AAAA,EACV;AACJ;AACA,eAAey+E,GAAatnD,GAAU,EAAE,WAAAunD,GAAW,mBAAAC,GAAmB,OAAAC,GAAO,qBAAAC,GAAqB,SAAAC,KAAY;AAC1G,MAAIC,GACAC;AACJ,MAAI;AACA,IAAAD,IAAmB,MAAME,GAAuCP,GAAW,EAAE,qBAAAG,EAAmB,GAAIC,CAAO,GACvGC,EAAiB,yBAAyBA,EAAiB,sBAAsB,SAAS,MAC1FC,IAAyBD,EAAiB,sBAAsB,CAAC;AAAA,EAEzE,QACW;AAAA,EAEX;AAKA,EAAKC,MACDA,IAAyBN;AAE7B,QAAMQ,IAAW,MAAMC,GAAkBT,GAAWvnD,GAAU4nD,CAAgB,GACxEK,IAAW,MAAMC,GAAoCL,GAAwB;AAAA,IAC/E,SAAAF;AAAA,EACR,CAAK;AAED,MAAIvB,IAAoB,MAAM,QAAQ,QAAQpmD,EAAS,kBAAiB,CAAE;AAC1E,MAAI,CAAComD,GAAmB;AACpB,QAAIoB,MAAsB;AACtB,YAAM,IAAI,MAAM,qFAAqF;AAEzG,QAAI,CAACxnD,EAAS;AACV,YAAM,IAAI,MAAM,oEAAoE;AAExF,UAAMmoD,IAAkB,MAAMC,GAAeP,GAAwB;AAAA,MACjE,UAAAI;AAAA,MACA,gBAAgBjoD,EAAS;AAAA,IACrC,CAAS;AACD,UAAMA,EAAS,sBAAsBmoD,CAAe,GACpD/B,IAAoB+B;AAAA,EACxB;AAEA,MAAIX,MAAsB,QAAW;AACjC,UAAMa,IAAe,MAAMroD,EAAS,aAAY,GAC1CsoD,IAAS,MAAMC,GAAsBV,GAAwB;AAAA,MAC/D,UAAAI;AAAA,MACA,mBAAA7B;AAAA,MACA,mBAAAoB;AAAA,MACA,cAAAa;AAAA,MACA,aAAaroD,EAAS;AAAA,MACtB,UAAA+nD;AAAA,MACA,yBAAyB/nD,EAAS;AAAA,MAClC,SAAS2nD;AAAA,IACrB,CAAS;AACD,iBAAM3nD,EAAS,WAAWsoD,CAAM,GACzB;AAAA,EACX;AACA,QAAMA,IAAS,MAAMtoD,EAAS,OAAM;AAEpC,MAAIsoD,KAAW,QAAqCA,EAAO;AACvD,QAAI;AAEA,YAAME,IAAY,MAAMC,GAAqBZ,GAAwB;AAAA,QACjE,UAAAI;AAAA,QACA,mBAAA7B;AAAA,QACA,cAAckC,EAAO;AAAA,QACrB,UAAAP;AAAA,QACA,yBAAyB/nD,EAAS;AAAA,MAClD,CAAa;AACD,mBAAMA,EAAS,WAAWwoD,CAAS,GAC5B;AAAA,IACX,SACO3/E,GAAO;AAEV,UAAI,IAAEA,aAAiBk8E,OAAel8E,aAAiB28E,IAKnD,OAAM38E;AAAA,IAEd;AAEJ,QAAMxF,IAAQ28B,EAAS,QAAQ,MAAMA,EAAS,MAAK,IAAK,QAElD,EAAE,kBAAA0oD,GAAkB,cAAAL,EAAY,IAAK,MAAMM,GAAmBd,GAAwB;AAAA,IACxF,UAAAI;AAAA,IACA,mBAAA7B;AAAA,IACA,OAAA/iF;AAAA,IACA,aAAa28B,EAAS;AAAA,IACtB,OAAOynD,KAASznD,EAAS,eAAe;AAAA,IACxC,UAAA+nD;AAAA,EACR,CAAK;AACD,eAAM/nD,EAAS,iBAAiBqoD,CAAY,GAC5C,MAAMroD,EAAS,wBAAwB0oD,CAAgB,GAChD;AACX;AACO,eAAeV,GAAkBT,GAAWvnD,GAAU4nD,GAAkB;AAC3E,QAAMgB,IAAkBtE,GAAyBiD,CAAS;AAE1D,MAAIvnD,EAAS;AACT,WAAO,MAAMA,EAAS,oBAAoB4oD,GAAiBhB,KAAqB,OAAsC,SAASA,EAAiB,QAAQ;AAG5J,MAAKA,GAIL;AAAA,QAAI,CAACpD,GAAqB,EAAE,mBAAmBoE,GAAiB,oBAAoBhB,EAAiB,SAAQ,CAAE;AAC3G,YAAM,IAAI,MAAM,sBAAsBA,EAAiB,QAAQ,4BAA4BgB,CAAe,cAAc;AAG5H,WAAO,IAAI,IAAIhB,EAAiB,QAAQ;AAAA;AAC5C;AAIO,SAASiB,GAA2B/8D,GAAK;AAC5C,QAAMg9D,IAAqBh9D,EAAI,QAAQ,IAAI,kBAAkB;AAC7D,MAAI,CAACg9D;AACD;AAEJ,QAAM,CAAC5nF,GAAMugE,CAAM,IAAIqnB,EAAmB,MAAM,GAAG;AACnD,MAAI5nF,EAAK,YAAW,MAAO,YAAY,CAACugE;AACpC;AAGJ,QAAMp/B,IADQ,8BACM,KAAKymD,CAAkB;AAC3C,MAAKzmD;AAGL,QAAI;AACA,aAAO,IAAI,IAAIA,EAAM,CAAC,CAAC;AAAA,IAC3B,QACW;AACP;AAAA,IACJ;AACJ;AAOO,eAAeylD,GAAuCP,GAAWpuC,GAAMwuC,IAAU,OAAO;AAC3F,QAAMn4C,IAAW,MAAMu5C,GAA6BxB,GAAW,4BAA4BI,GAAS;AAAA,IAChG,iBAAiBxuC,KAAS,OAA0B,SAASA,EAAK;AAAA,IAClE,aAAaA,KAAS,OAA0B,SAASA,EAAK;AAAA,EACtE,CAAK;AACD,MAAI,CAAC3J,KAAYA,EAAS,WAAW;AACjC,UAAM,IAAI,MAAM,2EAA2E;AAE/F,MAAI,CAACA,EAAS;AACV,UAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,+DAA+D;AAE1G,SAAOk0C,GAAqC,MAAM,MAAMl0C,EAAS,KAAI,CAAE;AAC3E;AAIA,eAAew5C,GAAmB/9C,GAAKkH,GAASw1C,IAAU,OAAO;AAC7D,MAAI;AACA,WAAO,MAAMA,EAAQ18C,GAAK,EAAE,SAAAkH,EAAO,CAAE;AAAA,EACzC,SACOtpC,GAAO;AACV,QAAIA,aAAiB;AACjB,aAAIspC,IAEO62C,GAAmB/9C,GAAK,QAAW08C,CAAO,IAIjD;AAGR,UAAM9+E;AAAA,EACV;AACJ;AAIA,SAASogF,GAAmBC,GAAiBC,IAAW,IAAIvxE,IAAU,CAAA,GAAI;AAEtE,SAAIuxE,EAAS,SAAS,GAAG,MACrBA,IAAWA,EAAS,MAAM,GAAG,EAAE,IAE5BvxE,EAAQ,kBACT,GAAGuxE,CAAQ,gBAAgBD,CAAe,KAC1C,gBAAgBA,CAAe,GAAGC,CAAQ;AACpD;AAIA,eAAeC,GAAqBn+C,GAAKo+C,GAAiB1B,IAAU,OAAO;AAIvE,SAAO,MAAMqB,GAAmB/9C,GAHhB;AAAA,IACZ,wBAAwBo+C;AAAA,EAChC,GACkD1B,CAAO;AACzD;AAIA,SAAS2B,GAAsB95C,GAAU25C,GAAU;AAC/C,SAAO,CAAC35C,KAAYA,EAAS,WAAW,OAAO25C,MAAa;AAChE;AAIA,eAAeJ,GAA6BxB,GAAWgC,GAAe5B,GAASxuC,GAAM;AACjF,MAAIx3C,GAAIwB;AACR,QAAMqmF,IAAS,IAAI,IAAIjC,CAAS,GAC1B8B,KAAmB1nF,IAAKw3C,KAAS,OAA0B,SAASA,EAAK,qBAAqB,QAAQx3C,MAAO,SAASA,IAAKspD;AACjI,MAAIhgB;AACJ,MAAIkO,KAAS,QAAmCA,EAAK;AACjD,IAAAlO,IAAM,IAAI,IAAIkO,EAAK,WAAW;AAAA,OAE7B;AAED,UAAMswC,IAAgBR,GAAmBM,GAAeC,EAAO,QAAQ;AACvE,IAAAv+C,IAAM,IAAI,IAAIw+C,IAAgBtmF,IAAKg2C,KAAS,OAA0B,SAASA,EAAK,uBAAuB,QAAQh2C,MAAO,SAASA,IAAKqmF,CAAM,GAC9Iv+C,EAAI,SAASu+C,EAAO;AAAA,EACxB;AACA,MAAIh6C,IAAW,MAAM45C,GAAqBn+C,GAAKo+C,GAAiB1B,CAAO;AAEvE,MAAI,EAAExuC,KAAS,QAAmCA,EAAK,gBAAgBmwC,GAAsB95C,GAAUg6C,EAAO,QAAQ,GAAG;AACrH,UAAME,IAAU,IAAI,IAAI,gBAAgBH,CAAa,IAAIC,CAAM;AAC/D,IAAAh6C,IAAW,MAAM45C,GAAqBM,GAASL,GAAiB1B,CAAO;AAAA,EAC3E;AACA,SAAOn4C;AACX;AAuCO,SAASm6C,GAAmB9B,GAAwB;AACvD,QAAM58C,IAAM,OAAO48C,KAA2B,WAAW,IAAI,IAAIA,CAAsB,IAAIA,GACrF+B,IAAU3+C,EAAI,aAAa,KAC3B4+C,IAAY,CAAA;AAClB,MAAI,CAACD;AAED,WAAAC,EAAU,KAAK;AAAA,MACX,KAAK,IAAI,IAAI,2CAA2C5+C,EAAI,MAAM;AAAA,MAClE,MAAM;AAAA,IAClB,CAAS,GAED4+C,EAAU,KAAK;AAAA,MACX,KAAK,IAAI,IAAI,qCAAqC5+C,EAAI,MAAM;AAAA,MAC5D,MAAM;AAAA,IAClB,CAAS,GACM4+C;AAGX,MAAIV,IAAWl+C,EAAI;AACnB,SAAIk+C,EAAS,SAAS,GAAG,MACrBA,IAAWA,EAAS,MAAM,GAAG,EAAE,IAInCU,EAAU,KAAK;AAAA,IACX,KAAK,IAAI,IAAI,0CAA0CV,CAAQ,IAAIl+C,EAAI,MAAM;AAAA,IAC7E,MAAM;AAAA,EACd,CAAK,GAED4+C,EAAU,KAAK;AAAA,IACX,KAAK,IAAI,IAAI,2CAA2C5+C,EAAI,MAAM;AAAA,IAClE,MAAM;AAAA,EACd,CAAK,GAGD4+C,EAAU,KAAK;AAAA,IACX,KAAK,IAAI,IAAI,oCAAoCV,CAAQ,IAAIl+C,EAAI,MAAM;AAAA,IACvE,MAAM;AAAA,EACd,CAAK,GAED4+C,EAAU,KAAK;AAAA,IACX,KAAK,IAAI,IAAI,GAAGV,CAAQ,qCAAqCl+C,EAAI,MAAM;AAAA,IACvE,MAAM;AAAA,EACd,CAAK,GACM4+C;AACX;AAiBO,eAAe3B,GAAoCL,GAAwB,EAAE,SAAAF,IAAU,OAAO,iBAAA0B,IAAkBp+B,GAAuB,IAAM,IAAI;AACpJ,MAAItpD;AACJ,QAAMwwC,IAAU,EAAE,wBAAwBk3C,EAAe,GAEnDQ,IAAYF,GAAmB9B,CAAsB;AAE3D,aAAW,EAAE,KAAKiC,GAAa,MAAA5oF,EAAI,KAAM2oF,GAAW;AAChD,UAAMr6C,IAAW,MAAMw5C,GAAmBc,GAAa33C,GAASw1C,CAAO;AACvE,QAAI,CAACn4C;AACD,YAAM,IAAI,MAAM,6BAA6BtuC,MAAS,UAAU,UAAU,iBAAiB,kBAAkB4oF,CAAW,EAAE;AAE9H,QAAI,CAACt6C,EAAS,IAAI;AAEd,UAAIA,EAAS,UAAU,OAAOA,EAAS,SAAS;AAC5C;AAEJ,YAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,mBAAmBtuC,MAAS,UAAU,UAAU,iBAAiB,kBAAkB4oF,CAAW,EAAE;AAAA,IAC3I;AAEA,QAAI5oF,MAAS;AACT,aAAOyiF,GAAoB,MAAM,MAAMn0C,EAAS,KAAI,CAAE;AAErD;AACD,YAAMy4C,IAAWnE,GAAsC,MAAM,MAAMt0C,EAAS,KAAI,CAAE;AAElF,UAAI,EAAG,GAAA7tC,IAAKsmF,EAAS,sCAAsC,QAAQtmF,MAAO,WAAkBA,EAAG,SAAS,MAAM;AAC1G,cAAM,IAAI,MAAM,iCAAiCmoF,CAAW,6EAA6E;AAE7I,aAAO7B;AAAA,IACX;AAAA,EACJ;AAEJ;AAIO,eAAeU,GAAmBd,GAAwB,EAAE,UAAAI,GAAU,mBAAA7B,GAAmB,aAAA2D,GAAa,OAAAtC,GAAO,OAAApkF,GAAO,UAAA0kF,KAAa;AACpI,QAAMlyC,IAAe,QACfm0C,IAAsB;AAC5B,MAAItB;AACJ,MAAIT,GAAU;AAEV,QADAS,IAAmB,IAAI,IAAIT,EAAS,sBAAsB,GACtD,CAACA,EAAS,yBAAyB,SAASpyC,CAAY;AACxD,YAAM,IAAI,MAAM,4DAA4DA,CAAY,EAAE;AAE9F,QAAI,CAACoyC,EAAS,oCACV,CAACA,EAAS,iCAAiC,SAAS+B,CAAmB;AACvE,YAAM,IAAI,MAAM,oEAAoEA,CAAmB,EAAE;AAAA,EAEjH;AAEI,IAAAtB,IAAmB,IAAI,IAAI,cAAcb,CAAsB;AAGnE,QAAMpE,IAAY,MAAMF,GAAa,GAC/B8E,IAAe5E,EAAU,eACzBwG,IAAgBxG,EAAU;AAChC,SAAAiF,EAAiB,aAAa,IAAI,iBAAiB7yC,CAAY,GAC/D6yC,EAAiB,aAAa,IAAI,aAAatC,EAAkB,SAAS,GAC1EsC,EAAiB,aAAa,IAAI,kBAAkBuB,CAAa,GACjEvB,EAAiB,aAAa,IAAI,yBAAyBsB,CAAmB,GAC9EtB,EAAiB,aAAa,IAAI,gBAAgB,OAAOqB,CAAW,CAAC,GACjE1mF,KACAqlF,EAAiB,aAAa,IAAI,SAASrlF,CAAK,GAEhDokF,KACAiB,EAAiB,aAAa,IAAI,SAASjB,CAAK,GAEhDA,KAAU,QAAoCA,EAAM,SAAS,gBAAgB,KAI7EiB,EAAiB,aAAa,OAAO,UAAU,SAAS,GAExDX,KACAW,EAAiB,aAAa,IAAI,YAAYX,EAAS,IAAI,GAExD,EAAE,kBAAAW,GAAkB,cAAAL,EAAY;AAC3C;AAaO,eAAeE,GAAsBV,GAAwB,EAAE,UAAAI,GAAU,mBAAA7B,GAAmB,mBAAAoB,GAAmB,cAAAa,GAAc,aAAA6B,GAAa,UAAAnC,GAAU,yBAAAoC,GAAyB,SAAAxC,EAAO,GAAK;AAC5L,MAAIhmF;AACJ,QAAMyoF,IAAY,sBACZC,IAAYpC,KAAa,QAAuCA,EAAS,iBACzE,IAAI,IAAIA,EAAS,cAAc,IAC/B,IAAI,IAAI,UAAUJ,CAAsB;AAC9C,MAAKI,KAAa,QAAuCA,EAAS,yBAC9D,CAACA,EAAS,sBAAsB,SAASmC,CAAS;AAClD,UAAM,IAAI,MAAM,yDAAyDA,CAAS,EAAE;AAGxF,QAAMj4C,IAAU,IAAI,QAAQ;AAAA,IACxB,gBAAgB;AAAA,IAChB,QAAU;AAAA,EAClB,CAAK,GACK5hB,IAAS,IAAI,gBAAgB;AAAA,IAC/B,YAAY65D;AAAA,IACZ,MAAM5C;AAAA,IACN,eAAea;AAAA,IACf,cAAc,OAAO6B,CAAW;AAAA,EACxC,CAAK;AACD,MAAIC;AACA,IAAAA,EAAwBh4C,GAAS5hB,GAAQs3D,GAAwBI,CAAQ;AAAA,OAExE;AAED,UAAM5B,KAAoB1kF,IAAKsmF,KAAa,OAA8B,SAASA,EAAS,2CAA2C,QAAQtmF,MAAO,SAASA,IAAK,CAAA,GAC9J2oF,IAAanE,GAAuBC,GAAmBC,CAAgB;AAC7E,IAAAE,GAA0B+D,GAAYlE,GAAmBj0C,GAAS5hB,CAAM;AAAA,EAC5E;AACA,EAAIw3D,KACAx3D,EAAO,IAAI,YAAYw3D,EAAS,IAAI;AAExC,QAAMv4C,IAAW,OAAOm4C,KAAmD,OAAO0C,GAAU;AAAA,IACxF,QAAQ;AAAA,IACR,SAAAl4C;AAAA,IACA,MAAM5hB;AAAA,EACd,CAAK;AACD,MAAI,CAACif,EAAS;AACV,UAAM,MAAMw3C,GAAmBx3C,CAAQ;AAE3C,SAAOu0C,GAAkB,MAAM,MAAMv0C,EAAS,KAAI,CAAE;AACxD;AAaO,eAAei5C,GAAqBZ,GAAwB,EAAE,UAAAI,GAAU,mBAAA7B,GAAmB,cAAAmE,GAAc,UAAAxC,GAAU,yBAAAoC,GAAyB,SAAAxC,KAAY;AAC3J,MAAIhmF;AACJ,QAAMyoF,IAAY;AAClB,MAAIC;AACJ,MAAIpC;AAEA,QADAoC,IAAW,IAAI,IAAIpC,EAAS,cAAc,GACtCA,EAAS,yBACT,CAACA,EAAS,sBAAsB,SAASmC,CAAS;AAClD,YAAM,IAAI,MAAM,yDAAyDA,CAAS,EAAE;AAAA;AAIxF,IAAAC,IAAW,IAAI,IAAI,UAAUxC,CAAsB;AAGvD,QAAM11C,IAAU,IAAI,QAAQ;AAAA,IACxB,gBAAgB;AAAA,EACxB,CAAK,GACK5hB,IAAS,IAAI,gBAAgB;AAAA,IAC/B,YAAY65D;AAAA,IACZ,eAAeG;AAAA,EACvB,CAAK;AACD,MAAIJ;AACA,IAAAA,EAAwBh4C,GAAS5hB,GAAQs3D,GAAwBI,CAAQ;AAAA,OAExE;AAED,UAAM5B,KAAoB1kF,IAAKsmF,KAAa,OAA8B,SAASA,EAAS,2CAA2C,QAAQtmF,MAAO,SAASA,IAAK,CAAA,GAC9J2oF,IAAanE,GAAuBC,GAAmBC,CAAgB;AAC7E,IAAAE,GAA0B+D,GAAYlE,GAAmBj0C,GAAS5hB,CAAM;AAAA,EAC5E;AACA,EAAIw3D,KACAx3D,EAAO,IAAI,YAAYw3D,EAAS,IAAI;AAExC,QAAMv4C,IAAW,OAAOm4C,KAAmD,OAAO0C,GAAU;AAAA,IACxF,QAAQ;AAAA,IACR,SAAAl4C;AAAA,IACA,MAAM5hB;AAAA,EACd,CAAK;AACD,MAAI,CAACif,EAAS;AACV,UAAM,MAAMw3C,GAAmBx3C,CAAQ;AAE3C,SAAOu0C,GAAkB,MAAM,EAAE,eAAewG,GAAc,GAAI,MAAM/6C,EAAS,KAAI,GAAK;AAC9F;AAIO,eAAe44C,GAAeP,GAAwB,EAAE,UAAAI,GAAU,gBAAAuC,GAAgB,SAAA7C,EAAO,GAAK;AACjG,MAAI8C;AACJ,MAAIxC,GAAU;AACV,QAAI,CAACA,EAAS;AACV,YAAM,IAAI,MAAM,wEAAwE;AAE5F,IAAAwC,IAAkB,IAAI,IAAIxC,EAAS,qBAAqB;AAAA,EAC5D;AAEI,IAAAwC,IAAkB,IAAI,IAAI,aAAa5C,CAAsB;AAEjE,QAAMr4C,IAAW,OAAOm4C,KAAmD,OAAO8C,GAAiB;AAAA,IAC/F,QAAQ;AAAA,IACR,SAAS;AAAA,MACL,gBAAgB;AAAA,IAC5B;AAAA,IACQ,MAAM,KAAK,UAAUD,CAAc;AAAA,EAC3C,CAAK;AACD,MAAI,CAACh7C,EAAS;AACV,UAAM,MAAMw3C,GAAmBx3C,CAAQ;AAE3C,SAAO60C,GAAiC,MAAM,MAAM70C,EAAS,KAAI,CAAE;AACvE;AChrBO,MAAMk7C,WAAiB,MAAM;AAAA,EAChC,YAAYvnD,GAAM/6B,GAAS0C,GAAO;AAC9B,UAAM,cAAc1C,CAAO,EAAE,GAC7B,KAAK,OAAO+6B,GACZ,KAAK,QAAQr4B;AAAA,EACjB;AACJ;AAKO,MAAM6/E,GAAmB;AAAA,EAC5B,YAAY1/C,GAAKkO,GAAM;AACnB,SAAK,OAAOlO,GACZ,KAAK,uBAAuB,QAC5B,KAAK,mBAAmBkO,KAAS,OAA0B,SAASA,EAAK,iBACzE,KAAK,eAAeA,KAAS,OAA0B,SAASA,EAAK,aACrE,KAAK,gBAAgBA,KAAS,OAA0B,SAASA,EAAK,cACtE,KAAK,SAASA,KAAS,OAA0B,SAASA,EAAK;AAAA,EACnE;AAAA,EACA,MAAM,iBAAiB;AACnB,QAAIx3C;AACJ,QAAI,CAAC,KAAK;AACN,YAAM,IAAIukF,GAAkB,kBAAkB;AAElD,QAAIjjF;AACJ,QAAI;AACA,MAAAA,IAAS,MAAMokF,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,OAAM,CAAE;AAAA,IAC1I,SACOx+E,GAAO;AACV,aAAClH,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK,GACtEA;AAAA,IACV;AACA,QAAI5F,MAAW;AACX,YAAM,IAAIijF,GAAiB;AAE/B,WAAO,MAAM,KAAK,aAAY;AAAA,EAClC;AAAA,EACA,MAAM,iBAAiB;AACnB,QAAIvkF;AACJ,UAAMwwC,IAAU,CAAA;AAChB,QAAI,KAAK,eAAe;AACpB,YAAMm2C,IAAS,MAAM,KAAK,cAAc,OAAM;AAC9C,MAAIA,MACAn2C,EAAQ,gBAAmB,UAAUm2C,EAAO,YAAY;AAAA,IAEhE;AACA,WAAI,KAAK,qBACLn2C,EAAQ,sBAAsB,IAAI,KAAK,mBAEpC,IAAI,QAAQ,EAAE,GAAGA,GAAS,IAAIxwC,IAAK,KAAK,kBAAkB,QAAQA,MAAO,SAAS,SAASA,EAAG,QAAO,CAAE;AAAA,EAClH;AAAA,EACA,eAAe;AACX,QAAIA,GAAIwB,GAAI6C;AACZ,UAAM4kF,KAAc5kF,KAAM7C,KAAMxB,IAAK,SAAS,QAAQ,SAAS,SAAS,SAAS,KAAK,sBAAsB,QAAQA,MAAO,SAAS,SAASA,EAAG,WAAW,QAAQwB,MAAO,SAASA,IAAK,KAAK,YAAY,QAAQ6C,MAAO,SAASA,IAAK;AACtO,WAAO,IAAI,QAAQ,CAACotC,GAASC,MAAW;AACpC,WAAK,eAAe,IAAI2uC,GAAY,KAAK,KAAK,MAAM;AAAA,QAChD,GAAG,KAAK;AAAA,QACR,OAAO,OAAO/2C,GAAK03C,MAAS;AACxB,gBAAMxwC,IAAU,MAAM,KAAK,eAAc;AACzC,UAAAA,EAAQ,IAAI,UAAU,mBAAmB;AACzC,gBAAM3C,IAAW,MAAMo7C,EAAU3/C,GAAK;AAAA,YAClC,GAAG03C;AAAA,YACH,SAAAxwC;AAAA,UACxB,CAAqB;AACD,iBAAI3C,EAAS,WAAW,OAAOA,EAAS,QAAQ,IAAI,kBAAkB,MAClE,KAAK,uBAAuBq5C,GAA2Br5C,CAAQ,IAE5DA;AAAA,QACX;AAAA,MAChB,CAAa,GACD,KAAK,mBAAmB,IAAI,gBAAe,GAC3C,KAAK,aAAa,UAAU,CAAC1kC,MAAU;AACnC,YAAInJ;AACJ,YAAImJ,EAAM,SAAS,OAAO,KAAK,eAAe;AAC1C,eAAK,eAAc,EAAG,KAAKsoC,GAASC,CAAM;AAC1C;AAAA,QACJ;AACA,cAAMxqC,IAAQ,IAAI6hF,GAAS5/E,EAAM,MAAMA,EAAM,SAASA,CAAK;AAC3D,QAAAuoC,EAAOxqC,CAAK,IACXlH,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK;AAAA,MAChF,GACA,KAAK,aAAa,SAAS,MAAM;AAAA,MAEjC,GACA,KAAK,aAAa,iBAAiB,YAAY,CAACiC,MAAU;AACtD,YAAInJ;AACJ,cAAM6gF,IAAe13E;AACrB,YAAI;AAEA,cADA,KAAK,YAAY,IAAI,IAAI03E,EAAa,MAAM,KAAK,IAAI,GACjD,KAAK,UAAU,WAAW,KAAK,KAAK;AACpC,kBAAM,IAAI,MAAM,qDAAqD,KAAK,UAAU,MAAM,EAAE;AAAA,QAEpG,SACO35E,GAAO;AACV,UAAAwqC,EAAOxqC,CAAK,IACXlH,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK,GACvE,KAAK,MAAK;AACf;AAAA,QACJ;AACA,QAAAuqC,EAAO;AAAA,MACX,CAAC,GACD,KAAK,aAAa,YAAY,CAACtoC,MAAU;AACrC,YAAInJ,GAAIwB;AACR,cAAMq/E,IAAe13E;AACrB,YAAI1C;AACJ,YAAI;AACA,UAAAA,IAAU0kD,GAAqB,MAAM,KAAK,MAAM01B,EAAa,IAAI,CAAC;AAAA,QACtE,SACO35E,GAAO;AACV,WAAClH,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK;AAC5E;AAAA,QACJ;AACA,SAAC1F,IAAK,KAAK,eAAe,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMiF,CAAO;AAAA,MACpF;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,MAAM,QAAQ;AACV,QAAI,KAAK;AACL,YAAM,IAAI,MAAM,6GAA6G;AAEjI,WAAO,MAAM,KAAK,aAAY;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,WAAWo/E,GAAmB;AAChC,QAAI,CAAC,KAAK;AACN,YAAM,IAAItB,GAAkB,kBAAkB;AAGlD,QADe,MAAMmB,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,mBAAAG,GAAmB,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,QAAQ,MAChJ;AACX,YAAM,IAAItB,GAAkB,qBAAqB;AAAA,EAEzD;AAAA,EACA,MAAM,QAAQ;AACV,QAAIvkF,GAAIwB,GAAI6C;AACZ,KAACrE,IAAK,KAAK,sBAAsB,QAAQA,MAAO,UAAkBA,EAAG,MAAK,IACzEwB,IAAK,KAAK,kBAAkB,QAAQA,MAAO,UAAkBA,EAAG,MAAK,IACrE6C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,IAAI;AAAA,EACzE;AAAA,EACA,MAAM,KAAKoC,GAAS;AAChB,QAAIzG,GAAIwB,GAAI6C;AACZ,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,eAAe;AAEnC,QAAI;AACA,YAAMmsC,IAAU,MAAM,KAAK,eAAc;AACzC,MAAAA,EAAQ,IAAI,gBAAgB,kBAAkB;AAC9C,YAAMwwC,IAAO;AAAA,QACT,GAAG,KAAK;AAAA,QACR,QAAQ;AAAA,QACR,SAAAxwC;AAAA,QACA,MAAM,KAAK,UAAU/pC,CAAO;AAAA,QAC5B,SAASzG,IAAK,KAAK,sBAAsB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAAA,MAC7F,GACkB6tC,IAAW,QAAQrsC,IAAK,KAAK,YAAY,QAAQA,MAAO,SAASA,IAAK,OAAO,KAAK,WAAWw/E,CAAI;AACvG,UAAI,CAACnzC,EAAS,IAAI;AACd,YAAIA,EAAS,WAAW,OAAO,KAAK,eAAe;AAG/C,cAFA,KAAK,uBAAuBq5C,GAA2Br5C,CAAQ,GAChD,MAAM63C,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,QAAQ,MAC7H;AACX,kBAAM,IAAInB,GAAiB;AAG/B,iBAAO,KAAK,KAAK99E,CAAO;AAAA,QAC5B;AACA,cAAMwoB,IAAO,MAAM4e,EAAS,KAAI,EAAG,MAAM,MAAM,IAAI;AACnD,cAAM,IAAI,MAAM,mCAAmCA,EAAS,MAAM,MAAM5e,CAAI,EAAE;AAAA,MAClF;AAAA,IACJ,SACO/nB,GAAO;AACV,aAAC7C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM6C,CAAK,GACtEA;AAAA,IACV;AAAA,EACJ;AAAA,EACA,mBAAmB+K,GAAS;AACxB,SAAK,mBAAmBA;AAAA,EAC5B;AACJ;ACpLA,MAAMi3E,WAAgC,gBAAgB;AAAA,EACpD,YAAY,EAAE,SAAA3M,GAAS,SAAAC,GAAS,WAAAC,EAAS,IAAK,CAAA,GAAI;AAChD,QAAInnC;AACJ,UAAM;AAAA,MACJ,MAAMqb,GAAY;AAChB,QAAArb,IAAS8mC,GAAa;AAAA,UACpB,SAAS,CAACjzE,MAAU;AAClB,YAAAwnD,EAAW,QAAQxnD,CAAK;AAAA,UAC1B;AAAA,UACA,QAAQjC,GAAO;AACb,YAAAq1E,MAAY,cAAc5rB,EAAW,MAAMzpD,CAAK,IAAI,OAAOq1E,KAAW,cAAcA,EAAQr1E,CAAK;AAAA,UACnG;AAAA,UACA,SAAAs1E;AAAA,UACA,WAAAC;AAAA,QACV,CAAS;AAAA,MACH;AAAA,MACA,UAAUM,GAAO;AACf,QAAAznC,EAAO,KAAKynC,CAAK;AAAA,MACnB;AAAA,IACN,CAAK;AAAA,EACH;AACF;ACnBA,MAAMoM,KAA+C;AAAA,EACjD,0BAA0B;AAAA,EAC1B,sBAAsB;AAAA,EACtB,6BAA6B;AAAA,EAC7B,YAAY;AAChB;AACO,MAAMC,WAA4B,MAAM;AAAA,EAC3C,YAAY5nD,GAAM/6B,GAAS;AACvB,UAAM,0BAA0BA,CAAO,EAAE,GACzC,KAAK,OAAO+6B;AAAA,EAChB;AACJ;AAMO,MAAM6nD,GAA8B;AAAA,EACvC,YAAY//C,GAAKkO,GAAM;AACnB,QAAIx3C;AACJ,SAAK,OAAOspC,GACZ,KAAK,uBAAuB,QAC5B,KAAK,eAAekO,KAAS,OAA0B,SAASA,EAAK,aACrE,KAAK,gBAAgBA,KAAS,OAA0B,SAASA,EAAK,cACtE,KAAK,SAASA,KAAS,OAA0B,SAASA,EAAK,OAC/D,KAAK,aAAaA,KAAS,OAA0B,SAASA,EAAK,WACnE,KAAK,wBAAwBx3C,IAAKw3C,KAAS,OAA0B,SAASA,EAAK,yBAAyB,QAAQx3C,MAAO,SAASA,IAAKmpF;AAAA,EAC7I;AAAA,EACA,MAAM,iBAAiB;AACnB,QAAInpF;AACJ,QAAI,CAAC,KAAK;AACN,YAAM,IAAIukF,GAAkB,kBAAkB;AAElD,QAAIjjF;AACJ,QAAI;AACA,MAAAA,IAAS,MAAMokF,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,OAAM,CAAE;AAAA,IAC1I,SACOx+E,GAAO;AACV,aAAClH,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMkH,CAAK,GACtEA;AAAA,IACV;AACA,QAAI5F,MAAW;AACX,YAAM,IAAIijF,GAAiB;AAE/B,WAAO,MAAM,KAAK,gBAAgB,EAAE,iBAAiB,OAAS,CAAE;AAAA,EACpE;AAAA,EACA,MAAM,iBAAiB;AACnB,QAAIvkF;AACJ,UAAMwwC,IAAU,CAAA;AAChB,QAAI,KAAK,eAAe;AACpB,YAAMm2C,IAAS,MAAM,KAAK,cAAc,OAAM;AAC9C,MAAIA,MACAn2C,EAAQ,gBAAmB,UAAUm2C,EAAO,YAAY;AAAA,IAEhE;AACA,IAAI,KAAK,eACLn2C,EAAQ,gBAAgB,IAAI,KAAK,aAEjC,KAAK,qBACLA,EAAQ,sBAAsB,IAAI,KAAK;AAE3C,UAAM84C,IAAe,KAAK,mBAAmBtpF,IAAK,KAAK,kBAAkB,QAAQA,MAAO,SAAS,SAASA,EAAG,OAAO;AACpH,WAAO,IAAI,QAAQ;AAAA,MACf,GAAGwwC;AAAA,MACH,GAAG84C;AAAA,IACf,CAAS;AAAA,EACL;AAAA,EACA,MAAM,gBAAgBrzE,GAAS;AAC3B,QAAIjW,GAAIwB,GAAI6C;AACZ,UAAM,EAAE,iBAAA4tD,EAAe,IAAKh8C;AAC5B,QAAI;AAGA,YAAMu6B,IAAU,MAAM,KAAK,eAAc;AACzC,MAAAA,EAAQ,IAAI,UAAU,mBAAmB,GAErCyhB,KACAzhB,EAAQ,IAAI,iBAAiByhB,CAAe;AAEhD,YAAMpkB,IAAW,QAAQ7tC,IAAK,KAAK,YAAY,QAAQA,MAAO,SAASA,IAAK,OAAO,KAAK,MAAM;AAAA,QAC1F,QAAQ;AAAA,QACR,SAAAwwC;AAAA,QACA,SAAShvC,IAAK,KAAK,sBAAsB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAAA,MAC7F,CAAa;AACD,UAAI,CAACqsC,EAAS,IAAI;AACd,YAAIA,EAAS,WAAW,OAAO,KAAK;AAEhC,iBAAO,MAAM,KAAK,eAAc;AAIpC,YAAIA,EAAS,WAAW;AACpB;AAEJ,cAAM,IAAIu7C,GAAoBv7C,EAAS,QAAQ,8BAA8BA,EAAS,UAAU,EAAE;AAAA,MACtG;AACA,WAAK,iBAAiBA,EAAS,MAAM53B,GAAS,EAAI;AAAA,IACtD,SACO/O,GAAO;AACV,aAAC7C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM6C,CAAK,GACtEA;AAAA,IACV;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,0BAA0BqiF,GAAS;AAE/B,UAAMC,IAAe,KAAK,qBAAqB,0BACzCC,IAAa,KAAK,qBAAqB,6BACvCC,IAAW,KAAK,qBAAqB;AAE3C,WAAO,KAAK,IAAIF,IAAe,KAAK,IAAIC,GAAYF,CAAO,GAAGG,CAAQ;AAAA,EAC1E;AAAA,EACA,kBAAkBl5C,GAAS;AACvB,WAAKA,IAEDA,aAAmB,UACZ,OAAO,YAAYA,EAAQ,QAAO,CAAE,IAE3C,MAAM,QAAQA,CAAO,IACd,OAAO,YAAYA,CAAO,IAE9B,EAAE,GAAGA,EAAO,IAPR,CAAA;AAAA,EAQf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,sBAAsBv6B,GAAS0zE,IAAe,GAAG;AAC7C,QAAI3pF;AAEJ,UAAM4pF,IAAa,KAAK,qBAAqB;AAE7C,QAAIA,IAAa,KAAKD,KAAgBC,GAAY;AAC9C,OAAC5pF,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM,IAAI,MAAM,kCAAkC4pF,CAAU,aAAa,CAAC;AAC3I;AAAA,IACJ;AAEA,UAAMC,IAAQ,KAAK,0BAA0BF,CAAY;AAEzD,eAAW,MAAM;AAEb,WAAK,gBAAgB1zE,CAAO,EAAE,MAAM,CAAA/O,MAAS;AACzC,YAAIlH;AACJ,SAACA,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM,IAAI,MAAM,mCAAmCkH,aAAiB,QAAQA,EAAM,UAAU,OAAOA,CAAK,CAAC,EAAE,CAAC,GAE7K,KAAK,sBAAsB+O,GAAS0zE,IAAe,CAAC;AAAA,MACxD,CAAC;AAAA,IACL,GAAGE,CAAK;AAAA,EACZ;AAAA,EACA,iBAAiBC,GAAQ7zE,GAAS8zE,GAAiB;AAC/C,QAAI,CAACD;AACD;AAEJ,UAAM,EAAE,mBAAA53B,GAAmB,iBAAA83B,EAAe,IAAK/zE;AAC/C,QAAIg0E;AAwDJ,KAvDsB,YAAY;AAC9B,UAAIjqF,GAAIwB,GAAI6C,GAAIE;AAGhB,UAAI;AAEA,cAAMq8E,IAASkJ,EACV,YAAY,IAAI,kBAAiB,CAAE,EACnC,YAAY,IAAIZ,GAAuB,CAAE,EACzC,UAAS;AACd,mBAAa;AACT,gBAAM,EAAE,OAAO//E,GAAO,MAAAkrC,EAAI,IAAK,MAAMusC,EAAO,KAAI;AAChD,cAAIvsC;AACA;AAOJ,cAJIlrC,EAAM,OACN8gF,IAAc9gF,EAAM,IACpB+oD,KAAsB,QAAgDA,EAAkB/oD,EAAM,EAAE,IAEhG,CAACA,EAAM,SAASA,EAAM,UAAU;AAChC,gBAAI;AACA,oBAAM1C,IAAU0kD,GAAqB,MAAM,KAAK,MAAMhiD,EAAM,IAAI,CAAC;AACjE,cAAI6gF,MAAoB,UAAal/B,GAAkBrkD,CAAO,MAC1DA,EAAQ,KAAKujF,KAEhBhqF,IAAK,KAAK,eAAe,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMyG,CAAO;AAAA,YACpF,SACOS,GAAO;AACV,eAAC1F,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM0F,CAAK;AAAA,YAChF;AAAA,QAER;AAAA,MACJ,SACOA,GAAO;AAIV,aAFC7C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM,IAAI,MAAM,4BAA4B6C,CAAK,EAAE,CAAC,GAEjH6iF,KACA,KAAK,oBACL,CAAC,KAAK,iBAAiB,OAAO;AAE9B,cAAI;AACA,iBAAK,sBAAsB;AAAA,cACvB,iBAAiBE;AAAA,cACjB,mBAAA/3B;AAAA,cACA,iBAAA83B;AAAA,YAC5B,GAA2B,CAAC;AAAA,UACR,SACO9iF,GAAO;AACV,aAAC3C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM,IAAI,MAAM,wBAAwB2C,aAAiB,QAAQA,EAAM,UAAU,OAAOA,CAAK,CAAC,EAAE,CAAC;AAAA,UACtK;AAAA,MAER;AAAA,IACJ,GACa;AAAA,EACjB;AAAA,EACA,MAAM,QAAQ;AACV,QAAI,KAAK;AACL,YAAM,IAAI,MAAM,wHAAwH;AAE5I,SAAK,mBAAmB,IAAI,gBAAe;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,WAAW2+E,GAAmB;AAChC,QAAI,CAAC,KAAK;AACN,YAAM,IAAItB,GAAkB,kBAAkB;AAGlD,QADe,MAAMmB,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,mBAAAG,GAAmB,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,QAAQ,MAChJ;AACX,YAAM,IAAItB,GAAkB,qBAAqB;AAAA,EAEzD;AAAA,EACA,MAAM,QAAQ;AACV,QAAIvkF,GAAIwB;AAER,KAACxB,IAAK,KAAK,sBAAsB,QAAQA,MAAO,UAAkBA,EAAG,MAAK,IACzEwB,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,IAAI;AAAA,EACzE;AAAA,EACA,MAAM,KAAKiF,GAASwP,GAAS;AACzB,QAAIjW,GAAIwB,GAAI6C,GAAIE;AAChB,QAAI;AACA,YAAM,EAAE,iBAAA0tD,GAAiB,mBAAAC,EAAiB,IAAKj8C,KAAW,CAAA;AAC1D,UAAIg8C,GAAiB;AAEjB,aAAK,gBAAgB,EAAE,iBAAAA,GAAiB,iBAAiBvH,GAAiBjkD,CAAO,IAAIA,EAAQ,KAAK,OAAS,CAAE,EAAE,MAAM,CAAAmuC,MAAO;AAAE,cAAI50C;AAAI,kBAAQA,IAAK,KAAK,aAAa,QAAQA,MAAO,SAAS,SAASA,EAAG,KAAK,MAAM40C,CAAG;AAAA,QAAG,CAAC;AAC3N;AAAA,MACJ;AACA,YAAMpE,IAAU,MAAM,KAAK,eAAc;AACzC,MAAAA,EAAQ,IAAI,gBAAgB,kBAAkB,GAC9CA,EAAQ,IAAI,UAAU,qCAAqC;AAC3D,YAAMwwC,IAAO;AAAA,QACT,GAAG,KAAK;AAAA,QACR,QAAQ;AAAA,QACR,SAAAxwC;AAAA,QACA,MAAM,KAAK,UAAU/pC,CAAO;AAAA,QAC5B,SAASzG,IAAK,KAAK,sBAAsB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAAA,MAC7F,GACkB6tC,IAAW,QAAQrsC,IAAK,KAAK,YAAY,QAAQA,MAAO,SAASA,IAAK,OAAO,KAAK,MAAMw/E,CAAI,GAE5FkJ,IAAYr8C,EAAS,QAAQ,IAAI,gBAAgB;AAIvD,UAHIq8C,MACA,KAAK,aAAaA,IAElB,CAACr8C,EAAS,IAAI;AACd,YAAIA,EAAS,WAAW,OAAO,KAAK,eAAe;AAG/C,cAFA,KAAK,uBAAuBq5C,GAA2Br5C,CAAQ,GAChD,MAAM63C,GAAK,KAAK,eAAe,EAAE,WAAW,KAAK,MAAM,qBAAqB,KAAK,sBAAsB,SAAS,KAAK,QAAQ,MAC7H;AACX,kBAAM,IAAInB,GAAiB;AAG/B,iBAAO,KAAK,KAAK99E,CAAO;AAAA,QAC5B;AACA,cAAMwoB,IAAO,MAAM4e,EAAS,KAAI,EAAG,MAAM,MAAM,IAAI;AACnD,cAAM,IAAI,MAAM,mCAAmCA,EAAS,MAAM,MAAM5e,CAAI,EAAE;AAAA,MAClF;AAEA,UAAI4e,EAAS,WAAW,KAAK;AAGzB,QAAIke,GAA0BtlD,CAAO,KAEjC,KAAK,gBAAgB,EAAE,iBAAiB,OAAS,CAAE,EAAE,MAAM,CAAAmuC,MAAO;AAAE,cAAI50C;AAAI,kBAAQA,IAAK,KAAK,aAAa,QAAQA,MAAO,SAAS,SAASA,EAAG,KAAK,MAAM40C,CAAG;AAAA,QAAG,CAAC;AAErK;AAAA,MACJ;AAGA,YAAMu1C,KADW,MAAM,QAAQ1jF,CAAO,IAAIA,IAAU,CAACA,CAAO,GAC/B,OAAO,CAAA63E,MAAO,YAAYA,KAAO,QAAQA,KAAOA,EAAI,OAAO,MAAS,EAAE,SAAS,GAEtG/oC,IAAc1H,EAAS,QAAQ,IAAI,cAAc;AACvD,UAAIs8C;AACA,YAAI50C,KAAgB,QAA0CA,EAAY,SAAS,mBAAmB;AAIlG,eAAK,iBAAiB1H,EAAS,MAAM,EAAE,mBAAAqkB,EAAiB,GAAI,EAAK;AAAA,iBAE5D3c,KAAgB,QAA0CA,EAAY,SAAS,kBAAkB,GAAG;AAEzG,gBAAMl1C,IAAO,MAAMwtC,EAAS,KAAI,GAC1Bu8C,IAAmB,MAAM,QAAQ/pF,CAAI,IACrCA,EAAK,IAAI,CAAAi+E,MAAOnzB,GAAqB,MAAMmzB,CAAG,CAAC,IAC/C,CAACnzB,GAAqB,MAAM9qD,CAAI,CAAC;AACvC,qBAAWi+E,KAAO8L;AACd,aAAC/lF,IAAK,KAAK,eAAe,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAMi6E,CAAG;AAAA,QAEpF;AAEI,gBAAM,IAAI8K,GAAoB,IAAI,4BAA4B7zC,CAAW,EAAE;AAAA,IAGvF,SACOruC,GAAO;AACV,aAAC3C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM2C,CAAK,GACtEA;AAAA,IACV;AAAA,EACJ;AAAA,EACA,IAAI,YAAY;AACZ,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,MAAM,mBAAmB;AACrB,QAAIlH,GAAIwB,GAAI6C;AACZ,QAAK,KAAK;AAGV,UAAI;AACA,cAAMmsC,IAAU,MAAM,KAAK,eAAc,GACnCwwC,IAAO;AAAA,UACT,GAAG,KAAK;AAAA,UACR,QAAQ;AAAA,UACR,SAAAxwC;AAAA,UACA,SAASxwC,IAAK,KAAK,sBAAsB,QAAQA,MAAO,SAAS,SAASA,EAAG;AAAA,QAC7F,GACkB6tC,IAAW,QAAQrsC,IAAK,KAAK,YAAY,QAAQA,MAAO,SAASA,IAAK,OAAO,KAAK,MAAMw/E,CAAI;AAGlG,YAAI,CAACnzC,EAAS,MAAMA,EAAS,WAAW;AACpC,gBAAM,IAAIu7C,GAAoBv7C,EAAS,QAAQ,gCAAgCA,EAAS,UAAU,EAAE;AAExG,aAAK,aAAa;AAAA,MACtB,SACO3mC,GAAO;AACV,eAAC7C,IAAK,KAAK,aAAa,QAAQA,MAAO,UAAkBA,EAAG,KAAK,MAAM6C,CAAK,GACtEA;AAAA,MACV;AAAA,EACJ;AAAA,EACA,mBAAmB+K,GAAS;AACxB,SAAK,mBAAmBA;AAAA,EAC5B;AAAA,EACA,IAAI,kBAAkB;AAClB,WAAO,KAAK;AAAA,EAChB;AACJ;ACjXA,SAASo4E,KAAU;AACjB,QAAMC,IAAY,CAAC,SAAS,gBAAgB,UAAU,gBAAgB,SAAS,YAAY,gBAAgB,iBAAiB,WAAW,iBAAiB,gBAAgB,cAAc,mBAAmB,WAAW,SAAS,iBAAiB,WAAW;AACzP,SAAAD,KAAU,WAAW;AACnB,WAAOC;AAAA,EACT,GACOD,GAAO;AAChB;AAAA,CACC,SAASE,GAAWC,GAAW;AAC9B,QAAMC,IAAYC,IAASC,IAAYD,IAASE,IAAYL,EAAS;AACrE;AACE,QAAI;AAEF,UADkB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,IAAuB,SAASA,EAAU,GAAG,CAAC,IAAK,IAAgC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAAuB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAAkC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAA+B,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,IAAiC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAAiC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAuB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,OAC5eH,EAAW;AACxB,MAAAI,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGP,IAAS,SAAS,SAAS,KAAK,MAAM;AACzC,SAASK,GAAQG,GAAWC,GAAW;AACrC,QAAMC,IAAYV,GAAO;AACzB,SAAOK,KAAU,SAASM,GAAWC,GAAW;AAC9C,WAAAD,IAAYA,KAAa,KAAK,QAAQ,QAAQ,KAAK,OAAO,KAC1CD,EAAUC,CAAS;AAAA,EAErC,GAAGN,GAAQG,GAAWC,CAAS;AACjC;AACA,MAAMI,KAAe,MAAM;AACzB,QAAMC,IAAYT,IAASU,IAAYV,IAASW,IAAY,CAAA;AAC5D,EAAAA,EAAUF,EAAU,GAAG,CAAC,IAAI,SAASG,GAAWC,GAAW;AACzD,WAAOD,IAAYC;AAAA,EACrB,GAAGF,EAAUF,EAAU,GAAG,CAAC,IAAI,SAASK,GAAWC,GAAW;AAC5D,WAAOD,MAAcC;AAAA,EACvB,GAAGJ,EAAUF,EAAU,GAAG,CAAC,IAAI,SAASO,GAAWC,GAAW;AAC5D,WAAOD,IAAYC;AAAA,EACrB,GAAGN,EAAU,QAAWF,EAAU,GAAG;AACrC,QAAMS,IAAYP;AAClB,SAAIO,EAAUT,EAAU,GAAG,CAAC,EAAE,OAAO,QAAQS,EAAU,KAAQ,KAAK,OAAOR,EAAU,GAAG,CAAC,IAAU,OAAO,WAAa,IAChH,uCAAuCD,EAAU,GAAG,CAAC,EAAE,SAAS,CAACU,MAAc;AACpF,UAAMC,IAAYV,GAAWW,IAAYX,GAAWY,IAAYJ,EAAU,MAAS,OAAOE,EAAU,GAAG,CAAC,EAAE,IAAI,WAAW,QAAgB,MAAM,EAAE,CAAC,EAAE,KAAK,OAAO,OAAO,IAAI,GAAG,OAAO,KAAK,KAAK,MAAM,IAAI;AACzM,YADwNF,EAAUE,EAAU,GAAG,CAAC,EAAED,GAAW,GAAG,IAAIG,IAAYJ,EAAUG,EAAU,GAAG,CAAC,EAAEH,EAAUE,EAAU,GAAG,CAAC,EAAEE,GAAW,KAAK,OAAO,IAAI,MAAM,IAAI,GAAG,KAAK,OAAO,OAAO,IAAI,GAClXD,EAAU,GAAG,CAAC,EAAE,OAAc,OAAO,CAAC;AAAA,EACzD,CAAC;AACH,GACME,KAAYC;AAAA,CACjB,SAASC,GAAWC,GAAW;AAC9B,QAAMC,IAAYH,IAASI,IAAYJ,IAASK,IAAYJ,EAAS;AACrE;AACE,QAAI;AAEF,UADkB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAA8B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAA8B,SAASC,EAAU,GAAG,CAAC,IAAK,KAA6B,SAASA,EAAU,GAAG,CAAC,IAAK,KAA4B,SAASD,EAAU,GAAG,CAAC,IAAK,KAA8B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAgC,SAASC,EAAU,GAAG,CAAC,IAAK,IAA6B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAA4B,SAASD,EAAU,GAAG,CAAC,IAAK,KAA2B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,MAAwC,SAASC,EAAU,GAAG,CAAC,IAAK,OACxmBF,EAAW;AACxB,MAAAG,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGC,IAAS,IAAI,WAAW,KAAK,UAAU,WAAW,EAAE;AAkDvD,MAAMC,GAAwB;AAAA,EAC5B,YAAYC,GAAWC,GAAW;AAChC,UAAMC,IAAYV,IAASW,IAAYX,IAASY,IAAY,CAAA;AAC5D,IAAAA,EAAU,QAAW;AACrB,UAAMC,IAAYD,GAAWE,IAAYD,EAAU,MAAS,MAAS,GAAG;AACxE,QAAIE,IAAY,OAAO,QAAQ,IAAI;AACnC,eAAa;AACX,cAAQD,EAAUC,GAAW,GAAC;AAAA,QAC5B,KAAK;AACH,eAAK,QAAWP;AAChB;AAAA,QACF,KAAK;AACH,eAAK,WAAc;AACnB;AAAA,QACF,KAAK;AACH,eAAKE,EAAU,GAAG,CAAC,IAAI;AACvB;AAAA,QACF,KAAK;AACH,eAAKA,EAAU,GAAG,CAAC,IAAI;AACvB;AAAA,QACF,KAAK;AACH,eAAKC,EAAU,GAAG,CAAC,IAAIF;AACvB;AAAA,QACF,KAAK;AACH,eAAKE,EAAU,GAAG,CAAC,IAAI;AACvB;AAAA,MACV;AACM;AAAA,IACF;AAAA,EACF;AAAA,EACA,MAAO,QAAW;AAChB,UAAMK,IAAYhB,IAASiB,IAAYjB;AACvC,IAAI,KAAK,YAAe,KAAK,WAAc,CAAC,KAAKgB,EAAU,GAAG,CAAC,MAC/D,KAAKC,EAAU,GAAG,CAAC,IAAI,IAAM,KAAKA,EAAU,GAAG,CAAC,EAAE,YAAe,CAACC,MAAc;AAC9E,UAAIptF,GAAIwB;AACR,YAAM6rF,IAAYF;AAClB,UAAI;AACF,cAAMG,IAAYniC,GAAqBkiC,EAAU,GAAG,CAAC,EAAED,EAAUC,EAAU,GAAG,CAAC,CAAC;AAChF,SAACrtF,IAAK,KAAKqtF,EAAU,GAAG,CAAC,MAAM,QAAgBrtF,EAAG,KAAK,MAAMstF,CAAS;AAAA,MACxE,SAASC,GAAW;AAClB,cAAMC,IAAY,IAAI,MAAM,8BAA8BD,CAAS;AACnE,SAAC/rF,IAAK,KAAK6rF,EAAU,GAAG,CAAC,MAAM,QAAgB7rF,EAAG,KAAK,MAAMgsF,CAAS;AAAA,MACxE;AAAA,IACF,GAAG,KAAKN,EAAU,GAAG,CAAC,EAAEC,EAAU,GAAG,CAAC,IAAI,CAACM,MAAc;AACvD,UAAIztF;AACJ,YAAM0tF,IAAYP,GAAWQ,IAAY,IAAI,MAAM,wBAAwB,KAAK,UAAaF,CAAS,CAAC;AACvG,OAACztF,IAAK,KAAK0tF,EAAU,GAAG,CAAC,MAAM,QAAgB1tF,EAAG,KAAK,MAAM2tF,CAAS;AAAA,IACxE,GAAG,KAAK,MAAST,EAAU,GAAG,CAAC,EAAC;AAAA,EAClC;AAAA,EACA,MAAO,KAAQU,GAAW;AACxB,UAAMC,IAAU3B,IAAS4B,IAAY,EAAE,OAAS,SAASC,GAAW;AAClE,aAAOA,EAAS;AAAA,IAClB,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,aAAOD,aAAqBC;AAAA,IAC9B,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,aAAOD,EAAUC,CAAS;AAAA,IAC5B,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,aAAOD,EAAUC,CAAS;AAAA,IAC5B,EAAC;AACD,QAAI,OAAKR,EAAQ,GAAG,CAAC,KAAK,CAAC,KAAK;AAChC,aAAO,IAAI,QAAQ,CAACS,GAAWC,MAAc;AAC3C,YAAIvuF;AACJ,cAAMwuF,IAAYX,GAASY,IAAYZ;AACvC,YAAI;AACF,UAAI,KAAK,SAAU,KAAKW,EAAU,GAAG,CAAC,EAAE,YAAeZ,CAAS,GAChEE,EAAU,MAASQ,CAAS;AAAA,QAC9B,SAASI,GAAW;AAClB,gBAAMC,IAAWb,EAAU,MAASY,GAAW,KAAK,IAAIA,IAAY,IAAI,MAAMZ,EAAU,MAAS,QAAQY,CAAS,CAAC;AACnH,WAAC1uF,IAAK,KAAK,YAAe,QAAgBA,EAAG,KAAK,MAAM2uF,CAAQ,GAAGb,EAAUW,EAAU,GAAG,CAAC,EAAEF,GAAWI,CAAQ;AAAA,QAClH;AAAA,MACF,CAAC;AAAA,EACH;AAAA,EACA,OAAO1C,GAAU,GAAG,CAAC,IAAI;AACvB,QAAIjsF;AACJ,UAAM4uF,IAAY3C;AAClB,IAAI,KAAK,WAAc,CAAC,KAAK,UAC7B,KAAK,UAAa,IAAM,KAAK,MAAS2C,EAAU,GAAG,CAAC,EAAC,IAAK5uF,IAAK,KAAK,YAAe,QAAgBA,EAAG,KAAK,IAAI;AAAA,EACjH;AAAA,EACA,IAAK,YAAe;AAElB,WAAO,KADWisF,GACI,GAAG,CAAC;AAAA,EAC5B;AACF;AACA,SAASO,KAAU;AACjB,QAAMqC,IAAY,CAAC,YAAY,YAAY,iBAAiB,WAAW,SAAS,SAAS,SAAS,SAAS,iBAAiB,aAAa,oBAAoB,SAAS,SAAS,iBAAiB,kBAAkB,SAAS,SAAS,aAAa,QAAQ,kBAAkB,eAAe,aAAa,WAAW,YAAY,aAAa,iBAAiB,SAAS,SAAS,SAAS,WAAW,SAAS,iBAAiB,SAAS,WAAW,iBAAiB,SAAS,YAAY,cAAc,SAAS,SAAS,SAAS,SAAS,SAAS,iBAAiB,SAAS,WAAW,SAAS,OAAO;AACtkB,SAAArC,KAAU,WAAW;AACnB,WAAOqC;AAAA,EACT,GACOrC,GAAO;AAChB;AACA,SAASN,GAAQ4C,GAAWC,GAAW;AACrC,QAAMC,IAAYxC,GAAO;AACzB,SAAON,KAAU,SAAS+C,GAAWC,GAAW;AAC9C,WAAAD,IAAYA,KAAa,KAAK,OAAO,QAAQ,KAAK,QAClCD,EAAUC,CAAS;AAAA,EAErC,GAAG/C,GAAQ4C,GAAWC,CAAS;AACjC;AAkCA,MAAMI,KAAsB,MAAM;AAChC,QAAMC,IAAY,EAAE,OAAS,SAASC,GAAW;AAC/C,WAAOA,EAAS;AAAA,EAClB,EAAC,GAAIC,IAAY,IAAI,eAAc,GAAIC,IAAYH,EAAU,MAASlE,EAAY;AAClF,SAAO,CAAC,IAAIuB,GAAwB6C,EAAU,OAAUC,CAAS,GAAG,IAAI9C,GAAwB6C,EAAU,OAAUC,CAAS,CAAC;AAChI;AAAA,CACC,SAASC,GAAWC,GAAW;AAC9B,QAAMC,IAAYC,IAASC,IAAYD,IAASE,IAAYL,EAAS;AACrE;AACE,QAAI;AAEF,UADkB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,IAAgC,SAASE,EAAU,GAAG,CAAC,IAAK,KAAuB,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,KAAiC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAkC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAgC,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,IAA0B,SAASF,EAAU,GAAG,CAAC,IAAK,KAA0B,SAASE,EAAU,GAAG,CAAC,IAAK,KAA6B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAAkC,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,MAAyB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,QACjmBH,EAAW;AACxB,MAAAI,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGC,IAAS,MAAyB;AACrC,SAASH,GAAQI,GAAWC,GAAW;AACrC,QAAMC,IAAYH,GAAO;AACzB,SAAOH,KAAU,SAASO,GAAWC,GAAW;AAC9C,WAAAD,IAAYA,KAAa,QAAQ,OAAO,KAAK,OAC7BD,EAAUC,CAAS;AAAA,EAErC,GAAGP,GAAQI,GAAWC,CAAS;AACjC;AASA,MAAMI,KAAgB,CAACC,GAAWC,IAAYpF,GAAY,OAAQ,EAAE,aAAe,EAAE,SAAW,EAAE,eAAiB,YAAYmF,GAAW,qBAAqBC,EAAS,EAAE;AAC1K,SAASR,KAAU;AACjB,QAAMS,IAAY,CAAC,SAAS,iBAAiB,eAAe,gBAAgB,YAAY,iBAAiB,YAAY,OAAO,iBAAiB,gBAAgB,iBAAiB,iBAAiB,eAAe,WAAW,OAAO;AAChO,SAAAT,KAAU,WAAW;AACnB,WAAOS;AAAA,EACT,GACOT,GAAO;AAChB;AAAA,CACC,SAASU,GAAWC,GAAW;AAC9B,QAAMC,IAAYC,IAASC,IAAYD,IAASE,IAAYL,EAAS;AACrE;AACE,QAAI;AAEF,UADkB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAAuB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAA8B,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,IAA6B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAA+B,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,IAAiC,SAASF,EAAU,GAAG,CAAC,IAAK,IAAiC,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAA8B,SAASA,EAAU,GAAG,CAAC,IAAK,KAA6B,SAASF,EAAU,GAAG,CAAC,IAAK,KAA2B,SAASA,EAAU,GAAG,CAAC,IAAK,QACviBD,EAAW;AACxB,MAAAI,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGC,IAAS,IAAI,UAAU,WAAW,KAAK,KAAK;AAC/C,SAASH,GAAQI,GAAWC,GAAW;AACrC,QAAMC,IAAYH,GAAO;AACzB,SAAOH,KAAU,SAASO,GAAWC,GAAW;AAC9C,WAAAD,IAAYA,KAAa,IAAI,OAAO,QAAQ,IAAI,OAAO,KACvCD,EAAUC,CAAS;AAAA,EAErC,GAAGP,GAAQI,GAAWC,CAAS;AACjC;AACA,MAAMI,KAAuB,OAAOC,GAAWC,GAAWC,MAAc;AACtE,MAAIvxF;AACJ,QAAMwxF,IAAYb,IAASc,IAAYd,IAASe,IAAY,CAAA;AAC5D,EAAAA,EAAUF,EAAU,GAAG,CAAC,IAAIA,EAAU,GAAG,GAAGE,EAAUD,EAAU,GAAG,CAAC,IAAI,kBAAkBC,EAAUD,EAAU,GAAG,CAAC,IAAID,EAAU,GAAG,GAAGE,EAAU,QAAW,uBAAuBA,EAAU,QAAW,yBAAyBA,EAAU,QAAW,eAAeA,EAAUD,EAAU,GAAG,CAAC,IAAIA,EAAU,GAAG,GAAGC,EAAUD,EAAU,GAAG,CAAC,IAAIA,EAAU,GAAG,GAAGC,EAAU,QAAWF,EAAU,GAAG,GAAGE,EAAUD,EAAU,GAAG,CAAC,IAAID,EAAU,GAAG;AAC1a,QAAMG,IAAYD,GAAW,EAAE,IAAIE,GAAW,QAAQC,GAAW,QAAQC,EAAS,IAAKP;AACvF,MAAIQ,IAAY,CAAA;AAChB,UAAQF,GAAS;AAAA,IACf,KAAKL,EAAU,GAAG;AAChB,MAAAO,IAAY,MAAMT,EAAU,UAAaQ,CAAS;AAClD;AAAA,IACF,KAAKH,EAAUH,EAAU,GAAG,CAAC;AAC3B,MAAAO,IAAY,MAAMT,EAAUE,EAAU,GAAG,CAAC,EAAEM,CAAS;AACrD;AAAA,IACF,KAAKH,EAAU;AACb,MAAAI,IAAY,MAAMT,EAAUG,EAAU,GAAG,CAAC,EAAEK,CAAS;AACrD;AAAA,IACF,KAAKL,EAAU,GAAG;AAChB,MAAAM,IAAY,MAAMT,EAAUE,EAAU,GAAG,CAAC,EAAEM,CAAS;AACrD;AAAA,IACF,KAAKH,EAAU;AACb,MAAAI,IAAY,MAAMT,EAAU,aAAgBQ,CAAS;AACrD;AAAA,IACF,KAAKH,EAAU;AACb,MAAAI,IAAY,MAAMT,EAAU,kBAAqBQ,CAAS;AAC1D;AAAA,IACF,KAAKH,EAAU;AACb,MAAAI,IAAY,MAAMT,EAAUG,EAAU,GAAG,CAAC,EAAEK,CAAS;AACrD;AAAA,IACF,KAAKH,EAAUF,EAAU,GAAG,CAAC;AAC3B,MAAAM,IAAY,MAAMT,EAAU,UAAaQ,CAAS;AAClD;AAAA,IACF,KAAKH,EAAUH,EAAU,GAAG,CAAC;AAC3B,MAAAO,IAAY,MAAMT,EAAU,YAAeQ,CAAS;AACpD;AAAA,IACF,KAAK;AACH,MAAAC,IAAY,MAAMT,EAAU,KAAO;AACnC;AAAA,IACF,KAAKK,EAAU;AACb,MAAAI,IAAY,MAAMT,EAAUE,EAAU,GAAG,CAAC,EAAEM,CAAS;AACrD;AAAA,IACF,KAAKH,EAAUF,EAAU,GAAG,CAAC;AAC3B,MAAAM,IAAY,MAAMT,EAAU,gBAAmBQ,KAAa,OAAO,SAASA,EAAUL,EAAU,GAAG,CAAC,CAAC;AACrG;AAAA,EACN;AACE,QAAMO,IAAY,CAAA;AAClB,EAAAA,EAAU,SAAYD,GAAWC,EAAUP,EAAU,GAAG,CAAC,IAAIE,EAAUF,EAAU,GAAG,CAAC,GAAGO,EAAU,KAAQJ,GAAW,QAAQ5xF,IAAKqxF,KAAa,OAAO,SAASA,EAAU,cAAiB,OAAO,SAASrxF,EAAG,KAAQgyF,CAAS;AAChO,GAAGC,KAAuB,OAAOC,GAAWC,GAAWC,MAAc;AACnE,MAAIpyF;AACJ,QAAMqyF,IAAY1B,IAAS2B,IAAY3B,IAAS4B,IAAY,CAAA;AAC5D,EAAAA,EAAUF,EAAU,GAAG,CAAC,IAAIA,EAAU,GAAG,GAAGE,EAAU,QAAW,0BAA0BA,EAAUF,EAAU,GAAG,CAAC,IAAIC,EAAU,GAAG,GAAGC,EAAU,QAAW;AAC5J,QAAMC,IAAYD,GAAW,EAAE,IAAIE,GAAW,QAAQC,GAAW,QAAQC,EAAS,IAAKP;AACvF,MAAIQ,IAAY,CAAA;AAChB,UAAQF,GAAS;AAAA,IACf,KAAKF,EAAUF,EAAU,GAAG,CAAC;AAC3B,YAAMO,IAAY,CAAA;AAClB,MAAAA,EAAU,SAAYH,GAAWG,EAAUR,EAAU,GAAG,CAAC,IAAIM,GAAWC,IAAY,MAAMT,EAAUG,EAAU,GAAG,CAAC,EAAEO,GAAWziC,EAAqB;AACpJ;AAAA,IACF,KAAKoiC,EAAUH,EAAU,GAAG,CAAC;AAC3B,YAAMS,IAAY,CAAA;AAClB,MAAAA,EAAU,SAAYJ,GAAWI,EAAU,SAAYH,GAAWC,IAAY,MAAMT,EAAUG,EAAU,GAAG,CAAC,EAAEQ,GAAW1jC,EAAyB;AAClJ;AAAA,IACF,KAAKojC,EAAU;AACb,YAAMO,IAAY,CAAA;AAClB,MAAAA,EAAUV,EAAU,GAAG,CAAC,IAAIK,GAAWE,IAAY,MAAMT,EAAUG,EAAU,GAAG,CAAC,EAAES,GAAW3nC,EAAiB;AAC/G;AAAA,EACN;AACE,QAAM4nC,IAAY,CAAA;AAClB,EAAAA,EAAU,SAAYJ,GAAWI,EAAU,UAAaR,EAAUF,EAAU,GAAG,CAAC,GAAGU,EAAU,KAAQP,GAAW,QAAQzyF,IAAKkyF,KAAa,OAAO,SAASA,EAAU,cAAiB,OAAO,SAASlyF,EAAGqyF,EAAU,GAAG,CAAC,EAAEW,CAAS;AACnO,GACMC,KAAyB,CAACC,GAAWC,MAAc;AACvD,QAAMC,IAAYzC,IAAS0C,IAAY1C,IAAS2C,IAAY,EAAE,OAASF,EAAU,GAAG,GAAG,OAAS,SAASG,GAAWC,GAAWC,GAAWC,GAAW;AACnJ,WAAOH,EAAUC,GAAWC,GAAWC,CAAS;AAAA,EAClD,GAAG,OAAS,MAAK,GAAIC,IAAYT,EAAUE,EAAU,GAAG,CAAC;AACzD,EAAAF,EAAUG,EAAU,GAAG,CAAC,IAAI,OAAOO,GAAWC,MAAc;AAC1D,QAAI7zF;AACJ,UAAM8zF,IAAYV,GAAWW,IAAYX,GAAW,EAAE,IAAIY,GAAW,QAAQC,EAAS,IAAKL;AAC3F,QAAI;AACF,MAAAK,MAAcX,EAAUQ,EAAU,GAAG,CAAC,IAAI,MAAMH,EAAUG,EAAU,GAAG,CAAC,EAAEZ,GAAWU,GAAWC,CAAS,IAAI,MAAMP,EAAUQ,EAAU,GAAG,CAAC,EAAE1C,IAAsB8B,GAAWC,GAAWS,CAAS;AAAA,IACpM,SAASM,GAAW;AAClB,YAAM,EAAE,MAAMC,GAAW,SAASC,GAAW,MAAMC,EAAS,IAAKH;AACjE,UAAI;AACF,cAAMI,IAAY,CAAA;AAClB,QAAAA,EAAUR,EAAU,GAAG,CAAC,IAAIK,GAAWG,EAAU,UAAaF,GAAWE,EAAUR,EAAU,GAAG,CAAC,IAAIO;AACrG,cAAME,IAAY,CAAA;AAClB,QAAAA,EAAUR,EAAU,GAAG,CAAC,IAAIO,GAAWC,EAAUT,EAAU,GAAG,CAAC,IAAIR,EAAU,OAAUiB,EAAU,KAAQP,GAAW,QAAQh0F,IAAKkzF,KAAa,OAAO,SAASA,EAAUa,EAAU,GAAG,CAAC,MAAM,OAAO,SAAS/zF,EAAG8zF,EAAU,GAAG,CAAC,EAAES,CAAS;AAAA,MAC1O,QAAQ;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACF;AACA,SAASzD,KAAU;AACjB,QAAM0D,IAAY,CAAC,SAAS,oBAAoB,iBAAiB,uBAAuB,SAAS,kBAAkB,WAAW,2BAA2B,SAAS,uBAAuB,SAAS,SAAS,SAAS,QAAQ,0BAA0B,SAAS,4BAA4B,SAAS,SAAS,SAAS,WAAW,SAAS,0BAA0B,SAAS,SAAS,SAAS,SAAS,cAAc,cAAc,cAAc,kBAAkB,6BAA6B,gBAAgB,YAAY,WAAW,iBAAiB,UAAU,SAAS,YAAY,iBAAiB,SAAS,SAAS,YAAY,SAAS,QAAQ,cAAc,0BAA0B,iBAAiB,SAAS,QAAQ,SAAS,SAAS,SAAS,UAAU,uBAAuB,cAAc,SAAS,UAAU,gBAAgB,SAAS,SAAS,SAAS,cAAc,aAAa,QAAQ,SAAS,yBAAyB,kBAAkB,QAAQ,SAAS,WAAW,cAAc,8BAA8B,SAAS,SAAS,iBAAiB,sBAAsB,SAAS,iBAAiB,mCAAmC,OAAO,2BAA2B,QAAQ,SAAS,SAAS;AAC3pC,SAAA1D,KAAU,WAAW;AACnB,WAAO0D;AAAA,EACT,GACO1D,GAAO;AAChB;AACA,MAAM2D,KAA8B,CAACC,GAAWC,MAAc;AAC5D,QAAMC,IAAYjE,IAASkE,IAAYlE,IAASmE,IAAY,CAAA;AAC5D,EAAAA,EAAU,QAAW,SAASC,GAAWC,GAAW;AAClD,WAAOD,MAAcC;AAAA,EACvB,GAAGF,EAAUF,EAAU,GAAG,CAAC,IAAI,6BAA6BE,EAAUD,EAAU,GAAG,CAAC,IAAI;AACxF,QAAMI,IAAYH;AAClB,EAAAJ,EAAU,kBAAqB,OAAOQ,MAAc;AAClD,UAAMC,IAAYP,GAAWQ,IAAYR,GAAW,EAAE,QAAQS,GAAW,QAAQC,EAAS,IAAKJ;AAC/F,QAAID,EAAUE,EAAU,GAAG,CAAC,EAAEE,GAAWJ,EAAUG,EAAU,GAAG,CAAC,CAAC,MAAMC,MAAcJ,EAAUE,EAAU,GAAG,CAAC,KAAMG,KAAa,QAAgBA,EAAU,SAAc,KAAI;AAC3K,YAAMX,EAAU,aAAgBO,CAAS;AAAA,IAC3C,QAAQ;AAAA,IACR;AAAA,EACF;AACF,GACMK,KAAyB,CAACC,GAAWC,MAAc,OAAOC,MAAc;AAC5E,MAAI11F;AACJ,QAAM21F,IAAYhF,IAASiF,IAAYjF,IAASkF,IAAY,CAAA;AAC5D,EAAAA,EAAUF,EAAU,GAAG,CAAC,IAAI;AAC5B,QAAMG,IAAYD;AAClB,MAAI;AACF,UAAM5D,GAAqBuD,GAAWC,GAAWC,CAAS;AAAA,EAC5D,SAASK,GAAW;AAClB,UAAM,EAAE,MAAMC,GAAW,SAASC,GAAW,MAAMC,EAAS,IAAKH;AACjE,QAAI;AACF,YAAMI,IAAY,CAAA;AAClB,MAAAA,EAAU,OAAUH,GAAWG,EAAUP,EAAU,GAAG,CAAC,IAAIK,GAAWE,EAAU,OAAUD;AAC1F,YAAME,IAAY,CAAA;AAClB,MAAAA,EAAUT,EAAU,GAAG,CAAC,IAAIQ,GAAWC,EAAU,UAAaN,EAAUH,EAAU,GAAG,CAAC,GAAGS,EAAU,KAAQV,EAAU,IAAO,QAAQ11F,IAAKw1F,KAAa,OAAO,SAASA,EAAUI,EAAU,GAAG,CAAC,MAAM,OAAO,SAAS51F,EAAG,KAAQo2F,CAAS;AAAA,IAC1O,QAAQ;AAAA,IACR;AAAA,EACF;AACF,GACMC,KAA8B,CAACC,MAAc,OAAOC,MAAc;AACtE,MAAIv2F;AACJ,QAAMw2F,IAAY7F,IAAS8F,IAAY9F,IAAS+F,IAAY,CAAA;AAC5D,EAAAA,EAAU,QAAW,6BAA6BA,EAAUF,EAAU,GAAG,CAAC,IAAI,SAASG,GAAWC,GAAW;AAC3G,WAAOD,MAAcC;AAAA,EACvB,GAAGF,EAAUF,EAAU,GAAG,CAAC,IAAIC,EAAU,GAAG;AAC5C,QAAMI,IAAYH,GAAW,EAAE,QAAQI,GAAW,QAAQC,EAAS,IAAKR;AACxE,MAAIO,MAAcD,EAAUJ,EAAU,GAAG,CAAC,MAAMI,EAAUL,EAAU,GAAG,CAAC,EAAEM,GAAWD,EAAUL,EAAU,GAAG,CAAC,CAAC,KAAMO,KAAa,QAAgBA,EAAU,SAAc,KAAI;AAC3K,UAAMC,IAAY,EAAE,GAAGT,EAAS;AAChC,IAAAS,EAAU,UAAaR,EAAU,GAAG,GAAG,QAAQx2F,IAAKs2F,KAAa,OAAO,SAASA,EAAU,cAAiB,OAAO,SAASt2F,EAAG,KAAQg3F,CAAS;AAAA,EAClJ,QAAQ;AAAA,EACR;AACF,GACMC,KAA0B,CAACC,GAAWC,MAAc,OAAOC,MAAc;AAC7E,MAAIp3F,GAAIwB;AACR,QAAM61F,IAAY1G,IAAS2G,IAAY3G,IAAS4G,IAAY,CAAA;AAC5D,EAAAA,EAAU,QAAWF,EAAU,GAAG;AAClC,QAAMG,IAAYD;AAClB,MAAI;AACF,YAAQv3F,IAAKm3F,KAAa,OAAO,SAASA,EAAU,cAAiB,OAAO,SAASn3F,EAAG,KAAQo3F,CAAS;AAAA,EAC3G,SAASK,GAAW;AAClB,UAAM,EAAE,MAAMC,GAAW,SAASC,GAAW,MAAMC,EAAS,IAAKH;AACjE,QAAI;AACF,YAAMI,IAAY,CAAA;AAClB,MAAAA,EAAUP,EAAU,GAAG,CAAC,IAAII,GAAWG,EAAU,UAAaF,GAAWE,EAAUR,EAAU,GAAG,CAAC,IAAIO;AACrG,YAAME,IAAY,CAAA;AAClB,MAAAA,EAAUT,EAAU,GAAG,CAAC,IAAIQ,GAAWC,EAAU,UAAaN,EAAU,OAAUM,EAAU,KAAQV,EAAU,IAAO,QAAQ51F,IAAK01F,KAAa,OAAO,SAASA,EAAUI,EAAU,GAAG,CAAC,MAAM,OAAO,SAAS91F,EAAG,KAAQs2F,CAAS;AAAA,IACnO,QAAQ;AAAA,IACR;AAAA,EACF;AACF,GACMC,KAAuB,MAAM;AACjC,QAAMC,IAAYrH,IAASsH,IAAY,EAAE,OAAS,SAASC,GAAWC,GAAW;AAC/E,WAAOD,EAAUC,CAAS;AAAA,EAC5B,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,WAAOD,MAAcC;AAAA,EACvB,GAAG,OAAS,YAAY,OAAS,SAASC,GAAWC,GAAW;AAC9D,WAAOD,MAAcC;AAAA,EACvB,EAAC,GAAIC,IAAY,CAAA,GAAIC,IAAY,CAACC,MAAc;AAC9C,UAAMC,IAAY,CAAC,GAAGH,CAAS;AAC/B,QAAII;AACJ,eAAWC,KAAaF;AACtB,UAAI;AACF,QAAAC,IAAYX,EAAU,MAASY,GAAWH,CAAS;AAAA,MACrD,QAAQ;AAAA,MACR;AAEF,QAAI,EAAEE,aAAqB,SAAU,QAAOA;AAAA,EAC9C,GAAGE,IAAY,CAACC,MAAc;AAC5B,UAAMC,IAAYrI,IAASsI,IAAYtI;AACvC,IAAAsH,EAAUe,EAAU,GAAG,CAAC,EAAE,OAAOD,GAAWd,EAAUgB,EAAU,GAAG,CAAC,CAAC,KAAK,CAACT,EAAU,SAAYO,CAAS,KAAKP,EAAUS,EAAU,GAAG,CAAC,EAAEF,CAAS;AAAA,EACpJ,GAAGG,IAAY,CAACC,MAAc;AAC5B,UAAMC,IAAYZ,EAAU,QAAWW,CAAS;AAChD,IAAAlB,EAAU,MAASmB,GAAW,EAAE,KAAKZ,EAAU,OAAUY,GAAW,OAAO,IAAI,MAAM,KAAK,IAAI;AAAA,EAChG,GAAGC,IAAY,MAAM;AACnB,UAAMC,IAAY3I;AAClB,IAAA6H,EAAUc,EAAU,GAAG,CAAC,IAAI,OAAO,KAAK,IAAI,QAAQ,OAAO;AAAA,EAC7D,GAAGC,IAAY,CAAA;AACf,SAAOA,EAAUvB,EAAU,GAAG,CAAC,IAAIS,GAAWc,EAAU,cAAiBT,GAAWS,EAAU,iBAAoBL,GAAWK,EAAUvB,EAAU,GAAG,CAAC,IAAIqB,GAAWE;AACtK,GAAGC,KAAoB,CAACC,MAAc;AACpC,QAAMC,IAAY/I,IAASgJ,IAAYhJ,IAASiJ,IAAY,EAAE,OAAS,SAASC,GAAW;AACzF,WAAOA,EAAS;AAAA,EAClB,GAAG,OAAS,SAASC,GAAW;AAC9B,WAAOA,EAAS;AAAA,EAClB,EAAC;AACD;AACE,UAAM,EAAE,gBAAgBC,GAAW,aAAaC,GAAW,gBAAgBC,GAAW,eAAeC,EAAS,IAAKnC,GAAoB;AACvI,IAAA0B,EAAU,cAAiBM,GAAWN,EAAU,sBAAyBO,GAAWP,EAAUC,EAAU,GAAG,CAAC,IAAIO,GAAWR,EAAU,wBAA2BS;AAAA,EAClK;AACA;AACE,UAAM,EAAE,gBAAgBC,GAAW,aAAaC,GAAW,gBAAgBC,GAAW,eAAeC,EAAS,IAAKV,EAAUF,EAAU,GAAG,CAAC,EAAE3B,EAAoB;AACjK,IAAA0B,EAAUC,EAAU,GAAG,CAAC,IAAIS,GAAWV,EAAUE,EAAU,GAAG,CAAC,IAAIS,GAAWX,EAAU,wBAA2BY,GAAWZ,EAAU,uBAA0Ba;AAAA,EACpK;AACA;AACE,UAAM,EAAE,gBAAgBC,GAAW,aAAaC,GAAW,gBAAgBC,GAAW,eAAeC,EAAS,IAAKd,EAAUD,EAAU,GAAG,CAAC,EAAE5B,EAAoB;AACjK,IAAA0B,EAAU,8BAAiCc,GAAWd,EAAUE,EAAU,GAAG,CAAC,IAAIa,GAAWf,EAAUE,EAAU,GAAG,CAAC,IAAIc,GAAWhB,EAAUC,EAAU,GAAG,CAAC,IAAIgB;AAAA,EAClK;AACF,GACMC,KAAoB,CAACC,GAAWC,GAAW,EAAE,YAAYC,GAAW,WAAWC,EAAS,IAAK,OAAO;AACxG,QAAMC,IAAYrK,IAASsK,IAAYtK,IAASuK,IAAY,EAAE,OAAS,SAASC,GAAWC,GAAW;AACpG,WAAOD,MAAcC;AAAA,EACvB,GAAG,OAASJ,EAAU,GAAG,GAAG,OAAS,SAASK,GAAWC,GAAW;AAClE,WAAOD,MAAcC;AAAA,EACvB,GAAG,OAASN,EAAU,GAAG,GAAG,OAAS,SAASO,GAAW;AACvD,WAAOA,EAAS;AAAA,EAClB,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,WAAOD,EAAUC,CAAS;AAAA,EAC5B,GAAG,OAAS,SAASC,GAAWC,GAAW;AACzC,WAAOD,MAAcC;AAAA,EACvB,EAAC;AACD,EAAAf,EAAU,iBAAoBI,EAAU,GAAG,CAAC,EAAC,GAAIJ,EAAU,sBAAyB,MAAQ,GAC5F,OAAOE,MAAcI,EAAU,SAAYA,EAAUF,EAAU,GAAG,CAAC,EAAEF,CAAS;AAC9E,QAAMc,IAAYhB,EAAU;AAC5B,EAAAM,EAAU,MAAS1B,IAAmBoB,CAAS,GAAGA,EAAUI,EAAU,GAAG,CAAC,EAAE,CAACa,MAAc;AACzF,IAAAD,EAAU,KAAQhB,GAAWiB,CAAS;AAAA,EACxC,CAAC,GAAGjB,EAAUI,EAAU,GAAG,CAAC,EAAE,CAACc,MAAc;AAC3C,UAAMC,IAAYf,GAAW,EAAE,QAAQgB,EAAS,IAAKF;AACrD,QAAIZ,EAAUa,EAAU,GAAG,CAAC,EAAEC,GAAWd,EAAUa,EAAU,GAAG,CAAC,CAAC,EAAG,QAAO,CAAA;AAAA,EAC9E,CAAC,GAAGnB,EAAU,wBAA2B,CAACqB,MAAc;AACtD,UAAMC,IAAYlB,GAAWmB,IAAYlB,GAAW,EAAE,QAAQmB,GAAW,QAAQC,EAAS,IAAKJ;AAC/F,QAAIf,EAAUgB,EAAU,GAAG,CAAC,EAAEE,GAAWF,EAAU,GAAG,CAAC,GAAG;AACxD,YAAMI,IAAY1B,EAAUuB,EAAU,GAAG,CAAC,EAAE,IAAOE,EAAU,SAAY;AACzE,MAAAC,KAAa,QAAgBA,EAAUJ,EAAU,GAAG,CAAC,EAAEG,KAAa,OAAO,SAASA,EAAU,MAAS;AAAA,IACzG,MAAO,CAAAD,MAAcF,EAAU,GAAG,KAAKtB,EAAU,YAAeqB,CAAS;AAAA,EAC3E,CAAC,GAAGf,EAAU,MAAS,OAAOH,GAAWG,EAAU,KAAQ,KAAKH,EAAS;AAC3E;AAAA,CACC,SAASwB,GAAWC,GAAW;AAC9B,QAAMC,IAAYC,IAASC,IAAYD,IAASE,IAAYL,EAAS;AACrE;AACE,QAAI;AAEF,UADkB,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAA6B,SAASE,EAAU,GAAG,CAAC,IAAK,KAAgC,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,IAAgC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAiC,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAAoC,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,IAA4B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAA6B,SAASE,EAAU,GAAG,CAAC,IAAK,KAAgC,SAASA,EAAU,GAAG,CAAC,IAAK,KAAgC,SAASA,EAAU,GAAG,CAAC,IAAK,MAAgC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,MAAuC,CAAC,SAASF,EAAU,GAAG,CAAC,IAAK,QACzrBD,EAAW;AACxB,MAAAI,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGC,IAAS,QAAQ,QAAQ,MAAM,KAAK;AACvC,SAASH,GAAQI,GAAWC,GAAW;AACrC,QAAMC,IAAYH,GAAO;AACzB,SAAOH,KAAU,SAASO,GAAWC,GAAW;AAC9C,WAAAD,IAAYA,KAAa,QAAQ,KAAK,KAAK,MAAM,OAAO,KACxCD,EAAUC,CAAS;AAAA,EAErC,GAAGP,GAAQI,GAAWC,CAAS;AACjC;AACA,MAAMI,KAAqB,CAACC,GAAWC,MAAc;AACnD,QAAMC,IAAWZ,IAASa,IAAYb,IAASc,IAAY,EAAE,OAAS,SAASC,GAAWC,GAAWC,GAAW;AAC9G,WAAOF,EAAUC,GAAWC,CAAS;AAAA,EACvC,EAAC;AACD,EAAAH,EAAU,MAASvK,IAAwBmK,GAAWC,CAAS,GAAGG,EAAUF,EAAS,GAAG,CAAC,EAAE7I,IAA6B2I,GAAWC,CAAS;AAC5I,QAAMO,IAAYrI,GAAuB8H,GAAWD,CAAS,GAAGS,IAAWL,EAAUD,EAAU,GAAG,CAAC,EAAEtG,IAAyBoG,GAAWD,CAAS,GAAGU,IAAYzH,GAA4B+G,CAAS;AACtM,EAAAC,EAAU,mBAAsBO,CAAS,GAAGP,EAAU,oBAAuBQ,CAAQ,GAAGR,EAAUC,EAAS,GAAG,CAAC,EAAEQ,CAAS,GAAGV,EAAUG,EAAU,GAAG,CAAC,IAAI,MAAM;AAC7J,UAAMQ,IAAYR,GAAWS,IAAYT;AACzC,IAAAF,EAAUU,EAAU,GAAG,CAAC,EAAEH,CAAS,GAAGP,EAAU,uBAA0BQ,CAAQ,GAAGR,EAAUW,EAAU,GAAG,CAAC,EAAEF,CAAS;AAAA,EAC1H;AACF,GAAGG,KAAuB,CAACC,GAAWC,MAAc;AAClD,QAAMC,IAAY1B,IAAS2B,IAAY3B,IAAS4B,IAAY,EAAE,OAAS,SAASC,GAAWC,GAAW;AACpG,WAAOD,aAAqBC;AAAA,EAC9B,GAAG,OAASJ,EAAU,GAAG,GAAG,OAAS,SAASK,GAAWC,GAAWC,GAAWC,GAAW;AACxF,WAAOH,EAAUC,GAAWC,GAAWC,CAAS;AAAA,EAClD,EAAC,GAAIC,IAAY,MAAM;AACrB,QAAI7+F;AACJ,UAAM8+F,IAAYV;AAClB,IAAAE,EAAU,MAASH,GAAWnV,EAAkB,OAAOhpF,IAAKm+F,EAAU,iBAAoB,QAAgBn+F,EAAG8+F,EAAU,GAAG,CAAC,EAAER,EAAU,OAAU,MAAM;AACrJ,UAAI/d;AAEJ,OAACA,IAAM4d,EADWW,EACS,GAAG,CAAC,MAAM,QAAgBve,EAAI,MAAQ;AAAA,IACnE,CAAC;AAAA,EACH,GAAGwe,IAAY,CAAA;AACf,EAAAA,EAAU,YAAeF,GAAWP,EAAUD,EAAU,GAAG,CAAC,EAAE1D,IAAmBuD,GAAWC,GAAWY,CAAS;AAClH,GAqBMC,KAAoB,OAAOC,MAAc;AAC7C,QAAMC,IAAYxC,IAASyC,IAAYzC,IAAS0C,IAAY,EAAE,OAAS,SAASC,GAAW;AACzF,WAAOA,EAAS;AAAA,EAClB,GAAG,OAAS,SAASC,GAAWC,GAAWC,GAAW;AACpD,WAAOF,EAAUC,GAAWC,CAAS;AAAA,EACvC,GAAG,OAASN,EAAU,GAAG,GAAG,OAAS,SAAS,OAAS,SAASO,GAAWC,GAAWC,GAAW;AAC/F,WAAOF,EAAUC,GAAWC,CAAS;AAAA,EACvC,EAAC,GAAI,EAAE,QAAQC,GAAW,KAAKC,GAAW,OAAOC,GAAW,WAAWC,EAAS,IAAKd,GAAWe,IAAYD,KAAaX,EAAUD,EAAU,GAAG,CAAC,EAAEjU,EAAY,GAAG+U,IAAY,IAAI5W,GAA8B,IAAI,IAAIwW,CAAS,GAAGT,EAAUF,EAAU,GAAG,CAAC,EAAE9O,IAAe0P,GAAWE,CAAS,CAAC,GAAGE,IAAY,CAAA;AACjT,EAAAA,EAAU,cAAiB;AAC3B,QAAMC,IAAY,CAAA;AAClB,EAAAA,EAAUhB,EAAU,GAAG,CAAC,IAAI,CAAA,GAAIgB,EAAU,YAAe,CAAA,GAAIA,EAAUjB,EAAU,GAAG,CAAC,IAAI,CAAA,GAAIiB,EAAUjB,EAAU,GAAG,CAAC,IAAI,CAAA,GAAIiB,EAAUjB,EAAU,GAAG,CAAC,IAAIgB,GAAWC,EAAUjB,EAAU,GAAG,CAAC,IAAI,CAAA;AAChM,QAAMkB,IAAYD,GAAWE,IAAY,CAAA;AACzC,EAAAA,EAAU,OAAUjB,EAAU,OAAUiB,EAAUnB,EAAU,GAAG,CAAC,IAAIE,EAAUF,EAAU,GAAG,CAAC;AAC5F,QAAMoB,IAAY,CAAA;AAClB,EAAAA,EAAU,eAAkBF;AAC5B,QAAMG,IAAY,IAAI5kB,GAAO0kB,GAAWC,CAAS;AACjD,QAAMC,EAAUpB,EAAU,GAAG,CAAC,EAAEc,CAAS,GAAGb,EAAUF,EAAU,GAAG,CAAC,EAAEjB,IAAsB2B,GAAWK,CAAS,GAAGb,EAAUF,EAAU,GAAG,CAAC,EAAE/B,IAAoBoD,GAAWX,CAAS;AACrL,QAAMY,IAAY,CAAA;AAClB,SAAOA,EAAUrB,EAAU,GAAG,CAAC,IAAIc,GAAWO,EAAUrB,EAAU,GAAG,CAAC,IAAIa,GAAWQ;AACvF;AACA,SAAS3D,KAAU;AACjB,QAAM4D,IAAY,CAAC,SAAS,8BAA8B,yBAAyB,WAAW,SAAS,SAAS,gBAAgB,gBAAgB,iBAAiB,2BAA2B,WAAW,SAAS,SAAS,SAAS,2BAA2B,YAAY,YAAY,WAAW,eAAe,eAAe,aAAa,gBAAgB,WAAW,WAAW,SAAS,SAAS,SAAS,iBAAiB,wBAAwB,WAAW,eAAe,aAAa,SAAS,SAAS,SAAS,oBAAoB,iBAAiB,SAAS,aAAa,aAAa,YAAY,SAAS;AACplB,SAAA5D,KAAU,WAAW;AACnB,WAAO4D;AAAA,EACT,GACO5D,GAAO;AAChB;AAAA,CACC,SAAS6D,GAAWC,GAAW;AAE9B,WADIC,IAAYC,IAASC,IAAYD,IAASE,IAAYL,EAAS;AAEjE,QAAI;AACF,UAAIM,IAAY,CAAC,SAASJ,EAAU,GAAG,CAAC,IAAK,IAAiC,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAA0B,SAASA,EAAU,GAAG,CAAC,IAAK,KAAmC,SAASA,EAAU,GAAG,CAAC,IAAK,IAA+B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAA0B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,IAA+B,CAAC,SAASA,EAAU,GAAG,CAAC,IAAK,KAA4B,CAAC,SAASE,EAAU,GAAG,CAAC,IAAK,KAAkC,SAASF,EAAU,GAAG,CAAC,IAAK;AACtgB,UAAII,MAAcL,EAAW;AACxB,MAAAI,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IAC7C,QAAoB;AAClB,MAAAA,EAAU,KAAQA,EAAU,MAAQ,CAAE;AAAA,IACxC;AAEJ,GAAGE,IAAS,MAAM,MAAM,WAAW,OAAO;AAC1C,SAASJ,GAAQK,GAAWC,GAAW;AACrC,MAAIC,IAAWH,GAAO;AACtB,SAAOJ,KAAU,SAASQ,GAAWC,GAAW;AAC9C,IAAAD,IAAYA,KAAa,QAAe,KAAK;AAC7C,QAAIE,IAAYH,EAASC,CAAS;AAClC,WAAOE;AAAA,EACT,GAAGV,GAAQK,GAAWC,CAAS;AACjC;AACA,SAASF,KAAU;AACjB,MAAIO,IAAY,CAAC,iBAAiB,eAAe,aAAa,iBAAiB,aAAa,kBAAkB,iBAAiB,gBAAgB,eAAe;AAC9J,SAAAP,KAAU,WAAW;AACnB,WAAOO;AAAA,EACT,GACOP,GAAO;AAChB;ACpnBO,MAAMQ,WAAejxC,GAAS;AAAA;AAAA;AAAA;AAAA,EAIjC,YAAYkxC,GAAazrF,GAAS;AAC9B,QAAIjW;AACJ,UAAMiW,CAAO,GACb,KAAK,cAAcyrF,GACnB,KAAK,iBAAiB1hG,IAAKiW,KAAY,OAA6B,SAASA,EAAQ,kBAAkB,QAAQjW,MAAO,SAASA,IAAK,CAAA,GACpI,KAAK,gBAAgBiW,KAAY,OAA6B,SAASA,EAAQ,cAC/E,KAAK,kBAAkB01C,IAAyB,CAAC/d,MAAY,KAAK,cAAcA,CAAO,CAAC,GACxF,KAAK,uBAAuBke,IAA+B,MAAM;AAAE,UAAI9rD;AAAI,cAAQA,IAAK,KAAK,mBAAmB,QAAQA,MAAO,SAAS,SAASA,EAAG,KAAK,IAAI;AAAA,IAAG,CAAC;AAAA,EACrK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,qBAAqB67E,GAAc;AAC/B,QAAI,KAAK;AACL,YAAM,IAAI,MAAM,4DAA4D;AAEhF,SAAK,gBAAgBrpB,GAAkB,KAAK,eAAeqpB,CAAY;AAAA,EAC3E;AAAA,EACA,0BAA0B9lC,GAAQ;AAC9B,QAAI/1C,GAAIwB,GAAI6C;AACZ,YAAQ0xC,GAAM;AAAA,MACV,KAAK;AACD,YAAI,EAAG,GAAA/1C,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,kDAAkD+1C,CAAM,GAAG;AAE/E;AAAA,MACJ,KAAK;AACD,YAAI,EAAG,GAAAv0C,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,qDAAqDu0C,CAAM,GAAG;AAElF;AAAA,MACJ,KAAK;AACD,YAAI,EAAG,GAAA1xC,IAAK,KAAK,yBAAyB,QAAQA,MAAO,WAAkBA,EAAG;AAC1E,gBAAM,IAAI,MAAM,uDAAuD0xC,CAAM,GAAG;AAEpF;AAAA,IAIhB;AAAA,EACI;AAAA,EACA,6BAA6BA,GAAQ;AACjC,YAAQA,GAAM;AAAA,MACV,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,iDAAiDA,CAAM,GAAG;AAE9E;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,mEAAmEA,CAAM,GAAG;AAEhG;AAAA,MACJ,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,wEAAwEA,CAAM,GAAG;AAErG;AAAA,MACJ,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,0EAA0EA,CAAM,GAAG;AAEvG;AAAA,IAOhB;AAAA,EACI;AAAA,EACA,+BAA+BA,GAAQ;AACnC,YAAQA,GAAM;AAAA,MACV,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,kDAAkDA,CAAM,GAAG;AAE/E;AAAA,MACJ,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,iDAAiDA,CAAM,GAAG;AAE9E;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,iDAAiDA,CAAM,GAAG;AAE9E;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,mDAAmDA,CAAM,GAAG;AAEhF;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,YAAI,CAAC,KAAK,cAAc;AACpB,gBAAM,IAAI,MAAM,+CAA+CA,CAAM,GAAG;AAE5E;AAAA,IAKhB;AAAA,EACI;AAAA,EACA,MAAM,cAAcnI,GAAS;AACzB,UAAM+zD,IAAmB/zD,EAAQ,OAAO;AACxC,gBAAK,sBAAsBA,EAAQ,OAAO,cAC1C,KAAK,iBAAiBA,EAAQ,OAAO,YAI9B;AAAA,MACH,iBAJoB2b,GAA4B,SAASo4C,CAAgB,IACvEA,IACAr4C;AAAA,MAGF,cAAc,KAAK,gBAAe;AAAA,MAClC,YAAY,KAAK;AAAA,MACjB,GAAI,KAAK,iBAAiB,EAAE,cAAc,KAAK,cAAa;AAAA,IACxE;AAAA,EACI;AAAA;AAAA;AAAA;AAAA,EAIA,wBAAwB;AACpB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAIA,mBAAmB;AACf,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,kBAAkB;AACd,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,MAAM,OAAO;AACT,WAAO,KAAK,QAAQ,EAAE,QAAQ,OAAM,GAAI8B,EAAiB;AAAA,EAC7D;AAAA,EACA,MAAM,cAAcx8B,GAAQ3Y,GAAS;AACjC,WAAO,KAAK,QAAQ,EAAE,QAAQ,0BAA0B,QAAA2Y,EAAM,GAAIwgC,IAA2Bn5C,CAAO;AAAA,EACxG;AAAA,EACA,MAAM,YAAY2Y,GAAQ3Y,GAAS;AAC/B,UAAM3U,IAAS,MAAM,KAAK,QAAQ,EAAE,QAAQ,sBAAsB,QAAAstB,EAAM,GAAIihC,IAAoB55C,CAAO;AAEvG,QAAI3U,EAAO,WAAW,YAAYA,EAAO;AACrC,UAAI;AACA,cAAMw3E,IAAM,IAAIC,GAAG,GACb7R,IAAW4R,EAAI,QAAQlqD,EAAO,eAAe;AAEnD,YAAI,CADYs4C,EAAS5lE,EAAO,OAAO;AAEnC,gBAAM,IAAIgvD,GAASvF,GAAU,eAAe,iEAAiE+tB,EAAI,WAAW5R,EAAS,MAAM,CAAC,EAAE;AAAA,MAEtJ,SACOhgE,GAAO;AACV,cAAIA,aAAiBopD,KACXppD,IAEJ,IAAIopD,GAASvF,GAAU,eAAe,0CAA0C7jD,CAAK,EAAE;AAAA,MACjG;AAEJ,WAAO5F;AAAA,EACX;AAAA,EACA,MAAM,UAAUstB,GAAQ3Y,GAAS;AAC7B,WAAO,KAAK,QAAQ,EAAE,QAAQ,cAAc,QAAA2Y,EAAM,GAAIwhC,IAAuBn6C,CAAO;AAAA,EACxF;AAAA,EACA,MAAM,mBAAmB2Y,GAAQ;AAC7B,WAAO,KAAK,aAAa,EAAE,QAAQ,yBAAyB,QAAAA,EAAM,CAAE;AAAA,EACxE;AAAA,EACA,MAAM,oBAAoBA,GAAQ;AAC9B,WAAO,KAAK,aAAa;AAAA,MACrB,QAAQ;AAAA,MACR,QAAAA;AAAA,IACZ,CAAS;AAAA,EACL;AAAA,EACA,MAAM,0BAA0B;AAC5B,WAAO,KAAK,aAAa;AAAA,MACrB,QAAQ;AAAA,IACpB,CAAS;AAAA,EACL;AAAA,EACA,MAAM,sBAAsB;AACxB,WAAO,KAAK,aAAa,EAAE,QAAQ,mCAAkC,CAAE;AAAA,EAC3E;AAAA,EACA,MAAM,wBAAwB;AAC1B,WAAO,KAAK,aAAa,EAAE,QAAQ,qCAAoC,CAAE;AAAA,EAC7E;AACJ;AC9NO,MAAMgzE,KAAiB,OAAO,mDAAmD,GAa3E1wE,KAAiB;AAAA,EAC1B,MAAM;AAAA,EACN,cAAc;AAAA,EACd,UAAU,CAAC,GAAG;AAAA,EACd,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,cAAc;AAAA,EACd,aAAa;AAAA,EACb,0BAA0B;AAAA,EAC1B,6BAA6B;AAAA,EAC7B,8BAA8B;AAAA,EAC9B,gBAAgB;AAAA,EAChB,QAAQ;AAAA,EACR,cAAc;AAAA,EACd,aAAa,CAAA;AAAA,EACb,eAAe;AAAA,EACf,qBAAqB;AAAA,EACrB,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,eAAe;AAAA,EACf,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,mBAAmB;AACvB,GACa2wE,KAAoB,CAAC5rF,MAAa,OAAOA,KAAY,WAC5D;AAAA,EACE,GAAGib;AAAA,EACH,MAAMjb;AACd,IACM;AAAA,EACE,GAAGib;AAAA,EACH,GAAGjb;AACX,GC5Ca6rF,KAAU,CAAC7rF,MAAY;AAChC,QAAMw6C,IAAWoxC,GAAkB5rF,CAAO,GACpC0sD,IAAclS,EAAS,SAAS,SAChC,CAAC,GAAGA,EAAS,UAAUA,EAAS,gBAAgBA,EAAS,IAAI,IAC7DA,EAAS;AACf,SAAO;AAAA,IACH,GAAGA;AAAA,IACH,OAAO,EAAE,4BAA4B,GAAK;AAAA,IAC1C,aAAakS;AAAA,IACb,cAAc;AAAA,IACd,MAAM,IAAI,IAAI,OAAO,QAAQlS,EAAS,WAAW,EAAE,IAAI,CAAC,CAACl9C,GAAMurC,CAAG,MAAM;AAAA,MACpEA,EAAI;AAAA,MACJ;AAAA,QACI,KAAKA,EAAI;AAAA,QACT,MAAM,CAAC,GAAG2R,EAAS,UAAUA,EAAS,gBAAgBl9C,CAAI;AAAA;AAAA,QAE1D,YAAY;AAAA,MAC5B;AAAA,IACA,CAAS,CAAC;AAAA,EACV;AACA;ACrBO,SAASwuF,GAAgB53E,GAAK3Y,GAAKkrC,GAAcouB,GAAM;AAC1D,EAAKA,KAAA,QAAAA,EAAM,iBAEPpuB,MACAvyB,EAAI,eAAe;AAAA,IACf,GAAGA,EAAI;AAAA,IACP,CAAC3Y,CAAG,GAAGkrC;AAAA,EACnB;AAEA;AACO,SAASslD,GAA0B73E,GAAK3Y,GAAKnQ,GAAOq7C,GAAcouB,GAAM;AAC3E,EAAA3gD,EAAI3Y,CAAG,IAAInQ,GACX0gG,GAAgB53E,GAAK3Y,GAAKkrC,GAAcouB,CAAI;AAChD;ACbO,MAAMm3B,KAAkB,CAACC,GAAOC,MAAU;AAC7C,MAAIn7F,IAAI;AACR,SAAOA,IAAIk7F,EAAM,UAAUl7F,IAAIm7F,EAAM,UAC7BD,EAAMl7F,CAAC,MAAMm7F,EAAMn7F,CAAC,GADiBA;AACzC;AAGJ,SAAO,EAAEk7F,EAAM,SAASl7F,GAAG,SAAQ,GAAI,GAAGm7F,EAAM,MAAMn7F,CAAC,CAAC,EAAE,KAAK,GAAG;AACtE;ACNO,SAASo7F,GAAYt3B,GAAM;AAC9B,MAAIA,EAAK,WAAW;AAChB,WAAO,CAAA;AAEX,QAAMu3B,IAAoB;AAAA,IACtB,GAAGv3B,EAAK;AAAA,IACRA,EAAK;AAAA,IACLA,EAAK;AAAA,EACb;AACI,SAAAA,EAAK,MAAM,6BAA6B,IACjC;AAAA,IACH,MAAMA,EAAK,iBAAiB,aACtBm3B,GAAgBI,GAAmBv3B,EAAK,WAAW,IACnDu3B,EAAkB,KAAK,GAAG;AAAA,EACxC;AACA;ACbO,SAASC,GAAcxjD,GAAKgsB,GAAM;;AACrC,QAAM3gD,IAAM;AAAA,IACR,MAAM;AAAA,EACd;AACI,UAAInqB,IAAA8+C,EAAI,SAAJ,QAAA9+C,EAAU,UACVqE,KAAA7C,IAAAs9C,EAAI,SAAJ,gBAAAt9C,EAAU,SAAV,gBAAA6C,EAAgB,cAAaw6C,EAAsB,WACnD10B,EAAI,QAAQo4E,GAASzjD,EAAI,KAAK,MAAM;AAAA,IAChC,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,OAAO;AAAA,EACtD,CAAS,IAEDhsB,EAAI,aACJkjD,GAA0B73E,GAAK,YAAY20B,EAAI,UAAU,OAAOA,EAAI,UAAU,SAASgsB,CAAI,GAE3FhsB,EAAI,aACJkjD,GAA0B73E,GAAK,YAAY20B,EAAI,UAAU,OAAOA,EAAI,UAAU,SAASgsB,CAAI,GAE3FhsB,EAAI,gBACJkjD,GAA0B73E,GAAK,YAAY20B,EAAI,YAAY,OAAOA,EAAI,YAAY,SAASgsB,CAAI,GAC/Fk3B,GAA0B73E,GAAK,YAAY20B,EAAI,YAAY,OAAOA,EAAI,YAAY,SAASgsB,CAAI,IAE5F3gD;AACX;ACxBO,SAASq4E,GAAe1jD,GAAKgsB,GAAM;AACtC,QAAM3gD,IAAM;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EAChB;AACI,MAAI,CAAC20B,EAAI;AACL,WAAO30B;AACX,aAAWo0B,KAASO,EAAI;AACpB,YAAQP,EAAM,MAAI;AAAA,MACd,KAAK;AACD,QAAIusB,EAAK,WAAW,gBACZvsB,EAAM,YACNyjD,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,IAG1Ek3B,GAA0B73E,GAAK,oBAAoBo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,KAIlFvsB,EAAM,cACPp0B,EAAI,mBAAmB,KAE3B63E,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAE9E;AAAA,MACJ,KAAK;AACD,QAAIA,EAAK,WAAW,gBACZvsB,EAAM,YACNyjD,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,IAG1Ek3B,GAA0B73E,GAAK,oBAAoBo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,KAIlFvsB,EAAM,cACPp0B,EAAI,mBAAmB,KAE3B63E,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAE9E;AAAA,MACJ,KAAK;AACD,QAAAk3B,GAA0B73E,GAAK,cAAco0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAC7E;AAAA,IAChB;AAEI,SAAO3gD;AACX;AChDO,SAASs4E,KAAkB;AAC9B,SAAO;AAAA,IACH,MAAM;AAAA,EACd;AACA;ACHO,SAASC,GAAgBC,GAAM73B,GAAM;AACxC,SAAOy3B,GAASI,EAAK,KAAK,MAAM73B,CAAI;AACxC;ACFO,MAAM83B,KAAgB,CAAC9jD,GAAKgsB,MACxBy3B,GAASzjD,EAAI,UAAU,MAAMgsB,CAAI;ACDrC,SAAS+3B,GAAa/jD,GAAKgsB,GAAMg4B,GAAsB;AAC1D,QAAMC,IAAWD,KAAwBh4B,EAAK;AAC9C,MAAI,MAAM,QAAQi4B,CAAQ;AACtB,WAAO;AAAA,MACH,OAAOA,EAAS,IAAI,CAACljG,GAAMmH,MAAM67F,GAAa/jD,GAAKgsB,GAAMjrE,CAAI,CAAC;AAAA,IAC1E;AAEI,UAAQkjG,GAAQ;AAAA,IACZ,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,QACH,MAAM;AAAA,QACN,QAAQ;AAAA,MACxB;AAAA,IACQ,KAAK;AACD,aAAO;AAAA,QACH,MAAM;AAAA,QACN,QAAQ;AAAA,MACxB;AAAA,IACQ,KAAK;AACD,aAAOC,GAAkBlkD,GAAKgsB,CAAI;AAAA,EAC9C;AACA;AACA,MAAMk4B,KAAoB,CAAClkD,GAAKgsB,MAAS;AACrC,QAAM3gD,IAAM;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EAChB;AACI,MAAI2gD,EAAK,WAAW;AAChB,WAAO3gD;AAEX,aAAWo0B,KAASO,EAAI;AACpB,YAAQP,EAAM,MAAI;AAAA,MACd,KAAK;AACD,QAAAyjD;AAAA,UAA0B73E;AAAA,UAAK;AAAA,UAAWo0B,EAAM;AAAA;AAAA,UAChDA,EAAM;AAAA,UAASusB;AAAA,QAAI;AACnB;AAAA,MACJ,KAAK;AACD,QAAAk3B;AAAA,UAA0B73E;AAAA,UAAK;AAAA,UAAWo0B,EAAM;AAAA;AAAA,UAChDA,EAAM;AAAA,UAASusB;AAAA,QAAI;AACnB;AAAA,IAChB;AAEI,SAAO3gD;AACX;AC5CO,SAAS84E,GAAgBN,GAAM73B,GAAM;AACxC,SAAO;AAAA,IACH,GAAGy3B,GAASI,EAAK,UAAU,MAAM73B,CAAI;AAAA,IACrC,SAAS63B,EAAK,aAAY;AAAA,EAClC;AACA;ACJO,SAASO,GAAgBP,GAAM73B,GAAM;AACxC,SAAOA,EAAK,mBAAmB,UACzBy3B,GAASI,EAAK,OAAO,MAAM73B,CAAI,IAC/Bs3B,GAAYt3B,CAAI;AAC1B;ACNO,SAASq4B,GAAarkD,GAAK;AAC9B,SAAO;AAAA,IACH,MAAM;AAAA,IACN,MAAM,MAAM,KAAKA,EAAI,MAAM;AAAA,EACnC;AACA;ACJA,MAAMskD,KAAyB,CAAC7jG,MACxB,UAAUA,KAAQA,EAAK,SAAS,WACzB,KACJ,WAAWA;AAEf,SAAS8jG,GAAqBvkD,GAAKgsB,GAAM;AAC5C,QAAM6E,IAAQ;AAAA,IACV4yB,GAASzjD,EAAI,KAAK,MAAM;AAAA,MACpB,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG;AAAA,IAC3D,CAAS;AAAA,IACDy3B,GAASzjD,EAAI,MAAM,MAAM;AAAA,MACrB,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG;AAAA,IAC3D,CAAS;AAAA,EACT,EAAM,OAAO,CAAC18D,MAAM,CAAC,CAACA,CAAC;AACnB,MAAIk1F,IAAwBx4B,EAAK,WAAW,sBACtC,EAAE,uBAAuB,GAAK,IAC9B;AACN,QAAMy4B,IAAc,CAAA;AAEpB,SAAA5zB,EAAM,QAAQ,CAACvpE,MAAW;AACtB,QAAIg9F,GAAuBh9F,CAAM;AAC7B,MAAAm9F,EAAY,KAAK,GAAGn9F,EAAO,KAAK,GAC5BA,EAAO,0BAA0B,WAGjCk9F,IAAwB;AAAA,SAG3B;AACD,UAAIE,IAAep9F;AACnB,UAAI,0BAA0BA,KAC1BA,EAAO,yBAAyB,IAAO;AACvC,cAAM,EAAE,sBAAAq9F,GAAsB,GAAGl9C,EAAI,IAAKngD;AAC1C,QAAAo9F,IAAej9C;AAAA,MACnB;AAGI,QAAA+8C,IAAwB;AAE5B,MAAAC,EAAY,KAAKC,CAAY;AAAA,IACjC;AAAA,EACJ,CAAC,GACMD,EAAY,SACb;AAAA,IACE,OAAOA;AAAA,IACP,GAAGD;AAAA,EACf,IACU;AACV;ACnDO,SAASI,GAAgB5kD,GAAKgsB,GAAM;AACvC,QAAM64B,IAAa,OAAO7kD,EAAI;AAC9B,SAAI6kD,MAAe,YACfA,MAAe,YACfA,MAAe,aACfA,MAAe,WACR;AAAA,IACH,MAAM,MAAM,QAAQ7kD,EAAI,KAAK,IAAI,UAAU;AAAA,EACvD,IAEQgsB,EAAK,WAAW,aACT;AAAA,IACH,MAAM64B,MAAe,WAAW,YAAYA;AAAA,IAC5C,MAAM,CAAC7kD,EAAI,KAAK;AAAA,EAC5B,IAEW;AAAA,IACH,MAAM6kD,MAAe,WAAW,YAAYA;AAAA,IAC5C,OAAO7kD,EAAI;AAAA,EACnB;AACA;ACnBA,IAAIyB;AAOG,MAAMqjD,KAAc;AAAA;AAAA;AAAA;AAAA,EAIvB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA;AAAA;AAAA;AAAA,EAIN,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYP,OAAO,OACCrjD,OAAe,WACfA,KAAa,OAAO,wDAAwD,GAAG,IAE5EA;AAAA;AAAA;AAAA;AAAA,EAKX,MAAM;AAAA;AAAA;AAAA;AAAA,EAIN,MAAM;AAAA,EACN,UAAU;AAAA;AAAA;AAAA;AAAA,EAIV,MAAM;AAAA,EACN,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,KAAK;AACT;AACO,SAASsjD,GAAe/kD,GAAKgsB,GAAM;AACtC,QAAM3gD,IAAM;AAAA,IACR,MAAM;AAAA,EACd;AACI,MAAI20B,EAAI;AACJ,eAAWP,KAASO,EAAI;AACpB,cAAQP,EAAM,MAAI;AAAA,QACd,KAAK;AACD,UAAAyjD,GAA0B73E,GAAK,aAAa,OAAOA,EAAI,aAAc,WAC/D,KAAK,IAAIA,EAAI,WAAWo0B,EAAM,KAAK,IACnCA,EAAM,OAAOA,EAAM,SAASusB,CAAI;AACtC;AAAA,QACJ,KAAK;AACD,UAAAk3B,GAA0B73E,GAAK,aAAa,OAAOA,EAAI,aAAc,WAC/D,KAAK,IAAIA,EAAI,WAAWo0B,EAAM,KAAK,IACnCA,EAAM,OAAOA,EAAM,SAASusB,CAAI;AACtC;AAAA,QACJ,KAAK;AACD,kBAAQA,EAAK,eAAa;AAAA,YACtB,KAAK;AACD,cAAAqO,GAAUhvD,GAAK,SAASo0B,EAAM,SAASusB,CAAI;AAC3C;AAAA,YACJ,KAAK;AACD,cAAAqO,GAAUhvD,GAAK,aAAao0B,EAAM,SAASusB,CAAI;AAC/C;AAAA,YACJ,KAAK;AACD,cAAAg5B,GAAW35E,GAAKy5E,GAAY,OAAOrlD,EAAM,SAASusB,CAAI;AACtD;AAAA,UAC5B;AACoB;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,OAAOo0B,EAAM,SAASusB,CAAI;AACzC;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,QAAQo0B,EAAM,SAASusB,CAAI;AAC1C;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAKo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAChD;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,MAAMrlD,EAAM,SAASusB,CAAI;AACrD;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,OAAOrlD,EAAM,SAASusB,CAAI;AACtD;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAK,OAAO,IAAI45E,GAAwBxlD,EAAM,OAAOusB,CAAI,CAAC,EAAE,GAAGvsB,EAAM,SAASusB,CAAI;AAC7F;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAK,OAAO,GAAG45E,GAAwBxlD,EAAM,OAAOusB,CAAI,CAAC,GAAG,GAAGvsB,EAAM,SAASusB,CAAI;AAC7F;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,aAAao0B,EAAM,SAASusB,CAAI;AAC/C;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,QAAQo0B,EAAM,SAASusB,CAAI;AAC1C;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,QAAQo0B,EAAM,SAASusB,CAAI;AAC1C;AAAA,QACJ,KAAK;AACD,UAAAqO,GAAUhvD,GAAK,YAAYo0B,EAAM,SAASusB,CAAI;AAC9C;AAAA,QACJ,KAAK;AACD,UAAAk3B,GAA0B73E,GAAK,aAAa,OAAOA,EAAI,aAAc,WAC/D,KAAK,IAAIA,EAAI,WAAWo0B,EAAM,KAAK,IACnCA,EAAM,OAAOA,EAAM,SAASusB,CAAI,GACtCk3B,GAA0B73E,GAAK,aAAa,OAAOA,EAAI,aAAc,WAC/D,KAAK,IAAIA,EAAI,WAAWo0B,EAAM,KAAK,IACnCA,EAAM,OAAOA,EAAM,SAASusB,CAAI;AACtC;AAAA,QACJ,KAAK,YAAY;AACb,UAAAg5B,GAAW35E,GAAK,OAAO45E,GAAwBxlD,EAAM,OAAOusB,CAAI,CAAC,GAAGvsB,EAAM,SAASusB,CAAI;AACvF;AAAA,QACJ;AAAA,QACA,KAAK,MAAM;AACP,UAAIvsB,EAAM,YAAY,QAClB46B,GAAUhvD,GAAK,QAAQo0B,EAAM,SAASusB,CAAI,GAE1CvsB,EAAM,YAAY,QAClB46B,GAAUhvD,GAAK,QAAQo0B,EAAM,SAASusB,CAAI;AAE9C;AAAA,QACJ;AAAA,QACA,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,WAAWrlD,EAAM,SAASusB,CAAI;AAC1D;AAAA,QACJ,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,KAAKrlD,EAAM,SAASusB,CAAI;AACpD;AAAA,QACJ,KAAK,QAAQ;AACT,UAAIvsB,EAAM,YAAY,QAClBulD,GAAW35E,GAAKy5E,GAAY,UAAUrlD,EAAM,SAASusB,CAAI,GAEzDvsB,EAAM,YAAY,QAClBulD,GAAW35E,GAAKy5E,GAAY,UAAUrlD,EAAM,SAASusB,CAAI;AAE7D;AAAA,QACJ;AAAA,QACA,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,MAAK,GAAIrlD,EAAM,SAASusB,CAAI;AACxD;AAAA,QACJ,KAAK,QAAQ;AACT,UAAAg5B,GAAW35E,GAAKy5E,GAAY,MAAMrlD,EAAM,SAASusB,CAAI;AACrD;AAAA,QACJ;AAAA,QACA,KAAK,UAAU;AACX,kBAAQA,EAAK,gBAAc;AAAA,YACvB,KAAK,iBAAiB;AAClB,cAAAqO,GAAUhvD,GAAK,UAAUo0B,EAAM,SAASusB,CAAI;AAC5C;AAAA,YACJ;AAAA,YACA,KAAK,0BAA0B;AAC3B,cAAAk3B,GAA0B73E,GAAK,mBAAmB,UAAUo0B,EAAM,SAASusB,CAAI;AAC/E;AAAA,YACJ;AAAA,YACA,KAAK,eAAe;AAChB,cAAAg5B,GAAW35E,GAAKy5E,GAAY,QAAQrlD,EAAM,SAASusB,CAAI;AACvD;AAAA,YACJ;AAAA,UACxB;AACoB;AAAA,QACJ;AAAA,QACA,KAAK;AACD,UAAAg5B,GAAW35E,GAAKy5E,GAAY,QAAQrlD,EAAM,SAASusB,CAAI;AAAA,MAS3E;AAGI,SAAO3gD;AACX;AACA,SAAS45E,GAAwBC,GAASl5B,GAAM;AAC5C,SAAOA,EAAK,oBAAoB,WAC1Bm5B,GAAsBD,CAAO,IAC7BA;AACV;AACA,MAAME,KAAgB,IAAI,IAAI,8DAA8D;AAC5F,SAASD,GAAsB1yF,GAAQ;AACnC,MAAIjQ,IAAS;AACb,WAAS0F,IAAI,GAAGA,IAAIuK,EAAO,QAAQvK;AAC/B,IAAKk9F,GAAc,IAAI3yF,EAAOvK,CAAC,CAAC,MAC5B1F,KAAU,OAEdA,KAAUiQ,EAAOvK,CAAC;AAEtB,SAAO1F;AACX;AAEA,SAAS63E,GAAU/yE,GAAQ/E,GAAOoF,GAASqkE,GAAM;;AAC7C,EAAI1kE,EAAO,WAAUpG,IAAAoG,EAAO,UAAP,QAAApG,EAAc,KAAK,CAACoO,MAAMA,EAAE,WACxChI,EAAO,UACRA,EAAO,QAAQ,CAAA,IAEfA,EAAO,WACPA,EAAO,MAAM,KAAK;AAAA,IACd,QAAQA,EAAO;AAAA,IACf,GAAIA,EAAO,gBACP0kE,EAAK,iBAAiB;AAAA,MACtB,cAAc,EAAE,QAAQ1kE,EAAO,aAAa,OAAM;AAAA,IACtE;AAAA,EACA,CAAa,GACD,OAAOA,EAAO,QACVA,EAAO,iBACP,OAAOA,EAAO,aAAa,QACvB,OAAO,KAAKA,EAAO,YAAY,EAAE,WAAW,KAC5C,OAAOA,EAAO,gBAI1BA,EAAO,MAAM,KAAK;AAAA,IACd,QAAQ/E;AAAA,IACR,GAAIoF,KACAqkE,EAAK,iBAAiB,EAAE,cAAc,EAAE,QAAQrkE,EAAO;EACvE,CAAS,KAGDu7F,GAA0B57F,GAAQ,UAAU/E,GAAOoF,GAASqkE,CAAI;AAExE;AAEA,SAASg5B,GAAW19F,GAAQ2hB,GAAOthB,GAASqkE,GAAM;;AAC9C,EAAI1kE,EAAO,YAAWpG,IAAAoG,EAAO,UAAP,QAAApG,EAAc,KAAK,CAACoO,MAAMA,EAAE,YACzChI,EAAO,UACRA,EAAO,QAAQ,CAAA,IAEfA,EAAO,YACPA,EAAO,MAAM,KAAK;AAAA,IACd,SAASA,EAAO;AAAA,IAChB,GAAIA,EAAO,gBACP0kE,EAAK,iBAAiB;AAAA,MACtB,cAAc,EAAE,SAAS1kE,EAAO,aAAa,QAAO;AAAA,IACxE;AAAA,EACA,CAAa,GACD,OAAOA,EAAO,SACVA,EAAO,iBACP,OAAOA,EAAO,aAAa,SACvB,OAAO,KAAKA,EAAO,YAAY,EAAE,WAAW,KAC5C,OAAOA,EAAO,gBAI1BA,EAAO,MAAM,KAAK;AAAA,IACd,SAAS+9F,GAAyBp8E,GAAO+iD,CAAI;AAAA,IAC7C,GAAIrkE,KACAqkE,EAAK,iBAAiB,EAAE,cAAc,EAAE,SAASrkE,EAAO;EACxE,CAAS,KAGDu7F,GAA0B57F,GAAQ,WAAW+9F,GAAyBp8E,GAAO+iD,CAAI,GAAGrkE,GAASqkE,CAAI;AAEzG;AAEA,SAASq5B,GAAyBp8E,GAAO+iD,GAAM;;AAC3C,MAAI,CAACA,EAAK,mBAAmB,CAAC/iD,EAAM;AAChC,WAAOA,EAAM;AAGjB,QAAMq8E,IAAQ;AAAA,IACV,GAAGr8E,EAAM,MAAM,SAAS,GAAG;AAAA,IAC3B,GAAGA,EAAM,MAAM,SAAS,GAAG;AAAA,IAC3B,GAAGA,EAAM,MAAM,SAAS,GAAG;AAAA;AAAA,EACnC,GAEUxW,IAAS6yF,EAAM,IAAIr8E,EAAM,OAAO,YAAW,IAAKA,EAAM;AAC5D,MAAI5V,IAAU,IACVkyF,IAAY,IACZC,IAAc,IACdC,IAAc;AAClB,WAASv9F,IAAI,GAAGA,IAAIuK,EAAO,QAAQvK,KAAK;AACpC,QAAIq9F,GAAW;AACX,MAAAlyF,KAAWZ,EAAOvK,CAAC,GACnBq9F,IAAY;AACZ;AAAA,IACJ;AACA,QAAID,EAAM;AACN,UAAIE;AACA,YAAI/yF,EAAOvK,CAAC,EAAE,MAAM,OAAO,GAAG;AAC1B,UAAIu9F,KACApyF,KAAWZ,EAAOvK,CAAC,GACnBmL,KAAW,GAAGZ,EAAOvK,IAAI,CAAC,CAAC,IAAIuK,EAAOvK,CAAC,CAAC,GAAG,YAAW,GACtDu9F,IAAc,MAEThzF,EAAOvK,IAAI,CAAC,MAAM,SAAOhH,IAAAuR,EAAOvK,IAAI,CAAC,MAAZ,QAAAhH,EAAe,MAAM,aACnDmS,KAAWZ,EAAOvK,CAAC,GACnBu9F,IAAc,MAGdpyF,KAAW,GAAGZ,EAAOvK,CAAC,CAAC,GAAGuK,EAAOvK,CAAC,EAAE,YAAW,CAAE;AAErD;AAAA,QACJ;AAAA,iBAEKuK,EAAOvK,CAAC,EAAE,MAAM,OAAO,GAAG;AAC/B,QAAAmL,KAAW,IAAIZ,EAAOvK,CAAC,CAAC,GAAGuK,EAAOvK,CAAC,EAAE,YAAW,CAAE;AAClD;AAAA,MACJ;AAAA;AAEJ,QAAIo9F,EAAM;AACN,UAAI7yF,EAAOvK,CAAC,MAAM,KAAK;AACnB,QAAAmL,KAAW;AAAA;AACX;AAAA,MACJ,WACSZ,EAAOvK,CAAC,MAAM,KAAK;AACxB,QAAAmL,KAAW;AAAA;AACX;AAAA,MACJ;AAAA;AAEJ,QAAIiyF,EAAM,KAAK7yF,EAAOvK,CAAC,MAAM,KAAK;AAC9B,MAAAmL,KAAWmyF,IAAc,GAAG/yF,EAAOvK,CAAC,CAAC;AAAA,IAAS,IAAIuK,EAAOvK,CAAC,CAAC;AAAA;AAC3D;AAAA,IACJ;AACA,IAAAmL,KAAWZ,EAAOvK,CAAC,GACfuK,EAAOvK,CAAC,MAAM,OACdq9F,IAAY,KAEPC,KAAe/yF,EAAOvK,CAAC,MAAM,MAClCs9F,IAAc,KAET,CAACA,KAAe/yF,EAAOvK,CAAC,MAAM,QACnCs9F,IAAc;AAAA,EAEtB;AACA,MAAI;AACA,QAAI,OAAOnyF,CAAO;AAAA,EACtB,QACM;AACF,mBAAQ,KAAK,sCAAsC24D,EAAK,YAAY,KAAK,GAAG,CAAC,uEAAuE,GAC7I/iD,EAAM;AAAA,EACjB;AACA,SAAO5V;AACX;AC3VO,SAASqyF,GAAe1lD,GAAKgsB,GAAM;;AAItC,MAHIA,EAAK,WAAW,YAChB,QAAQ,KAAK,8FAA8F,GAE3GA,EAAK,WAAW,gBAChB9qE,IAAA8+C,EAAI,YAAJ,gBAAA9+C,EAAa,KAAK,cAAa6+C,EAAsB;AACrD,WAAO;AAAA,MACH,MAAM;AAAA,MACN,UAAUC,EAAI,QAAQ,KAAK;AAAA,MAC3B,YAAYA,EAAI,QAAQ,KAAK,OAAO,OAAO,CAACmJ,GAAKz2C,OAAS;AAAA,QACtD,GAAGy2C;AAAA,QACH,CAACz2C,CAAG,GAAG+wF,GAASzjD,EAAI,UAAU,MAAM;AAAA,UAChC,GAAGgsB;AAAA,UACH,aAAa,CAAC,GAAGA,EAAK,aAAa,cAAct5D,CAAG;AAAA,QACxE,CAAiB,KAAK4wF,GAAYt3B,CAAI;AAAA,MACtC,IAAgB,CAAA,CAAE;AAAA,MACN,sBAAsBA,EAAK;AAAA,IACvC;AAEI,QAAM1kE,IAAS;AAAA,IACX,MAAM;AAAA,IACN,sBAAsBm8F,GAASzjD,EAAI,UAAU,MAAM;AAAA,MAC/C,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,sBAAsB;AAAA,IACrE,CAAS,KAAKA,EAAK;AAAA,EACnB;AACI,MAAIA,EAAK,WAAW;AAChB,WAAO1kE;AAEX,QAAI5E,IAAAs9C,EAAI,YAAJ,gBAAAt9C,EAAa,KAAK,cAAaq9C,EAAsB,eACrDx6C,IAAAy6C,EAAI,QAAQ,KAAK,WAAjB,QAAAz6C,EAAyB,SAAQ;AACjC,UAAM,EAAE,MAAA9E,GAAM,GAAGmnD,EAAO,IAAKm9C,GAAe/kD,EAAI,QAAQ,MAAMgsB,CAAI;AAClE,WAAO;AAAA,MACH,GAAG1kE;AAAA,MACH,eAAesgD;AAAA,IAC3B;AAAA,EACI,OACK;AAAA,UAAIniD,IAAAu6C,EAAI,YAAJ,gBAAAv6C,EAAa,KAAK,cAAas6C,EAAsB;AAC1D,aAAO;AAAA,QACH,GAAGz4C;AAAA,QACH,eAAe;AAAA,UACX,MAAM04C,EAAI,QAAQ,KAAK;AAAA,QACvC;AAAA,MACA;AAES,UAAIx6C,IAAAw6C,EAAI,YAAJ,gBAAAx6C,EAAa,KAAK,cAAau6C,EAAsB,cAC1DC,EAAI,QAAQ,KAAK,KAAK,KAAK,aAAaD,EAAsB,eAC9Dh6C,IAAAi6C,EAAI,QAAQ,KAAK,KAAK,KAAK,WAA3B,QAAAj6C,EAAmC,SAAQ;AAC3C,YAAM,EAAE,MAAAtF,GAAM,GAAGmnD,EAAO,IAAKg8C,GAAgB5jD,EAAI,QAAQ,MAAMgsB,CAAI;AACnE,aAAO;AAAA,QACH,GAAG1kE;AAAA,QACH,eAAesgD;AAAA,MAC3B;AAAA,IACI;AAAA;AACA,SAAOtgD;AACX;ACzDO,SAASq+F,GAAY3lD,GAAKgsB,GAAM;AACnC,MAAIA,EAAK,gBAAgB;AACrB,WAAO05B,GAAe1lD,GAAKgsB,CAAI;AAEnC,QAAM55D,IAAOqxF,GAASzjD,EAAI,QAAQ,MAAM;AAAA,IACpC,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,SAAS,GAAG;AAAA,EAChE,CAAK,KAAKs3B,GAAYt3B,CAAI,GAChBxjB,IAASi7C,GAASzjD,EAAI,UAAU,MAAM;AAAA,IACxC,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,SAAS,GAAG;AAAA,EAChE,CAAK,KAAKs3B,GAAYt3B,CAAI;AACtB,SAAO;AAAA,IACH,MAAM;AAAA,IACN,UAAU;AAAA,IACV,OAAO;AAAA,MACH,MAAM;AAAA,MACN,OAAO,CAAC55D,GAAMo2C,CAAM;AAAA,MACpB,UAAU;AAAA,MACV,UAAU;AAAA,IACtB;AAAA,EACA;AACA;ACzBO,SAASo9C,GAAmB5lD,GAAK;AACpC,QAAM9tC,IAAS8tC,EAAI,QAIb6lD,IAHa,OAAO,KAAK7lD,EAAI,MAAM,EAAE,OAAO,CAACttC,MACxC,OAAOR,EAAOA,EAAOQ,CAAG,CAAC,KAAM,QACzC,EAC+B,IAAI,CAACA,MAAQR,EAAOQ,CAAG,CAAC,GAClDozF,IAAc,MAAM,KAAK,IAAI,IAAID,EAAa,IAAI,CAACr9C,MAAW,OAAOA,CAAM,CAAC,CAAC;AACnF,SAAO;AAAA,IACH,MAAMs9C,EAAY,WAAW,IACvBA,EAAY,CAAC,MAAM,WACf,WACA,WACJ,CAAC,UAAU,QAAQ;AAAA,IACzB,MAAMD;AAAA,EACd;AACA;ACdO,SAASE,GAAc/5B,GAAM;AAChC,SAAOA,EAAK,WAAW,WACjB,SACA;AAAA,IACE,KAAKs3B,GAAY;AAAA,MACb,GAAGt3B;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,KAAK;AAAA,IACxD,CAAa;AAAA,EACb;AACA;ACVO,SAASg6B,GAAah6B,GAAM;AAC/B,SAAOA,EAAK,WAAW,aACjB;AAAA,IACE,MAAM,CAAC,MAAM;AAAA,IACb,UAAU;AAAA,EACtB,IACU;AAAA,IACE,MAAM;AAAA,EAClB;AACA;ACRO,MAAMi6B,KAAoB;AAAA,EAC7B,WAAW;AAAA,EACX,WAAW;AAAA,EACX,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,SAAS;AACb;AACO,SAASC,GAAclmD,GAAKgsB,GAAM;AACrC,MAAIA,EAAK,WAAW;AAChB,WAAOm6B,GAAQnmD,GAAKgsB,CAAI;AAC5B,QAAM70D,IAAU6oC,EAAI,mBAAmB,MAAM,MAAM,KAAKA,EAAI,QAAQ,QAAQ,IAAIA,EAAI;AAEpF,MAAI7oC,EAAQ,MAAM,CAAC7H,MAAMA,EAAE,KAAK,YAAY22F,OACvC,CAAC32F,EAAE,KAAK,UAAU,CAACA,EAAE,KAAK,OAAO,OAAO,GAAG;AAE5C,UAAMhN,IAAQ6U,EAAQ,OAAO,CAAC7U,GAAOgN,MAAM;AACvC,YAAM7O,IAAOwlG,GAAkB32F,EAAE,KAAK,QAAQ;AAC9C,aAAO7O,KAAQ,CAAC6B,EAAM,SAAS7B,CAAI,IAAI,CAAC,GAAG6B,GAAO7B,CAAI,IAAI6B;AAAA,IAC9D,GAAG,CAAA,CAAE;AACL,WAAO;AAAA,MACH,MAAMA,EAAM,SAAS,IAAIA,IAAQA,EAAM,CAAC;AAAA,IACpD;AAAA,EACI,WACS6U,EAAQ,MAAM,CAAC7H,MAAMA,EAAE,KAAK,aAAa,gBAAgB,CAACA,EAAE,WAAW,GAAG;AAE/E,UAAMhN,IAAQ6U,EAAQ,OAAO,CAACgyC,GAAK75C,MAAM;AACrC,YAAM7O,IAAO,OAAO6O,EAAE,KAAK;AAC3B,cAAQ7O,GAAI;AAAA,QACR,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,iBAAO,CAAC,GAAG0oD,GAAK1oD,CAAI;AAAA,QACxB,KAAK;AACD,iBAAO,CAAC,GAAG0oD,GAAK,SAAS;AAAA,QAC7B,KAAK;AACD,cAAI75C,EAAE,KAAK,UAAU;AACjB,mBAAO,CAAC,GAAG65C,GAAK,MAAM;AAAA,QAC9B,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL;AACI,iBAAOA;AAAA,MAC3B;AAAA,IACQ,GAAG,CAAA,CAAE;AACL,QAAI7mD,EAAM,WAAW6U,EAAQ,QAAQ;AAEjC,YAAMivF,IAAc9jG,EAAM,OAAO,CAACgN,GAAGpH,GAAGilC,MAAMA,EAAE,QAAQ79B,CAAC,MAAMpH,CAAC;AAChE,aAAO;AAAA,QACH,MAAMk+F,EAAY,SAAS,IAAIA,IAAcA,EAAY,CAAC;AAAA,QAC1D,MAAMjvF,EAAQ,OAAO,CAACgyC,GAAK75C,MAChB65C,EAAI,SAAS75C,EAAE,KAAK,KAAK,IAAI65C,IAAM,CAAC,GAAGA,GAAK75C,EAAE,KAAK,KAAK,GAChE,CAAA,CAAE;AAAA,MACrB;AAAA,IACQ;AAAA,EACJ,WACS6H,EAAQ,MAAM,CAAC7H,MAAMA,EAAE,KAAK,aAAa,SAAS;AACvD,WAAO;AAAA,MACH,MAAM;AAAA,MACN,MAAM6H,EAAQ,OAAO,CAACgyC,GAAK75C,MAAM;AAAA,QAC7B,GAAG65C;AAAA,QACH,GAAG75C,EAAE,KAAK,OAAO,OAAO,CAACA,MAAM,CAAC65C,EAAI,SAAS75C,CAAC,CAAC;AAAA,MAC/D,GAAe,EAAE;AAAA,IACjB;AAEI,SAAO62F,GAAQnmD,GAAKgsB,CAAI;AAC5B;AACA,MAAMm6B,KAAU,CAACnmD,GAAKgsB,MAAS;AAC3B,QAAMiF,KAASjxB,EAAI,mBAAmB,MAChC,MAAM,KAAKA,EAAI,QAAQ,OAAM,CAAE,IAC/BA,EAAI,SACL,IAAI,CAAC1wC,GAAGpH,MAAMu7F,GAASn0F,EAAE,MAAM;AAAA,IAChC,GAAG08D;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG9jE,CAAC,EAAE;AAAA,EAC1D,CAAK,CAAC,EACG,OAAO,CAACoH,MAAM,CAAC,CAACA,MAChB,CAAC08D,EAAK,gBACF,OAAO18D,KAAM,YAAY,OAAO,KAAKA,CAAC,EAAE,SAAS,EAAG;AAC7D,SAAO2hE,EAAM,SAAS,EAAE,OAAAA,EAAK,IAAK;AACtC;AC7EO,SAASo1B,GAAiBrmD,GAAKgsB,GAAM;AACxC,MAAI,CAAC,aAAa,aAAa,aAAa,cAAc,SAAS,EAAE,SAAShsB,EAAI,UAAU,KAAK,QAAQ,MACpG,CAACA,EAAI,UAAU,KAAK,UAAU,CAACA,EAAI,UAAU,KAAK,OAAO;AAC1D,WAAIgsB,EAAK,WAAW,aACT;AAAA,MACH,MAAMi6B,GAAkBjmD,EAAI,UAAU,KAAK,QAAQ;AAAA,MACnD,UAAU;AAAA,IAC1B,IAEe;AAAA,MACH,MAAM;AAAA,QACFimD,GAAkBjmD,EAAI,UAAU,KAAK,QAAQ;AAAA,QAC7C;AAAA,MAChB;AAAA,IACA;AAEI,MAAIgsB,EAAK,WAAW,YAAY;AAC5B,UAAM3iB,IAAOo6C,GAASzjD,EAAI,UAAU,MAAM;AAAA,MACtC,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,WAAW;AAAA,IAC7C,CAAS;AACD,WAAI3iB,KAAQ,UAAUA,IACX,EAAE,OAAO,CAACA,CAAI,GAAG,UAAU,GAAI,IACnCA,KAAQ,EAAE,GAAGA,GAAM,UAAU,GAAI;AAAA,EAC5C;AACA,QAAMA,IAAOo6C,GAASzjD,EAAI,UAAU,MAAM;AAAA,IACtC,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG;AAAA,EACvD,CAAK;AACD,SAAO3iB,KAAQ,EAAE,OAAO,CAACA,GAAM,EAAE,MAAM,OAAM,CAAE,EAAC;AACpD;AC/BO,SAASi9C,GAAetmD,GAAKgsB,GAAM;AACtC,QAAM3gD,IAAM;AAAA,IACR,MAAM;AAAA,EACd;AACI,MAAI,CAAC20B,EAAI;AACL,WAAO30B;AACX,aAAWo0B,KAASO,EAAI;AACpB,YAAQP,EAAM,MAAI;AAAA,MACd,KAAK;AACD,QAAAp0B,EAAI,OAAO,WACX43E,GAAgB53E,GAAK,QAAQo0B,EAAM,SAASusB,CAAI;AAChD;AAAA,MACJ,KAAK;AACD,QAAIA,EAAK,WAAW,gBACZvsB,EAAM,YACNyjD,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,IAG1Ek3B,GAA0B73E,GAAK,oBAAoBo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,KAIlFvsB,EAAM,cACPp0B,EAAI,mBAAmB,KAE3B63E,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAE9E;AAAA,MACJ,KAAK;AACD,QAAIA,EAAK,WAAW,gBACZvsB,EAAM,YACNyjD,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,IAG1Ek3B,GAA0B73E,GAAK,oBAAoBo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI,KAIlFvsB,EAAM,cACPp0B,EAAI,mBAAmB,KAE3B63E,GAA0B73E,GAAK,WAAWo0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAE9E;AAAA,MACJ,KAAK;AACD,QAAAk3B,GAA0B73E,GAAK,cAAco0B,EAAM,OAAOA,EAAM,SAASusB,CAAI;AAC7E;AAAA,IAChB;AAEI,SAAO3gD;AACX;AClDO,SAASk7E,GAAevmD,GAAKgsB,GAAM;AACtC,QAAMw6B,IAA4Bx6B,EAAK,WAAW,UAC5CxpE,IAAS;AAAA,IACX,MAAM;AAAA,IACN,YAAY,CAAA;AAAA,EACpB,GACU0B,IAAW,CAAA,GACXghD,IAAQlF,EAAI,MAAK;AACvB,aAAWymD,KAAYvhD,GAAO;AAC1B,QAAIwhD,IAAUxhD,EAAMuhD,CAAQ;AAC5B,QAAIC,MAAY,UAAaA,EAAQ,SAAS;AAC1C;AAEJ,QAAIC,IAAeC,GAAeF,CAAO;AACzC,IAAIC,KAAgBH,MACZE,EAAQ,KAAK,aAAa,kBAC1BA,IAAUA,EAAQ,KAAK,YAEtBA,EAAQ,iBACTA,IAAUA,EAAQ,SAAQ,IAE9BC,IAAe;AAEnB,UAAME,IAAYpD,GAASiD,EAAQ,MAAM;AAAA,MACrC,GAAG16B;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,cAAcy6B,CAAQ;AAAA,MACzD,cAAc,CAAC,GAAGz6B,EAAK,aAAa,cAAcy6B,CAAQ;AAAA,IACtE,CAAS;AACD,IAAII,MAAc,WAGlBrkG,EAAO,WAAWikG,CAAQ,IAAII,GACzBF,KACDziG,EAAS,KAAKuiG,CAAQ;AAAA,EAE9B;AACA,EAAIviG,EAAS,WACT1B,EAAO,WAAW0B;AAEtB,QAAMygG,IAAuBmC,GAA2B9mD,GAAKgsB,CAAI;AACjE,SAAI24B,MAAyB,WACzBniG,EAAO,uBAAuBmiG,IAE3BniG;AACX;AACA,SAASskG,GAA2B9mD,GAAKgsB,GAAM;AAC3C,MAAIhsB,EAAI,SAAS,KAAK,aAAa;AAC/B,WAAOyjD,GAASzjD,EAAI,SAAS,MAAM;AAAA,MAC/B,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,sBAAsB;AAAA,IACrE,CAAS;AAEL,UAAQhsB,EAAI,aAAW;AAAA,IACnB,KAAK;AACD,aAAOgsB,EAAK;AAAA,IAChB,KAAK;AACD,aAAOA,EAAK;AAAA,IAChB,KAAK;AACD,aAAOA,EAAK,6BAA6B,WACnCA,EAAK,8BACLA,EAAK;AAAA,EACvB;AACA;AACA,SAAS46B,GAAet/F,GAAQ;AAC5B,MAAI;AACA,WAAOA,EAAO,WAAU;AAAA,EAC5B,QACM;AACF,WAAO;AAAA,EACX;AACJ;ACrEO,MAAMy/F,KAAmB,CAAC/mD,GAAKgsB,MAAS;;AAC3C,MAAIA,EAAK,YAAY,SAAQ,QAAO9qE,IAAA8qE,EAAK,iBAAL,gBAAA9qE,EAAmB;AACnD,WAAOuiG,GAASzjD,EAAI,UAAU,MAAMgsB,CAAI;AAE5C,QAAMg7B,IAAcvD,GAASzjD,EAAI,UAAU,MAAM;AAAA,IAC7C,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG;AAAA,EACvD,CAAK;AACD,SAAOg7B,IACD;AAAA,IACE,OAAO;AAAA,MACH;AAAA,QACI,KAAK1D,GAAYt3B,CAAI;AAAA,MACzC;AAAA,MACgBg7B;AAAA,IAChB;AAAA,EACA,IACU1D,GAAYt3B,CAAI;AAC1B,GCnBai7B,KAAmB,CAACjnD,GAAKgsB,MAAS;AAC3C,MAAIA,EAAK,iBAAiB;AACtB,WAAOy3B,GAASzjD,EAAI,GAAG,MAAMgsB,CAAI;AAEhC,MAAIA,EAAK,iBAAiB;AAC3B,WAAOy3B,GAASzjD,EAAI,IAAI,MAAMgsB,CAAI;AAEtC,QAAM7+B,IAAIs2D,GAASzjD,EAAI,GAAG,MAAM;AAAA,IAC5B,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG;AAAA,EACvD,CAAK,GACK5+B,IAAIq2D,GAASzjD,EAAI,IAAI,MAAM;AAAA,IAC7B,GAAGgsB;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS7+B,IAAI,MAAM,GAAG;AAAA,EACjE,CAAK;AACD,SAAO;AAAA,IACH,OAAO,CAACA,GAAGC,CAAC,EAAE,OAAO,CAAC99B,MAAMA,MAAM,MAAS;AAAA,EACnD;AACA;AClBO,SAAS43F,GAAgBlnD,GAAKgsB,GAAM;AACvC,SAAOy3B,GAASzjD,EAAI,KAAK,MAAMgsB,CAAI;AACvC;ACDO,SAASm7B,GAAYnnD,GAAKgsB,GAAM;AAKnC,QAAM1kE,IAAS;AAAA,IACX,MAAM;AAAA,IACN,aAAa;AAAA,IACb,OAPUm8F,GAASzjD,EAAI,UAAU,MAAM;AAAA,MACvC,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,OAAO;AAAA,IAClD,CAAK;AAAA,EAKL;AACI,SAAIhsB,EAAI,WACJkjD,GAA0B57F,GAAQ,YAAY04C,EAAI,QAAQ,OAAOA,EAAI,QAAQ,SAASgsB,CAAI,GAE1FhsB,EAAI,WACJkjD,GAA0B57F,GAAQ,YAAY04C,EAAI,QAAQ,OAAOA,EAAI,QAAQ,SAASgsB,CAAI,GAEvF1kE;AACX;AClBO,SAAS8/F,GAAcpnD,GAAKgsB,GAAM;AACrC,SAAIhsB,EAAI,OACG;AAAA,IACH,MAAM;AAAA,IACN,UAAUA,EAAI,MAAM;AAAA,IACpB,OAAOA,EAAI,MACN,IAAI,CAAC1wC,GAAGpH,MAAMu7F,GAASn0F,EAAE,MAAM;AAAA,MAChC,GAAG08D;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG9jE,CAAC,EAAE;AAAA,IAClE,CAAa,CAAC,EACG,OAAO,CAACihD,GAAK75C,MAAOA,MAAM,SAAY65C,IAAM,CAAC,GAAGA,GAAK75C,CAAC,GAAI,CAAA,CAAE;AAAA,IACjE,iBAAiBm0F,GAASzjD,EAAI,KAAK,MAAM;AAAA,MACrC,GAAGgsB;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,iBAAiB;AAAA,IACpE,CAAa;AAAA,EACb,IAGe;AAAA,IACH,MAAM;AAAA,IACN,UAAUhsB,EAAI,MAAM;AAAA,IACpB,UAAUA,EAAI,MAAM;AAAA,IACpB,OAAOA,EAAI,MACN,IAAI,CAAC1wC,GAAGpH,MAAMu7F,GAASn0F,EAAE,MAAM;AAAA,MAChC,GAAG08D;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,aAAa,SAAS,GAAG9jE,CAAC,EAAE;AAAA,IAClE,CAAa,CAAC,EACG,OAAO,CAACihD,GAAK75C,MAAOA,MAAM,SAAY65C,IAAM,CAAC,GAAGA,GAAK75C,CAAC,GAAI,CAAA,CAAE;AAAA,EAC7E;AAEA;AC9BO,SAAS+3F,GAAkBr7B,GAAM;AACpC,SAAO;AAAA,IACH,KAAKs3B,GAAYt3B,CAAI;AAAA,EAC7B;AACA;ACJO,SAASs7B,GAAgBt7B,GAAM;AAClC,SAAOs3B,GAAYt3B,CAAI;AAC3B;ACFO,MAAMu7B,KAAmB,CAACvnD,GAAKgsB,MAC3By3B,GAASzjD,EAAI,UAAU,MAAMgsB,CAAI,GC6B/Bw7B,KAAe,CAACxnD,GAAKynD,GAAUz7B,MAAS;AACjD,UAAQy7B,GAAQ;AAAA,IACZ,KAAK1nD,EAAsB;AACvB,aAAOglD,GAAe/kD,GAAKgsB,CAAI;AAAA,IACnC,KAAKjsB,EAAsB;AACvB,aAAOumD,GAAetmD,GAAKgsB,CAAI;AAAA,IACnC,KAAKjsB,EAAsB;AACvB,aAAOwmD,GAAevmD,GAAKgsB,CAAI;AAAA,IACnC,KAAKjsB,EAAsB;AACvB,aAAO2jD,GAAe1jD,GAAKgsB,CAAI;AAAA,IACnC,KAAKjsB,EAAsB;AACvB,aAAO4jD,GAAe;AAAA,IAC1B,KAAK5jD,EAAsB;AACvB,aAAOgkD,GAAa/jD,GAAKgsB,CAAI;AAAA,IACjC,KAAKjsB,EAAsB;AACvB,aAAOsnD,GAAkBr7B,CAAI;AAAA,IACjC,KAAKjsB,EAAsB;AACvB,aAAOimD,GAAah6B,CAAI;AAAA,IAC5B,KAAKjsB,EAAsB;AACvB,aAAOyjD,GAAcxjD,GAAKgsB,CAAI;AAAA,IAClC,KAAKjsB,EAAsB;AAAA,IAC3B,KAAKA,EAAsB;AACvB,aAAOmmD,GAAclmD,GAAKgsB,CAAI;AAAA,IAClC,KAAKjsB,EAAsB;AACvB,aAAOwkD,GAAqBvkD,GAAKgsB,CAAI;AAAA,IACzC,KAAKjsB,EAAsB;AACvB,aAAOqnD,GAAcpnD,GAAKgsB,CAAI;AAAA,IAClC,KAAKjsB,EAAsB;AACvB,aAAO2lD,GAAe1lD,GAAKgsB,CAAI;AAAA,IACnC,KAAKjsB,EAAsB;AACvB,aAAO6kD,GAAgB5kD,GAAKgsB,CAAI;AAAA,IACpC,KAAKjsB,EAAsB;AACvB,aAAOskD,GAAarkD,CAAG;AAAA,IAC3B,KAAKD,EAAsB;AACvB,aAAO6lD,GAAmB5lD,CAAG;AAAA,IACjC,KAAKD,EAAsB;AACvB,aAAOsmD,GAAiBrmD,GAAKgsB,CAAI;AAAA,IACrC,KAAKjsB,EAAsB;AACvB,aAAOgnD,GAAiB/mD,GAAKgsB,CAAI;AAAA,IACrC,KAAKjsB,EAAsB;AACvB,aAAO4lD,GAAY3lD,GAAKgsB,CAAI;AAAA,IAChC,KAAKjsB,EAAsB;AACvB,aAAOonD,GAAYnnD,GAAKgsB,CAAI;AAAA,IAChC,KAAKjsB,EAAsB;AACvB,aAAO,MAAMC,EAAI,OAAM,EAAG;AAAA,IAC9B,KAAKD,EAAsB;AACvB,aAAOmnD,GAAgBlnD,GAAKgsB,CAAI;AAAA,IACpC,KAAKjsB,EAAsB;AAAA,IAC3B,KAAKA,EAAsB;AACvB,aAAOgmD,GAAc/5B,CAAI;AAAA,IAC7B,KAAKjsB,EAAsB;AACvB,aAAOqkD,GAAgBpkD,GAAKgsB,CAAI;AAAA,IACpC,KAAKjsB,EAAsB;AACvB,aAAOujD,GAAYt3B,CAAI;AAAA,IAC3B,KAAKjsB,EAAsB;AACvB,aAAOunD,GAAgBt7B,CAAI;AAAA,IAC/B,KAAKjsB,EAAsB;AACvB,aAAOokD,GAAgBnkD,GAAKgsB,CAAI;AAAA,IACpC,KAAKjsB,EAAsB;AACvB,aAAO6jD,GAAgB5jD,GAAKgsB,CAAI;AAAA,IACpC,KAAKjsB,EAAsB;AACvB,aAAOwnD,GAAiBvnD,GAAKgsB,CAAI;AAAA,IACrC,KAAKjsB,EAAsB;AACvB,aAAO+jD,GAAc9jD,GAAKgsB,CAAI;AAAA,IAClC,KAAKjsB,EAAsB;AACvB,aAAOknD,GAAiBjnD,GAAKgsB,CAAI;AAAA,IACrC,KAAKjsB,EAAsB;AAAA,IAC3B,KAAKA,EAAsB;AAAA,IAC3B,KAAKA,EAAsB;AACvB;AAAA,IACJ;AAEI,aAAQ,kBAAC52B,MAAC;AAAA,SAAwB;AAAA,EAC9C;AACA;ACrGO,SAASs6E,GAASzjD,GAAKgsB,GAAM07B,IAAkB,IAAO;;AACzD,QAAMC,IAAW37B,EAAK,KAAK,IAAIhsB,CAAG;AAClC,MAAIgsB,EAAK,UAAU;AACf,UAAM47B,KAAiB1mG,IAAA8qE,EAAK,aAAL,gBAAA9qE,EAAA,KAAA8qE,GAAgBhsB,GAAKgsB,GAAM27B,GAAUD;AAC5D,QAAIE,MAAmB9E;AACnB,aAAO8E;AAAA,EAEf;AACA,MAAID,KAAY,CAACD,GAAiB;AAC9B,UAAMG,IAAaC,GAAQH,GAAU37B,CAAI;AACzC,QAAI67B,MAAe;AACf,aAAOA;AAAA,EAEf;AACA,QAAME,IAAU,EAAE,KAAA/nD,GAAK,MAAMgsB,EAAK,aAAa,YAAY,OAAS;AACpE,EAAAA,EAAK,KAAK,IAAIhsB,GAAK+nD,CAAO;AAC1B,QAAMC,IAAqBR,GAAaxnD,GAAKA,EAAI,UAAUgsB,CAAI,GAEzDi8B,IAAa,OAAOD,KAAuB,aAC3CvE,GAASuE,EAAkB,GAAIh8B,CAAI,IACnCg8B;AAIN,MAHIC,KACAC,GAAQloD,GAAKgsB,GAAMi8B,CAAU,GAE7Bj8B,EAAK,aAAa;AAClB,UAAMm8B,IAAoBn8B,EAAK,YAAYi8B,GAAYjoD,GAAKgsB,CAAI;AAChE,WAAA+7B,EAAQ,aAAaE,GACdE;AAAA,EACX;AACA,SAAAJ,EAAQ,aAAaE,GACdA;AACX;AACA,MAAMH,KAAU,CAAC/mG,GAAMirE,MAAS;AAC5B,UAAQA,EAAK,cAAY;AAAA,IACrB,KAAK;AACD,aAAO,EAAE,MAAMjrE,EAAK,KAAK,KAAK,GAAG,EAAC;AAAA,IACtC,KAAK;AACD,aAAO,EAAE,MAAMoiG,GAAgBn3B,EAAK,aAAajrE,EAAK,IAAI,EAAC;AAAA,IAC/D,KAAK;AAAA,IACL,KAAK;AACD,aAAIA,EAAK,KAAK,SAASirE,EAAK,YAAY,UACpCjrE,EAAK,KAAK,MAAM,CAACwB,GAAOnC,MAAU4rE,EAAK,YAAY5rE,CAAK,MAAMmC,CAAK,KACnE,QAAQ,KAAK,mCAAmCypE,EAAK,YAAY,KAAK,GAAG,CAAC,qBAAqB,GACxFs3B,GAAYt3B,CAAI,KAEpBA,EAAK,iBAAiB,SAASs3B,GAAYt3B,CAAI,IAAI;AAAA,EAEtE;AACA,GACMk8B,KAAU,CAACloD,GAAKgsB,GAAMi8B,OACpBjoD,EAAI,gBACJioD,EAAW,cAAcjoD,EAAI,aACzBgsB,EAAK,wBACLi8B,EAAW,sBAAsBjoD,EAAI,eAGtCioD,ICzDLG,KAAkB,CAAC9gG,GAAQ6P,MAAY;AACzC,QAAM60D,IAAOg3B,GAAQ7rF,CAAO;AAC5B,MAAIkxF,IAAc,OAAOlxF,KAAY,YAAYA,EAAQ,cACnD,OAAO,QAAQA,EAAQ,WAAW,EAAE,OAAO,CAACgyC,GAAK,CAAC10C,GAAMnN,CAAM,OAAO;AAAA,IACnE,GAAG6hD;AAAA,IACH,CAAC10C,CAAI,GAAGgvF,GAASn8F,EAAO,MAAM;AAAA,MAC1B,GAAG0kE;AAAA,MACH,aAAa,CAAC,GAAGA,EAAK,UAAUA,EAAK,gBAAgBv3D,CAAI;AAAA,IACzE,GAAe,EAAI,KAAK6uF,GAAYt3B,CAAI;AAAA,EACxC,IAAY,CAAA,CAAE,IACJ;AACN,QAAMv3D,IAAO,OAAO0C,KAAY,WAC1BA,KACAA,KAAA,gBAAAA,EAAS,kBAAiB,WAEtBA,KAAA,OADA,SACAA,EAAS,MACbmxF,IAAO7E,GAASn8F,EAAO,MAAMmN,MAAS,SACtCu3D,IACA;AAAA,IACE,GAAGA;AAAA,IACH,aAAa,CAAC,GAAGA,EAAK,UAAUA,EAAK,gBAAgBv3D,CAAI;AAAA,EACrE,GAAW,EAAK,KAAK6uF,GAAYt3B,CAAI,GAC3Bl7C,IAAQ,OAAO3Z,KAAY,YAC7BA,EAAQ,SAAS,UACjBA,EAAQ,iBAAiB,UACvBA,EAAQ,OACR;AACN,EAAI2Z,MAAU,WACVw3E,EAAK,QAAQx3E,IAEbk7C,EAAK,MAAM,+BACNq8B,MACDA,IAAc,CAAA,IAEbA,EAAYr8B,EAAK,iBAAiB,MACnCq8B,EAAYr8B,EAAK,iBAAiB,IAAI;AAAA;AAAA,IAElC,MAAM,CAAC,UAAU,UAAU,WAAW,WAAW,SAAS,MAAM;AAAA,IAChE,OAAO;AAAA,MACH,MAAMA,EAAK,iBAAiB,aACtB,MACA;AAAA,QACE,GAAGA,EAAK;AAAA,QACRA,EAAK;AAAA,QACLA,EAAK;AAAA,MACjC,EAA0B,KAAK,GAAG;AAAA,IAClC;AAAA,EACA;AAGI,QAAMu8B,IAAW9zF,MAAS,SACpB4zF,IACI;AAAA,IACE,GAAGC;AAAA,IACH,CAACt8B,EAAK,cAAc,GAAGq8B;AAAA,EACvC,IACcC,IACJ;AAAA,IACE,MAAM;AAAA,MACF,GAAIt8B,EAAK,iBAAiB,aAAa,CAAA,IAAKA,EAAK;AAAA,MACjDA,EAAK;AAAA,MACLv3D;AAAA,IAChB,EAAc,KAAK,GAAG;AAAA,IACV,CAACu3D,EAAK,cAAc,GAAG;AAAA,MACnB,GAAGq8B;AAAA,MACH,CAAC5zF,CAAI,GAAG6zF;AAAA,IACxB;AAAA,EACA;AACI,SAAIt8B,EAAK,WAAW,gBAChBu8B,EAAS,UAAU,6CAEdv8B,EAAK,WAAW,uBAAuBA,EAAK,WAAW,cAC5Du8B,EAAS,UAAU,kDAEnBv8B,EAAK,WAAW,aACf,WAAWu8B,KACR,WAAWA,KACX,WAAWA,KACV,UAAUA,KAAY,MAAM,QAAQA,EAAS,IAAI,MACtD,QAAQ,KAAK,sGAAsG,GAEhHA;AACX;ACpFO,IAAIC;AAAA,CACV,SAAUA,GAAgB;AACvB,EAAAA,EAAe,cAAiB;AACpC,GAAGA,OAAmBA,KAAiB,CAAA,EAAG;AACnC,MAAMC,WAAoBnpD,GAAQ;AAAA,EACrC,OAAOC,GAAO;AACV,UAAM,EAAE,KAAAlrC,EAAG,IAAK,KAAK,oBAAoBkrC,CAAK,GACxCh+C,IAAO8S,EAAI;AACjB,WAAO,KAAK,KAAK,KAAK,OAAO;AAAA,MACzB,MAAA9S;AAAA,MACA,MAAM8S,EAAI;AAAA,MACV,QAAQA;AAAA,IACpB,CAAS;AAAA,EACL;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACAo0F,GAAY,SAAS,CAAChoG,GAAMqvB,MACjB,IAAI24E,GAAY;AAAA,EACnB,MAAAhoG;AAAA,EACA,UAAU+nG,GAAe;AAAA,EACzB,UAAU14E,EAAO;AAAA,EACjB,GAAGmvB,GAAoBnvB,CAAM;AACrC,CAAK;AAUL,SAASmvB,GAAoBnvB,GAAQ;AACjC,MAAI,CAACA;AACD,WAAO,CAAA;AACX,QAAM,EAAE,UAAAstB,GAAU,oBAAA8B,GAAoB,gBAAAC,GAAgB,aAAAC,EAAW,IAAKtvB;AACtE,MAAIstB,MAAa8B,KAAsBC;AACnC,UAAM,IAAI,MAAM,0FAA0F;AAE9G,SAAI/B,IACO,EAAE,UAAUA,GAAU,aAAAgC,EAAW,IAcrC,EAAE,UAbS,CAACC,GAAKhrC,MAAQ;AAC5B,QAAInT,GAAIwB;AACR,UAAM,EAAE,SAAAiF,EAAO,IAAKmoB;AACpB,WAAIuvB,EAAI,SAAS,uBACN,EAAE,SAAS13C,KAAmD0M,EAAI,aAAY,IAErF,OAAOA,EAAI,OAAS,MACb,EAAE,UAAUnT,IAAKyG,KAAmDw3C,OAAoB,QAAQj+C,MAAO,SAASA,IAAKmT,EAAI,aAAY,IAE5IgrC,EAAI,SAAS,iBACN,EAAE,SAAShrC,EAAI,aAAY,IAC/B,EAAE,UAAU3R,IAAKiF,KAAmDu3C,OAAwB,QAAQx8C,MAAO,SAASA,IAAK2R,EAAI,aAAY;AAAA,EACpJ,GAC8B,aAAA+qC,EAAW;AAC7C;AC/CO,MAAMspD,GAAU;AAAA,EACnB,YAAYC,GAAYxxF,GAAS;AAC7B,SAAK,uBAAuB,CAAA,GAC5B,KAAK,+BAA+B,CAAA,GACpC,KAAK,mBAAmB,CAAA,GACxB,KAAK,qBAAqB,CAAA,GAC1B,KAAK,2BAA2B,IAChC,KAAK,gCAAgC,IACrC,KAAK,+BAA+B,IACpC,KAAK,6BAA6B,IAClC,KAAK,SAAS,IAAIwrF,GAAOgG,GAAYxxF,CAAO;AAAA,EAChD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,QAAQk7C,GAAW;AACrB,WAAO,MAAM,KAAK,OAAO,QAAQA,CAAS;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,QAAQ;AACV,UAAM,KAAK,OAAO,MAAK;AAAA,EAC3B;AAAA,EACA,yBAAyB;AACrB,IAAI,KAAK,6BAGT,KAAK,OAAO,2BAA2B3C,GAAuB,MAAM,OAAO,KAAK,GAChF,KAAK,OAAO,2BAA2BG,GAAsB,MAAM,OAAO,KAAK,GAC/E,KAAK,OAAO,qBAAqB;AAAA,MAC7B,OAAO;AAAA,QACH,aAAa;AAAA,MAC7B;AAAA,IACA,CAAS,GACD,KAAK,OAAO,kBAAkBH,IAAwB,OAAO;AAAA,MACzD,OAAO,OAAO,QAAQ,KAAK,gBAAgB,EAAE,OAAO,CAAC,CAAA,EAAGytB,CAAI,MAAMA,EAAK,OAAO,EAAE,IAAI,CAAC,CAAC1oE,GAAM0oE,CAAI,MAAM;AAClG,cAAMyrB,IAAiB;AAAA,UACnB,MAAAn0F;AAAA,UACA,OAAO0oE,EAAK;AAAA,UACZ,aAAaA,EAAK;AAAA,UAClB,aAAaA,EAAK,cACZirB,GAAgBjrB,EAAK,aAAa;AAAA,YAChC,cAAc;AAAA,UAC1C,CAAyB,IACC0rB;AAAA,UACN,aAAa1rB,EAAK;AAAA,QACtC;AACgB,eAAIA,EAAK,iBACLyrB,EAAe,eAAeR,GAAgBjrB,EAAK,cAAc,EAAE,cAAc,IAAM,IAEpFyrB;AAAA,MACX,CAAC;AAAA,IACb,EAAU,GACF,KAAK,OAAO,kBAAkB/4C,IAAuB,OAAO/gB,GAASlsB,MAAU;AAC3E,YAAMu6D,IAAO,KAAK,iBAAiBruC,EAAQ,OAAO,IAAI;AACtD,UAAI,CAACquC;AACD,cAAM,IAAI3rB,GAASvF,GAAU,eAAe,QAAQnd,EAAQ,OAAO,IAAI,YAAY;AAEvF,UAAI,CAACquC,EAAK;AACN,cAAM,IAAI3rB,GAASvF,GAAU,eAAe,QAAQnd,EAAQ,OAAO,IAAI,WAAW;AAEtF,UAAItsC;AACJ,UAAI26E,EAAK,aAAa;AAClB,cAAM2rB,IAAc,MAAM3rB,EAAK,YAAY,eAAeruC,EAAQ,OAAO,SAAS;AAClF,YAAI,CAACg6D,EAAY;AACb,gBAAM,IAAIt3C,GAASvF,GAAU,eAAe,8BAA8Bnd,EAAQ,OAAO,IAAI,KAAKg6D,EAAY,MAAM,OAAO,EAAE;AAEjI,cAAMp9F,IAAOo9F,EAAY,MACnBlkC,IAAKuY,EAAK;AAChB,YAAI;AACA,UAAA36E,IAAS,MAAM,QAAQ,QAAQoiE,EAAGl5D,GAAMkX,CAAK,CAAC;AAAA,QAClD,SACOxa,GAAO;AACV,UAAA5F,IAAS;AAAA,YACL,SAAS;AAAA,cACL;AAAA,gBACI,MAAM;AAAA,gBACN,MAAM4F,aAAiB,QAAQA,EAAM,UAAU,OAAOA,CAAK;AAAA,cAC3F;AAAA,YACA;AAAA,YACwB,SAAS;AAAA,UACjC;AAAA,QACgB;AAAA,MACJ,OACK;AACD,cAAMw8D,IAAKuY,EAAK;AAChB,YAAI;AACA,UAAA36E,IAAS,MAAM,QAAQ,QAAQoiE,EAAGhiD,CAAK,CAAC;AAAA,QAC5C,SACOxa,GAAO;AACV,UAAA5F,IAAS;AAAA,YACL,SAAS;AAAA,cACL;AAAA,gBACI,MAAM;AAAA,gBACN,MAAM4F,aAAiB,QAAQA,EAAM,UAAU,OAAOA,CAAK;AAAA,cAC3F;AAAA,YACA;AAAA,YACwB,SAAS;AAAA,UACjC;AAAA,QACgB;AAAA,MACJ;AACA,UAAI+0E,EAAK,gBAAgB,CAAC36E,EAAO,SAAS;AACtC,YAAI,CAACA,EAAO;AACR,gBAAM,IAAIgvD,GAASvF,GAAU,eAAe,QAAQnd,EAAQ,OAAO,IAAI,8DAA8D;AAGzI,cAAMg6D,IAAc,MAAM3rB,EAAK,aAAa,eAAe36E,EAAO,iBAAiB;AACnF,YAAI,CAACsmG,EAAY;AACb,gBAAM,IAAIt3C,GAASvF,GAAU,eAAe,uCAAuCnd,EAAQ,OAAO,IAAI,KAAKg6D,EAAY,MAAM,OAAO,EAAE;AAAA,MAE9I;AACA,aAAOtmG;AAAA,IACX,CAAC,GACD,KAAK,2BAA2B;AAAA,EACpC;AAAA,EACA,8BAA8B;AAC1B,IAAI,KAAK,kCAGT,KAAK,OAAO,2BAA2B0uD,GAAsB,MAAM,OAAO,KAAK,GAC/E,KAAK,OAAO,qBAAqB;AAAA,MAC7B,aAAa,CAAA;AAAA,IACzB,CAAS,GACD,KAAK,OAAO,kBAAkBA,IAAuB,OAAOpiB,MAAY;AACpE,cAAQA,EAAQ,OAAO,IAAI,MAAI;AAAA,QAC3B,KAAK;AACD,iBAAO,KAAK,uBAAuBA,GAASA,EAAQ,OAAO,GAAG;AAAA,QAClE,KAAK;AACD,iBAAO,KAAK,yBAAyBA,GAASA,EAAQ,OAAO,GAAG;AAAA,QACpE;AACI,gBAAM,IAAI0iB,GAASvF,GAAU,eAAe,iCAAiCnd,EAAQ,OAAO,GAAG,EAAE;AAAA,MACrH;AAAA,IACQ,CAAC,GACD,KAAK,gCAAgC;AAAA,EACzC;AAAA,EACA,MAAM,uBAAuBA,GAAS9pC,GAAK;AACvC,UAAM+jG,IAAS,KAAK,mBAAmB/jG,EAAI,IAAI;AAC/C,QAAI,CAAC+jG;AACD,YAAM,IAAIv3C,GAASvF,GAAU,eAAe,UAAUjnD,EAAI,IAAI,YAAY;AAE9E,QAAI,CAAC+jG,EAAO;AACR,YAAM,IAAIv3C,GAASvF,GAAU,eAAe,UAAUjnD,EAAI,IAAI,WAAW;AAE7E,QAAI,CAAC+jG,EAAO;AACR,aAAOC;AAEX,UAAM1+D,IAAQy+D,EAAO,WAAW,MAAMj6D,EAAQ,OAAO,SAAS,IAAI;AAClE,QAAI,EAAExE,aAAiBm+D;AACnB,aAAOO;AAGX,UAAMC,IAAc,MADR3+D,EAAM,KACY,SAASwE,EAAQ,OAAO,SAAS,OAAOA,EAAQ,OAAO,OAAO;AAC5F,WAAOo6D,GAAuBD,CAAW;AAAA,EAC7C;AAAA,EACA,MAAM,yBAAyBn6D,GAAS9pC,GAAK;AACzC,UAAMmkG,IAAW,OAAO,OAAO,KAAK,4BAA4B,EAAE,KAAK,CAACxkG,MAAMA,EAAE,iBAAiB,YAAY,SAAQ,MAAOK,EAAI,GAAG;AACnI,QAAI,CAACmkG,GAAU;AACX,UAAI,KAAK,qBAAqBnkG,EAAI,GAAG;AAEjC,eAAOgkG;AAEX,YAAM,IAAIx3C,GAASvF,GAAU,eAAe,qBAAqBnd,EAAQ,OAAO,IAAI,GAAG,YAAY;AAAA,IACvG;AACA,UAAMs6D,IAAYD,EAAS,iBAAiB,iBAAiBr6D,EAAQ,OAAO,SAAS,IAAI;AACzF,QAAI,CAACs6D;AACD,aAAOJ;AAEX,UAAMC,IAAc,MAAMG,EAAUt6D,EAAQ,OAAO,SAAS,OAAOA,EAAQ,OAAO,OAAO;AACzF,WAAOo6D,GAAuBD,CAAW;AAAA,EAC7C;AAAA,EACA,6BAA6B;AACzB,IAAI,KAAK,iCAGT,KAAK,OAAO,2BAA2Bp7C,GAA2B,MAAM,OAAO,KAAK,GACpF,KAAK,OAAO,2BAA2BG,GAAmC,MAAM,OAAO,KAAK,GAC5F,KAAK,OAAO,2BAA2BE,GAA0B,MAAM,OAAO,KAAK,GACnF,KAAK,OAAO,qBAAqB;AAAA,MAC7B,WAAW;AAAA,QACP,aAAa;AAAA,MAC7B;AAAA,IACA,CAAS,GACD,KAAK,OAAO,kBAAkBL,IAA4B,OAAO/e,GAASlsB,MAAU;AAChF,YAAMymF,IAAY,OAAO,QAAQ,KAAK,oBAAoB,EAAE,OAAO,CAAC,CAAClgF,GAAGm+D,CAAQ,MAAMA,EAAS,OAAO,EAAE,IAAI,CAAC,CAAC9oB,GAAK8oB,CAAQ,OAAO;AAAA,QAC9H,KAAA9oB;AAAA,QACA,MAAM8oB,EAAS;AAAA,QACf,GAAGA,EAAS;AAAA,MAC5B,EAAc,GACIgiB,IAAoB,CAAA;AAC1B,iBAAWH,KAAY,OAAO,OAAO,KAAK,4BAA4B,GAAG;AACrE,YAAI,CAACA,EAAS,iBAAiB;AAC3B;AAEJ,cAAM3mG,IAAS,MAAM2mG,EAAS,iBAAiB,aAAavmF,CAAK;AACjE,mBAAW0kE,KAAY9kF,EAAO;AAC1B,UAAA8mG,EAAkB,KAAK;AAAA,YACnB,GAAGH,EAAS;AAAA;AAAA,YAEZ,GAAG7hB;AAAA,UAC3B,CAAqB;AAAA,MAET;AACA,aAAO,EAAE,WAAW,CAAC,GAAG+hB,GAAW,GAAGC,CAAiB,EAAC;AAAA,IAC5D,CAAC,GACD,KAAK,OAAO,kBAAkBt7C,IAAoC,aAMvD,EAAE,mBALiB,OAAO,QAAQ,KAAK,4BAA4B,EAAE,IAAI,CAAC,CAACv5C,GAAM00F,CAAQ,OAAO;AAAA,MACnG,MAAA10F;AAAA,MACA,aAAa00F,EAAS,iBAAiB,YAAY,SAAQ;AAAA,MAC3D,GAAGA,EAAS;AAAA,IAC5B,EAAc,EACwB,EAC7B,GACD,KAAK,OAAO,kBAAkBj7C,IAA2B,OAAOpf,GAASlsB,MAAU;AAC/E,YAAM47C,IAAM,IAAI,IAAI1vB,EAAQ,OAAO,GAAG,GAEhCw4C,IAAW,KAAK,qBAAqB9oB,EAAI,SAAQ,CAAE;AACzD,UAAI8oB,GAAU;AACV,YAAI,CAACA,EAAS;AACV,gBAAM,IAAI91B,GAASvF,GAAU,eAAe,YAAYuS,CAAG,WAAW;AAE1E,eAAO8oB,EAAS,aAAa9oB,GAAK57C,CAAK;AAAA,MAC3C;AAEA,iBAAWumF,KAAY,OAAO,OAAO,KAAK,4BAA4B,GAAG;AACrE,cAAMI,IAAYJ,EAAS,iBAAiB,YAAY,MAAM3qC,EAAI,UAAU;AAC5E,YAAI+qC;AACA,iBAAOJ,EAAS,aAAa3qC,GAAK+qC,GAAW3mF,CAAK;AAAA,MAE1D;AACA,YAAM,IAAI4uC,GAASvF,GAAU,eAAe,YAAYuS,CAAG,YAAY;AAAA,IAC3E,CAAC,GACD,KAAK,4BAA2B,GAChC,KAAK,+BAA+B;AAAA,EACxC;AAAA,EACA,2BAA2B;AACvB,IAAI,KAAK,+BAGT,KAAK,OAAO,2BAA2B9P,GAAyB,MAAM,OAAO,KAAK,GAClF,KAAK,OAAO,2BAA2BE,GAAuB,MAAM,OAAO,KAAK,GAChF,KAAK,OAAO,qBAAqB;AAAA,MAC7B,SAAS;AAAA,QACL,aAAa;AAAA,MAC7B;AAAA,IACA,CAAS,GACD,KAAK,OAAO,kBAAkBF,IAA0B,OAAO;AAAA,MAC3D,SAAS,OAAO,QAAQ,KAAK,kBAAkB,EAAE,OAAO,CAAC,CAAA,EAAGq6C,CAAM,MAAMA,EAAO,OAAO,EAAE,IAAI,CAAC,CAACt0F,GAAMs0F,CAAM,OAC/F;AAAA,QACH,MAAAt0F;AAAA,QACA,OAAOs0F,EAAO;AAAA,QACd,aAAaA,EAAO;AAAA,QACpB,WAAWA,EAAO,aACZS,GAA0BT,EAAO,UAAU,IAC3C;AAAA,MAC1B,EACa;AAAA,IACb,EAAU,GACF,KAAK,OAAO,kBAAkBn6C,IAAwB,OAAO9f,GAASlsB,MAAU;AAC5E,YAAMmmF,IAAS,KAAK,mBAAmBj6D,EAAQ,OAAO,IAAI;AAC1D,UAAI,CAACi6D;AACD,cAAM,IAAIv3C,GAASvF,GAAU,eAAe,UAAUnd,EAAQ,OAAO,IAAI,YAAY;AAEzF,UAAI,CAACi6D,EAAO;AACR,cAAM,IAAIv3C,GAASvF,GAAU,eAAe,UAAUnd,EAAQ,OAAO,IAAI,WAAW;AAExF,UAAIi6D,EAAO,YAAY;AACnB,cAAMD,IAAc,MAAMC,EAAO,WAAW,eAAej6D,EAAQ,OAAO,SAAS;AACnF,YAAI,CAACg6D,EAAY;AACb,gBAAM,IAAIt3C,GAASvF,GAAU,eAAe,gCAAgCnd,EAAQ,OAAO,IAAI,KAAKg6D,EAAY,MAAM,OAAO,EAAE;AAEnI,cAAMp9F,IAAOo9F,EAAY,MACnBlkC,IAAKmkC,EAAO;AAClB,eAAO,MAAM,QAAQ,QAAQnkC,EAAGl5D,GAAMkX,CAAK,CAAC;AAAA,MAChD,OACK;AACD,cAAMgiD,IAAKmkC,EAAO;AAClB,eAAO,MAAM,QAAQ,QAAQnkC,EAAGhiD,CAAK,CAAC;AAAA,MAC1C;AAAA,IACJ,CAAC,GACD,KAAK,4BAA2B,GAChC,KAAK,6BAA6B;AAAA,EACtC;AAAA,EACA,SAASnO,GAAMg1F,MAAkBhiD,GAAM;AACnC,QAAI+/B;AACJ,IAAI,OAAO//B,EAAK,CAAC,KAAM,aACnB+/B,IAAW//B,EAAK,MAAK;AAEzB,UAAMiiD,IAAejiD,EAAK,CAAC;AAC3B,QAAI,OAAOgiD,KAAkB,UAAU;AACnC,UAAI,KAAK,qBAAqBA,CAAa;AACvC,cAAM,IAAI,MAAM,YAAYA,CAAa,wBAAwB;AAErE,YAAME,IAAqB,KAAK,0BAA0Bl1F,GAAM,QAAWg1F,GAAejiB,GAAUkiB,CAAY;AAChH,kBAAK,2BAA0B,GAC/B,KAAK,wBAAuB,GACrBC;AAAA,IACX,OACK;AACD,UAAI,KAAK,6BAA6Bl1F,CAAI;AACtC,cAAM,IAAI,MAAM,qBAAqBA,CAAI,wBAAwB;AAErE,YAAMm1F,IAA6B,KAAK,kCAAkCn1F,GAAM,QAAWg1F,GAAejiB,GAAUkiB,CAAY;AAChI,kBAAK,2BAA0B,GAC/B,KAAK,wBAAuB,GACrBE;AAAA,IACX;AAAA,EACJ;AAAA,EACA,iBAAiBn1F,GAAMg1F,GAAejiE,GAAQkiE,GAAc;AACxD,QAAI,OAAOD,KAAkB,UAAU;AACnC,UAAI,KAAK,qBAAqBA,CAAa;AACvC,cAAM,IAAI,MAAM,YAAYA,CAAa,wBAAwB;AAErE,YAAME,IAAqB,KAAK,0BAA0Bl1F,GAAM+yB,EAAO,OAAOiiE,GAAejiE,GAAQkiE,CAAY;AACjH,kBAAK,2BAA0B,GAC/B,KAAK,wBAAuB,GACrBC;AAAA,IACX,OACK;AACD,UAAI,KAAK,6BAA6Bl1F,CAAI;AACtC,cAAM,IAAI,MAAM,qBAAqBA,CAAI,wBAAwB;AAErE,YAAMm1F,IAA6B,KAAK,kCAAkCn1F,GAAM+yB,EAAO,OAAOiiE,GAAejiE,GAAQkiE,CAAY;AACjI,kBAAK,2BAA0B,GAC/B,KAAK,wBAAuB,GACrBE;AAAA,IACX;AAAA,EACJ;AAAA,EACA,0BAA0Bn1F,GAAMqc,GAAO0tC,GAAKgpB,GAAUkiB,GAAc;AAChE,UAAMC,IAAqB;AAAA,MACvB,MAAAl1F;AAAA,MACA,OAAAqc;AAAA,MACA,UAAA02D;AAAA,MACA,cAAAkiB;AAAA,MACA,SAAS;AAAA,MACT,SAAS,MAAMC,EAAmB,OAAO,EAAE,SAAS,GAAK,CAAE;AAAA,MAC3D,QAAQ,MAAMA,EAAmB,OAAO,EAAE,SAAS,GAAI,CAAE;AAAA,MACzD,QAAQ,MAAMA,EAAmB,OAAO,EAAE,KAAK,KAAI,CAAE;AAAA,MACrD,QAAQ,CAACE,MAAY;AACjB,QAAI,OAAOA,EAAQ,MAAQ,OAAeA,EAAQ,QAAQrrC,MACtD,OAAO,KAAK,qBAAqBA,CAAG,GAChCqrC,EAAQ,QACR,KAAK,qBAAqBA,EAAQ,GAAG,IAAIF,KAE7C,OAAOE,EAAQ,OAAS,QACxBF,EAAmB,OAAOE,EAAQ,OAClC,OAAOA,EAAQ,QAAU,QACzBF,EAAmB,QAAQE,EAAQ,QACnC,OAAOA,EAAQ,WAAa,QAC5BF,EAAmB,WAAWE,EAAQ,WACtC,OAAOA,EAAQ,WAAa,QAC5BF,EAAmB,eAAeE,EAAQ,WAC1C,OAAOA,EAAQ,UAAY,QAC3BF,EAAmB,UAAUE,EAAQ,UACzC,KAAK,wBAAuB;AAAA,MAChC;AAAA,IACZ;AACQ,gBAAK,qBAAqBrrC,CAAG,IAAImrC,GAC1BA;AAAA,EACX;AAAA,EACA,kCAAkCl1F,GAAMqc,GAAOq4E,GAAU3hB,GAAUkiB,GAAc;AAC7E,UAAME,IAA6B;AAAA,MAC/B,kBAAkBT;AAAA,MAClB,OAAAr4E;AAAA,MACA,UAAA02D;AAAA,MACA,cAAAkiB;AAAA,MACA,SAAS;AAAA,MACT,SAAS,MAAME,EAA2B,OAAO,EAAE,SAAS,GAAK,CAAE;AAAA,MACnE,QAAQ,MAAMA,EAA2B,OAAO,EAAE,SAAS,GAAI,CAAE;AAAA,MACjE,QAAQ,MAAMA,EAA2B,OAAO,EAAE,MAAM,KAAI,CAAE;AAAA,MAC9D,QAAQ,CAACC,MAAY;AACjB,QAAI,OAAOA,EAAQ,OAAS,OAAeA,EAAQ,SAASp1F,MACxD,OAAO,KAAK,6BAA6BA,CAAI,GACzCo1F,EAAQ,SACR,KAAK,6BAA6BA,EAAQ,IAAI,IAAID,KAEtD,OAAOC,EAAQ,QAAU,QACzBD,EAA2B,QAAQC,EAAQ,QAC3C,OAAOA,EAAQ,WAAa,QAC5BD,EAA2B,mBAAmBC,EAAQ,WACtD,OAAOA,EAAQ,WAAa,QAC5BD,EAA2B,WAAWC,EAAQ,WAC9C,OAAOA,EAAQ,WAAa,QAC5BD,EAA2B,eAAeC,EAAQ,WAClD,OAAOA,EAAQ,UAAY,QAC3BD,EAA2B,UAAUC,EAAQ,UACjD,KAAK,wBAAuB;AAAA,MAChC;AAAA,IACZ;AACQ,gBAAK,6BAA6Bp1F,CAAI,IAAIm1F,GACnCA;AAAA,EACX;AAAA,EACA,wBAAwBn1F,GAAMqc,GAAOsuB,GAAa0qD,GAAYlxF,GAAU;AACpE,UAAMmxF,IAAmB;AAAA,MACrB,OAAAj5E;AAAA,MACA,aAAAsuB;AAAA,MACA,YAAY0qD,MAAe,SAAY,SAAYz+C,EAASy+C,CAAU;AAAA,MACtE,UAAAlxF;AAAA,MACA,SAAS;AAAA,MACT,SAAS,MAAMmxF,EAAiB,OAAO,EAAE,SAAS,GAAK,CAAE;AAAA,MACzD,QAAQ,MAAMA,EAAiB,OAAO,EAAE,SAAS,GAAI,CAAE;AAAA,MACvD,QAAQ,MAAMA,EAAiB,OAAO,EAAE,MAAM,KAAI,CAAE;AAAA,MACpD,QAAQ,CAACF,MAAY;AACjB,QAAI,OAAOA,EAAQ,OAAS,OAAeA,EAAQ,SAASp1F,MACxD,OAAO,KAAK,mBAAmBA,CAAI,GAC/Bo1F,EAAQ,SACR,KAAK,mBAAmBA,EAAQ,IAAI,IAAIE,KAE5C,OAAOF,EAAQ,QAAU,QACzBE,EAAiB,QAAQF,EAAQ,QACjC,OAAOA,EAAQ,cAAgB,QAC/BE,EAAiB,cAAcF,EAAQ,cACvC,OAAOA,EAAQ,aAAe,QAC9BE,EAAiB,aAAa1+C,EAASw+C,EAAQ,UAAU,IACzD,OAAOA,EAAQ,WAAa,QAC5BE,EAAiB,WAAWF,EAAQ,WACpC,OAAOA,EAAQ,UAAY,QAC3BE,EAAiB,UAAUF,EAAQ,UACvC,KAAK,sBAAqB;AAAA,MAC9B;AAAA,IACZ;AACQ,gBAAK,mBAAmBp1F,CAAI,IAAIs1F,GACzBA;AAAA,EACX;AAAA,EACA,sBAAsBt1F,GAAMqc,GAAOsuB,GAAa4qD,GAAaC,GAAcC,GAAatxF,GAAU;AAC9F,UAAMuxF,IAAiB;AAAA,MACnB,OAAAr5E;AAAA,MACA,aAAAsuB;AAAA,MACA,aAAa4qD,MAAgB,SAAY,SAAY3+C,EAAS2+C,CAAW;AAAA,MACzE,cAAcC,MAAiB,SAAY,SAAY5+C,EAAS4+C,CAAY;AAAA,MAC5E,aAAAC;AAAA,MACA,UAAAtxF;AAAA,MACA,SAAS;AAAA,MACT,SAAS,MAAMuxF,EAAe,OAAO,EAAE,SAAS,GAAK,CAAE;AAAA,MACvD,QAAQ,MAAMA,EAAe,OAAO,EAAE,SAAS,GAAI,CAAE;AAAA,MACrD,QAAQ,MAAMA,EAAe,OAAO,EAAE,MAAM,KAAI,CAAE;AAAA,MAClD,QAAQ,CAACN,MAAY;AACjB,QAAI,OAAOA,EAAQ,OAAS,OAAeA,EAAQ,SAASp1F,MACxD,OAAO,KAAK,iBAAiBA,CAAI,GAC7Bo1F,EAAQ,SACR,KAAK,iBAAiBA,EAAQ,IAAI,IAAIM,KAE1C,OAAON,EAAQ,QAAU,QACzBM,EAAe,QAAQN,EAAQ,QAC/B,OAAOA,EAAQ,cAAgB,QAC/BM,EAAe,cAAcN,EAAQ,cACrC,OAAOA,EAAQ,eAAiB,QAChCM,EAAe,cAAc9+C,EAASw+C,EAAQ,YAAY,IAC1D,OAAOA,EAAQ,WAAa,QAC5BM,EAAe,WAAWN,EAAQ,WAClC,OAAOA,EAAQ,cAAgB,QAC/BM,EAAe,cAAcN,EAAQ,cACrC,OAAOA,EAAQ,UAAY,QAC3BM,EAAe,UAAUN,EAAQ,UACrC,KAAK,oBAAmB;AAAA,MAC5B;AAAA,IACZ;AACQ,gBAAK,iBAAiBp1F,CAAI,IAAI01F,GAC9B,KAAK,uBAAsB,GAC3B,KAAK,oBAAmB,GACjBA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,KAAK11F,MAASgzC,GAAM;AAChB,QAAI,KAAK,iBAAiBhzC,CAAI;AAC1B,YAAM,IAAI,MAAM,QAAQA,CAAI,wBAAwB;AAExD,QAAI2qC,GACA4qD,GACAC,GACAC;AAQJ,QAJI,OAAOziD,EAAK,CAAC,KAAM,aACnBrI,IAAcqI,EAAK,MAAK,IAGxBA,EAAK,SAAS,GAAG;AAEjB,YAAM2iD,IAAW3iD,EAAK,CAAC;AACvB,MAAI4iD,GAAcD,CAAQ,KAEtBJ,IAAcviD,EAAK,MAAK,GAEpBA,EAAK,SAAS,KAAK,OAAOA,EAAK,CAAC,KAAM,YAAYA,EAAK,CAAC,MAAM,QAAQ,CAAE4iD,GAAc5iD,EAAK,CAAC,CAAC,MAG7FyiD,IAAcziD,EAAK,MAAK,MAGvB,OAAO2iD,KAAa,YAAYA,MAAa,SAIlDF,IAAcziD,EAAK,MAAK;AAAA,IAEhC;AACA,UAAM7uC,IAAW6uC,EAAK,CAAC;AACvB,WAAO,KAAK,sBAAsBhzC,GAAM,QAAW2qC,GAAa4qD,GAAaC,GAAcC,GAAatxF,CAAQ;AAAA,EACpH;AAAA;AAAA;AAAA;AAAA,EAIA,aAAanE,GAAM+yB,GAAQo9B,GAAI;AAC3B,QAAI,KAAK,iBAAiBnwD,CAAI;AAC1B,YAAM,IAAI,MAAM,QAAQA,CAAI,wBAAwB;AAExD,UAAM,EAAE,OAAAqc,GAAO,aAAAsuB,GAAa,aAAA4qD,GAAa,cAAAC,GAAc,aAAAC,EAAW,IAAK1iE;AACvE,WAAO,KAAK,sBAAsB/yB,GAAMqc,GAAOsuB,GAAa4qD,GAAaC,GAAcC,GAAatlC,CAAE;AAAA,EAC1G;AAAA,EACA,OAAOnwD,MAASgzC,GAAM;AAClB,QAAI,KAAK,mBAAmBhzC,CAAI;AAC5B,YAAM,IAAI,MAAM,UAAUA,CAAI,wBAAwB;AAE1D,QAAI2qC;AACJ,IAAI,OAAOqI,EAAK,CAAC,KAAM,aACnBrI,IAAcqI,EAAK,MAAK;AAE5B,QAAIqiD;AACJ,IAAIriD,EAAK,SAAS,MACdqiD,IAAariD,EAAK,MAAK;AAE3B,UAAMmd,IAAKnd,EAAK,CAAC,GACXsiD,IAAmB,KAAK,wBAAwBt1F,GAAM,QAAW2qC,GAAa0qD,GAAYllC,CAAE;AAClG,gBAAK,yBAAwB,GAC7B,KAAK,sBAAqB,GACnBmlC;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,eAAet1F,GAAM+yB,GAAQo9B,GAAI;AAC7B,QAAI,KAAK,mBAAmBnwD,CAAI;AAC5B,YAAM,IAAI,MAAM,UAAUA,CAAI,wBAAwB;AAE1D,UAAM,EAAE,OAAAqc,GAAO,aAAAsuB,GAAa,YAAA0qD,EAAU,IAAKtiE,GACrCuiE,IAAmB,KAAK,wBAAwBt1F,GAAMqc,GAAOsuB,GAAa0qD,GAAYllC,CAAE;AAC9F,gBAAK,yBAAwB,GAC7B,KAAK,sBAAqB,GACnBmlC;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc;AACV,WAAO,KAAK,OAAO,cAAc;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA,EAIA,0BAA0B;AACtB,IAAI,KAAK,iBACL,KAAK,OAAO,wBAAuB;AAAA,EAE3C;AAAA;AAAA;AAAA;AAAA,EAIA,sBAAsB;AAClB,IAAI,KAAK,iBACL,KAAK,OAAO,oBAAmB;AAAA,EAEvC;AAAA;AAAA;AAAA;AAAA,EAIA,wBAAwB;AACpB,IAAI,KAAK,iBACL,KAAK,OAAO,sBAAqB;AAAA,EAEzC;AACJ;AAiCA,MAAMlB,KAA2B;AAAA,EAC7B,MAAM;AAAA,EACN,YAAY,CAAA;AAChB;AAEA,SAASwB,GAAc35F,GAAK;AACxB,SAAI,OAAOA,KAAQ,YAAYA,MAAQ,OAC5B,KACW,OAAO,KAAKA,CAAG,EAAE,WAAW,KAG1B,OAAO,OAAOA,CAAG,EAAE,KAAK45F,EAAa;AACjE;AACA,SAASA,GAAc/nG,GAAO;AAC1B,SAAOA,MAAU,QACb,OAAOA,KAAU,YACjB,WAAWA,KAAS,OAAOA,EAAM,SAAU,cAC3C,eAAeA,KAAS,OAAOA,EAAM,aAAc;AAC3D;AACA,SAASinG,GAA0BliG,GAAQ;AACvC,SAAO,OAAO,QAAQA,EAAO,KAAK,EAAE,IAAI,CAAC,CAACmN,GAAM61B,CAAK,OAAO;AAAA,IACxD,MAAA71B;AAAA,IACA,aAAa61B,EAAM;AAAA,IACnB,UAAU,CAACA,EAAM,WAAU;AAAA,EACnC,EAAM;AACN;AACA,SAAS4+D,GAAuBD,GAAa;AACzC,SAAO;AAAA,IACH,YAAY;AAAA,MACR,QAAQA,EAAY,MAAM,GAAG,GAAG;AAAA,MAChC,OAAOA,EAAY;AAAA,MACnB,SAASA,EAAY,SAAS;AAAA,IAC1C;AAAA,EACA;AACA;AACA,MAAMD,KAA0B;AAAA,EAC5B,YAAY;AAAA,IACR,QAAQ,CAAA;AAAA,IACR,SAAS;AAAA,EACjB;AACA,GChpBMrsB,KAAS,SAaF4tB,KAAc,CAAC3nG,MACnBA,EAAM,SAAS,IAAI,CAAC4nG,MAAa;AACtC,QAAMC,IAAe7nG,EAAM,gBAAgB,IAAI4nG,EAAS,IAAI;AAE5D,SAAO;AAAA,IACL,GAAGA;AAAA,IACH,QAAQC,IAAgBA,EAAa,UAAU,YAAY,aAAc;AAAA,EAAA;AAE7E,CAAC,GAGUC,KAAgB,CAAC9nG,GAAe6R,MAAiB;AAC5D,QAAM+1F,IAAW5nG,EAAM,SAAS,KAAK,CAACu6E,MAASA,EAAK,SAAS1oE,CAAI;AAEjE,MAAI,CAAC+1F;AACH,WAAO;AAGT,QAAMC,IAAe7nG,EAAM,gBAAgB,IAAI6R,CAAI;AAEnD,SAAO,EAAE,GAAG+1F,GAAU,QAAQC,IAAgBA,EAAa,UAAU,YAAY,aAAc,iBAAA;AACjG,GAMaE,KAAgB,CAAC/nG,GAAes6E,MAAsB;AACjE,MAAI,CAAC,MAAM,QAAQA,CAAK,KAAK,CAACA,EAAM;AAClC;AAGF,MAAI,CAACt6E,EAAM,QAAQ;AACjB+5E,IAAAA,GAAO,MAAM,2BAA2B;AACxC;AAAA,EACF;AAcA,SAZsBO,EAAM,IAAI,CAACC,MAAS;;AACxC,UAAM,EAAE,MAAA1oE,GAAM,UAAAmE,GAAU,GAAGgyF,MAAeztB,GAEpCstB,KAAevpG,IAAA0B,EAAM,WAAN,gBAAA1B,EAAc,aAAauT,GAAMm2F,GAAYhyF;AAElE,WAAI6xF,KACF7nG,EAAM,gBAAgB,IAAI6R,GAAMg2F,CAAY,GAGvCA;AAAA,EACT,CAAC;AAGH,GAkBaI,KAAa,CAACjoG,GAAe6R,MAAiB;AACzD,QAAMg2F,IAAe7nG,EAAM,gBAAgB,IAAI6R,CAAI;AAEnD,EAAIg2F,MACFA,EAAa,OAAA,GACb7nG,EAAM,gBAAgB,OAAO6R,CAAI;AAErC,GAEaq2F,KAAa,CAACloG,GAAe6R,GAAc+yB,MAA8B;AACpF,QAAMijE,IAAe7nG,EAAM,gBAAgB,IAAI6R,CAAI;AAEnD,EAAIg2F,KACFA,EAAa,OAAO,EAAE,MAAAh2F,GAAM,GAAI+yB,KAAU,CAAA,GAAK;AAEnD,GC3FMm1C,KAAS,SAeTI,KAAe;AAAA,EACnB,SAAS,EAAE,aAAa,GAAA;AAAA,EACxB,WAAW,EAAE,WAAW,IAAM,aAAa,GAAA;AAAA,EAC3C,OAAO,EAAE,aAAa,GAAA;AAAA,EACtB,aAAa,CAAA;AAAA,EACb,SAAS,CAAA;AACX,GAEMtzC,KAAuB;AAAA,EAC3B,WAAW;AAAA,IACT,WAAW;AAAA,IACX,cAAAszC;AAAA,EAAA;AAAA,EAEF,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,iBAAiB;AAAA,EACjB,UAAU,CAAA;AAAA,EACV,qCAAqB,IAAA;AAAA,EACrB,WAAW;AAAA,EACX,wBAAwB;AAC1B,GAEMguB,KAA+B,CAACnoG,GAAeg2B,GAAgCxwB,MAAkB;AACrG,EAAAxF,EAAM,yBAAyBg2B;AAE/B,QAAM,EAAE,SAAAqR,EAAA,IAAYC,GAAA;AACpB,EAAAD,EAAQ,EAAE,OAAO,iCAAiC,MAAM,EAAE,QAAArR,GAAQ,OAAAxwB,EAAA,GAAS;AAC7E,GAGM4iG,KAAiB,OAAOpoG,MAAkB;AAC9C,MAAKA,EAAM,mBAIP,EAAC,gBAAgB,eAAe,EAAE,SAASA,EAAM,sBAAsB;AAI3E,QAAI;AACF,MAAAmoG,GAA6BnoG,GAAO,eAAe,GACnD,MAAMA,EAAM,gBAAgB,iBAAA,GAC5BmoG,GAA6BnoG,GAAO,cAAc;AAAA,IACpD,SAASwF,GAAO;AACd,MAAA2iG,GAA6BnoG,GAAO,SAASwF,CAAc;AAAA,IAC7D;AACF,GAEM6iG,KAAwB,OAAOroG,GAAeuU,GAAmB+zF,GAAgBC,IAAmB,MAAM;AAC9G,QAAM;AAAA,IACJ,mBAAAC,IAAoB;AAAA,IACpB,mBAAAC,IAAoB;AAAA,IACpB,KAAA7gE,IAAM;AAAA,IACN,OAAAqF,IAAQ;AAAA,IACR,sBAAAy7D,IAAuB;AAAA,EAAA,IACrBn0F,EAAQ,eAAe,CAAA;AAE3B,MAAI,CAAC,aAAa,YAAY,EAAE,SAASvU,EAAM,sBAAsB,KAAK,CAAC0oG;AACzE;AAGF,MAAI,CAAC9gE;AACH,UAAM,IAAI,MAAM,8BAA8B;AAGhD,QAAM+gE,IAAc,MAAMP,GAAepoG,CAAK;AAE9C,MAAI;AACF,WAAO,oBAAoB,gBAAgB2oG,CAAW,GACtDR,GAA6BnoG,GAAO,YAAY;AAChD,UAAM4oG,IAAgB,eAAe,QAAQ,gBAAgB,KAAK,IAG5D,EAAE,WAAWC,GAAiB,WAAArgB,EAAA,IAAc,MAAM8U,GAAkB;AAAA,MACxE,QAAAgL;AAAA,MACA,KAAA1gE;AAAA,MACA,OAAOqF,KAAS;AAAA,MAChB,WAAW27D;AAAA,IAAA,CACZ;AAED,IAAAT,GAA6BnoG,GAAO,WAAW,GAE/C,eAAe,QAAQ,kBAAkBwoF,CAAS,GAElDxoF,EAAM,YAAYwoF,GAClBxoF,EAAM,kBAAkB6oG,GACxB,OAAO,iBAAiB,gBAAgBF,CAAW;AAAA,EACrD,SAASnjG,GAAO;AACd,IAAI+iG,IAAWC,KACb,MAAM,IAAI,QAAQ,CAACz4D,MAAY,WAAWA,GAAS04D,CAAiB,CAAC,GACrE,MAAMJ,GAAsBroG,GAAOuU,GAAS+zF,GAAQC,IAAW,CAAC,KAEhEJ,GAA6BnoG,GAAO,SAASwF,CAAc;AAAA,EAE/D;AACF,GAEMsjG,KAA0B,OAAO9oG,GAAeuU,MAAsB;AAC1E,QAAM6zF,GAAepoG,CAAK,GAC1B,MAAMqoG,GAAsBroG,GAAOuU,GAASvU,EAAM,SAAmB;AACvE,GAEM+oG,KAA8B,OAAO/oG,GAAeuU,MAAsB;AAE9E,QAAM,CAACk7C,GAAWu5C,CAAe,IAAIvb,GAAA;AAErC,EAAAztF,EAAM,UAAU,YAAYyvD;AAE5B,QAAM0qB,IAAe;AAAA,IACnB,OAAO,EAAE,aAAa,GAAA;AAAA,IACtB,UAAU,CAAA;AAAA,EAAC,GAEPmuB,IAAS,IAAIruB,GAAO,EAAE,MAAM,0BAA0B,SAAS,QAAA,GAAW,EAAE,cAAAE,EAAAA,CAAc;AAEhG,QAAMmuB,EAAO,QAAQU,CAAe,GAEpChpG,EAAM,YAAYsoG,GAElB,MAAMD,GAAsBroG,GAAOuU,GAAS+zF,CAAM;AACpD,GAEMW,KAAkB,OAAOjpG,MAAkB;AAC/C,QAAM,EAAE,WAAAyvD,GAAW,cAAA0qB,EAAAA,IAAiBn6E,EAAM;AAE1C,MAAI,CAACyvD;AACH,UAAM,IAAI,MAAM,4BAA4B;AAG9C,QAAMy5C,IAAS,IAAIpD;AAAA,IACjB;AAAA,MACE,MAAM;AAAA,MACN,SAAS;AAAA,IAAA;AAAA,IAEX;AAAA,MACE,cAAA3rB;AAAAA,IAAA;AAAA,EACF;AAKF,EAAAn6E,EAAM,SAAS,QAAQ,CAACu6E,MAAS;AAC/B,UAAM,EAAE,MAAA1oE,GAAM,UAAAmE,GAAU,aAAAoxF,GAAa,cAAAC,GAAc,GAAGW,MAAeztB;AAErE,QAAI;AACF,UAAIv6E,EAAM,gBAAgB,IAAI6R,CAAI,GAAG;AACnC,QAAAkoE,GAAO,MAAM,QAAQloE,CAAI,qBAAqB;AAC9C;AAAA,MACF;AAEA,UAAI,CAACA,KAAQ,OAAOA,KAAS,UAAU;AACrC,QAAAkoE,GAAO,MAAM,4CAA4C;AACzD;AAAA,MACF;AAEA,UAAI,CAAC/jE,KAAY,OAAOA,KAAa,YAAY;AAC/C,QAAA+jE,GAAO,MAAM,kDAAkD;AAC/D;AAAA,MACF;AAEA,YAAM8tB,IAAeqB,EAAO;AAAA,QAC1Br3F;AAAA;AAAA,QAEA;AAAA,UACE,GAAG,KAAK,MAAM,KAAK,UAAUm2F,CAAU,CAAC;AAAA,UACxC,aAAAZ;AAAA,UACA,cAAAC;AAAA,QAAA;AAAA,QAEFrxF;AAAA,MAAA;AAGF,MAAAhW,EAAM,gBAAgB,IAAI6R,GAAMg2F,CAAY;AAAA,IAC9C,SAASriG,GAAO;AACd,MAAAu0E,GAAO,MAAM,4BAA4Bv0E,CAAK;AAAA,IAChD;AAAA,EACF,CAAC,GAED,MAAM0jG,EAAO,QAAQC,GAAM15C,CAAS,CAAC,GAErCzvD,EAAM,SAASkpG;AAEf,QAAM,EAAE,SAAA7hE,EAAA,IAAYC,GAAA;AAEpB,EAAAD,EAAQ,EAAE,OAAO,oBAAoB,MAAM6hE,GAAQ;AACrD,GAEME,KAAe,CAACppG,MAAkB;AACtC,QAAMqpG,IAAcC,GAAA,GACdhvB,IAAoB,CAAA;AAE1B,EAAA+uB,EAAY,QAAQ,CAACn0B,MAAS;;AAC5B,IAAI,MAAM,SAAQ52E,IAAA42E,EAAK,QAAL,gBAAA52E,EAAU,KAAK,KAC/Bg8E,EAAM,KAAK,GAAGpF,EAAK,IAAI,KAAK;AAAA,EAEhC,CAAC,GAEDl1E,EAAM,WAAWs6E;AACnB,GAGA98E,KAAe6qC,GAAgC;AAAA,EAC7C,IAAItB,GAAa;AAAA,EACjB,MAAM;AAAA,EACN,SAAS;AAAA,IACP,aAAa;AAAA,MACX,KAAK;AAAA,MACL,OAAO;AAAA,MACP,sBAAsB;AAAA,IAAA;AAAA,EACxB;AAAA,EAEF,cAAAF;AAAA,EACA,MAAM,OAAO,EAAE,OAAA7mC,GAAO,SAAAuU,QAAc;AAClC,UAAMw0F,GAA4B/oG,GAAOuU,CAAO,GAGhD60F,GAAappG,CAAK,GAMlB,MAAMipG,GAAgBjpG,CAAK;AAAA,EAC7B;AAAA,EACA,MAAM,CAAC,EAAE,OAAAA,GAAO,SAAAuU,SAAe;AAAA,IAC7B,cAAc,MAAMvU,EAAM;AAAA,IAC1B,cAAc,MAAMA,EAAM;AAAA,IAC1B,oBAAoB,MAAMA,EAAM;AAAA,IAChC,uBAAuB,MAAMqoG,GAAsBroG,GAAOuU,GAASvU,EAAM,SAAmB;AAAA,IAC5F,yBAAyB,MAAM8oG,GAAwB9oG,GAAOuU,CAAO;AAAA,IACrE,mBAAmB,MAAM6zF,GAAepoG,CAAK;AAAA,IAC7C,2BAA2B,MAAMA,EAAM;AAAA,IACvC,gBAAgB,MAAMooG,GAAepoG,CAAK;AAAA,IAC1C,eAAe,CAACs6E,MAAsBytB,GAAc/nG,GAAOs6E,CAAK;AAAA,IAChE,aAAa,MAAMqtB,GAAY3nG,CAAK;AAAA,IACpC,eAAe,CAAC6R,MAAiBi2F,GAAc9nG,GAAO6R,CAAI;AAAA,IAC1D,YAAY,CAACA,MAAiBo2F,GAAWjoG,GAAO6R,CAAI;AAAA,IACpD,YAAY,CAACA,GAAc+yB,MAA8BsjE,GAAWloG,GAAO6R,GAAM+yB,CAAM;AAAA,EAAA;AAE3F,CAAC;","x_google_ignoreList":[16,31,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200]}