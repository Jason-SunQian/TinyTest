import "./style.css";
import "./js/i18n.js";
import { i18nKeyMaps as Ri, SCHEMA_DATA_TYPE as Fo, PAGE_STATUS as zo, TYPES as Mr, PROP_DATA_TYPE as Uo } from "./js/constants.js";
import hn from "@opentiny/tiny-engine-i18n-host";
import { resolveComponent as E, createElementBlock as b, openBlock as m, createVNode as _, withCtx as C, renderSlot as O, createTextVNode as $, reactive as me, createElementVNode as v, toDisplayString as B, Fragment as ee, renderList as we, createBlock as N, resolveDynamicComponent as Ve, mergeProps as _t, computed as L, ref as q, inject as ct, provide as sn, watch as Le, createCommentVNode as A, normalizeClass as Z, normalizeStyle as Et, withDirectives as qe, vShow as dt, watchEffect as We, nextTick as Rt, onMounted as gn, onBeforeUnmount as Co, createSlots as Lr, defineComponent as vn, h as ln, Teleport as Br, withModifiers as Ne, onActivated as Nr, onDeactivated as Rr, unref as $e, useCssVars as Vr, vModelText as jo, normalizeProps as Fr, guardReactiveProps as zr, render as Ur } from "vue";
import { CollapseItem as Vi, Collapse as Fi, RadioGroup as jr, Radio as $r, Popover as Ue, Tooltip as nt, Button as je, TinyTooltip as qr, Input as ut, FormItem as yn, Form as _n, DialogBox as bn, Split as Hr, Grid as Jr, GridColumn as qt, Checkbox as cn, Search as Wr, Option as Yr, Select as Xr, Modal as wo, Notify as Gr } from "@opentiny/vue";
import { IconHelpCircle as Kr, IconPlusCircle as Qr, IconWriting as Zr, iconPlus as ea, iconClose as zi, iconMore as ta, iconEdit as na, iconDel as oa, iconYes as ia, iconInfo as ra, IconClose as aa } from "@opentiny/vue-icon";
import { typeOf as sa } from "@opentiny/vue-renderless/common/type";
import { getConfigurator as Pt, useProperties as Ht, useMaterial as la, useCanvas as He, useLayout as ot, useHistory as Kt, useResource as ca, useModal as Cn, useBlock as wn, usePage as da, getMergeMeta as Jt, useNotify as Ui, useTranslate as ro, getMetaApi as bt, META_APP as $o, useMessage as ua, defineService as ji, META_SERVICE as Vt } from "@opentiny/tiny-engine-meta-register";
import { utils as So, constants as Sn } from "@opentiny/tiny-engine-utils";
import { SvgButton as fa } from "@opentiny/tiny-engine-common";
import { isObject as pa } from "@opentiny/vue-renderless/grid/static";
import * as On from "monaco-editor";
import { formatString as ao } from "./js/ast.js";
import "@babel/parser";
import "@babel/generator";
import "@babel/traverse";
import "prettier";
import "prettier/parser-html";
import "prettier/parser-postcss";
import "prettier/parser-babel";
import { format as $i } from "@opentiny/vue-renderless/common/date";
import { extend as so } from "@opentiny/vue-renderless/common/object";
import { initCompletion as ma } from "./js/completion.js";
import { lint as ha, initLinter as ga } from "./js/linter.js";
import { parseRequiredBlocks as qi, generateApp as va, genSFCWithDefaultPlugin as ya } from "@opentiny/tiny-engine-dsl-vue";
import _a from "./js/config-files/prettierrc.js";
import { g as ba } from "./_commonjsHelpers-C6fGbg64.js";
import { u as qo } from "./index-CeNzXk8O.js";
const Ca = {
  required: "Mandatory",
  addParameter: "Add",
  deleteParameter: "Delete Parameter",
  selectParameter: "Select Input Parameter",
  parameterName: "Name",
  nameFormat: "Start with a letter and enter only letters, digits, underscores (_), and hyphens (-). Max. characters: 32.",
  description: "Description",
  parameterGroup: "Parameter Group",
  parameterType: "Data Type",
  initialValue: "Initial Value",
  allowEmpty: "Null Allowance",
  condition: "Constraint",
  constraintError: "If either Constraint or Error Message is specified, the other is mandatory.",
  errorTip: "Error Message",
  inputValue: "Enter a value.",
  inputConstraint: "Enter a constraint.",
  inputMessage: "Enter an error message.",
  inputParamName: "Enter a name.",
  inputDescription: "Enter a description.",
  proposal: "Recommended CIDR blocks:",
  selectAParameter: "--Select--",
  typeErrorTip: "The data type of {property} is {type}. Select the same data type.",
  selectParam: "Parameter",
  confirm: "Confirm",
  ok: "OK",
  cancel: "Cancel",
  string: "String",
  number: "Number",
  boolean: "Boolean",
  select: "Select",
  format: "Format",
  save: "Save",
  close: "Close",
  commonParam: "Plain Parameter",
  encryptionParam: "Encrypted Parameter",
  createCommon: "Create Plain Parameter",
  passwordTip1: "Sensitive. Plaintext is risky. You are advised to click ",
  passwordTip2: " to add an encrypted parameter to configure the value.",
  createEncryption: "Create Encrypted Parameter",
  expandExample: "Show Example",
  collapseExample: "Hide Example",
  exampleCode: "Example Code"
}, wa = {
  common: Ca
}, Sa = {
  required: "必填",
  addParameter: "添加参数",
  deleteParameter: "删除参数",
  selectParameter: "选择输入参数",
  parameterName: "参数名称",
  nameFormat: "大小写字母开头，大小写字母、数字、连线符、下划线组成，长度为1-32",
  description: "描述",
  parameterGroup: "参数分类",
  parameterType: "参数类型",
  initialValue: "初始值",
  allowEmpty: "允许空值",
  condition: "约束条件",
  constraintError: "约束条件与失败提示必须同时存在",
  errorTip: "失败提示",
  inputValue: "请输入值",
  inputConstraint: "请输入值",
  inputMessage: "请输入值",
  inputParamName: "请输入参数名称",
  inputDescription: "请输入描述",
  selectAParameter: "请选择参数",
  proposal: "建议使用网段：",
  typeErrorTip: "{property}的参数类型为{type}，请选择相同的参数类型！",
  selectParam: "选择参数",
  confirm: "确认",
  ok: "确定",
  cancel: "取消",
  string: "字符串",
  number: "整数",
  boolean: "布尔值",
  select: "选择",
  format: "格式化",
  save: "保存",
  close: "关闭",
  commonParam: "普通参数",
  encryptionParam: "加密参数",
  createCommon: "创建普通参数",
  passwordTip1: "密码属敏感数据，输入明文有一定安全风险，建议点击",
  passwordTip2: "通过加密参数来配置密码数据。",
  createEncryption: "创建加密参数",
  expandExample: "展开示例",
  collapseExample: "收起示例",
  exampleCode: "示例代码"
}, Ea = {
  common: Sa
}, { mergeLocaleMessage: Hi } = hn.global;
Hi(Ri.enUS, wa);
Hi(Ri.zhCN, Ea);
const ka = {
  components: {
    TinyCollapse: Fi,
    TinyCollapseItem: Vi
  },
  props: {
    title: {
      type: String,
      default: "更多类型选项"
    }
  },
  setup() {
    return {};
  }
}, F = (e, t) => {
  const o = e.__vccOpts || e;
  for (const [n, i] of t)
    o[n] = i;
  return o;
}, xa = { id: "typography-more" };
function Pa(e, t, o, n, i, r) {
  const a = E("tiny-collapse-item"), s = E("tiny-collapse");
  return m(), b("div", xa, [
    _(s, null, {
      default: C(() => [
        _(a, {
          title: o.title,
          name: "1"
        }, {
          default: C(() => [
            O(e.$slots, "default", {}, void 0, !0)
          ]),
          _: 3
        }, 8, ["title"])
      ]),
      _: 3
    })
  ]);
}
const Ia = /* @__PURE__ */ F(ka, [["render", Pa], ["__scopeId", "data-v-50d14bf7"]]), Ta = {
  props: {
    group: Object,
    index: Number,
    design: Boolean,
    emptyText: {
      type: String,
      default: "空"
    }
  },
  render() {
    var l;
    const e = this.group.content || [], {
      item: t
    } = this.$slots, o = ((l = this.group.collapse) == null ? void 0 : l.number) || e.length, n = e.map((c, d) => t({
      data: c,
      propIndex: d
    })), i = n.slice(0, o), r = n.slice(o), a = _("div", {
      class: "item-container",
      "data-group-index": this.index
    }, [i.length ? i : _("div", {
      class: "empty"
    }, [this.emptyText])]), s = r.length ? _(Ia, null, {
      default: () => [_("div", {
        class: "item-container",
        "data-group-index": this.index
      }, [r])]
    }) : null;
    return _("div", {
      style: "width:100%"
    }, [a, $(" "), s]);
  }
}, Ji = /* @__PURE__ */ F(Ta, [["__scopeId", "data-v-e48a3147"]]), Aa = {
  name: "MultiTypeSelector",
  components: {
    TinyTooltip: nt,
    TinyPopover: Ue,
    TinyRadio: $r,
    TinyRadioGroup: jr
  },
  inheritAttrs: !1,
  props: {
    meta: {
      type: Object,
      default: () => ({})
    },
    label: {
      type: String,
      default: ""
    }
  },
  emits: ["change", "update:modelValue"],
  setup(e, { emit: t }) {
    var d, u;
    const o = (f, p) => {
      let h = f[0] || "";
      if (p === void 0) return h;
      for (const g of f)
        if (typeof p === g || g === "array" && Array.isArray(p)) {
          h = g, t("change", [g]);
          break;
        }
      return h;
    }, n = o(e.meta.type, (u = (d = e.meta.widget) == null ? void 0 : d.props) == null ? void 0 : u.modelValue), i = o(e.meta.type, e.meta.defaultValue), a = me({
      type: n,
      // 当前选中的组件类型
      typesValue: e.meta.type.map((f) => {
        var p, h;
        return f === n ? { modelValue: (h = (p = e.meta.widget) == null ? void 0 : p.props) == null ? void 0 : h.modelValue } : f === i ? { modelValue: e.meta.defaultValue } : { modelValue: null };
      })
      // 保存多个组件的modelValue
    });
    return {
      state: a,
      TYPE_MAP: {
        string: "字符串",
        number: "数字",
        boolean: "布尔值",
        object: "对象",
        array: "数组"
      },
      change: (f) => {
        const p = e.meta.type.findIndex((h) => h === f[0]);
        p > -1 && t("update:modelValue", a.typesValue[p].modelValue), t("change", f);
      },
      handleChange: (f, p) => {
        const h = e.meta.type[f];
        a.type !== h && (a.type = h, t("change", [h])), t("update:modelValue", p);
      },
      getConfigurator: Pt
    };
  }
}, Da = { class: "container" }, Oa = { class: "container-title" }, Ma = { class: "item-label" }, La = { class: "component-wrap" };
function Ba(e, t, o, n, i, r) {
  const a = E("tiny-radio"), s = E("tiny-radio-group");
  return m(), b("div", Da, [
    v("div", Oa, B(o.label), 1),
    v("div", null, [
      _(s, {
        modelValue: n.state.type,
        "onUpdate:modelValue": t[0] || (t[0] = (l) => n.state.type = l),
        vertical: "",
        onChange: n.change
      }, {
        default: C(() => [
          (m(!0), b(ee, null, we(o.meta.type, (l, c) => {
            var d;
            return m(), b("div", {
              key: l,
              class: "property-container"
            }, [
              v("div", Ma, [
                _(a, { label: l }, {
                  default: C(() => [
                    $(B(n.TYPE_MAP[l] || l), 1)
                  ]),
                  _: 2
                }, 1032, ["label"])
              ]),
              O(e.$slots, "prefix", {}, void 0, !0),
              v("div", La, [
                (m(), N(Ve(n.getConfigurator((d = o.meta.widget.component) == null ? void 0 : d[c])), _t({ ref_for: !0 }, o.meta.widget.props, {
                  modelValue: n.state.typesValue[c].modelValue,
                  "onUpdate:modelValue": [(u) => n.state.typesValue[c].modelValue = u, (u) => n.handleChange(c, u)],
                  meta: o.meta
                }), null, 16, ["modelValue", "onUpdate:modelValue", "meta"]))
              ]),
              O(e.$slots, "suffix", {}, void 0, !0)
            ]);
          }), 128))
        ]),
        _: 3
      }, 8, ["modelValue", "onChange"])
    ])
  ]);
}
const Ho = /* @__PURE__ */ F(Aa, [["render", Ba], ["__scopeId", "data-v-23a64d02"]]), { parseFunction: Mn } = So, Jo = (e, t) => e ? !0 : Array.isArray(t) && t.length > 0, Na = {
  components: {
    MultiTypeSelector: Ho,
    TinyPopover: Ue,
    TinyTooltip: nt,
    IconWriting: Zr(),
    IconPlusCircle: Qr(),
    IconHelpCircle: Kr()
  },
  props: {
    properties: {
      type: [Array, Object],
      default: () => []
    },
    property: {
      type: Object,
      default: () => ({})
    },
    isTopLayer: {
      type: Boolean,
      default: !1
    },
    onlyEdit: {
      type: Boolean,
      default: !1
    },
    group: {
      type: Object,
      default: () => ({})
    },
    metaComponents: {
      type: Object,
      default: () => ({})
    },
    showMessageError: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["update:modelValue"],
  setup(e, { emit: t }) {
    const o = Pt("CodeConfigurator"), n = Pt("VariableConfigurator"), { t: i, locale: r } = hn.global, a = me({
      failed: !1,
      message: "",
      hasRule: L(() => {
        var I, j;
        return Jo((I = e.property) == null ? void 0 : I.required, (j = e.property) == null ? void 0 : j.rules);
      })
    }), s = q(null), l = ct("currentProperty", null), c = ct("propsObj", null), d = L(() => {
      var I;
      return ((I = e.property) == null ? void 0 : I.required) || !1;
    }), u = L(() => e.hidden), f = L(() => {
      var I;
      return ((I = e.property) == null ? void 0 : I.widget) || {};
    }), p = L(
      () => {
        var I, j, W, ge, fe;
        return ((W = (j = (I = e.property) == null ? void 0 : I.label) == null ? void 0 : j.text) == null ? void 0 : W[r.value]) || ((fe = (ge = e.property) == null ? void 0 : ge.label) == null ? void 0 : fe.text) || e.property.property;
      }
    ), h = L(() => Array.isArray(f.value.component)), g = q(!1), k = L(
      () => e.isTopLayer && g.value === !1 && (h.value || ["array", "object"].includes(e.property.type))
    ), D = L(
      () => !e.onlyEdit && p.value && (g.value || ![
        "GroupItemConfigurator",
        "ArrayItemConfigurator",
        "RelatedColumnsConfigurator",
        "TableColumnsConfigurator"
      ].includes(f.value.component)) && !h.value
    ), S = L(
      () => {
        var I, j, W, ge, fe, ve, Pe, be;
        return (((j = (I = e.property) == null ? void 0 : I.description) == null ? void 0 : j[r.value]) ?? ((W = e.property) == null ? void 0 : W.description)) || (((ve = (fe = (ge = e.property) == null ? void 0 : ge.label) == null ? void 0 : fe.text) == null ? void 0 : ve[r.value]) ?? ((be = (Pe = e.property) == null ? void 0 : Pe.label) == null ? void 0 : be.text));
      }
    ), y = L(() => !!e.property.linked), w = L(() => h.value ? Ho : Pt(f.value.component) || e.metaComponents[f.value.component] || Pt("InputConfigurator")), x = L(() => {
      var j, W, ge, fe;
      let I = (ge = (W = (j = e.property) == null ? void 0 : j.widget) == null ? void 0 : W.props) == null ? void 0 : ge.modelValue;
      if (I == null) {
        const ve = (fe = e.property) == null ? void 0 : fe.defaultValue;
        I = (ve == null ? void 0 : ve[r.value]) ?? ve;
      }
      return (I == null ? void 0 : I.componentName) === "Icon" && (I = I.props.name), I;
    }), M = L(() => {
      var W, ge, fe, ve, Pe, be;
      const I = (fe = (ge = (W = e.property) == null ? void 0 : W.widget) == null ? void 0 : ge.props) == null ? void 0 : fe.language, j = ((Pe = (ve = e.property) == null ? void 0 : ve.description) == null ? void 0 : Pe.zh_CN) === "分页配置" || ((be = e.property) == null ? void 0 : be.type) === "Object" ? "json" : "javascript";
      return I || j;
    }), P = L(() => {
      var I, j;
      return D.value ? e.property.labelPosition ? e.property.labelPosition : ["CheckBoxConfigurator", "SwitchConfigurator"].includes((I = e.property.widget) == null ? void 0 : I.component) ? "left" : ((j = e.property.widget) == null ? void 0 : j.component) === "CodeConfigurator" ? "top" : "auto" : "none";
    }), G = (I) => {
      const { property: j, type: W } = e.property, { setProp: ge, getSchema: fe } = Ht();
      if ((I == null ? void 0 : I.type) === Fo.JSExpression) {
        const be = fe().componentName, {
          schema: { events: Oe = {} }
        } = la().getMaterial(be);
        Object.keys(Oe).includes(`onUpdate:${j}`) && (I = { ...I, model: j === "modelValue" ? !0 : { prop: j } });
      }
      const { operateNode: ve, isSaved: Pe } = He();
      if (j === "children") {
        const be = fe();
        ve({ type: "updateAttributes", id: be.id, value: { children: I } });
      } else {
        if (!Pe() && ![zo.Guest, zo.Occupy].includes(ot().layoutState.pageStatus.state))
          return;
        j !== "name" && ["SelectIconConfigurator"].includes(e.property.widget.component) && (I = {
          componentName: "Icon",
          props: {
            name: I
          }
        }), e.isTopLayer && ge(j, I, W);
      }
      Kt().addHistory();
    }, z = (I, j) => {
      I.failed = !0, I.message = typeof j == "string" ? j : j == null ? void 0 : j[r.value];
    }, K = (I) => I == null || sa(I) === Mr.StringType && I.trim() === "", oe = (I) => !K(I), ue = (I = "", j = []) => {
      var ve, Pe;
      const W = {
        failed: !1,
        message: ""
      };
      if (!Jo((ve = e.property) == null ? void 0 : ve.required, (Pe = e.property) == null ? void 0 : Pe.rules))
        return W;
      if (d.value && !oe(I))
        return z(W, i("common.required")), W;
      const ge = j.length, { getProp: fe } = Ht();
      for (let be = 0; be < ge; be++) {
        const Oe = j[be];
        if (Oe.required && !oe(I))
          return z(W, Oe.message), W;
        if (Oe.pattern) {
          if (!new RegExp(Oe.pattern).test(I)) {
            z(W, Oe.message);
            break;
          }
        } else if (Oe.validator)
          try {
            if (!Mn(Oe.validator, {
              props: {
                value: I
              },
              getProp: fe
            })(Oe, I)) {
              z(W, Oe.message);
              break;
            }
          } catch ($t) {
            console.log($t);
          }
      }
      return W;
    }, ie = (I, j) => {
      var Pe;
      const { onChange: W, rules: ge } = e.property, { setProp: fe, delProp: ve } = Ht();
      if (W && c)
        try {
          Mn(W, {
            ...c.value,
            config: {
              ...(Pe = f.value) == null ? void 0 : Pe.props
            },
            setProp: fe,
            delProp: ve
          })(I, j);
        } catch (be) {
          console.log(be);
        }
      Object.assign(a, ue(I, ge));
    }, Y = (I, j = !0) => {
      const W = x.value;
      f.value.props.modelValue = I, t("update:modelValue", I), j && (G(I), ie(I, W));
    }, re = ct("path", ""), ae = ct("data", null);
    sn("path", `${re ? re + "." : ""}${e.property.property}`), sn("data", Ht().getSchema()), Le(
      () => x.value,
      (I) => {
        g.value = (I == null ? void 0 : I.type) === Fo.JSExpression;
      },
      {
        immediate: !0
      }
    );
    const De = q(!1), he = q(!1);
    Le(
      () => [a.failed, he.value],
      () => {
        if (!a.failed) {
          De.value = !1;
          return;
        }
        De.value = !0;
      }
    );
    const kt = () => {
      he.value = !0;
    }, jt = () => {
      var j;
      he.value = !1;
      const I = (j = e.property) == null ? void 0 : j.onBlur;
      if (I)
        try {
          Mn(I, {})(x.value);
        } catch {
        }
    }, rt = (I) => ["RelatedEditorConfigurator", "RelatedColumnsConfigurator"].includes(I), _e = L(
      () => !e.onlyEdit && (g.value || y.value) && !rt(f.value.component)
    );
    return {
      CodeConfigurator: o,
      VariableConfigurator: n,
      verification: a,
      showCodeEditIcon: k,
      editorModalRef: s,
      isBindingState: g,
      component: w,
      hidden: u,
      widget: f,
      required: d,
      isLinked: y,
      propLabel: p,
      showLabel: D,
      multiType: h,
      propDescription: S,
      bindValue: x,
      currentProperty: l,
      showBindState: _e,
      onModelUpdate: Y,
      parentData: ae,
      currentLanguage: M,
      showErrorPopup: De,
      handleFocus: kt,
      handleBlur: jt,
      isFocus: he,
      isRelatedComponents: rt,
      labelPosition: P
    };
  }
}, Ra = { class: "prop-content" }, Va = { class: "prop-title" }, Fa = { class: "prop-description" }, za = { class: "item-input" }, Ua = {
  key: 0,
  class: "binding-state text-ellipsis-multiple"
}, ja = {
  key: 2,
  class: "error-tips-container"
}, $a = { class: "error-desc" }, qa = { class: "action-icon" };
function Ha(e, t, o, n, i, r) {
  var d;
  const a = E("tiny-popover"), s = E("svg-icon"), l = E("icon-writing"), c = E("tiny-tooltip");
  return o.property.hidden ? A("", !0) : (m(), b("div", {
    key: o.property,
    style: Et({ width: o.property.cols / 0.12 + "%" }),
    class: Z([
      "properties-item",
      {
        active: o.property === n.currentProperty
      }
    ])
  }, [
    v("div", {
      class: Z(["item-warp", n.labelPosition, o.property.className, { multiType: n.multiType }])
    }, [
      n.showLabel ? (m(), b("div", {
        key: 0,
        class: Z(["item-label", { linked: n.isLinked }])
      }, [
        _(a, {
          placement: "top",
          title: "",
          trigger: "hover",
          "popper-class": "prop-label-tips-container",
          "open-delay": 500,
          disabled: !n.propDescription || n.propDescription === n.propLabel
        }, {
          reference: C(() => [
            v("div", null, [
              v("div", {
                class: Z([{ "pro-underline": n.propDescription && n.propDescription !== n.propLabel }])
              }, [
                v("span", null, B(n.propLabel), 1)
              ], 2)
            ])
          ]),
          default: C(() => [
            v("div", Ra, [
              v("div", Va, B(o.property.property), 1),
              v("div", Fa, B(n.propDescription), 1)
            ])
          ]),
          _: 1
        }, 8, ["disabled"])
      ], 2)) : A("", !0),
      v("div", za, [
        O(e.$slots, "prefix", {}, void 0, !0),
        v("div", {
          class: Z([
            "widget",
            {
              "verify-failed": n.verification.failed
            }
          ])
        }, [
          n.showBindState ? (m(), b("div", Ua, B("已绑定：" + ((d = n.widget.props.modelValue) == null ? void 0 : d.value)), 1)) : qe((m(), N(Ve(n.component), _t({ key: 1 }, n.widget.props, {
            "model-value": n.bindValue,
            language: n.currentLanguage,
            meta: o.property,
            label: n.propLabel,
            metaComponents: o.metaComponents,
            "onUpdate:modelValue": n.onModelUpdate,
            onFocus: n.handleFocus,
            onBlur: n.handleBlur
          }), null, 16, ["model-value", "language", "meta", "label", "metaComponents", "onUpdate:modelValue", "onFocus", "onBlur"])), [
            [dt, !n.hidden]
          ]),
          n.showErrorPopup ? (m(), b("div", ja, [
            _(s, {
              name: "notify-failure",
              class: "error-icon"
            }),
            v("span", $a, B(n.verification.message), 1)
          ])) : A("", !0)
        ], 2),
        v("div", qa, [
          O(e.$slots, "suffix", {}, void 0, !0),
          n.showCodeEditIcon ? (m(), N(Ve(n.CodeConfigurator), _t({
            key: 0,
            ref: "editorModalRef"
          }, n.widget.props, {
            "model-value": n.bindValue,
            meta: o.property,
            label: n.propLabel,
            language: "json",
            "onUpdate:modelValue": n.onModelUpdate
          }), {
            default: C(() => [
              _(c, {
                class: "item",
                effect: "light",
                content: "源码编辑",
                placement: "left"
              }, {
                default: C(() => [
                  _(l, {
                    class: "code-icon",
                    onClick: t[0] || (t[0] = (u) => {
                      var f;
                      return ((f = n.editorModalRef) == null ? void 0 : f.open) && n.editorModalRef.open();
                    })
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 16, ["model-value", "meta", "label", "onUpdate:modelValue"])) : A("", !0),
          o.isTopLayer && !o.onlyEdit && o.property.bindState !== !1 && !n.isRelatedComponents(n.widget.component) ? (m(), N(Ve(n.VariableConfigurator), {
            key: 1,
            "model-value": n.widget.props.modelValue,
            name: n.widget.props.name,
            "onUpdate:modelValue": n.onModelUpdate
          }, null, 8, ["model-value", "name", "onUpdate:modelValue"])) : A("", !0)
        ])
      ])
    ], 2)
  ], 6));
}
const Eo = /* @__PURE__ */ F(Na, [["render", Ha], ["__scopeId", "data-v-a9b4f28a"]]), Ja = {}, Wa = { class: "button-group" };
function Ya(e, t) {
  return m(), b("div", Wa, [
    O(e.$slots, "default", {}, void 0, !0)
  ]);
}
const Xa = /* @__PURE__ */ F(Ja, [["render", Ya], ["__scopeId", "data-v-bcbe223f"]]), Ga = {
  components: {
    TinyTooltip: nt
  },
  props: {
    tips: {
      type: String,
      default: ""
    },
    placement: {
      type: String,
      default: "bottom"
    },
    name: {
      type: String,
      default: "add"
    },
    hoverBgColor: {
      type: Boolean,
      default: !0
    }
  },
  emits: ["click"],
  setup(e, { emit: t }) {
    return {
      isTinyIcon: L(() => e.name.toLowerCase().indexOf("icon") === 0),
      handleClick: (i) => {
        var r;
        (r = i.target) == null || r.blur(), t("click", i);
      }
    };
  }
};
function Ka(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-tooltip");
  return m(), b("span", {
    class: Z(["svg-button", { "svg-button-hover": o.hoverBgColor }]),
    onClick: t[0] || (t[0] = (l) => n.handleClick(l))
  }, [
    _(s, {
      effect: "light",
      content: o.tips,
      placement: o.placement
    }, {
      default: C(() => [
        n.isTinyIcon ? (m(), N(Ve(o.name), { key: 0 })) : (m(), N(a, {
          key: 1,
          name: o.name
        }, null, 8, ["name"]))
      ]),
      _: 1
    }, 8, ["content", "placement"])
  ], 2);
}
const ko = /* @__PURE__ */ F(Ga, [["render", Ka], ["__scopeId", "data-v-60df7044"]]), pt = {
  FULL_SCREEN_CHANGE: "fullScreenChange",
  SAVE: "save",
  CANCEL: "cancel",
  ADD: "add",
  CLICK: "click"
}, Qa = {
  components: {
    TinyButton: je,
    SvgButton: ko,
    ButtonGroup: Xa
  },
  props: {
    /**
     * plugin-setting面板标题
     */
    title: {
      type: String,
      default: ""
    },
    /**
     * 是否为二级展开面板
     */
    isSecond: {
      type: Boolean,
      default: !1
    },
    /**
     * 是否为全屏显示
     */
    isFullScreen: {
      type: Boolean,
      default: !1
    },
    showIfFullScreen: {
      type: Boolean,
      default: !1
    },
    /**
     * 是否为图标按钮
     */
    isIconButton: {
      type: Boolean,
      default: !1
    },
    iconButtonText: {
      type: String,
      default: "新增数据"
    },
    icon: {
      type: Object,
      default: ea()
    },
    fixedName: {
      type: String,
      default: ""
    },
    align: {
      type: String,
      default: "leftTop"
    }
  },
  emits: [pt.FULL_SCREEN_CHANGE, pt.SAVE, pt.CANCEL, pt.ADD, pt.CLICK],
  setup(e, { emit: t }) {
    const o = me({
      isFullScreen: !1
    }), { getPluginWidth: n } = ot(), i = L(() => n(e.fixedName) - 1), r = L(() => e.align.includes("left") ? "left" : "right"), a = L(() => `${r.value} : ${i.value}px`), s = L(() => {
      var f;
      const u = ((f = document.querySelector(".plugin-setting")) == null ? void 0 : f.clientWidth) + i.value;
      return `${r.value} : ${u.value}px`;
    });
    We(() => {
      var f;
      const u = ((f = document.querySelector(".plugin-setting")) == null ? void 0 : f.clientWidth) + i.value;
      Rt(() => {
        var p;
        (p = document.querySelector(".second-panel")) == null || p.style.setProperty(r.value, `${u}px`);
      });
    }), We(() => {
      o.isFullScreen = e.isFullScreen;
    });
    const l = () => {
      o.isFullScreen = !o.isFullScreen, t(pt.FULL_SCREEN_CHANGE, o.isFullScreen);
    }, c = (u) => u ? "收起" : "全屏查看", d = L(() => e.isSecond ? "" : e.align.includes("right") ? "shadow-right" : "shadow-left");
    return {
      alignStyle: a,
      secondAlignStyle: s,
      shadowClass: d,
      firstPanelOffset: i,
      state: o,
      fullScreen: l,
      getFullScreenLabel: c
    };
  }
}, Za = { class: "plugin-setting-header" }, es = { class: "plugin-setting-header-title" }, ts = { class: "button-group-wrap" }, ns = { class: "plugin-setting-content lowcode-scrollbar" };
function os(e, t, o, n, i, r) {
  const a = E("tiny-button"), s = E("svg-button"), l = E("button-group");
  return m(), b("div", {
    id: "panel-setting",
    class: Z([
      "plugin-setting",
      { "second-panel": o.isSecond },
      { "full-screen": n.state.isFullScreen },
      { "align-right": o.align.includes("right") },
      n.shadowClass
    ]),
    style: Et(o.isSecond ? n.secondAlignStyle : n.alignStyle),
    onClick: t[4] || (t[4] = (c) => e.$emit("click"))
  }, [
    v("div", Za, [
      O(e.$slots, "title", {}, () => [
        v("span", es, B(o.title), 1)
      ], !0),
      v("div", ts, [
        O(e.$slots, "header", {}, () => [
          _(l, null, {
            default: C(() => [
              o.isIconButton ? A("", !0) : (m(), N(a, {
                key: 0,
                type: "info",
                onClick: t[0] || (t[0] = (c) => e.$emit("save")),
                class: "plugin-save"
              }, {
                default: C(() => t[5] || (t[5] = [
                  $("保存", -1)
                ])),
                _: 1,
                __: [5]
              })),
              o.isIconButton ? (m(), N(a, {
                key: 1,
                icon: o.icon,
                type: "info",
                onClick: t[1] || (t[1] = (c) => e.$emit("add"))
              }, {
                default: C(() => [
                  $(B(o.iconButtonText), 1)
                ]),
                _: 1
              }, 8, ["icon"])) : A("", !0),
              o.showIfFullScreen ? (m(), b("div", {
                key: 2,
                class: "cursor",
                onClick: t[2] || (t[2] = (...c) => n.fullScreen && n.fullScreen(...c))
              }, [
                n.state.isFullScreen ? A("", !0) : (m(), N(s, {
                  key: 0,
                  name: "full-screen"
                })),
                n.state.isFullScreen ? (m(), N(s, {
                  key: 1,
                  name: "cancel-full-screen"
                })) : A("", !0)
              ])) : A("", !0),
              _(s, {
                name: "close",
                onClick: t[3] || (t[3] = (c) => e.$emit("cancel"))
              })
            ]),
            _: 1
          })
        ], !0)
      ])
    ]),
    O(e.$slots, "progress", {}, void 0, !0),
    v("div", ns, [
      O(e.$slots, "content", {}, void 0, !0)
    ])
  ], 6);
}
const mm = /* @__PURE__ */ F(Qa, [["render", os], ["__scopeId", "data-v-930d639c"]]), is = {
  components: {
    TinyTooltip: qr
  },
  props: {
    href: {
      type: String,
      default: ""
    },
    tips: {
      type: String,
      default: "帮助"
    }
  }
}, rs = { class: "link-button" }, as = { class: "tip-content" }, ss = ["href"];
function ls(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-tooltip");
  return m(), b("span", rs, [
    _(s, {
      effect: "light",
      content: o.tips
    }, {
      content: C(() => [
        v("div", as, B(o.tips), 1),
        o.href ? (m(), b("a", {
          key: 0,
          class: "tip-jump",
          href: o.href,
          target: "_blank"
        }, [
          _(a, { name: "jump" }),
          t[0] || (t[0] = $(" 查看详情 ", -1))
        ], 8, ss)) : A("", !0)
      ]),
      default: C(() => [
        _(a, { name: "plugin-icon-plugin-help" })
      ]),
      _: 1
    }, 8, ["content"])
  ]);
}
const cs = /* @__PURE__ */ F(is, [["render", ls], ["__scopeId", "data-v-717dc5ca"]]), ds = {
  props: {
    name: {
      type: String,
      default: "cross"
    }
  },
  setup(e) {
    return {
      isTinyIcon: L(() => e.name.toLowerCase().indexOf("icon") === 0)
    };
  }
};
function us(e, t, o, n, i, r) {
  const a = E("svg-icon");
  return m(), b("span", {
    class: "icon-wrap",
    onClick: t[0] || (t[0] = (s) => e.$emit("close"))
  }, [
    n.isTinyIcon ? (m(), N(Ve(o.name), { key: 0 })) : (m(), N(a, {
      key: 1,
      name: o.name
    }, null, 8, ["name"]))
  ]);
}
const fs = /* @__PURE__ */ F(ds, [["render", us], ["__scopeId", "data-v-5e0ce604"]]), ps = {
  components: {
    TinyTooltip: nt,
    LinkButton: cs,
    CloseIcon: fs,
    SvgButton: fa
  },
  props: {
    /**
     * plugin面板标题
     */
    title: {
      type: String,
      default: ""
    },
    /**
     * 关闭图标是否在左侧
     */
    isCloseLeft: {
      type: Boolean,
      default: !1
    },
    name: {
      type: String,
      default: "cross"
    },
    docsUrl: {
      type: String,
      default: ""
    },
    docsContent: {
      type: String,
      default: ""
    },
    isShowDocsIcon: {
      type: Boolean,
      default: !1
    },
    /**
     * 固定面板插件数组
     */
    fixedPanels: {
      type: Array
    },
    /**
     * 固定面板标识
     */
    fixedName: {
      type: String
    },
    /**
     * 是否展示标题下边线
     */
    showBottomBorder: {
      type: Boolean,
      default: !1
    },
    /**
     * 是否展示折叠按钮
     */
    isShowCollapseIcon: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["close", "updateCollapseStatus"],
  setup(e, { emit: t }) {
    const o = () => {
      t("close");
    }, { PLUGIN_DEFAULT_WIDTH: n } = Sn, i = n, r = 1e3, a = q(null);
    let s = 0, l = 0, c = null;
    const d = q(!1), u = L(() => d.value ? "collapse_all" : "expand_all");
    sn("isCollapsed", d);
    const f = ct("panelState"), p = () => {
      f == null || f.emitEvent("fixPanel", e.fixedName);
    }, h = L(() => e.showBottomBorder ? "header-bottom-line" : ""), { getPluginWidth: g, changePluginWidth: k, getPluginByLayout: D, changeMoveDragBarState: S, isPanelWidthResizable: y } = ot(), w = q(D(e.fixedName)), x = q(g(e.fixedName)), M = q(w.value.includes("left")), P = q(w.value.includes("right")), G = L(() => y(e.fixedName)), z = (_e) => {
      c && cancelAnimationFrame(c), c = requestAnimationFrame(() => {
        x.value = Math.max(i, Math.min(_e, r)), k(e.fixedName, x.value);
      });
    }, K = (_e) => {
      const I = l + (_e.clientX - s);
      z(I);
    }, oe = (_e) => {
      const I = l - (_e.clientX - s);
      z(I);
    }, ue = qo(K, 16), ie = qo(oe, 16), Y = q(null), re = q(null), ae = () => {
      S(!1), document.removeEventListener("mousemove", ue), document.removeEventListener("mouseup", ae), document.body.style.cursor = "", re.value && re.value.classList.remove("dragging"), c && (cancelAnimationFrame(c), c = null);
    }, De = (_e) => {
      var I;
      S(!0), s = _e.clientX, l = ((I = a.value) == null ? void 0 : I.offsetWidth) || 0, document.addEventListener("mousemove", ue), document.addEventListener("mouseup", ae), document.body.style.cursor = "col-resize", re.value && re.value.classList.add("dragging");
    }, he = () => {
      S(!1), document.removeEventListener("mousemove", ie), document.removeEventListener("mouseup", he), document.body.style.cursor = "", Y.value && Y.value.classList.remove("dragging"), c && (cancelAnimationFrame(c), c = null);
    }, kt = (_e) => {
      var I;
      S(!0), s = _e.clientX, l = ((I = a.value) == null ? void 0 : I.offsetWidth) || 0, document.addEventListener("mousemove", ie), document.addEventListener("mouseup", he), document.body.style.cursor = "col-resize", Y.value && Y.value.classList.add("dragging");
    }, jt = () => {
      const _e = document.querySelector(".resizer-left"), I = document.querySelector(".resizer-right");
      _e instanceof HTMLElement && (Y.value = _e), I instanceof HTMLElement && (re.value = I);
    }, rt = () => {
      d.value = !d.value, t("updateCollapseStatus", d.value);
    };
    return gn(() => {
      jt();
    }), {
      isWidthResizable: G,
      headerBottomLine: h,
      clickCollapseIcon: rt,
      isCollapsed: d,
      settingIcon: u,
      closePanel: o,
      fixPanel: p,
      panel: a,
      panelWidth: x,
      onMouseDownRight: De,
      onMouseDownLeft: kt,
      isLeftResizer: M,
      isRightResizer: P
    };
  }
}, ms = { class: "plugin-panel-title" }, hs = { class: "title" }, gs = { class: "plugin-panel-icon" }, vs = { class: "scroll-content" }, ys = { key: 0 };
function _s(e, t, o, n, i, r) {
  var d, u;
  const a = E("link-button"), s = E("close-icon"), l = E("svg-button"), c = E("tiny-tooltip");
  return m(), b("div", {
    class: "plugin-panel",
    ref: "panel",
    style: Et({ width: n.panelWidth + "px" })
  }, [
    v("div", {
      class: Z(["plugin-panel-header", n.headerBottomLine])
    }, [
      v("div", ms, [
        v("span", hs, [
          $(B(o.title), 1),
          o.isShowDocsIcon ? (m(), N(a, {
            key: 0,
            class: "link",
            tips: o.docsContent,
            href: o.docsUrl
          }, null, 8, ["tips", "href"])) : A("", !0)
        ]),
        o.isCloseLeft ? (m(), N(s, {
          key: 0,
          name: o.name,
          onClose: n.closePanel
        }, null, 8, ["name", "onClose"])) : A("", !0)
      ]),
      v("div", gs, [
        O(e.$slots, "header", {}, void 0, !0),
        o.isShowCollapseIcon ? (m(), N(c, {
          key: 0,
          effect: "light",
          content: n.isCollapsed ? "展开" : "折叠",
          placement: "top",
          "visible-arrow": !1
        }, {
          default: C(() => [
            _(l, {
              name: n.settingIcon,
              onClick: n.clickCollapseIcon
            }, null, 8, ["name", "onClick"])
          ]),
          _: 1
        }, 8, ["content"])) : A("", !0),
        _(l, {
          class: "item icon-sidebar",
          name: (d = o.fixedPanels) != null && d.includes(o.fixedName) ? "fixed-solid" : "fixed",
          tips: (u = o.fixedPanels) != null && u.includes(o.fixedName) ? "解除固定面板" : "固定面板",
          onClick: n.fixPanel
        }, null, 8, ["name", "tips", "onClick"]),
        o.isCloseLeft ? A("", !0) : (m(), N(s, {
          key: 1,
          name: o.name,
          onClose: n.closePanel
        }, null, 8, ["name", "onClose"]))
      ])
    ], 2),
    v("div", vs, [
      O(e.$slots, "content", {}, void 0, !0)
    ]),
    n.isWidthResizable ? (m(), b("div", ys, [
      n.isLeftResizer ? (m(), b("div", {
        key: 0,
        class: "resizer-right",
        onMousedown: t[0] || (t[0] = (...f) => n.onMouseDownRight && n.onMouseDownRight(...f))
      }, null, 32)) : A("", !0),
      n.isRightResizer ? (m(), b("div", {
        key: 1,
        class: "resizer-left",
        onMousedown: t[1] || (t[1] = (...f) => n.onMouseDownLeft && n.onMouseDownLeft(...f))
      }, null, 32)) : A("", !0)
    ])) : A("", !0)
  ], 4);
}
const hm = /* @__PURE__ */ F(ps, [["render", _s], ["__scopeId", "data-v-244112f9"]]), bs = {
  props: {
    list: {
      type: Array
    },
    align: {
      type: String,
      default: "left"
    }
  },
  emits: ["close", "switchAlign"],
  setup(e, { emit: t }) {
    const { getPluginShown: o, changePluginShown: n, changeMenuShown: i } = ot(), r = q(""), a = me({
      type: !0,
      visible: !1,
      x: 0,
      y: 0,
      item: null,
      index: null,
      list: null
    }), s = e.align.includes("right") ? 130 : 0, l = (g, k, D, S, y, w) => {
      const x = window.innerHeight;
      a.type = D, a.visible = !0, Rt(() => {
        const M = document.querySelector(".plugin-context-menu"), P = M == null ? void 0 : M.offsetHeight, G = x - k - 20;
        P && G < P ? a.y = k - P : a.y = k, a.x = g - s;
      }), D && (a.item = S, a.index = y, r.value = w);
    }, c = () => {
      a.visible = !1;
    }, d = () => {
      t("close"), n(a.item.id), c();
    }, u = () => {
      t("close"), t("switchAlign", a.index, a.item.id, r.value), c();
    }, f = () => {
      const g = e.align.includes("right") ? "right" : "left";
      i(g), c();
    }, p = (g) => {
      n(g);
    }, h = (g) => {
      g.target.closest(".plugin-context-menu") || c();
    };
    return gn(() => {
      document.addEventListener("click", h);
    }), Co(() => {
      document.removeEventListener("click", h);
    }), {
      contextMenu: a,
      showContextMenu: l,
      changeShowState: p,
      getPluginShown: o,
      hidePlugin: d,
      switchAlign: u,
      hideSidebar: f
    };
  }
};
function Cs(e, t, o, n, i, r) {
  return A("", !0);
}
const gm = /* @__PURE__ */ F(bs, [["render", Cs], ["__scopeId", "data-v-810dc423"]]), ws = {
  components: {
    TinyCollapse: Fi,
    TinyCollapseItem: Vi,
    ConfigGroup: Ji,
    ConfigItem: Eo
  },
  props: {
    data: {
      type: [Array, Object],
      default: () => []
    },
    design: Boolean,
    emptyText: {
      type: String,
      default: "空"
    }
  },
  emits: ["selected", "select-prop", "select-group"],
  setup(e, { emit: t }) {
    const o = q([]), n = (c) => {
      const d = {};
      return c == null || c.forEach(({ content: u }) => {
        u.length && u.forEach(
          (f) => {
            var h;
            const p = (h = f.schema) != null && h.length ? n(f.schema) : {};
            p.setValue = (g) => {
              f.widget.props.modelValue = g;
            }, d[f.property] = p;
          }
        );
      }), d;
    }, i = L(() => n(e.data || []));
    sn("propsObj", i);
    const r = (c) => t("select-prop", c), a = (c) => t("select-group", c), s = (c) => {
      var d, u, f;
      return ((f = (u = (d = c == null ? void 0 : c.filter) == null ? void 0 : d.call(c, (p) => !p.fold)) == null ? void 0 : u.map) == null ? void 0 : f.call(u, (p, h) => h)) || [];
    };
    We(() => {
      o.value = s(e.data);
    });
    const l = L(() => e.data);
    return { onPropClick: r, onGroupClick: a, activeNames: o, properties: l };
  }
}, Ss = { class: "properties-list" }, Es = ["onClick"];
function ks(e, t, o, n, i, r) {
  const a = E("config-item"), s = E("config-group"), l = E("tiny-collapse-item"), c = E("tiny-collapse");
  return m(), b("div", Ss, [
    _(c, {
      modelValue: n.activeNames,
      "onUpdate:modelValue": t[0] || (t[0] = (d) => n.activeNames = d)
    }, {
      default: C(() => [
        (m(!0), b(ee, null, we(o.data, (d, u) => (m(), N(l, {
          key: d,
          name: u
        }, {
          title: C(() => [
            O(e.$slots, "title", { group: d }, () => {
              var f;
              return [
                v("div", {
                  onClick: (p) => n.onGroupClick(d)
                }, B(((f = d.label) == null ? void 0 : f.zh_CN) || ""), 9, Es)
              ];
            })
          ]),
          default: C(() => [
            _(s, {
              group: d,
              index: u,
              design: o.design,
              emptyText: o.emptyText
            }, {
              item: C(({ data: f, propIndex: p }) => [
                (m(), N(a, {
                  key: p,
                  properties: n.properties,
                  property: f,
                  "data-prop-index": p,
                  "data-group-index": u,
                  isTopLayer: !0,
                  group: d,
                  onClick: (h) => n.onPropClick(f)
                }, Lr({
                  prefix: C(() => [
                    O(e.$slots, "prefix", { data: f })
                  ]),
                  _: 2
                }, [
                  f.noBinding ? void 0 : {
                    name: "suffix",
                    fn: C(() => [
                      O(e.$slots, "suffix", { data: f })
                    ]),
                    key: "0"
                  }
                ]), 1032, ["properties", "property", "data-prop-index", "data-group-index", "group", "onClick"]))
              ]),
              _: 2
            }, 1032, ["group", "index", "design", "emptyText"])
          ]),
          _: 2
        }, 1032, ["name"]))), 128))
      ]),
      _: 3
    }, 8, ["modelValue"])
  ]);
}
const vm = /* @__PURE__ */ F(ws, [["render", ks]]), xs = {
  components: {
    TinyForm: _n,
    TinyFormItem: yn,
    TinyInput: ut,
    TinyButton: je
  },
  props: {
    option: {
      type: Object,
      default: () => ({})
    },
    footerbtnHide: {
      type: Boolean,
      default: !1
    }
  },
  setup(e, { emit: t }) {
    const o = Object.keys(e.option), n = me({ ...e.option });
    return {
      labelList: o,
      formData: n,
      labelTranslations: {
        label: "显示值",
        text: "展示值",
        zh_CN: "中文",
        en_US: "英文",
        field: "field",
        title: "title",
        description: "描述",
        defaultValue: "缺省值"
      },
      cancel: () => {
        t("cancel");
      },
      confirm: () => {
        t("confirm", n);
      }
    };
  }
}, Ps = { class: "demo-form" };
function Is(e, t, o, n, i, r) {
  const a = E("tiny-input"), s = E("tiny-form-item"), l = E("tiny-button"), c = E("tiny-form");
  return m(), b("div", Ps, [
    _(c, {
      "label-position": "left",
      "label-width": "53px"
    }, {
      default: C(() => [
        (m(!0), b(ee, null, we(n.labelList, (d) => (m(), b(ee, { key: d }, [
          n.labelTranslations[d] ? (m(), N(s, {
            key: 0,
            label: n.labelTranslations[d] || d
          }, {
            default: C(() => [
              _(a, {
                modelValue: n.formData[d],
                "onUpdate:modelValue": (u) => n.formData[d] = u
              }, null, 8, ["modelValue", "onUpdate:modelValue"])
            ]),
            _: 2
          }, 1032, ["label"])) : A("", !0)
        ], 64))), 128)),
        _(s, {
          class: Z({ footerbtnHide: o.footerbtnHide })
        }, {
          default: C(() => [
            _(l, { onClick: n.cancel }, {
              default: C(() => t[0] || (t[0] = [
                $("取消", -1)
              ])),
              _: 1,
              __: [0]
            }, 8, ["onClick"]),
            _(l, { onClick: n.confirm }, {
              default: C(() => t[1] || (t[1] = [
                $("确定", -1)
              ])),
              _: 1,
              __: [1]
            }, 8, ["onClick"])
          ]),
          _: 1
        }, 8, ["class"])
      ]),
      _: 1
    })
  ]);
}
const Ts = /* @__PURE__ */ F(xs, [["render", Is], ["__scopeId", "data-v-deabf0b2"]]), As = {
  components: {
    TinyTooltip: nt
  },
  props: {
    actions: {
      type: Array,
      default: () => []
    }
  },
  setup(e, { emit: t }) {
    return {
      actionsEvents: (n) => {
        t("actionEvents", n);
      }
    };
  }
}, Ds = ["onClick"];
function Os(e, t, o, n, i, r) {
  const a = E("tiny-tooltip");
  return m(!0), b(ee, null, we(o.actions, (s, l) => (m(), b("span", {
    key: l,
    class: "actionsItem",
    onClick: (c) => n.actionsEvents(s)
  }, [
    _(a, {
      class: "item",
      effect: "light",
      content: s.title,
      placement: "top"
    }, {
      default: C(() => [
        (m(), N(Ve(s.icon)))
      ]),
      _: 2
    }, 1032, ["content"])
  ], 8, Ds))), 128);
}
const ym = /* @__PURE__ */ F(As, [["render", Os], ["__scopeId", "data-v-3984036f"]]), Ms = {
  props: {
    title: {
      type: String,
      default: ""
    }
  }
};
function Ls(e, t, o, n, i, r) {
  return m(), b("div", null, B(o.title), 1);
}
const _m = /* @__PURE__ */ F(Ms, [["render", Ls]]);
/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function Wo(e, t) {
  var o = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    t && (n = n.filter(function(i) {
      return Object.getOwnPropertyDescriptor(e, i).enumerable;
    })), o.push.apply(o, n);
  }
  return o;
}
function ze(e) {
  for (var t = 1; t < arguments.length; t++) {
    var o = arguments[t] != null ? arguments[t] : {};
    t % 2 ? Wo(Object(o), !0).forEach(function(n) {
      Bs(e, n, o[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(o)) : Wo(Object(o)).forEach(function(n) {
      Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(o, n));
    });
  }
  return e;
}
function Qt(e) {
  "@babel/helpers - typeof";
  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? Qt = function(t) {
    return typeof t;
  } : Qt = function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Qt(e);
}
function Bs(e, t, o) {
  return t in e ? Object.defineProperty(e, t, {
    value: o,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[t] = o, e;
}
function Ye() {
  return Ye = Object.assign || function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var o = arguments[t];
      for (var n in o)
        Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n]);
    }
    return e;
  }, Ye.apply(this, arguments);
}
function Ns(e, t) {
  if (e == null) return {};
  var o = {}, n = Object.keys(e), i, r;
  for (r = 0; r < n.length; r++)
    i = n[r], !(t.indexOf(i) >= 0) && (o[i] = e[i]);
  return o;
}
function Rs(e, t) {
  if (e == null) return {};
  var o = Ns(e, t), n, i;
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(e);
    for (i = 0; i < r.length; i++)
      n = r[i], !(t.indexOf(n) >= 0) && Object.prototype.propertyIsEnumerable.call(e, n) && (o[n] = e[n]);
  }
  return o;
}
var Vs = "1.14.0";
function Je(e) {
  if (typeof window < "u" && window.navigator)
    return !!/* @__PURE__ */ navigator.userAgent.match(e);
}
var Xe = Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i), Ft = Je(/Edge/i), Yo = Je(/firefox/i), Ot = Je(/safari/i) && !Je(/chrome/i) && !Je(/android/i), Wi = Je(/iP(ad|od|hone)/i), Fs = Je(/chrome/i) && Je(/android/i), Yi = {
  capture: !1,
  passive: !1
};
function J(e, t, o) {
  e.addEventListener(t, o, !Xe && Yi);
}
function H(e, t, o) {
  e.removeEventListener(t, o, !Xe && Yi);
}
function dn(e, t) {
  if (t) {
    if (t[0] === ">" && (t = t.substring(1)), e)
      try {
        if (e.matches)
          return e.matches(t);
        if (e.msMatchesSelector)
          return e.msMatchesSelector(t);
        if (e.webkitMatchesSelector)
          return e.webkitMatchesSelector(t);
      } catch {
        return !1;
      }
    return !1;
  }
}
function zs(e) {
  return e.host && e !== document && e.host.nodeType ? e.host : e.parentNode;
}
function Re(e, t, o, n) {
  if (e) {
    o = o || document;
    do {
      if (t != null && (t[0] === ">" ? e.parentNode === o && dn(e, t) : dn(e, t)) || n && e === o)
        return e;
      if (e === o) break;
    } while (e = zs(e));
  }
  return null;
}
var Xo = /\s+/g;
function Ie(e, t, o) {
  if (e && t)
    if (e.classList)
      e.classList[o ? "add" : "remove"](t);
    else {
      var n = (" " + e.className + " ").replace(Xo, " ").replace(" " + t + " ", " ");
      e.className = (n + (o ? " " + t : "")).replace(Xo, " ");
    }
}
function R(e, t, o) {
  var n = e && e.style;
  if (n) {
    if (o === void 0)
      return document.defaultView && document.defaultView.getComputedStyle ? o = document.defaultView.getComputedStyle(e, "") : e.currentStyle && (o = e.currentStyle), t === void 0 ? o : o[t];
    !(t in n) && t.indexOf("webkit") === -1 && (t = "-webkit-" + t), n[t] = o + (typeof o == "string" ? "" : "px");
  }
}
function yt(e, t) {
  var o = "";
  if (typeof e == "string")
    o = e;
  else
    do {
      var n = R(e, "transform");
      n && n !== "none" && (o = n + " " + o);
    } while (!t && (e = e.parentNode));
  var i = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;
  return i && new i(o);
}
function Xi(e, t, o) {
  if (e) {
    var n = e.getElementsByTagName(t), i = 0, r = n.length;
    if (o)
      for (; i < r; i++)
        o(n[i], i);
    return n;
  }
  return [];
}
function Fe() {
  var e = document.scrollingElement;
  return e || document.documentElement;
}
function ce(e, t, o, n, i) {
  if (!(!e.getBoundingClientRect && e !== window)) {
    var r, a, s, l, c, d, u;
    if (e !== window && e.parentNode && e !== Fe() ? (r = e.getBoundingClientRect(), a = r.top, s = r.left, l = r.bottom, c = r.right, d = r.height, u = r.width) : (a = 0, s = 0, l = window.innerHeight, c = window.innerWidth, d = window.innerHeight, u = window.innerWidth), (t || o) && e !== window && (i = i || e.parentNode, !Xe))
      do
        if (i && i.getBoundingClientRect && (R(i, "transform") !== "none" || o && R(i, "position") !== "static")) {
          var f = i.getBoundingClientRect();
          a -= f.top + parseInt(R(i, "border-top-width")), s -= f.left + parseInt(R(i, "border-left-width")), l = a + r.height, c = s + r.width;
          break;
        }
      while (i = i.parentNode);
    if (n && e !== window) {
      var p = yt(i || e), h = p && p.a, g = p && p.d;
      p && (a /= g, s /= h, u /= h, d /= g, l = a + d, c = s + u);
    }
    return {
      top: a,
      left: s,
      bottom: l,
      right: c,
      width: u,
      height: d
    };
  }
}
function Go(e, t, o) {
  for (var n = tt(e, !0), i = ce(e)[t]; n; ) {
    var r = ce(n)[o], a = void 0;
    if (a = i >= r, !a) return n;
    if (n === Fe()) break;
    n = tt(n, !1);
  }
  return !1;
}
function Ct(e, t, o, n) {
  for (var i = 0, r = 0, a = e.children; r < a.length; ) {
    if (a[r].style.display !== "none" && a[r] !== V.ghost && (n || a[r] !== V.dragged) && Re(a[r], o.draggable, e, !1)) {
      if (i === t)
        return a[r];
      i++;
    }
    r++;
  }
  return null;
}
function xo(e, t) {
  for (var o = e.lastElementChild; o && (o === V.ghost || R(o, "display") === "none" || t && !dn(o, t)); )
    o = o.previousElementSibling;
  return o || null;
}
function Me(e, t) {
  var o = 0;
  if (!e || !e.parentNode)
    return -1;
  for (; e = e.previousElementSibling; )
    e.nodeName.toUpperCase() !== "TEMPLATE" && e !== V.clone && (!t || dn(e, t)) && o++;
  return o;
}
function Ko(e) {
  var t = 0, o = 0, n = Fe();
  if (e)
    do {
      var i = yt(e), r = i.a, a = i.d;
      t += e.scrollLeft * r, o += e.scrollTop * a;
    } while (e !== n && (e = e.parentNode));
  return [t, o];
}
function Us(e, t) {
  for (var o in e)
    if (e.hasOwnProperty(o)) {
      for (var n in t)
        if (t.hasOwnProperty(n) && t[n] === e[o][n]) return Number(o);
    }
  return -1;
}
function tt(e, t) {
  if (!e || !e.getBoundingClientRect) return Fe();
  var o = e, n = !1;
  do
    if (o.clientWidth < o.scrollWidth || o.clientHeight < o.scrollHeight) {
      var i = R(o);
      if (o.clientWidth < o.scrollWidth && (i.overflowX == "auto" || i.overflowX == "scroll") || o.clientHeight < o.scrollHeight && (i.overflowY == "auto" || i.overflowY == "scroll")) {
        if (!o.getBoundingClientRect || o === document.body) return Fe();
        if (n || t) return o;
        n = !0;
      }
    }
  while (o = o.parentNode);
  return Fe();
}
function js(e, t) {
  if (e && t)
    for (var o in t)
      t.hasOwnProperty(o) && (e[o] = t[o]);
  return e;
}
function Ln(e, t) {
  return Math.round(e.top) === Math.round(t.top) && Math.round(e.left) === Math.round(t.left) && Math.round(e.height) === Math.round(t.height) && Math.round(e.width) === Math.round(t.width);
}
var Mt;
function Gi(e, t) {
  return function() {
    if (!Mt) {
      var o = arguments, n = this;
      o.length === 1 ? e.call(n, o[0]) : e.apply(n, o), Mt = setTimeout(function() {
        Mt = void 0;
      }, t);
    }
  };
}
function $s() {
  clearTimeout(Mt), Mt = void 0;
}
function Ki(e, t, o) {
  e.scrollLeft += t, e.scrollTop += o;
}
function Qi(e) {
  var t = window.Polymer, o = window.jQuery || window.Zepto;
  return t && t.dom ? t.dom(e).cloneNode(!0) : o ? o(e).clone(!0)[0] : e.cloneNode(!0);
}
var Ae = "Sortable" + (/* @__PURE__ */ new Date()).getTime();
function qs() {
  var e = [], t;
  return {
    captureAnimationState: function() {
      if (e = [], !!this.options.animation) {
        var n = [].slice.call(this.el.children);
        n.forEach(function(i) {
          if (!(R(i, "display") === "none" || i === V.ghost)) {
            e.push({
              target: i,
              rect: ce(i)
            });
            var r = ze({}, e[e.length - 1].rect);
            if (i.thisAnimationDuration) {
              var a = yt(i, !0);
              a && (r.top -= a.f, r.left -= a.e);
            }
            i.fromRect = r;
          }
        });
      }
    },
    addAnimationState: function(n) {
      e.push(n);
    },
    removeAnimationState: function(n) {
      e.splice(Us(e, {
        target: n
      }), 1);
    },
    animateAll: function(n) {
      var i = this;
      if (!this.options.animation) {
        clearTimeout(t), typeof n == "function" && n();
        return;
      }
      var r = !1, a = 0;
      e.forEach(function(s) {
        var l = 0, c = s.target, d = c.fromRect, u = ce(c), f = c.prevFromRect, p = c.prevToRect, h = s.rect, g = yt(c, !0);
        g && (u.top -= g.f, u.left -= g.e), c.toRect = u, c.thisAnimationDuration && Ln(f, u) && !Ln(d, u) && // Make sure animatingRect is on line between toRect & fromRect
        (h.top - u.top) / (h.left - u.left) === (d.top - u.top) / (d.left - u.left) && (l = Js(h, f, p, i.options)), Ln(u, d) || (c.prevFromRect = d, c.prevToRect = u, l || (l = i.options.animation), i.animate(c, h, u, l)), l && (r = !0, a = Math.max(a, l), clearTimeout(c.animationResetTimer), c.animationResetTimer = setTimeout(function() {
          c.animationTime = 0, c.prevFromRect = null, c.fromRect = null, c.prevToRect = null, c.thisAnimationDuration = null;
        }, l), c.thisAnimationDuration = l);
      }), clearTimeout(t), r ? t = setTimeout(function() {
        typeof n == "function" && n();
      }, a) : typeof n == "function" && n(), e = [];
    },
    animate: function(n, i, r, a) {
      if (a) {
        R(n, "transition", ""), R(n, "transform", "");
        var s = yt(this.el), l = s && s.a, c = s && s.d, d = (i.left - r.left) / (l || 1), u = (i.top - r.top) / (c || 1);
        n.animatingX = !!d, n.animatingY = !!u, R(n, "transform", "translate3d(" + d + "px," + u + "px,0)"), this.forRepaintDummy = Hs(n), R(n, "transition", "transform " + a + "ms" + (this.options.easing ? " " + this.options.easing : "")), R(n, "transform", "translate3d(0,0,0)"), typeof n.animated == "number" && clearTimeout(n.animated), n.animated = setTimeout(function() {
          R(n, "transition", ""), R(n, "transform", ""), n.animated = !1, n.animatingX = !1, n.animatingY = !1;
        }, a);
      }
    }
  };
}
function Hs(e) {
  return e.offsetWidth;
}
function Js(e, t, o, n) {
  return Math.sqrt(Math.pow(t.top - e.top, 2) + Math.pow(t.left - e.left, 2)) / Math.sqrt(Math.pow(t.top - o.top, 2) + Math.pow(t.left - o.left, 2)) * n.animation;
}
var mt = [], Bn = {
  initializeByDefault: !0
}, zt = {
  mount: function(t) {
    for (var o in Bn)
      Bn.hasOwnProperty(o) && !(o in t) && (t[o] = Bn[o]);
    mt.forEach(function(n) {
      if (n.pluginName === t.pluginName)
        throw "Sortable: Cannot mount plugin ".concat(t.pluginName, " more than once");
    }), mt.push(t);
  },
  pluginEvent: function(t, o, n) {
    var i = this;
    this.eventCanceled = !1, n.cancel = function() {
      i.eventCanceled = !0;
    };
    var r = t + "Global";
    mt.forEach(function(a) {
      o[a.pluginName] && (o[a.pluginName][r] && o[a.pluginName][r](ze({
        sortable: o
      }, n)), o.options[a.pluginName] && o[a.pluginName][t] && o[a.pluginName][t](ze({
        sortable: o
      }, n)));
    });
  },
  initializePlugins: function(t, o, n, i) {
    mt.forEach(function(s) {
      var l = s.pluginName;
      if (!(!t.options[l] && !s.initializeByDefault)) {
        var c = new s(t, o, t.options);
        c.sortable = t, c.options = t.options, t[l] = c, Ye(n, c.defaults);
      }
    });
    for (var r in t.options)
      if (t.options.hasOwnProperty(r)) {
        var a = this.modifyOption(t, r, t.options[r]);
        typeof a < "u" && (t.options[r] = a);
      }
  },
  getEventProperties: function(t, o) {
    var n = {};
    return mt.forEach(function(i) {
      typeof i.eventProperties == "function" && Ye(n, i.eventProperties.call(o[i.pluginName], t));
    }), n;
  },
  modifyOption: function(t, o, n) {
    var i;
    return mt.forEach(function(r) {
      t[r.pluginName] && r.optionListeners && typeof r.optionListeners[o] == "function" && (i = r.optionListeners[o].call(t[r.pluginName], n));
    }), i;
  }
};
function Ws(e) {
  var t = e.sortable, o = e.rootEl, n = e.name, i = e.targetEl, r = e.cloneEl, a = e.toEl, s = e.fromEl, l = e.oldIndex, c = e.newIndex, d = e.oldDraggableIndex, u = e.newDraggableIndex, f = e.originalEvent, p = e.putSortable, h = e.extraEventProperties;
  if (t = t || o && o[Ae], !!t) {
    var g, k = t.options, D = "on" + n.charAt(0).toUpperCase() + n.substr(1);
    window.CustomEvent && !Xe && !Ft ? g = new CustomEvent(n, {
      bubbles: !0,
      cancelable: !0
    }) : (g = document.createEvent("Event"), g.initEvent(n, !0, !0)), g.to = a || o, g.from = s || o, g.item = i || o, g.clone = r, g.oldIndex = l, g.newIndex = c, g.oldDraggableIndex = d, g.newDraggableIndex = u, g.originalEvent = f, g.pullMode = p ? p.lastPutMode : void 0;
    var S = ze(ze({}, h), zt.getEventProperties(n, t));
    for (var y in S)
      g[y] = S[y];
    o && o.dispatchEvent(g), k[D] && k[D].call(t, g);
  }
}
var Ys = ["evt"], xe = function(t, o) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, i = n.evt, r = Rs(n, Ys);
  zt.pluginEvent.bind(V)(t, o, ze({
    dragEl: T,
    parentEl: te,
    ghostEl: U,
    rootEl: Q,
    nextEl: lt,
    lastDownEl: Zt,
    cloneEl: ne,
    cloneHidden: et,
    dragStarted: It,
    putSortable: ye,
    activeSortable: V.active,
    originalEvent: i,
    oldIndex: vt,
    oldDraggableIndex: Lt,
    newIndex: Te,
    newDraggableIndex: Qe,
    hideGhostForTarget: nr,
    unhideGhostForTarget: or,
    cloneNowHidden: function() {
      et = !0;
    },
    cloneNowShown: function() {
      et = !1;
    },
    dispatchSortableEvent: function(s) {
      Ee({
        sortable: o,
        name: s,
        originalEvent: i
      });
    }
  }, r));
};
function Ee(e) {
  Ws(ze({
    putSortable: ye,
    cloneEl: ne,
    targetEl: T,
    rootEl: Q,
    oldIndex: vt,
    oldDraggableIndex: Lt,
    newIndex: Te,
    newDraggableIndex: Qe
  }, e));
}
var T, te, U, Q, lt, Zt, ne, et, vt, Te, Lt, Qe, Wt, ye, gt = !1, un = !1, fn = [], at, Be, Nn, Rn, Qo, Zo, It, ht, Bt, Nt = !1, Yt = !1, en, Ce, Vn = [], lo = !1, pn = [], En = typeof document < "u", Xt = Wi, ei = Ft || Xe ? "cssFloat" : "float", Xs = En && !Fs && !Wi && "draggable" in document.createElement("div"), Zi = function() {
  if (En) {
    if (Xe)
      return !1;
    var e = document.createElement("x");
    return e.style.cssText = "pointer-events:auto", e.style.pointerEvents === "auto";
  }
}(), er = function(t, o) {
  var n = R(t), i = parseInt(n.width) - parseInt(n.paddingLeft) - parseInt(n.paddingRight) - parseInt(n.borderLeftWidth) - parseInt(n.borderRightWidth), r = Ct(t, 0, o), a = Ct(t, 1, o), s = r && R(r), l = a && R(a), c = s && parseInt(s.marginLeft) + parseInt(s.marginRight) + ce(r).width, d = l && parseInt(l.marginLeft) + parseInt(l.marginRight) + ce(a).width;
  if (n.display === "flex")
    return n.flexDirection === "column" || n.flexDirection === "column-reverse" ? "vertical" : "horizontal";
  if (n.display === "grid")
    return n.gridTemplateColumns.split(" ").length <= 1 ? "vertical" : "horizontal";
  if (r && s.float && s.float !== "none") {
    var u = s.float === "left" ? "left" : "right";
    return a && (l.clear === "both" || l.clear === u) ? "vertical" : "horizontal";
  }
  return r && (s.display === "block" || s.display === "flex" || s.display === "table" || s.display === "grid" || c >= i && n[ei] === "none" || a && n[ei] === "none" && c + d > i) ? "vertical" : "horizontal";
}, Gs = function(t, o, n) {
  var i = n ? t.left : t.top, r = n ? t.right : t.bottom, a = n ? t.width : t.height, s = n ? o.left : o.top, l = n ? o.right : o.bottom, c = n ? o.width : o.height;
  return i === s || r === l || i + a / 2 === s + c / 2;
}, Ks = function(t, o) {
  var n;
  return fn.some(function(i) {
    var r = i[Ae].options.emptyInsertThreshold;
    if (!(!r || xo(i))) {
      var a = ce(i), s = t >= a.left - r && t <= a.right + r, l = o >= a.top - r && o <= a.bottom + r;
      if (s && l)
        return n = i;
    }
  }), n;
}, tr = function(t) {
  function o(r, a) {
    return function(s, l, c, d) {
      var u = s.options.group.name && l.options.group.name && s.options.group.name === l.options.group.name;
      if (r == null && (a || u))
        return !0;
      if (r == null || r === !1)
        return !1;
      if (a && r === "clone")
        return r;
      if (typeof r == "function")
        return o(r(s, l, c, d), a)(s, l, c, d);
      var f = (a ? s : l).options.group.name;
      return r === !0 || typeof r == "string" && r === f || r.join && r.indexOf(f) > -1;
    };
  }
  var n = {}, i = t.group;
  (!i || Qt(i) != "object") && (i = {
    name: i
  }), n.name = i.name, n.checkPull = o(i.pull, !0), n.checkPut = o(i.put), n.revertClone = i.revertClone, t.group = n;
}, nr = function() {
  !Zi && U && R(U, "display", "none");
}, or = function() {
  !Zi && U && R(U, "display", "");
};
En && document.addEventListener("click", function(e) {
  if (un)
    return e.preventDefault(), e.stopPropagation && e.stopPropagation(), e.stopImmediatePropagation && e.stopImmediatePropagation(), un = !1, !1;
}, !0);
var st = function(t) {
  if (T) {
    t = t.touches ? t.touches[0] : t;
    var o = Ks(t.clientX, t.clientY);
    if (o) {
      var n = {};
      for (var i in t)
        t.hasOwnProperty(i) && (n[i] = t[i]);
      n.target = n.rootEl = o, n.preventDefault = void 0, n.stopPropagation = void 0, o[Ae]._onDragOver(n);
    }
  }
}, Qs = function(t) {
  T && T.parentNode[Ae]._isOutsideThisEl(t.target);
};
function V(e, t) {
  if (!(e && e.nodeType && e.nodeType === 1))
    throw "Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));
  this.el = e, this.options = t = Ye({}, t), e[Ae] = this;
  var o = {
    group: null,
    sort: !0,
    disabled: !1,
    store: null,
    handle: null,
    draggable: /^[uo]l$/i.test(e.nodeName) ? ">li" : ">*",
    swapThreshold: 1,
    // percentage; 0 <= x <= 1
    invertSwap: !1,
    // invert always
    invertedSwapThreshold: null,
    // will be set to same as swapThreshold if default
    removeCloneOnHide: !0,
    direction: function() {
      return er(e, this.options);
    },
    ghostClass: "sortable-ghost",
    chosenClass: "sortable-chosen",
    dragClass: "sortable-drag",
    ignore: "a, img",
    filter: null,
    preventOnFilter: !0,
    animation: 0,
    easing: null,
    setData: function(a, s) {
      a.setData("Text", s.textContent);
    },
    dropBubble: !1,
    dragoverBubble: !1,
    dataIdAttr: "data-id",
    delay: 0,
    delayOnTouchOnly: !1,
    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,
    forceFallback: !1,
    fallbackClass: "sortable-fallback",
    fallbackOnBody: !1,
    fallbackTolerance: 0,
    fallbackOffset: {
      x: 0,
      y: 0
    },
    supportPointer: V.supportPointer !== !1 && "PointerEvent" in window && !Ot,
    emptyInsertThreshold: 5
  };
  zt.initializePlugins(this, e, o);
  for (var n in o)
    !(n in t) && (t[n] = o[n]);
  tr(t);
  for (var i in this)
    i.charAt(0) === "_" && typeof this[i] == "function" && (this[i] = this[i].bind(this));
  this.nativeDraggable = t.forceFallback ? !1 : Xs, this.nativeDraggable && (this.options.touchStartThreshold = 1), t.supportPointer ? J(e, "pointerdown", this._onTapStart) : (J(e, "mousedown", this._onTapStart), J(e, "touchstart", this._onTapStart)), this.nativeDraggable && (J(e, "dragover", this), J(e, "dragenter", this)), fn.push(this.el), t.store && t.store.get && this.sort(t.store.get(this) || []), Ye(this, qs());
}
V.prototype = /** @lends Sortable.prototype */
{
  constructor: V,
  _isOutsideThisEl: function(t) {
    !this.el.contains(t) && t !== this.el && (ht = null);
  },
  _getDirection: function(t, o) {
    return typeof this.options.direction == "function" ? this.options.direction.call(this, t, o, T) : this.options.direction;
  },
  _onTapStart: function(t) {
    if (t.cancelable) {
      var o = this, n = this.el, i = this.options, r = i.preventOnFilter, a = t.type, s = t.touches && t.touches[0] || t.pointerType && t.pointerType === "touch" && t, l = (s || t).target, c = t.target.shadowRoot && (t.path && t.path[0] || t.composedPath && t.composedPath()[0]) || l, d = i.filter;
      if (al(n), !T && !(/mousedown|pointerdown/.test(a) && t.button !== 0 || i.disabled) && !c.isContentEditable && !(!this.nativeDraggable && Ot && l && l.tagName.toUpperCase() === "SELECT") && (l = Re(l, i.draggable, n, !1), !(l && l.animated) && Zt !== l)) {
        if (vt = Me(l), Lt = Me(l, i.draggable), typeof d == "function") {
          if (d.call(this, t, l, this)) {
            Ee({
              sortable: o,
              rootEl: c,
              name: "filter",
              targetEl: l,
              toEl: n,
              fromEl: n
            }), xe("filter", o, {
              evt: t
            }), r && t.cancelable && t.preventDefault();
            return;
          }
        } else if (d && (d = d.split(",").some(function(u) {
          if (u = Re(c, u.trim(), n, !1), u)
            return Ee({
              sortable: o,
              rootEl: u,
              name: "filter",
              targetEl: l,
              fromEl: n,
              toEl: n
            }), xe("filter", o, {
              evt: t
            }), !0;
        }), d)) {
          r && t.cancelable && t.preventDefault();
          return;
        }
        i.handle && !Re(c, i.handle, n, !1) || this._prepareDragStart(t, s, l);
      }
    }
  },
  _prepareDragStart: function(t, o, n) {
    var i = this, r = i.el, a = i.options, s = r.ownerDocument, l;
    if (n && !T && n.parentNode === r) {
      var c = ce(n);
      if (Q = r, T = n, te = T.parentNode, lt = T.nextSibling, Zt = n, Wt = a.group, V.dragged = T, at = {
        target: T,
        clientX: (o || t).clientX,
        clientY: (o || t).clientY
      }, Qo = at.clientX - c.left, Zo = at.clientY - c.top, this._lastX = (o || t).clientX, this._lastY = (o || t).clientY, T.style["will-change"] = "all", l = function() {
        if (xe("delayEnded", i, {
          evt: t
        }), V.eventCanceled) {
          i._onDrop();
          return;
        }
        i._disableDelayedDragEvents(), !Yo && i.nativeDraggable && (T.draggable = !0), i._triggerDragStart(t, o), Ee({
          sortable: i,
          name: "choose",
          originalEvent: t
        }), Ie(T, a.chosenClass, !0);
      }, a.ignore.split(",").forEach(function(d) {
        Xi(T, d.trim(), Fn);
      }), J(s, "dragover", st), J(s, "mousemove", st), J(s, "touchmove", st), J(s, "mouseup", i._onDrop), J(s, "touchend", i._onDrop), J(s, "touchcancel", i._onDrop), Yo && this.nativeDraggable && (this.options.touchStartThreshold = 4, T.draggable = !0), xe("delayStart", this, {
        evt: t
      }), a.delay && (!a.delayOnTouchOnly || o) && (!this.nativeDraggable || !(Ft || Xe))) {
        if (V.eventCanceled) {
          this._onDrop();
          return;
        }
        J(s, "mouseup", i._disableDelayedDrag), J(s, "touchend", i._disableDelayedDrag), J(s, "touchcancel", i._disableDelayedDrag), J(s, "mousemove", i._delayedDragTouchMoveHandler), J(s, "touchmove", i._delayedDragTouchMoveHandler), a.supportPointer && J(s, "pointermove", i._delayedDragTouchMoveHandler), i._dragStartTimer = setTimeout(l, a.delay);
      } else
        l();
    }
  },
  _delayedDragTouchMoveHandler: function(t) {
    var o = t.touches ? t.touches[0] : t;
    Math.max(Math.abs(o.clientX - this._lastX), Math.abs(o.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1)) && this._disableDelayedDrag();
  },
  _disableDelayedDrag: function() {
    T && Fn(T), clearTimeout(this._dragStartTimer), this._disableDelayedDragEvents();
  },
  _disableDelayedDragEvents: function() {
    var t = this.el.ownerDocument;
    H(t, "mouseup", this._disableDelayedDrag), H(t, "touchend", this._disableDelayedDrag), H(t, "touchcancel", this._disableDelayedDrag), H(t, "mousemove", this._delayedDragTouchMoveHandler), H(t, "touchmove", this._delayedDragTouchMoveHandler), H(t, "pointermove", this._delayedDragTouchMoveHandler);
  },
  _triggerDragStart: function(t, o) {
    o = o || t.pointerType == "touch" && t, !this.nativeDraggable || o ? this.options.supportPointer ? J(document, "pointermove", this._onTouchMove) : o ? J(document, "touchmove", this._onTouchMove) : J(document, "mousemove", this._onTouchMove) : (J(T, "dragend", this), J(Q, "dragstart", this._onDragStart));
    try {
      document.selection ? tn(function() {
        document.selection.empty();
      }) : window.getSelection().removeAllRanges();
    } catch {
    }
  },
  _dragStarted: function(t, o) {
    if (gt = !1, Q && T) {
      xe("dragStarted", this, {
        evt: o
      }), this.nativeDraggable && J(document, "dragover", Qs);
      var n = this.options;
      !t && Ie(T, n.dragClass, !1), Ie(T, n.ghostClass, !0), V.active = this, t && this._appendGhost(), Ee({
        sortable: this,
        name: "start",
        originalEvent: o
      });
    } else
      this._nulling();
  },
  _emulateDragOver: function() {
    if (Be) {
      this._lastX = Be.clientX, this._lastY = Be.clientY, nr();
      for (var t = document.elementFromPoint(Be.clientX, Be.clientY), o = t; t && t.shadowRoot && (t = t.shadowRoot.elementFromPoint(Be.clientX, Be.clientY), t !== o); )
        o = t;
      if (T.parentNode[Ae]._isOutsideThisEl(t), o)
        do {
          if (o[Ae]) {
            var n = void 0;
            if (n = o[Ae]._onDragOver({
              clientX: Be.clientX,
              clientY: Be.clientY,
              target: t,
              rootEl: o
            }), n && !this.options.dragoverBubble)
              break;
          }
          t = o;
        } while (o = o.parentNode);
      or();
    }
  },
  _onTouchMove: function(t) {
    if (at) {
      var o = this.options, n = o.fallbackTolerance, i = o.fallbackOffset, r = t.touches ? t.touches[0] : t, a = U && yt(U, !0), s = U && a && a.a, l = U && a && a.d, c = Xt && Ce && Ko(Ce), d = (r.clientX - at.clientX + i.x) / (s || 1) + (c ? c[0] - Vn[0] : 0) / (s || 1), u = (r.clientY - at.clientY + i.y) / (l || 1) + (c ? c[1] - Vn[1] : 0) / (l || 1);
      if (!V.active && !gt) {
        if (n && Math.max(Math.abs(r.clientX - this._lastX), Math.abs(r.clientY - this._lastY)) < n)
          return;
        this._onDragStart(t, !0);
      }
      if (U) {
        a ? (a.e += d - (Nn || 0), a.f += u - (Rn || 0)) : a = {
          a: 1,
          b: 0,
          c: 0,
          d: 1,
          e: d,
          f: u
        };
        var f = "matrix(".concat(a.a, ",").concat(a.b, ",").concat(a.c, ",").concat(a.d, ",").concat(a.e, ",").concat(a.f, ")");
        R(U, "webkitTransform", f), R(U, "mozTransform", f), R(U, "msTransform", f), R(U, "transform", f), Nn = d, Rn = u, Be = r;
      }
      t.cancelable && t.preventDefault();
    }
  },
  _appendGhost: function() {
    if (!U) {
      var t = this.options.fallbackOnBody ? document.body : Q, o = ce(T, !0, Xt, !0, t), n = this.options;
      if (Xt) {
        for (Ce = t; R(Ce, "position") === "static" && R(Ce, "transform") === "none" && Ce !== document; )
          Ce = Ce.parentNode;
        Ce !== document.body && Ce !== document.documentElement ? (Ce === document && (Ce = Fe()), o.top += Ce.scrollTop, o.left += Ce.scrollLeft) : Ce = Fe(), Vn = Ko(Ce);
      }
      U = T.cloneNode(!0), Ie(U, n.ghostClass, !1), Ie(U, n.fallbackClass, !0), Ie(U, n.dragClass, !0), R(U, "transition", ""), R(U, "transform", ""), R(U, "box-sizing", "border-box"), R(U, "margin", 0), R(U, "top", o.top), R(U, "left", o.left), R(U, "width", o.width), R(U, "height", o.height), R(U, "opacity", "0.8"), R(U, "position", Xt ? "absolute" : "fixed"), R(U, "zIndex", "100000"), R(U, "pointerEvents", "none"), V.ghost = U, t.appendChild(U), R(U, "transform-origin", Qo / parseInt(U.style.width) * 100 + "% " + Zo / parseInt(U.style.height) * 100 + "%");
    }
  },
  _onDragStart: function(t, o) {
    var n = this, i = t.dataTransfer, r = n.options;
    if (xe("dragStart", this, {
      evt: t
    }), V.eventCanceled) {
      this._onDrop();
      return;
    }
    xe("setupClone", this), V.eventCanceled || (ne = Qi(T), ne.draggable = !1, ne.style["will-change"] = "", this._hideClone(), Ie(ne, this.options.chosenClass, !1), V.clone = ne), n.cloneId = tn(function() {
      xe("clone", n), !V.eventCanceled && (n.options.removeCloneOnHide || Q.insertBefore(ne, T), n._hideClone(), Ee({
        sortable: n,
        name: "clone"
      }));
    }), !o && Ie(T, r.dragClass, !0), o ? (un = !0, n._loopId = setInterval(n._emulateDragOver, 50)) : (H(document, "mouseup", n._onDrop), H(document, "touchend", n._onDrop), H(document, "touchcancel", n._onDrop), i && (i.effectAllowed = "move", r.setData && r.setData.call(n, i, T)), J(document, "drop", n), R(T, "transform", "translateZ(0)")), gt = !0, n._dragStartId = tn(n._dragStarted.bind(n, o, t)), J(document, "selectstart", n), It = !0, Ot && R(document.body, "user-select", "none");
  },
  // Returns true - if no further action is needed (either inserted or another condition)
  _onDragOver: function(t) {
    var o = this.el, n = t.target, i, r, a, s = this.options, l = s.group, c = V.active, d = Wt === l, u = s.sort, f = ye || c, p, h = this, g = !1;
    if (lo) return;
    function k(he, kt) {
      xe(he, h, ze({
        evt: t,
        isOwner: d,
        axis: p ? "vertical" : "horizontal",
        revert: a,
        dragRect: i,
        targetRect: r,
        canSort: u,
        fromSortable: f,
        target: n,
        completed: S,
        onMove: function(rt, _e) {
          return Gt(Q, o, T, i, rt, ce(rt), t, _e);
        },
        changed: y
      }, kt));
    }
    function D() {
      k("dragOverAnimationCapture"), h.captureAnimationState(), h !== f && f.captureAnimationState();
    }
    function S(he) {
      return k("dragOverCompleted", {
        insertion: he
      }), he && (d ? c._hideClone() : c._showClone(h), h !== f && (Ie(T, ye ? ye.options.ghostClass : c.options.ghostClass, !1), Ie(T, s.ghostClass, !0)), ye !== h && h !== V.active ? ye = h : h === V.active && ye && (ye = null), f === h && (h._ignoreWhileAnimating = n), h.animateAll(function() {
        k("dragOverAnimationComplete"), h._ignoreWhileAnimating = null;
      }), h !== f && (f.animateAll(), f._ignoreWhileAnimating = null)), (n === T && !T.animated || n === o && !n.animated) && (ht = null), !s.dragoverBubble && !t.rootEl && n !== document && (T.parentNode[Ae]._isOutsideThisEl(t.target), !he && st(t)), !s.dragoverBubble && t.stopPropagation && t.stopPropagation(), g = !0;
    }
    function y() {
      Te = Me(T), Qe = Me(T, s.draggable), Ee({
        sortable: h,
        name: "change",
        toEl: o,
        newIndex: Te,
        newDraggableIndex: Qe,
        originalEvent: t
      });
    }
    if (t.preventDefault !== void 0 && t.cancelable && t.preventDefault(), n = Re(n, s.draggable, o, !0), k("dragOver"), V.eventCanceled) return g;
    if (T.contains(t.target) || n.animated && n.animatingX && n.animatingY || h._ignoreWhileAnimating === n)
      return S(!1);
    if (un = !1, c && !s.disabled && (d ? u || (a = te !== Q) : ye === this || (this.lastPutMode = Wt.checkPull(this, c, T, t)) && l.checkPut(this, c, T, t))) {
      if (p = this._getDirection(t, n) === "vertical", i = ce(T), k("dragOverValid"), V.eventCanceled) return g;
      if (a)
        return te = Q, D(), this._hideClone(), k("revert"), V.eventCanceled || (lt ? Q.insertBefore(T, lt) : Q.appendChild(T)), S(!0);
      var w = xo(o, s.draggable);
      if (!w || nl(t, p, this) && !w.animated) {
        if (w === T)
          return S(!1);
        if (w && o === t.target && (n = w), n && (r = ce(n)), Gt(Q, o, T, i, n, r, t, !!n) !== !1)
          return D(), o.appendChild(T), te = o, y(), S(!0);
      } else if (w && tl(t, p, this)) {
        var x = Ct(o, 0, s, !0);
        if (x === T)
          return S(!1);
        if (n = x, r = ce(n), Gt(Q, o, T, i, n, r, t, !1) !== !1)
          return D(), o.insertBefore(T, x), te = o, y(), S(!0);
      } else if (n.parentNode === o) {
        r = ce(n);
        var M = 0, P, G = T.parentNode !== o, z = !Gs(T.animated && T.toRect || i, n.animated && n.toRect || r, p), K = p ? "top" : "left", oe = Go(n, "top", "top") || Go(T, "top", "top"), ue = oe ? oe.scrollTop : void 0;
        ht !== n && (P = r[K], Nt = !1, Yt = !z && s.invertSwap || G), M = ol(t, n, r, p, z ? 1 : s.swapThreshold, s.invertedSwapThreshold == null ? s.swapThreshold : s.invertedSwapThreshold, Yt, ht === n);
        var ie;
        if (M !== 0) {
          var Y = Me(T);
          do
            Y -= M, ie = te.children[Y];
          while (ie && (R(ie, "display") === "none" || ie === U));
        }
        if (M === 0 || ie === n)
          return S(!1);
        ht = n, Bt = M;
        var re = n.nextElementSibling, ae = !1;
        ae = M === 1;
        var De = Gt(Q, o, T, i, n, r, t, ae);
        if (De !== !1)
          return (De === 1 || De === -1) && (ae = De === 1), lo = !0, setTimeout(el, 30), D(), ae && !re ? o.appendChild(T) : n.parentNode.insertBefore(T, ae ? re : n), oe && Ki(oe, 0, ue - oe.scrollTop), te = T.parentNode, P !== void 0 && !Yt && (en = Math.abs(P - ce(n)[K])), y(), S(!0);
      }
      if (o.contains(T))
        return S(!1);
    }
    return !1;
  },
  _ignoreWhileAnimating: null,
  _offMoveEvents: function() {
    H(document, "mousemove", this._onTouchMove), H(document, "touchmove", this._onTouchMove), H(document, "pointermove", this._onTouchMove), H(document, "dragover", st), H(document, "mousemove", st), H(document, "touchmove", st);
  },
  _offUpEvents: function() {
    var t = this.el.ownerDocument;
    H(t, "mouseup", this._onDrop), H(t, "touchend", this._onDrop), H(t, "pointerup", this._onDrop), H(t, "touchcancel", this._onDrop), H(document, "selectstart", this);
  },
  _onDrop: function(t) {
    var o = this.el, n = this.options;
    if (Te = Me(T), Qe = Me(T, n.draggable), xe("drop", this, {
      evt: t
    }), te = T && T.parentNode, Te = Me(T), Qe = Me(T, n.draggable), V.eventCanceled) {
      this._nulling();
      return;
    }
    gt = !1, Yt = !1, Nt = !1, clearInterval(this._loopId), clearTimeout(this._dragStartTimer), co(this.cloneId), co(this._dragStartId), this.nativeDraggable && (H(document, "drop", this), H(o, "dragstart", this._onDragStart)), this._offMoveEvents(), this._offUpEvents(), Ot && R(document.body, "user-select", ""), R(T, "transform", ""), t && (It && (t.cancelable && t.preventDefault(), !n.dropBubble && t.stopPropagation()), U && U.parentNode && U.parentNode.removeChild(U), (Q === te || ye && ye.lastPutMode !== "clone") && ne && ne.parentNode && ne.parentNode.removeChild(ne), T && (this.nativeDraggable && H(T, "dragend", this), Fn(T), T.style["will-change"] = "", It && !gt && Ie(T, ye ? ye.options.ghostClass : this.options.ghostClass, !1), Ie(T, this.options.chosenClass, !1), Ee({
      sortable: this,
      name: "unchoose",
      toEl: te,
      newIndex: null,
      newDraggableIndex: null,
      originalEvent: t
    }), Q !== te ? (Te >= 0 && (Ee({
      rootEl: te,
      name: "add",
      toEl: te,
      fromEl: Q,
      originalEvent: t
    }), Ee({
      sortable: this,
      name: "remove",
      toEl: te,
      originalEvent: t
    }), Ee({
      rootEl: te,
      name: "sort",
      toEl: te,
      fromEl: Q,
      originalEvent: t
    }), Ee({
      sortable: this,
      name: "sort",
      toEl: te,
      originalEvent: t
    })), ye && ye.save()) : Te !== vt && Te >= 0 && (Ee({
      sortable: this,
      name: "update",
      toEl: te,
      originalEvent: t
    }), Ee({
      sortable: this,
      name: "sort",
      toEl: te,
      originalEvent: t
    })), V.active && ((Te == null || Te === -1) && (Te = vt, Qe = Lt), Ee({
      sortable: this,
      name: "end",
      toEl: te,
      originalEvent: t
    }), this.save()))), this._nulling();
  },
  _nulling: function() {
    xe("nulling", this), Q = T = te = U = lt = ne = Zt = et = at = Be = It = Te = Qe = vt = Lt = ht = Bt = ye = Wt = V.dragged = V.ghost = V.clone = V.active = null, pn.forEach(function(t) {
      t.checked = !0;
    }), pn.length = Nn = Rn = 0;
  },
  handleEvent: function(t) {
    switch (t.type) {
      case "drop":
      case "dragend":
        this._onDrop(t);
        break;
      case "dragenter":
      case "dragover":
        T && (this._onDragOver(t), Zs(t));
        break;
      case "selectstart":
        t.preventDefault();
        break;
    }
  },
  /**
   * Serializes the item into an array of string.
   * @returns {String[]}
   */
  toArray: function() {
    for (var t = [], o, n = this.el.children, i = 0, r = n.length, a = this.options; i < r; i++)
      o = n[i], Re(o, a.draggable, this.el, !1) && t.push(o.getAttribute(a.dataIdAttr) || rl(o));
    return t;
  },
  /**
   * Sorts the elements according to the array.
   * @param  {String[]}  order  order of the items
   */
  sort: function(t, o) {
    var n = {}, i = this.el;
    this.toArray().forEach(function(r, a) {
      var s = i.children[a];
      Re(s, this.options.draggable, i, !1) && (n[r] = s);
    }, this), o && this.captureAnimationState(), t.forEach(function(r) {
      n[r] && (i.removeChild(n[r]), i.appendChild(n[r]));
    }), o && this.animateAll();
  },
  /**
   * Save the current sorting
   */
  save: function() {
    var t = this.options.store;
    t && t.set && t.set(this);
  },
  /**
   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.
   * @param   {HTMLElement}  el
   * @param   {String}       [selector]  default: `options.draggable`
   * @returns {HTMLElement|null}
   */
  closest: function(t, o) {
    return Re(t, o || this.options.draggable, this.el, !1);
  },
  /**
   * Set/get option
   * @param   {string} name
   * @param   {*}      [value]
   * @returns {*}
   */
  option: function(t, o) {
    var n = this.options;
    if (o === void 0)
      return n[t];
    var i = zt.modifyOption(this, t, o);
    typeof i < "u" ? n[t] = i : n[t] = o, t === "group" && tr(n);
  },
  /**
   * Destroy
   */
  destroy: function() {
    xe("destroy", this);
    var t = this.el;
    t[Ae] = null, H(t, "mousedown", this._onTapStart), H(t, "touchstart", this._onTapStart), H(t, "pointerdown", this._onTapStart), this.nativeDraggable && (H(t, "dragover", this), H(t, "dragenter", this)), Array.prototype.forEach.call(t.querySelectorAll("[draggable]"), function(o) {
      o.removeAttribute("draggable");
    }), this._onDrop(), this._disableDelayedDragEvents(), fn.splice(fn.indexOf(this.el), 1), this.el = t = null;
  },
  _hideClone: function() {
    if (!et) {
      if (xe("hideClone", this), V.eventCanceled) return;
      R(ne, "display", "none"), this.options.removeCloneOnHide && ne.parentNode && ne.parentNode.removeChild(ne), et = !0;
    }
  },
  _showClone: function(t) {
    if (t.lastPutMode !== "clone") {
      this._hideClone();
      return;
    }
    if (et) {
      if (xe("showClone", this), V.eventCanceled) return;
      T.parentNode == Q && !this.options.group.revertClone ? Q.insertBefore(ne, T) : lt ? Q.insertBefore(ne, lt) : Q.appendChild(ne), this.options.group.revertClone && this.animate(T, ne), R(ne, "display", ""), et = !1;
    }
  }
};
function Zs(e) {
  e.dataTransfer && (e.dataTransfer.dropEffect = "move"), e.cancelable && e.preventDefault();
}
function Gt(e, t, o, n, i, r, a, s) {
  var l, c = e[Ae], d = c.options.onMove, u;
  return window.CustomEvent && !Xe && !Ft ? l = new CustomEvent("move", {
    bubbles: !0,
    cancelable: !0
  }) : (l = document.createEvent("Event"), l.initEvent("move", !0, !0)), l.to = t, l.from = e, l.dragged = o, l.draggedRect = n, l.related = i || t, l.relatedRect = r || ce(t), l.willInsertAfter = s, l.originalEvent = a, e.dispatchEvent(l), d && (u = d.call(c, l, a)), u;
}
function Fn(e) {
  e.draggable = !1;
}
function el() {
  lo = !1;
}
function tl(e, t, o) {
  var n = ce(Ct(o.el, 0, o.options, !0)), i = 10;
  return t ? e.clientX < n.left - i || e.clientY < n.top && e.clientX < n.right : e.clientY < n.top - i || e.clientY < n.bottom && e.clientX < n.left;
}
function nl(e, t, o) {
  var n = ce(xo(o.el, o.options.draggable)), i = 10;
  return t ? e.clientX > n.right + i || e.clientX <= n.right && e.clientY > n.bottom && e.clientX >= n.left : e.clientX > n.right && e.clientY > n.top || e.clientX <= n.right && e.clientY > n.bottom + i;
}
function ol(e, t, o, n, i, r, a, s) {
  var l = n ? e.clientY : e.clientX, c = n ? o.height : o.width, d = n ? o.top : o.left, u = n ? o.bottom : o.right, f = !1;
  if (!a) {
    if (s && en < c * i) {
      if (!Nt && (Bt === 1 ? l > d + c * r / 2 : l < u - c * r / 2) && (Nt = !0), Nt)
        f = !0;
      else if (Bt === 1 ? l < d + en : l > u - en)
        return -Bt;
    } else if (l > d + c * (1 - i) / 2 && l < u - c * (1 - i) / 2)
      return il(t);
  }
  return f = f || a, f && (l < d + c * r / 2 || l > u - c * r / 2) ? l > d + c / 2 ? 1 : -1 : 0;
}
function il(e) {
  return Me(T) < Me(e) ? 1 : -1;
}
function rl(e) {
  for (var t = e.tagName + e.className + e.src + e.href + e.textContent, o = t.length, n = 0; o--; )
    n += t.charCodeAt(o);
  return n.toString(36);
}
function al(e) {
  pn.length = 0;
  for (var t = e.getElementsByTagName("input"), o = t.length; o--; ) {
    var n = t[o];
    n.checked && pn.push(n);
  }
}
function tn(e) {
  return setTimeout(e, 0);
}
function co(e) {
  return clearTimeout(e);
}
En && J(document, "touchmove", function(e) {
  (V.active || gt) && e.cancelable && e.preventDefault();
});
V.utils = {
  on: J,
  off: H,
  css: R,
  find: Xi,
  is: function(t, o) {
    return !!Re(t, o, t, !1);
  },
  extend: js,
  throttle: Gi,
  closest: Re,
  toggleClass: Ie,
  clone: Qi,
  index: Me,
  nextTick: tn,
  cancelNextTick: co,
  detectDirection: er,
  getChild: Ct
};
V.get = function(e) {
  return e[Ae];
};
V.mount = function() {
  for (var e = arguments.length, t = new Array(e), o = 0; o < e; o++)
    t[o] = arguments[o];
  t[0].constructor === Array && (t = t[0]), t.forEach(function(n) {
    if (!n.prototype || !n.prototype.constructor)
      throw "Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));
    n.utils && (V.utils = ze(ze({}, V.utils), n.utils)), zt.mount(n);
  });
};
V.create = function(e, t) {
  return new V(e, t);
};
V.version = Vs;
var se = [], Tt, uo, fo = !1, zn, Un, mn, At;
function sl() {
  function e() {
    this.defaults = {
      scroll: !0,
      forceAutoScrollFallback: !1,
      scrollSensitivity: 30,
      scrollSpeed: 10,
      bubbleScroll: !0
    };
    for (var t in this)
      t.charAt(0) === "_" && typeof this[t] == "function" && (this[t] = this[t].bind(this));
  }
  return e.prototype = {
    dragStarted: function(o) {
      var n = o.originalEvent;
      this.sortable.nativeDraggable ? J(document, "dragover", this._handleAutoScroll) : this.options.supportPointer ? J(document, "pointermove", this._handleFallbackAutoScroll) : n.touches ? J(document, "touchmove", this._handleFallbackAutoScroll) : J(document, "mousemove", this._handleFallbackAutoScroll);
    },
    dragOverCompleted: function(o) {
      var n = o.originalEvent;
      !this.options.dragOverBubble && !n.rootEl && this._handleAutoScroll(n);
    },
    drop: function() {
      this.sortable.nativeDraggable ? H(document, "dragover", this._handleAutoScroll) : (H(document, "pointermove", this._handleFallbackAutoScroll), H(document, "touchmove", this._handleFallbackAutoScroll), H(document, "mousemove", this._handleFallbackAutoScroll)), ti(), nn(), $s();
    },
    nulling: function() {
      mn = uo = Tt = fo = At = zn = Un = null, se.length = 0;
    },
    _handleFallbackAutoScroll: function(o) {
      this._handleAutoScroll(o, !0);
    },
    _handleAutoScroll: function(o, n) {
      var i = this, r = (o.touches ? o.touches[0] : o).clientX, a = (o.touches ? o.touches[0] : o).clientY, s = document.elementFromPoint(r, a);
      if (mn = o, n || this.options.forceAutoScrollFallback || Ft || Xe || Ot) {
        jn(o, this.options, s, n);
        var l = tt(s, !0);
        fo && (!At || r !== zn || a !== Un) && (At && ti(), At = setInterval(function() {
          var c = tt(document.elementFromPoint(r, a), !0);
          c !== l && (l = c, nn()), jn(o, i.options, c, n);
        }, 10), zn = r, Un = a);
      } else {
        if (!this.options.bubbleScroll || tt(s, !0) === Fe()) {
          nn();
          return;
        }
        jn(o, this.options, tt(s, !1), !1);
      }
    }
  }, Ye(e, {
    pluginName: "scroll",
    initializeByDefault: !0
  });
}
function nn() {
  se.forEach(function(e) {
    clearInterval(e.pid);
  }), se = [];
}
function ti() {
  clearInterval(At);
}
var jn = Gi(function(e, t, o, n) {
  if (t.scroll) {
    var i = (e.touches ? e.touches[0] : e).clientX, r = (e.touches ? e.touches[0] : e).clientY, a = t.scrollSensitivity, s = t.scrollSpeed, l = Fe(), c = !1, d;
    uo !== o && (uo = o, nn(), Tt = t.scroll, d = t.scrollFn, Tt === !0 && (Tt = tt(o, !0)));
    var u = 0, f = Tt;
    do {
      var p = f, h = ce(p), g = h.top, k = h.bottom, D = h.left, S = h.right, y = h.width, w = h.height, x = void 0, M = void 0, P = p.scrollWidth, G = p.scrollHeight, z = R(p), K = p.scrollLeft, oe = p.scrollTop;
      p === l ? (x = y < P && (z.overflowX === "auto" || z.overflowX === "scroll" || z.overflowX === "visible"), M = w < G && (z.overflowY === "auto" || z.overflowY === "scroll" || z.overflowY === "visible")) : (x = y < P && (z.overflowX === "auto" || z.overflowX === "scroll"), M = w < G && (z.overflowY === "auto" || z.overflowY === "scroll"));
      var ue = x && (Math.abs(S - i) <= a && K + y < P) - (Math.abs(D - i) <= a && !!K), ie = M && (Math.abs(k - r) <= a && oe + w < G) - (Math.abs(g - r) <= a && !!oe);
      if (!se[u])
        for (var Y = 0; Y <= u; Y++)
          se[Y] || (se[Y] = {});
      (se[u].vx != ue || se[u].vy != ie || se[u].el !== p) && (se[u].el = p, se[u].vx = ue, se[u].vy = ie, clearInterval(se[u].pid), (ue != 0 || ie != 0) && (c = !0, se[u].pid = setInterval((function() {
        n && this.layer === 0 && V.active._onTouchMove(mn);
        var re = se[this.layer].vy ? se[this.layer].vy * s : 0, ae = se[this.layer].vx ? se[this.layer].vx * s : 0;
        typeof d == "function" && d.call(V.dragged.parentNode[Ae], ae, re, e, mn, se[this.layer].el) !== "continue" || Ki(se[this.layer].el, ae, re);
      }).bind({
        layer: u
      }), 24))), u++;
    } while (t.bubbleScroll && f !== l && (f = tt(f, !1)));
    fo = c;
  }
}, 30), ir = function(t) {
  var o = t.originalEvent, n = t.putSortable, i = t.dragEl, r = t.activeSortable, a = t.dispatchSortableEvent, s = t.hideGhostForTarget, l = t.unhideGhostForTarget;
  if (o) {
    var c = n || r;
    s();
    var d = o.changedTouches && o.changedTouches.length ? o.changedTouches[0] : o, u = document.elementFromPoint(d.clientX, d.clientY);
    l(), c && !c.el.contains(u) && (a("spill"), this.onSpill({
      dragEl: i,
      putSortable: n
    }));
  }
};
function Po() {
}
Po.prototype = {
  startIndex: null,
  dragStart: function(t) {
    var o = t.oldDraggableIndex;
    this.startIndex = o;
  },
  onSpill: function(t) {
    var o = t.dragEl, n = t.putSortable;
    this.sortable.captureAnimationState(), n && n.captureAnimationState();
    var i = Ct(this.sortable.el, this.startIndex, this.options);
    i ? this.sortable.el.insertBefore(o, i) : this.sortable.el.appendChild(o), this.sortable.animateAll(), n && n.animateAll();
  },
  drop: ir
};
Ye(Po, {
  pluginName: "revertOnSpill"
});
function Io() {
}
Io.prototype = {
  onSpill: function(t) {
    var o = t.dragEl, n = t.putSortable, i = n || this.sortable;
    i.captureAnimationState(), o.parentNode && o.parentNode.removeChild(o), i.animateAll();
  },
  drop: ir
};
Ye(Io, {
  pluginName: "removeOnSpill"
});
V.mount(new sl());
V.mount(Io, Po);
function ll() {
  return typeof window < "u" ? window.console : global.console;
}
const cl = ll();
function dl(e) {
  const t = /* @__PURE__ */ Object.create(null);
  return function(n) {
    return t[n] || (t[n] = e(n));
  };
}
const ul = /-(\w)/g, ni = dl((e) => e.replace(ul, (t, o) => o ? o.toUpperCase() : ""));
function $n(e) {
  e.parentElement !== null && e.parentElement.removeChild(e);
}
function oi(e, t, o) {
  const n = o === 0 ? e.children[0] : e.children[o - 1].nextSibling;
  e.insertBefore(t, n);
}
function fl(e, t) {
  return Object.values(e).indexOf(t);
}
function pl(e, t, o, n) {
  if (!e)
    return [];
  const i = Object.values(e), r = t.length - n;
  return [...t].map((s, l) => l >= r ? i.length : i.indexOf(s));
}
function rr(e, t) {
  this.$nextTick(() => this.$emit(e.toLowerCase(), t));
}
function ml(e) {
  return (t) => {
    this.realList !== null && this["onDrag" + e](t), rr.call(this, e, t);
  };
}
function hl(e) {
  return ["transition-group", "TransitionGroup"].includes(e);
}
function gl(e) {
  if (!e || e.length !== 1)
    return !1;
  const [{ type: t }] = e;
  return t ? hl(t.name) : !1;
}
function vl(e, t) {
  return t ? { ...t.props, ...t.attrs } : e;
}
const po = ["Start", "Add", "Remove", "Update", "End"], mo = ["Choose", "Unchoose", "Sort", "Filter", "Clone"], yl = ["Move", ...po, ...mo].map((e) => "on" + e);
let qn = null;
const _l = {
  options: Object,
  list: {
    type: Array,
    required: !1,
    default: null
  },
  noTransitionOnDrag: {
    type: Boolean,
    default: !1
  },
  clone: {
    type: Function,
    default: (e) => e
  },
  tag: {
    type: String,
    default: "div"
  },
  move: {
    type: Function,
    default: null
  },
  componentData: {
    type: Object,
    required: !1,
    default: null
  },
  component: {
    type: String,
    default: null
  },
  modelValue: {
    type: Array,
    required: !1,
    default: null
  }
}, bl = vn({
  name: "VueDraggableNext",
  inheritAttrs: !1,
  emits: [
    "update:modelValue",
    "move",
    "change",
    ...po.map((e) => e.toLowerCase()),
    ...mo.map((e) => e.toLowerCase())
  ],
  props: _l,
  data() {
    return {
      transitionMode: !1,
      noneFunctionalComponentMode: !1,
      headerOffset: 0,
      footerOffset: 0,
      _sortable: {},
      visibleIndexes: [],
      context: {}
    };
  },
  render() {
    const e = this.$slots.default ? this.$slots.default() : null, t = vl(this.$attrs, this.componentData);
    return e ? (this.transitionMode = gl(e), ln(this.getTag(), t, e)) : ln(this.getTag(), t, []);
  },
  created() {
    this.list !== null && this.modelValue !== null && cl.error("list props are mutually exclusive! Please set one.");
  },
  mounted() {
    const e = {};
    po.forEach((i) => {
      e["on" + i] = ml.call(this, i);
    }), mo.forEach((i) => {
      e["on" + i] = rr.bind(this, i);
    });
    const t = Object.keys(this.$attrs).reduce((i, r) => (i[ni(r)] = this.$attrs[r], i), {}), o = Object.assign({}, t, e, {
      onMove: (i, r) => this.onDragMove(i, r)
    });
    !("draggable" in o) && (o.draggable = ">*");
    const n = this.$el.nodeType === 1 ? this.$el : this.$el.parentElement;
    this._sortable = new V(n, o), n.__draggable_component__ = this, this.computeIndexes();
  },
  beforeUnmount() {
    try {
      this._sortable !== void 0 && this._sortable.destroy();
    } catch {
    }
  },
  computed: {
    realList() {
      return this.list ? this.list : this.modelValue;
    }
  },
  watch: {
    $attrs: {
      handler(e) {
        this.updateOptions(e);
      },
      deep: !0
    },
    realList() {
      this.computeIndexes();
    }
  },
  methods: {
    getTag() {
      return this.component ? E(this.component) : this.tag;
    },
    updateOptions(e) {
      for (var t in e) {
        const o = ni(t);
        yl.indexOf(o) === -1 && this._sortable.option(o, e[t]);
      }
    },
    getChildrenNodes() {
      return this.$el.children;
    },
    computeIndexes() {
      this.$nextTick(() => {
        this.visibleIndexes = pl(this.getChildrenNodes(), this.$el.children, this.transitionMode, this.footerOffset);
      });
    },
    getUnderlyingVm(e) {
      const t = fl(this.getChildrenNodes() || [], e);
      if (t === -1)
        return null;
      const o = this.realList[t];
      return { index: t, element: o };
    },
    emitChanges(e) {
      this.$nextTick(() => {
        this.$emit("change", e);
      });
    },
    alterList(e) {
      if (this.list) {
        e(this.list);
        return;
      }
      const t = [...this.modelValue];
      e(t), this.$emit("update:modelValue", t);
    },
    spliceList() {
      const e = (t) => t.splice(...arguments);
      this.alterList(e);
    },
    updatePosition(e, t) {
      const o = (n) => n.splice(t, 0, n.splice(e, 1)[0]);
      this.alterList(o);
    },
    getVmIndex(e) {
      const t = this.visibleIndexes, o = t.length;
      return e > o - 1 ? o : t[e];
    },
    getComponent() {
      return this.$slots.default ? (
        //@ts-ignore
        this.$slots.default()[0].componentInstance
      ) : null;
    },
    resetTransitionData(e) {
      if (!this.noTransitionOnDrag || !this.transitionMode)
        return;
      var t = this.getChildrenNodes();
      t[e].data = null;
      const o = this.getComponent();
      o.children = [], o.kept = void 0;
    },
    onDragStart(e) {
      this.computeIndexes(), this.context = this.getUnderlyingVm(e.item), this.context && (e.item._underlying_vm_ = this.clone(this.context.element), qn = e.item);
    },
    onDragAdd(e) {
      const t = e.item._underlying_vm_;
      if (t === void 0)
        return;
      $n(e.item);
      const o = this.getVmIndex(e.newIndex);
      this.spliceList(o, 0, t), this.computeIndexes();
      const n = { element: t, newIndex: o };
      this.emitChanges({ added: n });
    },
    onDragRemove(e) {
      if (oi(this.$el, e.item, e.oldIndex), e.pullMode === "clone") {
        $n(e.clone);
        return;
      }
      if (!this.context)
        return;
      const t = this.context.index;
      this.spliceList(t, 1);
      const o = { element: this.context.element, oldIndex: t };
      this.resetTransitionData(t), this.emitChanges({ removed: o });
    },
    onDragUpdate(e) {
      $n(e.item), oi(e.from, e.item, e.oldIndex);
      const t = this.context.index, o = this.getVmIndex(e.newIndex);
      this.updatePosition(t, o);
      const n = { element: this.context.element, oldIndex: t, newIndex: o };
      this.emitChanges({ moved: n });
    },
    updateProperty(e, t) {
      e.hasOwnProperty(t) && (e[t] += this.headerOffset);
    },
    onDragMove(e, t) {
      const o = this.move;
      if (!o || !this.realList)
        return !0;
      const n = this.getRelatedContextFromMoveEvent(e), i = this.context, r = this.computeFutureIndex(n, e);
      Object.assign(i, { futureIndex: r });
      const a = Object.assign({}, e, {
        relatedContext: n,
        draggedContext: i
      });
      return o(a, t);
    },
    onDragEnd() {
      this.computeIndexes(), qn = null;
    },
    getTrargetedComponent(e) {
      return e.__draggable_component__;
    },
    getRelatedContextFromMoveEvent({ to: e, related: t }) {
      const o = this.getTrargetedComponent(e);
      if (!o)
        return { component: o };
      const n = o.realList, i = { list: n, component: o };
      if (e !== t && n && o.getUnderlyingVm) {
        const r = o.getUnderlyingVm(t);
        if (r)
          return Object.assign(r, i);
      }
      return i;
    },
    computeFutureIndex(e, t) {
      const o = [...t.to.children].filter((a) => a.style.display !== "none");
      if (o.length === 0)
        return 0;
      const n = o.indexOf(t.related), i = e.component.getVmIndex(n);
      return o.indexOf(qn) !== -1 || !t.willInsertAfter ? i : i + 1;
    }
  }
}), Cl = {
  props: {
    visible: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["close"],
  setup(e) {
    return {
      visibleModal: L(() => e.visible)
    };
  }
};
function wl(e, t, o, n, i, r) {
  return m(), N(Br, { to: "body" }, [
    n.visibleModal ? (m(), b("div", {
      key: 0,
      class: "mask-modal",
      onClick: t[0] || (t[0] = (a) => e.$emit("close"))
    }, [
      O(e.$slots, "default", {}, void 0, !0)
    ])) : A("", !0)
  ]);
}
const Sl = /* @__PURE__ */ F(Cl, [["render", wl], ["__scopeId", "data-v-aa40c81e"]]), El = {
  components: {
    TinyTooltip: nt,
    TinyInput: ut,
    TinyFormItem: yn,
    TinyForm: _n,
    TinyPopover: Ue,
    TinyDialogBox: bn,
    TinyButton: je,
    MetaForm: Ts,
    MaskModal: Sl,
    IconDel: oa(),
    IconEdit: na(),
    IconMore: ta(),
    IconClose: zi()
  },
  inheritAttrs: !1,
  props: {
    item: {
      type: Object,
      default: () => {
      }
    },
    dataScource: {
      type: Object,
      default: () => {
      }
    },
    index: {
      type: Number,
      default: 0
    },
    currentIndex: {
      type: Number,
      default: -1
    },
    // 使用itemClick判断是否由双击触发弹出面板
    itemClick: {
      type: Boolean,
      default: !1
    },
    // 子级弹出层是否在左侧展开
    expand: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["editItem", "changeItem", "deleteItem", "hide"],
  setup(e, { emit: t }) {
    const o = me({}), n = q(!1), i = q(!1), r = q(!1), a = q(0), s = () => {
      n.value = !0;
    }, l = () => {
      r.value = !0, i.value = !0;
    }, c = (y, w) => {
      switch (w) {
        case "delete":
          s();
          break;
        case "openModal":
          t("editItem", { action: "openModal", index: e.index });
          break;
        case "edit":
          t("editItem", { action: "edit", index: e.index }), l();
          break;
        default:
          t("editItem", { index: e.index }), l();
          break;
      }
    }, d = () => {
      t("changeItem", o);
    }, u = () => {
      n.value = !1, t("deleteItem", o);
    }, f = () => {
      i.value = !1, r.value = !1;
    }, p = () => {
      t("hide");
    }, h = q(!1), g = () => {
      i.value = !1;
    }, k = (y) => {
      t("changeItem", { data: y, index: e.index }), i.value = !1;
    };
    We(() => {
      o.option = e.item, o.textField = e.dataScource.textField, o.valueField = e.dataScource.valueField, o.label = e.dataScource.label, o.index = e.index, e.currentIndex !== e.index && g();
    });
    const D = () => {
      e.itemClick && !n.value && l();
    }, S = () => {
      r.value = !1, i.value = !1;
    };
    return gn(() => {
      e.currentIndex === e.index && l();
    }), {
      itemData: o,
      change: d,
      deleteItem: s,
      closeEditOption: f,
      btnClick: c,
      hide: p,
      isShow: n,
      confirm: u,
      editList: l,
      isVisible: i,
      showMask: r,
      closeMask: S,
      top: a,
      isShowModal: h,
      formConfirm: k,
      cancel: g,
      openEdit: D
    };
  }
}, kl = { class: "option-input" }, xl = { class: "left" }, Pl = { class: "right" }, Il = ["onClick"];
function Tl(e, t, o, n, i, r) {
  const a = E("icon-more"), s = E("icon-close"), l = E("meta-form"), c = E("icon-edit"), d = E("tiny-popover"), u = E("tiny-button"), f = E("tiny-dialog-box"), p = E("mask-modal");
  return m(), b(ee, null, [
    v("div", {
      class: Z(["item-content", { "active-item": o.currentIndex === o.index }]),
      onClick: t[1] || (t[1] = (...h) => n.openEdit && n.openEdit(...h))
    }, [
      v("div", kl, [
        v("div", xl, [
          _(a, { class: "tiny-svg-size icon-more" }),
          O(e.$slots, "content", { data: o.item }, void 0, !0)
        ]),
        v("div", Pl, [
          O(e.$slots, "operate", { data: o.item }, () => [
            (m(!0), b(ee, null, we(o.dataScource.btnList, (h) => (m(), b(ee, {
              key: h.type
            }, [
              h.type === "edit" ? (m(), N(d, {
                key: n.itemData.index,
                modelValue: n.isVisible,
                "onUpdate:modelValue": t[0] || (t[0] = (g) => n.isVisible = g),
                placement: "bottom-start",
                "popper-class": ["option-popper", { "fixed-left": o.expand }],
                "visible-arrow": !o.expand,
                title: "",
                width: "295",
                height: "auto",
                trigger: "manual",
                onHide: (g) => n.hide(h)
              }, {
                reference: C(() => [
                  _(c, {
                    class: "tiny-svg-size icon-edit",
                    onClick: (g) => n.btnClick(g, h.type)
                  }, null, 8, ["onClick"])
                ]),
                default: C(() => [
                  n.isVisible ? (m(), b("div", {
                    key: 0,
                    ref_for: !0,
                    ref: "addOptions",
                    class: "add-options",
                    style: Et(`left:${n.itemData.left}px;top:${n.itemData.top}px`)
                  }, [
                    _(s, {
                      class: "tiny-svg-size icon-close",
                      onClick: n.closeEditOption
                    }, null, 8, ["onClick"]),
                    O(e.$slots, "metaForm", {}, () => [
                      _(l, _t({ ref_for: !0 }, n.itemData, {
                        footerbtnHide: "true",
                        onChangeItem: n.change,
                        onCancel: n.cancel,
                        onConfirm: n.formConfirm
                      }), null, 16, ["onChangeItem", "onCancel", "onConfirm"])
                    ], !0),
                    O(e.$slots, "footer", {}, void 0, !0)
                  ], 4)) : A("", !0)
                ]),
                _: 2
              }, 1032, ["modelValue", "popper-class", "visible-arrow", "onHide"])) : (m(), b("span", {
                key: 1,
                class: "item-icon",
                onClick: (g) => n.btnClick(g, h.type)
              }, [
                (m(), N(Ve(h.icon)))
              ], 8, Il))
            ], 64))), 128))
          ], !0)
        ])
      ])
    ], 2),
    n.isShow ? (m(), N(f, {
      key: 0,
      "append-to-body": !0,
      visible: n.isShow,
      title: "提示",
      width: "20%",
      "onUpdate:visible": t[3] || (t[3] = (h) => n.isShow = h)
    }, {
      footer: C(() => [
        _(u, {
          onClick: t[2] || (t[2] = (h) => n.isShow = !1)
        }, {
          default: C(() => t[4] || (t[4] = [
            $("取消", -1)
          ])),
          _: 1,
          __: [4]
        }),
        _(u, {
          type: "danger",
          onClick: n.confirm
        }, {
          default: C(() => t[5] || (t[5] = [
            $("删除", -1)
          ])),
          _: 1,
          __: [5]
        }, 8, ["onClick"])
      ]),
      default: C(() => [
        t[6] || (t[6] = v("span", { class: "switch-tip" }, [
          v("span", null, "确定删除吗？")
        ], -1))
      ]),
      _: 1,
      __: [6]
    }, 8, ["visible"])) : A("", !0),
    _(p, {
      visible: n.showMask && !o.expand,
      onClose: n.closeMask
    }, null, 8, ["visible", "onClose"])
  ], 64);
}
const Al = /* @__PURE__ */ F(El, [["render", Tl], ["__scopeId", "data-v-0407293f"]]), Dl = {
  components: {
    MetaListItem: Al,
    VueDraggableNext: bl
  },
  props: {
    draggable: {
      type: Boolean,
      default: !0
    },
    optionsList: {
      type: Array,
      default: () => []
    },
    name: {
      type: String,
      default: ""
    },
    valueField: {
      type: String,
      default: ""
    },
    textField: {
      type: String,
      default: ""
    },
    btnList: {
      type: Array,
      default: () => []
    },
    // 使用itemClick判断是否由双击触发弹出面板
    itemClick: {
      type: Boolean,
      default: !1
    }
  },
  setup(e, { emit: t }) {
    const o = L(() => e), { appSchemaState: n } = ca(), i = (d) => {
      const u = [...e.optionsList];
      d.data && (u[d.index] = d.data), t("changeItem", u);
    }, r = (d) => {
      t("deleteItem", d);
    }, a = (d) => {
      t("dragEnd", d);
    }, s = (d) => {
      const u = [...e.optionsList];
      switch (d.action) {
        case "openModal":
          t("openModal", { index: d.index });
          break;
        default:
          u[d.index] = d.data, t("changeItem", u);
          break;
      }
    }, l = {
      index: "序号",
      selection: "复选框",
      radio: "单选框",
      expand: "展开行"
    };
    return {
      listItemOption: o,
      changeItem: i,
      deleteItem: r,
      dragEnd: a,
      editItem: s,
      formatName: (d) => {
        if (!d)
          return "";
        let u = "";
        return L(() => {
          if (d.type && (u = l[d.type]), d[e.textField])
            if (d[e.textField].i18nKey) {
              const p = d[e.textField].i18nKey;
              u = n.langs[p][n.currentLang];
            } else
              u = d[e.textField];
          return u;
        });
      }
    };
  }
}, Ol = { key: 1 };
function Ml(e, t, o, n, i, r) {
  const a = E("meta-list-item"), s = E("vue-draggable-next");
  return o.draggable ? (m(), N(s, {
    key: 0,
    class: "dragArea list-group w-full",
    list: o.optionsList,
    handle: ".icon-more",
    onChange: n.dragEnd
  }, {
    default: C(() => [
      (m(!0), b(ee, null, we(o.optionsList, (l, c) => (m(), b("div", {
        key: c,
        class: "option-item"
      }, [
        _(a, {
          item: l,
          index: c,
          itemClick: o.itemClick,
          dataScource: n.listItemOption,
          onChangeItem: n.changeItem,
          onDeleteItem: n.deleteItem,
          onEditItem: n.editItem
        }, {
          content: C(() => [
            O(e.$slots, "content", { data: l }, () => [
              v("span", null, B(l[o.textField] || n.formatName(l)), 1)
            ], !0)
          ]),
          operate: C(() => [
            O(e.$slots, "operate", { data: l }, void 0, !0)
          ]),
          metaForm: C(() => [
            O(e.$slots, "form", { data: l }, void 0, !0)
          ]),
          footer: C(() => [
            O(e.$slots, "footer", { data: l }, void 0, !0)
          ]),
          _: 2
        }, 1032, ["item", "index", "itemClick", "dataScource", "onChangeItem", "onDeleteItem", "onEditItem"])
      ]))), 128))
    ]),
    _: 3
  }, 8, ["list", "onChange"])) : (m(), b("div", Ol, [
    (m(!0), b(ee, null, we(o.optionsList, (l, c) => (m(), b("div", {
      key: c,
      class: "option-item not-draggable"
    }, [
      _(a, {
        item: l,
        index: c,
        itemClick: o.itemClick,
        dataScource: n.listItemOption,
        onChangeItem: n.changeItem,
        onDeleteItem: n.deleteItem,
        onEditItem: n.editItem
      }, {
        content: C(() => [
          O(e.$slots, "content", { data: l }, () => [
            v("span", null, B(l[o.textField] || n.formatName(l)), 1)
          ], !0)
        ]),
        operate: C(() => [
          O(e.$slots, "operate", { data: l }, void 0, !0)
        ]),
        metaForm: C(() => [
          O(e.$slots, "form", { data: l }, void 0, !0)
        ]),
        footer: C(() => [
          O(e.$slots, "footer", { data: l }, void 0, !0)
        ]),
        _: 2
      }, 1032, ["item", "index", "itemClick", "dataScource", "onChangeItem", "onDeleteItem", "onEditItem"])
    ]))), 128))
  ]));
}
const Ll = /* @__PURE__ */ F(Dl, [["render", Ml], ["__scopeId", "data-v-ddb3040f"]]), Dt = me({
  show: !1,
  created: !1
}), Bl = () => ({ openModal: () => {
  Dt.created || (Dt.created = !0), Dt.show = !0;
}, closeModal: () => {
  Dt.show = !1;
} }), Nl = {
  props: {
    width: {
      type: Number,
      default: 239
    },
    top: {
      type: Number,
      default: 0
    }
  },
  setup(e, { emit: t }) {
    const { closeModal: o } = Bl();
    return {
      close: () => {
        o(), t("close");
      },
      modal: Dt
    };
  }
}, Rl = {
  key: 0,
  class: "modal-wrapper"
};
function Vl(e, t, o, n, i, r) {
  return n.modal.created ? qe((m(), b("div", Rl, [
    v("div", {
      class: "modal-mask",
      onClick: t[0] || (t[0] = (...a) => n.close && n.close(...a))
    }),
    v("div", {
      class: "modal-content",
      style: Et({ width: o.width + "px" })
    }, [
      O(e.$slots, "default", {}, void 0, !0)
    ], 4)
  ], 512)), [
    [dt, n.modal.show]
  ]) : A("", !0);
}
const bm = /* @__PURE__ */ F(Nl, [["render", Vl], ["__scopeId", "data-v-2793d67f"]]), Fl = {
  components: {
    ConfigItem: Eo
  },
  inheritAttrs: !1,
  props: {
    meta: {
      type: Object,
      default: () => {
      }
    },
    type: {
      type: String,
      default: "object"
    },
    arrayIndex: {
      type: Number,
      default: -1
    }
  },
  setup(e, { emit: t }) {
    const { locale: o } = hn.global, n = {
      zh_CN: "未命名标题",
      en_US: "Untitled"
    }, i = L(() => {
      var p;
      const s = ((p = e.meta.widget.props) == null ? void 0 : p.modelValue) || [], { title: l, label: c, type: d } = s[e.arrayIndex] || {}, u = l || c;
      return (pa(u) ? u[o.value] : u) || d || n[o.value] || n.zh_CN;
    }), r = L(() => {
      var c, d, u, f;
      const s = [...((u = (d = (c = e.meta) == null ? void 0 : c.properties) == null ? void 0 : d[0]) == null ? void 0 : u.content) || []], l = (f = e.meta.widget.props) == null ? void 0 : f.modelValue;
      return s.length && l && s.forEach((p) => {
        let h = l;
        e.type === "array" && e.arrayIndex > -1 && (h = h[e.arrayIndex]);
        const g = h[p.property];
        p.widget.props.modelValue = typeof g == "boolean" ? g : g || null;
      }), s;
    });
    return {
      title: i,
      properties: r,
      onValueChange: (s, l) => {
        t("update:modelValue", { propertyKey: s, propertyValue: l });
      }
    };
  }
}, zl = { class: "items-container" }, Ul = { class: "title" };
function jl(e, t, o, n, i, r) {
  const a = E("config-item");
  return m(), b("div", zl, [
    v("div", Ul, B(n.title), 1),
    (m(!0), b(ee, null, we(n.properties, (s, l) => (m(), b("div", {
      key: l,
      class: "meta-config-item"
    }, [
      (m(), N(a, {
        key: l,
        property: s,
        "data-prop-index": l,
        "data-group-index": e.index,
        "onUpdate:modelValue": (c) => n.onValueChange(s.property, c)
      }, {
        default: C(() => [
          O(e.$slots, "prefix", { data: s }, void 0, !0),
          O(e.$slots, "suffix", { data: s }, void 0, !0)
        ]),
        _: 2
      }, 1032, ["property", "data-prop-index", "data-group-index", "onUpdate:modelValue"]))
    ]))), 128))
  ]);
}
const ar = /* @__PURE__ */ F(Fl, [["render", jl], ["__scopeId", "data-v-f141a5eb"]]), $l = {
  components: {
    MetaChildItem: ar,
    TinyButton: je,
    IconClose: zi()
  },
  props: {
    meta: {
      type: Object,
      default: () => {
      }
    }
  },
  emits: ["save", "close", "update:modelValue"],
  setup(e, { emit: t }) {
    const o = me({
      show: !1,
      created: !1
    }), n = L(() => {
      var l, c;
      return `编辑${((c = (l = e.meta.label) == null ? void 0 : l.text) == null ? void 0 : c.zh_CN) || e.meta.property || "属性"}`;
    }), i = () => {
      o.show = !1, t("close");
    };
    return {
      title: n,
      modalState: o,
      save: (l) => {
        t("update:modelValue", l), i();
      },
      close: i,
      open: () => {
        o.created || (o.created = !0), o.show = !0;
      },
      onValueChange: ({ propertyKey: l, propertyValue: c }) => {
        var u, f;
        const d = { ...(f = (u = e.meta.widget) == null ? void 0 : u.props) == null ? void 0 : f.modelValue, [l]: c };
        t("update:modelValue", d);
      }
    };
  }
}, ql = { class: "meta-modal-wrap" }, Hl = { class: "property-item" }, Jl = { class: "property-item-header" }, Wl = { class: "header-text" }, Yl = { class: "icon-wrap" }, Xl = { class: "meta-modal-body" }, Gl = { class: "property-item-footer" };
function Kl(e, t, o, n, i, r) {
  const a = E("tiny-button"), s = E("icon-close"), l = E("meta-child-item");
  return m(), b("div", ql, [
    _(a, { onClick: n.open }, {
      default: C(() => [
        $(B(n.title), 1)
      ]),
      _: 1
    }, 8, ["onClick"]),
    n.modalState.created ? qe((m(), b("div", {
      key: 0,
      class: "mask",
      onClick: t[0] || (t[0] = Ne((...c) => n.close && n.close(...c), ["self"]))
    }, [
      v("div", Hl, [
        v("div", Jl, [
          v("span", Wl, B(n.title), 1),
          v("span", Yl, [
            _(s, {
              class: "header-icon",
              onClick: n.close
            }, null, 8, ["onClick"])
          ])
        ]),
        O(e.$slots, "body", {}, () => [
          v("div", Xl, [
            _(l, {
              meta: o.meta,
              "onUpdate:modelValue": n.onValueChange
            }, null, 8, ["meta", "onUpdate:modelValue"])
          ])
        ], !0),
        O(e.$slots, "footer", {}, () => [
          qe(v("div", Gl, [
            _(a, { onClick: n.close }, {
              default: C(() => t[1] || (t[1] = [
                $("关闭", -1)
              ])),
              _: 1,
              __: [1]
            }, 8, ["onClick"]),
            _(a, {
              type: "info",
              onClick: n.save
            }, {
              default: C(() => t[2] || (t[2] = [
                $("保存", -1)
              ])),
              _: 1,
              __: [2]
            }, 8, ["onClick"])
          ], 512), [
            [dt, !1]
          ])
        ], !0)
      ])
    ], 512)), [
      [dt, n.modalState.show]
    ]) : A("", !0)
  ]);
}
const Cm = /* @__PURE__ */ F($l, [["render", Kl], ["__scopeId", "data-v-c53a6f94"]]), Ql = {
  components: {
    MetaChildItem: ar,
    TinyPopover: Ue,
    TinyButton: je
  },
  inheritAttrs: !1,
  props: {
    meta: {
      type: Object,
      default: () => ({})
    }
  },
  setup(e, { emit: t }) {
    return { title: L(() => {
      var i, r;
      return `编辑${((r = (i = e.meta.label) == null ? void 0 : i.text) == null ? void 0 : r.zh_CN) || e.meta.property || "属性"}`;
    }), onValueChange: ({ propertyKey: i, propertyValue: r }) => {
      var s, l;
      const a = { ...(l = (s = e.meta.widget) == null ? void 0 : s.props) == null ? void 0 : l.modelValue, [i]: r };
      t("update:modelValue", a);
    } };
  }
};
function Zl(e, t, o, n, i, r) {
  const a = E("tiny-button"), s = E("meta-child-item"), l = E("tiny-popover");
  return m(), N(l, {
    width: "267",
    trigger: "click",
    placement: "bottom-end",
    "visible-arrow": !0,
    popperClass: "option-popper"
  }, {
    reference: C(() => [
      O(e.$slots, "reference", {}, () => [
        _(a, null, {
          default: C(() => [
            $(B(n.title), 1)
          ]),
          _: 1
        })
      ])
    ]),
    default: C(() => [
      O(e.$slots, "body", {}, () => [
        _(s, {
          meta: o.meta,
          "onUpdate:modelValue": n.onValueChange
        }, null, 8, ["meta", "onUpdate:modelValue"])
      ])
    ]),
    _: 3
  });
}
const wm = /* @__PURE__ */ F(Ql, [["render", Zl]]), sr = "vs", ho = q(sr), Sm = (e) => {
  ho.value = e || sr;
}, ec = {
  name: "MonacoEditor",
  model: {
    event: "change"
  },
  props: {
    original: {
      type: String
    },
    value: {
      type: String,
      required: !0
    },
    language: {
      type: String
    },
    options: {
      type: Object,
      default: () => ({})
    },
    amdRequire: {
      type: Function
    },
    diffEditor: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["change", "editorWillMount", "editorDidMount", "shortcutSave"],
  setup(e, { emit: t }) {
    const o = {
      editor: null,
      monaco: null
    }, n = q(null), i = {
      autoIndent: !0,
      automaticLayout: !0,
      formatOnPaste: !0,
      roundedSelection: !0,
      tabSize: 2
    }, r = () => o.editor && o.editor.focus(), a = () => o.monaco, s = () => o.editor, l = () => e.diffEditor ? o.editor.getModifiedEditor() : o.editor, c = () => e.diffEditor ? o.editor.getOriginalEditor() : o.editor, d = () => o.monaco.editor.getModelMarkers(), u = (f) => {
      t("editorWillMount", o.monaco);
      const p = {
        ...i,
        value: e.value,
        theme: ho.value,
        language: e.language,
        ...e.options
      };
      if (e.diffEditor) {
        o.editor = f.editor.createDiffEditor(n.value, p);
        const g = f.editor.createModel(e.original, e.language), k = f.editor.createModel(e.value, e.language);
        o.editor.setModel({
          original: g,
          modified: k
        });
      } else
        o.editor = f.editor.create(n.value, p);
      o.editor.addCommand(On.KeyMod.CtrlCmd | On.KeyCode.KeyS, () => {
        t("shortcutSave");
      });
      const h = l();
      h.onDidChangeModelContent((g) => {
        const k = h.getValue();
        e.value !== k && t("change", k, g);
      }), t("editorDidMount", o.editor);
    };
    return gn(() => {
      e.amdRequire ? e.amdRequire(["vs/editor/editor.main"], () => {
        o.monaco = window.monaco, Rt(() => {
          u(window.monaco);
        });
      }) : (o.monaco = On, Rt(() => {
        u(o.monaco), o.editor.addAction({
          id: "prettier",
          label: "Prettier",
          precondition: null,
          contextMenuGroupId: "navigation",
          run(f) {
            const p = f.getValue(), h = ao(p, e.options.language);
            h !== p && f.setValue(h);
          }
        });
      }));
    }), Co(() => {
      o.editor && o.editor.dispose();
    }), Le(
      () => e.options,
      (f) => {
        o.editor && l().updateOptions(f);
      },
      {
        deep: !0
      }
    ), Le(
      () => e.value,
      (f) => {
        if (o.editor) {
          const p = l();
          f !== p.getValue() && p.setValue(f);
        }
      }
    ), Le(
      () => e.original,
      (f) => {
        if (o.editor && e.diffEditor) {
          const p = c();
          f !== p.getValue() && p.setValue(f);
        }
      }
    ), Le(
      () => e.language,
      (f) => {
        if (o.editor) {
          const p = l();
          o.monaco.editor.setModelLanguage(p.getModel(), f);
        }
      }
    ), Le(ho, (f) => {
      o.editor && o.monaco.editor.setTheme(f);
    }), {
      getMonaco: a,
      getEditor: s,
      getModifiedEditor: l,
      getOriginalEditor: c,
      initMonaco: u,
      focus: r,
      monacoRef: n,
      getModelMarkers: d
    };
  }
}, tc = { ref: "monacoRef" };
function nc(e, t, o, n, i, r) {
  return m(), b("div", tc, null, 512);
}
const kn = /* @__PURE__ */ F(ec, [["render", nc]]), oc = {
  components: {
    TinySplit: Hr,
    MonacoEditor: kn,
    TinyButton: je,
    TinyDialogBox: bn
  },
  props: {
    buttonText: {
      type: [String, Object],
      default: "编辑代码"
    },
    modelValue: {
      type: [String, Object, Array],
      default: ""
    },
    buttonShowContent: {
      type: Boolean,
      default: !1
    },
    title: {
      type: [String, Object],
      default: "编辑代码"
    },
    language: {
      type: String,
      default: "javascript"
    },
    dataType: String,
    single: {
      type: Boolean,
      default: !1
    },
    theme: {
      type: String
    },
    showFormatBtn: {
      type: Boolean,
      default: !0
    },
    showErrorMsg: {
      type: Boolean,
      default: !0
    },
    tips: {
      // 代码编辑器上方提示：title显示简短的文字描述，demo为显示的示例，点击 “展开示例” 可查看
      type: Object,
      default: () => ({ title: "", demo: "" })
    }
  },
  emits: ["save", "open", "close"],
  setup(e, { emit: t }) {
    var D;
    const { locale: o } = hn.global, n = me({
      show: !1,
      created: !1,
      errorMsg: "",
      showEditorDemo: !1,
      splitWidth: (D = e.tips) != null && D.demo ? 0.7 : 1
    }), i = q(""), r = q(null), a = L(() => {
      var S;
      return ((S = e.buttonText) == null ? void 0 : S[o.value]) ?? e.buttonText;
    }), s = L(() => {
      var S;
      return ((S = e.title) == null ? void 0 : S[o.value]) ?? e.title;
    }), l = L(() => {
      var S, y, w;
      return ((y = (S = e.tips) == null ? void 0 : S.title) == null ? void 0 : y[o.value]) ?? ((w = e.tips) == null ? void 0 : w.title);
    }), c = L(() => {
      var S, y, w;
      return ((y = (S = e.tips) == null ? void 0 : S.demo) == null ? void 0 : y[o.value]) ?? ((w = e.tips) == null ? void 0 : w.demo);
    }), d = "编辑代码";
    We(() => {
      const { modelValue: S, dataType: y } = e, w = y ? (S == null ? void 0 : S.value) || "" : S;
      i.value = typeof w == "string" ? w : JSON.stringify(w, null, 2);
    });
    const u = () => {
      n.show = !1, t("close");
    }, f = () => {
      n.created || (n.created = !0), n.show = !0, t("open"), Rt(() => window.dispatchEvent(new Event("resize")));
    }, p = (S = ((y) => (y = r.value) == null ? void 0 : y.getEditor().getValue())()) => {
      let w;
      if (e.language === "json" && S)
        try {
          w = JSON.parse(S), n.errorMsg = "";
        } catch (x) {
          n.errorMsg = x;
        }
      return w;
    };
    return {
      save: () => {
        var M;
        const { language: S, dataType: y, single: w } = e, x = ao((M = r.value) == null ? void 0 : M.getEditor().getValue(), S);
        if (t("save", { content: x }), !w) {
          let P = x;
          const G = Function;
          try {
            y ? P = P === "" ? "" : { type: y, value: P } : S === "json" ? P = new G(`return ${x}`)() : P = typeof e.modelValue == "string" ? x : JSON.parse(x);
          } catch {
          }
          t("update:modelValue", P);
        }
        u();
      },
      close: u,
      open: f,
      formatCode: () => {
        var y, w;
        let S = (y = r.value) == null ? void 0 : y.getEditor().getValue();
        if (S)
          try {
            S = ao(S, "json"), (w = r.value) == null || w.getEditor().setValue(S);
          } catch {
          }
      },
      editorDidMount: (S) => {
        S.onDidChangeModelContent(() => {
          const y = S.getValue();
          p(y);
        });
      },
      buttonLabel: a,
      titleLabel: s,
      editorTipsTitle: l,
      editorTipsDemo: c,
      editor: r,
      editorState: n,
      value: i,
      EDIT_CODE_TEXT: d,
      options: {
        language: e.language,
        minimap: {
          enabled: !1
        }
      },
      locale: o
    };
  }
}, ic = { class: "editor-wrap" }, rc = { class: "text-content text-ellipsis-multiple text-line-clamp" }, ac = { class: "source-code" }, sc = {
  key: 0,
  class: "header-tips-container"
}, lc = ["title"], cc = { class: "source-code-split-panel-wrapper" }, dc = {
  key: 0,
  class: "source-code-split-panel-wrapper-right"
}, uc = { class: "header-tips-demo-content lowcode-scrollbar-thin" }, fc = {
  key: 1,
  class: "error-msg"
}, pc = { class: "btn-box" };
function mc(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-button"), l = E("monaco-editor"), c = E("tiny-split"), d = E("tiny-dialog-box");
  return m(), b("div", ic, [
    O(e.$slots, "default", { open: n.open }, () => [
      o.buttonShowContent ? (m(), b("div", {
        key: 0,
        class: Z(["full-width", { "empty-color": n.value === "" }]),
        onClick: t[0] || (t[0] = (...u) => n.open && n.open(...u))
      }, [
        v("span", rc, B(n.value === "" ? n.buttonLabel : n.value), 1),
        _(a, {
          class: "edit-icon",
          name: "to-edit"
        })
      ], 2)) : (m(), N(s, {
        key: 1,
        class: "edit-btn",
        onClick: n.open
      }, {
        default: C(() => [
          O(e.$slots, "icon", {}, void 0, !0),
          [o.buttonText[n.locale], o.buttonText].includes(n.EDIT_CODE_TEXT) ? (m(), N(a, {
            key: 0,
            name: "page-schema",
            class: "edit-btn-icon"
          })) : A("", !0),
          $(" " + B(n.buttonLabel), 1)
        ]),
        _: 3
      }, 8, ["onClick"]))
    ], !0),
    _(d, {
      visible: n.editorState.show,
      "onUpdate:visible": t[2] || (t[2] = (u) => n.editorState.show = u),
      title: n.titleLabel,
      width: "50vw",
      class: "meta-code-editor-dialog-box",
      "append-to-body": "",
      "close-on-click-modal": !1
    }, {
      footer: C(() => [
        v("div", pc, [
          o.language === "json" && o.showFormatBtn ? (m(), N(s, {
            key: 0,
            class: "format-btn",
            plain: "",
            type: "danger",
            onClick: n.formatCode
          }, {
            default: C(() => [
              $(B(e.$t("common.format")), 1)
            ]),
            _: 1
          }, 8, ["onClick"])) : A("", !0),
          v("div", null, [
            _(s, { onClick: n.close }, {
              default: C(() => [
                $(B(e.$t("common.cancel")), 1)
              ]),
              _: 1
            }, 8, ["onClick"]),
            _(s, {
              type: "primary",
              onClick: n.save
            }, {
              default: C(() => [
                $(B(e.$t("common.save")), 1)
              ]),
              _: 1
            }, 8, ["onClick"])
          ])
        ])
      ]),
      default: C(() => [
        v("div", ac, [
          n.editorTipsTitle ? (m(), b("div", sc, [
            v("span", {
              class: "header-tips-title",
              title: n.editorTipsTitle
            }, B(n.editorTipsTitle), 9, lc)
          ])) : A("", !0),
          v("div", cc, [
            _(c, {
              modelValue: n.editorState.splitWidth,
              "onUpdate:modelValue": t[1] || (t[1] = (u) => n.editorState.splitWidth = u)
            }, {
              left: C(() => [
                _(l, {
                  ref: "editor",
                  class: "source-code-content",
                  value: n.value,
                  options: n.options,
                  onEditorDidMount: n.editorDidMount
                }, null, 8, ["value", "options", "onEditorDidMount"])
              ]),
              right: C(() => [
                n.editorTipsDemo ? (m(), b("div", dc, [
                  v("div", uc, [
                    v("span", null, B(e.$t("common.exampleCode")), 1),
                    v("pre", null, [
                      v("code", null, B(n.editorTipsDemo), 1)
                    ])
                  ])
                ])) : A("", !0)
              ]),
              _: 1
            }, 8, ["modelValue"])
          ]),
          o.showErrorMsg ? (m(), b("div", fc, B(n.editorState.errorMsg), 1)) : A("", !0)
        ])
      ]),
      _: 1
    }, 8, ["visible", "title"])
  ]);
}
const Em = /* @__PURE__ */ F(oc, [["render", mc], ["__scopeId", "data-v-ad90f8a6"]]), xt = {
  DESCRIPTION_TYPE: {
    INFO: "info",
    WARNING: "warning",
    ERROR: "error"
  }
}, hc = {
  props: {
    type: {
      type: String,
      default: xt.DESCRIPTION_TYPE.INFO
    },
    text: {
      type: String,
      default: ""
    },
    footer: {
      type: Object,
      default: () => ({})
    },
    border: {
      type: Boolean,
      default: !1
    },
    visible: {
      type: Boolean,
      default: !0
    }
  },
  setup(e, { emit: t }) {
    const o = q(!0), n = me({
      wrapper: !0,
      warning: e.type === xt.DESCRIPTION_TYPE.WARNING,
      error: e.type === xt.DESCRIPTION_TYPE.ERROR
    }), i = () => {
      o.value = !1, t("close");
    };
    return We(() => {
      n.warning = e.type === xt.DESCRIPTION_TYPE.WARNING, n.error = e.type === xt.DESCRIPTION_TYPE.ERROR, o.value = e.visible;
    }), {
      showDescription: o,
      classObject: n,
      closeDescription: i
    };
  }
}, gc = { class: "content" }, vc = { class: "footer" }, yc = ["href"];
function _c(e, t, o, n, i, r) {
  return qe((m(), b("div", {
    class: Z([n.classObject, { border: o.border }])
  }, [
    v("div", gc, [
      O(e.$slots, "content", {}, () => [
        $(B(o.text), 1)
      ], !0)
    ]),
    v("div", vc, [
      v("div", null, [
        O(e.$slots, "footer-left", {}, () => [
          v("a", {
            href: o.footer.href,
            target: "_blank",
            class: "footer-text link"
          }, B(o.footer.text), 9, yc)
        ], !0)
      ]),
      v("div", null, [
        O(e.$slots, "footer-right", {}, () => [
          v("div", {
            class: "footer-text",
            onClick: t[0] || (t[0] = (...a) => n.closeDescription && n.closeDescription(...a))
          }, B(o.footer.confirm), 1)
        ], !0)
      ])
    ])
  ], 2)), [
    [dt, n.showDescription]
  ]);
}
const lr = /* @__PURE__ */ F(hc, [["render", _c], ["__scopeId", "data-v-731c2f66"]]), bc = {
  components: {
    MetaDescription: lr
  },
  props: {
    title: {
      type: String,
      default: ""
    },
    src: {
      type: String,
      default: ""
    },
    cover: {
      type: String,
      default: ""
    }
  },
  setup() {
    return {
      isVscodeEnvironment: window.vscodeBridge
    };
  }
}, Cc = ["href"], wc = ["src", "alt"], Sc = {
  key: 1,
  class: "guide-video",
  controls: ""
}, Ec = ["src"];
function kc(e, t, o, n, i, r) {
  const a = E("meta-description");
  return m(), N(a, { class: "block-guide" }, {
    content: C(() => [
      v("div", null, B(o.title), 1),
      v("div", null, [
        O(e.$slots, "video", {}, () => [
          t[0] || (t[0] = $("请观看指引视频", -1))
        ], !0)
      ]),
      n.isVscodeEnvironment ? (m(), b("a", {
        key: 0,
        href: o.src,
        target: "_blank"
      }, [
        v("img", {
          class: "guide-video",
          src: o.cover,
          alt: o.cover
        }, null, 8, wc)
      ], 8, Cc)) : (m(), b("video", Sc, [
        v("source", {
          src: o.src,
          type: "video/mp4"
        }, null, 8, Ec)
      ]))
    ]),
    _: 3
  });
}
const km = /* @__PURE__ */ F(bc, [["render", kc], ["__scopeId", "data-v-9a1a4d45"]]), xc = {
  props: {
    name: {
      type: String,
      default: "cross"
    },
    svgClass: {
      type: String,
      default: ""
    }
  },
  setup(e) {
    return {
      isTinyIcon: L(() => e.name.toLowerCase().indexOf("icon") === 0)
    };
  }
}, Pc = { class: "public-icon" };
function Ic(e, t, o, n, i, r) {
  const a = E("svg-icon");
  return m(), b("span", Pc, [
    n.isTinyIcon ? (m(), N(Ve(o.name), { key: 0 })) : (m(), N(a, {
      key: 1,
      name: o.name,
      class: Z(o.svgClass)
    }, null, 8, ["name", "class"]))
  ]);
}
const Tc = /* @__PURE__ */ F(xc, [["render", Ic]]), { OPEN_DELAY: Ac } = Sn, Dc = {
  components: {
    MonacoEditor: kn,
    PublicIcon: Tc,
    TinyTooltip: nt
  },
  props: {
    value: {
      type: String,
      default: ""
    },
    options: {
      type: Object,
      default: () => ({})
    },
    showFormatBtn: {
      type: Boolean,
      default: !1
    },
    showFullScreenBtn: {
      type: Boolean,
      default: !0
    }
  },
  emits: ["editorDidMount", "change", "fullscreenChange", "shortcutSave"],
  setup(e, { emit: t }) {
    const o = q(null), n = q(!1), i = L(() => ({
      language: "javascript",
      lineNumbers: !1,
      minimap: {
        enabled: !1
      },
      ...e.options
    })), r = () => {
      var d, u;
      return (u = (d = o.value) == null ? void 0 : d.getEditor()) == null ? void 0 : u.getValue();
    }, a = () => o.value.getEditor(), s = () => {
      let d = a().getValue();
      const u = Function;
      try {
        if (d = new u(`return ${d}`)(), d instanceof Date)
          return {
            type: "JSExpression",
            value: a().getValue()
          };
      } catch {
      }
      return d;
    }, l = () => {
      const d = s();
      a().setValue(typeof d == "string" ? d.trim() : JSON.stringify(d, null, 2));
    };
    return Nr(() => {
      o.value.initMonaco(o.value.getMonaco());
    }), Rr(() => {
      o.value.getEditor().dispose();
    }), {
      editorOptions: i,
      editor: o,
      getEditor: a,
      getEditorValue: r,
      fullscreen: n,
      switchFullScreen: (d) => {
        n.value = d, t("fullscreenChange", d);
      },
      getValue: s,
      formatCode: l,
      OPEN_DELAY: Ac
    };
  }
}, Oc = { class: "editor-container-content" }, Mc = { class: "toolbar" }, Lc = { class: "toolbar-start" }, Bc = { key: 1 };
function Nc(e, t, o, n, i, r) {
  const a = E("public-icon"), s = E("tiny-tooltip"), l = E("monaco-editor", !0);
  return m(), b("div", {
    class: Z(["editor-container", { "editor-container-full": n.fullscreen }])
  }, [
    n.fullscreen ? O(e.$slots, "fullscreenHead", { key: 0 }, void 0, !0) : A("", !0),
    v("div", Oc, [
      v("div", Mc, [
        v("div", Lc, [
          O(e.$slots, "toolbarStart", {}, void 0, !0)
        ]),
        v("div", {
          class: Z(["buttons", { "monaco-btn-fullscreen": n.fullscreen }]),
          id: "icon-buttons"
        }, [
          O(e.$slots, "buttons", {}, void 0, !0),
          o.showFormatBtn && o.options.language === "json" ? (m(), N(s, {
            key: 0,
            content: "格式化",
            placement: "top",
            "open-delay": n.OPEN_DELAY.Default,
            effect: "light"
          }, {
            default: C(() => [
              _(a, {
                name: "json",
                onClick: n.formatCode
              }, null, 8, ["onClick"])
            ]),
            _: 1
          }, 8, ["open-delay"])) : A("", !0),
          o.showFullScreenBtn ? (m(), b("span", Bc, [
            n.fullscreen ? (m(), N(s, {
              key: 1,
              content: "退出全屏",
              effect: "light",
              placement: "top",
              "open-delay": n.OPEN_DELAY.Default
            }, {
              default: C(() => [
                _(a, {
                  name: "cancel-full-screen",
                  onClick: t[1] || (t[1] = (c) => n.switchFullScreen(!1))
                })
              ]),
              _: 1
            }, 8, ["open-delay"])) : (m(), N(s, {
              key: 0,
              effect: "light",
              content: "全屏",
              placement: "top",
              "open-delay": n.OPEN_DELAY.Default
            }, {
              default: C(() => [
                _(a, {
                  name: "full-screen",
                  onClick: t[0] || (t[0] = (c) => n.switchFullScreen(!0))
                })
              ]),
              _: 1
            }, 8, ["open-delay"]))
          ])) : A("", !0)
        ], 2)
      ]),
      _(l, {
        ref: "editor",
        class: "editor",
        value: o.value,
        options: n.editorOptions,
        language: "javascript",
        onEditorDidMount: t[2] || (t[2] = (c) => e.$emit("editorDidMount", c)),
        onShortcutSave: t[3] || (t[3] = (c) => e.$emit("shortcutSave", c)),
        onChange: t[4] || (t[4] = (c) => e.$emit("change", c))
      }, null, 8, ["value", "options"])
    ]),
    n.fullscreen ? O(e.$slots, "fullscreenFooter", { key: 1 }, void 0, !0) : A("", !0)
  ], 2);
}
const xm = /* @__PURE__ */ F(Dc, [["render", Nc], ["__scopeId", "data-v-661433e3"]]), Rc = {
  key: 0,
  class: "version-v"
}, Vc = ["onClick"], Fc = ["onClick"], zc = {
  key: 1,
  class: "empty"
}, Uc = /* @__PURE__ */ vn({
  __name: "BlockHistoryList",
  props: {
    history: {
      type: Array,
      default: () => []
    },
    isBlockManage: {
      type: Boolean,
      default: !1
    },
    lastVersion: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["preview", "restore"],
  setup(e) {
    return (t, o) => (m(), b(ee, null, [
      e.history.length ? (m(), N($e(Jr), {
        key: 0,
        data: e.history,
        "row-id": "id",
        height: "300"
      }, {
        default: C(() => [
          e.isBlockManage ? (m(), N($e(qt), {
            key: 0,
            field: "version",
            title: "版本号"
          }, {
            default: C((n) => [
              $(B(n.row.version) + " ", 1),
              n.row.version === e.lastVersion.versions ? (m(), b("span", Rc, "最新")) : A("", !0)
            ]),
            _: 1
          })) : A("", !0),
          _($e(qt), {
            field: "updated_at",
            title: "发布时间"
          }, {
            default: C((n) => [
              $(B($e($i)(n.row.updated_at, "yyyy/MM/dd hh:mm:ss")), 1)
            ]),
            _: 1
          }),
          _($e(qt), {
            field: "message",
            title: "描述"
          }),
          _($e(qt), {
            width: "90",
            field: "operation",
            title: "操作"
          }, {
            default: C((n) => [
              v("span", {
                class: "operation-text",
                onClick: (i) => t.$emit("preview", n.row)
              }, "预览", 8, Vc),
              e.isBlockManage ? A("", !0) : (m(), b("span", {
                key: 0,
                class: "operation-text",
                onClick: (i) => t.$emit("restore", n.row)
              }, "还原", 8, Fc))
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["data"])) : A("", !0),
      e.history.length ? A("", !0) : (m(), b("div", zc, "暂无数据"))
    ], 64));
  }
}), Pm = /* @__PURE__ */ F(Uc, [["__scopeId", "data-v-2eae930f"]]), jc = {
  components: {
    TinyPopover: Ue
  },
  props: {
    data: {
      type: Object,
      default: () => ({})
    }
  },
  setup(e) {
    var y, w;
    const {
      confirm: t
    } = Cn(), {
      pageState: o,
      canvasApi: n,
      getSchema: i
    } = He(), {
      addBlockProperty: r,
      removePropertyLink: a,
      getCurrentBlock: s,
      editBlockProperty: l
    } = wn(), {
      PLUGIN_NAME: c,
      activePlugin: d
    } = ot(), {
      schema: u
    } = (i == null ? void 0 : i()) || {}, f = me({
      newPropertyName: ""
    }), p = ((w = (y = u == null ? void 0 : u.properties) == null ? void 0 : y[0]) == null ? void 0 : w.content) || [], h = L(() => !!e.data.linked);
    return {
      state: f,
      isLinked: h,
      unLink: (x) => {
        t({
          title: "提示",
          message: "您确定要取消关联吗?",
          exec: () => {
            var P;
            ((P = o == null ? void 0 : o.currentSchema) == null ? void 0 : P.id) && (a({
              componentProperty: x
            }), Kt().addHistory());
          }
        });
      },
      addProperty: (x) => {
        f.newPropertyName = "", t({
          title: "属性名称",
          message: {
            render() {
              return _("div", null, [_(ut, {
                placeholder: "请输入字段名称",
                modelValue: f.newPropertyName,
                "onUpdate:modelValue": (M) => f.newPropertyName = M
              }, null)]);
            }
          },
          exec() {
            var z, K;
            const {
              schema: {
                id: M,
                componentName: P
              }
            } = ((K = (z = n.value) == null ? void 0 : z.getCurrent) == null ? void 0 : K.call(z)) || {}, G = so(!0, {}, x, {
              property: f.newPropertyName || `${x.property}${M}`,
              linked: {
                id: M,
                componentName: P,
                property: x.property
              }
            });
            r(G, s()), Kt().addHistory();
          }
        });
      },
      editProperty: (x) => {
        var z, K, oe;
        const {
          schema: {
            id: M,
            componentName: P
          }
        } = ((K = (z = n.value) == null ? void 0 : z.getCurrent) == null ? void 0 : K.call(z)) || {};
        (oe = e.data) != null && oe.linked && a({
          componentProperty: e.data
        }), x.linked = {
          id: M,
          componentName: P,
          property: e.data.property
        };
        const G = e.data.linked || {};
        Object.assign(G, {
          ...x.linked,
          blockProperty: x.property
        }), Object.assign(e.data, {
          linked: G
        }), l(x, e.data), Kt().addHistory();
      },
      properties: p,
      openBlockSetting: () => {
        d(c.BlockManage).then((x) => {
          x.openSettingPanel({
            item: s()
          });
        });
      }
    };
  }
}, $c = { class: "icon-wrap bind-prop" }, qc = { class: "icon-wrap add-prop" }, Hc = { class: "context-menu" }, Jc = ["onClick"];
function Wc(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-popover");
  return m(), N(s, {
    class: "block-link-field",
    "popper-class": "option-popper block-new-attr-popover",
    "visible-arrow": !1
  }, {
    reference: C(() => [
      v("div", null, [
        v("span", $c, [
          _(a, { name: "block-bind-prop" })
        ]),
        v("span", qc, [
          _(a, { name: "block-add-prop" })
        ])
      ])
    ]),
    default: C(() => [
      v("ul", Hc, [
        n.isLinked ? (m(), b("li", {
          key: 0,
          class: "menu-item",
          onClick: t[0] || (t[0] = (l) => n.unLink(o.data))
        }, "取消关联")) : (m(), b("li", {
          key: 1,
          class: "menu-item",
          onClick: t[1] || (t[1] = (l) => n.addProperty(o.data))
        }, [
          _(a, { name: "plus-circle" }),
          t[3] || (t[3] = v("span", null, "创建并链接新属性", -1))
        ])),
        v("li", {
          class: "menu-item",
          onClick: t[2] || (t[2] = (...l) => n.openBlockSetting && n.openBlockSetting(...l))
        }, [
          _(a, { name: "setting" }),
          t[4] || (t[4] = v("span", null, "打开属性面板", -1))
        ]),
        (m(!0), b(ee, null, we(n.properties, (l) => {
          var c, d;
          return m(), b("li", {
            key: l.property,
            class: "menu-item property"
          }, [
            v("span", null, B(l.property), 1),
            l.property !== ((d = (c = o.data) == null ? void 0 : c.linked) == null ? void 0 : d.blockProperty) ? (m(), b("span", {
              key: 0,
              class: "link-item",
              onClick: (u) => n.editProperty(l)
            }, " 关联 ", 8, Jc)) : A("", !0)
          ]);
        }), 128))
      ])
    ]),
    _: 1
  });
}
const Im = /* @__PURE__ */ F(jc, [["render", Wc], ["__scopeId", "data-v-fd3ff2e0"]]);
/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
process.env.NODE_ENV !== "production" && Object.freeze({});
process.env.NODE_ENV !== "production" && Object.freeze([]);
const Yc = (e) => {
  const t = /* @__PURE__ */ Object.create(null);
  return (o) => t[o] || (t[o] = e(o));
}, Xc = Yc((e) => e.charAt(0).toUpperCase() + e.slice(1)), Gc = {
  components: {
    TinyPopover: Ue
  },
  props: {
    data: {
      type: Object,
      default: () => ({})
    }
  },
  setup(e) {
    var D, S;
    const {
      confirm: t
    } = Cn(), {
      pageState: o
    } = He(), {
      addBlockEvent: n,
      removeEventLink: i,
      getCurrentBlock: r,
      appendEventEmit: a
    } = wn(), {
      PLUGIN_NAME: s,
      activePlugin: l
    } = ot(), {
      schema: c
    } = ((S = (D = He()) == null ? void 0 : D.getSchema) == null ? void 0 : S.call(D)) || {}, d = (c == null ? void 0 : c.events) || [], u = Object.entries(d).map(([y, w]) => ({
      name: y,
      ...w
    }));
    return {
      isLinked: L(() => !!e.data.linked),
      unLink: (y) => {
        t({
          title: "提示",
          message: "您确定要取消关联吗?",
          exec: () => {
            var x;
            ((x = o == null ? void 0 : o.currentSchema) == null ? void 0 : x.id) && i(y);
          }
        });
      },
      addEvent: (y) => {
        const w = me({
          name: ""
        }), x = /^[A-Za-z]\w*?\w$/, M = {
          name: [{
            pattern: x,
            message: "首字符为字母, 其它是单字字符"
          }]
        };
        let P = "";
        const G = (z) => {
          P = z;
        };
        t({
          title: "新建区块事件",
          status: "custom",
          message: {
            render() {
              return _("div", null, [_("div", null, [$("此新区块事件将自动链接到此组件事件")]), _("br", null, null), _(_n, {
                "show-message": !0,
                "label-width": "0",
                model: w,
                rules: M
              }, {
                default: () => [_(yn, {
                  prop: "name"
                }, {
                  default: () => [_(ut, {
                    modelValue: w.name,
                    "onUpdate:modelValue": (z) => w.name = z,
                    placeholder: "请输入事件名",
                    onChange: G
                  }, null)]
                })]
              })]);
            }
          },
          exec() {
            var ue, ie;
            if (!x.test(P))
              return;
            const {
              schema: {
                id: z,
                componentName: K
              }
            } = ((ie = (ue = He().canvasApi.value) == null ? void 0 : ue.getCurrent) == null ? void 0 : ie.call(ue)) || {}, oe = so(!0, {}, y.metaEvent, {
              linked: {
                id: z,
                componentName: K,
                event: y.eventName
              }
            });
            n({
              name: `on${Xc(P.replace(/^on/i, ""))}`,
              event: oe
            }, r()), a({
              eventName: P,
              functionName: y.ref
            });
          }
        });
      },
      editEvent: (y, w) => {
        var z, K;
        const {
          schema: {
            id: x,
            componentName: M
          }
        } = ((K = (z = He().canvasApi.value) == null ? void 0 : z.getCurrent) == null ? void 0 : K.call(z)) || {};
        w.linkedEventName && i(w.linkedEventName);
        const G = so(!0, {}, w.metaEvent, {
          linked: {
            id: x,
            componentName: M,
            event: w.eventName
          }
        });
        n({
          name: y.name,
          event: G
        }, r()), a({
          eventName: y.name,
          functionName: w.ref
        });
      },
      eventsList: u,
      openBlockSetting: () => {
        l(s.BlockManage).then((y) => {
          y.openSettingPanel({
            item: r()
          });
        });
      }
    };
  }
}, Kc = { class: "context-menu" }, Qc = ["onClick"];
function Zc(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-popover");
  return m(), N(s, {
    "popper-class": "quick",
    "visible-arrow": !1
  }, {
    reference: C(() => t[3] || (t[3] = [
      v("span", { class: "link-icon" }, "+", -1)
    ])),
    default: C(() => [
      v("ul", Kc, [
        n.isLinked ? (m(), b("li", {
          key: 0,
          class: "menu-item",
          onClick: t[0] || (t[0] = (l) => n.unLink(o.data.linkedEventName))
        }, "取消关联")) : (m(), b("li", {
          key: 1,
          class: "menu-item add-event",
          onClick: t[1] || (t[1] = (l) => n.addEvent(o.data))
        }, [
          _(a, { name: "plus-circle" }),
          t[4] || (t[4] = $(" 新建事件 ", -1))
        ])),
        v("li", {
          class: "menu-item",
          onClick: t[2] || (t[2] = (...l) => n.openBlockSetting && n.openBlockSetting(...l))
        }, "管理事件"),
        (m(!0), b(ee, null, we(n.eventsList, (l) => {
          var c;
          return m(), b("li", {
            key: l.name,
            class: "menu-item"
          }, [
            $(B(l.name) + " ", 1),
            l.name !== ((c = o.data) == null ? void 0 : c.linkedEventName) ? (m(), b("span", {
              key: 0,
              class: "link-item",
              onClick: (d) => n.editEvent(l, o.data)
            }, "关联", 8, Qc)) : A("", !0)
          ]);
        }), 128))
      ])
    ]),
    _: 1
  });
}
const Tm = /* @__PURE__ */ F(Gc, [["render", Zc], ["__scopeId", "data-v-1826f617"]]), ed = {
  components: {
    MetaDescription: lr
  },
  setup() {
    const { getCurrentBlock: e } = wn(), { PLUGIN_NAME: t, activePlugin: o } = ot();
    return {
      openBlockSetting: () => {
        o(t.BlockManage).then((i) => {
          i.openSettingPanel({ item: e() });
        });
      }
    };
  }
};
function td(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("meta-description");
  return m(), N(s, { class: "description" }, {
    content: C(() => [
      v("div", {
        class: "setting-block",
        onClick: t[0] || (t[0] = (...l) => n.openBlockSetting && n.openBlockSetting(...l))
      }, [
        _(a, { name: "block-add-prop" }),
        t[1] || (t[1] = v("span", null, "设置区块暴露属性", -1))
      ])
    ]),
    _: 1
  });
}
const Am = /* @__PURE__ */ F(ed, [["render", td], ["__scopeId", "data-v-cdc0cf88"]]), nd = {
  key: 0,
  class: "table-selection"
}, od = { class: "block-item-img" }, id = ["src"], rd = {
  key: 2,
  class: "top-left"
}, ii = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA11JREFUaEPtmUvIVVUYhp83CIJKpIsOEsSBAxEiEAwqRDGDBCmRkCwhwQQbSANDEbwNgvgzxEIUCwRBEB2EgiQR5MA/RcHImRBKkYhYaAliULzxwT6y3O1zzv735Rx+PN/srP1d3ve7rLX2PmKSiyY5fkYEhl3BUQVGFaiZgQdayPZTwOvA7Jp+2zI/C5yV9FcnQJ7AB8DetqI35HdM0qZuBL4HFjYUqC03pyUteigIPMC0rXSW8Ws77YzSFRgRKJPdMjqtVcD2DOC6pH/LAKmq0zgB2+uAXcCTwD1gs6Q9VQH2s2uDwO/A00ngv4EnJP3TD0zneZaEt4GvJB3uZdcoAdsBPAjkZaakX8sQsP0ecDDR/UhSVLRQGiUQEWzfAKYl0e4CU8rMgu0XgXMFSNdJ+rKIQRsE1gBjwDPAbWCLpH39sm97CvADMLeL7kpJR/PPGieQ9PGzkm72A57oB7i3Ev1vsstjZylmaJmkU6nP1giUBZ613U5gW2LzGzAHiEE+kKz/AbwhaTwhPtyT2PZK4EiO8MuSop1iprYAHyfPrwDLJV3Kng+PgO3ngZ9y4NdL2p9rk93Ah8naj8AKSVdbayHb0c+PASck/VkwfI8CASQd2v2S1nfZbeI8WJU8O53NzLHkmt/MZc72IWB1Fuxi9Lekk7ms5oe27wXR9rfAksTPCWAqsCBbq0/A9qfAxoIsfgJ8Lum67e3AjkQnzo55kq71Gn7bATZ6/oWc7fRGCNgO4EGgm5wJEkB+P18qKbbNvmI73smDxHMFytUrYDtaJlonldgeg9TjPZBtlPRZX+SJgu2XgJiBmKNUqhGw/RpwPBvajsMvJG2wvTQjcf9dNYkYl7X3JwK+o2v7TeDrnO0FSfM7a/mvEoX7bbYVxjDNTJwdlvRuEix2o61xtQYeydbHJb1SBXziN8inB93EKmA7hifA32cNnJIU34/+J7ajCu8AccWOgb5ch0DY2o6DbVbmZ8IEAvyyBMR54FVJd+oCK2tf+SADfgbWJoHid4D/pWzwJvSqEgiQac/fAhZLipN1oFKVQB7kEknfDRR5FqwJAoUvGoMi0wSBQWEtE6f0LlTG2TB0ehKY9J/XJ/cfHMPoh7oxR/9S1s1gXftRBepmsK79qAJ1M1jX/j/bzulAKB9d1wAAAABJRU5ErkJggg==", ad = /* @__PURE__ */ vn({
  __name: "PluginBlockItemImg",
  props: {
    item: {
      type: Object,
      default: () => ({})
    },
    checked: {
      type: Boolean,
      default: !1
    },
    // 是否显示多选框
    showCheckbox: {
      type: Boolean,
      default: !1
    },
    displayTable: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["check"],
  setup(e, { emit: t }) {
    const o = e, n = t, i = (r) => {
      n("check", r);
    };
    return (r, a) => {
      const s = E("svg-icon");
      return m(), b(ee, null, [
        e.showCheckbox && e.displayTable ? (m(), b("div", nd, [
          _($e(cn), {
            modelValue: o.checked,
            onChange: i
          }, null, 8, ["modelValue"])
        ])) : A("", !0),
        v("div", od, [
          e.item.screenshot ? (m(), b("img", {
            key: 0,
            class: "item-image",
            src: e.item.screenshot || ii,
            draggable: "false",
            onError: a[0] || (a[0] = (l) => l.target.src = ii)
          }, null, 40, id)) : (m(), N(s, {
            key: 1,
            class: "item-image item-default-img",
            name: "block-default"
          })),
          e.showCheckbox && !e.displayTable ? (m(), b("div", rd, [
            _($e(cn), {
              modelValue: o.checked,
              onChange: i
            }, null, 8, ["modelValue"])
          ])) : A("", !0)
        ])
      ], 64);
    };
  }
}), sd = /* @__PURE__ */ F(ad, [["__scopeId", "data-v-606c3cad"]]), ld = {
  props: {
    /**
     * 控制搜索空数据显示
     */
    isShow: {
      type: Boolean,
      default: !1
    }
  }
}, cd = {
  key: 0,
  class: "empty-wrap"
};
function dd(e, t, o, n, i, r) {
  const a = E("svg-icon");
  return o.isShow ? (m(), b("div", cd, [
    _(a, {
      class: "empty-icon",
      name: "empty"
    }),
    t[0] || (t[0] = v("p", { class: "empty-text" }, "暂无数据", -1))
  ])) : A("", !0);
}
const ud = /* @__PURE__ */ F(ld, [["render", dd], ["__scopeId", "data-v-1473a6ca"]]), fd = /* @__PURE__ */ vn({
  __name: "SelectAll",
  props: {
    allItems: {
      type: Array,
      default: () => []
    },
    selected: {
      type: Array,
      default: () => []
    },
    hiddenLabel: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["selectAll"],
  setup(e, { emit: t }) {
    const o = e, n = t, i = L(() => o.allItems.filter((l) => o.selected.some((c) => l.id === c.id))), r = L(
      () => o.selected.filter((l) => !o.allItems.some((c) => l.id === c.id))
    ), a = L({
      get() {
        return o.allItems.length > 0 && o.allItems.length === i.value.length;
      },
      set(l) {
        if (l)
          n("selectAll", o.allItems.concat(r.value));
        else {
          if (r.value.length) {
            n("selectAll", r.value);
            return;
          }
          n("selectAll", null);
        }
      }
    }), s = L(() => i.value.length > 0 && i.value.length !== o.allItems.length);
    return (l, c) => (m(), N($e(cn), {
      class: "block-select-all",
      indeterminate: s.value,
      modelValue: a.value,
      "onUpdate:modelValue": c[0] || (c[0] = (d) => a.value = d)
    }, {
      default: C(() => [
        $(B(e.hiddenLabel ? "" : "全选"), 1)
      ]),
      _: 1
    }, 8, ["indeterminate", "modelValue"]));
  }
}), ri = {
  Default: "default",
  Mini: "mini",
  List: "list"
}, pd = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA11JREFUaEPtmUvIVVUYhp83CIJKpIsOEsSBAxEiEAwqRDGDBCmRkCwhwQQbSANDEbwNgvgzxEIUCwRBEB2EgiQR5MA/RcHImRBKkYhYaAliULzxwT6y3O1zzv735Rx+PN/srP1d3ve7rLX2PmKSiyY5fkYEhl3BUQVGFaiZgQdayPZTwOvA7Jp+2zI/C5yV9FcnQJ7AB8DetqI35HdM0qZuBL4HFjYUqC03pyUteigIPMC0rXSW8Ws77YzSFRgRKJPdMjqtVcD2DOC6pH/LAKmq0zgB2+uAXcCTwD1gs6Q9VQH2s2uDwO/A00ngv4EnJP3TD0zneZaEt4GvJB3uZdcoAdsBPAjkZaakX8sQsP0ecDDR/UhSVLRQGiUQEWzfAKYl0e4CU8rMgu0XgXMFSNdJ+rKIQRsE1gBjwDPAbWCLpH39sm97CvADMLeL7kpJR/PPGieQ9PGzkm72A57oB7i3Ev1vsstjZylmaJmkU6nP1giUBZ613U5gW2LzGzAHiEE+kKz/AbwhaTwhPtyT2PZK4EiO8MuSop1iprYAHyfPrwDLJV3Kng+PgO3ngZ9y4NdL2p9rk93Ah8naj8AKSVdbayHb0c+PASck/VkwfI8CASQd2v2S1nfZbeI8WJU8O53NzLHkmt/MZc72IWB1Fuxi9Lekk7ms5oe27wXR9rfAksTPCWAqsCBbq0/A9qfAxoIsfgJ8Lum67e3AjkQnzo55kq71Gn7bATZ6/oWc7fRGCNgO4EGgm5wJEkB+P18qKbbNvmI73smDxHMFytUrYDtaJlonldgeg9TjPZBtlPRZX+SJgu2XgJiBmKNUqhGw/RpwPBvajsMvJG2wvTQjcf9dNYkYl7X3JwK+o2v7TeDrnO0FSfM7a/mvEoX7bbYVxjDNTJwdlvRuEix2o61xtQYeydbHJb1SBXziN8inB93EKmA7hifA32cNnJIU34/+J7ajCu8AccWOgb5ch0DY2o6DbVbmZ8IEAvyyBMR54FVJd+oCK2tf+SADfgbWJoHid4D/pWzwJvSqEgiQac/fAhZLipN1oFKVQB7kEknfDRR5FqwJAoUvGoMi0wSBQWEtE6f0LlTG2TB0ehKY9J/XJ/cfHMPoh7oxR/9S1s1gXftRBepmsK79qAJ1M1jX/j/bzulAKB9d1wAAAABJRU5ErkJggg==", To = {
  components: {
    TinyTooltip: nt,
    PluginBlockItemImg: sd,
    SvgButton: ko,
    SearchEmpty: ud,
    SelectAll: fd
  },
  props: {
    data: {
      type: Array,
      default: () => []
    },
    /*
      列表样式，可选择为 default || list || mini  默认值为 default
    */
    blockStyle: {
      type: String,
      default: ri.Default
    },
    /*
    用于区分是否是区块管理侧的列表
    */
    isBlockManage: {
      type: Boolean,
      default: !1
    },
    /*
      是否显示新增按钮
    */
    showAddButton: {
      type: Boolean,
      default: !1
    },
    /*
      是否显示区块详情弹框
    */
    showBlockDetail: {
      type: Boolean,
      default: !1
    },
    /*
      是否显示快照
    */
    showBlockShot: {
      type: Boolean,
      default: !1
    },
    /*
    默认 ICON 的提示文字
    */
    defaultIconTip: {
      type: String,
      default: ""
    },
    // 是否显示历史备份按钮
    showSettingIcon: {
      type: Boolean,
      default: !0
    },
    // 外部传入的区块信息：不通过区块列表里点击展示，而是从外面直接调起区块面板展示的区块。
    externalBlock: {
      type: Object,
      default: null
    },
    // 是否显示多选框
    showCheckbox: {
      type: Boolean,
      default: !1
    },
    // 选中的区块
    checked: {
      type: Array,
      default: () => []
    },
    gridColumns: {
      type: Number,
      default: 2
    }
  },
  emits: ["click", "iconClick", "add", "deleteBlock", "openVersionPanel", "editBlock", "checkAll", "cancelCheckAll"],
  setup(e, { emit: t }) {
    const o = ct("panelState", {}), n = ct("blockUsers", []), i = me({
      activeIndex: -1,
      data: L(() => e.data),
      top: 0,
      hover: !1,
      currentBlock: {},
      hoverItemId: null,
      currentShowMenuId: null,
      timeoutId: null
    }), r = L(() => (n == null ? void 0 : n.value) || []), a = (y) => {
      for (; y.nodeName !== "LI"; )
        y = y.parentNode;
      return y;
    }, s = (y, w) => {
      i.currentBlock = y, i.top = `${a(w.target).getBoundingClientRect().top}px`, i.hover = !0, i.hoverItemId = y.id, i.currentShowMenuId === y.id && clearTimeout(i.timeoutId);
    }, l = ({ event: y, item: w, index: x }) => {
      i.activeIndex = x, t("editBlock", w), t("iconClick", { event: y, item: w, index: x, isOpen: !1 });
    }, c = ({ event: y, item: w, index: x }) => {
      e.isBlockManage && l({ event: y, item: w, index: x }), t("click", w);
    }, d = ({ event: y, item: w, index: x }) => {
      i.activeIndex = x, t("iconClick", { event: y, item: w, index: x, isOpen: !0 });
    }, u = () => {
      i.activeIndex = -1;
    }, f = () => {
      i.hover = !1;
    }, p = (y) => (y.groupName ? `分组: ${y.groupName + `
`}` : "") + (y.label || y.blockName), h = () => {
      i.timeoutId = setTimeout(() => {
        i.hoverItemId = null, i.currentShowMenuId = null;
      }, 200);
    }, g = () => {
      clearTimeout(i.timeoutId);
    }, k = (y) => {
      i.currentShowMenuId ? i.currentShowMenuId = null : i.currentShowMenuId = y.id;
    }, D = (y, w) => {
      const x = y.findIndex((M) => M.id === w.id);
      i.activeIndex = x;
    };
    Le(
      () => e.data,
      async (y) => {
        y && e.externalBlock && D(y, e.externalBlock);
      }
    ), Le(
      () => e.externalBlock,
      async (y) => {
        var w;
        y && ((w = i.data) != null && w.length) && D(i.data, y);
      }
    );
    const S = (y) => {
      Array.isArray(y) ? t("checkAll", y) : t("cancelCheckAll");
    };
    return {
      BlockStyles: ri,
      isShortcutPanel: o.isShortcutPanel,
      state: i,
      users: r,
      getTitle: p,
      blockClick: c,
      iconClick: d,
      clearActive: u,
      openBlockShotPanel: s,
      iconSettingMove: f,
      defaultImg: pd,
      handleBlockItemLeave: h,
      handleSettingMouseOver: g,
      handleShowVersionMenu: k,
      editBlock: l,
      format: $i,
      handleSelectAll: S
    };
  }
}, ai = () => {
  Vr((e) => ({
    d6d2959a: e.state.top,
    "726cbdb2": e.gridColumns
  }));
}, si = To.setup;
To.setup = si ? (e, t) => (ai(), si(e, t)) : ai;
const md = {
  key: 0,
  class: "header"
}, hd = { class: "col-checkbox" }, gd = { class: "block-plus-icon" }, vd = ["draggable", "title", "onMousedown", "onMouseover"], yd = { class: "item-text" }, _d = { class: "item-name" }, bd = {
  key: 0,
  class: "item-description"
}, Cd = {
  key: 0,
  class: "publish-flag"
}, wd = {
  key: 1,
  class: "block-detail"
}, Sd = { class: "list" }, Ed = ["onMousedown"], kd = ["onMousedown"], xd = { class: "list" }, Pd = ["onClick"], Id = ["onClick"], Td = {
  key: 1,
  class: "block-shortcut"
}, Ad = { class: "block-shortcut-title" }, Dd = {
  key: 0,
  class: "block-shortcut-description"
}, Od = { class: "block-shortcut-image-wrapper" }, Md = ["src"];
function Ld(e, t, o, n, i, r) {
  const a = E("select-all"), s = E("svg-icon"), l = E("plugin-block-item-img"), c = E("svg-button"), d = E("tiny-tooltip"), u = E("search-empty");
  return m(), b(ee, null, [
    o.blockStyle === n.BlockStyles.Mini && o.showCheckbox ? (m(), b("div", md, [
      v("div", hd, [
        _(a, {
          allItems: o.data,
          selected: o.checked,
          "hidden-label": !0,
          onSelectAll: n.handleSelectAll
        }, null, 8, ["allItems", "selected", "onSelectAll"])
      ]),
      t[9] || (t[9] = v("div", { class: "col-name" }, "区块名称", -1)),
      t[10] || (t[10] = v("div", { class: "col-time" }, "创建时间", -1)),
      t[11] || (t[11] = v("div", { class: "col-created-by" }, "创建人", -1))
    ])) : A("", !0),
    n.state.data.length || o.showAddButton ? (m(), b("ul", {
      key: 1,
      class: Z([
        "block-list",
        "lowcode-scrollbar",
        { "is-small-list": o.blockStyle === n.BlockStyles.Mini },
        { isShortcutPanel: n.isShortcutPanel }
      ]),
      onMouseleave: t[8] || (t[8] = (f) => n.state.hover = !1)
    }, [
      o.showAddButton ? (m(), b("li", {
        key: 0,
        class: "block-item block-plus",
        onClick: t[0] || (t[0] = (f) => e.$emit("add"))
      }, [
        v("span", gd, [
          _(s, { name: "add" })
        ]),
        t[12] || (t[12] = v("div", { class: "item-text" }, "添加区块", -1))
      ])) : A("", !0),
      (m(!0), b(ee, null, we(n.state.data, (f, p) => (m(), b("li", {
        key: f.blockName,
        draggable: !o.isBlockManage && o.showSettingIcon,
        class: Z([
          "block-item",
          { "is-disabled": o.showBlockDetail },
          { "block-item-small-list": o.blockStyle === n.BlockStyles.Mini }
        ]),
        title: n.getTitle(f),
        onMousedown: Ne((h) => n.blockClick({ event: h, item: f, index: p }), ["stop", "left"]),
        onMouseover: Ne((h) => n.openBlockShotPanel(f, h), ["stop"]),
        onMouseleave: t[6] || (t[6] = (...h) => n.handleBlockItemLeave && n.handleBlockItemLeave(...h))
      }, [
        O(e.$slots, "default", { data: f }, () => {
          var h;
          return [
            _(l, {
              item: f,
              "show-checkbox": o.showCheckbox,
              checked: o.checked.some((g) => g.id === f.id),
              "display-table": o.blockStyle === n.BlockStyles.Mini
            }, null, 8, ["item", "show-checkbox", "checked", "display-table"]),
            v("div", yd, [
              v("div", _d, B(f.name_cn || f.label || ((h = f.content) == null ? void 0 : h.fileName)), 1),
              o.blockStyle === n.BlockStyles.List ? (m(), b("div", bd, B(f.description), 1)) : A("", !0)
            ]),
            o.isBlockManage && !f.is_published ? (m(), b("div", Cd, "未发布")) : A("", !0),
            o.isBlockManage ? (m(), b("div", wd, [
              v("div", {
                class: "setting-menu",
                onMouseover: t[2] || (t[2] = Ne((...g) => n.handleSettingMouseOver && n.handleSettingMouseOver(...g), ["stop"])),
                onMouseleave: t[3] || (t[3] = (...g) => n.handleBlockItemLeave && n.handleBlockItemLeave(...g))
              }, [
                v("ul", Sd, [
                  v("li", {
                    class: "list-item",
                    onMousedown: Ne((g) => n.editBlock({ event: g, item: f, index: p }), ["stop", "left"])
                  }, [
                    _(c, {
                      class: "list-item-svg",
                      hoverBgColor: !1,
                      name: "to-edit"
                    })
                  ], 40, Ed),
                  v("li", {
                    class: "list-item",
                    onMouseover: t[1] || (t[1] = Ne((...g) => n.iconSettingMove && n.iconSettingMove(...g), ["stop"])),
                    onMousedown: Ne((g) => n.iconClick({ event: g, item: f, index: p }), ["stop", "prevent"])
                  }, [
                    _(c, {
                      class: "list-item-svg",
                      hoverBgColor: !1,
                      name: "setting"
                    })
                  ], 40, kd)
                ])
              ], 32)
            ])) : o.showSettingIcon ? (m(), b("div", {
              key: 2,
              class: Z(["block-setting", { "is-current-visible-icon": n.state.hoverItemId === f.id }]),
              title: " "
            }, [
              v("div", {
                class: "setting-menu",
                onMouseover: t[4] || (t[4] = Ne((...g) => n.handleSettingMouseOver && n.handleSettingMouseOver(...g), ["stop"])),
                onMouseleave: t[5] || (t[5] = (...g) => n.handleBlockItemLeave && n.handleBlockItemLeave(...g))
              }, [
                v("ul", xd, [
                  _(d, {
                    content: "版本列表",
                    placement: "top",
                    effect: "light"
                  }, {
                    default: C(() => [
                      v("li", {
                        class: "list-item",
                        onClick: Ne((g) => e.$emit("openVersionPanel", { item: f, index: p }), ["stop"])
                      }, [
                        _(c, {
                          class: "list-item-svg",
                          hoverBgColor: !1,
                          name: "versions"
                        })
                      ], 8, Pd)
                    ]),
                    _: 2
                  }, 1024),
                  _(d, {
                    content: "移除",
                    placement: "top",
                    effect: "light"
                  }, {
                    default: C(() => [
                      v("li", {
                        class: "list-item",
                        onClick: Ne((g) => e.$emit("deleteBlock", f), ["stop"])
                      }, [
                        _(c, {
                          class: "list-item-svg",
                          hoverBgColor: !1,
                          name: "remove"
                        })
                      ], 8, Id)
                    ]),
                    _: 2
                  }, 1024)
                ])
              ], 32)
            ], 2)) : A("", !0)
          ];
        }, !0)
      ], 42, vd))), 128)),
      o.showBlockShot && n.state.hover && n.state.currentBlock.screenshot ? (m(), b("div", Td, [
        v("div", Ad, B(n.state.currentBlock.label) + "预览图", 1),
        n.state.currentBlock.description ? (m(), b("div", Dd, B(n.state.currentBlock.description), 1)) : A("", !0),
        v("div", Od, [
          v("img", {
            class: "block-shortcut-image",
            src: n.state.currentBlock.screenshot || n.defaultImg,
            onError: t[7] || (t[7] = (f) => f.target.src = n.defaultImg)
          }, null, 40, Md)
        ])
      ])) : A("", !0)
    ], 34)) : A("", !0),
    _(u, {
      isShow: !n.state.data.length && !o.showAddButton
    }, null, 8, ["isShow"])
  ], 64);
}
const Dm = /* @__PURE__ */ F(To, [["render", Ld], ["__scopeId", "data-v-1acc4069"]]), {
  OPEN_DELAY: Bd
} = Sn, Nd = {
  components: {
    TinyPopover: Ue,
    TinyDialogBox: bn,
    TinySearch: Wr,
    TinyButton: je,
    MonacoEditor: kn,
    SvgButton: ko,
    MetaListItems: Ll,
    IconYes: ia()
  },
  props: {
    bindLifeCycles: Object,
    isPage: {
      type: Boolean,
      default: !0
    }
  },
  emits: ["updatePageLifeCycles", "bind"],
  setup(e, {
    emit: t
  }) {
    var g, k, D, S;
    const {
      confirm: o
    } = Cn(), {
      getPageContent: n
    } = da(), i = (k = Jt("engine.config")) == null ? void 0 : k.lifeCyclesOptions[(g = Jt("engine.config")) == null ? void 0 : g.dslMode], r = (S = Jt("engine.config")) == null ? void 0 : S.lifeCycleTips[(D = Jt("engine.config")) == null ? void 0 : D.dslMode], a = me({
      showPopover: !0,
      showLifeCyclesDialog: !1,
      title: "",
      lifeCycles: i,
      bindLifeCycles: {},
      editorValue: "{}",
      hasError: !1,
      linterWorker: null,
      completionProvider: null
    });
    We(() => {
      a.bindLifeCycles = e.bindLifeCycles || {};
    });
    const s = (y) => {
      if (!y) {
        a.lifeCycles = i;
        return;
      }
      a.lifeCycles = i.filter((w) => (w == null ? void 0 : w.toLowerCase().indexOf(y.toLowerCase())) > -1);
    }, l = () => {
      const y = He().getSchema(), w = n(), {
        id: x,
        fileName: M
      } = w;
      (x === y.id || M === y.fileName) && (y.lifeCycles = a.bindLifeCycles);
    }, c = (y) => {
      o({
        title: "提示",
        message: `您确定要删除 ${y} 吗？`,
        exec: () => {
          delete a.bindLifeCycles[y], l();
        }
      });
    }, d = q(null), u = (y) => {
      var x, M, P;
      a.title = y;
      const w = ((x = e.bindLifeCycles) == null ? void 0 : x[y]) || ((P = (M = He().getSchema()) == null ? void 0 : M.lifeCycles) == null ? void 0 : P[y]);
      a.editorValue = (w == null ? void 0 : w.value) || `function ${y} (${y === "setup" ? "{ props, state, watch, onMounted }" : ""}) {} `, a.showLifeCyclesDialog = !0, setTimeout(() => {
        d.value.getEditor().trigger("anyString", "editor.action.formatDocument");
      });
    }, f = () => {
      if (a.hasError) {
        Ui({
          type: "error",
          message: "代码静态检查有错误，请先修改后再保存"
        });
        return;
      }
      const w = {
        type: "JSFunction",
        value: d.value.getEditor().getValue()
      };
      a.bindLifeCycles || (a.bindLifeCycles = {}), a.bindLifeCycles[a.title] = w, a.showLifeCyclesDialog = !1, l(), e.isPage ? t("updatePageLifeCycles", a.bindLifeCycles) : t("bind", a.bindLifeCycles);
    }, p = (y) => {
      var w;
      d.value && (a.completionProvider = ma(d.value.getMonaco(), (w = d.value.getEditor()) == null ? void 0 : w.getModel()), a.linterWorker = ga(y, d.value.getMonaco(), a));
    }, h = () => {
      if (!d.value)
        return;
      const y = d.value.getEditor().getModel();
      ha(y, a.linterWorker);
    };
    return Co(() => {
      var y, w, x, M;
      (w = (y = a.completionProvider) == null ? void 0 : y.forEach) == null || w.call(y, (P) => {
        P.dispose();
      }), (M = (x = a.linterWorker) == null ? void 0 : x.terminate) == null || M.call(x);
    }), {
      state: a,
      lifeCycleTips: r,
      editorRef: d,
      searchLifeCyclesList: s,
      openLifeCyclesPanel: u,
      deleteLifeCycle: c,
      editorConfirm: f,
      editorDidMount: p,
      handleEditorChange: h,
      OPEN_DELAY: Bd
    };
  }
}, Rd = { class: "life-cycle" }, Vd = { class: "popover-list" }, Fd = ["onClick"], zd = { class: "life-cycle-tips" }, Ud = { class: "life-cycle-content-item" }, jd = { class: "bind-dialog-title" }, $d = { class: "bind-dialog-text" }, qd = { class: "bind-dialog-btn" }, Hd = {
  key: 0,
  class: "dialog-content"
}, Jd = { class: "dialog-content-left" }, Wd = { class: "life-cycle-list" }, Yd = ["onClick"], Xd = { class: "dialog-content-right" };
function Gd(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-button"), l = E("tiny-popover"), c = E("svg-button"), d = E("meta-list-items"), u = E("tiny-search"), f = E("icon-yes"), p = E("monaco-editor"), h = E("tiny-dialog-box");
  return m(), b(ee, null, [
    v("div", Rd, [
      _(l, {
        modelValue: n.state.showPopover,
        "onUpdate:modelValue": t[0] || (t[0] = (g) => n.state.showPopover = g),
        placement: "bottom-end",
        trigger: "hover",
        popperClass: "option-popper",
        "open-delay": n.OPEN_DELAY.Default
      }, {
        reference: C(() => [
          _(s, { class: "life-cycle-btn" }, {
            default: C(() => [
              _(a, { name: "add" }),
              $(B(o.isPage ? "添加页面生命周期" : "添加区块生命周期"), 1)
            ]),
            _: 1
          })
        ]),
        default: C(() => [
          v("div", Vd, [
            v("ul", null, [
              (m(!0), b(ee, null, we(n.state.lifeCycles, (g, k) => (m(), b("li", {
                key: k,
                class: Z({ existed: n.state.bindLifeCycles.hasOwnProperty(g) }),
                onClick: (D) => n.openLifeCyclesPanel(g)
              }, [
                v("div", null, B(g), 1)
              ], 10, Fd))), 128))
            ])
          ])
        ]),
        _: 1
      }, 8, ["modelValue", "open-delay"])
    ]),
    v("div", zd, B(n.lifeCycleTips), 1),
    _(d, {
      optionsList: Object.keys(n.state.bindLifeCycles),
      draggable: !1,
      class: Z({ "life-cycle-content-list": Object.keys(n.state.bindLifeCycles).length })
    }, {
      content: C(({ data: g }) => [
        v("div", Ud, B(g), 1)
      ]),
      operate: C(({ data: g }) => [
        _(c, {
          hoverBgColor: !1,
          name: "setting",
          onClick: (k) => n.openLifeCyclesPanel(g)
        }, null, 8, ["onClick"]),
        _(c, {
          hoverBgColor: !1,
          name: "delete",
          onClick: (k) => n.deleteLifeCycle(g)
        }, null, 8, ["onClick"])
      ]),
      _: 1
    }, 8, ["optionsList", "class"]),
    _(h, {
      visible: n.state.showLifeCyclesDialog,
      "onUpdate:visible": t[2] || (t[2] = (g) => n.state.showLifeCyclesDialog = g),
      fullscreen: "",
      "show-close": !1,
      "append-to-body": !0
    }, {
      title: C(() => [
        v("div", jd, [
          v("div", $d, B(o.isPage ? "添加页面生命周期" : "添加区块生命周期"), 1),
          v("div", qd, [
            _(s, {
              type: "info",
              onClick: n.editorConfirm
            }, {
              default: C(() => t[3] || (t[3] = [
                $("保存", -1)
              ])),
              _: 1,
              __: [3]
            }, 8, ["onClick"]),
            _(c, {
              name: "close",
              onClick: t[1] || (t[1] = (g) => n.state.showLifeCyclesDialog = !1)
            })
          ])
        ])
      ]),
      footer: C(() => t[4] || (t[4] = [])),
      default: C(() => [
        n.state.showLifeCyclesDialog ? (m(), b("div", Hd, [
          v("div", Jd, [
            _(u, {
              placeholder: "搜索",
              "onUpdate:modelValue": n.searchLifeCyclesList
            }, null, 8, ["onUpdate:modelValue"]),
            v("ul", Wd, [
              (m(!0), b(ee, null, we(n.state.lifeCycles, (g, k) => (m(), b("li", {
                key: k,
                onClick: (D) => n.openLifeCyclesPanel(g)
              }, [
                v("div", {
                  class: Z(["life-cycle-name", { "life-cycle-selected": g === n.state.title }])
                }, [
                  $(B(g) + " ", 1),
                  g === n.state.title ? (m(), N(f, {
                    key: 0,
                    class: "life-cycle-selected__icon"
                  })) : A("", !0)
                ], 2)
              ], 8, Yd))), 128))
            ])
          ]),
          v("div", Xd, [
            _(p, {
              ref: "editorRef",
              class: "life-cycle-editor",
              options: {
                language: "javascript"
              },
              value: n.state.editorValue,
              onChange: n.handleEditorChange,
              onEditorDidMount: n.editorDidMount
            }, null, 8, ["value", "onChange", "onEditorDidMount"])
          ])
        ])) : A("", !0)
      ]),
      _: 1
    }, 8, ["visible"])
  ], 64);
}
const Om = /* @__PURE__ */ F(Nd, [["render", Gd], ["__scopeId", "data-v-fa47fa13"]]), Kd = {
  components: {
    IconInfo: ra()
  },
  props: {
    type: {
      type: String,
      default: ""
    }
  }
}, Qd = { class: "left" }, Zd = { class: "middle" }, eu = { class: "right" };
function tu(e, t, o, n, i, r) {
  const a = E("icon-info");
  return m(), b("div", {
    class: Z(["tip", o.type])
  }, [
    v("div", Qd, [
      O(e.$slots, "icon", {}, () => [
        _(a, { class: "icon" })
      ], !0)
    ]),
    v("div", Zd, [
      O(e.$slots, "content", {}, void 0, !0)
    ]),
    v("div", eu, [
      O(e.$slots, "more", {}, void 0, !0)
    ])
  ], 2);
}
const Mm = /* @__PURE__ */ F(Kd, [["render", tu], ["__scopeId", "data-v-6bd86f69"]]), nu = {
  components: {
    TinySelect: Xr,
    TinyOption: Yr,
    TinyButton: je,
    TinyInput: ut
  },
  inheritAttrs: !1,
  props: {
    currentLang: String,
    isBind: Boolean,
    langData: {
      type: [Array, Object],
      default: () => []
    },
    modelValue: {
      type: String,
      default: ""
    },
    data: [Object, String],
    locales: Array
  },
  setup(e, { emit: t }) {
    const o = q(e.modelValue), n = q(!1), i = q(null), r = me({}), a = q([]);
    We(() => {
      var k;
      if (o.value = e.modelValue, e.modelValue && e.langData[e.modelValue]) {
        const D = e.langData[e.modelValue][e.currentLang] || "", S = [], y = ((k = e == null ? void 0 : e.data) == null ? void 0 : k.params) || {};
        D.replace(/\{(.+?)\}/g, (w, x) => {
          x && S.push({ name: x, value: y[x] || "" });
        }), a.value = S;
      }
    });
    const s = (k) => {
      i.value.state.cachedOptions.forEach((S) => {
        S.state.visible = k ? S.label.indexOf(k) > -1 : !0;
      });
    }, l = (k) => {
      const D = e.langData[k] || {};
      t("bind", { ...D, key: k });
    }, { PLUGIN_NAME: c, activePlugin: d } = ot();
    return {
      selectRef: i,
      showEditItem: n,
      filterMethod: s,
      selectI18n: l,
      selectValue: o,
      activeI18n: () => d(c.I18n),
      addBindI18n: () => {
        ro().ensureI18n(r, !0), t("bind", { ...r }), n.value = !1;
      },
      unbindI18n: () => {
        const k = e.langData[e.modelValue];
        t("bind", k[e.currentLang]), n.value = !1;
      },
      paramsForm: a,
      paramsChange: () => {
        const k = {};
        a.value.forEach(({ name: D, value: S }) => {
          k[D] = S;
        }), t("bind", { type: Uo.I18N, key: o.value, params: k });
      },
      editForm: r,
      openCreateForm: () => {
        Object.keys(r).forEach((k) => delete r[k]), r.key = "lowcode." + So.guid(), r.type = Uo.I18N, n.value = !0;
      }
    };
  }
}, ou = {
  ref: "languageContent",
  class: "languageContent"
}, iu = {
  key: 0,
  class: "params-form"
}, ru = { class: "bottom-buttons" }, au = { class: "addNewLanguage" }, su = { class: "tiny-input" }, lu = ["onUpdate:modelValue"], cu = { class: "bottom-buttons" };
function du(e, t, o, n, i, r) {
  const a = E("tiny-option"), s = E("tiny-select"), l = E("tiny-input"), c = E("tiny-button");
  return m(), b("div", ou, [
    qe(v("div", null, [
      _(s, {
        ref: "selectRef",
        modelValue: n.selectValue,
        "onUpdate:modelValue": t[0] || (t[0] = (d) => n.selectValue = d),
        placeholder: "请选择多语言文案",
        filterable: "",
        "is-drop-inherit-width": "",
        "filter-method": n.filterMethod,
        onChange: n.selectI18n
      }, {
        default: C(() => [
          (m(!0), b(ee, null, we(o.langData, (d) => (m(), N(a, {
            key: d.key,
            label: `${d[o.currentLang]} (${d.key})`,
            value: d.key
          }, null, 8, ["label", "value"]))), 128))
        ]),
        _: 1
      }, 8, ["modelValue", "filter-method", "onChange"]),
      n.paramsForm.length ? (m(), b("div", iu, [
        t[2] || (t[2] = v("div", { class: "label" }, "国际化参数配置", -1)),
        (m(!0), b(ee, null, we(n.paramsForm, (d) => (m(), b("div", {
          key: d.name,
          class: "params-item"
        }, [
          v("label", null, B(d.name), 1),
          _(l, {
            modelValue: d.value,
            "onUpdate:modelValue": [(u) => d.value = u, n.paramsChange]
          }, null, 8, ["modelValue", "onUpdate:modelValue"])
        ]))), 128))
      ])) : A("", !0),
      O(e.$slots, "suffix", {}, () => [
        v("div", ru, [
          o.isBind ? (m(), N(c, {
            key: 0,
            onClick: n.unbindI18n
          }, {
            default: C(() => t[3] || (t[3] = [
              $("解除关联", -1)
            ])),
            _: 1,
            __: [3]
          }, 8, ["onClick"])) : A("", !0),
          _(c, {
            type: "primary",
            onClick: n.openCreateForm
          }, {
            default: C(() => t[4] || (t[4] = [
              v("span", null, "创建新的多语言文案", -1)
            ])),
            _: 1,
            __: [4]
          }, 8, ["onClick"])
        ])
      ], !0)
    ], 512), [
      [dt, !n.showEditItem]
    ]),
    qe(v("div", au, [
      v("div", null, [
        v("div", su, [
          t[5] || (t[5] = v("label", null, "唯一键", -1)),
          qe(v("input", {
            "onUpdate:modelValue": t[1] || (t[1] = (d) => n.editForm.key = d),
            class: "tiny-input__inner"
          }, null, 512), [
            [jo, n.editForm.key]
          ])
        ]),
        (m(!0), b(ee, null, we(o.locales, (d) => (m(), b("div", {
          key: d.lang,
          class: "tiny-input"
        }, [
          v("label", null, B(d.label), 1),
          qe(v("input", {
            "onUpdate:modelValue": (u) => n.editForm[d.lang] = u,
            class: "tiny-input__inner"
          }, null, 8, lu), [
            [jo, n.editForm[d.lang]]
          ])
        ]))), 128))
      ]),
      v("div", cu, [
        _(c, { onClick: n.activeI18n }, {
          default: C(() => t[6] || (t[6] = [
            $("国际化管理", -1)
          ])),
          _: 1,
          __: [6]
        }, 8, ["onClick"]),
        _(c, {
          type: "primary",
          onClick: n.addBindI18n
        }, {
          default: C(() => t[7] || (t[7] = [
            $("添加并关联", -1)
          ])),
          _: 1,
          __: [7]
        }, 8, ["onClick"])
      ])
    ], 512), [
      [dt, n.showEditItem]
    ])
  ], 512);
}
const uu = /* @__PURE__ */ F(nu, [["render", du], ["__scopeId", "data-v-9e5effbd"]]), fu = {
  components: {
    TinyCheckbox: cn,
    TinyButton: je,
    TinyDialogBox: bn,
    TinyForm: _n,
    TinyInput: ut,
    TinyFormItem: yn,
    TinyPopover: Ue,
    VueMonaco: kn
  },
  props: {
    block: {
      type: Object,
      default: () => ({})
    },
    visible: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["update:visible", "changeSchema"],
  setup(e, { emit: t }) {
    const { COMPONENT_NAME: o } = Sn, n = me({
      deployInfo: "",
      version: "",
      needToSave: !0
    }), i = me({
      compareVisible: !1,
      schemaCompare: !1,
      code: "",
      originalCode: "",
      newCode: ""
    }), r = q(null), a = {
      deployInfo: [{ required: !0, message: "必填", trigger: "blur" }],
      version: [
        { required: !0, message: "必填", trigger: "blur" },
        { type: "version", message: "请输入正确的X.Y.Z版本格式", trigger: "blur" }
      ]
    }, s = q(null), l = {
      language: "javascript",
      lineNumbers: !0,
      minimap: {
        enabled: !1
      }
    }, c = (S) => {
      const y = S.histories || [];
      let w = "1.0.0", x = 0;
      return y.forEach((M) => {
        const P = new Date(M.created_at).getTime();
        P > x && (x = P, w = M.version);
      }), w.replace(/\d+$/, (M) => Number(M) + 1);
    };
    Le(
      () => e.visible,
      (S) => {
        S && (n.version = c(e.block));
      }
    );
    const d = (S) => t("update:visible", S), { setSaved: u } = He(), f = () => {
      var y;
      const S = wn().getCurrentBlock();
      return ((y = e.block) == null ? void 0 : y.id) === (S == null ? void 0 : S.id);
    }, p = async () => {
      r.value.validate((S) => {
        const { publishBlock: y } = bt($o.BlockManage);
        if (S) {
          const w = {
            block: e.block,
            is_compile: !0,
            deploy_info: n.deployInfo,
            version: n.version,
            needToSave: n.needToSave
          };
          y(w), d(!1), n.needToSave && f() && u(!0), n.deployInfo = "", n.version = "", n.needToSave = !0;
        }
      });
    }, h = async (S) => {
      const y = bt($o.BlockManage);
      if (S) {
        const w = e.block, x = await y.getBlockById(w == null ? void 0 : w.id), M = (x == null ? void 0 : x.content) || {};
        i.originalCode = JSON.stringify(M, null, 2), i.code = JSON.stringify((w == null ? void 0 : w.content) || {}, null, 2), i.compareVisible = !0;
      }
    }, g = (S) => {
      typeof S == "string" && (i.newCode = S);
    }, k = () => {
      i.schemaCompare = !1, i.compareVisible = !1;
    };
    return {
      formState: n,
      state: i,
      deployBlockRef: r,
      formRules: a,
      editor: s,
      editorOptions: l,
      setVisible: d,
      changeCompare: h,
      changeCode: g,
      close: k,
      save: () => {
        if (!i.newCode) {
          k();
          return;
        }
        try {
          const S = JSON.parse(i.newCode);
          t("changeSchema", { ...S, componentName: o.Block }), k();
        } catch {
          Ui({
            type: "error",
            message: "代码静态检查有错误，请先修改后再保存"
          });
        }
      },
      deployBlock: p
    };
  }
};
function pu(e, t, o, n, i, r) {
  const a = E("tiny-input"), s = E("tiny-form-item"), l = E("tiny-checkbox"), c = E("tiny-button"), d = E("svg-icon"), u = E("tiny-popover"), f = E("tiny-form"), p = E("vue-monaco"), h = E("tiny-dialog-box");
  return m(), N(h, {
    visible: o.visible,
    title: "发布区块",
    width: "550px",
    "append-to-body": "",
    draggable: "",
    "onUpdate:visible": n.setVisible
  }, {
    footer: C(() => [
      _(c, {
        type: "primary",
        onClick: n.deployBlock
      }, {
        default: C(() => t[7] || (t[7] = [
          $(" 确定 ", -1)
        ])),
        _: 1,
        __: [7]
      }, 8, ["onClick"]),
      _(c, {
        onClick: t[3] || (t[3] = (g) => n.setVisible(!1))
      }, {
        default: C(() => t[8] || (t[8] = [
          $("取消", -1)
        ])),
        _: 1,
        __: [8]
      })
    ]),
    default: C(() => [
      _(f, {
        ref: "deployBlockRef",
        "label-position": "left",
        "label-width": "84px",
        "label-align": "",
        model: n.formState,
        rules: n.formRules,
        "validate-type": "text"
      }, {
        default: C(() => [
          _(s, {
            label: "版本号",
            prop: "version"
          }, {
            default: C(() => [
              _(a, {
                modelValue: n.formState.version,
                "onUpdate:modelValue": t[0] || (t[0] = (g) => n.formState.version = g),
                placeholder: "请输入X.Y.Z格式版本号，如1.0.0"
              }, null, 8, ["modelValue"])
            ]),
            _: 1
          }),
          _(s, {
            label: "版本描述",
            prop: "deployInfo"
          }, {
            default: C(() => [
              _(a, {
                modelValue: n.formState.deployInfo,
                "onUpdate:modelValue": t[1] || (t[1] = (g) => n.formState.deployInfo = g),
                type: "textarea",
                placeholder: "请输入此次发布的修改点"
              }, null, 8, ["modelValue"])
            ]),
            _: 1
          }),
          _(s, {
            label: "保存设置",
            prop: "needToSave",
            class: "form-item-save"
          }, {
            default: C(() => [
              _(l, {
                modelValue: n.formState.needToSave,
                "onUpdate:modelValue": t[2] || (t[2] = (g) => n.formState.needToSave = g)
              }, {
                default: C(() => t[5] || (t[5] = [
                  $("发布成功后保存最新数据", -1)
                ])),
                _: 1,
                __: [5]
              }, 8, ["modelValue"])
            ]),
            _: 1
          }),
          _(s, {
            label: "schema比对",
            class: "schema-compare"
          }, {
            default: C(() => [
              _(c, {
                class: "compare-button",
                type: "text",
                onClick: n.changeCompare
              }, {
                default: C(() => t[6] || (t[6] = [
                  $(" 查看本次发布的改动点 ", -1)
                ])),
                _: 1,
                __: [6]
              }, 8, ["onClick"]),
              _(u, {
                placement: "top",
                trigger: "hover",
                "append-to-body": "",
                width: 162,
                content: "区块本地schema和线上新版本schema进行比对"
              }, {
                reference: C(() => [
                  _(d, { name: "plugin-icon-plugin-help" })
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["model", "rules"]),
      _(h, {
        visible: n.state.compareVisible,
        "onUpdate:visible": t[4] || (t[4] = (g) => n.state.compareVisible = g),
        class: "dialog-box",
        modal: !1,
        fullscreen: !0,
        "append-to-body": !0,
        title: "Schema 线上与本地差异"
      }, {
        footer: C(() => [
          _(c, {
            type: "primary",
            onClick: n.save
          }, {
            default: C(() => t[9] || (t[9] = [
              $("保存", -1)
            ])),
            _: 1,
            __: [9]
          }, 8, ["onClick"]),
          _(c, { onClick: n.close }, {
            default: C(() => t[10] || (t[10] = [
              $("取消", -1)
            ])),
            _: 1,
            __: [10]
          }, 8, ["onClick"])
        ]),
        default: C(() => [
          n.state.compareVisible ? (m(), N(p, {
            key: 0,
            ref: "editor",
            class: "monaco-editor",
            diffEditor: !0,
            options: n.editorOptions,
            value: n.state.code,
            original: n.state.originalCode,
            onChange: n.changeCode
          }, null, 8, ["options", "value", "original", "onChange"])) : A("", !0)
        ]),
        _: 1
      }, 8, ["visible"])
    ]),
    _: 1
  }, 8, ["visible", "onUpdate:visible"]);
}
const Lm = /* @__PURE__ */ F(fu, [["render", pu], ["__scopeId", "data-v-43e712fa"]]), mu = {}, hu = { class: "options" }, gu = { class: "top" }, vu = { class: "title" }, yu = { class: "actions" }, _u = {
  id: "options",
  class: "select-options"
}, bu = { class: "bottom" };
function Cu(e, t) {
  return m(), b("div", hu, [
    v("div", gu, [
      v("div", vu, [
        O(e.$slots, "title", {}, void 0, !0)
      ]),
      v("div", yu, [
        O(e.$slots, "actions", {}, void 0, !0)
      ])
    ]),
    v("div", _u, [
      O(e.$slots, "items", {}, void 0, !0)
    ]),
    v("div", bu, [
      O(e.$slots, "bottom", {}, void 0, !0)
    ])
  ]);
}
const Bm = /* @__PURE__ */ F(mu, [["render", Cu], ["__scopeId", "data-v-7063dd2a"]]), Nm = {
  name: "Splitpanes",
  provide() {
    return {
      onPaneClick: this.onPaneClick,
      onPaneAdd: this.onPaneAdd,
      requestUpdate: this.requestUpdate,
      onPaneRemove: this.onPaneRemove
    };
  },
  props: {
    horizontal: { type: Boolean },
    pushOtherPanes: { type: Boolean, default: !0 },
    dblClickSplitter: { type: Boolean, default: !0 },
    rtl: { type: Boolean, default: !1 },
    firstSplitter: { type: Boolean }
  },
  emits: ["ready", "resize", "resized", "pane-click", "pane-maximize", "pane-add", "pane-remove", "splitter-click"],
  data: () => ({
    ready: !1,
    container: null,
    touch: {
      dragging: !1,
      activeSplitter: null,
      mouseDown: !1
    },
    panes: [],
    lowcodeSplitterTaps: {
      timeoutId: null,
      splitter: null
    }
  }),
  computed: {
    indexedPanes() {
      return this.panes.reduce((e, t) => (e[t.id] = t, e), {});
    },
    panesCount() {
      return this.panes.length;
    }
  },
  watch: {
    horizontal() {
      this.updateLowCodePaneComponents();
    },
    panes: {
      deep: !0,
      immediate: !1,
      handler() {
        this.updateLowCodePaneComponents();
      }
    },
    firstSplitter() {
      this.redoLowCodeSplitters();
    },
    dblClickSplitter(e) {
      [...this.container.querySelectorAll(".splitpanes-lowcode__splitter")].forEach((o, n) => {
        o.ondblclick = e ? (i) => this.onSplitterDblClick(i, n) : void 0;
      });
    }
  },
  mounted() {
    this.container = this.$refs.container, this.checkLowCodeSplitpanesNodes(), this.redoLowCodeSplitters(), this.resetLowCodePaneSizes(), this.$emit("ready"), this.ready = !0;
  },
  beforeUnmount() {
    this.ready = !1;
  },
  methods: {
    updateLowCodePaneComponents() {
      this.panes.forEach((e) => {
        e.update && e.update({
          [this.horizontal ? "height" : "width"]: `${this.indexedPanes[e.id].size}%`
        });
      });
    },
    bindEvents() {
      document.addEventListener("mousemove", this.onLowCodeMouseMove, { passive: !1 }), document.addEventListener("mouseup", this.onLowCodeMouseUp);
    },
    unbindEvents() {
      document.removeEventListener("mousemove", this.onLowCodeMouseMove, { passive: !1 }), document.removeEventListener("mouseup", this.onLowCodeMouseUp);
    },
    onMouseDown(e, t) {
      this.bindEvents(), this.touch.mouseDown = !0, this.touch.activeSplitter = t;
    },
    onLowCodeMouseMove(e) {
      this.touch.mouseDown && (e.preventDefault(), this.touch.dragging = !0, this.calculatePanesSize(this.getCurrentMouseDrag(e)), this.$emit(
        "resize",
        this.panes.map((t) => ({ min: t.min, max: t.max, size: t.size }))
      ));
    },
    onLowCodeMouseUp() {
      this.touch.dragging && this.$emit(
        "resized",
        this.panes.map((e) => ({ min: e.min, max: e.max, size: e.size }))
      ), this.touch.mouseDown = !1, setTimeout(() => {
        this.touch.dragging = !1, this.unbindEvents();
      }, 100);
    },
    onSplitterClick(e, t) {
      "ontouchstart" in window && (e.preventDefault(), this.dblClickSplitter && (this.lowcodeSplitterTaps.splitter === t ? (clearTimeout(this.lowcodeSplitterTaps.timeoutId), this.lowcodeSplitterTaps.timeoutId = null, this.onSplitterDblClick(e, t), this.lowcodeSplitterTaps.splitter = null) : (this.lowcodeSplitterTaps.splitter = t, this.lowcodeSplitterTaps.timeoutId = setTimeout(() => {
        this.lowcodeSplitterTaps.splitter = null;
      }, 500)))), this.touch.dragging || this.$emit("splitter-click", this.panes[t]);
    },
    onSplitterDblClick(e, t) {
      let o = 0;
      this.panes = this.panes.map((n, i) => (n.size = i === t ? n.max : n.min, i !== t && (o += n.min), n)), this.panes[t].size -= o, this.$emit("pane-maximize", this.panes[t]);
    },
    onPaneClick(e, t) {
      this.$emit("pane-click", this.indexedPanes[t]);
    },
    getCurrentMouseDrag(e) {
      const t = this.container.getBoundingClientRect(), { clientX: o, clientY: n } = "ontouchstart" in window && e.touches ? e.touches[0] : e;
      return {
        x: o - t.left,
        y: n - t.top
      };
    },
    getCurrentDragPercentage(e) {
      var o;
      e = e[this.horizontal ? "y" : "x"];
      const t = ((o = this.container) == null ? void 0 : o[this.horizontal ? "clientHeight" : "clientWidth"]) || 0;
      return this.rtl && !this.horizontal && (e = t - e), e * 100 / t;
    },
    calculatePanesSize(e) {
      const t = this.touch.activeSplitter;
      let o = {
        prevPanesSize: this.sumLowCodePrevPanesSize(t),
        nextPanesSize: this.sumLowCodeNextPanesSize(t),
        prevLowcodeReachedMinPanes: 0,
        nextLowCodeReachedMinPanes: 0
      };
      const n = 0 + (this.pushOtherPanes ? 0 : o.prevPanesSize), i = 100 - (this.pushOtherPanes ? 0 : o.nextPanesSize), r = Math.max(
        Math.min(this.getCurrentDragPercentage(e), i),
        n
      );
      let a = [t, t + 1], s = this.panes[a[0]] || null, l = this.panes[a[1]] || null;
      const c = s.max < 100 && r >= s.max + o.prevPanesSize, d = l.max < 100 && r <= 100 - (l.max + this.sumLowCodeNextPanesSize(t + 1));
      if (c || d) {
        c ? (s.size = s.max, l.size = Math.max(100 - s.max - o.prevPanesSize - o.nextPanesSize, 0)) : (s.size = Math.max(
          100 - l.max - o.prevPanesSize - this.sumLowCodeNextPanesSize(t + 1),
          0
        ), l.size = l.max);
        return;
      }
      if (this.pushOtherPanes) {
        const u = this.doPushOtherPanes(o, r);
        if (!u) return;
        ({ sums: o, panesLowCodeToResize: a } = u), s = this.panes[a[0]] || null, l = this.panes[a[1]] || null;
      }
      s !== null && (s.size = Math.min(
        Math.max(r - o.prevPanesSize - o.prevLowcodeReachedMinPanes, s.min),
        s.max
      )), l !== null && (l.size = Math.min(
        Math.max(
          100 - r - o.nextPanesSize - o.nextLowCodeReachedMinPanes,
          l.min
        ),
        l.max
      ));
    },
    doPushOtherPanes(e, t) {
      const o = this.touch.activeSplitter, n = [o, o + 1];
      return t < e.prevPanesSize + this.panes[n[0]].min && (n[0] = this.findPrevExpandedPane(o).index, e.prevLowcodeReachedMinPanes = 0, n[0] < o && this.panes.forEach((i, r) => {
        r > n[0] && r <= o && (i.size = i.min, e.prevLowcodeReachedMinPanes += i.min);
      }), e.prevPanesSize = this.sumLowCodePrevPanesSize(n[0]), n[0] === void 0) ? (e.prevLowcodeReachedMinPanes = 0, this.panes[0].size = this.panes[0].min, this.panes.forEach((i, r) => {
        r > 0 && r <= o && (i.size = i.min, e.prevLowcodeReachedMinPanes += i.min);
      }), this.panes[n[1]].size = 100 - e.prevLowcodeReachedMinPanes - this.panes[0].min - e.prevPanesSize - e.nextPanesSize, null) : t > 100 - e.nextPanesSize - this.panes[n[1]].min && (n[1] = this.findNextExpandedPane(o).index, e.nextLowCodeReachedMinPanes = 0, n[1] > o + 1 && this.panes.forEach((i, r) => {
        r > o && r < n[1] && (i.size = i.min, e.nextLowCodeReachedMinPanes += i.min);
      }), e.nextPanesSize = this.sumLowCodeNextPanesSize(n[1] - 1), n[1] === void 0) ? (e.nextLowCodeReachedMinPanes = 0, this.panes[this.panesCount - 1].size = this.panes[this.panesCount - 1].min, this.panes.forEach((i, r) => {
        r < this.panesCount - 1 && r >= o + 1 && (i.size = i.min, e.nextLowCodeReachedMinPanes += i.min);
      }), this.panes[n[0]].size = 100 - e.prevPanesSize - e.nextLowCodeReachedMinPanes - this.panes[this.panesCount - 1].min - e.nextPanesSize, null) : { sums: e, panesLowCodeToResize: n };
    },
    sumLowCodePrevPanesSize(e) {
      return this.panes.reduce((t, o, n) => t + (n < e ? o.size : 0), 0);
    },
    sumLowCodeNextPanesSize(e) {
      return this.panes.reduce((t, o, n) => t + (n > e + 1 ? o.size : 0), 0);
    },
    findPrevExpandedPane(e) {
      return [...this.panes].reverse().find((o) => o.index < e && o.size > o.min) || {};
    },
    findNextExpandedPane(e) {
      return this.panes.find((o) => o.index > e + 1 && o.size > o.min) || {};
    },
    checkLowCodeSplitpanesNodes() {
      Array.from(this.container.children).forEach((t) => {
        const o = t.classList.contains("splitpanes__pane"), n = t.classList.contains("splitpanes-lowcode__splitter");
        if (!o && !n) {
          t.parentNode.removeChild(t);
          return;
        }
      });
    },
    addSplitter(e, t, o = !1) {
      const n = e - 1, i = document.createElement("div");
      i.classList.add("splitpanes-lowcode__splitter"), o || (i.onmousedown = (r) => this.onMouseDown(r, n), typeof window < "u" && "ontouchstart" in window && (i.ontouchstart = (r) => this.onMouseDown(r, n)), i.onclick = (r) => this.onSplitterClick(r, n + 1)), this.dblClickSplitter && (i.ondblclick = (r) => this.onSplitterDblClick(r, n + 1)), t.parentNode.insertBefore(i, t);
    },
    removeSplitter(e) {
      e.onmousedown = void 0, e.onclick = void 0, e.ondblclick = void 0, e.parentNode.removeChild(e);
    },
    redoLowCodeSplitters() {
      const e = Array.from(this.container.children);
      e.forEach((o) => {
        o.className.includes("splitpanes-lowcode__splitter") && this.removeSplitter(o);
      });
      let t = 0;
      e.forEach((o) => {
        o.className.includes("splitpanes__pane") && (!t && this.firstSplitter ? this.addSplitter(t, o, !0) : t && this.addSplitter(t, o), t++);
      });
    },
    requestUpdate({ target: e, ...t }) {
      const o = this.indexedPanes[e._.uid];
      Object.entries(t).forEach(([n, i]) => {
        o[n] = i;
      });
    },
    onPaneAdd(e) {
      let t = -1;
      Array.from(e.$el.parentNode.children).some((i) => (i.className.includes("splitpanes__pane") && t++, i === e.$el));
      const o = parseFloat(e.minSize), n = parseFloat(e.maxSize);
      this.panes.splice(t, 0, {
        index: t,
        id: e._.uid,
        max: isNaN(n) ? 100 : n,
        min: isNaN(o) ? 0 : o,
        givenSize: e.size,
        size: e.size === null ? null : parseFloat(e.size),
        update: e.update
      }), this.panes.forEach((i, r) => {
        i.index = r;
      }), this.ready && this.$nextTick(() => {
        this.redoLowCodeSplitters(), this.resetLowCodePaneSizes({ addedPane: this.panes[t] }), this.$emit("pane-add", {
          index: t,
          panes: this.panes.map((i) => ({ min: i.min, max: i.max, size: i.size }))
        });
      });
    },
    onPaneRemove(e) {
      const t = this.panes.findIndex((n) => n.id === e._.uid), o = this.panes.splice(t, 1)[0];
      this.panes.forEach((n, i) => {
        n.index = i;
      }), this.$nextTick(() => {
        this.redoLowCodeSplitters(), this.resetLowCodePaneSizes({ removedPane: { ...o, index: t } }), this.$emit("pane-remove", {
          removed: o,
          panes: this.panes.map((n) => ({ min: n.min, max: n.max, size: n.size }))
        });
      });
    },
    resetLowCodePaneSizes(e = {}) {
      !e.addedPane && !e.removedPane ? this.initialPanesSizing() : this.panes.some((t) => t.givenSize !== null || t.min || t.max < 100) ? this.equalizeAfterAddOrRemove(e) : this.equalize(), this.ready && this.$emit(
        "resized",
        this.panes.map((t) => ({ min: t.min, max: t.max, size: t.size }))
      );
    },
    equalize() {
      const e = 100 / this.panesCount;
      let t = 0;
      const o = [], n = [];
      this.panes.forEach((i) => {
        i.size = Math.max(Math.min(e, i.max), i.min), t -= i.size, i.size >= i.max && o.push(i.id), i.size <= i.min && n.push(i.id);
      }), t > 0.1 && this.readjustSizes(t, o, n);
    },
    initialPanesSizing() {
      let e = 100;
      const t = [], o = [];
      let n = 0;
      this.panes.forEach((r) => {
        e -= r.size, r.size !== null && n++, r.size >= r.max && t.push(r.id), r.size <= r.min && o.push(r.id);
      });
      let i = 100;
      e > 0.1 && (this.panes.forEach((r) => {
        r.size === null && (r.size = Math.max(Math.min(e / (this.panesCount - n), r.max), r.min)), i -= r.size;
      }), i > 0.1 && this.readjustSizes(e, t, o));
    },
    equalizeAfterAddOrRemove({ addedPane: e } = {}) {
      let t = 100 / this.panesCount, o = 0;
      const n = [], i = [];
      e && e.givenSize !== null && (t = (100 - e.givenSize) / (this.panesCount - 1)), this.panes.forEach((r) => {
        o -= r.size, r.size >= r.max && n.push(r.id), r.size <= r.min && i.push(r.id);
      }), !(Math.abs(o) < 0.1) && (this.panes.forEach((r) => {
        e && e.givenSize !== null && e.id === r.id || (r.size = Math.max(Math.min(t, r.max), r.min)), o -= r.size, r.size >= r.max && n.push(r.id), r.size <= r.min && i.push(r.id);
      }), o > 0.1 && this.readjustSizes(o, n, i));
    },
    readjustSizes(e, t, o) {
      let n;
      e > 0 ? n = e / (this.panesCount - t.length) : n = e / (this.panesCount - o.length), this.panes.forEach((i) => {
        if (e > 0 && !t.includes(i.id)) {
          const r = Math.max(Math.min(i.size + n, i.max), i.min), a = r - i.size;
          e -= a, i.size = r;
        } else if (!o.includes(i.id)) {
          const r = Math.max(Math.min(i.size + n, i.max), i.min), a = r - i.size;
          e -= a, i.size = r;
        }
        i.update({
          [this.horizontal ? "height" : "width"]: `${this.indexedPanes[i.id].size}%`
        });
      }), Math.abs(e) > 0.1 && this.$nextTick(() => {
        this.ready && console.warn("Splitpanes: Could not resize panes correctly due to their constraints.");
      });
    }
  },
  render() {
    return ln(
      "div",
      {
        class: [
          `splitpanes--${this.horizontal ? "horizontal" : "vertical"}`,
          "splitpanes",
          {
            "splitpanes--dragging": this.touch.dragging
          }
        ],
        ref: "container"
      },
      this.$slots.default()
    );
  }
}, wu = {
  name: "Pane",
  inject: ["requestUpdate", "onPaneAdd", "onPaneRemove", "onPaneClick"],
  props: {
    size: { type: [Number, String], default: null },
    minSize: { type: [Number, String], default: 0 },
    maxSize: { type: [Number, String], default: 100 }
  },
  data: () => ({
    style: {}
  }),
  computed: {
    sizeNumber() {
      return this.size || this.size === 0 ? parseFloat(this.size) : null;
    },
    minSizeNumber() {
      return parseFloat(this.minSize);
    },
    maxSizeNumber() {
      return parseFloat(this.maxSize);
    }
  },
  watch: {
    sizeNumber(e) {
      this.requestUpdate({ target: this, size: e });
    },
    minSizeNumber(e) {
      this.requestUpdate({ target: this, min: e });
    },
    maxSizeNumber(e) {
      this.requestUpdate({ target: this, max: e });
    }
  },
  mounted() {
    this.onPaneAdd(this);
  },
  beforeUnmount() {
    this.onPaneRemove(this);
  },
  methods: {
    // Called from the splitpanes component.
    update(e) {
      this.style = e;
    }
  }
};
function Su(e, t, o, n, i, r) {
  return m(), b("div", {
    class: "splitpanes__pane",
    style: Et(e.style),
    onClick: t[0] || (t[0] = (a) => r.onPaneClick(a, e._.uid))
  }, [
    O(e.$slots, "default")
  ], 4);
}
const Rm = /* @__PURE__ */ F(wu, [["render", Su]]), Eu = {
  name: "I18nInput",
  components: {
    TinyInput: ut,
    BindI18n: uu,
    TinyPopover: Ue,
    IconClose: aa()
  },
  inheritAttrs: !1,
  props: {
    modelValue: {
      type: [String, Object],
      default: ""
    }
  },
  setup(e, { emit: t }) {
    var g;
    const { currentLanguage: o, getLangs: n, i18nResource: i } = ro(), r = L(() => n()), a = L(() => {
      var k;
      return ((k = e.modelValue) == null ? void 0 : k.type) === "i18n";
    }), s = q(""), l = q(((g = e.modelValue) == null ? void 0 : g.key) || ""), c = q(null), d = q(null);
    return We(() => {
      var k;
      l.value = ((k = e.modelValue) == null ? void 0 : k.key) || "", s.value = ro().translate(e.modelValue);
    }), {
      isBind: a,
      inputValue: s,
      inputChange: (k) => {
        t("update:modelValue", k.target.value);
      },
      langs: r,
      i18nValue: l,
      currentLanguage: o,
      i18nResource: i,
      setI18n: (k) => {
        t("update:modelValue", k);
      },
      addI1i8nRef: c,
      onHide: () => {
        c.value && (c.value.showEditItem = !1);
      },
      closePopover: () => {
        d.value.state.showPopper = !1;
      },
      popoverRef: d
    };
  }
}, ku = { class: "text-input" }, xu = { class: "popover-content" };
function Pu(e, t, o, n, i, r) {
  const a = E("icon-close"), s = E("bind-i18n"), l = E("svg-icon"), c = E("tiny-popover"), d = E("tiny-input");
  return m(), b("div", ku, [
    _(d, _t({
      modelValue: n.inputValue,
      placeholder: "请输入内容"
    }, e.$attrs, { onInput: n.inputChange }), {
      suffix: C(() => [
        _(c, {
          ref: "popoverRef",
          width: "340",
          trigger: "click",
          "visible-arrow": !1,
          "popper-class": "i18n-input-popover",
          onHide: n.onHide
        }, {
          reference: C(() => [
            _(l, {
              name: "internationalization",
              class: Z(["icon-language", { isBind: n.isBind }])
            }, null, 8, ["class"])
          ]),
          default: C(() => [
            v("div", xu, [
              t[1] || (t[1] = v("h3", { class: "title" }, "绑定国际化", -1)),
              _(a, {
                class: "icon-close",
                onClick: n.closePopover
              }, null, 8, ["onClick"]),
              _(s, {
                ref: "addI1i8nRef",
                modelValue: n.i18nValue,
                "onUpdate:modelValue": t[0] || (t[0] = (u) => n.i18nValue = u),
                "lang-data": n.langs,
                "is-bind": n.isBind,
                currentLang: n.currentLanguage,
                data: o.modelValue,
                locales: n.i18nResource.locales,
                onBind: n.setI18n
              }, null, 8, ["modelValue", "lang-data", "is-bind", "currentLang", "data", "locales", "onBind"])
            ])
          ]),
          _: 1
        }, 8, ["onHide"])
      ]),
      _: 1
    }, 16, ["modelValue", "onInput"])
  ]);
}
const Vm = /* @__PURE__ */ F(Eu, [["render", Pu], ["__scopeId", "data-v-4fd7d943"]]), { deepClone: li } = So, Iu = {
  props: {
    data: Object
  },
  emits: ["click"],
  setup(e, { emit: t }) {
    const o = bt("engine.canvas").canvasApi;
    return {
      dragstart: (a) => {
        var s;
        if (e.data && ((s = o.value) != null && s.dragStart)) {
          const l = li(e.data);
          o.value.dragStart(l);
          const c = a.target.querySelector(".component-item-component");
          a.dataTransfer.effectAllowed = "move", a.dataTransfer.setDragImage(c, 10, 10);
        }
      },
      dragend: (a) => {
        var s, l, c;
        ((s = a.dataTransfer) == null ? void 0 : s.dropEffect) === "none" && ((c = (l = o.value) == null ? void 0 : l.dragEnd) == null || c.call(l));
      },
      handleClick: () => {
        if (e.data) {
          const a = li(e.data);
          t("click", a);
        }
      }
    };
  }
};
function Tu(e, t, o, n, i, r) {
  return m(), b("div", {
    draggable: "true",
    class: "drag-item",
    onDragstart: t[0] || (t[0] = (...a) => n.dragstart && n.dragstart(...a)),
    onDragend: t[1] || (t[1] = (...a) => n.dragend && n.dragend(...a)),
    onClick: t[2] || (t[2] = (...a) => n.handleClick && n.handleClick(...a))
  }, [
    O(e.$slots, "default")
  ], 32);
}
const Fm = /* @__PURE__ */ F(Iu, [["render", Tu]]), Au = {
  components: {
    TinyPopover: Ue
  },
  props: {
    icon: {
      type: String,
      default: ""
    },
    content: {
      type: String,
      default: ""
    },
    options: {
      type: Object,
      default: () => ({})
    }
  }
}, Du = { class: "icon" }, Ou = {
  key: 0,
  class: "dots"
};
function Mu(e, t, o, n, i, r) {
  const a = E("svg-icon"), s = E("tiny-popover");
  return m(), N(s, {
    trigger: "hover",
    "open-delay": 1e3,
    "popper-class": "toolbar-right-popover",
    "append-to-body": "",
    content: o.content
  }, {
    reference: C(() => {
      var l;
      return [
        v("span", Du, [
          v("span", _t({ class: "icon-hides" }, e.$attrs), [
            _(a, { name: o.icon }, null, 8, ["name"]),
            (l = o.options) != null && l.showDots ? (m(), b("span", Ou)) : A("", !0)
          ], 16)
        ])
      ];
    }),
    _: 1
  }, 8, ["content"]);
}
const ci = /* @__PURE__ */ F(Au, [["render", Mu], ["__scopeId", "data-v-f4eb2aab"]]), Lu = {
  components: {
    TinyButton: je
  },
  props: {
    icon: {
      type: String,
      default: ""
    },
    content: {
      type: String,
      default: ""
    },
    options: {
      type: Object,
      default: () => ({})
    }
  }
}, Bu = { class: "svg-wrap" }, Nu = {
  key: 0,
  class: "dot"
}, Ru = { class: "save-title" };
function Vu(e, t, o, n, i, r) {
  var l;
  const a = E("svg-icon"), s = E("tiny-button");
  return m(), b("div", Bu, [
    (l = o.options) != null && l.showDots ? (m(), b("span", Nu)) : A("", !0),
    _(s, { class: "toolbar-button" }, {
      default: C(() => [
        o.icon ? (m(), N(a, {
          key: 0,
          name: o.icon
        }, null, 8, ["name"])) : A("", !0),
        v("span", Ru, B(o.content), 1),
        O(e.$slots, "default", {}, void 0, !0)
      ]),
      _: 3
    })
  ]);
}
const di = /* @__PURE__ */ F(Lu, [["render", Vu], ["__scopeId", "data-v-beab2611"]]), Fu = {
  components: {
    ToolbarBaseIcon: ci,
    ToolbarBaseButton: di
  },
  props: {
    icon: {
      type: String,
      default: ""
    },
    content: {
      type: String,
      default: ""
    },
    options: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["click-api"],
  setup(e, { emit: t }) {
    return {
      state: me({
        icon: L(() => e.icon),
        content: L(() => e.content),
        options: L(() => e.options)
      }),
      click: () => {
        t("click-api");
      },
      getRender: () => e.options.renderType === "button" ? di : e.options.renderType === "icon" ? ci : !1
    };
  }
}, zu = { key: 0 };
function Uu(e, t, o, n, i, r) {
  var a;
  return m(), b("span", {
    class: "toolbar-item-wrap",
    onClick: t[0] || (t[0] = (...s) => n.click && n.click(...s))
  }, [
    (m(), N(Ve(n.getRender()), Fr(zr(n.state)), {
      default: C(() => [
        O(e.$slots, "button", {}, void 0, !0)
      ]),
      _: 3
    }, 16)),
    O(e.$slots, "default", {}, void 0, !0),
    (a = n.state.options) != null && a.collapsed && o.content ? (m(), b("span", zu, B(n.state.content), 1)) : A("", !0)
  ]);
}
const zm = /* @__PURE__ */ F(Fu, [["render", Uu], ["__scopeId", "data-v-20ae01bf"]]), ju = ({
  title: e,
  status: t,
  message: o,
  exec: n,
  cancel: i,
  showFooter: r = !0
}) => {
  wo.confirm({
    title: e,
    status: t,
    showFooter: r,
    message: () => _("div", {
      class: "modal-content"
    }, [_("div", {
      class: "wrap"
    }, [typeof o == "string" ? o : _(o, null, null)])])
  }).then((a) => {
    a === "confirm" && typeof n == "function" ? n() : typeof i == "function" && i();
  });
}, cr = ({
  title: e,
  status: t,
  message: o,
  exec: n,
  width: i = "400"
}) => {
  wo.alert({
    title: e,
    status: t,
    "confirm-btn-props": {
      text: "确定"
    },
    width: i,
    message() {
      return _("div", {
        div: !0,
        class: "modal-content"
      }, [_("div", {
        class: "wrap"
      }, [typeof o == "string" ? o : _(o, null, null)])]);
    }
  }).then(() => {
    typeof n == "function" && n();
  });
}, dr = (e) => {
  const t = {
    ...e,
    modelValue: !0
  };
  let o = ln(wo, t);
  const n = document.createElement("div"), i = () => {
    var r;
    (r = o.el) == null || r.remove(), o = null;
  };
  return Ur(o, n), {
    TopBox: o,
    close: i
  };
};
window.topbox = dr;
window.message = cr;
const Um = {
  confirm: ju,
  message: cr,
  topbox: dr
}, $u = {
  info: 5e3,
  success: 5e3,
  warning: 1e4,
  error: 1e4
}, jm = (e) => {
  const {
    customClass: t,
    title: o,
    type: n = "info",
    position: i = "top-right",
    ...r
  } = e;
  Gr({
    duration: $u[n],
    ...r,
    position: i,
    title: o,
    type: n,
    customClass: `${t}`,
    verticalOffset: 46
  });
}, $m = {
  install: (e) => {
    Object.entries({
      ConfigGroup: Ji,
      ConfigItem: Eo
    }).forEach(([o, n]) => {
      e.component(o, n);
    });
  }
}, qu = {
  pluginConfig: {
    formatCode: {
      // 默认格式化配置
      ..._a
    }
  }
}, Hu = async (e, t = {}) => va({ ...qu, ...t }).generate(e), Ju = (...e) => ya(...e), ur = async (e, t, o = /* @__PURE__ */ new Set()) => {
  const n = [], i = qi(e), r = i.filter((l) => o.has(l) ? !1 : (o.add(l), !0)).map((l) => t(l)), a = await Promise.allSettled(r), s = [];
  return a.forEach((l) => {
    var p, h, g;
    const c = (p = l.value) == null ? void 0 : p[0];
    if (l.status !== "fulfilled" || !c)
      return;
    const d = c == null ? void 0 : c.current_history, u = (g = (h = c == null ? void 0 : c.histories) == null ? void 0 : h.find) == null ? void 0 : g.call(h, (k) => (k == null ? void 0 : k.id) === d);
    let f = null;
    d && (u != null && u.content) ? f = u.content : f = c == null ? void 0 : c.content, f && (f.version = d || "", f.subBlockDeps = i, n.push(f), s.push(ur(f, t, o)));
  }), (await Promise.allSettled(s)).forEach((l) => {
    l.status === "fulfilled" && l.value && n.push(...l.value);
  }), n;
}, qm = {
  id: "engine.service.generateCode",
  type: "MetaService",
  options: {},
  apis: {
    parseRequiredBlocks: qi,
    getAllNestedBlocksSchema: ur,
    generatePageCode: Ju,
    generateAppCode: Hu
  }
}, Wu = () => {
  const e = new URLSearchParams(location.search), t = e.get("id"), o = e.get("blockid"), n = e.get("pageid"), i = e.get("previewid"), r = e.get("type"), a = e.get("version");
  return {
    type: r || "app",
    id: t,
    pageId: n,
    previewId: i,
    blockId: o,
    version: a
  };
}, Yu = {
  userInfo: null,
  // 当前应用
  appInfo: {
    id: "",
    name: "",
    app_desc: "",
    app_website: "",
    obs_url: null,
    published_at: "",
    created_at: "",
    updated_at: "",
    platform: "",
    state: null,
    published: !1,
    tenant: null,
    editor_url: ""
  },
  // 应用列表
  appList: []
}, Xu = () => bt(Vt.Http).get("/platform-center/api/user/me").catch((e) => {
  Cn().message({ message: e.message, status: "error" });
}), Gu = (e) => bt(Vt.Http).get(`/app-center/api/apps/detail/${e}`), Ku = (e) => bt(Vt.Http).get(`/app-center/api/apps/list/${e}`), { subscribe: ui, publish: on } = ua(), fr = (e) => on({ topic: "locationHistoryChanged", data: e }), Qu = (e) => {
  const t = ["pageId", "blockId", "previewId"].reduce((a, s) => (a[s] = s.toLowerCase(), a), {}), o = Object.keys(e), n = new URL(window.location.href), i = {};
  Object.entries(t).forEach(([a, s]) => {
    o.includes(a) && e[a] !== n.searchParams.get(s) && (i[a] = e[a]);
  });
  const r = Object.keys(i);
  return r.includes("pageId") && r.includes("blockId") && delete i.blockId, i;
}, xn = (e, t = !1) => {
  const o = Qu(e), n = new URL(window.location.href), { pageId: i, blockId: r, previewId: a } = o, s = Object.keys(o);
  s.length !== 0 && (s.includes("pageId") ? (n.searchParams.delete("blockid"), n.searchParams.set("pageid", i)) : s.includes("blockId") && (n.searchParams.delete("pageid"), n.searchParams.set("blockid", r)), s.includes("previewId") && (a ? n.searchParams.set("previewid", a) : n.searchParams.delete("previewid")), t ? window.history.replaceState({}, "", n) : window.history.pushState({}, "", n), fr(o));
}, Zu = (e) => {
  xn({ pageId: e });
}, ef = (e) => {
  xn({ blockId: e });
}, tf = (e, t = !1) => {
  xn({ previewId: e }, t);
}, Hm = ji({
  id: Vt.GlobalService,
  type: "MetaService",
  options: {
    enableTitleUpdate: !0
  },
  initialState: Yu,
  init: ({ state: e, options: t }) => {
    Le(
      () => e.appInfo,
      (o) => {
        on({ topic: "app_info_changed", data: o });
      }
    ), Le(
      () => e.appList,
      (o) => {
        on({ topic: "app_list_changed", data: o });
      }
    ), ui({
      topic: "app_id_changed",
      callback: (o) => {
        if (!o) {
          console.error("Invalid appId received in app_id_changed event");
          return;
        }
        Gu(o).then((n) => {
          e.appInfo = n, t.enableTitleUpdate && (document.title = `${n.name} —— TinyEngine 前端可视化设计器`);
        });
      }
    }), ui({
      topic: "platform_id_changed",
      callback: (o) => {
        if (!o) {
          console.error("Received platform_id_changed event with no platformId");
          return;
        }
        Ku(o).then((n) => {
          e.appList = n;
        });
      }
    }), Xu().then((o) => {
      o && (e.userInfo = o), on({ topic: "global_service_init_finish" });
    });
  },
  apis: () => ({
    getBaseInfo: Wu,
    postLocationHistoryChanged: fr,
    updateParams: xn,
    updatePageId: Zu,
    updateBlockId: ef,
    updatePreviewId: tf
  })
});
var Ao = { exports: {} }, pr = function(t, o) {
  return function() {
    return t.apply(o, arguments);
  };
}, nf = pr, Do = Object.prototype.toString, Oo = /* @__PURE__ */ function(e) {
  return function(t) {
    var o = Do.call(t);
    return e[o] || (e[o] = o.slice(8, -1).toLowerCase());
  };
}(/* @__PURE__ */ Object.create(null));
function it(e) {
  return e = e.toLowerCase(), function(o) {
    return Oo(o) === e;
  };
}
function Pn(e) {
  return Array.isArray(e);
}
function go(e) {
  return typeof e > "u";
}
function of(e) {
  return e !== null && !go(e) && e.constructor !== null && !go(e.constructor) && typeof e.constructor.isBuffer == "function" && e.constructor.isBuffer(e);
}
var mr = it("ArrayBuffer");
function rf(e) {
  var t;
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? t = ArrayBuffer.isView(e) : t = e && e.buffer && mr(e.buffer), t;
}
function af(e) {
  return typeof e == "string";
}
function hr(e) {
  return typeof e == "number";
}
function gr(e) {
  return e !== null && typeof e == "object";
}
function rn(e) {
  if (Oo(e) !== "object")
    return !1;
  var t = Object.getPrototypeOf(e);
  return t === null || t === Object.prototype;
}
function sf(e) {
  return e && Object.keys(e).length === 0 && Object.getPrototypeOf(e) === Object.prototype;
}
var lf = it("Date"), cf = it("File"), df = it("Blob"), uf = it("FileList");
function Mo(e) {
  return Do.call(e) === "[object Function]";
}
function ff(e) {
  return gr(e) && Mo(e.pipe);
}
function pf(e) {
  var t = "[object FormData]";
  return e && (typeof FormData == "function" && e instanceof FormData || Do.call(e) === t || Mo(e.toString) && e.toString() === t);
}
var mf = it("URLSearchParams");
function hf(e) {
  return e.trim ? e.trim() : e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
}
function gf() {
  var e;
  return typeof navigator < "u" && ((e = navigator.product) === "ReactNative" || e === "NativeScript" || e === "NS") ? !1 : typeof window < "u" && typeof document < "u";
}
function Lo(e, t) {
  if (!(e === null || typeof e > "u"))
    if (typeof e != "object" && (e = [e]), Pn(e))
      for (var o = 0, n = e.length; o < n; o++)
        t.call(null, e[o], o, e);
    else
      for (var i in e)
        Object.prototype.hasOwnProperty.call(e, i) && t.call(null, e[i], i, e);
}
function vo() {
  var e = {};
  function t(i, r) {
    rn(e[r]) && rn(i) ? e[r] = vo(e[r], i) : rn(i) ? e[r] = vo({}, i) : Pn(i) ? e[r] = i.slice() : e[r] = i;
  }
  for (var o = 0, n = arguments.length; o < n; o++)
    Lo(arguments[o], t);
  return e;
}
function vf(e, t, o) {
  return Lo(t, function(i, r) {
    o && typeof i == "function" ? e[r] = nf(i, o) : e[r] = i;
  }), e;
}
function yf(e) {
  return e.charCodeAt(0) === 65279 && (e = e.slice(1)), e;
}
function _f(e, t, o, n) {
  e.prototype = Object.create(t.prototype, n), e.prototype.constructor = e, o && Object.assign(e.prototype, o);
}
function bf(e, t, o, n) {
  var i, r, a, s = {};
  if (t = t || {}, e == null) return t;
  do {
    for (i = Object.getOwnPropertyNames(e), r = i.length; r-- > 0; )
      a = i[r], (!n || n(a, e, t)) && !s[a] && (t[a] = e[a], s[a] = !0);
    e = o !== !1 && Object.getPrototypeOf(e);
  } while (e && (!o || o(e, t)) && e !== Object.prototype);
  return t;
}
function Cf(e, t, o) {
  e = String(e), (o === void 0 || o > e.length) && (o = e.length), o -= t.length;
  var n = e.indexOf(t, o);
  return n !== -1 && n === o;
}
function wf(e) {
  if (!e) return null;
  if (Pn(e)) return e;
  var t = e.length;
  if (!hr(t)) return null;
  for (var o = new Array(t); t-- > 0; )
    o[t] = e[t];
  return o;
}
var Sf = /* @__PURE__ */ function(e) {
  return function(t) {
    return e && t instanceof e;
  };
}(typeof Uint8Array < "u" && Object.getPrototypeOf(Uint8Array));
function Ef(e, t) {
  for (var o = e && e[Symbol.iterator], n = o.call(e), i; (i = n.next()) && !i.done; ) {
    var r = i.value;
    t.call(e, r[0], r[1]);
  }
}
function kf(e, t) {
  for (var o, n = []; (o = e.exec(t)) !== null; )
    n.push(o);
  return n;
}
var xf = it("HTMLFormElement"), Pf = /* @__PURE__ */ function(t) {
  return function(o, n) {
    return t.call(o, n);
  };
}(Object.prototype.hasOwnProperty), de = {
  isArray: Pn,
  isArrayBuffer: mr,
  isBuffer: of,
  isFormData: pf,
  isArrayBufferView: rf,
  isString: af,
  isNumber: hr,
  isObject: gr,
  isPlainObject: rn,
  isEmptyObject: sf,
  isUndefined: go,
  isDate: lf,
  isFile: cf,
  isBlob: df,
  isFunction: Mo,
  isStream: ff,
  isURLSearchParams: mf,
  isStandardBrowserEnv: gf,
  forEach: Lo,
  merge: vo,
  extend: vf,
  trim: hf,
  stripBOM: yf,
  inherits: _f,
  toFlatObject: bf,
  kindOf: Oo,
  kindOfTest: it,
  endsWith: Cf,
  toArray: wf,
  isTypedArray: Sf,
  isFileList: uf,
  forEachEntry: Ef,
  matchAll: kf,
  isHTMLForm: xf,
  hasOwnProperty: Pf
}, vr = de;
function wt(e, t, o, n, i) {
  Error.call(this), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error().stack, this.message = e, this.name = "AxiosError", t && (this.code = t), o && (this.config = o), n && (this.request = n), i && (this.response = i);
}
vr.inherits(wt, Error, {
  toJSON: function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  }
});
var yr = wt.prototype, _r = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach(function(e) {
  _r[e] = { value: e };
});
Object.defineProperties(wt, _r);
Object.defineProperty(yr, "isAxiosError", { value: !0 });
wt.from = function(e, t, o, n, i, r) {
  var a = Object.create(yr);
  return vr.toFlatObject(e, a, function(l) {
    return l !== Error.prototype;
  }), wt.call(a, e.message, t, o, n, i), a.cause = e, a.name = e.name, r && Object.assign(a, r), a;
};
var ft = wt, If = typeof self == "object" ? self.FormData : window.FormData, Tf = If, X = de, Af = ft, Df = Tf;
function yo(e) {
  return X.isPlainObject(e) || X.isArray(e);
}
function br(e) {
  return X.endsWith(e, "[]") ? e.slice(0, -2) : e;
}
function fi(e, t, o) {
  return e ? e.concat(t).map(function(i, r) {
    return i = br(i), !o && r ? "[" + i + "]" : i;
  }).join(o ? "." : "") : t;
}
function Of(e) {
  return X.isArray(e) && !e.some(yo);
}
var Mf = X.toFlatObject(X, {}, null, function(t) {
  return /^is[A-Z]/.test(t);
});
function Lf(e) {
  return e && X.isFunction(e.append) && e[Symbol.toStringTag] === "FormData" && e[Symbol.iterator];
}
function Bf(e, t, o) {
  if (!X.isObject(e))
    throw new TypeError("target must be an object");
  t = t || new (Df || FormData)(), o = X.toFlatObject(o, {
    metaTokens: !0,
    dots: !1,
    indexes: !1
  }, !1, function(g, k) {
    return !X.isUndefined(k[g]);
  });
  var n = o.metaTokens, i = o.visitor || d, r = o.dots, a = o.indexes, s = o.Blob || typeof Blob < "u" && Blob, l = s && Lf(t);
  if (!X.isFunction(i))
    throw new TypeError("visitor must be a function");
  function c(h) {
    if (h === null) return "";
    if (X.isDate(h))
      return h.toISOString();
    if (!l && X.isBlob(h))
      throw new Af("Blob is not supported. Use a Buffer instead.");
    return X.isArrayBuffer(h) || X.isTypedArray(h) ? l && typeof Blob == "function" ? new Blob([h]) : Buffer.from(h) : h;
  }
  function d(h, g, k) {
    var D = h;
    if (h && !k && typeof h == "object") {
      if (X.endsWith(g, "{}"))
        g = n ? g : g.slice(0, -2), h = JSON.stringify(h);
      else if (X.isArray(h) && Of(h) || X.isFileList(h) || X.endsWith(g, "[]") && (D = X.toArray(h)))
        return g = br(g), D.forEach(function(y, w) {
          !X.isUndefined(y) && t.append(
            // eslint-disable-next-line no-nested-ternary
            a === !0 ? fi([g], w, r) : a === null ? g : g + "[]",
            c(y)
          );
        }), !1;
    }
    return yo(h) ? !0 : (t.append(fi(k, g, r), c(h)), !1);
  }
  var u = [], f = Object.assign(Mf, {
    defaultVisitor: d,
    convertValue: c,
    isVisitable: yo
  });
  function p(h, g) {
    if (!X.isUndefined(h)) {
      if (u.indexOf(h) !== -1)
        throw Error("Circular reference detected in " + g.join("."));
      u.push(h), X.forEach(h, function(D, S) {
        var y = !X.isUndefined(D) && i.call(
          t,
          D,
          X.isString(S) ? S.trim() : S,
          g,
          f
        );
        y === !0 && p(D, g ? g.concat(S) : [S]);
      }), u.pop();
    }
  }
  if (!X.isObject(e))
    throw new TypeError("data must be an object");
  return p(e), t;
}
var In = Bf, Nf = In;
function pi(e) {
  var t = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g, function(n) {
    return t[n];
  });
}
function Cr(e, t) {
  this._pairs = [], e && Nf(e, this, t);
}
var wr = Cr.prototype;
wr.append = function(t, o) {
  this._pairs.push([t, o]);
};
wr.toString = function(t) {
  var o = t ? function(n) {
    return t.call(this, n, pi);
  } : pi;
  return this._pairs.map(function(i) {
    return o(i[0]) + "=" + o(i[1]);
  }, "").join("&");
};
var Sr = Cr, Rf = de, Vf = Sr;
function Ff(e) {
  return encodeURIComponent(e).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
var Er = function(t, o, n) {
  if (!o)
    return t;
  var i = t.indexOf("#");
  i !== -1 && (t = t.slice(0, i));
  var r = n && n.encode || Ff, a = n && n.serialize, s;
  return a ? s = a(o, n) : s = Rf.isURLSearchParams(o) ? o.toString() : new Vf(o, n).toString(r), s && (t += (t.indexOf("?") === -1 ? "?" : "&") + s), t;
}, zf = de;
function Ut() {
  this.handlers = [];
}
Ut.prototype.use = function(t, o, n) {
  return this.handlers.push({
    fulfilled: t,
    rejected: o,
    synchronous: n ? n.synchronous : !1,
    runWhen: n ? n.runWhen : null
  }), this.handlers.length - 1;
};
Ut.prototype.eject = function(t) {
  this.handlers[t] && (this.handlers[t] = null);
};
Ut.prototype.clear = function() {
  this.handlers && (this.handlers = []);
};
Ut.prototype.forEach = function(t) {
  zf.forEach(this.handlers, function(n) {
    n !== null && t(n);
  });
};
var Uf = Ut, jf = de, kr = function(t, o) {
  jf.forEach(t, function(i, r) {
    r !== o && r.toUpperCase() === o.toUpperCase() && (t[o] = i, delete t[r]);
  });
}, xr = {
  silentJSONParsing: !0,
  forcedJSONParsing: !0,
  clarifyTimeoutError: !1
}, $f = Sr, qf = typeof URLSearchParams < "u" ? URLSearchParams : $f, Hf = FormData, Jf = {
  classes: {
    URLSearchParams: qf,
    FormData: Hf,
    Blob
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
}, Bo = Jf, Wf = de, Yf = In, mi = Bo, Xf = function(t, o) {
  return Yf(t, new mi.classes.URLSearchParams(), Object.assign({
    visitor: function(n, i, r, a) {
      return mi.isNode && Wf.isBuffer(n) ? (this.append(i, n.toString("base64")), !1) : a.defaultVisitor.apply(this, arguments);
    }
  }, o));
}, Ke = de;
function Gf(e) {
  return Ke.matchAll(/\w+|\[(\w*)]/g, e).map(function(t) {
    return t[0] === "[]" ? "" : t[1] || t[0];
  });
}
function Kf(e) {
  var t = {}, o = Object.keys(e), n, i = o.length, r;
  for (n = 0; n < i; n++)
    r = o[n], t[r] = e[r];
  return t;
}
function Qf(e) {
  function t(n, i, r, a) {
    var s = n[a++], l = Number.isFinite(+s), c = a >= n.length;
    if (s = !s && Ke.isArray(r) ? r.length : s, c)
      return Ke.hasOwnProperty(r, s) ? r[s] = [r[s], i] : r[s] = i, !l;
    (!r[s] || !Ke.isObject(r[s])) && (r[s] = []);
    var d = t(n, i, r[s], a);
    return d && Ke.isArray(r[s]) && (r[s] = Kf(r[s])), !l;
  }
  if (Ke.isFormData(e) && Ke.isFunction(e.entries)) {
    var o = {};
    return Ke.forEachEntry(e, function(n, i) {
      t(Gf(n), i, o, 0);
    }), o;
  }
  return null;
}
var Pr = Qf, Hn, hi;
function Zf() {
  if (hi) return Hn;
  hi = 1;
  var e = ft;
  return Hn = function(o, n, i) {
    var r = i.config.validateStatus;
    !i.status || !r || r(i.status) ? o(i) : n(new e(
      "Request failed with status code " + i.status,
      [e.ERR_BAD_REQUEST, e.ERR_BAD_RESPONSE][Math.floor(i.status / 100) - 4],
      i.config,
      i.request,
      i
    ));
  }, Hn;
}
var Jn, gi;
function ep() {
  if (gi) return Jn;
  gi = 1;
  var e = de;
  return Jn = e.isStandardBrowserEnv() ? (
    // Standard browser envs support document.cookie
    /* @__PURE__ */ function() {
      return {
        write: function(n, i, r, a, s, l) {
          var c = [];
          c.push(n + "=" + encodeURIComponent(i)), e.isNumber(r) && c.push("expires=" + new Date(r).toGMTString()), e.isString(a) && c.push("path=" + a), e.isString(s) && c.push("domain=" + s), l === !0 && c.push("secure"), document.cookie = c.join("; ");
        },
        read: function(n) {
          var i = document.cookie.match(new RegExp("(^|;\\s*)(" + n + ")=([^;]*)"));
          return i ? decodeURIComponent(i[3]) : null;
        },
        remove: function(n) {
          this.write(n, "", Date.now() - 864e5);
        }
      };
    }()
  ) : (
    // Non standard browser env (web workers, react-native) lack needed support.
    /* @__PURE__ */ function() {
      return {
        write: function() {
        },
        read: function() {
          return null;
        },
        remove: function() {
        }
      };
    }()
  ), Jn;
}
var tp = function(t) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);
}, np = function(t, o) {
  return o ? t.replace(/\/+$/, "") + "/" + o.replace(/^\/+/, "") : t;
}, op = tp, ip = np, Ir = function(t, o) {
  return t && !op(o) ? ip(t, o) : o;
}, Wn, vi;
function rp() {
  if (vi) return Wn;
  vi = 1;
  var e = de, t = [
    "age",
    "authorization",
    "content-length",
    "content-type",
    "etag",
    "expires",
    "from",
    "host",
    "if-modified-since",
    "if-unmodified-since",
    "last-modified",
    "location",
    "max-forwards",
    "proxy-authorization",
    "referer",
    "retry-after",
    "user-agent"
  ];
  return Wn = function(n) {
    var i = {}, r, a, s;
    return n && e.forEach(n.split(`
`), function(c) {
      if (s = c.indexOf(":"), r = e.trim(c.slice(0, s)).toLowerCase(), a = e.trim(c.slice(s + 1)), r) {
        if (i[r] && t.indexOf(r) >= 0)
          return;
        r === "set-cookie" ? i[r] = (i[r] ? i[r] : []).concat([a]) : i[r] = i[r] ? i[r] + ", " + a : a;
      }
    }), i;
  }, Wn;
}
var Yn, yi;
function ap() {
  if (yi) return Yn;
  yi = 1;
  var e = de;
  return Yn = e.isStandardBrowserEnv() ? (
    // Standard browser envs have full support of the APIs needed to test
    // whether the request URL is of the same origin as current location.
    function() {
      var o = /(msie|trident)/i.test(navigator.userAgent), n = document.createElement("a"), i;
      function r(a) {
        var s = a;
        return o && (n.setAttribute("href", s), s = n.href), n.setAttribute("href", s), {
          href: n.href,
          protocol: n.protocol ? n.protocol.replace(/:$/, "") : "",
          host: n.host,
          search: n.search ? n.search.replace(/^\?/, "") : "",
          hash: n.hash ? n.hash.replace(/^#/, "") : "",
          hostname: n.hostname,
          port: n.port,
          pathname: n.pathname.charAt(0) === "/" ? n.pathname : "/" + n.pathname
        };
      }
      return i = r(window.location.href), function(s) {
        var l = e.isString(s) ? r(s) : s;
        return l.protocol === i.protocol && l.host === i.host;
      };
    }()
  ) : (
    // Non standard browser envs (web workers, react-native) lack needed support.
    /* @__PURE__ */ function() {
      return function() {
        return !0;
      };
    }()
  ), Yn;
}
var Xn, _i;
function Tn() {
  if (_i) return Xn;
  _i = 1;
  var e = ft, t = de;
  function o(n, i, r) {
    e.call(this, n ?? "canceled", e.ERR_CANCELED, i, r), this.name = "CanceledError";
  }
  return t.inherits(o, e, {
    __CANCEL__: !0
  }), Xn = o, Xn;
}
var Gn, bi;
function sp() {
  return bi || (bi = 1, Gn = function(t) {
    var o = /^([-+\w]{1,25})(:?\/\/|:)/.exec(t);
    return o && o[1] || "";
  }), Gn;
}
var Kn, Ci;
function wi() {
  if (Ci) return Kn;
  Ci = 1;
  var e = de, t = Zf(), o = ep(), n = Er, i = Ir, r = rp(), a = ap(), s = xr, l = ft, c = Tn(), d = sp(), u = Bo;
  return Kn = function(p) {
    return new Promise(function(g, k) {
      var D = p.data, S = p.headers, y = p.responseType, w = p.withXSRFToken, x;
      function M() {
        p.cancelToken && p.cancelToken.unsubscribe(x), p.signal && p.signal.removeEventListener("abort", x);
      }
      e.isFormData(D) && e.isStandardBrowserEnv() && delete S["Content-Type"];
      var P = new XMLHttpRequest();
      if (p.auth) {
        var G = p.auth.username || "", z = p.auth.password ? unescape(encodeURIComponent(p.auth.password)) : "";
        S.Authorization = "Basic " + btoa(G + ":" + z);
      }
      var K = i(p.baseURL, p.url);
      P.open(p.method.toUpperCase(), n(K, p.params, p.paramsSerializer), !0), P.timeout = p.timeout;
      function oe() {
        if (P) {
          var Y = "getAllResponseHeaders" in P ? r(P.getAllResponseHeaders()) : null, re = !y || y === "text" || y === "json" ? P.responseText : P.response, ae = {
            data: re,
            status: P.status,
            statusText: P.statusText,
            headers: Y,
            config: p,
            request: P
          };
          t(function(he) {
            g(he), M();
          }, function(he) {
            k(he), M();
          }, ae), P = null;
        }
      }
      if ("onloadend" in P ? P.onloadend = oe : P.onreadystatechange = function() {
        !P || P.readyState !== 4 || P.status === 0 && !(P.responseURL && P.responseURL.indexOf("file:") === 0) || setTimeout(oe);
      }, P.onabort = function() {
        P && (k(new l("Request aborted", l.ECONNABORTED, p, P)), P = null);
      }, P.onerror = function() {
        k(new l("Network Error", l.ERR_NETWORK, p, P)), P = null;
      }, P.ontimeout = function() {
        var re = p.timeout ? "timeout of " + p.timeout + "ms exceeded" : "timeout exceeded", ae = p.transitional || s;
        p.timeoutErrorMessage && (re = p.timeoutErrorMessage), k(new l(
          re,
          ae.clarifyTimeoutError ? l.ETIMEDOUT : l.ECONNABORTED,
          p,
          P
        )), P = null;
      }, e.isStandardBrowserEnv() && (w && e.isFunction(w) && (w = w(p)), w || w !== !1 && a(K))) {
        var ue = p.xsrfHeaderName && p.xsrfCookieName && o.read(p.xsrfCookieName);
        ue && (S[p.xsrfHeaderName] = ue);
      }
      "setRequestHeader" in P && e.forEach(S, function(re, ae) {
        typeof D > "u" && ae.toLowerCase() === "content-type" ? delete S[ae] : P.setRequestHeader(ae, re);
      }), e.isUndefined(p.withCredentials) || (P.withCredentials = !!p.withCredentials), y && y !== "json" && (P.responseType = p.responseType), typeof p.onDownloadProgress == "function" && P.addEventListener("progress", p.onDownloadProgress), typeof p.onUploadProgress == "function" && P.upload && P.upload.addEventListener("progress", p.onUploadProgress), (p.cancelToken || p.signal) && (x = function(Y) {
        P && (k(!Y || Y.type ? new c(null, p, P) : Y), P.abort(), P = null);
      }, p.cancelToken && p.cancelToken.subscribe(x), p.signal && (p.signal.aborted ? x() : p.signal.addEventListener("abort", x))), !D && D !== !1 && D !== 0 && D !== "" && (D = null);
      var ie = d(K);
      if (ie && u.protocols.indexOf(ie) === -1) {
        k(new l("Unsupported protocol " + ie + ":", l.ERR_BAD_REQUEST, p));
        return;
      }
      P.send(D);
    });
  }, Kn;
}
var le = de, Si = kr, Ei = ft, lp = xr, cp = In, dp = Xf, ki = Bo, up = Pr, fp = {
  "Content-Type": "application/x-www-form-urlencoded"
};
function xi(e, t) {
  !le.isUndefined(e) && le.isUndefined(e["Content-Type"]) && (e["Content-Type"] = t);
}
function pp() {
  var e;
  return (typeof XMLHttpRequest < "u" || typeof process < "u" && Object.prototype.toString.call(process) === "[object process]") && (e = wi()), e;
}
function mp(e, t, o) {
  if (le.isString(e))
    try {
      return (t || JSON.parse)(e), le.trim(e);
    } catch (n) {
      if (n.name !== "SyntaxError")
        throw n;
    }
  return (o || JSON.stringify)(e);
}
var An = {
  transitional: lp,
  adapter: pp(),
  transformRequest: [function(t, o) {
    Si(o, "Accept"), Si(o, "Content-Type");
    var n = o && o["Content-Type"] || "", i = n.indexOf("application/json") > -1, r = le.isObject(t);
    r && le.isHTMLForm(t) && (t = new FormData(t));
    var a = le.isFormData(t);
    if (a)
      return i ? JSON.stringify(up(t)) : t;
    if (le.isArrayBuffer(t) || le.isBuffer(t) || le.isStream(t) || le.isFile(t) || le.isBlob(t))
      return t;
    if (le.isArrayBufferView(t))
      return t.buffer;
    if (le.isURLSearchParams(t))
      return xi(o, "application/x-www-form-urlencoded;charset=utf-8"), t.toString();
    var s;
    if (r) {
      if (n.indexOf("application/x-www-form-urlencoded") !== -1)
        return dp(t, this.formSerializer).toString();
      if ((s = le.isFileList(t)) || n.indexOf("multipart/form-data") > -1) {
        var l = this.env && this.env.FormData;
        return cp(
          s ? { "files[]": t } : t,
          l && new l(),
          this.formSerializer
        );
      }
    }
    return r || i ? (xi(o, "application/json"), mp(t)) : t;
  }],
  transformResponse: [function(t) {
    var o = this.transitional || An.transitional, n = o && o.forcedJSONParsing, i = this.responseType === "json";
    if (t && le.isString(t) && (n && !this.responseType || i)) {
      var r = o && o.silentJSONParsing, a = !r && i;
      try {
        return JSON.parse(t);
      } catch (s) {
        if (a)
          throw s.name === "SyntaxError" ? Ei.from(s, Ei.ERR_BAD_RESPONSE, this, null, this.response) : s;
      }
    }
    return t;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: ki.classes.FormData,
    Blob: ki.classes.Blob
  },
  validateStatus: function(t) {
    return t >= 200 && t < 300;
  },
  headers: {
    common: {
      Accept: "application/json, text/plain, */*"
    }
  }
};
le.forEach(["delete", "get", "head"], function(t) {
  An.headers[t] = {};
});
le.forEach(["post", "put", "patch"], function(t) {
  An.headers[t] = le.merge(fp);
});
var No = An, hp = de, gp = No, vp = function(t, o, n, i) {
  var r = this || gp;
  return hp.forEach(i, function(s) {
    t = s.call(r, t, o, n);
  }), t;
}, Qn, Pi;
function Tr() {
  return Pi || (Pi = 1, Qn = function(t) {
    return !!(t && t.__CANCEL__);
  }), Qn;
}
var Ii = de, Zn = vp, yp = Tr(), _p = No, bp = Tn(), Ti = kr;
function eo(e) {
  if (e.cancelToken && e.cancelToken.throwIfRequested(), e.signal && e.signal.aborted)
    throw new bp();
}
var Cp = function(t) {
  eo(t), t.headers = t.headers || {}, t.data = Zn.call(
    t,
    t.data,
    t.headers,
    null,
    t.transformRequest
  ), Ti(t.headers, "Accept"), Ti(t.headers, "Content-Type"), t.headers = Ii.merge(
    t.headers.common || {},
    t.headers[t.method] || {},
    t.headers
  ), Ii.forEach(
    ["delete", "get", "head", "post", "put", "patch", "common"],
    function(i) {
      delete t.headers[i];
    }
  );
  var o = t.adapter || _p.adapter;
  return o(t).then(function(i) {
    return eo(t), i.data = Zn.call(
      t,
      i.data,
      i.headers,
      i.status,
      t.transformResponse
    ), i;
  }, function(i) {
    return yp(i) || (eo(t), i && i.response && (i.response.data = Zn.call(
      t,
      i.response.data,
      i.response.headers,
      i.response.status,
      t.transformResponse
    ))), Promise.reject(i);
  });
}, Se = de, Ar = function(t, o) {
  o = o || {};
  var n = {};
  function i(d, u) {
    return Se.isPlainObject(d) && Se.isPlainObject(u) ? Se.merge(d, u) : Se.isEmptyObject(u) ? Se.merge({}, d) : Se.isPlainObject(u) ? Se.merge({}, u) : Se.isArray(u) ? u.slice() : u;
  }
  function r(d) {
    if (Se.isUndefined(o[d])) {
      if (!Se.isUndefined(t[d]))
        return i(void 0, t[d]);
    } else return i(t[d], o[d]);
  }
  function a(d) {
    if (!Se.isUndefined(o[d]))
      return i(void 0, o[d]);
  }
  function s(d) {
    if (Se.isUndefined(o[d])) {
      if (!Se.isUndefined(t[d]))
        return i(void 0, t[d]);
    } else return i(void 0, o[d]);
  }
  function l(d) {
    if (d in o)
      return i(t[d], o[d]);
    if (d in t)
      return i(void 0, t[d]);
  }
  var c = {
    url: a,
    method: a,
    data: a,
    baseURL: s,
    transformRequest: s,
    transformResponse: s,
    paramsSerializer: s,
    timeout: s,
    timeoutMessage: s,
    withCredentials: s,
    withXSRFToken: s,
    adapter: s,
    responseType: s,
    xsrfCookieName: s,
    xsrfHeaderName: s,
    onUploadProgress: s,
    onDownloadProgress: s,
    decompress: s,
    maxContentLength: s,
    maxBodyLength: s,
    beforeRedirect: s,
    transport: s,
    httpAgent: s,
    httpsAgent: s,
    cancelToken: s,
    socketPath: s,
    responseEncoding: s,
    validateStatus: l
  };
  return Se.forEach(Object.keys(t).concat(Object.keys(o)), function(u) {
    var f = c[u] || r, p = f(u);
    Se.isUndefined(p) && f !== l || (n[u] = p);
  }), n;
}, to, Ai;
function Dr() {
  return Ai || (Ai = 1, to = {
    version: "0.28.1"
  }), to;
}
var wp = Dr().version, Ze = ft, Ro = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(function(e, t) {
  Ro[e] = function(n) {
    return typeof n === e || "a" + (t < 1 ? "n " : " ") + e;
  };
});
var Di = {};
Ro.transitional = function(t, o, n) {
  function i(r, a) {
    return "[Axios v" + wp + "] Transitional option '" + r + "'" + a + (n ? ". " + n : "");
  }
  return function(r, a, s) {
    if (t === !1)
      throw new Ze(
        i(a, " has been removed" + (o ? " in " + o : "")),
        Ze.ERR_DEPRECATED
      );
    return o && !Di[a] && (Di[a] = !0, console.warn(
      i(
        a,
        " has been deprecated since v" + o + " and will be removed in the near future"
      )
    )), t ? t(r, a, s) : !0;
  };
};
function Sp(e, t, o) {
  if (typeof e != "object")
    throw new Ze("options must be an object", Ze.ERR_BAD_OPTION_VALUE);
  for (var n = Object.keys(e), i = n.length; i-- > 0; ) {
    var r = n[i], a = t[r];
    if (a) {
      var s = e[r], l = s === void 0 || a(s, r, e);
      if (l !== !0)
        throw new Ze("option " + r + " must be " + l, Ze.ERR_BAD_OPTION_VALUE);
      continue;
    }
    if (o !== !0)
      throw new Ze("Unknown option " + r, Ze.ERR_BAD_OPTION);
  }
}
var Ep = {
  assertOptions: Sp,
  validators: Ro
}, Vo = de, kp = Er, Oi = Uf, Mi = Cp, Dn = Ar, xp = Ir, _o = Ep, Ge = _o.validators;
function St(e) {
  this.defaults = e, this.interceptors = {
    request: new Oi(),
    response: new Oi()
  };
}
St.prototype.request = function(t, o) {
  typeof t == "string" ? (o = o || {}, o.url = t) : o = t || {}, o = Dn(this.defaults, o), o.method ? o.method = o.method.toLowerCase() : this.defaults.method ? o.method = this.defaults.method.toLowerCase() : o.method = "get";
  var n = o.transitional;
  n !== void 0 && _o.assertOptions(n, {
    silentJSONParsing: Ge.transitional(Ge.boolean),
    forcedJSONParsing: Ge.transitional(Ge.boolean),
    clarifyTimeoutError: Ge.transitional(Ge.boolean)
  }, !1);
  var i = o.paramsSerializer;
  i !== void 0 && _o.assertOptions(i, {
    encode: Ge.function,
    serialize: Ge.function
  }, !0), Vo.isFunction(i) && (o.paramsSerializer = { serialize: i });
  var r = [], a = !0;
  this.interceptors.request.forEach(function(h) {
    typeof h.runWhen == "function" && h.runWhen(o) === !1 || (a = a && h.synchronous, r.unshift(h.fulfilled, h.rejected));
  });
  var s = [];
  this.interceptors.response.forEach(function(h) {
    s.push(h.fulfilled, h.rejected);
  });
  var l;
  if (!a) {
    var c = [Mi, void 0];
    for (Array.prototype.unshift.apply(c, r), c = c.concat(s), l = Promise.resolve(o); c.length; )
      l = l.then(c.shift(), c.shift());
    return l;
  }
  for (var d = o; r.length; ) {
    var u = r.shift(), f = r.shift();
    try {
      d = u(d);
    } catch (p) {
      f(p);
      break;
    }
  }
  try {
    l = Mi(d);
  } catch (p) {
    return Promise.reject(p);
  }
  for (; s.length; )
    l = l.then(s.shift(), s.shift());
  return l;
};
St.prototype.getUri = function(t) {
  t = Dn(this.defaults, t);
  var o = xp(t.baseURL, t.url);
  return kp(o, t.params, t.paramsSerializer);
};
Vo.forEach(["delete", "get", "head", "options"], function(t) {
  St.prototype[t] = function(o, n) {
    return this.request(Dn(n || {}, {
      method: t,
      url: o,
      data: (n || {}).data
    }));
  };
});
Vo.forEach(["post", "put", "patch"], function(t) {
  function o(n) {
    return function(r, a, s) {
      return this.request(Dn(s || {}, {
        method: t,
        headers: n ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url: r,
        data: a
      }));
    };
  }
  St.prototype[t] = o(), St.prototype[t + "Form"] = o(!0);
});
var Pp = St, no, Li;
function Ip() {
  if (Li) return no;
  Li = 1;
  var e = Tn();
  function t(o) {
    if (typeof o != "function")
      throw new TypeError("executor must be a function.");
    var n;
    this.promise = new Promise(function(a) {
      n = a;
    });
    var i = this;
    this.promise.then(function(r) {
      if (i._listeners) {
        for (var a = i._listeners.length; a-- > 0; )
          i._listeners[a](r);
        i._listeners = null;
      }
    }), this.promise.then = function(r) {
      var a, s = new Promise(function(l) {
        i.subscribe(l), a = l;
      }).then(r);
      return s.cancel = function() {
        i.unsubscribe(a);
      }, s;
    }, o(function(a, s, l) {
      i.reason || (i.reason = new e(a, s, l), n(i.reason));
    });
  }
  return t.prototype.throwIfRequested = function() {
    if (this.reason)
      throw this.reason;
  }, t.prototype.subscribe = function(n) {
    if (this.reason) {
      n(this.reason);
      return;
    }
    this._listeners ? this._listeners.push(n) : this._listeners = [n];
  }, t.prototype.unsubscribe = function(n) {
    if (this._listeners) {
      var i = this._listeners.indexOf(n);
      i !== -1 && this._listeners.splice(i, 1);
    }
  }, t.source = function() {
    var n, i = new t(function(a) {
      n = a;
    });
    return {
      token: i,
      cancel: n
    };
  }, no = t, no;
}
var oo, Bi;
function Tp() {
  return Bi || (Bi = 1, oo = function(t) {
    return function(n) {
      return t.apply(null, n);
    };
  }), oo;
}
var io, Ni;
function Ap() {
  if (Ni) return io;
  Ni = 1;
  var e = de;
  return io = function(o) {
    return e.isObject(o) && o.isAxiosError === !0;
  }, io;
}
var bo = de, Dp = pr, an = Pp, Op = Ar, Mp = No, Lp = Pr;
function Or(e) {
  var t = new an(e), o = Dp(an.prototype.request, t);
  return bo.extend(o, an.prototype, t), bo.extend(o, t), o.create = function(i) {
    return Or(Op(e, i));
  }, o;
}
var ke = Or(Mp);
ke.Axios = an;
ke.CanceledError = Tn();
ke.CancelToken = Ip();
ke.isCancel = Tr();
ke.VERSION = Dr().version;
ke.toFormData = In;
ke.AxiosError = ft;
ke.Cancel = ke.CanceledError;
ke.all = function(t) {
  return Promise.all(t);
};
ke.spread = Tp();
ke.isAxiosError = Ap();
ke.formToJSON = function(e) {
  return Lp(bo.isHTMLForm(e) ? new FormData(e) : e);
};
Ao.exports = ke;
Ao.exports.default = ke;
var Bp = Ao.exports, Np = Bp;
const Rp = /* @__PURE__ */ ba(Np);
let pe = null;
const Vp = (e) => ({ data: t, type: o }) => {
  if (typeof t == "function") {
    e.interceptors[o].use(t);
    return;
  }
  Array.isArray(t) && t.forEach((n) => {
    if (n) {
      if (Array.isArray(n)) {
        e.interceptors[o].use(...n);
        return;
      }
      typeof n == "function" && e.interceptors[o].use(n);
    }
  });
}, Jm = ji({
  id: Vt.Http,
  type: "MetaService",
  options: {
    axiosConfig: {
      // axios 配置
      baseURL: "",
      withCredentials: !1,
      // 跨域请求时是否需要使用凭证
      headers: {}
      // 请求头
    },
    interceptors: {
      // 拦截器
      request: [],
      // 支持配置多个请求拦截器，先注册后执行
      response: []
      // 支持配置多个响应拦截器，先注册先执行
    }
  },
  init: ({ options: e = {} }) => {
    const { axiosConfig: t = {}, interceptors: o = {} } = e, { request: n = [], response: i = [] } = o;
    pe = Rp.create(t);
    const r = Vp(pe);
    r({ data: n, type: "request" }), r({ data: i, type: "response" });
  },
  apis: () => ({
    getHttp: () => pe,
    get: (...e) => pe == null ? void 0 : pe.get(...e),
    post: (...e) => pe == null ? void 0 : pe.post(...e),
    request: (...e) => pe == null ? void 0 : pe.request(...e),
    put: (...e) => pe == null ? void 0 : pe.put(...e),
    delete: (...e) => pe == null ? void 0 : pe.delete(...e)
  })
});
export {
  uu as BindI18n,
  Lm as BlockDeployDialog,
  Am as BlockDescription,
  Pm as BlockHistoryList,
  Tm as BlockLinkEvent,
  Im as BlockLinkField,
  Xa as ButtonGroup,
  Fm as CanvasDragItem,
  fs as CloseIcon,
  Ia as ConfigCollapse,
  Ji as ConfigGroup,
  Eo as ConfigItem,
  vm as ConfigRender,
  Mm as EmptyTip,
  qm as GenerateCodeService,
  Hm as GlobalService,
  Jm as HttpService,
  Vm as I18nInput,
  Om as LifeCycles,
  cs as LinkButton,
  Sl as MaskModal,
  ar as MetaChildItem,
  Em as MetaCodeEditor,
  lr as MetaDescription,
  Ts as MetaForm,
  Bm as MetaList,
  ym as MetaListActions,
  Al as MetaListItem,
  Ll as MetaListItems,
  _m as MetaListTitle,
  bm as MetaModal,
  Cm as MetaModalItem,
  wm as MetaPopover,
  Um as Modal,
  xm as MonacoEditor,
  jm as Notify,
  Rm as Pane,
  Dm as PluginBlockList,
  hm as PluginPanel,
  gm as PluginRightMenu,
  mm as PluginSetting,
  Tc as PublicIcon,
  ud as SearchEmpty,
  fd as SelectAll,
  Nm as SplitPanes,
  ko as SvgButton,
  zm as ToolbarBase,
  km as VideoGuide,
  kn as VueMonaco,
  $m as injectGlobalComponents,
  Sm as setGlobalMonacoEditorTheme,
  Bl as useModal
};
//# sourceMappingURL=index.js.map
